"use strict";(self.webpackChunk_dashlane_leeloo=self.webpackChunk_dashlane_leeloo||[]).push([[316],{82994:(e,t,i)=>{i.d(t,{s:()=>p}),i(96832);var n=i(78971),o=i(82598),s=i(33354),r=i(91871),a=i(88203);let l=function(e){return e.LastAdmin="LastAdmin",e.GroupSharing="GroupSharing",e.CollectionSharing="CollectionSharing",e.Generic="Generic",e}({});var c=i(65580),d=i(44110);const u=({reason:e,translations:t,goToSharingAccess:i,closeCantDeleteDialog:o})=>{const{translate:s}=(0,a.Z)(),r=((e,t)=>{const{groupSharingTitle:i,lastAdminTitle:n,collectionSharingTitle:o,genericErrorTitle:s}=e;switch(t){case l.LastAdmin:return n;case l.GroupSharing:return i;case l.CollectionSharing:return o;case l.Generic:return s;default:return(0,c.U)(t)}})(t,e),u=((e,t)=>{const{groupSharingSubtitle:i,lastAdminSubtitle:n,collectionSharingSubtitle:o,genericErrorSubtitle:s}=e;switch(t){case l.LastAdmin:return n;case l.GroupSharing:return i;case l.CollectionSharing:return o;case l.Generic:return s;default:return(0,c.U)(t)}})(t,e);return(0,d.tZ)(n.Vq,{isOpen:!0,onClose:o,title:null!=r?r:"",closeActionLabel:s("_common_dialog_dismiss_button"),actions:e===l.LastAdmin||l.GroupSharing||l.CollectionSharing?{primary:{children:t.lastAdminActionLabel,onClick:()=>{i(),o()}}}:void 0,children:u})};var m=i(37527);const g=({closeConfirmDeleteDialog:e,onDeleteConfirm:t,translations:i})=>{const{translate:o}=(0,a.Z)(),{confirmDeleteSubtitle:s,confirmDeleteTitle:r,confirmDeleteDismiss:l,confirmDeleteConfirm:c}=i;return(0,d.tZ)(n.Vq,{title:r,onClose:e,isOpen:!0,dialogClassName:m.Ht,closeActionLabel:o("_common_dialog_dismiss_button"),isDestructive:!0,actions:{primary:{children:c,onClick:t,id:"deletion-dialog-confirm-button"},secondary:{children:l,onClick:e,autoFocus:!0,id:"deletion-dialog-dismiss-button"}},children:s})},p=({closeConfirmDeleteDialog:e,goToSharingAccess:t,isVisible:i,itemId:c,onDeletionSuccess:m,sharingStatus:p,translations:_,vaultItemType:D,isShared:h,isSharedViaUserGroup:S,isItemInCollection:f,isLastAdmin:I})=>{const{showToast:T}=(0,n.pm)(),{translate:C}=(0,a.Z)(),{deleteVaultItems:E}=(0,o.u)(r.L);if(!i)return null;let b;return(h||p?.isShared)&&(S&&(b=l.GroupSharing),I&&(b=l.LastAdmin),f&&(b=l.CollectionSharing)),b&&t?(0,d.tZ)(u,{reason:b,translations:_,goToSharingAccess:t,closeCantDeleteDialog:e}):(0,d.tZ)(g,{closeConfirmDeleteDialog:e,onDeleteConfirm:async()=>{try{var e;(await E({ids:[c],vaultItemType:D})).tag===s.rq.Success?(T({description:null!=(e=_.deleteSuccessToast)?e:C("webapp_personal_info_edition_delete_success_toast")}),m()):T({description:C("_common_generic_error"),mood:"danger",isManualDismiss:!0})}catch(e){T({description:C("_common_generic_error"),mood:"danger",isManualDismiss:!0})}},translations:_})}},34383:(e,t,i)=>{i.r(t),i.d(t,{Connected:()=>m}),i(96832);var n=i(99852),o=i(91871),s=i(39431),r=i(44105),a=i(15446),l=i(16390),c=i(86816),d=i(44110);const u=(0,c.Y)({getDeleteTitle:e=>e("webapp_personal_info_edition_delete_title_address"),getItemTypeDescription:e=>e("webapp_personal_info_edition_header_address_description"),getTitle:e=>{var t;return null!=(t=e.itemName)?t:""},iconType:a.Tu.address,vaultItemType:s.U.Address,renderForm:(e,t,i,n)=>{const o=r.c[e.globalState.locale.country]||r.c.US,s={...t,localeFormat:t.localeFormat||o};return(0,d.tZ)(l.k,{lee:e,currentValues:s,signalEditedValues:n,ref:i})}}),m=e=>{const t=(0,n.k)(o.L,"query",{vaultItemTypes:[s.U.Address],ids:[`{${e.match.params.uuid}}`]});return(0,d.tZ)(u,{...e,item:t.data?.addressesResult.items[0]})}},86816:(e,t,i)=>{i.d(t,{Y:()=>I});var n=i(96832),o=i(50756),s=i(91871),r=i(39431),a=i(82598),l=i(14900),c=i(63520),d=i(15446),u=i(82994),m=i(92077),g=i(86498),p=i(88203),_=i(45272),D=i(18402),h=i.n(D),S=i(44110);const f={DELETE_CONFIRM:"webapp_personal_info_edition_delete_confirm",DELETE_DISMISS:"webapp_personal_info_edition_delete_dismiss",DELETE_SUBTITLE:"webapp_personal_info_edition_delete_subtitle"};function I(e){const{getItemTypeDescription:t,getDeleteTitle:i,getTitle:D,iconType:I,vaultItemType:T,renderForm:C}=e;return({lee:e,item:E,match:b})=>{const y=(0,n.useRef)(null),w=(0,g.V)(),{translate:L}=(0,p.Z)(),{routes:A}=(0,m.Xo)(),{updateVaultItem:V}=(0,a.u)(s.L),[v,U]=(0,n.useState)(!1),[Z,P]=(0,n.useState)(!1);if((0,n.useEffect)((()=>{const e={[r.U.Address]:o.PageView.ItemAddressDetails,[r.U.Company]:o.PageView.ItemCompanyDetails,[r.U.Email]:o.PageView.ItemEmailDetails,[r.U.Identity]:o.PageView.ItemIdentityDetails,[r.U.Phone]:o.PageView.ItemPhoneDetails,[r.U.Website]:o.PageView.ItemWebsiteDetails};(0,_.Nc)(e[T])}),[]),!E)return null;const k=()=>{(0,_.Nc)(o.PageView.ItemPersonalInfoList),(0,m.uX)(A.userPersonalInfo)},G=E?D(E,L):"",B={confirmDeleteConfirm:L(f.DELETE_CONFIRM),confirmDeleteDismiss:L(f.DELETE_DISMISS),confirmDeleteSubtitle:L(f.DELETE_SUBTITLE),confirmDeleteTitle:i(L)};return(0,S.BX)(c.zI,{isUsingNewDesign:!0,isViewingExistingItem:Boolean(b.params?.uuid),itemHasBeenEdited:v,onNavigateOut:k,onSubmit:async()=>{E.id&&Boolean(y.current?.isFormValid())&&(await(async()=>{const e=y.current?.getValues();e&&"success"!==(await V({vaultItemType:T,content:e,id:E.id})).tag&&w.showAlert(L("_common_generic_error"),l.BLW.ERROR)})(),k())},onClickDelete:()=>P(!0),ignoreCloseOnEscape:Z,formId:"edit_personalinfo_panel",header:(0,S.tZ)(c.V9,{icon:(0,S.tZ)(d.ZP,{iconSize:d.Jh.headerEditPanelIcon,iconType:I}),iconBackgroundColor:h()["--dash-green-00"],title:G,titleDescription:t(L)}),children:[C(e,E,y,(()=>U(!0))),(0,S.tZ)(u.s,{isVisible:Z,itemId:E.id,closeConfirmDeleteDialog:()=>P(!1),onDeletionSuccess:k,translations:B,vaultItemType:T})]})}}}}]);