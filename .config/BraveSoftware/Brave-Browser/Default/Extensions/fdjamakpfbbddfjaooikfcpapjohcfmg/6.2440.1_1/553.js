"use strict";(self.webpackChunk_dashlane_leeloo=self.webpackChunk_dashlane_leeloo||[]).push([[553],{75239:(e,t,n)=>{n.d(t,{C:()=>d});var a=n(96832),i=n(48038),r=n(5465),s=n(64997),o=n(65454),l=n(3843);const c=e=>!(!e?.exp_year||!e?.exp_month)&&(0,l.Z)(new Date(e.exp_year,e.exp_month,0)),d=({b2c:e,handleCardUpdate:t,pollInterval:n=3e3,timeoutAmount:l=6e5})=>{const[d,_]=(0,a.useState)(!1),[u,m]=(0,a.useState)({}),[p,g]=(0,a.useState)(),h=(0,s.Z)(),y=h.status!==i.rq.Success||!h.data,b=h?.status===i.rq.Success&&h.data?h.data[e?"b2cSubscription":"b2bSubscription"]?.billingInformation:void 0,x=b?.last4?Number(b.last4).toLocaleString("en-US",{minimumIntegerDigits:4,useGrouping:!1}):void 0,S=b?.type?(0,o.v)(b.type):void 0,f=b?.exp_year,v=b?.exp_month,C=f&&v?`${v}/${f.toString().substring(2)}`:"",E=(0,a.useCallback)((()=>{d&&_(!1),p&&clearTimeout(p)}),[d,p]);return(0,a.useEffect)((()=>E),[]),(0,a.useEffect)((()=>{if(d){const e=setInterval((()=>{r.C.refreshSubscriptionInformation()}),n);if(!p){const e=window.setTimeout(E,l);g(e)}return()=>clearInterval(e)}}),[n,d,E,l,p]),(0,a.useEffect)((()=>{if(d&&u){const e=u.last4DigitsFormatted!==x||u.expFormatted!==C;if(e&&(E(),t)){const n=!u.last4DigitsFormatted;t(e,n)}}}),[d,x,C,u,u.expFormatted,u.last4DigitsFormatted,E,t]),{loading:y,billingInformation:b,hasCreditCardPaymentMethod:!!b?.last4,last4Digits:b?.last4,last4DigitsFormatted:x,cardSvg:S,isExpired:c(b),expYear:b?.exp_year,expMonth:b?.exp_month,expFormatted:C,pollUntilCardUpdate:()=>{_(!0),m({last4DigitsFormatted:x,expFormatted:C})}}}},37466:(e,t,n)=>{n.d(t,{a:()=>s});var a=n(78971),i=n(11538),r=n(44110);const s=({scopedToPage:e=!1})=>(0,r.tZ)(a.kC,{justifyContent:"center",alignItems:"center",sx:{backgroundColor:"rgba(245, 247, 247, 0.7)",...e?{}:{position:"absolute",top:0,left:0,right:0,height:"100%"}},children:(0,r.tZ)(i.Z,{containerStyle:{marginTop:"-90px",...e?{position:"relative",height:"90vh"}:{}}})})},78060:(e,t,n)=>{n.d(t,{m:()=>s});var a=n(99852),i=n(33354),r=n(47621);const s=()=>{const{data:e,status:t}=(0,a.k)(r.o,"isTeamCreator");return t===i.rq.Loading?{status:t}:t===i.rq.Error?{status:i.rq.Success,isTeamCreator:!1}:null===e?{status:i.rq.Loading}:{status:t,isTeamCreator:e}}},28207:(e,t,n)=>{n.d(t,{u:()=>s});var a=n(99852),i=n(33354),r=n(47621);const s=()=>{const{data:e,status:t}=(0,a.k)(r.o,"getTeamCreationDateUnix");return t!==i.rq.Success?{status:t}:null===e?{status:i.rq.Loading}:{status:t,teamCreationDate:e}}},5822:(e,t,n)=>{n.d(t,{V:()=>s});var a=n(99852),i=n(33354),r=n(47621);const s=()=>{const{data:e,status:t}=(0,a.k)(r.o,"getTeamId");return t!==i.rq.Success?{status:t}:{status:t,teamId:null===e.teamId?null:Number(e.teamId)}}},3090:(e,t,n)=>{n.d(t,{e:()=>a});const a=({refusedMembers:e={}}={})=>Object.keys(e).length>0},31626:(e,t,n)=>{n.d(t,{c:()=>T});var a=n(96832),i=n(78971),r=n(50756),s=n(23619),o=n(88203),l=n(68691),c=n(45272),d=n(92077),_=n(6135),u=n(44110);const m={CONTAINER:{display:"flex",padding:"16px 8px",justifyContent:"space-between",alignItems:"center"},ITEM:{display:"flex",gap:"16px",alignItems:"flex-start"}},p=({title:e,description:t,iconName:n,button:a})=>{const{content:r,onClick:s,isUpgradeButton:o,isRoleLink:l}=a;return(0,u.BX)("div",{sx:m.CONTAINER,children:[(0,u.BX)("div",{sx:m.ITEM,children:[(0,u.tZ)(i.vY,{name:n,size:"small",mood:"brand"}),(0,u.BX)("div",{sx:{gap:" 4px",maxWidth:"320px"},children:[(0,u.tZ)(i.nv,{textStyle:"ds.title.block.small",color:"ds.text.neutral.catchy",children:e}),(0,u.tZ)(i.nv,{textStyle:"ds.body.reduced.regular",color:"ds.text.neutral.quiet",children:t})]})]}),(0,u.tZ)(i.zx,{mood:o?"brand":"neutral",intensity:"quiet",icon:o?"PremiumOutlined":void 0,layout:o?"iconLeading":void 0,role:l?"link":void 0,onClick:s,size:"small",children:r})]})};var g=n(96765),h=n(61605),y=n(19471);let b=function(e){return e.SECURITY_GUIDANCE="security_guidance",e.TRAINING="training",e.SEND_MESSAGE="send_message",e}({});const x={[b.SECURITY_GUIDANCE]:y.mA,[b.TRAINING]:y.J0,[b.SEND_MESSAGE]:y.hc},S={[b.SECURITY_GUIDANCE]:r.CallToAction.RequestDemo,[b.TRAINING]:r.CallToAction.RegisterWebinar,[b.SEND_MESSAGE]:r.CallToAction.SendEmail},f=(e,t)=>{const n=[r.CallToAction.SendEmail,r.CallToAction.RequestDemo,r.CallToAction.RegisterWebinar,r.CallToAction.Dismiss];n.push(t?r.CallToAction.ContactPhoneSupport:r.CallToAction.RequestUpgrade),(0,c.Kz)(new r.UserCallToActionEvent({callToActionList:n,chosenAction:S[e],hasChosenNoAction:!1})),(0,h.Yo)(x[e])};var v,C,E,Z;const T=({onDismiss:e})=>{var t;const{translate:n}=(0,o.Z)(),{routes:m}=(0,d.Xo)(),x=(0,s.U)(),S=(0,l.C)(),T=(0,_.S)(),D=null===T||null===S,k=null!=(t=T?.phoneSupport.enabled)&&t;return(0,a.useEffect)((()=>{(0,c.Nc)(r.PageView.TacModalContactSupport)}),[]),(0,u.tZ)(i.Vq,{isOpen:!0,onClose:()=>((e,t)=>{const n=[r.CallToAction.SendEmail,r.CallToAction.RequestDemo,r.CallToAction.RegisterWebinar,r.CallToAction.Dismiss];n.push(t?r.CallToAction.ContactPhoneSupport:r.CallToAction.RequestUpgrade),(0,c.Kz)(new r.UserCallToActionEvent({callToActionList:n,hasChosenNoAction:!0})),e()})(e,k),closeActionLabel:n("_common_dialog_dismiss_button"),title:n("team_contact_support_dialog_title"),children:D?(0,u.tZ)(i.nv,{sx:{textAlign:"center"},children:v||(v=(0,u.tZ)(i.ZX,{size:44}))}):(0,u.BX)(u.HY,{children:[(0,u.tZ)(i.nv,{sx:{marginBottom:"16px"},children:n("team_contact_support_dialog_text")}),(0,u.BX)("div",{sx:{gap:"8px"},children:[(0,u.tZ)(p,{title:n("team_contact_support_phone_support_title"),description:n("team_contact_support_phone_support_subtitle"),iconName:"ItemPhoneHomeOutlined",button:{content:n(k?"team_contact_support_request_call":"team_contact_support_upgrade_to_business_cta"),onClick:()=>((e,t,n,a,i)=>{const s=[r.CallToAction.SendEmail,r.CallToAction.RequestDemo,r.CallToAction.RegisterWebinar,r.CallToAction.Dismiss];return e?(s.push(r.CallToAction.ContactPhoneSupport),(0,c.Kz)(new r.UserCallToActionEvent({callToActionList:s,chosenAction:r.CallToAction.ContactPhoneSupport,hasChosenNoAction:!1})),void(0,h.Yo)(y.$b)):e||!n&&!a?(s.push(r.CallToAction.RequestUpgrade),(0,c.Kz)(new r.UserCallToActionEvent({callToActionList:s,chosenAction:r.CallToAction.RequestUpgrade,hasChosenNoAction:!1})),(0,d.uX)(`${t.teamAccountChangePlanRoutePath}?plan=business`)):(s.push(r.CallToAction.RequestUpgrade),(0,c.Kz)(new r.UserCallToActionEvent({callToActionList:s,chosenAction:r.CallToAction.RequestUpgrade,hasChosenNoAction:!1})),void(0,h.Yo)(`${y.ub}?plan=business&subCode=${null!=i?i:""}&utm_source=button:upgrade_business_tier+origin_page:tac/modal_contact_support+origin_component:main_app`))})(k,m,S?.isFreeTrial,S?.isGracePeriod,null!=x?x:""),isUpgradeButton:!k,isRoleLink:k||S?.isFreeTrial||S?.isGracePeriod}}),C||(C=(0,u.tZ)(g.E,{})),(0,u.tZ)(p,{title:n("team_contact_support_security_guidance_title"),description:n("team_contact_support_security_guidance_subtitle"),iconName:"ProtectionOutlined",button:{content:n("team_contact_support_request_demo"),onClick:()=>f(b.SECURITY_GUIDANCE,k),isRoleLink:!0}}),E||(E=(0,u.tZ)(g.E,{})),(0,u.tZ)(p,{title:n("team_contact_support_training_title"),description:n("team_contact_support_training_subtitle"),iconName:"AccountSettingsOutlined",button:{content:n("team_contact_support_register_for_webinar"),onClick:()=>f(b.TRAINING,k),isRoleLink:!0}}),Z||(Z=(0,u.tZ)(g.E,{})),(0,u.tZ)(p,{title:n("team_contact_support_help_customer_support_title"),description:n("team_contact_support_help_customer_support_subtitle"),iconName:"ItemEmailOutlined",button:{content:n("team_contact_support_send_message"),onClick:()=>f(b.SEND_MESSAGE,k),isRoleLink:!0}})]})]})})}},96765:(e,t,n)=>{n.d(t,{E:()=>i});var a=n(44110);const i=()=>(0,a.tZ)("hr",{sx:{border:"0",borderTop:"1px solid ds.border.neutral.quiet.idle",height:"1px",width:"100%",mt:"8px",mb:"8px"}})},83961:(e,t,n)=>{n.d(t,{Z:()=>DE,n:()=>TE});var a=n(59522),i=n(92077),r=n(96832),s=n(48038),o=n(78971),l=n(50756),c=n(99852),d=n(47621),_=n(45836),u=n(27144),m=n(45272),p=n(67668),g=n(88203),h=n(75239);const y={borderStyle:"solid",borderColor:"ds.border.neutral.quiet.idle",borderWidth:"1px",borderRadius:"8px",backgroundColor:"ds.container.agnostic.neutral.supershy",padding:"32px"},b={borderStyle:"solid",borderColor:"ds.border.neutral.quiet.idle",borderWidth:"1px",backgroundColor:"ds.container.agnostic.neutral.supershy",padding:"24px",borderRadius:"8px"},x={padding:"10px 8px",width:"40px",height:"40px",borderRadius:"8px",backgroundColor:"ds.container.expressive.brand.quiet.idle"};var S,f=n(44110);const v=()=>{const{translate:e}=(0,g.Z)(),{loading:t,last4DigitsFormatted:n,expFormatted:a,cardSvg:i}=(0,h.C)({});return t?S||(S=(0,f.tZ)(o.ZX,{})):(0,f.BX)(o.kC,{flexDirection:"column",gap:"16px",sx:b,children:[(0,f.tZ)(o.X6,{as:"h2",color:"ds.text.neutral.catchy",children:e("team_account_addseats_success_credit_card_header")}),(0,f.BX)(o.kC,{flexDirection:"column",gap:"8px",children:[(0,f.BX)(o.kC,{alignItems:"center",gap:"8px",children:[i,(0,f.BX)(o.nv,{color:"ds.text.neutral.standard",children:["•••• ",n]})]}),(0,f.tZ)(o.kC,{children:(0,f.tZ)(o.nv,{color:"ds.text.neutral.standard",children:e("team_account_addseats_success_credit_card_expires",{expirationDate:a})})})]})]})};var C;const E=()=>{const{translate:e}=(0,g.Z)(),{routes:t}=(0,i.Xo)(),n=(0,i.k6)();return(0,f.tZ)("div",{children:(0,f.tZ)(o.zx,{mood:"neutral",intensity:"supershy",onClick:()=>{n.length>1?n.goBack():(0,i.uX)(t.teamAccountRoutePath)},children:(0,f.BX)(o.kC,{alignItems:"center",children:[C||(C=(0,f.tZ)(o.JO,{size:"medium",name:"ArrowLeftOutlined"})),(0,f.tZ)(o.nv,{color:"ds.text.neutral.standard",textStyle:"ds.title.block.medium",sx:{marginLeft:"14px"},children:e("_common_action_back")})]})})})};var Z=n(64997);const T=()=>{const e=(0,Z.Z)(),t=e.status!==s.rq.Success||!e.data,n=e?.status===s.rq.Success?e?.data?.b2bSubscription?.billingInformation:null,a=n?.country;return{loading:t,billingCountry:a}};var D=n(39378),k=n(38452),I=n(18854),A=n(6697);const N={alignItems:"center",backgroundColor:"ds.background.alternate",borderBottom:"1px solid ds.border.neutral.quiet.idle",display:"flex",height:"80px",justifyContent:"flex-end",padding:"0 48px"},w=({children:e})=>(0,f.tZ)("header",{sx:N,children:e}),O={LAYOUT_CONTAINER:{display:"flex",flexDirection:"column",overflowY:"hidden"},MAIN_AREA:{display:"flex",backgroundColor:"ds.background.alternate",height:" 100vh",position:"relative",overflowY:"hidden",width:"100vw"},CONTENT:{width:"100%",overflowY:"auto"},SIDE_NAV:{backgroundColor:"ds.container.agnostic.inverse.standard",nav:{backgroundColor:"ds.container.agnostic.inverse.standard"}}},R=e=>{const{brand:t,children:n,header:a,sideNav:i,banner:r,dialog:s,bottomButton:o}=e;return(0,f.tZ)("div",{sx:O.LAYOUT_CONTAINER,children:(0,f.BX)("div",{sx:O.MAIN_AREA,children:[(0,f.BX)("div",{sx:O.SIDE_NAV,children:[(0,f.tZ)("div",{children:t}),(0,f.tZ)("div",{style:{height:"calc(100% - 160px)",overflow:"auto"},children:i}),(0,f.tZ)("div",{style:{height:"80px"},children:o})]}),(0,f.BX)("div",{sx:O.CONTENT,children:[r?(0,f.tZ)("div",{children:r}):null,(0,f.tZ)("div",{children:a}),(0,f.tZ)("main",{children:n})]}),s?(0,f.BX)("div",{children:[s," "]}):null]})})};var L=n(83849),M=n.n(L),B=n(14900),P=n(80443),U=n(77550),z=n(25918),X=n(61605),q=n(36487),j=n(9673),G=n(23619),F=n(82598),V=n(87279);const H=r.createContext(null),W="NETWORK ERROR",$=({globalReportError:e,children:t})=>{const[n,a]=r.useState([]),{translate:i}=(0,g.Z)(),s=e=>{n.find((t=>t.title===e.title&&t.message===e.message))||a((t=>[...t,e]))};return(0,f.tZ)(H.Provider,{value:{queue:n,addAlertToQueue:s,popAlertFromQueue:()=>{a((e=>e.slice(1)))},reportTACError:(t,n)=>{t.message.toUpperCase()===W&&s({title:i("_common_alert_network_error_title"),message:i("_common_alert_network_error_message")}),e(t,n)}},children:t})},Y=()=>{const e=r.useContext(H);if(!e)throw new Error("useAlertQueue must be called from within an AlertQueueProvider");return e},K=({onDismiss:e,onFeedbackSent:t})=>{const[n,a]=(0,r.useState)(!0),[i,s]=(0,r.useState)(!1),[c,_]=(0,r.useState)(!1),{translate:u}=(0,g.Z)(),{reportTACError:p}=Y(),h=(0,r.useRef)(null),[y,b]=(0,r.useState)(""),{sendFeedback:x}=(0,F.u)(d.o);(0,r.useEffect)((()=>{(0,m.Nc)(l.PageView.TacAccountSendFeedback,l.BrowseComponent.Tac)}),[]);return(0,f.BX)(o.Vq,{isOpen:!0,onClose:()=>{(0,m.Kz)(new l.UserCallToActionEvent({hasChosenNoAction:!0})),e()},actions:{primary:{children:u("team_feedback_dialog_button_ok"),onClick:()=>(async()=>{s(!0),_(!1);const e=await x({feedbackBody:y});(0,V.d6)(e)?((0,m.Kz)(new l.UserCallToActionEvent({callToActionList:[l.CallToAction.SendEmail],chosenAction:l.CallToAction.SendEmail,hasChosenNoAction:!1})),t()):(p(new Error(e.error.message)),s(!1),_(!0))})(),disabled:n||i}},title:u("team_feedback_dialog_upd_title"),closeActionLabel:u("_common_dialog_dismiss_button"),children:[(0,f.tZ)(o.nv,{textStyle:"ds.body.reduced.regular",color:"ds.text.neutral.quiet",children:u.markup("team_feedback_dialog_upd_text_markup",{},{linkTarget:"_blank"})}),(0,f.tZ)(o.oi,{sx:{resize:"vertical",maxHeight:"300px"},value:y,ref:h,placeholder:u("team_feedback_dialog_upd_textarea_label"),onChange:e=>{var t;b(null!=(t=h?.current?.value)?t:"");const n=!e.target.value;a(n)}}),c?(0,f.tZ)(o.nv,{color:"ds.text.danger.quiet",textStyle:"ds.body.standard.strong",children:u.markup("team_feedback_dialog_error_markup")}):null]})};var Q;const J=({onDismiss:e})=>{const{translate:t}=(0,g.Z)();return(0,f.tZ)(o.Vq,{isOpen:!0,onClose:e,closeActionLabel:t("_common_dialog_dismiss_button"),title:t("team_feedback_result_dialog_title"),children:(0,f.BX)("div",{sx:{display:"flex",gap:"20px",alignItems:"center"},children:[Q||(Q=(0,f.tZ)(o.JO,{name:"FeedbackSuccessOutlined",size:"xlarge",color:"ds.text.positive.standard"})),(0,f.tZ)("div",{children:(0,f.tZ)(o.nv,{textStyle:"ds.body.standard.regular",children:`${t("team_feedback_result_body_title")}. ${t("team_feedback_result_body_text")}`})})]})})};var ee=function(e){return e[e.FeedbackPopup=0]="FeedbackPopup",e[e.ResultPopup=1]="ResultPopup",e[e.Done=2]="Done",e}(ee||{});const te=({onDismiss:e,onSend:t})=>{const[n,a]=(0,r.useState)(ee.FeedbackPopup);let i;const s=()=>{clearTimeout(i),a(ee.Done),t()};return(0,f.BX)("div",{children:[n===ee.FeedbackPopup&&(0,f.tZ)(K,{onDismiss:e,onFeedbackSent:()=>{a(ee.ResultPopup),i=window.setTimeout((()=>{s()}),1e4)}}),n===ee.ResultPopup&&(0,f.tZ)(J,{onDismiss:s})]})};var ne=n(31626),ae=n(19471),ie=n(15607),re=n(68691);const se=()=>{const e=(0,re.C)(),t=(0,ie.lZ)(),{translate:n}=(0,g.Z)();if(!e||t.isLoading||void 0===t.isTeamSoftDiscontinued||void 0===t.isTrial)return null;const a=e.daysLeftInTrial,i=e.spaceTier===_.lD.Team,r=e.isGracePeriod,s=t.isTeamSoftDiscontinued&&t.isTrial;return(0,f.tZ)(o.Ct,{label:s?n("trial_ended_discontinued"):r?n("free_trial_expired_badge"):n(i?"team_trial_days_left_badge":"business_trial_days_left_badge",{count:a}),mood:r||s?"warning":"brand",layout:"labelOnly",intensity:r?"catchy":"quiet",sx:{marginTop:"3px"}})};var oe=n(69898);var le,ce;const de=({lee:e})=>{const[t,n]=(0,r.useState)(!1),[a,s]=(0,r.useState)(!1),[c,d]=(0,r.useState)(!1),[_,u]=(0,r.useState)(!1),p=(0,U.B)(),h=(0,G.U)(),{translate:y}=(0,g.Z)(),b=(0,q.a)(e.dispatchGlobal),x=(0,j.w)(),{routes:S}=(0,i.Xo)(),v=(e,t,n)=>e=>{n(e)},C=({className:e,...t})=>(0,f.tZ)(B.zxk,{type:"button",nature:"ghost",className:M()("dropdownElement--fRxFyumXai",e),...t}),E=a?(0,f.tZ)(te,{onDismiss:()=>s(!1),onSend:()=>s(!1)}):null,Z=c?(0,f.tZ)(ne.c,{onDismiss:()=>d(!1)}):null,T=p?.premiumStatus&&!(0,P.wt)(p?.premiumStatus)&&((0,P.pq)(p?.premiumStatus)||(0,P.f1)(p?.premiumStatus)),D=p?.premiumStatus&&(0,P.pq)(p?.premiumStatus)?"team":"business",k=p?.premiumStatus&&(0,P.wt)(p?.premiumStatus),I=e.permission.adminAccess.hasBillingAccess,A=`button:buy_dashlane+click_origin:account_dropdown+origin_page:${x||void 0}+origin_component:main_app`,N=`${ae.ub}?plan=${D}&subCode=${null!=h?h:""}&utm_source=${A}`;return(0,f.BX)(f.HY,{children:[(0,f.tZ)("div",{className:"teamAccountDropdown--XD04fGIw1S",children:(0,f.tZ)(z.Lt,{alignment:z.oA.End,position:z.ir.Bottom,onToggle:()=>{n(!t)},withBackdrop:!1,renderRoot:e=>(e=>(0,f.tZ)(o.zx,{mood:"neutral",intensity:"quiet",layout:"iconTrailing",icon:t?"CaretUpOutlined":"CaretDownOutlined",onClick:e,"data-testid":"account-dropdown",children:y("team_account")}))(e),children:(0,f.BX)("div",{className:"dropdownMenu--Uz1kni0KIt",children:[k&&I?(0,f.tZ)(C,{onClick:v(0,0,(()=>((0,m.Kz)(new l.UserClickEvent({button:l.Button.BuyDashlane,clickOrigin:l.ClickOrigin.AccountDropdown})),void(0,X.Yo)(N)))),children:(0,f.BX)("div",{children:[y("team_buy_dashlane"),le||(le=(0,f.tZ)(se,{}))]})}):null,I?(0,f.tZ)(C,{onClick:v(0,0,(()=>{(0,i.uX)(S.teamAccountRoutePath)})),children:y("team_plan")}):null,(0,f.tZ)(C,{onClick:v(0,0,(()=>{(0,i.uX)("/")})),children:y("team_webapp")}),T&&I?(0,f.tZ)(C,{onClick:v(0,0,(()=>(0,i.uX)(`${S.teamAccountChangePlanRoutePath}`))),children:y("team_upgrade")}):null,(0,f.tZ)(C,{onClick:v(0,0,(()=>(0,X.Yo)(ae.Pr))),children:y("team_service_status")}),(0,f.tZ)(C,{onClick:v(0,0,(()=>(0,X.Yo)(ae.FX))),children:y("team_support")}),I?(0,f.tZ)(C,{onClick:()=>d(!0),children:y("team_contact_support_menu_item")}):null,(0,f.tZ)(C,{onClick:v(0,0,(()=>s(!0))),children:y("team_feedback")}),ce||(ce=(0,f.tZ)("hr",{})),(0,f.tZ)(C,{onClick:v(0,0,(()=>{b()})),className:"logout--x9WN8NkY4R",children:y("team_logout")})]})})}),_?(0,f.tZ)(oe.F,{isShown:_,setIsShown:u,isFromVault:!1}):null,E,Z]})};var _e=n(95870),ue=n(48847),me=n(55139),pe=n(61607),ge=n(79846);const he=r.createContext(null),ye=({children:e})=>{const[t,n]=r.useState(!1);return(0,f.tZ)(he.Provider,{value:{hasNewBreaches:t,setHasNewBreaches:n},children:e})},be=()=>{const e=r.useContext(he);if(!e)throw new Error("useSideNavNotification must be called from within an SideNavNotificationProvider");return e};function xe(e){var t;const n=(0,G.U)(),a=(0,re.C)();if(!a)return null;let i;return i="hasFullAccess"in e&&e.hasFullAccess||e.hasBillingAccess,{shouldShowBuyOrUpgradePaywall:null!=(t=i)&&t,isTrialOrGracePeriod:a.isFreeTrial||a.isGracePeriod,planType:a.spaceTier,accountSubscriptionCode:null!=n?n:""}}var Se=n(22640),fe=n(5465);function ve(e){const[t,n]=r.useState(!0),[a,i]=r.useState({}),[s,o]=r.useState(null),[l,c]=r.useState(null),[d,_]=r.useState(null);return r.useEffect((()=>{if(void 0===e)return;const t=new AbortController;return(async()=>{n(!0);try{const{teamInfo:{ssoServiceProviderUrl:e,ssoIdpMetadata:n,ssoEnabled:a,recoveryEnabled:r,duoSecretKey:s,duoIntegrationKey:o,duoApiHostname:l,duo:d,activeDirectoryToken:u,activeDirectorySyncType:m,activeDirectorySyncStatus:p,uuid:g},capabilities:h,planTier:y}=await async function(){const e=await fe.C.getTeamInfo();if(e.success){const{data:{teamInfo:t,planTier:n,capabilities:a,seats:i}}=e;return{teamInfo:t,planTier:n,capabilities:a,seats:i}}{const{message:t}=e;throw new Error(`getTeamInfo: failed with error: ${t}`)}}();if(t.signal.aborted)return;i({ssoServiceProviderUrl:e,ssoIdpMetadata:n,ssoEnabled:a,recoveryEnabled:r,duoSecretKey:s,duoIntegrationKey:o,duoApiHostname:l,duo:d,activeDirectoryToken:u,activeDirectorySyncType:m,activeDirectorySyncStatus:p,uuid:g}),_(y),c(h)}catch(e){const t=new Error(`useTeamSettings: ${e}`);o(t)}finally{n(!1)}})(),()=>{t.abort()}}),[e]),{teamSettingsLoading:t,teamSettingsError:s,teamSettings:a,updateTeamSettings:async t=>{if(null===e)return;const n={teamId:e,settings:t};try{await(0,Se.jy)(n)}catch(e){var r;throw new Error(null!=(r=e?.additionalInfo?.message)?r:"Failed to save metadata")}const s={...a,...t};i(s)},planTier:d,teamCapabilities:l}}var Ce=n(19122),Ee=n(42714),Ze=n(33354),Te=n(14943),De=n(2337);const ke=()=>{const e=(0,Te.Y)(),t=(0,Ee.o)("monetization_extension_policies_repackage"),n=(0,re.C)();if(e.status!==Ze.rq.Success||!t)return{hasStarterPaywall:!1,hasTrialBusinessPaywall:!1,hasExcludedPolicy:()=>!1};const a=e.data.capabilities?.adminPolicies?.info.excludedPolicies||[],i="full"===(0,De.R)(e.data);return{hasStarterPaywall:(0,P.f1)(e.data)&&i,hasTrialBusinessPaywall:(0,P.NG)(e.data)&&i&&!!n?.isFreeTrial,hasExcludedPolicy:e=>a.includes(e)}},Ie=(0,r.createContext)(!1),Ae=({children:e})=>{const t=(0,Ee.o)("setup_rollout_splunk_integration_prod");return(0,f.tZ)(Ie.Provider,{value:!!t,children:e})};var Ne=n(15192),we=n(84133);const Oe=({settingsRoute:e,children:t})=>{const{translate:n}=(0,g.Z)(),a=(0,Ne.k6)(),i=(0,we.h)(),{unseen:r,setAsSeen:s}=(0,ge.m)(_e.O.AccountRecoveryAvailableAdminTooltip);return!r||i.status!==Ze.rq.Success||i.data?(0,f.tZ)("div",{children:t}):(0,f.tZ)(B.ua7,{sx:{width:"312px",minWidth:"312px",textAlign:"left"},trigger:"persist",placement:"left",offset:[0,30],arrowSize:12,content:(0,f.BX)(o.kC,{gap:"8px",sx:{padding:"8px"},children:[(0,f.tZ)(B.nvN,{size:"large",as:"h3",sx:{fontWeight:600,color:"ds.text.inverse.catchy"},children:n("team_account_recovery_popover_title")}),(0,f.tZ)(B.nvN,{color:"white",size:"x-small",children:n("team_account_recovery_popover_description")}),(0,f.BX)(o.kC,{gap:"8px",justifyContent:"flex-end",sx:{width:"100%",marginTop:"8px"},children:[(0,f.tZ)(o.zx,{type:"button",mood:"neutral",size:"small","data-testid":"ar-tooltip-dismiss",onClick:()=>s(),children:n("team_account_recovery_popover_dismiss")}),(0,f.tZ)(o.zx,{type:"button",mood:"brand",size:"small","data-testid":"ar-tooltip-go-to-settings",onClick:()=>{s(),a.push(e)},children:n("team_account_recovery_popover_go_to_settings")})]})]}),children:(0,f.tZ)("div",{children:t})})},Re={CONTAINER:{alignItems:"center",borderRadius:"4px",cursor:"pointer",display:"flex",padding:"4px 4px 4px 12px",minHeight:"40px"},CONTAINER_ON_HOVER:{"&:hover":{backgroundColor:"ds.container.expressive.neutral.supershy.hover"}},CONTAINER_COLLAPSED:{textStyle:"ds.title.block.small",alignItems:"center",flexDirection:"column",padding:"6px"},CONTAINER_SELECTED:{backgroundColor:"ds.container.expressive.neutral.supershy.active"},END_ADORNMENT_COLLAPSED:{display:"none"},ICON:{marginBottom:"0",marginRight:"16px",minWidth:"20px",svg:{fill:"ds.text.inverse.catchy"},"&:hover":{svg:{fill:"ds.text.inverse.catchy"}}},ICON_COLLAPSED:{marginBottom:"4px",marginRight:"0"},LABEL:{color:"ds.text.inverse.catchy",hyphens:"auto",minWidth:"0",wordWrap:"break-word"},LABEL_COLLAPSED:{textStyle:"ds.title.block.small",textAlign:"center",width:"100%"},LABEL_CONTAINER:{display:"flex",alignItems:"flex-start",flexDirection:"column",gap:"2px"},NOTIFICATION:{alignSelf:"flex-start",backgroundColor:"ds.container.expressive.warning.catchy.idle",borderRadius:"50%",flexShrink:"0",height:"8px",marginLeft:"4px",width:"8px"},NOTIFICATION_COLLAPSED:{position:"absolute",right:"18px"},TEXT_MEDIUM:{textStyle:"ds.title.block.medium"}},Le=({collapsed:e,hasNotification:t,icon:n,label:a,endAdornment:i,selected:r,inAccordion:s=!1,...l})=>{const c=(0,o.jM)([Re.CONTAINER,e?Re.CONTAINER_COLLAPSED:Re.TEXT_MEDIUM,r&&!s?Re.CONTAINER_SELECTED:{},s?{padding:0,minHeight:"none"}:Re.CONTAINER_ON_HOVER]),d=(0,o.jM)([Re.ICON,e?Re.ICON_COLLAPSED:{}]),_=(0,o.jM)([Re.LABEL,e?Re.LABEL_COLLAPSED:Re.TEXT_MEDIUM]),u=(0,o.jM)([Re.NOTIFICATION,e?Re.NOTIFICATION_COLLAPSED:{}]);return(0,f.BX)("span",{sx:c,...l,children:[(0,f.BX)("span",{sx:d,children:[" ",n," "]}),i?(0,f.BX)("div",{sx:Re.LABEL_CONTAINER,children:[(0,f.tZ)("span",{sx:_,children:a}),(0,f.tZ)("div",{sx:e?Re.END_ADORNMENT_COLLAPSED:{},children:i})]}):(0,f.tZ)("span",{sx:_,children:a}),t?(0,f.tZ)("span",{sx:u}):null]})},Me="tooltipMenuOption--uuMY2Xcfk0";var Be,Pe,Ue,ze,Xe,qe,je,Ge,Fe,Ve,He,We,$e,Ye,Ke,Qe=n(15394);const Je="team_settings_menu_title_directory_sync",et="team_settings_menu_title_events_reporting",tt="team_settings_menu_title_single_sign_on",nt="team_upgrade_label",at="webapp_sidemenu_group_upgrade_label",it="webapp_sidemenu_category_integrations",rt={backgroundColor:"ds.container.agnostic.inverse.standard"," > summary > div":{width:"-webkit-fill-available"},"&[open] > summary > div":{width:"-webkit-fill-available"}," > summary > div > div > svg":{margin:"8px 8px 8px 0"},"&[open]":{padding:0},"&[open] > div:nth-of-type(1)":{pointerEvents:"auto",padding:0},"svg, svg:hover":{fill:"ds.text.inverse.catchy"}},st=me.w.BBCOM238Duo,ot=ue.q.RiskDetectionV1BetaTesters,lt=ue.q.RiskDetectionV2Prod,ct=ue.q.RiskDetectionV2OnDemand,dt=(e,t)=>{var n;return(null!=(n=t?.[e].length)?n:0)>0},_t=({isCollapsed:e=!1,permissionChecker:t,routes:n,teamNotifications:s})=>{var c,d;const{translate:u}=(0,g.Z)(),p={DUO:`${n.teamSettingsRoutePath}${a.B9.DUO}`,MASTER_PASSWORD_POLICIES:`${n.teamSettingsRoutePath}${a.B9.MASTER_PASSWORD_POLICIES}`,POLICIES:`${n.teamSettingsRoutePath}${a.B9.POLICIES}`},h={INTEGRATIONS:`${n.teamIntegrationsRoutePath}`,DIRECTORY_SYNC:`${n.teamIntegrationsRoutePath}${a.Nr.DIRECTORY_SYNC}`,SSO:`${n.teamIntegrationsRoutePath}${a.Nr.SSO}`,SIEM:`${n.teamIntegrationsRoutePath}${a.Nr.SIEM}`,NUDGES:`${n.teamIntegrationsRoutePath}${a.Nr.NUDGES}`},y=(0,i.TH)(),{unseen:b}=(0,ge.m)(_e.O.TacDarkWebInsightsNewBadge),{hasNewBreaches:x}=be(),S=(0,pe._)(),v=S.data?.[st],C=S.data?.monetization_extension_trial_activity_logs,E=S.data?.[ot]||S.data?.[lt]||S.data?.[ct],Z=S.data?.ace_tac_slack_integration,{shouldShowBuyOrUpgradePaywall:T,planType:D,isTrialOrGracePeriod:k}=null!=(c=xe(t.adminAccess))?c:{},{teamId:I}=(0,Ce.fV)(),A=ve(I),N=(0,re.C)(),w=(0,Qe.rp)(["nudges"]),O=(0,Qe.rp)(["riskDetection"]),R=(0,r.useContext)(Ie),L=!(null==(d=A.teamCapabilities?.activityLog.enabled)||d)||C&&N?.isFreeTrial,{hasStarterPaywall:M,hasTrialBusinessPaywall:P}=ke(),U=T&&(D===_.lD.Team||D===_.lD.Starter),z=!w&&!(null==k||k),X=!O&&!(null==k||k),q=D===_.lD.Standard,j=!!A.teamCapabilities?.groupSharing.info?.limit||q,G=M||P,F=(0,o.jM)([Re.CONTAINER,Re.CONTAINER_ON_HOVER,e?Re.CONTAINER_COLLAPSED:{}]),V=({requiredPermission:e,children:n,...a})=>t.adminAccess.hasPermissionLevel(e)?(0,f.tZ)(B.KJW,{...a,children:n}):null;return(0,f.BX)(B.t7v,{collapsed:e,children:[(0,f.BX)(B.sMA,{sx:{pointerEvents:"auto",backgroundColor:"ds.container.agnostic.inverse.standard",marginBottom:"40px"},children:[(0,f.tZ)(V,{requiredPermission:"FULL",collapsed:e,children:(0,f.tZ)(i.rU,{to:n.teamDashboardRoutePath,children:(0,f.tZ)(Le,{collapsed:e,icon:Be||(Be=(0,f.tZ)(o.JO,{name:"DashboardOutlined"})),label:u("team_general"),selected:y.pathname===n.teamDashboardRoutePath})})}),(0,f.tZ)(V,{requiredPermission:"FULL",collapsed:e,children:(0,f.tZ)(i.rU,{to:n.teamMembersRoutePath,children:(0,f.tZ)(Le,{collapsed:e,icon:Pe||(Pe=(0,f.tZ)(o.JO,{name:"UsersOutlined"})),label:u("team_members"),selected:y.pathname===n.teamMembersRoutePath})})}),(0,f.tZ)(V,{requiredPermission:"GROUP_READ",collapsed:e,children:(0,f.tZ)(i.rU,{to:n.teamGroupsRoutePath,children:(0,f.tZ)(Le,{collapsed:e,icon:Ue||(Ue=(0,f.tZ)(o.JO,{name:"GroupOutlined"})),label:u("team_groups"),selected:y.pathname===n.teamGroupsRoutePath,endAdornment:j?(0,f.tZ)(o.Ct,{mood:"brand",intensity:"catchy",label:u(at),layout:"iconLeading",iconName:"PremiumOutlined"}):null})})}),(0,f.tZ)(V,{requiredPermission:"FULL",collapsed:e,children:(0,f.tZ)(i.rU,{to:n.teamActivityRoutePath,children:(0,f.tZ)(Le,{collapsed:e,hasNotification:dt("accountRecoveryRequests",s),icon:ze||(ze=(0,f.tZ)(o.JO,{name:"ActivityLogOutlined"})),label:u("team_activity"),selected:y.pathname.includes(n.teamActivityRoutePath),endAdornment:L?(0,f.tZ)(o.Ct,{mood:"brand",intensity:"catchy",label:u(nt),layout:"iconLeading",iconName:"PremiumOutlined","data-testid":"activity-badge"}):null})})})]}),t.adminAccess.hasFullAccess?(0,f.BX)(f.HY,{children:[(0,f.tZ)(o.X6,{as:"h3",textStyle:"ds.title.supporting.small",color:"ds.text.inverse.quiet",sx:{marginTop:"40px",marginLeft:"14px",marginBottom:"8px"},children:u("team_settings")}),(0,f.BX)(B.sMA,{children:[(0,f.tZ)(V,{requiredPermission:"FULL",collapsed:e,children:(0,f.tZ)(i.rU,{to:p.POLICIES,style:{width:"100%"},children:(0,f.tZ)(Le,{icon:Xe||(Xe=(0,f.tZ)(o.JO,{name:"SettingsOutlined"})),collapsed:e,label:u("team_settings_menu_title_policies"),selected:y.pathname===p.POLICIES,endAdornment:G?(0,f.tZ)(o.Ct,{mood:"brand",intensity:"catchy",label:u(nt),layout:"iconLeading",iconName:"PremiumOutlined"}):null})})}),(0,f.tZ)(Oe,{settingsRoute:p.MASTER_PASSWORD_POLICIES,children:(0,f.tZ)(V,{requiredPermission:"FULL",collapsed:e,children:(0,f.tZ)(i.rU,{to:p.MASTER_PASSWORD_POLICIES,children:(0,f.tZ)(Le,{icon:qe||(qe=(0,f.tZ)(o.JO,{name:"RecoveryKeyOutlined"})),label:u("team_settings_menu_title_account_recovery"),collapsed:e,selected:y.pathname===p.MASTER_PASSWORD_POLICIES})})})}),v?(0,f.tZ)(V,{requiredPermission:"FULL",collapsed:e,children:(0,f.tZ)(i.rU,{to:p.DUO,children:(0,f.tZ)(Le,{icon:je||(je=(0,f.tZ)(o.JO,{name:"LaptopCheckmarkOutlined"})),label:u("team_settings_tab_duo"),collapsed:e,selected:y.pathname===p.DUO})})}):null,e?(0,f.tZ)(B.ua7,{placement:"right",offset:[0,15],hoverCloseDelay:500,sx:{padding:"4px 0","svg, svg:hover":{fill:"ds.text.inverse.catchy"}},content:(0,f.BX)("div",{sx:{width:"148px"},children:[(0,f.tZ)(i.rU,{to:h.SSO,sx:{textDecoration:"none"},children:(0,f.BX)("div",{className:Me,children:[u(tt),U?(0,f.tZ)(o.Ct,{mood:"brand",intensity:"catchy",label:u(nt),layout:"iconLeading",iconName:"PremiumOutlined","data-testid":"sso-badge"}):null]})}),(0,f.tZ)(i.rU,{to:h.DIRECTORY_SYNC,sx:{textDecoration:"none"},children:(0,f.tZ)("div",{className:Me,children:u(Je)})}),R?(0,f.tZ)(i.rU,{to:h.SIEM,sx:{textDecoration:"none"},children:(0,f.tZ)("div",{className:Me,children:u(et)})}):null]}),children:(0,f.tZ)("div",{tabIndex:0,children:(0,f.tZ)(V,{requiredPermission:"FULL",collapsed:e,children:(0,f.tZ)(i.rU,{to:h.INTEGRATIONS,children:(0,f.tZ)(Le,{collapsed:e,icon:Ge||(Ge=(0,f.tZ)(o.JO,{name:"ConfigureOutlined"})),label:u(it),selected:!1})})})})}):(0,f.BX)(B.UlM,{size:"large",open:!0,sx:{...rt,"> summary":(0,o.jM)([F,y.pathname===h.INTEGRATIONS?Re.CONTAINER_SELECTED:{}])},children:[(0,f.tZ)(B._Oh,{children:(0,f.tZ)(V,{requiredPermission:"FULL",collapsed:e,children:(0,f.tZ)(i.rU,{to:h.INTEGRATIONS,children:(0,f.tZ)(Le,{collapsed:e,icon:Fe||(Fe=(0,f.tZ)(o.JO,{name:"ConfigureOutlined"})),label:u(it),inAccordion:!0,endAdornment:q?(0,f.tZ)(o.Ct,{mood:"brand",intensity:"catchy",label:u(at),layout:"iconLeading",iconName:"PremiumOutlined"}):null})})})}),(0,f.BX)(B.rN7,{children:[(0,f.tZ)(V,{requiredPermission:"FULL",collapsed:e,children:(0,f.tZ)(i.rU,{to:h.SSO,children:(0,f.tZ)(Le,{icon:Ve||(Ve=(0,f.tZ)("span",{})),label:u(tt),endAdornment:U?(0,f.tZ)(o.Ct,{mood:"brand",intensity:"catchy",label:u(nt),layout:"iconLeading",iconName:"PremiumOutlined","data-testid":"sso-badge"}):null,selected:y.pathname===h.SSO})})}),(0,f.tZ)(V,{requiredPermission:"FULL",collapsed:e,children:(0,f.tZ)(i.rU,{to:h.DIRECTORY_SYNC,children:(0,f.tZ)(Le,{icon:He||(He=(0,f.tZ)("span",{})),label:u(Je),selected:y.pathname===h.DIRECTORY_SYNC})})}),R?(0,f.tZ)(V,{requiredPermission:"FULL",collapsed:e,children:(0,f.tZ)(i.rU,{to:h.SIEM,children:(0,f.tZ)(Le,{icon:We||(We=(0,f.tZ)("span",{})),label:u(et),selected:y.pathname===h.SIEM})})}):null]})]})]}),(0,f.tZ)(o.X6,{as:"h3",textStyle:"ds.title.supporting.small",color:"ds.text.inverse.quiet",sx:{marginTop:"40px",marginLeft:"14px",marginBottom:"8px"},children:u("webapp_sidemenu_category_advanced_tools")}),(0,f.BX)(B.sMA,{children:[Z?(0,f.tZ)(V,{requiredPermission:"FULL",collapsed:e,children:(0,f.tZ)(i.rU,{to:h.NUDGES,onClick:()=>(0,m.Nc)(l.PageView.ToolsNudges),children:(0,f.tZ)(Le,{collapsed:e,icon:$e||($e=(0,f.tZ)(o.JO,{name:"FeatureAutomationsOutlined"})),label:u("webapp_sidemenu_nudges"),selected:y.pathname===h.NUDGES,endAdornment:z?(0,f.tZ)(o.Ct,{mood:"brand",intensity:"catchy",label:u(at),layout:"iconLeading",iconName:"PremiumOutlined","data-testid":"nudges-upgrade-badge"}):null})})}):null,E?(0,f.tZ)(V,{requiredPermission:"FULL",collapsed:e,children:(0,f.tZ)(i.rU,{to:n.loggedOutMonitoring,children:(0,f.tZ)(Le,{collapsed:e,icon:Ye||(Ye=(0,f.tZ)(o.JO,{name:"RiskDetectionOutlined"})),label:u("team_sidemenu_risk_detection"),endAdornment:X?(0,f.tZ)(o.Ct,{mood:"brand",intensity:"catchy",label:u(at),layout:"iconLeading",iconName:"PremiumOutlined"}):null})})}):null,(0,f.tZ)(V,{requiredPermission:"FULL",collapsed:e,children:(0,f.tZ)(i.rU,{to:n.teamDarkWebInsightsRoutePath,onClick:()=>{(0,m.Kz)(new l.UserOpenDomainDarkWebMonitoringEvent({accessPath:l.AccessPath.NavLeftMenuButton,isFirstVisit:b}))},children:(0,f.tZ)(Le,{collapsed:e,icon:Ke||(Ke=(0,f.tZ)(o.JO,{name:"FeatureDarkWebMonitoringOutlined"})),label:u("team_dashboard_dark_web_insights_heading"),selected:y.pathname===n.teamDarkWebInsightsRoutePath,hasNotification:x})})})]})]}):null]})};var ut;const mt=({isCollapsed:e=!1})=>{const{translate:t}=(0,g.Z)();return(0,f.tZ)("div",{sx:{width:e?"96px":"256px"},children:(0,f.tZ)("div",{"data-testid":"logo-header",sx:{display:"flex",flexDirection:"column",alignItems:e?"center":"baseline",padding:e?"none":"20px 24px",justifyContent:"center",height:"80px !important",borderBottom:"1px solid ds.border.neutral.quiet.idle !important"},children:e?(0,f.tZ)("div",{sx:{position:"relative",right:"3px"},children:ut||(ut=(0,f.tZ)(B.NJ6,{color:"ds.text.inverse.catchy",height:39,width:39}))}):(0,f.tZ)(o.TR,{height:40,name:"DashlaneLockup",title:t("_common_dashlane_logo_title"),color:"ds.text.inverse.catchy"})})})};n(50801);const pt="webapp_sidemenu_open_vault_cta",gt=({isCollapsed:e})=>{const{translate:t}=(0,g.Z)(),[n,a]=(0,r.useState)(!1);return(0,f.BX)("div",{sx:{display:"flex",justifyContent:"center",borderTop:"1px solid",position:"fixed",bottom:"0",borderTopColor:"ds.border.neutral.quiet.idle",backgroundColor:"ds.container.agnostic.inverse.standard",width:e?"96px":"256px"},children:[(0,f.tZ)(o.zx,{layout:e?"iconOnly":"iconLeading","aria-label":t(pt),fullsize:!e,sx:{margin:"20px 25px"},icon:"VaultOutlined",mood:"brand",intensity:"catchy",onClick:()=>{(0,X.nL)(ae.rC)},children:t(pt)}),n?(0,f.tZ)(oe.F,{isShown:n,setIsShown:a,isFromVault:!1}):null]})};var ht=n(77429);const yt=(0,r.createContext)({}),bt=({children:e})=>{const[t,n]=(0,r.useState)(!1),[a,i]=(0,r.useState)({lastBillingDetails:void 0,lastAdditionalSeatsDetails:void 0}),s=(0,r.useMemo)((()=>({isAddSeatsSuccessOpen:t,setIsAddSeatsSuccessPageOpen:n,setSeatDetails:i,upsellDetails:a})),[t,a]);return(0,f.tZ)(yt.Provider,{value:s,children:e})},xt=()=>(0,r.useContext)(yt);var St;const ft=()=>document.documentElement.clientWidth<1371,vt=()=>{},Ct=r.createContext(vt),Et=({children:e,lee:t})=>{const[n,a]=(0,r.useState)(ft()),[s,o]=(0,r.useState)(),{routes:l}=(0,i.Xo)(),c=t.permission.adminAccess,d=c.hasBillingAccess||c.hasFullAccess;(0,r.useEffect)((()=>{const e=(0,D.throttle)((()=>{const e=ft();e&&!n?a(!0):!e&&n&&a(!1)}),100);return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)}),[n]);const _=(0,k.kA)(t.globalState),u=(0,f.BX)(w,{children:[s,(0,f.tZ)(de,{lee:t})]}),m=(0,f.tZ)(mt,{isCollapsed:n}),p=(0,f.tZ)(_t,{isCollapsed:n,permissionChecker:t.permission,routes:l,teamNotifications:_?.notifications}),g=(0,f.tZ)(gt,{isCollapsed:n}),h=(0,f.tZ)(ht.Q6,{adminAccess:t.permission.adminAccess}),y=d?St||(St=(0,f.tZ)(I.XA,{})):null;return(0,f.tZ)(Ct.Provider,{value:o,children:(0,f.tZ)(A.AH,{adminAccess:c,children:(0,f.tZ)(bt,{children:(0,f.tZ)(R,{brand:m,header:u,sideNav:p,bottomButton:g,banner:h,dialog:y,children:e})})})})};var Zt=n(87224);const Tt=()=>{const{data:e,status:t}=(0,c.k)(Zt.K,"getTeamOffers",{});return t!==Ze.rq.Success?null:e};var Dt=n(23914);const kt=()=>(0,f.tZ)("hr",{style:{width:"100%",borderTop:`1px solid ${B.colors.grey02}`,borderBottom:"0",margin:"0"}}),It=({label:e,value:t})=>(0,f.BX)(o.kC,{justifyContent:"flex-end",sx:{padding:"0 10px"},children:[e?(0,f.tZ)("div",{sx:{display:"flex",alignItems:"center",flex:1},children:e}):null,t?(0,f.tZ)("div",{sx:{display:"flex",alignItems:"center"},children:t}):null]}),At="team_account_teamplan_changeplan_order_summary_minimum_active_seats_tooltip",Nt=({isAmountAllowed:e,absoluteMinimum:t,relativeMinimum:n})=>{const{translate:a}=(0,g.Z)(),{routes:r}=(0,i.Xo)(),s=e?"ds.text.neutral.quiet":"ds.text.danger.quiet",l=a("team_account_teamplan_changeplan_order_summary_minimum_active_seats",{count:n});return(0,f.tZ)(It,{label:(0,f.BX)(o.kC,{gap:"5px",children:[(0,f.tZ)(o.nv,{textStyle:"ds.body.reduced.regular",color:s,children:l}),(0,f.tZ)(o.JO,{color:s,name:"FeedbackInfoOutlined",size:"small",tooltip:e?a(At):t===n?a("team_account_teamplan_changeplan_order_summary_minimum_seats_absolute_tooltip",{count:t}):a(At)})]}),value:e?(0,f.tZ)(o.Qj,{size:"small",as:i.rU,to:r.teamMembersRoutePath,replace:!0,children:a("team_account_teamplan_changeplan_order_summary_review_active_seats_link")}):null})};var wt,Ot,Rt,Lt;const Mt=({costData:e,currency:t,currentSpaceTier:n,isProratedDiscountLoading:a,isAmountAllowed:i,isTaxLoading:s,selectedOffer:l,setSelectedSeatsQty:c,signalAmountValidHandler:d})=>{const{translate:u}=(0,g.Z)(),{loading:m,billingCountry:p}=T(),h=n===_.lD.Starter?10:e.currentSeats;if((0,r.useEffect)((()=>{c(h)}),[h]),m)return wt||(wt=(0,f.tZ)(o.ZX,{}));const y=n===_.lD.Starter||n===_.lD.Standard?e.currentActiveSeats>2?e.currentActiveSeats:2:e.currentSeats,b="US"===p?"team_account_teamplan_changeplan_order_summary_tax":"team_account_teamplan_vat",x=e.totalSeats===e.currentActiveSeats||!i;return(0,f.tZ)(f.HY,{children:l&&t?(0,f.BX)(f.HY,{children:[(0,f.tZ)(It,{label:(0,f.tZ)(o.nv,{textStyle:"ds.body.standard.strong",children:u("team_account_teamplan_changeplan_order_summary_seats_total",{totalSeats:e.totalSeats})}),value:(0,f.tZ)("div",{sx:{width:"146px"},children:(0,f.tZ)(Dt.w,{id:"test",inputWidth:"66px",label:"",ariaLabel:u("team_account_teamplan_upgrade_premium_number_of_seats_free_to_paid"),minValue:y,onChange:c,signalAmountValidHandler:d,defaultValue:h})})}),x?(0,f.tZ)(Nt,{isAmountAllowed:i,absoluteMinimum:2,relativeMinimum:y}):null,(0,f.tZ)(It,{label:(0,f.tZ)(o.nv,{textStyle:"ds.body.standard.strong",children:u("team_account_teamplan_changeplan_order_summary_seats_upgraded",{upgradedSeats:Math.min(e.currentSeats,e.totalSeats)})}),value:(0,f.tZ)(o.nv,{textStyle:"ds.body.standard.strong",children:u.price(t,e.upgradedSeatsPrice/100)})}),e.addedSeats?(0,f.tZ)(It,{label:(0,f.tZ)(o.nv,{textStyle:"ds.body.standard.strong",children:u("team_account_teamplan_changeplan_order_summary_seats_new",{newSeats:e.addedSeats})}),value:(0,f.tZ)(o.nv,{textStyle:"ds.body.standard.strong",children:u.price(t,e.addedSeatsPrice/100)})}):null,Ot||(Ot=(0,f.tZ)(kt,{})),(0,f.tZ)(It,{label:(0,f.tZ)(o.nv,{textStyle:"ds.body.standard.strong",children:u("team_account_teamplan_changeplan_order_summary_subtotal")}),value:t?(0,f.tZ)(o.nv,{textStyle:"ds.body.standard.strong",children:u.price(t,e.subtotal/100)}):null}),e?.proratedDiscount?(0,f.tZ)(It,{label:(0,f.BX)(o.kC,{alignItems:"center",gap:"5px",children:[(0,f.tZ)(o.nv,{color:"ds.text.neutral.quiet",children:u("team_account_teamplan_changeplan_order_summary_prorated_discount")}),(0,f.tZ)(o.JO,{color:"ds.text.neutral.quiet",name:"FeedbackInfoOutlined",size:"small",tooltip:u("team_account_teamplan_changeplan_order_summary_prorated_discount_tooltip")})]}),value:a?Rt||(Rt=(0,f.tZ)(o.ZX,{mood:"neutral",size:13})):e.proratedDiscount&&t?(0,f.tZ)(o.nv,{color:"ds.text.neutral.quiet",children:u.price(t,e.proratedDiscount/100)}):null}):null,e.tax?(0,f.tZ)(It,{label:(0,f.tZ)(o.nv,{color:"ds.text.neutral.quiet",children:u(b)}),value:s?Lt||(Lt=(0,f.tZ)(o.ZX,{mood:"neutral",size:13})):(0,f.tZ)(o.nv,{color:"ds.text.neutral.quiet",children:u.price(t,e.tax/100)})}):null]}):null})};var Bt=n(10994),Pt=n(41185);const Ut=({offer:e,selectedSeatsQty:t=0})=>{const n=[...e.priceRanges].sort(((e,t)=>e.startMembers-t.startMembers));return n.reduce(((e,n)=>n.startMembers<t&&n.startMembers>e.startMembers?n:e),n[0])},zt=({offer:e,selectedSeatsQty:t,priceTarget:n="price"})=>Ut({offer:e,selectedSeatsQty:t})[n]/(e.duration.includes("y")?12:1),Xt=({offer:e,selectedSeatsQty:t})=>{const n=Ut({offer:e,selectedSeatsQty:t}).price;return e.duration.includes("y")?n:12*n},qt=({offer:e,selectedSeatsQty:t})=>Ut({offer:e,selectedSeatsQty:t}).price*t/12,jt=e=>!!e.name.match(/_team_/u),Gt=e=>!!e.name.match(/_business_/u),Ft=e=>e?e.priceRanges[1].startMembers-1:0;var Vt=n(55525);function Ht({total:e,onError:t,initialSkip:n}){const[a,i]=(0,r.useState)(!1),[s,o]=(0,r.useState)(),l=(0,c.k)(Vt.a,"getTaxAmount",{totalPrice:e},{initialSkip:n});return(0,r.useEffect)((()=>{l.status===Ze.rq.Loading?i(!0):l.status===Ze.rq.Success&&l.data?(i(!1),o({amount:l.data.amount})):(t?.(),i(!1),o(void 0))}),[l.status,l.data]),{isLoading:a,taxInformation:s}}const Wt=({title:e,children:t,headingLevel:n="h2",sx:a})=>(0,f.tZ)(o.Zb,{sx:{...a},children:(0,f.BX)(o.kC,{flexDirection:"column",flexWrap:"nowrap",sx:{height:"100%"},children:[e?"string"==typeof e?(0,f.tZ)(o.X6,{as:n,color:"ds.text.neutral.standard",children:e}):e:null,(0,f.tZ)("div",{sx:{flex:1},children:t})]})}),$t=({selectedOffer:e,costData:t})=>{const{translate:n}=(0,g.Z)();return(0,f.BX)(f.HY,{children:[e?(0,f.BX)(f.HY,{children:[(0,f.tZ)(It,{label:(0,f.tZ)(o.kC,{gap:"5px",children:(0,f.tZ)(B.nvN,{bold:!0,size:"medium",children:n("team_account_teamplan_changeplan_order_summary_seats_total",{totalSeats:t.totalSeats})})})}),(0,f.tZ)(B.vDh,{severity:"subtle",size:"small",title:n("team_account_teamplan_changeplan_order_summary_invoice_info")})]}):null,(0,f.tZ)(B.zxk,{"data-testid":"btn-request-a-quote",size:"large",sx:{width:"100%"},type:"button",disabled:!e,onClick:()=>{window.open(ae.vS,"_blank")},children:n("team_account_teamplan_changeplan_order_summary_request_an_upgrade")})]})};var Yt,Kt=n(16782);const Qt=({selectedOffer:e,currency:t,costData:n})=>{const{translate:a}=(0,g.Z)(),{isLoading:i,taxInformation:r}=Ht({total:n.renewalPrice}),{loading:s,billingCountry:c}=T();if(s)return Yt||(Yt=(0,f.tZ)(o.ZX,{}));const d="US"===c?"team_account_teamplan_changeplan_order_summary_footer_renewal":"team_account_teamplan_changeplan_order_summary_renewal_vat",_=!i&&void 0!==r?.amount&&r?.amount>0,u=_&&r?.amount?n.renewalPrice+r.amount:void 0,p=_?d:"team_account_teamplan_changeplan_order_summary_footer_header",h=_?u:n.renewalPrice;return(0,f.BX)("div",{sx:{display:"flex",flexDirection:"column",gap:"12px",padding:"16px",backgroundColor:B.colors.grey06},children:[e&&t&&h?(0,f.tZ)(B.nvN,{bold:!0,size:"small",color:B.colors.grey00,children:a(p,{price:a.price(t,h/100),date:a.shortDate(n.renewalDate,Kt.qG.ll)})}):null,(0,f.tZ)(B.nvN,{size:"x-small",color:B.colors.grey00,children:a.markup("team_account_teamplan_changeplan_order_summary_footer_markup",{privacyPolicyUrl:ae.Bz,termsUrl:ae.sz},{linkTarget:"_blank",onLinkClicked:e=>{e===ae.Bz?(0,m.Kz)(new l.UserCallToActionEvent({callToActionList:[l.CallToAction.PrivacyPolicy],chosenAction:l.CallToAction.PrivacyPolicy,hasChosenNoAction:!1})):e===ae.sz&&(0,m.Kz)(new l.UserCallToActionEvent({callToActionList:[l.CallToAction.TermsOfService],chosenAction:l.CallToAction.TermsOfService,hasChosenNoAction:!1}))}})})]})},Jt={display:"flex",alignItems:"center",padding:"12px 8px",borderRadius:"8px",justifyContent:"space-between",backgroundColor:"ds.container.agnostic.neutral.quiet"},en=({selectedOffer:e,currency:t,costData:n})=>{const{translate:a}=(0,g.Z)();return e&&t?(0,f.BX)("div",{sx:Jt,"data-testid":"order-summary-plan-name",children:[(0,f.tZ)(o.nv,{textStyle:"ds.body.reduced.strong",color:"ds.text.brand.quiet",children:Gt(e)?a("team_account_teamplan_changeplan_plans_business_name"):a("team_account_teamplan_changeplan_plans_team_name")}),(0,f.tZ)(o.nv,{textStyle:"ds.body.reduced.regular",color:"ds.text.brand.quiet",children:a("team_account_teamplan_changeplan_order_summary_seat_year",{cost:a.price(t,n.seatPrice/100,{notation:"compact"})})})]}):(0,f.tZ)("div",{sx:Jt,children:(0,f.tZ)(o.nv,{textStyle:"ds.body.reduced.regular",color:"ds.text.brand.quiet",children:a("team_account_teamplan_changeplan_order_summary_select_plan")})})};var tn;const nn=({onDismiss:e,value:t,buttonProps:n})=>(0,f.BX)(o.kC,{alignItems:"center",gap:"6px",children:[(0,f.tZ)(o.kC,{sx:{backgroundColor:B.colors.midGreen05,padding:"4px 8px",borderRadius:"4px"},children:"string"==typeof t?(0,f.tZ)(B.nvN,{size:"x-small",children:t}):{value:t}}),e?(0,f.tZ)(B.zxk,{size:"small",type:"button",nature:"ghost",onClick:e,sx:{padding:0,minWidth:0},...n,children:tn||(tn=(0,f.tZ)(B.Two,{size:18}))}):null]});var an,rn,sn;const on=e=>e?-e/100:0,ln=({currency:e,promoPrice:t,promoCode:n,hasError:a,isLoading:i,showInput:r,setShowInput:s,onSubmit:l,onCancel:c,onChange:d,onClear:_})=>{const{translate:u}=(0,g.Z)();return r?(0,f.BX)(o.kC,{gap:"6px",fullWidth:!0,sx:{padding:"0 10px"},children:[(0,f.tZ)("div",{sx:{flex:1},children:(0,f.tZ)(B.oil,{fullWidth:!0,value:n,placeholder:u("team_account_teamplan_changeplan_order_summary_promo_code_cta"),feedbackText:a?u("team_account_teamplan_changeplan_order_summary_promo_code_error"):null,feedbackType:a?"error":void 0,onChange:d?e=>d(e?.target?.value):void 0})}),(0,f.tZ)(B.zxk,{disabled:i,"data-testid":"promo_code_button_submit",type:"button",nature:"secondary",onClick:async()=>{l&&await l()},children:i?an||(an=(0,f.tZ)(o.ZX,{size:20,mood:"neutral"})):rn||(rn=(0,f.tZ)(B.nQG,{size:20}))}),(0,f.tZ)(B.zxk,{"data-testid":"promo_code_button_cancel",type:"button",nature:"ghost",onClick:()=>{c&&c()},children:sn||(sn=(0,f.tZ)(B.Two,{size:20}))})]}):n?(0,f.BX)(o.kC,{gap:"4px",fullWidth:!0,alignItems:"center",justifyContent:"space-between",sx:{padding:"0 10px"},children:[(0,f.BX)(o.kC,{alignItems:"center",gap:"4px",children:[(0,f.tZ)(B.nvN,{size:"small",color:B.colors.black,children:u("team_account_teamplan_changeplan_order_summary_promo_code")}),(0,f.tZ)(nn,{value:n,onDismiss:_,buttonProps:{"data-testid":"promo_code_button_clear"}})]}),(0,f.tZ)("div",{children:t&&e?(0,f.tZ)(B.nvN,{size:"small",color:B.colors.black,children:u.price(e,on(t))}):null})]}):(0,f.tZ)(o.kC,{sx:{padding:"0 10px"},children:(0,f.tZ)(B.zxk,{"data-testid":"promo_code_button_enter",size:"medium",type:"button",nature:"ghost",onClick:()=>s?s(!0):null,sx:{margin:0,padding:0,minWidth:0,height:"16px"},"aria-label":u("team_account_teamplan_changeplan_order_summary_promo_code_cta"),children:(0,f.tZ)(B.rUS,{children:(0,f.tZ)(B.nvN,{size:"small",color:B.colors.midGreen00,children:u("team_account_teamplan_changeplan_order_summary_promo_code_cta")})})})})};var cn,dn,_n;const un=({currency:e,currentSeats:t,currentActiveSeats:n,currentSpaceTier:a,selectedSeatsQty:i,selectedOffer:s,email:d,emailValid:p,onSuccess:h,onError:y,setSelectedSeatsQty:b,setOrderSummaryData:x})=>{const{translate:S}=(0,g.Z)(),v=(0,u.s)(),C=v?.billingType===_.qo.Invoice,{promoCode:E,currentPromoCode:Z,showInput:T,isLoading:D,setShowInput:k,setCurrentPromoCode:I,validatePromoCode:A,clearPromoCode:N,cancelPromoCode:w,hasError:O,teamOffers:R}=function({selectedOffer:e,currentSeats:t,selectedSeatsQty:n}){const[a,i]=(0,r.useState)(""),[s,o]=(0,r.useState)(""),[l,d]=(0,r.useState)(),[_,u]=(0,r.useState)(!1),[m,p]=(0,r.useState)(!1),[g,h]=(0,r.useState)(!1),[y,b]=(0,r.useState)(n),[x,S]=(0,r.useState)(e),{data:f,status:v}=(0,c.k)(Zt.K,"getTeamOffers",{couponCode:s}),C=(0,r.useCallback)((()=>{if(!s)return!1;if(v===Ze.rq.Error&&!f)return h(!1),u(!0),p(!0),!1;if(v===Ze.rq.Loading&&!f)return h(!0),!1;const t=Ut({offer:f.businessOffer,selectedSeatsQty:n}),a=t.price!==t.equivalentPrice,r=Ut({offer:f.teamOffer,selectedSeatsQty:n}),o=r.price!==r.equivalentPrice;return(e&&Gt(e)?a:o)?(h(!1),i(s),d((()=>f)),u(!1),p(!1),!0):(h(!1),u(!0),p(!0),!1)}),[s,v,f,t,n,e]);return(0,r.useEffect)((()=>{n!==y&&(b(n),C())}),[y,n,C]),(0,r.useEffect)((()=>{e?.name!==x?.name&&(S(e),C())}),[e,x,C]),{promoCode:a,currentPromoCode:s,setCurrentPromoCode:o,validatePromoCode:C,clearPromoCode:()=>{i(""),o(""),d(void 0),u(!1)},cancelPromoCode:()=>{_?(i(""),o("")):o(a),u(!1),p(!1)},showInput:m,setShowInput:p,hasError:_,teamOffers:l,isLoading:g,setIsLoading:h}}({selectedOffer:s,selectedSeatsQty:i,currentSeats:t}),{isSaving:L,costData:M,changeTierMidCycle:P,isTaxLoading:U,isProratedDiscountLoading:z}=function({selectedOffer:e,currentSeats:t,currentActiveSeats:n,selectedSeatsQty:a,discountedTeamOffers:i,promoCode:s,email:o,onSuccess:l,onError:d}){var _,u;const[m,p]=(0,r.useState)(!1),{translate:h}=(0,g.Z)(),{changeTierMidcycle:y}=(0,F.u)(Zt.K),b=!!s,x=!!e&&Gt(e),S=!!e&&jt(e),f=i&&e?x?i.businessOffer:S?i.teamOffer:i.starterOffer:e,{isLoading:v,midCycleTierUpgradePrice:C}=function({newTotalNumberOfSeats:e,planName:t,onError:n}){const a=(0,c.k)(Zt.K,"getMidcycleTierUpgradePrice",{newTotalNumberOfSeats:e,newPlan:null!=t?t:""},{initialSkip:!e||!t});switch(a.status){case Ze.rq.Loading:return{isLoading:!0};case Ze.rq.Error:return n?.(),{isLoading:!1};case Ze.rq.Success:return{isLoading:!1,midCycleTierUpgradePrice:a.data}}}({newTotalNumberOfSeats:a,planName:f?.name}),E=f?Ut({offer:f,selectedSeatsQty:a}):null,Z=null!=(_=E?.equivalentPrice)?_:0,T=null!=(u=E?.price)?u:0,D=b?Z:T,k=(a-t)*D,I=Math.min(t,a)*D,A=a*D,N=A-(void 0!==T?a*T:A),w=void 0!==C?.discountAmount?A+C.discountAmount:void 0,O=w?w-N:w,R=C?.nextBillingDateUnix?(0,Bt.Z)(C.nextBillingDateUnix):(0,Pt.Z)(new Date,1),{isLoading:L,taxInformation:M}=Ht({total:null!=O?O:0}),B=L||void 0===M?.amount?0:M.amount,P=L||void 0===M?.amount||void 0===O?void 0:O+B;return{isSaving:m,changeTierMidCycle:async e=>{if(void 0===O||!M||!f)return void d("Error with retrieving midCycleTierUpgradePrice, tax information or target offer");p((()=>!0));const t=await y({amountToPay:O,taxes:B,planId:f.name,couponCode:e||s,newTotalNumberOfSeats:a,billingContactEmail:""!==o?o:void 0});if(p((()=>!1)),t.error){const e=(e=>{switch(e){case"PaymentMeanIsNotCreditCard":return"The team does not have a credit card payment mean";case"CurrentPlanStartDateInFuture":return"The current plan start date must be in the past";case"ChangeTierMidCycleError":return"Team is ineligible to change tier mid cycle";case"PaymentMeanIsNotInvoice":return"Team Payment mean is not invoice";case"ChangeTierAmountTooExpensive":return"The amount to pay entered is more than 10 times the recommended price";case"ErrorCalculatingTierChange":return"Unable to calculate prorated discount for mid cycle tier change";case"InsufficientAmount":return"Credit Card payment must be zero or more than 50 cents";case"AssignedPlanSameTierAsCurrentPlan":return"The assigned plan tier cannot be the same as the team's current plan";case"SalesTaxMismatch":return"Tax amount sent does not correspond to the supposed taxed amount";case"NotBillingAdmin":return"User is not a billing admin";default:return h("team_account_teamplan_changeplan_error_generic")}})(t.error.tag);d(e)}else l()},isProratedDiscountLoading:v,isTaxLoading:L,costData:{seatPrice:D,currentSeats:t,currentActiveSeats:n,totalSeats:a,addedSeats:a>=t?a-t:0,removedSeats:a<=t?t-a:0,upgradedSeatsPrice:I,addedSeatsPrice:k,subtotal:A,proratedDiscount:C?.discountAmount,tax:B,pretaxTotal:w,promoPrice:N,total:P,renewalPrice:A,renewalDate:R}}}({selectedOffer:s,discountedTeamOffers:R,currentSeats:t,currentActiveSeats:n,selectedSeatsQty:i,promoCode:E,email:d,onSuccess:h,onError:y}),[X,q]=(0,r.useState)(!0);return v?(0,f.tZ)(Wt,{title:S("team_account_teamplan_changeplan_order_summary_header"),children:(0,f.BX)(o.kC,{flexDirection:"column",gap:"16px",sx:{marginTop:"16px"},children:[(0,f.tZ)(en,{selectedOffer:s,currency:e,costData:M}),C?(0,f.tZ)($t,{selectedOffer:s,costData:M}):(0,f.BX)(f.HY,{children:[(0,f.tZ)(Mt,{currency:e,costData:M,isProratedDiscountLoading:z,isAmountAllowed:X,isTaxLoading:U,selectedOffer:s,setSelectedSeatsQty:b,currentSpaceTier:a,signalAmountValidHandler:e=>{q(e)}}),s&&e?(0,f.tZ)(ln,{currency:e,promoCode:Z,promoPrice:M?.promoPrice,hasError:O,showInput:T,isLoading:D,setShowInput:k,onSubmit:A,onChange:I,onCancel:w,onClear:N}):null,cn||(cn=(0,f.tZ)(kt,{})),(0,f.tZ)(It,{label:(0,f.tZ)(B.nvN,{bold:!0,size:"large",children:S("team_account_teamplan_changeplan_order_summary_due_today_V2")}),value:!e||U||z?dn||(dn=(0,f.tZ)(o.ZX,{size:23,mood:"neutral"})):s?M.total?(0,f.tZ)(B.nvN,{bold:!0,size:"large",children:S.price(e,M.total/100)}):null:(0,f.tZ)(B.nvN,{bold:!0,size:"large",children:`${S.priceSymbol(e)}--.--`})}),L?(0,f.tZ)(B.zxk,{size:"large",sx:{width:"100%"},type:"button",disabled:!0,children:_n||(_n=(0,f.tZ)(o.ZX,{}))}):(0,f.tZ)(B.zxk,{"data-testid":"btn-confirm-and-pay",size:"large",sx:{width:"100%"},type:"button",disabled:!s||!p||D||!X,onClick:async()=>{(!O&&E===Z||await A())&&((0,m.Kz)(new l.UserClickEvent({clickOrigin:l.ClickOrigin.OrderSummary,button:l.Button.ConfirmUpgrade})),P(Z),x(M))},children:S("team_account_teamplan_changeplan_order_summary_confirm_and_pay")})]}),(0,f.tZ)(Qt,{selectedOffer:s,currency:e,costData:M})]})}):null},mn=()=>{const{translate:e}=(0,g.Z)(),t=(0,Te.Y)(),n=Tt();if(!n||t.status!==s.rq.Success)return{hasLimitedOffer:!1};const a=!(0,P.NG)(t.data),{businessOffer:i}=n,r=zt({offer:i}),o=zt({offer:i,priceTarget:"equivalentPrice"});return{hasLimitedOffer:a&&r!==o,translatedPrice:e.price(i.currency,r/100,{notation:"compact"}),translatedEquivalentPrice:e.price(i.currency,o/100,{notation:"compact"})}};var pn,gn,hn,yn;const bn=({plan:e,handleSelectClick:t,selected:n})=>{var a;const{translate:i}=(0,g.Z)();if(!e)return null;const{currentPlan:r,currentTrial:s,limitedOffer:l,heading:c,price:d,equivalentPrice:_,planName:u,footer:m,priceDescription1:p,priceDescription2:h,features:y,showUpgradeInfobox:b,showRecommendedBadge:x,isStandardPlanRestricted:S}=e;return(0,f.BX)(o.kC,{flexDirection:"column",sx:{minHeight:"480px",display:"flex",flexDirection:"column",borderRadius:"4px",border:"1px solid "+(r||S?"transparent":n?"ds.border.brand.standard.active":"ds.border.neutral.quiet.idle"),flexGrow:"1",flexShrink:0,width:"188px",backgroundColor:r||S?"ds.container.expressive.neutral.supershy.hover":null,padding:"16px",gap:"16px"},children:[(0,f.BX)(o.kC,{flexDirection:"column",gap:"16px",children:[(0,f.BX)(o.kC,{flexDirection:"column",gap:"8px",children:[(0,f.BX)("div",{sx:{minHeight:"16px"},children:[r&&(0,f.tZ)(o.Ct,{label:i("team_account_teamplan_changeplan_plans_plan_current")}),s&&(0,f.tZ)(o.Ct,{label:i("team_account_teamplan_changeplan_plans_plan_current_trial")}),x&&(0,f.tZ)(o.Ct,{mood:"brand",intensity:"catchy",label:i("team_account_teamplan_changeplan_plans_plan_recommended")}),l&&(0,f.tZ)(o.Ct,{mood:"brand",intensity:"catchy",label:i("team_account_teamplan_changeplan_plans_plan_limited_offer")})]}),(0,f.tZ)(o.nv,{textStyle:"ds.body.standard.strong",children:i(c.key)})]}),(0,f.BX)(o.kC,{flexDirection:"column",children:[(0,f.BX)(o.kC,{gap:"4px",children:["string"==typeof d?a||(a=(0,f.tZ)(o.nv,{textStyle:"ds.specialty.spotlight.medium",children:d})):null===d?pn||(pn=(0,f.tZ)(o.ZX,{size:44,mood:"neutral"})):(0,f.tZ)(o.nv,{textStyle:"ds.specialty.spotlight.small",color:"ds.text.neutral.catchy",sx:{marginBottom:"10px"},children:i(d.key)}),_&&(0,f.BX)(o.nv,{textStyle:"ds.title.block.medium",color:"ds.text.neutral.quiet",sx:{whiteSpace:"break-spaces"},children:[i("team_account_teamplan_changeplan_plans_previous_price"),gn||(gn=(0,f.tZ)("br",{})),(0,f.tZ)("span",{sx:{textDecoration:"line-through"},children:_})]})]}),(0,f.BX)(o.kC,{flexDirection:"column",sx:{height:"48px"},children:[(0,f.tZ)(o.nv,{textStyle:"ds.body.reduced.strong",color:"ds.text.neutral.quiet",children:i(p.key,p.variables)}),(0,f.tZ)(o.nv,{textStyle:"ds.body.reduced.strong",color:"ds.text.neutral.quiet",children:i(h.key,h.variables)})]})]})]}),b?(0,f.tZ)(o.ke,{mood:"brand",title:i("team_account_teamplan_changeplan_plans_upgrade_infobox")}):null,S?(0,f.tZ)(o.ke,{mood:"neutral",title:i("team_post_trial_checkout_pricing_tile_standard_plan_restricted_infobox")}):null,S?null:n?(0,f.tZ)(o.zx,{disabled:!0,mood:"brand",intensity:"quiet",size:"small",type:"button",fullsize:!0,layout:"iconLeading",icon:"CheckmarkOutlined",children:i("team_account_teamplan_changeplan_plans_selected")}):t?(0,f.tZ)(o.zx,{mood:"brand",intensity:"quiet",size:"small",onClick:t,fullsize:!0,"data-testid":`btn-${u}-select`,children:i("team_account_teamplan_changeplan_plans_select")}):"businessPlus"===u?(0,f.tZ)(o.zx,{mood:"brand",intensity:"quiet",size:"small",onClick:()=>{(0,X.Yk)(ae.YD,{type:"postTrialCheckout",action:"contactSales"},{newTab:!0})},fullsize:!0,children:i("team_post_trial_checkout_plan_selection_biz_plus_card_button_text")}):b?null:(0,f.tZ)("div",{sx:{height:"32px",width:"100%"}}),(0,f.tZ)(o.kC,{flexDirection:"column",gap:"8px",children:y.map((({key:e,icon:t,variables:n,loading:a})=>(0,f.BX)(o.kC,{sx:{display:"flex",alignItems:"center",gap:"9px",flexWrap:"nowrap",strong:{color:r?null:o.O9.lightTheme.ds.text.neutral.catchy}},children:[(0,f.tZ)("div",{sx:{width:"10px"},children:"check"===t?hn||(hn=(0,f.tZ)(o.JO,{name:"CheckmarkOutlined",size:"xsmall"})):yn||(yn=(0,f.tZ)(o.JO,{name:"ActionAddOutlined",size:"xsmall"}))}),a?(0,f.tZ)(o.kC,{alignItems:"center",justifyContent:"center",sx:{flexGrow:"1"},children:(0,f.tZ)(o.ZX,{size:32,color:o.O9.lightTheme.ds.text.neutral.catchy})}):(0,f.tZ)(o.nv,{textStyle:"ds.body.reduced.regular",color:"ds.text.neutral.quiet",children:e.includes("markup")?i.markup(e,n):i(e,n)})]},e)))}),l?(0,f.tZ)(o.ke,{mood:"brand",title:i("team_account_teamplan_changeplan_plans_limited_price_infobox")}):null,m?(0,f.tZ)(o.kC,{alignItems:"center",gap:"9px",sx:{paddingLeft:"20px"},children:(0,f.tZ)(o.nv,{textStyle:"ds.body.reduced.strong",color:"ds.text.neutral.quiet",children:m.key.includes("markup")?i.markup(m.key):i(m.key)})}):null]})};var xn,Sn,fn,vn,Cn;const En=({handleSelectClick:e,selected:t,businessOffer:n,showRecommendedBadge:a=!1})=>{const{translate:i}=(0,g.Z)(),r=mn(),s=n?zt({offer:n}):null;return(0,f.BX)(o.kC,{flexDirection:"column",sx:{display:"flex",flexDirection:"column",padding:"18px 28px 32px",border:`1px solid ${B.colors.dashGreen05}`,borderRadius:"4px",gap:"18px"},role:"contentinfo",children:[r.hasLimitedOffer?(0,f.tZ)(o.Ct,{mood:"brand",intensity:"catchy",label:i("team_account_teamplan_changeplan_plans_plan_limited_offer")}):a?(0,f.tZ)(o.Ct,{mood:"brand",intensity:"quiet",label:i("team_account_teamplan_changeplan_plans_plan_recommended")}):null,(0,f.BX)(o.kC,{fullWidth:!0,gap:"12px",children:[(0,f.BX)(o.kC,{fullWidth:!0,children:[(0,f.tZ)(o.kC,{sx:{display:"flex",alignItems:"center",flex:1},children:(0,f.tZ)(o.X6,{as:"h2",color:"ds.text.neutral.standard",children:i("team_account_teamplan_changeplan_plans_business_name")})}),(0,f.tZ)("div",{children:n?.currency&&s?(0,f.BX)(o.kC,{flexDirection:"column",alignItems:"flex-end",children:[(0,f.BX)(o.kC,{alignItems:"flex-end",gap:"0",flexDirection:"column",children:[(0,f.BX)(B.nvN,{size:"small",children:[i.price(n.currency,s/100,{notation:"compact"})," ",i("team_account_teamplan_changeplan_plans_seat")]}),r.hasLimitedOffer?(0,f.BX)(B.nvN,{size:"small",color:"ds.text.neutral.quiet",children:[i("team_account_teamplan_changeplan_plans_previous_price")," ",(0,f.tZ)("span",{sx:{textDecoration:"line-through"},children:r.translatedEquivalentPrice})]}):null]}),(0,f.tZ)(B.nvN,{color:"ds.text.neutral.quiet",size:"x-small",children:i("team_account_teamplan_changeplan_plans_billed_anually")})]}):xn||(xn=(0,f.tZ)(o.ZX,{size:16,mood:"neutral"}))})]}),(0,f.tZ)("hr",{style:{width:"100%",borderTop:`1px solid ${B.colors.grey02}`,borderBottom:"0",margin:"0"}})]}),(0,f.tZ)("div",{sx:{flex:1},children:(0,f.BX)(o.kC,{flexDirection:"column",gap:"6px",children:[(0,f.tZ)(B.nvN,{color:B.colors.grey00,size:"x-small",children:i("team_account_teamplan_changeplan_plans_business_header")}),(0,f.BX)(o.kC,{alignItems:"center",gap:"9px",sx:{marginTop:"10px"},children:[Sn||(Sn=(0,f.tZ)(B.dtP,{size:8})),(0,f.tZ)(B.nvN,{size:"x-small",color:B.colors.black,children:i.markup("team_account_teamplan_changeplan_plans_business_saml_markup",{ssoUrl:"https://support.dashlane.com/hc/articles/360015111019-SSO-FAQ"},{linkTarget:"_blank"},{color:B.colors.black})})]}),(0,f.BX)(o.kC,{alignItems:"center",gap:"9px",children:[fn||(fn=(0,f.tZ)(B.dtP,{size:8})),(0,f.tZ)(B.nvN,{size:"x-small",children:(0,f.tZ)(B.rUS,{rel:"noopener noreferrer",href:"https://blog.dashlane.com/how-admins-can-simplify-provisioning/",target:"_blank",children:i("team_account_teamplan_changeplan_plans_business_scim_provisioning")})})]}),(0,f.BX)(o.kC,{alignItems:"center",gap:"9px",children:[vn||(vn=(0,f.tZ)(B.dtP,{size:8})),(0,f.tZ)(B.nvN,{size:"x-small",color:B.colors.black,children:i.markup("team_account_teamplan_changeplan_plans_business_free_family_plan_markup",{familyPlanUrl:"https://support.dashlane.com/hc/articles/360015393479-Getting-Premium-Family-with-Dashlane-Business"},{linkTarget:"_blank"},{color:B.colors.black})})]})]})}),r.hasLimitedOffer?(0,f.tZ)(o.ke,{title:i("team_account_teamplan_changeplan_plans_limited_price_infobox"),mood:"brand"}):null,n?t?(0,f.tZ)(B.zxk,{sx:{width:"100%"},disabled:!0,nature:"secondary",size:"small",type:"button",children:i("team_account_teamplan_changeplan_plans_selected")}):(0,f.tZ)(B.zxk,{"data-testid":"btn-business-select",sx:{width:"100%"},size:"small",type:"button",onClick:e,children:i("team_account_teamplan_changeplan_plans_select")}):Cn||(Cn=(0,f.tZ)(o.kC,{justifyContent:"center",fullWidth:!0,children:(0,f.tZ)(o.ZX,{size:30,mood:"neutral"})}))]})};var Zn;const Tn=["team_account_teamplan_changeplan_plans_team_security_dashboard","team_account_teamplan_changeplan_plans_team_policy_management","team_account_teamplan_changeplan_plans_team_advanced_reporting","team_account_teamplan_changeplan_plans_team_group_sharing","team_account_teamplan_changeplan_plans_team_active_directory_integration","team_account_teamplan_changeplan_plans_team_dark_web_insights","team_account_teamplan_changeplan_plans_team_vpn_via_hotspot_shield","team_account_teamplan_changeplan_plans_team_audit_logs"],Dn=()=>{const{translate:e}=(0,g.Z)();return(0,f.BX)(o.kC,{flexDirection:"column",sx:{display:"flex",flexDirection:"column",gap:"12px",height:"fit-content",minWidth:"223px",width:"fit-content",backgroundColor:B.colors.grey06,padding:"16px"},role:"contentinfo",children:[(0,f.tZ)(o.kC,{children:(0,f.tZ)(o.kC,{sx:{borderRadius:"1px",border:`1px solid ${B.colors.midGreen03}`,padding:"1px",lineHeight:"10px"},children:(0,f.tZ)(B.j49,{size:"small",children:e("team_account_teamplan_changeplan_plans_plan_current")})})}),(0,f.tZ)(o.X6,{as:"h2",color:"ds.text.neutral.quiet",children:e("team_account_teamplan_changeplan_plans_team_name")})," ",(0,f.tZ)("hr",{style:{width:"100%",borderTop:`1px solid ${B.colors.grey02}`,borderBottom:"0",margin:"0"}}),(0,f.tZ)(o.kC,{flexDirection:"column",gap:"6px",children:Tn.map((t=>(0,f.BX)(o.kC,{alignItems:"center",gap:"9px",children:[Zn||(Zn=(0,f.tZ)(B.nQG,{size:8})),(0,f.tZ)(B.nvN,{color:B.colors.grey00,size:"x-small",children:e(t)})]},t)))})]})},kn={standard:{planName:"standard",price:null,heading:{key:"manage_subscription_plan_name_standard"},priceDescription1:{key:"team_post_trial_checkout_plan_selection_standard_card_seats"},priceDescription2:{key:"team_account_teamplan_changeplan_plans_billed_anually"},features:[{icon:"check",key:"team_post_trial_checkout_plan_selection_standard_card_feature_coverage"},{icon:"check",key:"team_account_teamplan_changeplan_plans_passwords"},{icon:"check",key:"team_account_teamplan_changeplan_plans_collections"},{icon:"check",key:"team_account_teamplan_changeplan_plans_admin_console"},{icon:"check",key:"team_post_trial_checkout_plan_selection_standard_card_feature_health_score"},{icon:"check",key:"team_account_teamplan_changeplan_plans_standard_activity_logs"},{icon:"check",key:"team_account_teamplan_changeplan_plans_account_recovery"},{icon:"check",key:"team_audit_log_category_dark_web_monitoring"}]},business:{planName:"business",price:null,heading:{key:"team_account_teamplan_changeplan_plans_business_name_V2"},priceDescription1:{key:"team_account_teamplan_changeplan_plans_per_seat_month"},priceDescription2:{key:"team_account_teamplan_changeplan_plans_billed_anually"},features:[{key:"team_post_trial_checkout_plan_selection_biz_card_feature_everything_in_standard_markup",icon:"check"},{key:"team_account_teamplan_changeplan_plans_unlimited_seats"},{key:"team_post_trial_checkout_plan_selection_biz_card_feature_sharing"},{key:"team_account_teamplan_changeplan_plans_phishing"},{key:"team_account_teamplan_changeplan_plans_sso_integration"},{key:"team_account_teamplan_changeplan_plans_scim_provisioning"},{key:"team_post_trial_checkout_plan_selection_biz_card_feature_siem"},{key:"team_account_teamplan_changeplan_plans_activity_logs"},{key:"team_post_trial_checkout_plan_selection_biz_card_feature_policies"},{key:"team_account_teamplan_changeplan_plans_vpn_for_wifi_protection"},{key:"team_account_teamplan_changeplan_plans_free_friends_family_plan"}]}},In=(e={})=>({...kn,...e}),An={standard:[{icon:"check",key:"team_account_teamplan_changeplan_plans_coverage"},{icon:"check",key:"team_account_teamplan_changeplan_plans_passwords"},{icon:"check",key:"team_account_teamplan_changeplan_plans_collections"},{icon:"check",key:"team_account_teamplan_changeplan_plans_autofill"},{icon:"check",key:"team_account_teamplan_changeplan_plans_admin_console"},{icon:"check",key:"team_account_teamplan_changeplan_plans_password_dashboard"},{icon:"check",key:"team_account_teamplan_changeplan_plans_standard_activity_logs"},{icon:"check",key:"team_account_teamplan_changeplan_plans_account_recovery"},{icon:"check",key:"team_audit_log_category_dark_web_monitoring"},{icon:"check",key:"team_account_teamplan_changeplan_plans_dark_web_insights"}],standardUpgradeBusiness:[{key:"team_account_teamplan_changeplan_plans_everything_in_standard_markup",icon:"check"},{key:"team_account_teamplan_changeplan_plans_unlimited_seats"},{key:"team_account_teamplan_changeplan_plans_sharing_controls"},{key:"team_account_teamplan_changeplan_plans_grouping_sharing"},{key:"team_account_teamplan_changeplan_plans_phishing"},{key:"team_account_teamplan_changeplan_plans_sso_integration"},{key:"team_account_teamplan_changeplan_plans_scim_provisioning"},{key:"team_account_teamplan_changeplan_plans_siem"},{key:"team_account_teamplan_changeplan_plans_advanced_activity_logs"},{key:"team_account_teamplan_changeplan_plans_security_policies"},{key:"team_account_teamplan_changeplan_plans_vpn_for_wifi_protection"},{key:"team_account_teamplan_changeplan_plans_free_family"}],starter:[{icon:"check",key:"team_account_teamplan_changeplan_plans_unlimited_passwords"},{icon:"check",key:"team_account_teamplan_changeplan_plans_secure_sharing"},{icon:"check",key:"team_account_teamplan_changeplan_plans_business_and_personal_spaces"},{icon:"check",key:"team_account_teamplan_changeplan_plans_dark_web_insights"}],business:[{key:"team_account_teamplan_changeplan_plans_everything_in_starter_markup",icon:"check"},{key:"team_account_teamplan_changeplan_plans_unlimited_seats"},{key:"team_account_teamplan_changeplan_plans_group"},{key:"team_account_teamplan_changeplan_plans_sso_integration"},{key:"team_account_teamplan_changeplan_plans_scim_provisioning"},{key:"team_account_teamplan_changeplan_plans_activity_logs"},{key:"team_account_teamplan_changeplan_plans_enterprise"},{key:"team_account_teamplan_changeplan_plans_free_friends_family_plan"},{key:"team_account_teamplan_changeplan_plans_phone_support"},{key:"team_account_teamplan_changeplan_plans_vpn_for_wifi_protection"},{key:"team_account_teamplan_changeplan_plans_phishing"}]},Nn=(e,t)=>{const{translate:n}=(0,g.Z)(),a=e?.businessOffer?.currency,{businessSeatPrice:i,starterSeatPrice:r,standardMonthlyPrice:s,standardYearlyPrice:o}=(e=>({businessSeatPrice:e?.businessOffer?zt({offer:e.businessOffer}):null,starterSeatPrice:e?.starterOffer?zt({offer:e.starterOffer}):null,standardMonthlyPrice:e?.entryLevelOffer?qt({offer:e.entryLevelOffer,selectedSeatsQty:10}):null,standardYearlyPrice:e?.entryLevelOffer?(({offer:e,selectedSeatsQty:t})=>Ut({offer:e,selectedSeatsQty:t}).price*t)({offer:e.entryLevelOffer,selectedSeatsQty:10}):null}))(e),l=Ft(e?.starterOffer),c=((e,t,n)=>{const{currency:a,businessSeatPrice:i,starterSeatPrice:r,standardMonthlyPrice:s,standardYearlyPrice:o,starterSeats:l,monthlyStarterPrice:c}=e,d=e=>((e,t,n)=>e&&t?n.price(t,e/100,{notation:"compact"}):null)(e,a,t);return{standard:{...kn.standard,currentPlan:!0,price:d(s),priceDescription1:{key:"team_account_teamplan_changeplan_plans_per_month_members"},priceDescription2:{key:"team_account_teamplan_changeplan_plans_billed_at_annually",variables:{yearlyPrice:d(o)}},showUpgradeInfobox:!0,features:[...An.standard]},standardUpgradeBusiness:{planName:"business",price:d(i),heading:{key:"team_account_teamplan_changeplan_plans_business_name_V2"},priceDescription1:{key:"team_account_teamplan_changeplan_plans_per_seat_month"},priceDescription2:{key:"team_account_teamplan_changeplan_plans_billed_anually"},showRecommendedBadge:!0,features:[...An.standardUpgradeBusiness]},starter:{currentPlan:!0,planName:"starter",price:d(r),heading:{key:"team_account_teamplan_changeplan_plans_starter_name"},priceDescription1:{key:"team_account_teamplan_changeplan_plans_per_seat_month"},priceDescription2:{key:"team_account_teamplan_changeplan_plans_billed_monthly_at",variables:{numberSeats:l,monthlyPrice:d(c)}},features:[{key:"team_account_teamplan_changeplan_plans_seats_flat_rate_markup",icon:"check",loading:!r,variables:{numberSeats:l,monthlyPrice:d(c)}},...An.starter],footer:{key:"team_account_teamplan_changeplan_plans_starter_upgrade_markup"}},business:{...kn.business,price:d(i),equivalentPrice:n.hasLimitedOffer&&i&&a?n.translatedEquivalentPrice:null,limitedOffer:n.hasLimitedOffer,features:[...An.business]}}})({currency:a,businessSeatPrice:i,starterSeatPrice:r,standardMonthlyPrice:s,standardYearlyPrice:o,starterSeats:l,monthlyStarterPrice:e?.starterOffer&&r?l*r:0},n,t);return In(c)};var wn;const On=({selectedOffer:e,handleSelection:t,teamOffers:n,currentSpaceTier:a})=>{const{translate:i}=(0,g.Z)(),r=mn(),s=Nn(n,r),l=a===_.lD.Starter,c=a===_.lD.Standard,{businessOffer:d}=n;return(0,f.tZ)(Wt,{headingLevel:"h1",title:i("team_account_teamplan_changeplan_plans"),children:(0,f.tZ)(o.kC,{gap:"16px",flexWrap:"nowrap",sx:{paddingTop:"16px"},children:c&&s.standardUpgradeBusiness?(0,f.BX)(f.HY,{children:[(0,f.tZ)(bn,{plan:s.standard}),s.standardUpgradeBusiness&&(0,f.tZ)(bn,{plan:s.standardUpgradeBusiness,handleSelectClick:()=>t(d),selected:!!e&&e.name===d.name})]}):l&&s.starter?(0,f.BX)(f.HY,{children:[s.starter&&(0,f.tZ)(bn,{plan:s.starter}),(0,f.tZ)(bn,{plan:s.business,handleSelectClick:()=>t(d),selected:!!e&&e.name===d.name})]}):(0,f.BX)(f.HY,{children:[wn||(wn=(0,f.tZ)(Dn,{})),(0,f.tZ)(En,{businessOffer:d,selected:!!e&&e.name===d.name,handleSelectClick:()=>t(d)})]})})})};var Rn,Ln=n(48827),Mn=n(10051);const Bn=({email:e,emailValid:t,setEmail:n,setEmailValid:a})=>{const{translate:i}=(0,g.Z)(),s=(0,Ln.G)(),[l,c]=r.useState(!1);return s?.email?(0,f.BX)(Wt,{title:i("team_account_teamplan_changeplan_billing_contact_header"),children:[Rn||(Rn=(0,f.tZ)("br",{})),(0,f.tZ)(o.nv,{color:"ds.text.neutral.quiet",className:"automation-tests-tac-billing",children:i.markup("team_account_teamplan_changeplan_billing_contact_copy_markup",{billContactEmail:s.email})}),(0,f.tZ)("div",{style:{margin:"20px 0px"},children:(0,f.tZ)(o.XZ,{"data-testid":"additionalEmailCheckbox",label:i("team_account_teamplan_changeplan_billing_contact_checkbox_label"),checked:l,onChange:e=>{n(""),a(!0),c(e.currentTarget.checked)}})}),l?(0,f.tZ)(o.oi,{"data-testid":"additionalEmailInput",type:"text",onChange:e=>n(e.currentTarget.value),onBlur:e=>(e=>{(0,Mn.vV)(e.currentTarget.value)?a(!0):a(!1)})(e),value:e,feedback:t?void 0:{id:"error-message",text:i("team_account_teamplan_changeplan_billing_contact_input_warning"),type:"error"}}):null]}):null},Pn=()=>{const{translate:e}=(0,g.Z)();return(0,f.BX)(Wt,{title:(0,f.tZ)(B.nvN,{bold:!0,size:"large",children:e("team_account_teamplan_changeplan_questions_header")}),children:[(0,f.tZ)(B.nvN,{color:B.colors.grey00,size:"small",style:{marginBottom:"10px"},children:e.markup("team_account_teamplan_changeplan_questions_help_center_markup",{helpCenterUrl:ae.Vr},{linkTarget:"_blank",onLinkClicked:()=>{(0,m.Kz)(new l.UserOpenHelpCenterEvent({helpCenterArticleCta:l.HelpCenterArticleCta.HelpCenter}))}})}),(0,f.tZ)(B.nvN,{size:"small",color:B.colors.grey00,children:e.markup("team_account_teamplan_changeplan_questions_customer_support_markup",{customerSupportUrl:ae.to},{linkTarget:"_blank",onLinkClicked:()=>{(0,m.Kz)(new l.UserCallToActionEvent({callToActionList:[l.CallToAction.ContactCustomerSupport],chosenAction:l.CallToAction.ContactCustomerSupport,hasChosenNoAction:!1}))}})})]})};var Un,zn,Xn,qn,jn,Gn;const Fn=({targetPlan:e})=>{const{translate:t}=(0,g.Z)(),{data:n}=(({targetPlan:e})=>{const{routes:t}=(0,i.Xo)(),n={DIRECTORY_SYNC:`${t.teamIntegrationsRoutePath}${a.Nr.DIRECTORY_SYNC}`,POLICIES:`${t.teamSettingsRoutePath}${a.B9.POLICIES}`,SSO:`${t.teamIntegrationsRoutePath}${a.Nr.SSO}`};return{data:{team:{header:"team_account_teamplan_changeplan_success_team_header",description:"team_account_teamplan_changeplan_success_team_description",alert:"team_account_teamplan_changeplan_success_team_alert",features:[{header:"team_account_teamplan_changeplan_success_features_vpn_header",description:"team_account_teamplan_changeplan_success_features_vpn_description",icon:Un||(Un=(0,f.tZ)(B.Qut,{size:24})),actions:[{mood:"brand",intensity:"catchy",content:"team_account_teamplan_changeplan_success_features_actions_turn_on_vpn_access",link:n.POLICIES},{external:!0,mood:"neutral",intensity:"quiet",content:"team_account_teamplan_changeplan_success_features_actions_see_setup_guide",link:"https://support.dashlane.com/hc/articles/360000037900#title1"}]},{header:"team_account_teamplan_changeplan_success_features_protection_header",description:"team_account_teamplan_changeplan_success_features_protection_description",icon:zn||(zn=(0,f.tZ)(B.c6E,{size:24})),actions:[{mood:"brand",intensity:"catchy",content:"team_account_teamplan_changeplan_success_features_actions_add_seats",link:`${t.teamAccountRoutePath}?showSeatsDialog=true`}]}]},business:{header:"team_account_teamplan_changeplan_success_business_header",description:"team_account_teamplan_changeplan_success_business_description",alert:"team_account_teamplan_changeplan_success_business_alert",features:[{header:"team_account_teamplan_changeplan_success_sso_header",description:"team_account_teamplan_changeplan_success_sso_copy",icon:Xn||(Xn=(0,f.tZ)(B.oEX,{size:24})),actions:[{mood:"brand",intensity:"catchy",content:"team_account_teamplan_changeplan_success_features_actions_start_setup",link:n.SSO},{external:!0,mood:"neutral",intensity:"quiet",content:"team_account_teamplan_changeplan_success_features_actions_see_setup_guide",link:"https://support.dashlane.com/hc/articles/360015973719-Set-up-SSO-and-SCIM-with-Azure-AD"}]},{header:"team_account_teamplan_changeplan_success_features_scim_header",description:"team_account_teamplan_changeplan_success_features_scim_description",icon:qn||(qn=(0,f.tZ)(B.kpp,{size:24})),actions:[{mood:"brand",intensity:"catchy",content:"team_account_teamplan_changeplan_success_features_actions_start_setup",link:n.DIRECTORY_SYNC},{external:!0,mood:"neutral",intensity:"quiet",content:"team_account_teamplan_changeplan_success_features_actions_see_setup_guide",link:"https://support.dashlane.com/hc/articles/360015973719#h_01FTXPSRCV3CY1QVY1B5S5TD0J"}]},{header:"team_account_teamplan_changeplan_success_features_friends_and_family_header",description:"team_account_teamplan_changeplan_success_features_friends_and_family_description",icon:jn||(jn=(0,f.tZ)(B.c6E,{size:24})),actions:[{external:!0,mood:"brand",intensity:"catchy",content:"team_account_teamplan_changeplan_success_features_actions_learn_more",link:"https://www.dashlane.com/plans/family"}]},{header:"team_account_teamplan_changeplan_success_features_phone_support_header",description:"team_account_teamplan_changeplan_success_features_phone_support_description",icon:Gn||(Gn=(0,f.tZ)(B.qWc,{size:24})),actions:[{external:!0,mood:"brand",intensity:"catchy",content:"team_account_teamplan_changeplan_success_features_actions_schedule_a_call",link:"https://calendly.com/dashlane-support/call_back_form",logEvent:new l.UserCallToActionEvent({callToActionList:[l.CallToAction.ContactPhoneSupport],chosenAction:l.CallToAction.ContactPhoneSupport,hasChosenNoAction:!1})}]}]}}[e]}})({targetPlan:e}),{alert:s,show:c}=(0,B.VYq)({message:t(n.alert),severity:B.BLW.SUCCESS,size:B.k3y.SMALL,dismissDelay:5e3});return(0,r.useEffect)((()=>{c()}),[]),(0,f.BX)(f.HY,{children:[(0,f.tZ)("div",{style:{bottom:"12px",position:"absolute",marginLeft:"auto",marginRight:"auto",left:0,right:0,width:"600px"},children:s}),(0,f.BX)(Wt,{title:t(n.header),sx:{width:"632px",padding:"32px",borderRadius:"8px"},children:[(0,f.tZ)("div",{style:{marginTop:"8px"},children:(0,f.tZ)(B.nvN,{size:"medium",color:o.O9.lightTheme.ds.text.neutral.quiet,children:t(n.description)})}),(0,f.tZ)(o.kC,{sx:{marginTop:"32px",display:"flex",flexDirection:"column",borderBottom:`1px solid ${o.O9.lightTheme.ds.border.neutral.quiet.idle}`},children:n.features.map((e=>(0,f.tZ)(o.kC,{flexDirection:"column",sx:{display:"flex",flexDirection:"column",borderTop:`1px solid ${o.O9.lightTheme.ds.border.neutral.quiet.idle}`,padding:"32px 0"},children:(0,f.BX)(o.kC,{gap:"16px",flexWrap:"nowrap",children:[(0,f.tZ)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0,width:"40px",height:"40px",borderRadius:"8px",backgroundColor:o.O9.lightTheme.ds.container.expressive.brand.quiet.idle},children:e.icon}),(0,f.BX)(o.kC,{flexDirection:"column",gap:"8px",children:[(0,f.tZ)(B.nvN,{bold:!0,color:o.O9.lightTheme.ds.text.neutral.catchy,children:t(e.header)}),(0,f.tZ)(B.nvN,{size:"x-small",color:o.O9.lightTheme.ds.text.neutral.quiet,children:t(e.description)}),(0,f.tZ)(o.kC,{gap:"8px",children:e.actions.map((e=>e.external?(0,f.tZ)("a",{href:e.link,target:"_blank",rel:"noopener noreferrer",children:(0,f.tZ)(o.zx,{mood:e.mood,intensity:e.intensity,size:"small",type:"button",onClick:()=>{e.logEvent&&(0,m.Kz)(e.logEvent)},children:t(e.content)})},e.content):(0,f.tZ)(i.rU,{to:e.link,children:(0,f.tZ)(o.zx,{mood:e.mood,intensity:e.intensity,size:"small",type:"button",children:t(e.content)})},e.content)))})]})]})},e.header)))})]})]})};var Vn;const Hn=({currentSeats:e,teamOffers:t})=>{const{translate:n}=(0,g.Z)(),a=(0,Te.Y)(),i=a.status===s.rq.Success&&(0,P.Lj)(a.data),r=a.status===s.rq.Success&&(0,P.f1)(a.data),l=a.status===s.rq.Success&&(0,P.pq)(a.data),c=a.status===s.rq.Success&&(0,P.NG)(a.data),d=t?.businessOffer?.currency,_=t?.businessOffer?Xt({offer:t.businessOffer}):null,u=t?.teamOffer?Xt({offer:t.teamOffer}):null,m=t?.starterOffer?Xt({offer:t.starterOffer}):null,p=t?.entryLevelOffer?Xt({offer:t.entryLevelOffer}):null,h=Ft(t?.starterOffer),y=i&&p&&d?n.price(d,p*e/100,{notation:"compact"}):r&&m&&d?n.price(d,m*h/100,{notation:"compact"}):l&&u&&d?n.price(d,u*e/100,{notation:"compact"}):c&&_&&d?n.price(d,_*e/100,{notation:"compact"}):null;return(0,f.tZ)(Wt,{title:n("team_account_teamplan_changeplan_current_plan_header"),children:(0,f.tZ)(o.kC,{flexDirection:"column",gap:"16px",sx:{marginTop:"16px"},children:(0,f.BX)("div",{sx:{display:"flex",alignItems:"center",padding:"12px 10px",justifyContent:"space-between",backgroundColor:"ds.container.agnostic.neutral.quiet"},children:[(0,f.tZ)(o.nv,{textStyle:"ds.body.standard.strong",color:"ds.text.neutral.standard",children:i?n("manage_subscription_plan_name_dashlane_standard"):r?n("team_account_teamplan_changeplan_current_plan_starter"):l?n("manage_subscription_plan_name_dashlane_team"):c?n("manage_subscription_plan_name_dashlane_business"):Vn||(Vn=(0,f.tZ)(o.ZX,{size:30,mood:"neutral"}))}),(0,f.tZ)(o.nv,{textStyle:"ds.body.standard.strong",color:"ds.text.neutral.standard",children:y?n("team_account_teamplan_changeplan_current_plan_per_year",{cost:y}):null})]})})})};var Wn,$n,Yn,Kn=n(7973);const Qn=({currency:e,selectedOffer:t,costData:n})=>{const{translate:a}=(0,g.Z)(),{loading:i,billingCountry:r}=T();if(i)return Wn||(Wn=(0,f.tZ)(o.ZX,{}));const s="US"===r?"team_account_teamplan_changeplan_order_summary_tax":"team_account_teamplan_vat";return(0,f.BX)(o.kC,{flexDirection:"column",gap:"24px",sx:{borderStyle:"solid",borderColor:"ds.border.neutral.quiet.idle",borderWidth:"1px",borderRadius:"8px",backgroundColor:"ds.container.agnostic.neutral.supershy",padding:"24px"},children:[(0,f.BX)(o.kC,{justifyContent:"space-between",alignItems:"center",children:[(0,f.tZ)(o.X6,{as:"h2",textStyle:"ds.title.section.medium",children:a("team_account_teamplan_changeplan_order_summary_header")}),(0,f.tZ)(o.nv,{textStyle:"ds.body.helper.regular",color:"ds.text.neutral.catchy",children:(0,Kn.Z)(new Date,"MM/dd/yyyy")})]}),(0,f.tZ)(en,{selectedOffer:t,currency:e,costData:n}),(0,f.BX)(o.kC,{flexDirection:"column",gap:"16px",children:[(0,f.tZ)(o.nv,{textStyle:"ds.body.standard.regular",color:"ds.text.neutral.catchy",sx:{padding:"0 10px",fontWeight:"light"},children:a("team_account_teamplan_changeplan_order_summary_seats_total",{totalSeats:n.totalSeats})}),(0,f.tZ)(It,{label:(0,f.tZ)(o.nv,{color:"ds.text.neutral.standard",children:a("team_account_teamplan_changeplan_order_summary_subtotal")}),value:e?(0,f.tZ)(o.nv,{color:"ds.text.neutral.standard",children:a.price(e,n.subtotal/100)}):null}),n.tax&&e?(0,f.tZ)(It,{label:(0,f.tZ)(o.nv,{color:"ds.text.neutral.quiet",children:a(s)}),value:(0,f.tZ)(o.nv,{color:"ds.text.neutral.quiet",children:a.price(e,n.tax/100)})}):null,n?.proratedDiscount?(0,f.tZ)(It,{label:(0,f.BX)(o.kC,{alignItems:"center",gap:"5px",children:[(0,f.tZ)(o.nv,{color:"ds.text.neutral.quiet",children:a("team_account_teamplan_changeplan_order_summary_prorated_discount")}),(0,f.tZ)(B.ua7,{content:a("team_account_teamplan_changeplan_order_summary_prorated_discount_tooltip"),children:$n||($n=(0,f.tZ)(o.JO,{name:"FeedbackInfoOutlined",size:"large",color:"ds.text.neutral.quiet"}))})]}),value:e?(0,f.tZ)(o.nv,{color:"ds.text.neutral.quiet",children:a.price(e,n.proratedDiscount/100)}):null}):null,n?.promoPrice?(0,f.tZ)(It,{label:(0,f.tZ)(o.nv,{color:"ds.text.neutral.quiet",children:a("team_account_teamplan_upgrade_premium_coupon")}),value:e?(0,f.BX)(o.nv,{color:"ds.text.neutral.quiet",children:["-",a.price(e,n.promoPrice/100)]}):null}):null,Yn||(Yn=(0,f.tZ)(kt,{})),"number"==typeof n?.total?(0,f.tZ)(It,{label:(0,f.tZ)(o.nv,{textStyle:"ds.title.block.medium",children:a("team_account_teamplan_total")}),value:e?(0,f.tZ)(o.nv,{textStyle:"ds.title.block.medium",children:a.price(e,n.total/100)}):null}):null]})]})},Jn=()=>{const{translate:e}=(0,g.Z)();return(0,f.tZ)(Wt,{title:e("team_account_teamplan_changeplan_payment_method_header"),children:(0,f.BX)(o.kC,{gap:"6px",sx:{marginTop:"16px"},children:[(0,f.tZ)(B.UXA,{size:16,color:B.colors.grey00}),(0,f.tZ)(B.nvN,{size:"medium",color:B.colors.grey00,children:e("team_account_teamplan_changeplan_payment_method_invoice_body")})]})})};var ea=n(88355),ta=n(86498);const na=/^((AT)(U\d{8})|(BE)(0\d{9}|\d{10})|(BG)(\d{9,10})|(CHE)(\d{9})|(CY)(\d{8}[A-Z])|(CZ)(\d{8,10})|(DE)(\d{9})|(DK)(\d{8})|(EE)(\d{9})|(GB)(\d{5,12})|(EL|GR)(\d{9})|(ES)([\dA-Z]\d{7}[\dA-Z])|(FI)(\d{8})|(FR)([\dA-Z]{2}\d{9})|(HU)(\d{8})|(HR)(\d{11})|(IE)(\d{7}[A-Z]{1,2})|(IT)(\d{11})|(LT)(\d{9}|\d{12})|(LU)(\d{8})|(LV)(\d{11})|(MT)(\d{8})|(NL)(\d{9}(B\d{2}|BO2))|(PL)(\d{10})|(PT)(\d{9})|(RO)(\d{2,10})|(SE)(\d{12})|(SI)(\d{8})|(SK)(\d{10})|(\d{9}MVA))$/i,aa=e=>{const t=e.replaceAll(/\./g,"");return na.test(t)},ia="team_account_vat_number_add_description",ra="team_account_vat_number";var sa=function(e){return e[e.ADD=0]="ADD",e[e.UPDATE=1]="UPDATE",e}(sa||{}),oa=function(e){return e.INITIAL_VIEW="initialView",e.EDIT="edit",e.SAVE="save",e.SAVING="saving",e}(oa||{});const la=({isInAccountSummary:e})=>{const{translate:t}=(0,g.Z)(),[n,a]=(0,r.useState)(""),[i,s]=(0,r.useState)("cancel"),[l,d]=(0,r.useState)(!1),[_,u]=(0,r.useState)(sa.ADD),[m,p]=(0,r.useState)(oa.INITIAL_VIEW),h=(0,ta.V)(),{deleteTeamVat:y,upsertTeamVat:b}=(0,F.u)(Vt.a),x=(0,c.k)(Vt.a,"getTeamVat");(0,r.useEffect)((()=>{x.status===Ze.rq.Success&&""!==x.data?(a(x.data),s("delete"),p(oa.EDIT)):p(oa.INITIAL_VIEW)}),[x.status,x.data]);const S=e=>e&&!aa(e)?t("team_account_vat_number_invalid"):null,v={vatNumber:n},C=_===sa.ADD?"team_account_vat_number_add_success":"team_account_vat_number_update_success";return(0,f.BX)(f.HY,{children:[""===n&&(e?(0,f.tZ)(o.nv,{color:"ds.text.neutral.quiet",textStyle:"ds.body.standard.regular",children:t(ia)}):(0,f.tZ)(B.nvN,{color:"ds.text.neutral.quiet",size:"medium",children:t(ia)})),m===oa.INITIAL_VIEW?(0,f.tZ)("div",{sx:{marginTop:"16px"},children:(0,f.tZ)(o.zx,{mood:"neutral",intensity:"quiet",icon:"ActionAddOutlined",layout:"iconLeading",onClick:()=>{p(oa.SAVE)},children:t("team_account_vat_number_add_label")})}):(0,f.tZ)("div",{sx:{marginTop:"16px"},children:(0,f.tZ)(ea.J9,{initialValues:v,onSubmit:m===oa.SAVE?async e=>{p(oa.SAVING),"success"===(await b({newVATNumber:e.vatNumber})).tag&&(a(e.vatNumber),d(!0),p(oa.EDIT),s("delete"),setTimeout((()=>{d(!1)}),2e3))}:m===oa.EDIT?()=>{d(!1),p(oa.SAVE),u(sa.UPDATE)}:()=>{},children:({errors:e,resetForm:n,touched:r,values:l})=>(0,f.tZ)(ea.l0,{children:(0,f.BX)(B.T5p,{gap:"16px",gridTemplateColumns:"2fr 0.25fr 1fr",children:[(0,f.BX)(B.dDn,{gridColumn:"1 / 2",children:[(0,f.tZ)(ea.gN,{name:"vatNumber",validate:S,children:({field:{onChange:e,...n}})=>(0,f.tZ)(o.oi,{label:t(ra),disabled:m===oa.EDIT,onChange:t=>{e(t),m===oa.EDIT&&(p(oa.SAVE),d(!1))},...n,sx:{input:{textTransform:"uppercase"}}})}),e.vatNumber&&r.vatNumber&&(0,f.tZ)(B.nvN,{color:"ds.text.danger.quiet",size:"x-small",children:e.vatNumber})]}),(0,f.tZ)(B.dDn,{gridColumn:"2 / 3",sx:{marginTop:"16px"},children:m===oa.SAVING?(0,f.tZ)(o.zx,{intensity:"catchy",layout:"labelOnly",disabled:!0,type:"submit",children:t("team_account_name_saving_label")}):m===oa.SAVE?(0,f.tZ)(o.zx,{intensity:"catchy",layout:"labelOnly",disabled:""===l.vatNumber,type:"submit",children:t("team_settings_button_save_label")}):(0,f.tZ)(o.zx,{mood:"neutral",intensity:"quiet",icon:"ActionEditOutlined",layout:"iconLeading",disabled:""===l.vatNumber,type:"submit",children:t("team_account_name_edit_label")})}),(0,f.tZ)(B.dDn,{gridColumn:"3 / 4",sx:{marginTop:"16px"},children:"cancel"===i?(0,f.tZ)(o.zx,{mood:"neutral",intensity:"quiet",layout:"labelOnly",disabled:m===oa.SAVING,onClick:()=>p(oa.INITIAL_VIEW),children:t("_common_action_cancel")}):(0,f.tZ)(o.zx,{mood:"neutral",intensity:"quiet",icon:"ActionDeleteOutlined",layout:"iconLeading",disabled:m===oa.SAVING,onClick:()=>{n({values:v}),(async()=>{"success"===(await y()).tag&&(a(""),p(oa.INITIAL_VIEW),s("cancel"),u(sa.ADD),h.showAlert(t("team_account_vat_number_delete_success_alert"),B.BLW.SUCCESS))})()},children:t("team_account_delete_label")})})]})})})}),l&&(0,f.tZ)(B.nvN,{color:"ds.text.positive.quiet",size:"x-small",children:t(C)})]})},ca=({isInAccountSummary:e})=>{const{translate:t}=(0,g.Z)();return(0,f.tZ)("div",{children:e?(0,f.BX)("div",{sx:{marginTop:"24px"},children:[(0,f.tZ)(o.X6,{color:"ds.text.neutral.catchy",as:"h2",textStyle:"ds.title.section.medium",children:t(ra)}),(0,f.tZ)("div",{sx:{marginTop:"16px"},children:(0,f.tZ)(la,{isInAccountSummary:e})})]}):(0,f.tZ)(Wt,{title:t(ra),children:(0,f.tZ)("div",{sx:{marginTop:"16px"},children:(0,f.tZ)(la,{isInAccountSummary:e})})})})};let da=function(e){return e.FORM="form",e.SUCCESS="success",e}({});var _a,ua,ma,pa,ga,ha;const ya=()=>{var e,t,n;const a=Tt(),g=(0,u.s)(),h=(0,r.useContext)(Ct),{showToast:y}=(0,o.pm)(),{data:b,status:x}=(0,c.k)(d.o,"getTeamSeats"),{loading:S,billingCountry:C}=T(),[Z,D]=(0,r.useState)(0),[k,I]=(0,r.useState)(),[A,N]=(0,r.useState)(""),[w,O]=(0,r.useState)(!0),[R,L]=(0,r.useState)(da.FORM),[M,B]=(0,r.useState)(),[P,U]=(0,r.useState)(""),z=(null!=(e=b?.paid)?e:0)+(null!=(t=b?.extraFree)?t:0),X=z-(null!=(n=b?.remaining)?n:0),q=g?.spaceTier;if((0,r.useEffect)((()=>{""!==P&&y({mood:"danger",description:P}),U("")}),[P]),(0,r.useEffect)((()=>(R===da.FORM?h(_a||(_a=(0,f.tZ)(E,{}))):h(null),()=>{h(null)})),[R]),(0,r.useEffect)((()=>{a&&("business"!==(0,i.CN)().get("plan")&&q!==_.lD.Team&&q!==_.lD.Starter&&q!==_.lD.Standard||I(a.businessOffer))}),[a]),S||x!==s.rq.Success||!b||!g||!a||!q)return ua||(ua=(0,f.tZ)(o.ZX,{mood:"brand"}));const j=g.billingType===_.qo.Invoice,G=a.businessOffer.currency;return(0,f.tZ)(o.kC,{sx:{margin:"45px",width:"1180px"},children:(0,f.BX)(o.kC,{flexDirection:"column",gap:"8px",children:[R===da.FORM?(0,f.BX)(o.kC,{gap:"8px",children:[(0,f.tZ)("div",{sx:{width:"646px"},children:(0,f.BX)(o.kC,{flexDirection:"column",flexWrap:"nowrap",gap:"8px",children:[(0,f.tZ)(On,{teamOffers:a,currentSpaceTier:q,selectedOffer:k,handleSelection:e=>{(e=>{(0,m.Kz)(new l.UserClickEvent({clickOrigin:l.ClickOrigin.Plans,button:jt(e)?l.Button.SelectTeamPlan:Gt(e)?l.Button.SelectBusinessPlan:l.Button.SelectStarterPlan}))})(e),I(e)}}),j?ma||(ma=(0,f.tZ)(Jn,{})):"US"!==C?(0,f.BX)(f.HY,{children:[(0,f.tZ)(p.I,{b2b:!0,styles:{padding:"24px"}}),pa||(pa=(0,f.tZ)(ca,{isInAccountSummary:!1})),(0,f.tZ)(Bn,{email:A,emailValid:w,setEmail:N,setEmailValid:O})]}):(0,f.BX)(f.HY,{children:[(0,f.tZ)(p.I,{b2b:!0,styles:{padding:"24px"}}),(0,f.tZ)(Bn,{email:A,emailValid:w,setEmail:N,setEmailValid:O})]})]})}),(0,f.tZ)("div",{sx:{width:"470px"},children:(0,f.BX)(o.kC,{flexDirection:"column",gap:"8px",children:[(0,f.tZ)(Hn,{teamOffers:a,currentSeats:z}),(0,f.tZ)(un,{currentSeats:z,currentActiveSeats:X,currentSpaceTier:q,selectedSeatsQty:Z,currency:G,selectedOffer:k,email:A,emailValid:w,onSuccess:()=>{L((()=>da.SUCCESS))},onError:e=>{U(e)},setSelectedSeatsQty:D,setOrderSummaryData:B}),ga||(ga=(0,f.tZ)(Pn,{}))]})})]}):null,R===da.SUCCESS&&M&&k?(0,f.BX)(o.kC,{flexWrap:"nowrap",gap:"16px",children:[(0,f.tZ)(o.kC,{flexDirection:"column",sx:{flexGrow:"2",maxWidth:"752px"},children:(0,f.tZ)(Fn,{targetPlan:Gt(k)?"business":"team"})}),(0,f.BX)(o.kC,{gap:"16px",flexDirection:"column",sx:{flexGrow:"1",width:"368px"},children:[(0,f.tZ)(Qn,{currency:G,selectedOffer:k,costData:M}),ha||(ha=(0,f.tZ)(v,{}))]})]}):null]})})};var ba,xa,Sa,fa=n(68754),va=n(97461),Ca=n(5822),Ea=n(9216),Za=n(83175),Ta=n(86834),Da=n(50506);const ka=!1,Ia=({seats:e,setPaymentMethodType:t})=>{const{translate:n}=(0,g.Z)(),[a,i]=(0,r.useState)("credit-card"),[c,d]=(0,r.useState)(!1),_=(0,Te.Y)();(0,r.useEffect)((()=>{t(a)}),[a,t]);const{pollUntilCardUpdate:u}=(0,h.C)({b2c:ka,handleCardUpdate:e=>{e&&_.status===s.rq.Success&&(0,Ea.dV)(_.data,l.FlowStep.Complete)}}),{loading:m,billingInformation:p}=(0,h.C)({b2c:ka}),y=p?.last4,b=(x=p?.country,(0,Da.S)(x)===Da.n.EUROPE);var x;const S=e>20||b;if(_.status!==s.rq.Success||!_.data||m)return ba||(ba=(0,f.tZ)(o.ZX,{}));const v=()=>{u(),d(!0),(0,Ea.dV)(_.data,l.FlowStep.Start)};return(0,f.BX)(o.Zb,{children:[(0,f.tZ)(o.X6,{as:"h2",children:n("team_post_trial_checkout_payment_selection_heading")}),(0,f.tZ)(o.Ee,{groupName:"options",value:a,onChange:e=>i(e.target.value),children:(0,f.BX)(o.kC,{gap:"16px",flexDirection:"row",flexWrap:"nowrap",children:[(0,f.tZ)("div",{sx:{width:"50%",border:"credit-card"===a?"1px solid ds.border.brand.standard.active":"1px solid ds.border.neutral.quiet.idle",borderRadius:"8px",padding:"24px"},children:(0,f.tZ)(o.Y8,{label:(0,f.BX)(o.kC,{flexDirection:"column",alignItems:"center",sx:{marginLeft:"-40px",gap:"8px"},children:[xa||(xa=(0,f.tZ)(o.JO,{name:"ItemPaymentOutlined",color:"ds.text.neutral.standard",size:"large"})),(0,f.tZ)(o.nv,{color:"ds.text.neutral.standard",textStyle:"ds.body.standard.strong",children:n("team_post_trial_checkout_payment_selection_credit_card_description")}),c?(0,f.tZ)(Za.J,{b2c:ka,setPaymentLoading:d}):y?(0,f.BX)(o.kC,{justifyContent:"space-between",sx:{width:"100%",padding:"8px 8px 0"},children:[Sa||(Sa=(0,f.tZ)(Ta.I,{b2c:ka,isAppStoreUser:!1,isGooglePlayUser:!1})),(0,f.tZ)(o.zx,{"aria-label":n("team_post_trial_checkout_payment_selection_edit_billing_info"),layout:"iconOnly",icon:"ActionEditOutlined",intensity:"supershy",onClick:v})]}):(0,f.tZ)(o.zx,{mood:"brand",intensity:"catchy",size:"large",icon:"ActionAddOutlined",layout:"iconLeading",onClick:v,children:n("team_post_trial_checkout_payment_selection_add_billing_info")})]}),value:"credit-card"})}),(0,f.tZ)("div",{sx:{width:"50%",borderRadius:"8px",border:S?"invoice"===a?"1px solid ds.border.brand.standard.active":"1px solid ds.border.neutral.quiet.idle":"none",backgroundColor:S?"ds.container.agnostic.neutral.supershy":"ds.container.agnostic.neutral.quiet",padding:"24px"},children:(0,f.tZ)(o.Y8,{label:(0,f.BX)(o.kC,{flexDirection:"column",alignItems:"center",sx:{marginLeft:"-40px",gap:"8px"},children:[(0,f.tZ)(o.JO,{name:"ItemTaxNumberOutlined",color:S?"ds.text.neutral.catchy":"ds.text.neutral.quiet",size:"large"}),(0,f.tZ)(o.nv,{color:S?"ds.text.neutral.catchy":"ds.text.neutral.quiet",textStyle:"ds.body.standard.strong",children:n("team_post_trial_checkout_payment_selection_invoice_radio_description")}),S?(0,f.tZ)(o.nv,{color:"ds.text.neutral.standard",sx:{textAlign:"center"},children:n("team_post_trial_checkout_payment_selection_invoice_enabled_description")}):(0,f.tZ)(o.ke,{title:n("team_post_trial_checkout_payment_selection_invoice_infobox_label")})]}),value:"invoice",disabled:!S})})]})})]})};var Aa=n(35489);const Na=e=>{var t;const{data:n,status:a}=(0,c.k)(Aa.L,"getMembersList",{teamId:null!=(t=e?.toString())?t:""}),i={isLoading:!1,isErrored:!1,data:null};return a===s.rq.Loading?{...i,isLoading:!0}:a===s.rq.Error?{...i,isErrored:!0}:{isLoading:!1,isErrored:!1,data:n}};var wa;const Oa={display:"flex",alignItems:"center",padding:"12px 8px",borderRadius:"8px",justifyContent:"space-between",backgroundColor:"ds.container.agnostic.neutral.quiet"},Ra="team_post_trial_checkout_number_of_seats",La=({numberOfMembers:e,planPrice:t,selectedOffer:n,setPlanPrice:a,setSelectedSeatsQty:i})=>{const{translate:s}=(0,g.Z)(),l=e>2?e:2;if((0,r.useEffect)((()=>{if(n){const e=Ut({offer:n}).equivalentPrice;a(e),Gt(n)?i(l):i(10)}}),[n,l]),!n)return(0,f.tZ)("div",{sx:Oa,children:(0,f.tZ)(o.nv,{textStyle:"ds.body.standard.strong",color:"ds.text.brand.quiet",children:s("team_account_teamplan_changeplan_order_summary_select_plan")})});const c=n.currency,d=10*t,_=Gt(n)?{planName:s("team_account_teamplan_changeplan_plans_business_name"),planPrice:s("team_post_trial_checkout_order_summary_seat_year",{cost:s.price(c,t/100,{notation:"compact"})})}:{planName:s("manage_subscription_plan_name_dashlane_standard"),planPrice:s("team_post_trial_checkout_standard_order_summary_seat_year",{cost:s.price(c,d/100,{notation:"compact"})})};return(0,f.BX)(f.HY,{children:[(0,f.BX)("div",{sx:Oa,children:[(0,f.tZ)(o.nv,{textStyle:"ds.body.standard.strong",color:"ds.text.brand.quiet",children:_.planName}),(0,f.tZ)(o.nv,{textStyle:"ds.body.standard.strong",color:"ds.text.brand.quiet",children:_.planPrice})]}),(0,f.BX)(o.kC,{justifyContent:"flex-end",sx:{padding:Gt(n)?"0 10px":"16px 10px 8px"},children:[(0,f.tZ)("div",{sx:{display:"flex",alignItems:"center",flex:1},children:(0,f.tZ)(o.nv,{textStyle:"ds.body.standard.strong",color:"ds.text.neutral.catchy",children:s(Ra)})}),(0,f.tZ)("div",{sx:{display:"flex",alignItems:"center"},children:(0,f.tZ)("div",{sx:{width:"146px"},children:Gt(n)?(0,f.tZ)(Dt.w,{id:"checkoutNumberOfSeats",inputWidth:"66px",label:"",ariaLabel:s(Ra),minValue:l,onChange:i,defaultValue:l}):(0,f.tZ)("div",{sx:{float:"right"},children:wa||(wa=(0,f.tZ)(o.nv,{textStyle:"ds.body.standard.strong",color:"ds.text.neutral.catchy",children:10}))})})})]})]})};var Ma=n(96765);const Ba="team_account_teamplan_changeplan_order_summary_promo_code_cta",Pa=({currency:e,hasError:t,isLoading:n,onCancel:a,onChange:i,onClear:r,onSubmit:s,promoCode:l,promoPrice:c,setShowInput:d,showInput:_})=>{const{translate:u}=(0,g.Z)();return _?(0,f.BX)(o.kC,{gap:"6px",fullWidth:!0,sx:{padding:"0 10px"},children:[(0,f.tZ)("div",{sx:{flex:1},children:(0,f.tZ)(o.oi,{"data-testid":"promo-code-input",value:l,placeholder:u(Ba),feedback:t?{id:"promo-error-message",text:u("team_account_teamplan_changeplan_order_summary_promo_code_error"),type:"error"}:void 0,onChange:i?e=>i(e?.target?.value):void 0})}),(0,f.BX)("div",{sx:{paddingTop:"3px"},children:[(0,f.tZ)(o.zx,{disabled:n,"data-testid":"promo-code-submit",type:"button",intensity:"supershy",onClick:()=>{s&&s()},isLoading:n,layout:"iconOnly",icon:"CheckmarkOutlined",sx:{border:"1px solid ds.container.expressive.brand.quiet.hover"}}),(0,f.tZ)(o.zx,{layout:"iconOnly",icon:"ActionCloseOutlined",type:"button",intensity:"supershy",onClick:()=>{a&&a()},sx:{marginLeft:"6px"}})]})]}):l?(0,f.BX)(o.kC,{gap:"4px",fullWidth:!0,alignItems:"center",justifyContent:"space-between",sx:{padding:"0 10px"},children:[(0,f.BX)(o.kC,{alignItems:"center",gap:"4px",children:[(0,f.tZ)(o.nv,{textStyle:"ds.body.standard.strong",color:"ds.text.neutral.catchy",children:u("team_account_teamplan_changeplan_order_summary_promo_code")}),(0,f.tZ)(nn,{value:l,onDismiss:r,buttonProps:{"data-testid":"promo-code-clear"}})]}),(0,f.tZ)("div",{children:(0,f.tZ)(o.nv,{textStyle:"ds.body.standard.regular",color:"ds.text.neutral.standard",children:u.price(e,-c/100)})})]}):(0,f.tZ)(o.kC,{sx:{padding:"0 10px"},children:(0,f.tZ)(o.zx,{type:"button",intensity:"supershy",onClick:()=>d?d(!0):null,sx:{margin:0,padding:0,minWidth:0,height:"16px",textDecoration:"underline"},"aria-label":u(Ba),children:(0,f.tZ)(o.nv,{color:"ds.text.brand.standard",children:u(Ba)})})})};let Ua=function(e){return e.FORM="form",e.SUCCESS="success",e}({});var za,Xa,qa,ja,Ga;const Fa=({billingCountry:e,paymentMethodType:t,planPrice:n,selectedOffer:a,selectedSeatsQty:i,setErrorMessage:s,setOrderSummaryData:l,setPostTrialCheckoutState:d,setRenewalPrice:_})=>{const{translate:u}=(0,g.Z)(),[m,p]=(0,r.useState)(!1),{upgradeTeamWithExistingCc:h}=(0,F.u)(Zt.K),y=n*i;(0,r.useEffect)((()=>{_(y)}),[_,y]);const{cancelPromoCode:b,clearPromoCode:x,currentPromoCode:S,discountedSeatPrice:v,hasError:C,isLoading:E,planId:Z,setCurrentPromoCode:T,setShowInput:D,showInput:k,validatePromoCode:I}=(({selectedOffer:e,selectedSeatsQty:t})=>{const[n,a]=(0,r.useState)(""),[i,s]=(0,r.useState)(""),[o,l]=(0,r.useState)(0),[d,_]=(0,r.useState)(!1),[u,m]=(0,r.useState)(!1),[p,g]=(0,r.useState)(!1),[h,y]=(0,r.useState)(t),[b,x]=(0,r.useState)(e),[S,f]=(0,r.useState)(""),{data:v,status:C}=(0,c.k)(Zt.K,"getTeamOffers",{couponCode:i}),E=(0,r.useCallback)((()=>{if(!i||!e)return!1;if(C===Ze.rq.Error&&!v)return g(!1),_(!0),m(!0),!1;if(C===Ze.rq.Loading&&!v)return g(!0),!1;const n=!Gt(e)&&v.entryLevelOffer?v.entryLevelOffer:v.businessOffer,r=Ut({offer:n,selectedSeatsQty:t});return r.price!==r.equivalentPrice?(g(!1),a(i),l(r.price),f(n.name),_(!1),m(!1),!0):(g(!1),_(!0),m(!0),l(0),!1)}),[i,e,t,v,C]);return(0,r.useEffect)((()=>{t!==h&&(y(t),E())}),[h,t,E]),(0,r.useEffect)((()=>{e?.name!==b?.name&&(x(e),E())}),[e,b,E]),{cancelPromoCode:()=>{d?(a(""),s(""),l(0),f("")):s(n),_(!1),m(!1)},clearPromoCode:()=>{a(""),s(""),_(!1),l(0),f("")},currentPromoCode:i,discountedSeatPrice:o,hasError:d,isLoading:p,planId:S,promoCode:n,setCurrentPromoCode:s,setIsLoading:g,setShowInput:m,showInput:u,validatePromoCode:E}})({selectedOffer:a,selectedSeatsQty:i}),A=v*i,N=y-A,w=0!==v?A:y,{isLoading:O,taxInformation:R}=Ht({total:w,initialSkip:void 0===e}),L="US"===e?"team_account_teamplan_changeplan_order_summary_tax":"team_account_teamplan_vat",M=O||void 0===R?.amount?0:R.amount,B=O||void 0===R?.amount?void 0:w+M,P="invoice"===t?"team_post_trial_checkout_request_purchase_order":"team_account_teamplan_changeplan_order_summary_confirm_and_pay";return a?(0,f.BX)(f.HY,{children:[za||(za=(0,f.tZ)(Ma.E,{})),(0,f.tZ)(It,{label:(0,f.tZ)(o.nv,{textStyle:"ds.body.standard.strong",color:"ds.text.neutral.catchy",children:u("team_account_teamplan_changeplan_order_summary_subtotal")}),value:(0,f.tZ)(o.nv,{textStyle:"ds.body.standard.regular",color:"ds.text.neutral.standard",children:u.price(a.currency,y/100)})}),0!==M?(0,f.tZ)(It,{label:(0,f.tZ)(o.nv,{textStyle:"ds.body.standard.strong",color:"ds.text.neutral.catchy",children:u(L)}),value:O?Xa||(Xa=(0,f.tZ)(o.ZX,{mood:"neutral",size:13})):(0,f.tZ)(o.nv,{textStyle:"ds.body.standard.regular",color:"ds.text.neutral.standard",children:u.price(a.currency,M/100)})}):null,(0,f.tZ)(Pa,{currency:a.currency,hasError:C,isLoading:E,onCancel:b,onChange:T,onClear:x,onSubmit:I,promoCode:S,promoPrice:N,setShowInput:D,showInput:k}),qa||(qa=(0,f.tZ)(Ma.E,{})),(0,f.tZ)(It,{label:(0,f.tZ)(o.nv,{textStyle:"ds.body.standard.strong",color:"ds.text.neutral.catchy",children:u("team_account_teamplan_total")}),value:O?ja||(ja=(0,f.tZ)(o.ZX,{size:23,mood:"neutral"})):B?(0,f.tZ)(o.nv,{textStyle:"ds.specialty.spotlight.small",color:"ds.text.neutral.catchy",children:u.price(a.currency,B/100)}):null}),m?(0,f.tZ)(o.zx,{size:"large",sx:{width:"100%"},type:"button",disabled:!0,children:Ga||(Ga=(0,f.tZ)(o.ZX,{}))}):(0,f.tZ)(o.zx,{size:"large",sx:{width:"100%"},type:"button",disabled:O&&"invoice"!==t,onClick:()=>"invoice"===t?void(0,X.Yo)(ae.nq):(async t=>{p((()=>!0));const a=await h({planId:t,countryCode:e,membersNumber:i,amountToPayInCents:w,taxesToPayInCents:M,couponCode:S});var r;p((()=>!1)),"success"===a.tag?(d(Ua.SUCCESS),l({numberOfSeats:i,planPrice:n,promoPrice:0!==v?N:void 0,subtotal:y,tax:M,total:B})):s((r=a.error.tag,u("UNSUPPORTED_PAYMENT_MEAN"===r?"team_post_trial_checkout_error_payment_declined":"team_post_trial_checkout_error_process_request")))})(""!==Z?Z:a.name),children:u(P)})]}):null};var Va;const Ha=({billingCountry:e,renewalPrice:t,selectedOffer:n})=>{const{translate:a}=(0,g.Z)(),{isLoading:i,taxInformation:r}=Ht({total:t,initialSkip:void 0===e}),s=(0,Pt.Z)(new Date,1),l="US"===e?"team_account_teamplan_changeplan_order_summary_footer_renewal":"team_account_teamplan_changeplan_order_summary_renewal_vat",c=!i&&void 0!==r?.amount&&r?.amount>0,d=c?l:"team_account_teamplan_changeplan_order_summary_footer_header",_=c&&r?.amount?t+r.amount:t;return n&&!i?(0,f.BX)("div",{sx:{display:"flex",flexDirection:"column",gap:"12px",padding:"10px"},children:[(0,f.BX)(o.nv,{textStyle:"ds.body.reduced.regular",color:"ds.text.neutral.standard",children:[a(d,{price:a.price(n.currency,_/100),date:a.shortDate(s,Kt.qG.ll)}),Va||(Va=(0,f.tZ)("br",{})),a("team_post_trial_checkout_cancel_subscription")]}),(0,f.tZ)(o.nv,{textStyle:"ds.body.helper.regular",color:"ds.text.neutral.quiet",children:a.markup("team_account_teamplan_changeplan_order_summary_footer_markup",{privacyPolicyUrl:ae.Bz,termsUrl:ae.sz},{linkTarget:"_blank"})})]}):null},Wa=({billingCountry:e,paymentMethodType:t,selectedOffer:n,selectedSeatsQty:a,setErrorMessage:i,setOrderSummaryData:s,setPostTrialCheckoutState:l,setSelectedSeatsQty:c,teamId:d})=>{var _;const{translate:u}=(0,g.Z)(),m=Na(d),[p,h]=(0,r.useState)(0),[y,b]=(0,r.useState)(0),{data:x}=m,S=null!=(_=x?.members.length)?_:1;return(0,f.tZ)(Wt,{title:u("team_account_teamplan_changeplan_order_summary_header"),children:(0,f.BX)(o.kC,{flexDirection:"column",gap:"16px",sx:{marginTop:"16px"},children:[(0,f.tZ)(La,{numberOfMembers:S,planPrice:p,selectedOffer:n,setPlanPrice:h,setSelectedSeatsQty:c}),(0,f.tZ)(Fa,{billingCountry:e,paymentMethodType:t,planPrice:p,selectedOffer:n,selectedSeatsQty:a,setErrorMessage:i,setOrderSummaryData:s,setPostTrialCheckoutState:l,setRenewalPrice:b}),(0,f.tZ)(Ha,{billingCountry:e,renewalPrice:y,selectedOffer:n})]})})},$a=({currentSpaceTier:e,handleSelection:t,selectedOffer:n,setSelectedOffer:a,teamOffers:i,teamId:s})=>{const{translate:l}=(0,g.Z)(),c=(0,re.C)(),d=mn(),u=(({teamOffers:e,limitedBusinessOffer:t,teamTrialStatus:n,teamId:a})=>{var i;const{translate:r}=(0,g.Z)(),s=Na(a),o=null!=(i=s.data?.members.length)?i:1,l=e?.businessOffer?.currency,c=e?.businessOffer?zt({offer:e.businessOffer}):null,d=e?.entryLevelOffer?qt({offer:e.entryLevelOffer,selectedSeatsQty:10}):null,u=n?.spaceTier===_.lD.Business,m={standard:{...kn.standard,isStandardPlanRestricted:o>10,price:d&&l?r.price(l,d/100,{notation:"compact"}):null},business:{...kn.business,currentTrial:u,price:c&&l?r.price(l,c/100,{notation:"compact"}):null,equivalentPrice:t.hasLimitedOffer&&c&&l?t.translatedEquivalentPrice:null,limitedOffer:t.hasLimitedOffer},businessPlus:{planName:"businessPlus",price:{key:"team_post_trial_checkout_plan_selection_biz_plus_card_price"},heading:{key:"team_post_trial_checkout_plan_selection_biz_plus_card_title"},priceDescription1:{key:"team_post_trial_checkout_plan_selection_biz_plus_card_coverage"},priceDescription2:{key:"team_account_teamplan_changeplan_plans_billed_anually"},features:[{key:"team_post_trial_checkout_plan_selection_biz_plus_card_feature_everything_markup",icon:"check"},{key:"team_post_trial_checkout_plan_selection_biz_plus_card_feature_hundred_plus"},{key:"team_post_trial_checkout_plan_selection_biz_plus_card_feature_nudges_markup"},{key:"team_post_trial_checkout_plan_selection_biz_plus_card_feature_risk_detection_markup"},{key:"team_post_trial_checkout_plan_selection_biz_plus_card_feature_deployment"},{key:"team_post_trial_checkout_plan_selection_biz_plus_card_feature_security"},{key:"team_post_trial_checkout_plan_selection_biz_plus_card_feature_onboarding"}]}};return In(m)})({teamOffers:i,limitedBusinessOffer:d,teamTrialStatus:c,teamId:s}),{businessOffer:m,entryLevelOffer:p}=i,h=e===_.lD.Standard,y=e===_.lD.Business;return(0,r.useEffect)((()=>{i&&a&&(y&&a(m),h&&a(p))}),[i]),u?(0,f.tZ)(Wt,{headingLevel:"h2",title:l("team_post_trial_checkout_plan_selection_title"),children:(0,f.tZ)(o.kC,{gap:"16px",flexWrap:"nowrap",sx:{paddingTop:"16px"},children:u.businessPlus?p&&u.standard?(0,f.BX)(f.HY,{children:[(0,f.tZ)(bn,{handleSelectClick:()=>t(p),plan:u.standard,selected:!!n&&n.name===p.name}),(0,f.tZ)(bn,{handleSelectClick:()=>t(m),plan:u.business,selected:!!n&&n.name===m.name}),(0,f.tZ)(bn,{plan:u.businessPlus})]}):(0,f.BX)(f.HY,{children:[(0,f.tZ)(bn,{handleSelectClick:()=>t(m),plan:u.business,selected:!!n&&n.name===m.name}),(0,f.tZ)(bn,{plan:u.businessPlus})]}):null})}):null};var Ya,Ka;const Qa=({billingCountry:e,orderSummaryData:t,selectedOffer:n})=>{const{translate:a}=(0,g.Z)(),{numberOfSeats:i,planPrice:r,promoPrice:s,subtotal:l,tax:c,total:d}=t,{last4DigitsFormatted:_,cardSvg:u,expFormatted:m}=(0,h.C)({b2c:!1}),p=m?a("manage_subscription_payment_section_expiration_date",{date:m}):null,y=Gt(n)?a("team_account_teamplan_changeplan_plans_business_name"):a("manage_subscription_plan_name_dashlane_standard"),b="US"===e?"team_account_teamplan_changeplan_order_summary_tax":"team_account_teamplan_vat";return(0,f.tZ)(o.Zb,{sx:{width:"472px"},children:(0,f.BX)(o.kC,{flexDirection:"column",gap:"16px",sx:{marginTop:"16px"},children:[(0,f.BX)("div",{sx:{display:"flex",flexDirection:"column",gap:"8px",paddingLeft:"8px",paddingRight:"8px"},children:[(0,f.tZ)(o.X6,{as:"h3",textStyle:"ds.title.supporting.small",color:"ds.text.neutral.quiet",children:a("team_account_teamplan_changeplan_order_summary_header")}),(0,f.tZ)(o.X6,{as:"h2",textStyle:"ds.title.section.medium",color:"ds.text.neutral.catchy",children:y})]}),(0,f.tZ)(It,{label:(0,f.tZ)(o.nv,{textStyle:"ds.body.standard.regular",color:"ds.text.neutral.catchy",children:a("team_post_trial_checkout_seats_for_year",{cost:a.price(n.currency,r/100,{notation:"compact"}),numOfSeats:i})}),value:(0,f.tZ)(o.nv,{textStyle:"ds.body.standard.regular",color:"ds.text.neutral.catchy",children:a.price(n.currency,l/100)})}),0!==c?(0,f.tZ)(It,{label:(0,f.tZ)(o.nv,{textStyle:"ds.body.standard.regular",color:"ds.text.neutral.catchy",children:a(b)}),value:(0,f.tZ)(o.nv,{textStyle:"ds.body.standard.regular",color:"ds.text.neutral.standard",children:a.price(n.currency,c/100)})}):null,s?(0,f.tZ)(It,{label:(0,f.tZ)(o.nv,{textStyle:"ds.body.standard.regular",color:"ds.text.neutral.catchy",children:a("team_account_teamplan_upgrade_premium_coupon")}),value:(0,f.BX)(o.nv,{textStyle:"ds.body.standard.regular",color:"ds.text.neutral.catchy",children:["-",a.price(n.currency,s/100)]})}):null,Ya||(Ya=(0,f.tZ)(Ma.E,{})),d?(0,f.tZ)(It,{label:(0,f.tZ)(o.nv,{textStyle:"ds.body.standard.strong",color:"ds.text.neutral.catchy",children:a("team_account_teamplan_total")}),value:(0,f.tZ)(o.nv,{textStyle:"ds.specialty.spotlight.small",color:"ds.text.neutral.catchy",children:a.price(n.currency,d/100)})}):null,(0,f.tZ)(It,{label:(0,f.tZ)(o.nv,{textStyle:"ds.body.standard.regular",color:"ds.text.neutral.catchy",children:a("team_post_trial_checkout_paid")}),value:(0,f.BX)(o.kC,{alignItems:"center",gap:"8px",children:[u,(0,f.BX)(o.nv,{textStyle:"ds.body.standard.regular",color:"ds.text.neutral.standard",sx:{display:"flex",gap:"4px"},children:[Ka||(Ka=(0,f.tZ)("span",{children:"••••"})),(0,f.tZ)("span",{children:_})]}),(0,f.tZ)(o.nv,{textStyle:"ds.body.standard.regular",color:"ds.text.neutral.standard",sx:{display:"flex",gap:"12px"},children:p})]})})]})})};var Ja;const ei=()=>{var e,t;const n=(0,Ne.k6)(),{routes:a}=(0,i.Xo)(),{translate:s}=(0,g.Z)(),_=(0,pe._)(),p=(0,u.s)(),{showToast:h}=(0,o.pm)(),{data:y,status:b}=(0,c.k)(d.o,"getTeamSeats"),{loading:x,billingCountry:S}=T(),[v,C]=(0,r.useState)(Ua.FORM),E=Tt(),Z=(0,Ca.V)(),[D]=(0,o.If)(),[k,I]=(0,r.useState)(),[A,N]=(0,r.useState)(""),[w,O]=(0,r.useState)(0),[R,L]=(0,r.useState)("credit-card"),[M,B]=(0,r.useState)(),P=p?.spaceTier;(0,r.useEffect)((()=>{""!==A&&h({mood:"danger",description:A}),N("")}),[A]);const U=x||b!==Ze.rq.Success||!y||!p||!E||!P;if(_.status!==Ze.rq.Success||!_.data.monetization_extension_post_trial_checkout||Z.status!==Ze.rq.Success||"number"!=typeof Z.teamId)return null;const z=()=>(0,f.tZ)(o.ZX,{mood:"brand",size:"xlarge",sx:{left:"50%",top:"50%",position:"absolute"}});return(0,f.BX)(o.kC,{flexDirection:"column",sx:{margin:"0 24px 24px",width:"1185px"},children:[U?z():v===Ua.FORM&&"number"==typeof Z.teamId&&(0,f.BX)(f.HY,{children:[(0,f.BX)(o.kC,{flexDirection:"column",gap:"16px",sx:{padding:"32px 0"},children:[(0,f.tZ)(o.X6,{as:"h1",textStyle:"ds.title.section.large",color:"ds.text.neutral.catchy",children:s("team_post_trial_checkout_heading")}),(0,f.tZ)(o.nv,{textStyle:"ds.title.block.medium",color:"ds.text.neutral.catchy",children:s("team_post_trial_checkout_description")})]}),(0,f.tZ)(o.kC,{flexDirection:"column",gap:"16px",children:(0,f.BX)(o.kC,{gap:"16px",children:[(0,f.tZ)("div",{sx:{width:"751px"},children:(0,f.BX)(o.kC,{flexDirection:"column",gap:"16px",flexWrap:"nowrap",children:[(0,f.tZ)($a,{currentSpaceTier:P,handleSelection:e=>{(e=>{(0,m.Kz)(new l.UserClickEvent({clickOrigin:l.ClickOrigin.Plans,button:jt(e)?l.Button.SelectTeamPlan:Gt(e)?l.Button.SelectBusinessPlan:l.Button.SelectStarterPlan}))})(e),I(e)},selectedOffer:k,teamOffers:E,teamId:Z.teamId}),e||(e=(0,f.tZ)(Ia,{seats:w,setPaymentMethodType:L})),"US"!==S&&(Ja||(Ja=(0,f.tZ)(ca,{isInAccountSummary:!1})))]})}),(0,f.tZ)("div",{sx:{width:"370px"},children:(0,f.tZ)(Wa,{billingCountry:S,paymentMethodType:R,selectedOffer:k,selectedSeatsQty:w,setErrorMessage:N,setOrderSummaryData:B,setPostTrialCheckoutState:C,setSelectedSeatsQty:O,teamId:Z.teamId})})]})})]}),U?z():v===Ua.SUCCESS&&M&&k&&(0,f.BX)(o.kC,{flexDirection:"row",gap:"16px",sx:{padding:"32px 0"},children:[(0,f.tZ)(o.kC,{flexDirection:"column",gap:"16px",children:(0,f.tZ)(o.Zb,{sx:{width:"646px",padding:"24px"},children:(0,f.tZ)(o.kC,{flexDirection:"column",gap:"16px",children:(0,f.BX)(o.kC,{flexDirection:"column",gap:"16px",alignItems:"center",children:[(0,f.tZ)("img",{sx:{maxWidth:"60%",aspectRatio:"3/2"},src:"light"===D?va:fa,alt:s("team_post_trial_checkout_success_img_alt")}),(0,f.tZ)(o.Ct,{iconName:"FeedbackSuccessOutlined",label:s("team_post_trial_checkout_success_badge_label"),mood:"positive",layout:"iconLeading"}),(0,f.tZ)(o.X6,{as:"h2",textStyle:"ds.title.section.large",color:"ds.text.neutral.catchy",children:s("team_post_trial_checkout_success_heading")}),(0,f.tZ)(o.nv,{textStyle:"ds.body.standard.regular",color:"ds.text.neutral.standard",sx:{textAlign:"center",maxWidth:"440px"},children:s("team_post_trial_checkout_success_description")}),(0,f.BX)(o.kC,{flexDirection:"row",gap:"32px",sx:{margin:"16px 0 32px"},children:[(0,f.tZ)(o.zx,{onClick:()=>{n.push(a.teamMembersRoutePath)},mood:"brand",intensity:"catchy",layout:"iconTrailing",icon:"ArrowRightOutlined",children:s("team_post_trial_checkout_success_button_start_inviting_users")}),(0,f.tZ)(o.zx,{onClick:()=>{n.push(a.teamAccountRoutePath)},mood:"brand",intensity:"quiet",layout:"iconTrailing",icon:"ArrowRightOutlined",children:s("team_post_trial_checkout_success_button_review_your_subscription")})]})]})})})}),t||(t=(0,f.tZ)(o.kC,{flexDirection:"column",children:(0,f.tZ)(Qa,{billingCountry:S,orderSummaryData:M,selectedOffer:k})}))]})]})},ti=e=>e?"auto":"800px",ni=({mainContent:e,secondaryContent:t,secondaryContentWrapDirection:n="top",fullWidth:a,reducedVerticalPadding:i,...r})=>(0,f.BX)(B.T5p,{gap:"32px",gridTemplateAreas:["'top' 'bottom'","'top' 'bottom'","'left right'"],gridTemplateColumns:[null,null,`minmax(auto, ${ti(null!=a&&a)}) 256px`],gridTemplateRows:["auto auto","auto auto","auto"],alignContent:"flex-start",sx:{py:i?"16px":"32px",px:"42px"},...r,children:[(0,f.tZ)(B.dDn,{alignSelf:"flex-start",gridArea:"top"===n?["top","top","right"]:["bottom","bottom","right"],children:t}),(0,f.tZ)(B.dDn,{gridArea:"top"===n?["bottom","bottom","left"]:["top","top","left"],children:e})]});var ai=n(7501);const ii=(e,t,n,a)=>{const{isTeamSoftDiscontinued:i,isTrial:r}=e;return i&&r?"DISCONTINUED TRIAL":n.isFreeTrial&&!n.isGracePeriod?"TRIAL":n.isGracePeriod?"GRACE PERIOD":t.currentTeam?.isRenewalStopped&&!i?"ACTIVE CANCELED":t.currentTeam?.isRenewalStopped&&i?"DISCONTINUED CANCELED":!a||i||t.currentTeam?.isRenewalStopped?a&&i&&!t.currentTeam?.isRenewalStopped?"DISCONTINUED CARD EXPIRED":"ACTIVE":"ACTIVE CARD EXPIRED"},ri="account_summary_active_badge",si="account_summary_expired_badge",oi="account_summary_days_left",li="account_summary_months_left",ci="account_summary_days_ago",di="account_summary_ends_on_header",_i="account_summary_ended_on_header",ui="account_summary_renews_on_header",mi=({translate:e,badgeLabel:t,badgeMood:n,supportingDescription:a,dateHeader:i,withCtaButton:r=!1,handleCta:s})=>(0,f.BX)("div",{id:"HEADER",sx:{display:"flex",justifyContent:"space-between"},children:[(0,f.BX)("div",{className:"automation-tests-tac-billing",sx:{display:"flex",flexDirection:"column",gap:"16px"},children:[(0,f.BX)("div",{sx:{display:"flex",gap:"8px"},children:[(0,f.tZ)(o.Ct,{label:t,mood:n}),(0,f.tZ)(o.nv,{textStyle:"ds.body.helper.regular",color:"danger"===n?"ds.text.danger.standard":"ds.text.neutral.standard",sx:{alignSelf:"center"},children:a})]}),(0,f.tZ)(o.nv,{textStyle:"ds.specialty.spotlight.small",color:"danger"===n?"ds.text.danger.standard":"ds.text.neutral.standard",children:i})]}),r?(0,f.tZ)(o.zx,{mood:"brand",intensity:"catchy",onClick:s,sx:{maxHeight:"40px",alignSelf:"center"},children:e("team_dashboard_buy_dashlane_button")}):null]}),pi="account_summary_price_per_year",gi=({planName:e,hideTotalPrice:t,buyDashlaneLink:n,seatsNumber:a,isRenewalStopped:r,isMonthlyPlan:s,currency:l,pricePerSeat:c,amountFormatted:d,addSeatsButton:_,upgradeButton:u})=>{const{translate:m}=(0,g.Z)(),{routes:p}=(0,i.Xo)();return(0,f.BX)("div",{sx:{height:"136px",display:"flex",flexDirection:"column",gap:"16px",margin:"15px 0"},children:[(0,f.BX)("div",{sx:{display:"flex",justifyContent:"space-between",gap:"16px"},children:[(0,f.BX)("div",{sx:{flex:"1 1 224px"},children:[(0,f.tZ)(o.CW,{label:m("account_summary_current_plan_label"),value:e}),t?(0,f.tZ)(o.Qj,{href:n,isExternal:!0,sx:{cursor:"pointer"},children:m("team_dashboard_buy_dashlane_button")}):null,u?(0,f.tZ)(o.Qj,{as:i.rU,to:p.teamAccountChangePlanRoutePath,children:m("team_account_starter_upgrade_button")}):null]}),(0,f.BX)("div",{sx:{flex:"1 1 224px"},children:[(0,f.tZ)(o.CW,{"data-testid":"total-seats",label:m("account_summary_total_seats_label"),value:String(a)}),_.withAddSeatsButton?(0,f.tZ)(o.Qj,{as:"button",onClick:_.openAddSeatsDialog,sx:{"> button":{cursor:"pointer"}},children:m("team_account_teamplan_changeplan_success_features_actions_add_seats")}):null]}),(0,f.tZ)("div",{sx:{flex:"1 1 224px"},children:(0,f.tZ)(o.CW,{label:m("account_summary_billing_cycle_label"),value:m(s?"account_summary_price_per_month":"account_summary_yearly_billing_cycle")})})]}),(0,f.BX)("div",{sx:{display:"flex",justifyContent:"space-between",gap:"16px"},children:[(0,f.tZ)(o.CW,{label:m("account_summary_auto_renewal_label"),value:m(r?"account_summary_autorenewal_no":"account_summary_autorenewal_yes"),sx:{flex:"1 1 224px"}}),(0,f.tZ)(o.CW,{label:m("account_summary_price_per_seat_label"),value:m(pi,{price:m.price(l,c,{notation:"standard"})}),sx:{flex:"1 1 224px"}}),(0,f.tZ)(o.CW,{label:m("account_summary_total_price_label"),value:t?"-":m(pi,{price:m.price(l,d,{notation:"standard"})}),sx:{flex:"1 1 224px"}})]})]})};var hi=n(70797),yi=n(17676);const bi=54999,xi="sales@dashlane.com",Si={REDEEM_SUCCESS:"team_account_teamplan_upgrade_redeem_success",REDEEM_ERROR:"team_account_teamplan_upgrade_redeem_error",STARTER:"leeloo_teamplan_starter",BUSINESS:"leeloo_teamplan_business",TEAM:"leeloo_teamplan_team"},fi=e=>e>bi;function vi(e,t){switch(e){case _.lD.Starter:return t(Si.STARTER);case _.lD.Team:return t(Si.TEAM);case _.lD.Business:return t(Si.BUSINESS);default:throw new Error("Cannot retrieve default key")}}var Ci=n(11538);const Ei=({isComputing:e,className:t,price:n})=>{const a=e?(0,f.tZ)(Ci.Z,{size:16,containerStyle:{display:"inline-block",position:"relative"}}):n;return(0,f.tZ)("span",{className:t,children:a})},Zi=({billingDetails:e,additionalSeatsDetails:t})=>{var n,a;const{translate:i}=(0,g.Z)(),r=e.additionalSeats.seatsCount,s=null!=(n=e.additionalSeats.taxes)?n:0,o=i.price(e.currency,s/100),l=s>0,c=e.renewal.value+(null!=(a=e.renewal.taxes)?a:0),d=i.price(e.currency,c/100),_=100*t.reduce(((e,t)=>e+t.costPerSeat*t.numberOfSeats),0),u=i.price(e.currency,_/100),m=_-e.additionalSeats.value,p=_+s-m;return{additionalSeatsCount:r,additionalSeatsTaxesTranslation:o,hasTax:l,renewalTotalPrice:d,tierPriceTranslation:u,proratedDiscountTranslation:i.price(e.currency,m/100),hasProratedDiscount:m>0,dueTodayTranslation:i.price(e.currency,p/100)}};var Ti,Di,ki,Ii,Ai;const Ni={margin:"24px 0",color:"ds.text.neutral.standard"},wi=({label:e,labelSx:t,value:n})=>(0,f.BX)(o.kC,{sx:Ni,children:[e?(0,f.tZ)("div",{sx:{...t,flex:1},children:e}):null,n?(0,f.tZ)("div",{sx:{flex:0},children:n}):null]}),Oi=({nextBillingDate:e,billingDetails:t,dueNowTranslation:n,seatCountLabel:a,totalSeatCount:i,onAdditionalSeatCountChange:s,isComputingBilling:l,additionalSeatsDetails:c,planType:d,billingCountry:_,initialAdditionalSeatCount:u})=>{const{translate:m}=(0,g.Z)(),{additionalSeatsCount:p,additionalSeatsTaxesTranslation:y,hasTax:b,renewalTotalPrice:x,tierPriceTranslation:S,proratedDiscountTranslation:v,hasProratedDiscount:C}=Zi({billingDetails:t,additionalSeatsDetails:c}),{pollUntilCardUpdate:E}=(0,h.C)({}),[Z,T]=(0,r.useState)(!1),D="US"===_?"team_account_teamplan_upgrade_tax":"team_account_teamplan_vat",k="invoice"===d?"team_account_teamplan_upgrade_invoice_renewal_price":b?"US"===_?"team_account_teamplan_upgrade_renewal_tax_price":"team_account_teamplan_upgrade_renewal_vat_price":"team_account_teamplan_upgrade_renewal_price";return(0,f.BX)(f.HY,{children:[(0,f.tZ)(o.kC,{sx:{padding:"28px 0",fontSize:4,fontWeight:"bold",color:"ds.text.neutral.catchy"},children:(0,f.tZ)(Dt.w,{inputWidth:"66px",label:a,id:"numberOfSeats",defaultValue:u,minValue:1,onChange:s})}),Ti||(Ti=(0,f.tZ)(kt,{})),(0,f.tZ)(wi,{label:m("team_account_teamplan_upgrade_premium_number_of_seats"),value:i}),(0,f.tZ)(wi,{label:m("team_account_teamplan_upgrade_new_seat",{count:p}),value:S}),b&&(0,f.tZ)(wi,{label:m(D),value:y}),C&&(0,f.tZ)(wi,{label:(0,f.BX)(f.HY,{children:[(0,f.tZ)(B.nvN,{children:m("team_account_teamplan_changeplan_order_summary_prorated_discount")}),(0,f.tZ)(B.ua7,{content:m("team_account_teamplan_changeplan_order_summary_prorated_discount_tooltip"),children:(0,f.tZ)(B.uMt,{size:16,color:B.colors.grey00})})]}),labelSx:{display:"flex",alignItems:"center"},value:v}),(0,f.BX)(f.HY,{children:[Di||(Di=(0,f.tZ)(kt,{})),(0,f.tZ)(B.nvN,{sx:{margin:"24px 0",fontSize:"18px"},children:m("team_payment_method_dialog_credit_card")}),(0,f.BX)(o.Zb,{sx:{display:"flex",flexDirection:"row",justifyContent:"space-between"},children:[ki||(ki=(0,f.tZ)(Ta.I,{b2c:!1,isAppStoreUser:!1,isGooglePlayUser:!1})),(0,f.tZ)(o.zx,{icon:Ii||(Ii=(0,f.tZ)(o.JO,{name:"ActionEditOutlined"})),layout:"iconLeading",intensity:"supershy",onClick:()=>{E(),T(!0)},children:Z?(0,f.tZ)(Za.J,{b2c:!1,setPaymentLoading:T,mode:Za.A.UPDATE}):m("team_account_name_edit_label")})]})]}),(0,f.tZ)(o.kC,{sx:Ni,children:(0,f.tZ)(o.ke,{title:m(k,{totalPrice:x,totalSeat:i,date:m.shortDate(e,Kt._T.LL)})})}),Ai||(Ai=(0,f.tZ)(kt,{})),(0,f.BX)(o.kC,{sx:{marginTop:"24px",fontSize:4},children:[(0,f.tZ)("div",{sx:{flex:1},children:m("team_account_teamplan_upgrade_due_now")}),(0,f.tZ)(Ei,{isComputing:l,price:n,className:"totalAmount--Dn0SzKqvJj"})]})]})},Ri=(e,t)=>t.startMembers-e.startMembers,Li=(e,t,n)=>{if(!n)return[];const a=n.slice(0).sort(Ri);if(0!==a[a.length-1].startMembers)throw new Error("getAdditionalSeatsCostDetails:: missing tier one in price ranges");if(e<0||t<0)throw new Error("getAdditionalSeatsCostDetails:: number of licences cannot be negative");return a.reduce(((e,t)=>({membersRangeEnd:n,costDetails:a},i)=>{const r=i.startMembers;if(r<=t&&n>e&&t>e){const s=Math.max(Math.max(r-1,e),0),o=Math.min(t,n-1);a.unshift({costPerSeat:i.price/100,numberOfSeats:o-s})}return{membersRangeEnd:r,costDetails:a}})(e,t),{membersRangeEnd:Number.MAX_VALUE,costDetails:[]}).costDetails},Mi=(0,r.forwardRef)((function({nextBillingDetails:e,billingDetails:t,isComputingBilling:n,onSeatCountChange:a,numberOfCurrentPaidSlots:i,numberOfCurrentUsedSlots:s,currentPlanPriceRanges:l,planType:c,billingCountry:d,initialNumberOfNewSeats:_},u){var m;const[p,h]=(0,r.useState)(_),[y,b]=(0,r.useState)(!1),{translate:x}=(0,g.Z)();(0,r.useImperativeHandle)(u,(()=>({additionalSeatCount:p})));const S=i+p,v=(0,Bt.Z)(e.dateUnix),C=Li(i,t.renewal.seatsCount,l),E=null!=(m=t.additionalSeats.taxes)?m:0,Z=t.additionalSeats.value+E,T=y?"-":x.price(t.currency,Z/100),D=x("team_account_teamplan_upgrade_premium_number_of_additional_seats"),k=y?x("team_account_teamplan_upgrade_premium_buy_more_seats_than_cap",{seatCap:bi,salesEmail:xi}):p<1?x("team_account_teamplan_upgrade_premium_buy_more_seats_when_premium",{count:1}):s>S?x("team_account_teamplan_upgrade_premium_below_used_seat_count",{usedSeatCount:s}):null;return(0,f.BX)(f.HY,{children:[k?(0,f.tZ)(o.ke,{className:"errorToaster--mgQdyQZSK3",title:k,mood:"danger"}):null,(0,f.tZ)(Oi,{nextBillingDate:v,billingDetails:t,dueNowTranslation:T,seatCountLabel:D,totalSeatCount:S,onAdditionalSeatCountChange:e=>{const t=e<0,n=e>bi;b(n),h(e),n||t||a(e)},isComputingBilling:n,additionalSeatsDetails:C,planType:null!=c?c:"",billingCountry:d,initialAdditionalSeatCount:_})]})})),Bi=Mi;var Pi;const Ui=()=>{const{translate:e}=(0,g.Z)();return(0,f.tZ)(B.u_l,{isOpen:!0,onClose:()=>{},children:(0,f.BX)(o.kC,{alignItems:"center",flexDirection:"column",justifyContent:"center",sx:{width:"100vw",height:"100vh",backgroundColor:"ds.background.default"},children:[Pi||(Pi=(0,f.tZ)(o.ZX,{size:"xlarge"})),(0,f.BX)(o.kC,{alignItems:"center",flexDirection:"column",justifyContent:"center",gap:"6px",sx:{paddingTop:"22px"},children:[(0,f.tZ)(o.nv,{textStyle:"ds.body.reduced.regular",color:"ds.text.neutral.quiet",children:e("team_account_addseats_processing_copy_line_1")}),(0,f.tZ)(o.nv,{textStyle:"ds.body.reduced.regular",color:"ds.text.neutral.quiet",children:e("team_account_addseats_processing_copy_line_2")})]})]})})};var zi=n(69340);const Xi=e=>{const{reportTACError:t}=Y(),[n,a]=(0,r.useState)({renewal:{seatsCount:0,value:0,taxes:0},additionalSeats:{seatsCount:0,value:0,taxes:0},currency:"usd"}),[i,s]=(0,r.useState)(!1),[o,l]=(0,r.useState)(0),[c,d]=(0,r.useState)(0),_=(0,D.debounce)((n=>{(async n=>{try{var i;const t=await fe.C.computePlanPricing({seats:n});if(!t.success)return;const o={renewal:{seatsCount:(r=t.data).renewal.seatsCount,value:r.renewal.price.value,taxes:r.renewal.price.taxes},additionalSeats:{seatsCount:r.additionalSeats.seatsCount,value:r.additionalSeats.price.value,taxes:r.additionalSeats.price.taxes},currency:r.renewal.price.currency};if(null!==e&&e()!==o.additionalSeats.seatsCount)return;const c=o.additionalSeats.value,_=null!=(i=o.additionalSeats.taxes)?i:0;l(c),d(_),a(o),s(!1)}catch(e){const n=new Error((0,zi.i)(e));t(n)}var r})(n)}),500);return{billingDetails:n,isComputingBilling:i,amountToPay:o,amountToTax:c,onSeatCountChange:e=>{_(e),s(!0)}}};var qi;const ji=({onUpgradeSuccess:e,nextBillingDetails:t,numberOfCurrentPaidSlots:n,numberOfCurrentUsedSlots:a,onRequestClose:i,planTier:s,prefilledNumberOfSeatsToBuy:_})=>{const u=(0,r.useRef)(null),[p,h]=(0,r.useState)(!0),[y,b]=(0,r.useState)(!1),{translate:x}=(0,g.Z)(),{reportTACError:S}=Y(),v=(0,c.k)(d.o,"getTeamBillingInformation"),{addSeats:C}=(0,F.u)(d.o),E=(0,ie.JS)(),{loading:Z,billingCountry:D}=T(),k=v.status===Ze.rq.Success?v.data.planDetails.priceRanges:void 0,I=E.status===Ze.rq.Success?E.data.b2bStatus?.currentTeam?.teamInfo.planType:void 0,A=null!=_?_:1,N=(0,r.useCallback)((()=>{var e;return null!=(e=u?.current?.additionalSeatCount)?e:A}),[]),w=null===u||v.status===Ze.rq.Loading||E.status===Ze.rq.Loading||Z||void 0===D,{billingDetails:O,isComputingBilling:R,onSeatCountChange:L}=Xi(N),M=vi(s,x);(0,r.useEffect)((()=>{(0,m.Nc)(l.PageView.TacAccountBuy)}),[]),(0,r.useEffect)((()=>{if(v.status===Ze.rq.Error){const e=new Error("Error retrieving TeamBillingInformation to update price ranges");S(e)}}),[v]),(0,r.useEffect)((()=>{L(N())}),[N]);const B=Li(n,O.renewal.seatsCount,k);if(w)return null;const P=(0,f.BX)("div",{style:{display:"flex",flexDirection:"row",justifyContent:"flex-end",maxWidth:"100%"},children:[(0,f.tZ)(o.zx,{intensity:"quiet",mood:"neutral",size:"medium",onClick:i,sx:{marginRight:"8px"},children:x("team_account_teamplan_upgrade_premium_cancel")}),(0,f.tZ)(o.zx,{size:"medium",onClick:async()=>{h(!1),b(!0),"success"===(await C({seats:N()})).tag&&e(B,O)},children:x("team_account_teamplan_upgrade_buy_seat",{count:N()})})]});return(0,f.BX)(f.HY,{children:[y?qi||(qi=(0,f.tZ)(Ui,{})):null,p?(0,f.tZ)(yi.o,{showCloseIcon:!0,footer:P,title:x("team_account_teamplan_upgrade_add_seats_title",{plan:M}),isOpen:!0,onRequestClose:i,children:(0,f.tZ)(Bi,{ref:u,planType:I,nextBillingDetails:t,billingDetails:O,isComputingBilling:R,onSeatCountChange:L,numberOfCurrentPaidSlots:n,numberOfCurrentUsedSlots:a,currentPlanPriceRanges:k,billingCountry:D,initialNumberOfNewSeats:A})}):null]})},Gi=({cardTitle:e,cardDescription:t,iconName:n})=>(0,f.BX)(f.HY,{children:[(0,f.tZ)(B.dDn,{sx:{alignSelf:"center"},children:(0,f.tZ)(o.vY,{name:n,size:"medium",mood:"brand"})}),(0,f.BX)(B.dDn,{children:[(0,f.tZ)(o.nv,{textStyle:"ds.body.standard.strong",children:e}),(0,f.tZ)(o.nv,{textStyle:"ds.body.reduced.regular",color:"ds.text.neutral.quiet",sx:{marginTop:"4px"},children:t})]})]});var Fi,Vi,Hi;const Wi={marginTop:"16px","&:hover":{cursor:"pointer",borderWidth:"2px",borderColor:"ds.border.brand.standard.hover"}},$i={width:"100%",padding:"20px 16px"},Yi=({handleClose:e,openUpgradeDialog:t})=>{const[n,a]=(0,r.useState)(!1),[i,s]=(0,r.useState)(!1),{translate:l}=(0,g.Z)(),{loading:c,hasCreditCardPaymentMethod:d,isExpired:_,pollUntilCardUpdate:u}=(0,h.C)({handleCardUpdate:t}),m=d?Za.A.REPLACE:Za.A.ADD,y=Fi||(Fi=(0,f.tZ)(o.zx,{intensity:"supershy",size:"large",layout:"iconOnly",icon:(0,f.tZ)(o.JO,{name:"ArrowRightOutlined",color:"ds.text.neutral.standard"})}));return c?Vi||(Vi=(0,f.tZ)(o.ZX,{})):(0,f.BX)(o.Vq,{isOpen:!0,closeActionLabel:l("_common_dialog_dismiss_button"),onClose:e,title:l("team_payment_method_dialog_buy_seats"),"aria-describedby":"dialogContent",children:[(0,f.tZ)(o.nv,{children:l("team_payment_method_dialog_title")}),d?(0,f.tZ)(B.Zbd,{sx:Wi,onClick:()=>{_?(u(),s(!0)):t()},children:(0,f.BX)(B.T5p,{gap:"12px",gridTemplateColumns:"1fr 60px",alignItems:"center",sx:$i,children:[Hi||(Hi=(0,f.tZ)(B.dDn,{children:(0,f.tZ)(p.I,{b2b:!0,hideTitle:!0,hideUpdateButton:!0})})),(0,f.tZ)(B.dDn,{sx:{margin:"auto"},children:_&&i?(0,f.tZ)(o.zx,{intensity:"supershy",size:"large",children:(0,f.tZ)(Za.J,{b2c:!1,setPaymentLoading:s,mode:Za.A.UPDATE})}):y})]})}):null,(0,f.tZ)(B.Zbd,{sx:Wi,onClick:()=>{u(),a(!0)},children:(0,f.BX)(B.T5p,{gap:"12px",gridTemplateColumns:"40px 1fr 60px",sx:$i,children:[(0,f.tZ)(Gi,{cardTitle:l(d?"team_payment_method_dialog_another_credit_card":"team_payment_method_dialog_credit_card"),cardDescription:l(d?"team_payment_method_dialog_replace_credit_card":"team_payment_method_dialog_secondary_payment"),iconName:"ItemPaymentOutlined"}),(0,f.tZ)(B.dDn,{sx:{margin:"auto"},children:n?(0,f.tZ)(o.zx,{intensity:"supershy",size:"large",children:(0,f.tZ)(Za.J,{b2c:!1,setPaymentLoading:a,mode:m})}):y})]})}),(0,f.tZ)(B.Zbd,{sx:Wi,onClick:()=>(0,X.Yo)(ae.i1),children:(0,f.BX)(B.T5p,{gap:"12px",gridTemplateColumns:"40px 1fr 60px",sx:$i,children:[(0,f.tZ)(Gi,{cardTitle:l("team_account_invoice_payment"),cardDescription:l("team_payment_method_dialog_support_team"),iconName:"ItemTaxNumberOutlined"}),(0,f.tZ)(B.dDn,{sx:{margin:"auto"},children:y})]})})]})},Ki=()=>(0,f.tZ)("hr",{sx:{borderTop:"1px solid ds.border.neutral.standard.idle",width:"100%"}});var Qi,Ji,er,tr,nr,ar,ir,rr,sr;const or=({numberOfCurrentPaidSlots:e,onClose:t,onUpgradeSuccess:n,prefilledNumberOfSeatsToBuy:a})=>{var i,s;const{translate:l}=(0,g.Z)(),m=(0,u.s)(),p=(0,c.k)(Zt.K,"getPlanPricingDetails"),{computePlanPricingDetails:y}=(0,F.u)(Zt.K),{addSeats:b}=(0,F.u)(d.o),{pollUntilCardUpdate:x}=(0,h.C)({}),{billingCountry:S}=T(),[v,C]=(0,r.useState)(!1),[E,Z]=(0,r.useState)(null!=a?a:1),[D,k]=(0,r.useState)(!1),[I,A]=(0,r.useState)(!1),N=p.status===Ze.rq.Loading;if((0,r.useEffect)((()=>{y({numberOfSeats:E})}),[]),!m||!S||p.status===Ze.rq.Error||!p.data)return null;const{spaceTier:w,nextBillingDetails:O,billingType:R,planDetails:L}=m,{renewal:M,additionalSeats:B,currency:P}=p.data,U=(0,Bt.Z)(O.dateUnix),z=vi(w,l),X=Li(e,M.seatsCount,L.priceRanges),q=e+E,j=null!=(i=B.taxes)?i:0,G=100*X.reduce(((e,t)=>e+t.costPerSeat*t.numberOfSeats),0),H=l.price(P,G/100),W=!!B.taxes,$=W?"US"===S?"team_account_teamplan_upgrade_renewal_tax_price":"team_account_teamplan_upgrade_renewal_vat_price":"team_account_teamplan_upgrade_renewal_price",Y=l.price(P,j/100),K=R===_.qo.Invoice?"team_account_teamplan_upgrade_invoice_renewal_price":$,Q=G-B.value,J=l.price(P,Q/100),ee=M.value+(null!=(s=M.taxes)?s:0),te=l.price(P,ee/100),ne=B.value+j,ae=D?"-":l.price(P,ne/100),ie=Q>0;return I?Qi||(Qi=(0,f.tZ)(Ui,{})):(0,f.BX)(o.Vq,{isOpen:!0,onClose:t,closeActionLabel:l("_common_dialog_dismiss_button"),title:l("team_account_teamplan_upgrade_add_seats_title",{plan:z}),actions:{primary:(0,f.tZ)(o.zx,{onClick:async()=>{A(!0);const e=await b({seats:E});(0,V.d6)(e)&&(A(!1),n(X,{renewal:M,additionalSeats:B,currency:P}))},children:l("team_account_teamplan_upgrade_buy_seat",{count:E})}),secondary:(0,f.tZ)(o.zx,{onClick:t,children:l("team_account_teamplan_upgrade_premium_cancel")})},children:[(0,f.tZ)(o.kC,{sx:{padding:"15px 0",fontSize:4,fontWeight:"bold",color:"ds.text.neutral.catchy"},children:(0,f.tZ)(Dt.w,{inputWidth:"66px",id:"numberOfSeats",defaultValue:null!=a?a:1,minValue:1,onChange:async e=>{const t=e<0,n=e>bi;k(n),n||t||(Z(e),await y({numberOfSeats:e}))},label:l("team_account_teamplan_upgrade_premium_number_of_additional_seats")})}),Ji||(Ji=(0,f.tZ)(Ki,{})),(0,f.BX)(o.kC,{gap:"16px",flexDirection:"column",children:[(0,f.BX)(o.kC,{justifyContent:"space-between",flexDirection:"row",children:[(0,f.tZ)(o.nv,{color:"ds.text.neutral.catchy",children:l("team_account_teamplan_upgrade_premium_number_of_seats")}),(0,f.tZ)(o.nv,{color:"ds.text.neutral.catchy",children:q})]}),(0,f.BX)(o.kC,{justifyContent:"space-between",flexDirection:"row",children:[(0,f.tZ)(o.nv,{color:"ds.text.neutral.catchy",children:l("team_account_teamplan_upgrade_new_seat",{count:E})}),N?er||(er=(0,f.tZ)(o.ZX,{size:"xsmall"})):(0,f.tZ)(o.nv,{color:"ds.text.neutral.catchy",children:H})]}),W?(0,f.BX)(o.kC,{justifyContent:"space-between",flexDirection:"row",children:[(0,f.tZ)(o.nv,{color:"ds.text.neutral.catchy",children:l("US"===S?"team_account_teamplan_upgrade_tax":"team_account_teamplan_vat")}),N?tr||(tr=(0,f.tZ)(o.ZX,{size:"xsmall"})):(0,f.tZ)(o.nv,{color:"ds.text.neutral.catchy",children:Y})]}):null,ie?(0,f.BX)(o.kC,{justifyContent:"space-between",flexDirection:"row",children:[(0,f.BX)(o.nv,{color:"ds.text.neutral.catchy",sx:{display:"flex",alignItems:"center",gap:"5px"},children:[l("team_account_teamplan_changeplan_order_summary_prorated_discount"),(0,f.tZ)(o.JO,{name:"FeedbackInfoOutlined",tooltip:l("team_account_teamplan_changeplan_order_summary_prorated_discount_tooltip"),size:"xsmall"})]}),N?nr||(nr=(0,f.tZ)(o.ZX,{size:"xsmall"})):(0,f.tZ)(o.nv,{color:"ds.text.neutral.catchy",children:J})]}):null]}),ar||(ar=(0,f.tZ)(Ki,{})),(0,f.BX)(o.kC,{gap:"16px",flexDirection:"column",children:[(0,f.tZ)(o.nv,{textStyle:"ds.title.block.medium",color:"ds.text.neutral.catchy",children:l("team_payment_method_dialog_credit_card")}),(0,f.BX)(o.Zb,{sx:{display:"flex",flexDirection:"row",justifyContent:"space-between"},children:[ir||(ir=(0,f.tZ)(Ta.I,{b2c:!1,isAppStoreUser:!1,isGooglePlayUser:!1})),(0,f.tZ)(o.zx,{icon:rr||(rr=(0,f.tZ)(o.JO,{name:"ActionEditOutlined"})),layout:"iconLeading",intensity:"supershy",onClick:()=>{x(),C(!0)},children:v?(0,f.tZ)(Za.J,{b2c:!1,setPaymentLoading:C,mode:Za.A.UPDATE}):l("team_account_name_edit_label")})]})]}),(0,f.tZ)(o.ke,{sx:{marginTop:"16px"},mood:"neutral",title:l(K,{totalPrice:te,totalSeat:q,date:l.shortDate(U,Kt._T.LL)})}),(0,f.BX)(o.kC,{justifyContent:"space-between",flexDirection:"row",sx:{marginTop:"16px"},children:[(0,f.tZ)(o.nv,{textStyle:"ds.title.block.medium",color:"ds.text.neutral.catchy",children:l("team_account_teamplan_upgrade_due_now")}),N?sr||(sr=(0,f.tZ)(o.ZX,{size:"xsmall"})):(0,f.tZ)(o.nv,{textStyle:"ds.specialty.spotlight.small",children:ae})]})]})},lr=({nextBillingDetails:e,numberOfCurrentPaidSlots:t,numberOfCurrentUsedSlots:n,planTier:a,prefilledNumberOfSeatsToBuy:i,isAddSeatsDialogOpen:r,isChoosePaymentMethodDialogOpen:s,setIsAddSeatsDialogOpen:o,setIsChoosePaymentMethodDialogOpen:l})=>{const c=(0,Ee.o)(hi.P.ComputePlanPricingMigration),{setSeatDetails:d,setIsAddSeatsSuccessPageOpen:_}=xt(),u=()=>{o(!1)},m=(e,t)=>{d({lastAdditionalSeatsDetails:e,lastBillingDetails:t}),o(!1),_(!0)};return r?c?(0,f.tZ)(or,{numberOfCurrentPaidSlots:t,onUpgradeSuccess:m,onClose:u,prefilledNumberOfSeatsToBuy:i}):(0,f.tZ)(ji,{nextBillingDetails:e,numberOfCurrentPaidSlots:t,numberOfCurrentUsedSlots:n,onUpgradeSuccess:m,onRequestClose:u,planTier:a,prefilledNumberOfSeatsToBuy:i}):s?(0,f.tZ)(Yi,{openUpgradeDialog:()=>{o(!0),l(!1)},handleClose:()=>{l(!1)}}):null};var cr;const dr="account_summary_update_payment_method",_r=()=>{var e;const{translate:t}=(0,g.Z)(),{search:n}=(0,Ne.TH)(),a=(0,u.s)(),i=(0,ie.lZ)(),c=(0,ie.JS)(),d=(0,re.C)(),p=(0,G.U)(),{isExpired:y,pollUntilCardUpdate:b}=(0,h.C)({}),[x,S]=(0,r.useState)(!1),[v,C]=(0,r.useState)(!1),[E,Z]=(0,r.useState)(!1),T=()=>{a?.billingType===_.qo.Invoice?Z(!0):C(!0)};if((0,r.useEffect)((()=>{if(n?.includes("showSeatsDialog")){const e=setTimeout((()=>{T()}),500);return()=>clearTimeout(e)}}),[]),!a||i.isLoading||c.status!==s.rq.Success||!c.data.b2bStatus||!d)return null;const D=ii(i,c.data.b2bStatus,d,y),{badgeLabel:k,badgeMood:I,supportingDescription:A,dateHeader:N,alertInfobox:w,withCtaButton:O}=((e,t,n,a)=>{const i=(0,Bt.Z)(n.dateUnix),{months:r,days:s}=(e=>{const t=(0,ai.Z)({start:Date.now(),end:e});return{days:t.days,months:t.months}})(i),o=a.daysLeftInTrial;switch(t){case"ACTIVE":return{badgeLabel:e(ri),badgeMood:"positive",supportingDescription:`${e(li,{count:r})} ${e(oi,{count:s})}`,dateHeader:e(ui,{date:e.shortDate(i,Kt.qG.ll)})};case"ACTIVE CANCELED":return{badgeLabel:e(ri),badgeMood:"positive",supportingDescription:`${e(li,{count:r})} ${e(oi,{count:s})}`,dateHeader:e(di,{date:e.shortDate(i,Kt.qG.ll)})};case"ACTIVE CARD EXPIRED":return{badgeLabel:e(ri),badgeMood:"positive",supportingDescription:`${e(li,{count:r})} ${e(oi,{count:s})}`,dateHeader:e(ui,{date:e.shortDate(i,Kt.qG.ll)}),alertInfobox:{title:e("account_summary_active_cc_expired_title",{date:e.shortDate(i,Kt.qG.LL)}),description:e("account_summary_active_cc_expired_description"),icon:"FeedbackWarningOutlined",mood:"warning"}};case"DISCONTINUED CANCELED":return{badgeLabel:e(si),badgeMood:"danger",supportingDescription:e(ci,{count:Math.abs(o)}),dateHeader:e(_i,{date:e.shortDate(i,Kt.qG.ll)})};case"DISCONTINUED CARD EXPIRED":return{badgeLabel:e(si),badgeMood:"danger",supportingDescription:e(ci,{count:Math.abs(o)}),dateHeader:e(_i,{date:e.shortDate(i,Kt.qG.ll)}),alertInfobox:{title:e("account_summary_discontinued_cc_expired_title"),description:e("account_summary_discontinued_cc_expired_description"),icon:"FeedbackFailOutlined",mood:"danger"}};case"DISCONTINUED TRIAL":return{badgeLabel:e("account_summary_trial_ended_badge"),badgeMood:"danger",supportingDescription:e(ci,{count:Math.abs(o)}),dateHeader:e(_i,{date:e.shortDate(i,Kt.qG.ll)})};case"GRACE PERIOD":return{badgeLabel:e("account_summary_trial_extended_badge"),badgeMood:"warning",supportingDescription:e(oi,{count:o}),dateHeader:e(di,{date:e.shortDate(i,Kt.qG.ll)})};case"TRIAL":return{badgeLabel:e("account_summary_trial_badge"),badgeMood:"brand",supportingDescription:e(oi,{count:o}),dateHeader:e(di,{date:e.shortDate(i,Kt.qG.ll)})}}})(t,D,a.nextBillingDetails,d),R=`${ae.ub}?plan=business&subCode=${null!=p?p:""}`,L=null!=(e=c.data.b2bStatus.currentTeam?.isRenewalStopped)&&e,{currency:M,amountFormatted:B,pricePerSeat:P}=a.nextBillingDetails,U="TRIAL"===D||"GRACE PERIOD"===D||"DISCONTINUED TRIAL"===D,z=["ACTIVE","ACTIVE CANCELED","ACTIVE CARD EXPIRED"].includes(D),q=a.spaceTier!==_.lD.Starter&&a.spaceTier!==_.lD.Standard&&z,j=[_.lD.Starter,_.lD.Team,_.lD.Standard].includes(a.spaceTier)&&z,F=(e=>{var t;const n=null!=(t=new URLSearchParams(e).get("seatsToBuy"))?t:"";let a=parseInt(n,10);return isNaN(a)&&(a=void 0),a})(n),V=((e,t)=>e===_.lD.Team?`Dashlane ${t("team_account_teamplan_team")}`:e===_.lD.Starter?`Dashlane ${t("team_account_teamplan_changeplan_plans_starter_name")}`:e===_.lD.Standard?`Dashlane ${t("team_account_teamplan_standard")}`:`Dashlane ${t("team_account_teamplan_business")}`)(a.spaceTier,t);return(0,f.BX)(f.HY,{children:[w?(0,f.tZ)(o.ke,{sx:{marginBottom:"16px"},title:w.title,size:"large",description:w.description,mood:w.mood,icon:w.icon,actions:[(0,f.tZ)(o.zx,{onClick:()=>{(0,m.Kz)(new l.UserClickEvent({clickOrigin:"danger"===w?.mood?l.ClickOrigin.SubscriptionExpiredBanner:l.ClickOrigin.UpdateCreditCardReminder,button:l.Button.UpdatePaymentMethod})),b(),S(!0)},children:x?(0,f.tZ)(Za.J,{b2c:!1,setPaymentLoading:S}):t(dr)},t(dr))]}):null,(0,f.BX)(o.Zb,{sx:{maxWidth:"752px",gap:"24px"},children:[(0,f.tZ)(mi,{translate:t,badgeLabel:k,badgeMood:I,supportingDescription:A,dateHeader:N,withCtaButton:O,handleCta:()=>{(0,X.Yo)(R)}}),cr||(cr=(0,f.tZ)(Ki,{})),(0,f.tZ)(gi,{planName:V,isMonthlyPlan:"monthly"===a.planDetails.duration,hideTotalPrice:U,buyDashlaneLink:R,seatsNumber:a.seatsNumber,isRenewalStopped:L,currency:M,pricePerSeat:P,amountFormatted:B,addSeatsButton:{withAddSeatsButton:q,openAddSeatsDialog:()=>{(0,m.Kz)(new l.UserClickEvent({clickOrigin:l.ClickOrigin.AccountStatus,button:l.Button.BuySeats})),T()}},upgradeButton:j})]}),(0,f.tZ)(lr,{planTier:a.spaceTier,prefilledNumberOfSeatsToBuy:F,nextBillingDetails:a.nextBillingDetails,numberOfCurrentPaidSlots:a.seatsNumber,numberOfCurrentUsedSlots:a.usersToBeRenewedCount,isAddSeatsDialogOpen:v,isChoosePaymentMethodDialogOpen:E,setIsAddSeatsDialogOpen:C,setIsChoosePaymentMethodDialogOpen:Z})]})},ur=()=>{const{data:e,status:t}=(0,c.k)(d.o,"getTeamName");return t!==Ze.rq.Success?null:e};var mr=n(45364);let pr=function(e){return e[e.DUPLICATE=0]="DUPLICATE",e[e.SOMETHING_WRONG=1]="SOMETHING_WRONG",e[e.EMPTY=2]="EMPTY",e[e.MALFORMED=3]="MALFORMED",e}({});const gr=(e,t)=>{switch(t){case pr.DUPLICATE:return e("team_account_name_already_exists");case pr.EMPTY:return e("team_account_name_is_empty");case pr.MALFORMED:return e("team_account_name_is_malformed");case pr.SOMETHING_WRONG:default:return e("team_account_name_error_something_wrong")}},hr=({isOpen:e,setIsOpen:t,setTeamName:n,signalNameChangeSuccess:a,teamName:i,teamId:s})=>{const[l,c]=(0,r.useState)(i),[_,u]=(0,r.useState)(),{editTeamName:m}=(0,F.u)(d.o),{translate:p}=(0,g.Z)();(0,r.useEffect)((()=>{c(i)}),[i]);const h=()=>{t(!1),c(i),u(void 0)};return(0,f.BX)(o.Vq,{isOpen:e,actions:{primary:{children:p("account_summary_company_details_name_dialog_save_button"),onClick:()=>(async e=>{if(!e){const e=gr(p,pr.EMPTY);throw u(e),new Error(e)}const i=await m({teamId:s,newTeamName:e});if((0,V.hx)(i)){if(a(!1),i.error.tag===mr.LP.DUPLICATE){const e=gr(p,pr.DUPLICATE);throw u(e),new Error(e)}if(i.error.tag===mr.LP.INVALID_TEAM_SETTING_VALUE){const e=gr(p,pr.MALFORMED);throw u(e),new Error(e)}{const e=gr(p,pr.SOMETHING_WRONG);throw u(e),new Error(e)}}t(!1),a(!0),n(e)})(l)},secondary:{children:p("account_summary_company_details_name_dialog_cancel_button"),onClick:h}},title:p("account_summary_company_details_name_dialog_title"),closeActionLabel:p("account_summary_company_details_name_dialog_close_label"),onClose:h,children:[(0,f.tZ)(o.nv,{children:p("account_summary_company_details_name_dialog_desc")}),(0,f.tZ)(o.qo,{"data-testid":"company-name",label:p("account_summary_company_details_name_dialog_field_label"),value:l,onChange:e=>{u(void 0),c(e.target.value)},sx:{marginTop:"16px"},placeholder:p("account_summary_company_details_name_dialog_field_placeholder"),error:!!_,feedback:_})]})},yr=({hasPermission:e,style:t,teamId:n})=>{const[a,i]=(0,r.useState)(""),[s,l]=(0,r.useState)(!1),[c,d]=(0,r.useState)(!1),_=ur(),{translate:u}=(0,g.Z)(),{showToast:m}=(0,o.pm)();if((0,r.useEffect)((()=>{_&&i(_)}),[_]),(0,r.useEffect)((()=>{c&&m({mood:"brand",description:u("account_summary_company_details_name_success")})}),[c,m,u]),null===a||!n)return null;const p=e("ALL");return(0,f.BX)(f.HY,{children:[(0,f.BX)("div",{sx:t.DISPLAY_GROUP,children:[(0,f.tZ)(o.CW,{"data-testid":"company-name-display",label:u("account_summary_company_details_name_label"),value:a,placeholder:u("account_summary_company_details_empty_field_placeholder")}),p?(0,f.tZ)(o.Qj,{onClick:()=>{l(!0)},as:"button",sx:t.LINK_BUTTON,children:u("account_summary_company_details_name_edit_button")}):null]}),(0,f.tZ)(hr,{isOpen:s,setIsOpen:l,signalNameChangeSuccess:d,teamName:a,setTeamName:i,teamId:n})]})};var br=n(77810);const xr=e=>e===Ze.rq.Success,Sr=e=>Array.isArray(e);var fr=n(99706);const vr="team_account_vat_number_error_something_wrong",Cr=({isOpen:e,setIsOpen:t,setVATNumber:n,signalVATChangeSuccess:a,VATNumber:i,upsertVATNumber:s,deleteVATNumber:l})=>{const[c,d]=(0,r.useState)(),[_,u]=(0,r.useState)(),{translate:m}=(0,g.Z)();(0,r.useEffect)((()=>{i&&d(i)}),[i]);const p=()=>{t(!1),d(i),u(void 0)};return(0,f.BX)(o.Vq,{isOpen:e,actions:{primary:{children:m("account_summary_company_details_vat_dialog_save_button"),onClick:()=>(async e=>{const r=m(vr);let o;if(e){if(!aa(e)){const e=m("team_account_vat_number_invalid");throw u(e),new Error(e)}o=await s({newVATNumber:e})}else{if(!i)throw u(r),new Error(r);o=await l()}if((0,V.hx)(o)){a(!1);const e=m(vr);throw u(e),new Error(e)}t(!1),a(!0),n(e)})(null!=c?c:"")},secondary:{children:m("account_summary_company_details_vat_dialog_cancel_button"),onClick:p}},title:m("account_summary_company_details_vat_dialog_title"),closeActionLabel:m("account_summary_company_details_vat_dialog_close_label"),onClose:p,children:[(0,f.tZ)(o.nv,{children:m("account_summary_company_details_vat_dialog_desc")}),(0,f.tZ)(o.qo,{"data-testid":"enter-vat-number",label:m("account_summary_company_details_vat_dialog_field_label"),value:c,onChange:e=>{u(void 0),d(e.target.value)},sx:{marginTop:"16px"},placeholder:m("account_summary_company_details_vat_dialog_field_placeholder"),error:!!_,feedback:_,hasClearAction:!0,clearActionLabel:m("account_summary_company_details_vat_dialog_clear_label")})]})},Er=({style:e})=>{const[t,n]=(0,r.useState)(""),[a,i]=(0,r.useState)(!1),[s,l]=(0,r.useState)(!1),{translate:d}=(0,g.Z)(),{showToast:_}=(0,o.pm)(),u=(()=>{const{loading:e,billingCountry:t}=T(),{data:n,status:a,error:i}=(0,c.k)(Vt.a,"getTeamVat"),{deleteTeamVat:r,upsertTeamVat:s}=(0,F.u)(Vt.a),o={isLoading:!1,isErrored:!1,isNotApplicable:!1,teamVAT:""};if(e||a===Ze.rq.Loading||!r||!s)return{...o,isLoading:!0};const l=a===Ze.rq.Error&&i.tag===fr.pe.VatNumberNotFound;return a!==Ze.rq.Error||l?"US"!==t?{...o,teamVAT:l?"":null!=n?n:"",deleteTeamVAT:r,upsertTeamVAT:s}:{...o,isNotApplicable:!0}:{...o,isErrored:!0}})(),{isLoading:m,isErrored:p,teamVAT:h,upsertTeamVAT:y,isNotApplicable:b,deleteTeamVAT:x}=u;return(0,r.useEffect)((()=>{m||p||n(h)}),[p,m,h]),(0,r.useEffect)((()=>{s&&_({mood:"brand",description:d("account_summary_company_details_vat_success")})}),[s,_,d]),m||p||!y||!x||b?null:(0,f.BX)(f.HY,{children:[(0,f.BX)("div",{sx:e.DISPLAY_GROUP,children:[(0,f.tZ)(o.CW,{"data-testid":"vat-number",label:d("account_summary_company_details_vat_number_label"),value:t,placeholder:d("account_summary_company_details_empty_field_placeholder")}),(0,f.tZ)(o.Qj,{onClick:()=>{i(!0)},as:"button",sx:e.LINK_BUTTON,children:d(t?"account_summary_company_details_vat_number_edit_button":"account_summary_company_details_vat_number_add_button")})]}),(0,f.tZ)(Cr,{isOpen:a,setIsOpen:i,signalVATChangeSuccess:l,VATNumber:t,setVATNumber:n,upsertVATNumber:y,deleteVATNumber:x})]})};var Zr=n(19474);const Tr=e=>e.trim().toLocaleLowerCase(),Dr="team_account_billing_admin_search_field_placeholder",kr=({defaultSelected:e,handleConfirmClick:t,handleClose:n,allMembersCount:a,membersList:s})=>{const{translate:l}=(0,g.Z)(),{routes:c}=(0,i.Xo)(),[d,_]=(0,r.useState)(e),[u,m]=(0,r.useState)(""),[p,h]=(0,r.useState)([]),[y,b]=(0,r.useState)(!1);(0,r.useEffect)((()=>{h(((e,t)=>""===t.trim()?e:e.filter((({login:e})=>Tr(e).includes(Tr(t)))))(s,u).slice(0,5))}),[s,u]);const x=!p.length||e===d;return(0,f.tZ)(o.Vq,{isOpen:!0,title:l("team_account_billing_admin_dialog_title"),actions:{primary:{children:l("team_account_billing_admin_dialog_confirm"),onClick:()=>t(d),disabled:x}},onClose:n,closeActionLabel:l("_common_dialog_dismiss_button"),children:(0,f.BX)(B.T5p,{gap:"1.5em",gridTemplateColumns:"auto",children:[(0,f.tZ)(o.nv,{color:"ds.text.neutral.quiet",children:l("team_account_billing_admin_dialog_warning")}),(0,f.tZ)(o.Um,{autoFocus:!0,onChange:({target:{value:e}})=>{m(e),y||b(!0)},label:l(Dr),placeholder:l(Dr)}),p.length>0?(0,f.BX)(f.HY,{children:[(0,f.tZ)(o.nv,{color:"ds.text.neutral.quiet",children:l("team_account_billing_admin_search_results_count",{count:p.length,totalCount:a})}),(0,f.tZ)(Zr.S,{value:d,onChange:({target:{value:e}})=>{_(e)},groupName:"billingAdmins",children:p.map((e=>{const{login:t}=e,n=(e=>e.isTeamCaptain?"team_members_row_captain":e.isGroupManager?"team_members_row_group_manager":null)(e);return(0,f.tZ)(Zr.E,{value:t,children:(0,f.BX)("div",{sx:{display:"flex",gap:"6px"},children:[t,n?(0,f.tZ)(o.Ct,{label:l(n)}):null]})},t)}))}),p.length<a?(0,f.BX)("div",{sx:{display:"flex",flexDirection:"row",gap:"8px",alignItems:"center"},children:[(0,f.tZ)(o.nv,{color:"ds.text.neutral.quiet",children:l("team_account_billing_admin_help")}),(0,f.tZ)(o.Qj,{as:i.rU,to:c.teamMembersRoutePath,onClick:n,children:l("team_account_billing_admin_link_to_members_page")})]}):null]}):null,0===p.length?(0,f.tZ)(o.nv,{children:l("team_account_billing_admin_search_no_match")}):null]})})},Ir=({style:e,teamId:t,hasPermission:n})=>{var a,i;const[s,l]=(0,r.useState)(""),[c,_]=(0,r.useState)(!1),u=Na(t),{translate:m}=(0,g.Z)(),{showToast:p}=(0,o.pm)(),{updateBillingAdmin:h}=(0,F.u)(d.o);(0,r.useEffect)((()=>{var e;u&&!s&&l(null!=(e=u.data?.billingAdmins[0])?e:"")}),[s,u]);const{isLoading:y,isErrored:b}=u;if(y||b)return null;const x=n("ALL");return(0,f.BX)(f.HY,{children:[(0,f.BX)("div",{sx:e.DISPLAY_GROUP,children:[(0,f.tZ)(o.CW,{"data-testid":"billing-contact",className:"automation-tests-tac-billing",label:m("account_summary_company_details_billing_contact_label"),value:null!=s?s:"",placeholder:m("account_summary_company_details_empty_field_placeholder"),sx:{"& input":{textOverflow:"ellipsis"}}}),x?(0,f.tZ)(o.Qj,{onClick:()=>{_(!0)},as:"button",sx:e.LINK_BUTTON,children:m("account_summary_company_details_billing_contact_edit_button")}):null]}),c?(0,f.tZ)(kr,{defaultSelected:s,handleClose:()=>{_(!1)},handleConfirmClick:async e=>{if(s===e)return;_(!1);const t=await h({newAdminEmail:e});(0,V.hx)(t)?p({mood:"danger",description:m("team_account_billing_admin_notification_something_wrong")}):(p({mood:"brand",description:m("team_account_billing_admin_notification_success")}),l(e))},membersList:null!=(a=u.data?.members)?a:[],allMembersCount:null!=(i=u.data?.members.length)?i:0}):null]})};var Ar;const Nr={CONTAINER:{display:"flex",justifyContent:"space-between",gap:"16px",marginBottom:"16px"},DISPLAY_GROUP:{display:"flex",flexDirection:"column",flex:"1 1 224px"},LINK_BUTTON:{"> button":{cursor:"pointer"}}},wr=()=>{const{translate:e}=(0,g.Z)(),t=(0,Ca.V)(),n=(()=>{const{data:e,status:t}=(0,c.k)(br.J,"userPermissions");return{status:t,getUserPermissions:()=>xr(t)&&Sr(e)?null!=e?e:[]:null,hasPermission:n=>xr(t)&&Sr(e)&&e.includes(n),hasAnyPermission:n=>xr(t)&&Sr(e)&&n.some((t=>e.includes(t))),hasAllPermissions:n=>xr(t)&&Sr(e)&&n.every((t=>e.includes(t)))}})(),{hasPermission:a}=n;return t.status!==Ze.rq.Success||null===t.teamId?null:(0,f.BX)(o.Zb,{children:[(0,f.tZ)(o.X6,{as:"h2",textStyle:"ds.title.section.medium",color:"ds.text.neutral.catchy",children:e("account_summary_company_details_header")}),(0,f.BX)("div",{sx:Nr.CONTAINER,children:[(0,f.tZ)(yr,{style:Nr,teamId:t.teamId,hasPermission:a}),Ar||(Ar=(0,f.tZ)(Er,{style:Nr})),(0,f.tZ)(Ir,{style:Nr,teamId:t.teamId,hasPermission:a})]}),(0,f.tZ)(o.nv,{textStyle:"ds.body.reduced.regular",color:"ds.text.neutral.quiet",children:e("account_summary_company_details_billing_contact_info")})]})};var Or,Rr=n(95961);const Lr=({label:e,value:t,...n})=>(0,f.BX)(o.kC,{justifyContent:"flex-end",...n,children:[e?(0,f.tZ)(o.kC,{alignItems:"center",sx:{flex:1},children:e}):null,t?(0,f.tZ)(o.kC,{alignItems:"center",children:t}):null]}),Mr=({billingDetails:e,additionalSeatsDetails:t})=>{const{translate:n}=(0,g.Z)(),{additionalSeatsCount:a,additionalSeatsTaxesTranslation:i,hasTax:r,tierPriceTranslation:s,proratedDiscountTranslation:l,hasProratedDiscount:c,dueTodayTranslation:d}=Zi({billingDetails:e,additionalSeatsDetails:t});return(0,f.BX)(o.kC,{flexDirection:"column",gap:"32px",sx:b,children:[(0,f.tZ)(Lr,{alignItems:"end",label:(0,f.tZ)(o.X6,{as:"h2",color:"ds.text.neutral.catchy",children:n("team_account_addseats_success_order_summary_header")}),value:(0,f.tZ)(o.nv,{textStyle:"ds.title.supporting.small",color:"ds.text.neutral.quiet",children:(0,Kn.Z)(new Date,"MM/dd/yyyy")})}),(0,f.BX)(o.kC,{flexDirection:"column",gap:"16px",children:[(0,f.tZ)(Lr,{label:(0,f.tZ)(o.nv,{color:"ds.text.neutral.standard",children:n("team_account_teamplan_upgrade_new_seat",{count:a})}),value:(0,f.tZ)(o.nv,{color:"ds.text.neutral.standard",children:s})}),r?(0,f.tZ)(Lr,{label:(0,f.tZ)(o.nv,{color:"ds.text.neutral.standard",children:n("team_account_addseats_success_order_summary_tax")}),value:(0,f.tZ)(o.nv,{color:"ds.text.neutral.standard",children:i})}):null,c?(0,f.tZ)(Lr,{label:(0,f.BX)(o.kC,{alignItems:"center",gap:"5px",children:[(0,f.tZ)(o.nv,{color:"ds.text.neutral.standard",children:n("team_account_addseats_success_order_summary_prorated_discount")}),(0,f.tZ)(B.ua7,{content:n("team_account_addseats_success_order_summary_prorated_discount_tooltip"),children:Or||(Or=(0,f.tZ)(B.uMt,{size:16,color:"ds.text.neutral.standard"}))})]}),value:(0,f.tZ)(o.nv,{color:"ds.text.neutral.standard",children:l})}):null,(0,f.tZ)("div",{style:{width:"100%",borderColor:o.O9.lightTheme.ds.border.neutral.quiet.idle,borderWidth:"1px",borderStyle:"solid",borderBottom:"0",margin:"0"}}),(0,f.tZ)(Lr,{label:(0,f.tZ)(o.nv,{textStyle:"ds.body.standard.strong",color:"ds.text.neutral.standard",children:n("team_account_addseats_success_order_summary_total")}),value:(0,f.tZ)(o.nv,{textStyle:"ds.body.standard.strong",color:"ds.text.neutral.standard",children:d})})]})]})},Br=({isBusiness:e,additionalSeats:t,showInviteUsersButton:n=!0,onGetPastReceipts:a,backNavigationHandler:r})=>{const{routes:s}=(0,i.Xo)(),{translate:c}=(0,g.Z)();return(0,f.BX)(o.kC,{flexDirection:"column",gap:"40px",sx:y,children:[(0,f.BX)(o.kC,{flexDirection:"column",gap:"8px",children:[e?(0,f.tZ)(o.X6,{as:"h2",color:"ds.text.neutral.catchy",children:c("team_account_addseats_success_newseats_header_business",{count:t})}):(0,f.tZ)(o.X6,{as:"h2",color:"ds.text.neutral.catchy",children:c("team_account_addseats_success_newseats_header_team",{count:t})}),(0,f.tZ)(o.nv,{color:"ds.text.neutral.quiet",children:c("team_account_addseats_success_newseats_body")})]}),(0,f.BX)(o.kC,{gap:"8px",children:[n?(0,f.tZ)(i.rU,{to:s.teamMembersRoutePath,children:(0,f.tZ)(o.zx,{onClick:()=>{(0,m.Kz)(new l.UserSendManualInviteEvent({flowStep:l.FlowStep.Start,inviteCount:0,inviteFailedCount:0,inviteResentCount:0,inviteSuccessfulCount:0,isImport:!0,isResend:!1}))},mood:"brand",children:c("team_account_addseats_success_newseats_invite_users_cta")})}):null,a?(0,f.tZ)(o.zx,{mood:"neutral",intensity:"quiet",onClick:a,children:c("team_account_addseats_success_newseats_billing_history_cta")}):(0,f.tZ)(o.zx,{mood:"neutral",intensity:"quiet",onClick:r,children:c("team_account_addseats_success_newseats_go_to_account_summary_cta")})]})]})};var Pr;const Ur=()=>{const{translate:e}=(0,g.Z)();return(0,f.BX)(o.kC,{flexWrap:"nowrap",gap:"16px",sx:y,children:[Pr||(Pr=(0,f.tZ)(o.kC,{sx:x,children:(0,f.tZ)(o.JO,{name:"GroupOutlined",color:"ds.text.neutral.standard"})})),(0,f.BX)(o.kC,{flexDirection:"column",gap:"16px",sx:{flexGrow:"1"},children:[(0,f.BX)(o.kC,{flexDirection:"column",gap:"8px",children:[(0,f.tZ)(o.X6,{as:"h2",color:"ds.text.neutral.catchy",children:e("team_account_addseats_success_friends_family_header")}),(0,f.tZ)(o.nv,{color:"ds.text.neutral.quiet",children:e("team_account_addseats_success_friends_family_body")})]}),(0,f.tZ)("a",{href:"https://support.dashlane.com/hc/articles/360013369820-Dashlane-Friends-Family-plan",target:"_blank",rel:"noopener noreferrer",children:(0,f.tZ)(o.zx,{mood:"neutral",intensity:"quiet",children:e("team_account_addseats_success_friends_family_learn_more_cta")})})]})]})};var zr;const Xr=()=>{const{translate:e}=(0,g.Z)();return(0,f.BX)(o.kC,{flexWrap:"nowrap",gap:"16px",sx:y,children:[zr||(zr=(0,f.tZ)(o.kC,{sx:x,children:(0,f.tZ)(o.JO,{name:"GroupOutlined",color:"ds.text.neutral.standard"})})),(0,f.BX)(o.kC,{flexDirection:"column",gap:"8px",sx:{flexGrow:"1"},children:[(0,f.tZ)(o.X6,{as:"h2",color:"ds.text.neutral.catchy",children:e("team_account_addseats_success_idp_nextstep_title")}),(0,f.tZ)(o.X6,{as:"h3",textStyle:"ds.title.block.medium",color:"ds.text.neutral.catchy",children:e("team_account_addseats_success_idp_nextstep_subtitle")}),(0,f.tZ)(o.nv,{color:"ds.text.neutral.quiet",children:e("team_account_addseats_success_idp_nextstep_description")}),(0,f.tZ)(o.Qj,{isExternal:!0,href:ae.hP,children:e("team_account_addseats_success_idp_nextstep_see_setup_guide_link")})]})]})};var qr,jr,Gr;const Fr=({lastBillingDetails:e,lastAdditionalSeatsDetails:t,onGetPastReceipts:n,onNavigateBack:a})=>{const{translate:i}=(0,g.Z)(),[s,d]=(0,r.useState)(t),[p,h]=(0,r.useState)(e),{additionalSeatsCount:y}=Zi({billingDetails:p,additionalSeatsDetails:s}),b=(0,u.s)(),x=(0,c.k)(Rr.t,"getIdPFailedProvisioningsData"),S=x.status===Ze.rq.Loading,C=x.status===Ze.rq.Success&&!!x.data?.nbOfFailedCreations,E=(0,f.tZ)(o.zx,{mood:"neutral",intensity:"supershy",onClick:a,layout:"iconLeading",icon:"ArrowLeftOutlined",children:i("_common_action_back")}),Z=b?.spaceTier===_.lD.Business,T=(0,r.useContext)(Ct);return(0,r.useEffect)((()=>(T(E),(0,m.Nc)(l.PageView.TacOrderConfirmation),()=>{T(null),a()})),[]),(0,r.useEffect)((()=>{h(e),d(t)}),[e,t]),(0,f.tZ)(o.kC,{flexDirection:"column",gap:"32px",sx:{padding:"32px",flexWrap:"nowrap"},children:(0,f.BX)(o.kC,{gap:"16px",sx:{flexWrap:"nowrap"},children:[(0,f.BX)(o.kC,{flexDirection:"column",gap:"16px",sx:{flexGrow:"2",maxWidth:"632px"},children:[(0,f.tZ)(Br,{onGetPastReceipts:n,isBusiness:Z,additionalSeats:y,showInviteUsersButton:!S&&!C,backNavigationHandler:a}),Z&&!S?C?qr||(qr=(0,f.tZ)(Xr,{})):jr||(jr=(0,f.tZ)(Ur,{})):null]}),(0,f.BX)(o.kC,{flexDirection:"column",gap:"16px",sx:{flexGrow:"1"},children:[(0,f.tZ)(Mr,{billingDetails:p,additionalSeatsDetails:s}),Gr||(Gr=(0,f.tZ)(v,{}))]})]})})},Vr=({cardSvg:e,last4DigitsFormatted:t,expFormatted:n,isExpired:a})=>{const{translate:i}=(0,g.Z)();return(0,f.BX)("div",{sx:{display:"flex",alignItems:"center",gap:"8px"},children:[e,(0,f.BX)("div",{children:[(0,f.BX)(o.nv,{"data-testid":"card-last-four",sx:{display:"flex",gap:"4px"},children:["•••• ",t,a?(0,f.tZ)(o.Ct,{label:i("account_summary_payment_card_expired_badge"),mood:"danger",sx:{alignSelf:"center"}}):null]}),(0,f.tZ)(o.nv,{textStyle:"ds.body.reduced.regular",color:"ds.text.neutral.quiet",children:i("manage_subscription_payment_section_expiration_date",{date:n})})]})]})};var Hr,Wr;const $r="account_summary_payment_card_add_new_button",Yr="account_summary_payment_card_update_button",Kr={SECTION_CONTAINER:{display:"flex",justifyContent:"space-between",alignItems:"center"},INVOICE_CONTAINER:{display:"flex",flexDirection:"column",gap:"8px"},CARD:{display:"flex",flexDirection:"column",gap:"16px"}},Qr=()=>{const{translate:e}=(0,g.Z)(),t=(0,u.s)(),[n,a]=(0,r.useState)(!1),{last4DigitsFormatted:i,hasCreditCardPaymentMethod:s,cardSvg:l,isExpired:c,expFormatted:d,pollUntilCardUpdate:m}=(0,h.C)({});if(!t)return null;const p=t.billingType===_.qo.Invoice,y=!t.billingType,b=()=>{m(),a(!0)},x=y?{key:$r,onClick:b}:p?null:{key:Yr,onClick:b};return(0,f.BX)(o.Zb,{sx:Kr.CARD,children:[(0,f.BX)("div",{sx:{display:"flex",justifyContent:"space-between"},children:[(0,f.tZ)(o.X6,{textStyle:"ds.title.section.medium",color:"ds.text.neutral.catchy",as:"h2",children:e(p?"account_summary_payment_method_plural":"account_summary_payment_method_singular")}),n?(0,f.tZ)(Za.J,{b2c:!1,setPaymentLoading:a}):x&&(0,f.tZ)(o.Qj,{isExternal:!0,onClick:x.onClick,sx:{cursor:"pointer"},children:e(x.key)})]}),y?(0,f.tZ)(o.nv,{color:"ds.text.inverse.quiet",children:e("account_summary_no_payment_method")}):null,p?(0,f.BX)("div",{children:[(0,f.BX)("div",{sx:Kr.INVOICE_CONTAINER,children:[(0,f.BX)("div",{sx:Kr.SECTION_CONTAINER,children:[(0,f.tZ)(o.nv,{textStyle:"ds.title.supporting.small",color:"ds.text.neutral.quiet",children:e("account_summary_subscription_payment_method")}),(0,f.tZ)(o.Qj,{isExternal:!0,onClick:()=>{(0,X.Yo)(ae.FL)},children:e("account_summary_contact_support")})]}),(0,f.BX)("div",{sx:{display:"flex",gap:"8px"},children:[Hr||(Hr=(0,f.tZ)(o.vY,{name:"ItemTaxNumberOutlined",mood:"neutral"})),(0,f.tZ)(o.nv,{sx:{alignSelf:"center"},children:e("account_summary_paying_by_invoice")})]})]}),Wr||(Wr=(0,f.tZ)(Ki,{})),(0,f.BX)("div",{children:[(0,f.BX)("div",{sx:Kr.SECTION_CONTAINER,children:[(0,f.tZ)(o.nv,{textStyle:"ds.title.supporting.small",color:"ds.text.neutral.quiet",children:e("account_summary_seats_payment_method")}),(0,f.tZ)(o.Qj,{isExternal:!0,onClick:b,children:e(s?Yr:$r)})]}),s&&l&&i&&d?(0,f.tZ)(Vr,{cardSvg:l,last4DigitsFormatted:i,isExpired:c,expFormatted:d}):(0,f.tZ)(o.nv,{color:"ds.text.inverse.quiet",children:e("account_summary_no_payment_card_added")})]})]}):l&&i&&d?(0,f.tZ)(Vr,{cardSvg:l,last4DigitsFormatted:i,isExpired:c,expFormatted:d}):null]})};var Jr=n(42868),es=n(29274),ts=n(27521);const ns=({isOpen:e,lee:t,onClose:n})=>{const a=(0,r.useRef)(null),i=(0,r.useRef)(null),s=(0,r.useRef)(null),l=(0,r.useRef)(null),{translate:c}=(0,g.Z)(),{reportTACError:d}=Y(),[_,u]=(0,r.useState)(!1),[m,p]=(0,r.useState)(!0),h=ur();if(!h)return null;const y=()=>{u(!1),n()},b=()=>{const e=(0,ts.v0)(t.globalState);if(e)if(a.current?.value){y();try{(0,X.Yo)("https://ws1.dashlane.com/1/invoiceGeneration/generateTeamReceipt.pdf?"+(e=>{const t={...e,recipient:a.current?.value,company:i.current?.value,address:s.current?.value,vatNumber:l.current?.value};return Jr.stringify(t)})(e))}catch(e){d(e)}}else u(!0);else d(new Error(es.N))},x=_?{feedback:{text:c("team_account_past_receipts_dialog_recipient_is_required")},error:!0}:{};return(0,f.BX)(o.Vq,{title:c("team_account_past_receipts_dialog_title"),closeActionLabel:c("_common_dialog_dismiss_button"),isOpen:e,onClose:y,actions:{primary:{children:c("team_account_past_receipts_dialog_download_button"),onClick:b,disabled:m}},children:[(0,f.tZ)(o.nv,{children:c("team_account_past_receipts_dialog_instructions")}),(0,f.BX)(B.T5p,{as:"form",onSubmit:b,gap:"1em",children:[(0,f.tZ)(o.qo,{label:c("team_account_past_receipts_dialog_recipient")+" *",placeholder:c("team_account_past_receipts_dialog_recipient_hint"),onChange:()=>{a.current?.value?(p(!1),u(!1)):(p(!0),u(!0))},ref:a,...x}),(0,f.tZ)(o.qo,{label:c("team_account_past_receipts_dialog_company"),value:h,placeholder:c("team_account_past_receipts_dialog_company_hint"),ref:i}),(0,f.tZ)(o.qo,{label:c("team_account_past_receipts_dialog_billing_address"),placeholder:c("team_account_past_receipts_dialog_billing_address_hint"),ref:s}),(0,f.tZ)(o.qo,{label:c("team_account_past_receipts_dialog_vat"),placeholder:c("team_account_past_receipts_dialog_vat_hint"),ref:l})]})]})},as=({lee:e})=>{const{translate:t}=(0,g.Z)(),n=(0,ie.JS)(),[a,i]=(0,r.useState)(!1);if(n.status!==Ze.rq.Success||!n.data)return null;const s=n.data.b2bStatus?.currentTeam?.hasPaid;return(0,f.BX)(o.Zb,{sx:{display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center",gap:"24px"},children:[(0,f.tZ)(o.X6,{textStyle:"ds.title.section.medium",color:"ds.text.neutral.catchy",as:"h2",children:t("account_summary_billing_history_header")}),s?(0,f.tZ)(o.zx,{mood:"brand",intensity:"supershy",icon:"DownloadOutlined",layout:"iconLeading",onClick:()=>{(0,m.Kz)(new l.UserClickEvent({button:l.Button.DownloadBillingHistory})),(0,m.Nc)(l.PageView.TacAccountCustomizeInvoice),i(!0)},children:t("account_summary_billing_history_download_button")}):(0,f.tZ)(o.nv,{color:"ds.text.inverse.quiet",children:t("account_summary_billing_history_no_invoice")}),(0,f.tZ)(ns,{lee:e,onClose:()=>{i(!1)},isOpen:a})]})};var is=n(98423),rs=n(68531);const ss=({spaceTier:e,handleClose:t,sendCancelRequest:n,requestStatus:a})=>{const{translate:i}=(0,g.Z)(),[s,c]=(0,r.useState)({[_.Gr.ChoseOtherPasswordManager]:!1,[_.Gr.MissingCriticalFeatures]:!1,[_.Gr.NoInternalUsage]:!1,[_.Gr.DownsizedEmployeeCount]:!1,[_.Gr.Other]:!1,[_.Gr.TechnicalIssues]:!1,[_.Gr.TooExpensive]:!1});(0,r.useEffect)((()=>{(0,m.Nc)(l.PageView.TacModalReasonsToCancelSubscription)}),[]);const d=`${e[0].toUpperCase()}${e.slice(1)}`,u=e=>{const t=!s[e];c({...s,[e]:t})};return(0,f.BX)(o.Vq,{isOpen:!0,onClose:()=>{(0,m.Kz)(new l.UserCallToActionEvent({callToActionList:[l.CallToAction.Confirm,l.CallToAction.Cancel],hasChosenNoAction:!0})),t()},title:i("team_account_cancel_form_heading"),actions:{primary:{children:i("team_account_cancel_form_button_confirm"),onClick:()=>{const e=Object.keys(s).filter((e=>s[e])).map((e=>rs.V[e]));n(e),(0,m.Kz)(new l.UserCallToActionEvent({callToActionList:[l.CallToAction.Confirm,l.CallToAction.Cancel],chosenAction:l.CallToAction.Confirm,hasChosenNoAction:!1})),(0,m.Kz)(new l.UserSubmitInProductFormAnswerEvent({formName:l.FormName.ReasonToCancelSubscription,answerList:Object.keys(s).map((e=>rs.V[e])),chosenAnswerList:e}))},isLoading:"pending"===a},secondary:{children:i("team_account_cancel_form_button_cancel",{planTier:d}),onClick:()=>{(0,m.Kz)(new l.UserCallToActionEvent({callToActionList:[l.CallToAction.Confirm,l.CallToAction.Cancel],chosenAction:l.CallToAction.Cancel,hasChosenNoAction:!1})),t()}}},isDestructive:!0,closeActionLabel:i("_common_dialog_dismiss_button"),children:[(0,f.tZ)(o.nv,{sx:{marginBottom:"20px"},textStyle:"ds.body.standard.regular",color:"ds.text.neutral.quiet",children:i("team_account_cancel_form_subheading")}),(0,f.tZ)(o.nv,{textStyle:"ds.title.block.medium",children:i("team_account_cancel_form_question")}),(0,f.tZ)(o.nv,{sx:{marginBottom:"20px"},textStyle:"ds.body.standard.regular",children:i("team_account_cancel_form_context")}),(0,f.BX)("div",{sx:{display:"flex",flexDirection:"column",gap:"20px"},children:[(0,f.tZ)(o.XZ,{label:i("team_account_cancel_form_option_1"),checked:s.no_internal_usage,disabled:"pending"===a,onChange:()=>u(_.Gr.NoInternalUsage)}),(0,f.tZ)(o.XZ,{label:i("team_account_cancel_form_option_2_revised"),checked:s.downsized_employee_count,disabled:"pending"===a,onChange:()=>u(_.Gr.DownsizedEmployeeCount)}),(0,f.tZ)(o.XZ,{label:i("team_account_cancel_form_option_3"),checked:s.chose_other_password_manager,disabled:"pending"===a,onChange:()=>u(_.Gr.ChoseOtherPasswordManager)}),(0,f.tZ)(o.XZ,{label:i("team_account_cancel_form_option_4"),checked:s.missing_critical_features,disabled:"pending"===a,onChange:()=>u(_.Gr.MissingCriticalFeatures)}),(0,f.tZ)(o.XZ,{label:i("team_account_cancel_form_option_5"),checked:s.technical_issues,disabled:"pending"===a,onChange:()=>u(_.Gr.TechnicalIssues)}),(0,f.tZ)(o.XZ,{label:i("team_account_cancel_form_option_6"),checked:s.too_expensive,disabled:"pending"===a,onChange:()=>u(_.Gr.TooExpensive)}),(0,f.tZ)(o.XZ,{sx:{marginBottom:"8px"},label:i("team_account_cancel_form_option_7"),checked:s.other,disabled:"pending"===a,onChange:()=>u(_.Gr.Other)})]}),(0,f.tZ)(o.nv,{sx:{margin:"20px 0"},textStyle:"ds.body.standard.regular",color:"ds.text.neutral.quiet",children:i.markup("team_account_cancel_form_help_markup",{},{linkTarget:"_blank"})})]})};var os,ls;const cs={ITEM:{display:"flex",flexDirection:"row",alignItems:"flex-start",gap:"16px"},WRAPPER:{margin:"16px 0",gap:"24px",display:"flex",flexDirection:"column"}},ds="team_account_cancel_confirmation_dialog_close",_s=({handleClose:e})=>{const{translate:t}=(0,g.Z)();return(0,r.useEffect)((()=>{(0,m.Nc)(l.PageView.TacConfirmSubscriptionCancellationRequestSubmission)}),[]),(0,f.tZ)(o.Vq,{isOpen:!0,onClose:e,title:t("team_account_cancel_confirmation_dialog_heading"),closeActionLabel:t(ds),actions:{primary:{children:t(ds),onClick:e}},children:(0,f.BX)("div",{sx:cs.WRAPPER,children:[(0,f.BX)("div",{sx:cs.ITEM,children:[os||(os=(0,f.tZ)(o.vY,{name:"ItemEmailOutlined",size:"medium",mood:"brand"})),(0,f.tZ)(o.nv,{children:t.markup("team_account_cancel_confirmation_dialog_paragraph_1_markup")})]}),(0,f.BX)("div",{sx:cs.ITEM,children:[ls||(ls=(0,f.tZ)(o.vY,{name:"ActionUndoOutlined",size:"medium",mood:"brand"})),(0,f.tZ)(o.nv,{children:t("team_account_cancel_confirmation_dialog_paragraph_2")})]})]})})},us={none:{heading:"account_summary_cancel_subscription_header",paragraph:"account_summary_cancel_subscription_description",button:"account_summary_cancel_subscription_button"},pending:{heading:"team_account_cancel_widget_requested_pending_heading",paragraph:"team_account_cancel_widget_requested_pending_content_markup"},canceled:{heading:"team_account_cancel_widget_requested_complete_heading",paragraph:"team_account_cancel_widget_requested_complete_content",button:"team_account_cancel_widget_requested_complete_button"},unknown:{}},ms=(e,t,n)=>{var a,i,r,s;switch(e){case _.Uz.None:return n(null!=(a=us.none[t])?a:"");case _.Uz.Pending:return"paragraph"===t?n.markup(null!=(i=us.pending[t])?i:"",{},{linkTarget:"_blank"}):n(null!=(r=us.pending[t])?r:"");case _.Uz.Canceled:return n(null!=(s=us.canceled[t])?s:"");case _.Uz.Unknown:return""}},ps=({status:e,handleClickButton:t})=>{const{translate:n}=(0,g.Z)();return(0,f.BX)(o.Zb,{sx:{width:"368px",padding:"24px",display:"flex",flexDirection:"column",gap:"16px"},children:[e!==_.Uz.Unknown?(0,f.tZ)(o.nv,{textStyle:"ds.title.block.medium",color:"ds.text.neutral.catchy",children:ms(e,"heading",n)}):null,(0,f.BX)("div",{sx:{display:"flex",flexDirection:"column",gap:"8px"},children:[(0,f.tZ)(o.nv,{children:ms(e,"paragraph",n)}),e!==_.Uz.Pending?(0,f.tZ)(o.Qj,{onClick:t,as:"button",sx:{"> button":{cursor:"pointer"}},children:ms(e,"button",n)}):null]}),e===_.Uz.None?(0,f.BX)("div",{sx:{display:"flex",flexDirection:"column",gap:"8px"},children:[(0,f.tZ)(o.nv,{children:n("account_summary_downgrade_description")}),(0,f.tZ)(o.Qj,{isExternal:!0,href:ae.oH,children:n("account_summary_contact_support_button")})]}):null]})};let gs=function(e){return e.NONE="none",e.SURVEY="survey",e.REQUEST_SUCCESS="requestSentConfirmation",e.REQUEST_ERROR="requestError",e}({});const hs=({status:e})=>{const[t,n]=(0,r.useState)(gs.NONE),[a,i]=(0,r.useState)("idle"),{showToast:s}=(0,o.pm)(),c=(0,ie.lZ)(),u=(0,re.C)(),{translate:p}=(0,g.Z)();(0,r.useEffect)((()=>{e!==_.Uz.Unknown&&t!==gs.REQUEST_ERROR||s({mood:"danger",description:p("team_account_cancel_request_error"),isManualDismiss:!0})}),[t,s,e,p]);const{requestTeamPlanCancellation:h}=(0,F.u)(d.o);return c.isLoading||!u||c.isTeamSoftDiscontinued||u.isFreeTrial||u.isGracePeriod?null:(0,f.BX)(f.HY,{children:[(0,f.tZ)(ps,{status:e,handleClickButton:e===_.Uz.None?()=>{(0,m.Kz)(new l.UserClickEvent({clickOrigin:l.ClickOrigin.BillingInformation,button:l.Button.CancelSubscription})),n(gs.SURVEY)}:()=>{(0,m.Kz)(new l.UserClickEvent({clickOrigin:l.ClickOrigin.BillingInformation,button:l.Button.ReactivateSubscription})),(0,X.Yo)(ae.lh)}}),t===gs.SURVEY?(0,f.tZ)(ss,{spaceTier:u.spaceTier,handleClose:()=>{n(gs.NONE)},sendCancelRequest:async e=>{i("pending");try{const t=await h({reasons:e});if(i("finished"),"failure"===t.tag)throw new Error("Failed to request team plan cancellation.");n(gs.REQUEST_SUCCESS)}catch(e){n(gs.REQUEST_ERROR)}},requestStatus:a}):null,t===gs.REQUEST_SUCCESS?(0,f.tZ)(_s,{handleClose:()=>{n(gs.NONE)}}):null]})};var ys=n(28622);const bs="account_summary_sso_description",xs="account_summary_unlimited_seats_description",Ss=({iconName:e,description:t})=>{const{translate:n}=(0,g.Z)();return(0,f.BX)("div",{sx:{display:"flex",alignItems:"center",gap:"8px"},children:[(0,f.tZ)(o.vY,{name:e,mood:"brand",size:"small"}),(0,f.tZ)(o.nv,{textStyle:"ds.body.reduced.regular",color:"ds.text.neutral.quiet",children:n(t)})]})},fs="account_summary_upgrade_to_business",vs=()=>{const{translate:e}=(0,g.Z)(),t=(0,G.U)(),{routes:n}=(0,i.Xo)(),a=(0,u.s)();if(!t||!a||a.spaceTier===_.lD.Business||a.spaceTier===_.lD.Enterprise||a.spaceTier===_.lD.Legacy)return null;const r=a.spaceTier===_.lD.Starter,s=a.spaceTier===_.lD.Standard,c=(e=>{switch(e){case"starter":return[{icon:"GroupOutlined",description:xs},{icon:"SharedOutlined",description:"account_summary_unlimited_groups_description"},{icon:"LockOutlined",description:bs},{icon:"SettingsOutlined",description:"account_summary_activity_logs_description"}];case"team":return[{icon:"LockOutlined",description:bs},{icon:"SharedOutlined",description:"account_summary_scim_feature_description"},{icon:"GroupOutlined",description:"account_summary_family_friends_plan_description"},{icon:"ItemPhoneHomeOutlined",description:"account_summary_phone_support_team_description"}];case"standard":return[{icon:"GroupOutlined",description:xs},{icon:"ToolsOutlined",description:"account_summary_advanced_tools_description"},{icon:"HealthPositiveOutlined",description:"account_summary_enhanced_integrations_description"},{icon:"ItemPhoneHomeOutlined",description:"account_summary_additional_support_description"}]}})(a.spaceTier);return(0,f.BX)(o.Zb,{sx:{display:"flex",flexDirection:"column",gap:"24px",width:"368px",padding:"24px"},children:[(0,f.tZ)(o.Ct,{label:e(fs),mood:"brand",iconName:"PremiumOutlined",layout:"iconLeading"}),(0,f.tZ)("div",{sx:{display:"flex",justifyContent:"center",flex:1},children:(0,f.tZ)("img",{role:"presentation",alt:"",src:ys,sx:{objectFit:"contain",width:"100%",height:"auto"}})}),(0,f.BX)("div",{sx:{display:"flex",flexDirection:"column",gap:"16px"},children:[(0,f.tZ)(o.nv,{textStyle:"ds.title.block.medium",color:"ds.text.neutral.catchy",children:e(s?"account_summary_upgrade_standard_title":r?"account_summary_upgrade_starter_title":"account_summary_upgrade_team_title")}),c.map((e=>(0,f.tZ)(Ss,{iconName:e.icon,description:e.description},e.description)))]}),(0,f.tZ)(o.zx,{mood:"brand",intensity:"catchy",icon:"PremiumOutlined",layout:"iconLeading",onClick:()=>{(0,m.Kz)(new l.UserClickEvent({button:l.Button.BuyDashlane,clickOrigin:l.ClickOrigin.AccountStatus}))},as:i.rU,to:`${n.teamAccountChangePlanRoutePath}?plan=business`,children:e(fs)})]})},Cs=()=>{const{translate:e}=(0,g.Z)(),t=(0,G.U)();return(0,f.BX)(o.Zb,{sx:{display:"flex",flexDirection:"column",gap:"24px",width:"368px",padding:"24px"},children:[(0,f.tZ)(o.Ct,{label:e("account_summary_upgrade_content_business_badge"),mood:"brand",iconName:"PremiumOutlined",layout:"iconLeading"}),(0,f.tZ)("div",{sx:{display:"flex",justifyContent:"center",flex:1},children:(0,f.tZ)("img",{role:"presentation",alt:"",src:ys,sx:{objectFit:"contain",width:"100%",height:"auto"}})}),(0,f.BX)("div",{sx:{display:"flex",flexDirection:"column",gap:"16px"},children:[(0,f.tZ)(o.nv,{textStyle:"ds.title.block.medium",color:"ds.text.neutral.catchy",children:e("account_summary_upgrade_content_title")}),(0,f.tZ)(Ss,{iconName:"SsoOutlined",description:"account_summary_sso_feature_description"}),(0,f.tZ)(Ss,{iconName:"PhishingAlertOutlined",description:"account_summary_protection_feature_description"}),(0,f.tZ)(Ss,{iconName:"ItemPhoneHomeOutlined",description:"account_summary_phone_support_feature_description"})]}),(0,f.tZ)(o.zx,{onClick:()=>{(0,m.Kz)(new l.UserClickEvent({button:l.Button.BuyDashlane,clickOrigin:l.ClickOrigin.AccountStatus})),(0,X.Yo)(`${ae.ub}?plan=business&subCode=${null!=t?t:""}`)},mood:"brand",intensity:"catchy",children:e("account_summary_buy_dashlane_button")})]})},Es={minWidth:"368px",padding:"24px",display:"flex",flexDirection:"column",gap:"16px"},Zs=()=>{const{translate:e}=(0,g.Z)();return(0,f.BX)(o.Zb,{sx:Es,children:[(0,f.tZ)(o.nv,{textStyle:"ds.title.block.medium",color:"ds.text.neutral.catchy",children:e("account_summary_keep_subscription_header")}),(0,f.BX)("div",{sx:{display:"flex",flexDirection:"column",gap:"8px"},children:[(0,f.tZ)(o.nv,{children:e("account_summary_keep_subscription_description")}),(0,f.tZ)(o.Qj,{isExternal:!0,href:ae.oH,children:e("account_summary_keep_subscription_button")})]})]})};var Ts,Ds,ks;const Is=()=>{const e=(0,is.M)(),t=(0,ie.lZ)(),n=(0,ie.JS)(),a=(0,re.C)(),{isExpired:i}=(0,h.C)({});if(e.isLoading||t.isLoading||n.status!==Ze.rq.Success||!n.data.b2bStatus||!a)return null;const r=(e=>{switch(e){case"ACTIVE":case"ACTIVE CARD EXPIRED":case"DISCONTINUED CARD EXPIRED":return"cancelSubscription";case"ACTIVE CANCELED":case"DISCONTINUED CANCELED":return"keepSubscription";case"DISCONTINUED TRIAL":case"GRACE PERIOD":case"TRIAL":return"trialUpgrade"}})(ii(t,n.data.b2bStatus,a,i));return"cancelSubscription"===r?a.spaceTier===_.lD.Team||a.spaceTier===_.lD.Starter||a.spaceTier===_.lD.Standard?(0,f.BX)("div",{sx:{display:"flex",flexDirection:"column",gap:"16px"},children:[Ts||(Ts=(0,f.tZ)(vs,{})),(0,f.tZ)(hs,{status:e.status})]}):(0,f.tZ)(hs,{status:e.status}):"keepSubscription"===r?Ds||(Ds=(0,f.tZ)(Zs,{})):"trialUpgrade"===r?ks||(ks=(0,f.tZ)(Cs,{})):void 0};var As,Ns,ws;const Os={backgroundColor:"ds.background.alternate",minHeight:"100%","& > div":{maxWidth:"74em",padding:"24px"}},Rs=({lee:e})=>(0,f.BX)(o.kC,{flexDirection:"column",gap:"16px",sx:Os,children:[As||(As=(0,f.tZ)(_r,{})),Ns||(Ns=(0,f.tZ)(Qr,{})),ws||(ws=(0,f.tZ)(wr,{})),(0,f.tZ)(as,{lee:e})]}),Ls=({lee:e})=>{const{isAddSeatsSuccessOpen:t,upsellDetails:n,setIsAddSeatsSuccessPageOpen:a}=xt(),{translate:i}=(0,g.Z)();return(0,r.useEffect)((()=>{(0,m.Nc)(l.PageView.TacAccount)}),[]),t?n.lastAdditionalSeatsDetails&&n.lastBillingDetails?(0,f.tZ)(Fr,{lastAdditionalSeatsDetails:n.lastAdditionalSeatsDetails,lastBillingDetails:n.lastBillingDetails,onNavigateBack:()=>{a(!1)}}):null:(0,f.BX)(f.HY,{children:[(0,f.tZ)(o.X6,{textStyle:"ds.title.section.large",color:"ds.text.neutral.catchy",as:"h1",sx:{height:"50px",padding:"32px 48px"},children:i("team_account_heading_team_setup")}),(0,f.tZ)(ni,{mainContent:(0,f.tZ)(Rs,{lee:e}),secondaryContent:Is,secondaryContentWrapDirection:"bottom"})]})};var Ms=n(6135),Bs=n(80237);const Ps="360px",Us={STATE_WRAPPER:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",gap:"24px",width:"100%",height:Ps,padding:"24px",textAlign:"center"},TABLE_BODY:{minHeight:Ps,tr:{boxShadow:"inset 0 -1px 0 0 ds.border.neutral.quiet.idle",height:"60px",transition:"background-color 0.2s ease",backgroundColor:"transparent","&:hover":{backgroundColor:"ds.container.expressive.neutral.supershy.hover"},td:{padding:"16px",verticalAlign:"middle",variant:"text.ds.body.reduced.regular",color:"ds.text.neutral.standard"}}},INPUT_WITH_CLEAR_ACTION:{display:"grid",gridTemplateColumns:"calc(100% - 40px) auto",alignItems:"center",gap:"4px"}};var zs,Xs,qs=n(25928);const js=({title:e,description:t})=>{const{translate:n}=(0,g.Z)();return(0,f.BX)(f.HY,{children:[(0,f.tZ)(o.nv,{textStyle:"ds.title.section.medium",color:"ds.text.neutral.standard",sx:{marginBottom:"4px"},children:n(e)}),(0,f.tZ)(o.nv,{textStyle:"ds.body.reduced.regular",color:"ds.text.neutral.quiet",children:n(t)})]})},Gs=()=>(0,f.BX)("div",{sx:Us.STATE_WRAPPER,children:[zs||(zs=(0,f.tZ)(o.JO,{name:"FeedbackFailOutlined",color:"ds.text.danger.quiet",size:"xlarge"})),(0,f.tZ)(js,{title:"team_audit_log_state_error_title",description:"team_audit_log_state_error_description"})]}),Fs=()=>(0,f.BX)("div",{sx:Us.STATE_WRAPPER,children:[Xs||(Xs=(0,f.tZ)(o.ZX,{mood:"brand",size:"xlarge"})),(0,f.tZ)(js,{title:"team_audit_log_state_loading_title",description:"team_audit_log_state_loading_description"})]}),Vs=()=>(0,f.BX)("div",{sx:Us.STATE_WRAPPER,children:[(0,f.tZ)("img",{sx:{userSelect:"none",pointerEvents:"none",width:"360px",maxWidth:"100%",margin:"0 auto"},alt:"","aria-hidden":!0,src:qs}),(0,f.tZ)(js,{title:"team_audit_log_state_empty_title",description:"team_audit_log_state_empty_description"})]});var Hs=n(55920);const Ws=[Hs.p.Account,Hs.p.Authentication,Hs.p.DarkWebMonitoring,Hs.p.Groups,Hs.p.TeamSettings,Hs.p.TeamSettingsSSO,Hs.p.TeamSettingsSAMLProvisioning,Hs.p.TeamSettingsSCIM,Hs.p.TeamSettingsSIEM,Hs.p.Sharing,Hs.p.UserSettings,Hs.p.Users,Hs.p.VaultCollections,Hs.p.VaultPasswords,Hs.p.VaultSecureNotes,Hs.p.TeamNudges,Hs.p.RiskDetection,Hs.p.ItemUsage],$s=(e,t)=>{const[n,a]=(e=>{switch(e){case Hs.p.Account:return["team_audit_log_category_account","AccountSettingsOutlined"];case Hs.p.Authentication:return["team_audit_log_category_authentication","ItemLoginOutlined"];case Hs.p.DarkWebMonitoring:return["team_audit_log_category_dark_web_monitoring","FeatureDarkWebMonitoringOutlined"];case Hs.p.Groups:return["team_audit_log_category_groups","GroupOutlined"];case Hs.p.TeamSettings:return["team_audit_log_category_team_settings","SettingsOutlined"];case Hs.p.TeamSettingsSAMLProvisioning:return["team_audit_log_category_team_settings_samlprovisioning","SettingsOutlined"];case Hs.p.TeamSettingsSSO:return["team_audit_log_category_team_settings_sso","SettingsOutlined"];case Hs.p.TeamSettingsSCIM:return["team_audit_log_category_team_settings_scim","SettingsOutlined"];case Hs.p.TeamSettingsSIEM:return["team_audit_log_category_team_settings_siem","SettingsOutlined"];case Hs.p.Sharing:return["team_audit_log_category_sharing","SharedOutlined"];case Hs.p.UserSettings:return["team_audit_log_category_user_settings","SettingsOutlined"];case Hs.p.Users:return["team_audit_log_category_users","UsersOutlined"];case Hs.p.VaultCollections:return["team_audit_log_category_vault_collections","CollectionOutlined"];case Hs.p.VaultPasswords:return["team_audit_log_category_vault_passwords","ItemLoginOutlined"];case Hs.p.VaultSecureNotes:return["team_audit_log_category_vault_securenotes","ItemSecureNoteOutlined"];case Hs.p.TeamNudges:return["team_audit_log_category_team_nudges","FeatureAutomationsOutlined"];case Hs.p.RiskDetection:return["team_audit_log_category_security_monitoring","ItemLoginOutlined"];case Hs.p.ItemUsage:return["team_audit_log_category_item_usage","FeatureAutofillOutlined"];default:return["","SettingsOutlined"]}})(e.category);return{label:n?t(n):"",icon:a}},Ys=Object.values(Hs.z),Ks={USER_INVITED:"team_audit_log_user_invited",USER_REINVITED:"team_audit_log_user_reinvited",USER_REMOVED:"team_audit_log_user_removed",TEAM_CAPTAIN_ADDED:"team_audit_log_team_captain_added",TEAM_CAPTAIN_REMOVED:"team_audit_log_team_captain_removed",GROUP_MANAGER_ADDED:"team_audit_log_group_manager_added",GROUP_MANAGER_REMOVED:"team_audit_log_group_manager_removed",MASTER_PASSWORD_RESET_ACCEPTED:"team_audit_log_master_password_reset_accepted",MASTER_PASSWORD_RESET_REFUSED:"team_audit_log_master_password_reset_refused",BILLING_ADMIN_ADDED:"team_audit_log_billing_admin_added",BILLING_ADMIN_REMOVED:"team_audit_log_billing_admin_removed",USER_GROUP_CREATED:"team_audit_log_user_group_created",USER_GROUP_RENAMED:"team_audit_log_user_group_renamed",USER_GROUP_DELETED:"team_audit_log_user_group_deleted",USER_JOINED_USER_GROUP:"team_audit_log_user_joined_user_group",USER_LEFT_USER_GROUP:"team_audit_log_user_left_user_group",USER_INVITED_TO_USER_GROUP:"team_audit_log_user_invited_to_user_group",USER_DECLINED_INVITE_TO_USER_GROUP:"team_audit_log_user_declined_invite_to_user_group",USER_REMOVED_FROM_USER_GROUP:"team_audit_log_user_removed_from_user_group",SSO_IDP_METADATA_SET:"team_audit_log_sso_idp_metadata_set",SSO_SERVICE_PROVIDER_URL_SET:"team_audit_log_sso_service_provider_url_set",SSO_ENABLED:"team_audit_log_sso_enabled",SSO_DISABLED:"team_audit_log_sso_disabled",DOMAIN_REQUESTED:"team_audit_log_domain_requested",DOMAIN_VALIDATED:"team_audit_log_domain_validated",SENSITIVE_LOGS_ENABLED:"team_audit_log_collect_sensitive_data_audit_logs_enabled",SENSITIVE_LOGS_DISABLED:"team_audit_log_collect_sensitive_data_audit_logs_disabled",TEAM_NAME_CHANGED:"team_audit_log_team_name_changed",NEW_BILLING_PERIOD_CREATED:"team_audit_log_new_billing_period_created",SEATS_ADDED:"team_audit_log_seats_added",CONTACT_EMAIL_CHANGED:"team_audit_log_contact_email_changed",MASTER_PASSWORD_MOBILE_RESET_ENABLED:"team_audit_log_master_password_mobile_reset_enabled",MASTER_PASSWORD_MOBILE_RESET_DISABLED:"team_audit_log_master_password_mobile_reset_disabled",MASTER_PASSWORD_MOBILE_RESET:"team_audit_log_master_password_mobile_reset",MASTER_PASSWORD_CHANGED:"team_audit_log_master_password_changed",MP_TO_VIEW_PASSWORDS_ENABLED:"team_audit_log_mp_to_view_passwords_enabled",MP_TO_VIEW_PASSWORDS_DISABLED:"team_audit_log_mp_to_view_passwords_disabled",TWO_FACTOR_AUTHENTICATION_FAILED_OTP:"team_audit_log_two_factor_authentication_failed_otp",TWO_FACTOR_AUTHENTICATION_FAILED_EMAIL_TOKEN:"team_audit_log_two_factor_authentication_failed_token",TWO_FACTOR_AUTHENTICATION_LOGIN_METHOD_ADDED:"team_audit_log_two_factor_authentication_login_method_added",TWO_FACTOR_AUTHENTICATION_LOGIN_METHOD_REMOVED:"team_audit_log_two_factor_authentication_login_method_removed",BIOMETRIC_SIGN_IN_DISABLED:"team_audit_log_biometric_sign_in_disabled",NITRO_SSO_DOMAIN_PROVISIONED:"team_audit_log_nitro_sso_domain_provisioned",NITRO_SSO_DOMAIN_REMOVED:"team_audit_log_nitro_sso_domain_removed",NITRO_SSO_DOMAIN_VERIFIED:"team_audit_log_nitro_sso_domain_verified",NITRO_SSO_SETUP_STARTED:"team_audit_log_nitro_sso_setup_started",NITRO_USER_PROVISIONING_ACTIVATED:"team_audit_log_nitro_user_provisioning_activated",NITRO_USER_PROVISIONING_DEACTIVATED:"team_audit_log_nitro_user_provisioning_deactivated",NITRO_GROUP_PROVISIONING_ACTIVATED:"team_audit_log_nitro_group_provisioning_activated",NITRO_GROUP_PROVISIONING_DEACTIVATED:"team_audit_log_nitro_group_provisioning_deactivated",NITRO_SIEM_ACTIVATED:"team_audit_log_nitro_siem_activated",NITRO_SIEM_DEACTIVATED:"team_audit_log_nitro_siem_deactivated",NITRO_SIEM_EDITED:"team_audit_log_nitro_siem_edited",DWM_EMAIL_ADDED:"team_audit_log_dwm_email_added",DWM_EMAIL_REMOVED:"team_audit_log_dwm_email_removed",DWM_ALERT_RECEIVED:"team_audit_log_dwm_alert_received",USER_DEVICE_ADDED:"team_audit_log_user_device_added",USER_DEVICE_REMOVED:"team_audit_log_user_device_removed",USER_DEVICE_LOGIN:"team_audit_log_user_device_login",MASTER_PASSWORD_RESET:"team_audit_log_master_password_reset",REQUESTED_ACCOUNT_RECOVERY:"team_audit_log_requested_account_recovery",COMPLETED_ACCOUT_RECOVERY:"team_audit_log_completed_account_recovery",USER_SHARED_CREDENTIAL_WITH_GROUP_FULL_RIGHTS:"team_audit_log_user_shared_credential_with_group_full",USER_SHARED_CREDENTIAL_WITH_EMAIL_FULL_RIGHTS:"team_audit_log_user_shared_credential_with_email_full",USER_SHARED_CREDENTIAL_WITH_EXTERNAL_FULL_RIGHTS:"team_audit_log_user_shared_credential_with_external_full",USER_SHARED_CREDENTIAL_WITH_GROUP_LIMITED_RIGHTS:"team_audit_log_user_shared_credential_with_group_limited",USER_SHARED_CREDENTIAL_WITH_EMAIL_LIMITED_RIGHTS:"team_audit_log_user_shared_credential_with_email_limited",USER_SHARED_CREDENTIAL_WITH_EXTERNAL_LIMITED_RIGHTS:"team_audit_log_user_shared_credential_with_external_limited",USER_SHARED_SECURE_NOTE_WITH_GROUP_FULL_RIGHTS:"team_audit_log_user_shared_secure_note_with_group_full",USER_SHARED_SECURE_NOTE_WITH_EMAIL_FULL_RIGHTS:"team_audit_log_user_shared_secure_note_with_email_full",USER_SHARED_SECURE_NOTE_WITH_EXTERNAL_FULL_RIGHTS:"team_audit_log_user_shared_secure_note_with_external_full",USER_SHARED_SECURE_NOTE_WITH_GROUP_LIMITED_RIGHTS:"team_audit_log_user_shared_secure_note_with_group_limited",USER_SHARED_SECURE_NOTE_WITH_EMAIL_LIMITED_RIGHTS:"team_audit_log_user_shared_secure_note_with_email_limited",USER_SHARED_SECURE_NOTE_WITH_EXTERNAL_LIMITED_RIGHTS:"team_audit_log_user_shared_secure_note_with_external_limited",USER_ACCEPTED_SHARING_INVITE_SECURE_NOTE:"team_audit_log_user_accepted_sharing_invite_secure_note",USER_REJECTED_SHARING_INVITE_SECURE_NOTE:"team_audit_log_user_rejected_sharing_invite_secure_note",USER_ACCEPTED_SHARING_INVITE_CREDENTIAL:"team_audit_log_user_accepted_sharing_invite_credential",USER_REJECTED_SHARING_INVITE_CREDENTIAL:"team_audit_log_user_rejected_sharing_invite_credential",USER_REVOKED_SHARED_CREDENTIAL_GROUP:"team_audit_log_user_revoked_shared_credential_group",USER_REVOKED_SHARED_CREDENTIAL_EMAIL:"team_audit_log_user_revoked_shared_credential_email",USER_REVOKED_SHARED_CREDENTIAL_EXTERNAL:"team_audit_log_user_revoked_shared_credential_external",USER_REVOKED_SHARED_SECURE_NOTE_GROUP:"team_audit_log_user_revoked_shared_secure_note_group",USER_REVOKED_SHARED_SECURE_NOTE_EMAIL:"team_audit_log_user_revoked_shared_secure_note_email",USER_REVOKED_SHARED_SECURE_NOTE_EXTERNAL:"team_audit_log_user_revoked_shared_secure_note_external",USER_PRIVATE_COLLECTION_CREATED:"team_audit_log_user_private_collection_created",USER_PRIVATE_COLLECTION_IMPORTED:"team_audit_log_user_private_collection_imported",USER_PRIVATE_COLLECTION_ADDED_CREDENTIAL:"team_audit_log_user_private_collection_added_credential",USER_PRIVATE_COLLECTION_ADDED_CREDENTIAL_NO_DOMAIN:"team_audit_log_user_private_collection_added_credential_no_domain",USER_PRIVATE_COLLECTION_REMOVED:"team_audit_log_user_private_collection_removed_credential",USER_PRIVATE_COLLECTION_RENAMED:"team_audit_log_user_private_collection_renamed",USER_PRIVATE_COLLECTION_DELETED:"team_audit_log_user_private_collection_deleted",USER_SHARED_COLLECTION_SHARED_WITH_USER:"team_audit_log_user_shared_collection_shared_with_user",USER_SHARED_COLLECTION_SHARED_WITH_GROUP:"team_audit_log_user_shared_collection_shared_with_group",USER_SHARED_COLLECTION_ACCEPTED:"team_audit_log_user_shared_collection_accepted",USER_SHARED_COLLECTION_REJECTED:"team_audit_log_user_shared_collection_rejected",USER_SHARED_COLLECTION_ADDED_CREDENTIAL_ADMIN:"team_audit_log_user_shared_collection_added_credential_admin",USER_SHARED_COLLECTION_ADDED_CREDENTIAL_ADMIN_NO_DOMAIN:"team_audit_log_user_shared_collection_added_credential_admin_no_domain",USER_SHARED_COLLECTION_ADDED_CREDENTIAL_LIMITED:"team_audit_log_user_shared_collection_added_credential_limited",USER_SHARED_COLLECTION_ADDED_CREDENTIAL_LIMITED_NO_DOMAIN:"team_audit_log_user_shared_collection_added_credential_limited_no_domain",USER_SHARED_COLLECTION_REMOVED_CREDENTIAL:"team_audit_log_user_shared_collection_removed_credential",USER_SHARED_COLLECTION_UPDATED_GROUP_ROLES:"team_audit_log_user_shared_collection_group_roles",USER_SHARED_COLLECTION_UPDATED_USER_ROLES:"team_audit_log_user_shared_collection_user_roles",USER_SHARED_COLLECTION_REVOKED_GROUPS:"team_audit_log_user_shared_collection_revoked_groups",USER_SHARED_COLLECTION_REVOKED_USER:"team_audit_log_user_shared_collection_revoked_user",USER_SHARED_COLLECTION_REVOKED_GROUPS_INVITE:"team_audit_log_user_shared_collection_revoked_group_invite",USER_SHARED_COLLECTION_REVOKED_USER_INVITE:"team_audit_log_user_shared_collection_revoked_user_invite",USER_CREATED_CREDENTIAL:"team_audit_log_user_created_credential",USER_MODIFIED_CREDENTIAL:"team_audit_log_user_modified_credential",USER_DELETED_CREDENTIAL:"team_audit_log_user_deleted_credential",USER_IMPORTED_CREDENTIALS:{ONE:"team_audit_log_user_imported_credentials_one",MANY:"team_audit_log_user_imported_credentials_many"},USER_CREATED_SECURE_NOTE:"team_audit_log_user_created_secure_note",USER_MODIFIED_SECURE_NOTE:"team_audit_log_user_modified_secure_note",USER_DELETED_SECURE_NOTE:"team_audit_log_user_deleted_secure_note",NUDGE_EXECUTED:"team_audit_log_nudge_executed",NUDGE_EXECUTED_WITH_FAILURES:"team_audit_log_nudge_executed_with_failures",NUDGE_CONFIGURED:"team_audit_log_nudge_configured",NITRO_INTEGRATION_APP_INSTALLED:"team_audit_log_nitro_integration_app_installed",NITRO_INTEGRATION_APP_UNINSTALLED:"team_audit_log_nitro_integration_app_uninstalled",USER_RECEIVED_NUDGE:"team_audit_log_user_received_nudge",NUDGE_NAME_COMPROMISED_PASSWORDS:"team_audit_log_nudge_name_compromised_passwords",NUDGE_NAME_WEAK_PASSWORDS:"team_audit_log_nudge_name_weak_passwords",MASS_DEPLOYMENT_CONFIGURATION_UPDATED:"team_audit_log_mass_deployment_configuration_updated",USER_TYPED_COMPROMISED_PASSWORD:"team_audit_log_user_typed_compromised_password",USER_TYPED_WEAK_PASSWORD:"team_audit_log_user_typed_weak_password",USER_TYPED_PASSWORD:"team_audit_log_user_typed_password",USER_PERFORMED_AUTOFILL_CREDENTIAL:"team_audit_log_user_performed_autofill",USER_PERFORMED_AUTOFILL_PAYMENT_CARD:"team_audit_log_user_performed_autofill_credit_card",USER_PERFORMED_AUTOFILL_BANK_ACCOUNT:"team_audit_log_user_performed_autofill_bank_account",USER_AUTHENTICATED_WITH_PASSKEY:"team_audit_log_user_authenticated_with_passkey",USER_REVEALED_CREDENTIAL_FIELD:"team_audit_log_user_revealed_credential_field",USER_REVEALED_CREDIT_CARD_FIELD:"team_audit_log_user_revealed_credit_card_field",USER_REVEALED_BANK_ACCOUNT_FIELD:"team_audit_log_user_revealed_bank_account_field",USER_REVEALED_SECURE_NOTE_FIELD:"team_audit_log_user_revealed_secure_note_field",USER_REVEALED_SECRET_FIELD:"team_audit_log_user_revealed_secret_field",ACTIVE:"team_audit_log_active",INACTIVE:"team_audit_log_inactive"},Qs=(e,t)=>{switch(e){case"compromised_passwords":return t(Ks.NUDGE_NAME_COMPROMISED_PASSWORDS);case"weak_passwords":return t(Ks.NUDGE_NAME_WEAK_PASSWORDS)}return e},Js=(e,t)=>{switch(e){case"active":return t(Ks.ACTIVE);case"inactive":return t(Ks.INACTIVE)}return e},eo={[Hs.z.UserInvited]:(e,t)=>t(Ks.USER_INVITED,{email:`**${e?.properties?.target_login}**`}),[Hs.z.UserReinvited]:(e,t)=>t(Ks.USER_REINVITED,{email:`**${e?.properties?.target_login}**`}),[Hs.z.UserRemoved]:(e,t)=>t(Ks.USER_REMOVED,{email:`**${e?.properties?.target_login}**`}),[Hs.z.TeamCaptainAdded]:(e,t)=>t(Ks.TEAM_CAPTAIN_ADDED,{email:`**${e?.properties?.target_login}**`}),[Hs.z.TeamCaptainRemoved]:(e,t)=>t(Ks.TEAM_CAPTAIN_REMOVED,{email:`**${e?.properties?.target_login}**`}),[Hs.z.GroupManagerAdded]:(e,t)=>t(Ks.GROUP_MANAGER_ADDED,{email:`**${e?.properties?.target_login}**`}),[Hs.z.GroupManagerRemoved]:(e,t)=>t(Ks.GROUP_MANAGER_REMOVED,{email:`**${e?.properties?.target_login}**`}),[Hs.z.MasterPasswordResetAccepted]:(e,t)=>t(Ks.MASTER_PASSWORD_RESET_ACCEPTED,{email:`**${e?.properties?.target_login}**`}),[Hs.z.MasterPasswordResetRefused]:(e,t)=>t(Ks.MASTER_PASSWORD_RESET_REFUSED,{email:`**${e?.properties?.target_login}**`}),[Hs.z.BillingAdminAdded]:(e,t)=>t(Ks.BILLING_ADMIN_ADDED,{email:`**${e?.properties?.target_login}**`}),[Hs.z.BillingAdminRemoved]:(e,t)=>t(Ks.BILLING_ADMIN_REMOVED,{email:`**${e?.properties?.target_login}**`}),[Hs.z.UserGroupCreated]:(e,t)=>t(Ks.USER_GROUP_CREATED,{groupName:`**${e.properties?.group_name}**`}),[Hs.z.UserGroupRenamed]:(e,t)=>t(Ks.USER_GROUP_RENAMED,{newGroupName:`**${e.properties?.group_name}**`,oldGroupName:`**${e.properties?.old_group_name}**`}),[Hs.z.UserGroupDeleted]:(e,t)=>t(Ks.USER_GROUP_DELETED,{groupName:`**${e.properties?.group_name}**`}),[Hs.z.UserJoinedUserGroup]:(e,t)=>t(Ks.USER_JOINED_USER_GROUP,{groupName:`**${e.properties?.group_name}**`}),[Hs.z.UserLeftUserGroup]:(e,t)=>t(Ks.USER_LEFT_USER_GROUP,{groupName:`**${e.properties?.group_name}**`}),[Hs.z.UserInvitedToUserGroup]:(e,t)=>t(Ks.USER_INVITED_TO_USER_GROUP,{groupName:`**${e.properties?.group_name}**`,email:`**${e?.properties?.target_login}**`}),[Hs.z.UserDeclinedInviteToUserGroup]:(e,t)=>t(Ks.USER_DECLINED_INVITE_TO_USER_GROUP,{groupName:`**${e.properties?.group_name}**`}),[Hs.z.UserRemovedFromUserGroup]:(e,t)=>t(Ks.USER_REMOVED_FROM_USER_GROUP,{groupName:`**${e.properties?.group_name}**`,email:`**${e?.properties?.target_login}**`}),[Hs.z.DomainRequested]:(e,t)=>t(Ks.DOMAIN_REQUESTED,{domain:`**${e.properties?.domain_url}**`}),[Hs.z.DomainValidated]:(e,t)=>t(Ks.DOMAIN_VALIDATED,{domain:`**${e.properties?.domain_url}**`}),[Hs.z.SensitiveLogsEnabled]:(e,t)=>t(Ks.SENSITIVE_LOGS_ENABLED),[Hs.z.SensitiveLogsDisabled]:(e,t)=>t(Ks.SENSITIVE_LOGS_DISABLED),[Hs.z.SsoIdpMetadataSet]:(e,t)=>t(Ks.SSO_IDP_METADATA_SET),[Hs.z.SsoServiceProviderUrlSet]:(e,t)=>t(Ks.SSO_SERVICE_PROVIDER_URL_SET),[Hs.z.SsoEnabled]:(e,t)=>t(Ks.SSO_ENABLED,e.properties?.hosting?{hosting:e.properties?.hosting}:void 0),[Hs.z.SsoDisabled]:(e,t)=>t(Ks.SSO_DISABLED,e.properties?.hosting?{hosting:e.properties?.hosting}:void 0),[Hs.z.TeamNameChanged]:(e,t)=>t(Ks.TEAM_NAME_CHANGED,{name:`**${e.properties?.name}**`}),[Hs.z.NewBillingPeriodCreated]:(e,t)=>t(Ks.NEW_BILLING_PERIOD_CREATED,{date:`**${t.shortDate((0,Bt.Z)(e.properties?.new_end_date_unix),Kt._T.L)}**`}),[Hs.z.SeatsAdded]:(e,t)=>t(Ks.SEATS_ADDED,{count:`**${e.properties?.seats_added}**`}),[Hs.z.ContactEmailChanged]:(e,t)=>t(Ks.CONTACT_EMAIL_CHANGED,{email:`**${e?.properties?.new_contact_email}**`}),[Hs.z.MasterPasswordMobileResetEnabled]:(e,t)=>t(Ks.MASTER_PASSWORD_MOBILE_RESET_ENABLED,{deviceName:e?.properties?.device_name?`**${e?.properties?.device_name}**`:"mobile"}),[Hs.z.MasterPasswordMobileResetDisabled]:(e,t)=>t(Ks.MASTER_PASSWORD_MOBILE_RESET_DISABLED,{deviceName:e?.properties?.device_name?`**${e?.properties?.device_name}**`:"mobile"}),[Hs.z.MasterPasswordChanged]:(e,t)=>t(Ks.MASTER_PASSWORD_CHANGED),[Hs.z.MpToViewPasswordsEnabled]:(e,t)=>t(Ks.MP_TO_VIEW_PASSWORDS_ENABLED),[Hs.z.MpToViewPasswordsDisabled]:(e,t)=>t(Ks.MP_TO_VIEW_PASSWORDS_DISABLED),[Hs.z.TwoFactorAuthenticationLoginMethodAdded]:(e,t)=>t(Ks.TWO_FACTOR_AUTHENTICATION_LOGIN_METHOD_ADDED),[Hs.z.TwoFactorAuthenticationFailed]:(e,t)=>t("emailToken"===e.properties.two_factor_method?Ks.TWO_FACTOR_AUTHENTICATION_FAILED_EMAIL_TOKEN:Ks.TWO_FACTOR_AUTHENTICATION_FAILED_OTP),[Hs.z.TwoFactorAuthenticationLoginMethodRemoved]:(e,t)=>t(Ks.TWO_FACTOR_AUTHENTICATION_LOGIN_METHOD_REMOVED),[Hs.z.BiometricSignInDisabled]:(e,t)=>t(Ks.BIOMETRIC_SIGN_IN_DISABLED,{deviceName:`**${e?.properties?.device_name}**`}),[Hs.z.NitroSsoSetupStarted]:(e,t)=>t(Ks.NITRO_SSO_SETUP_STARTED),[Hs.z.NitroSsoDomainProvisioned]:(e,t)=>t(Ks.NITRO_SSO_DOMAIN_PROVISIONED,{domain:`**${e?.properties?.domain_url}**`}),[Hs.z.NitroSsoDomainRemoved]:(e,t)=>t(Ks.NITRO_SSO_DOMAIN_REMOVED,{domain:`**${e?.properties?.domain_url}**`}),[Hs.z.NitroSsoDomainVerified]:(e,t)=>t(Ks.NITRO_SSO_DOMAIN_VERIFIED,{domain:`**${e?.properties?.domain_url}**`}),[Hs.z.NitroUserProvisioningActivated]:(e,t)=>t(Ks.NITRO_USER_PROVISIONING_ACTIVATED),[Hs.z.NitroUserProvisioningDeactivated]:(e,t)=>t(Ks.NITRO_USER_PROVISIONING_DEACTIVATED),[Hs.z.NitroGroupProvisioningActivated]:(e,t)=>t(Ks.NITRO_GROUP_PROVISIONING_ACTIVATED),[Hs.z.NitroGroupProvisioningDeactivated]:(e,t)=>t(Ks.NITRO_GROUP_PROVISIONING_DEACTIVATED),[Hs.z.NitroSiemActivated]:(e,t)=>t(Ks.NITRO_SIEM_ACTIVATED,{siemType:`**${e.properties.siem_type}**`}),[Hs.z.NitroSiemDeactivated]:(e,t)=>t(Ks.NITRO_SIEM_DEACTIVATED,{siemType:`**${e.properties.siem_type}**`}),[Hs.z.NitroSiemEdited]:(e,t)=>t(Ks.NITRO_SIEM_EDITED,{siemType:`**${e.properties.siem_type}**`}),[Hs.z.DWMEmailAdded]:(e,t)=>t(Ks.DWM_EMAIL_ADDED,{email:`**${e?.properties?.dark_web_monitoring_email}**`}),[Hs.z.DWMEmailRemoved]:(e,t)=>t(Ks.DWM_EMAIL_REMOVED,{email:`**${e?.properties?.dark_web_monitoring_email}**`}),[Hs.z.DWMAlertReceived]:(e,t)=>t(Ks.DWM_ALERT_RECEIVED,{email:`**${e?.properties?.dark_web_monitoring_email}**`}),[Hs.z.UserDeviceAdded]:(e,t)=>t(Ks.USER_DEVICE_ADDED,{name:`**${e.properties?.device_name}**`}),[Hs.z.UserDeviceRemoved]:(e,t)=>t(Ks.USER_DEVICE_REMOVED,{name:`**${e.properties?.device_name}**`}),[Hs.z.UserDeviceLogin]:(e,t)=>t(Ks.USER_DEVICE_LOGIN,{name:`**${e.properties?.device_name}**`}),[Hs.z.MasterPasswordReset]:(e,t)=>t(Ks.MASTER_PASSWORD_RESET),[Hs.z.RequestedAccountRecovery]:(e,t)=>t(Ks.REQUESTED_ACCOUNT_RECOVERY),[Hs.z.CompletedAccountRecovery]:(e,t)=>t(Ks.COMPLETED_ACCOUT_RECOVERY),[Hs.z.MasterPasswordMobileReset]:(e,t)=>t(Ks.MASTER_PASSWORD_MOBILE_RESET,{deviceName:e?.properties?.device_name?`**${e?.properties?.device_name}**`:"mobile"}),[Hs.z.UserSharedCredentialWithGroup]:(e,t)=>{const n=e;return t("admin"===n.properties.permission?Ks.USER_SHARED_CREDENTIAL_WITH_GROUP_FULL_RIGHTS:Ks.USER_SHARED_CREDENTIAL_WITH_GROUP_LIMITED_RIGHTS,{domain:`**${n.properties.domain_url}**`,group:`**${n.properties.group_name}**`})},[Hs.z.UserSharedCredentialWithEmail]:(e,t)=>{const n=e;return t("admin"===n.properties.permission?Ks.USER_SHARED_CREDENTIAL_WITH_EMAIL_FULL_RIGHTS:Ks.USER_SHARED_CREDENTIAL_WITH_EMAIL_LIMITED_RIGHTS,{domain:`**${n.properties.domain_url}**`,email:`**${n.properties.target_login}**`})},[Hs.z.UserSharedCredentialWithExternal]:(e,t)=>{const n=e;return t("admin"===n.properties.permission?Ks.USER_SHARED_CREDENTIAL_WITH_EXTERNAL_FULL_RIGHTS:Ks.USER_SHARED_CREDENTIAL_WITH_EXTERNAL_LIMITED_RIGHTS,{domain:`**${n.properties.domain_url}**`,email:`**${n.properties.target_login}**`})},[Hs.z.UserSharedSecureNoteWithGroup]:(e,t)=>{const n=e;return t("admin"===n.properties.permission?Ks.USER_SHARED_SECURE_NOTE_WITH_GROUP_FULL_RIGHTS:Ks.USER_SHARED_SECURE_NOTE_WITH_GROUP_LIMITED_RIGHTS,{name:`**${n.properties.item_name}**`,group:`**${n.properties.group_name}**`})},[Hs.z.UserSharedSecureNoteWithEmail]:(e,t)=>{const n=e;return t("admin"===n.properties.permission?Ks.USER_SHARED_SECURE_NOTE_WITH_EMAIL_FULL_RIGHTS:Ks.USER_SHARED_SECURE_NOTE_WITH_EMAIL_LIMITED_RIGHTS,{name:`**${n.properties.item_name}**`,email:`**${n.properties.target_login}**`})},[Hs.z.UserSharedSecureNoteWithExternal]:(e,t)=>{const n=e;return t("admin"===n.properties.permission?Ks.USER_SHARED_SECURE_NOTE_WITH_EXTERNAL_FULL_RIGHTS:Ks.USER_SHARED_SECURE_NOTE_WITH_EXTERNAL_LIMITED_RIGHTS,{name:`**${n.properties.item_name}**`,email:`**${n.properties.target_login}**`})},[Hs.z.UserRevokedSharedCredentialGroup]:(e,t)=>{const n=e;return t(Ks.USER_REVOKED_SHARED_CREDENTIAL_GROUP,{domain:`**${n.properties.domain_url}**`,group:`**${n.properties.group_name}**`})},[Hs.z.UserRevokedSharedCredentialEmail]:(e,t)=>{const n=e;return t(Ks.USER_REVOKED_SHARED_CREDENTIAL_EMAIL,{domain:`**${n.properties.domain_url}**`,email:`**${n.properties.target_login}**`})},[Hs.z.UserRevokedSharedCredentialExternal]:(e,t)=>{const n=e;return t(Ks.USER_REVOKED_SHARED_CREDENTIAL_EXTERNAL,{domain:`**${n.properties.domain_url}**`,email:`**${n.properties.target_login}**`})},[Hs.z.UserRevokedSharedSecureNoteGroup]:(e,t)=>{const n=e;return t(Ks.USER_REVOKED_SHARED_SECURE_NOTE_GROUP,{name:`**${n.properties.item_name}**`,group:`**${n.properties.group_name}**`})},[Hs.z.UserRevokedSharedSecureNoteEmail]:(e,t)=>{const n=e;return t(Ks.USER_REVOKED_SHARED_SECURE_NOTE_EMAIL,{name:`**${n.properties.item_name}**`,email:`**${n.properties.target_login}**`})},[Hs.z.UserRevokedSharedSecureNoteExternal]:(e,t)=>{const n=e;return t(Ks.USER_REVOKED_SHARED_SECURE_NOTE_EXTERNAL,{name:`**${n.properties.item_name}**`,email:`**${n.properties.target_login}**`})},[Hs.z.UserAcceptedSharingInviteSecureNote]:(e,t)=>t(Ks.USER_ACCEPTED_SHARING_INVITE_SECURE_NOTE,{name:`**${e.properties.item_name}**`}),[Hs.z.UserRejectedSharingInviteSecureNote]:(e,t)=>t(Ks.USER_REJECTED_SHARING_INVITE_SECURE_NOTE,{name:`**${e.properties.item_name}**`}),[Hs.z.UserAcceptedSharingInviteCredential]:(e,t)=>t(Ks.USER_ACCEPTED_SHARING_INVITE_CREDENTIAL,{domain:`**${e.properties.domain_url}**`}),[Hs.z.UserRejectedSharingInviteCredential]:(e,t)=>t(Ks.USER_REJECTED_SHARING_INVITE_CREDENTIAL,{domain:`**${e.properties.domain_url}**`}),[Hs.z.UserCreatedCollection]:(e,t)=>t(Ks.USER_PRIVATE_COLLECTION_CREATED,{user:`${e.properties.author_login}`,name:`**${e.properties.collection_name}**`}),[Hs.z.UserImportedCollection]:(e,t)=>t(Ks.USER_PRIVATE_COLLECTION_IMPORTED,{user:`${e.properties.author_login}`,number:`${e.properties.credential_count}`,collection:`**${e.properties.collection_name}**`}),[Hs.z.UserAddedCredentialToCollection]:(e,t)=>e.properties.domain_url?t(Ks.USER_PRIVATE_COLLECTION_ADDED_CREDENTIAL,{user:`${e.properties.author_login}`,domain:`**${e.properties.domain_url}**`,name:`**${e.properties.collection_name}**`}):t(Ks.USER_PRIVATE_COLLECTION_ADDED_CREDENTIAL_NO_DOMAIN,{user:`${e.properties.author_login}`,name:`**${e.properties.collection_name}**`}),[Hs.z.UserRemovedCredentialFromCollection]:(e,t)=>t(Ks.USER_PRIVATE_COLLECTION_REMOVED,{user:`${e.properties.author_login}`,domain:`**${e.properties.domain_url}**`,name:`**${e.properties.collection_name}**`}),[Hs.z.UserRenamedCollection]:(e,t)=>t(Ks.USER_PRIVATE_COLLECTION_RENAMED,{user:`${e.properties.author_login}`,old:`**${e.properties.old_collection_name}**`,new:`**${e.properties.collection_name}**`}),[Hs.z.UserDeletedCollection]:(e,t)=>t(Ks.USER_PRIVATE_COLLECTION_DELETED,{user:`${e.properties.author_login}`,name:`**${e.properties.collection_name}**`}),[Hs.z.UserSharedCollectionWithUser]:(e,t)=>t(Ks.USER_SHARED_COLLECTION_SHARED_WITH_USER,{user:`${e.properties.author_login}`,name:`**${e.properties.collection_name}**`,role:`${e.properties.permission}`,email:`${e.properties.target_login}`}),[Hs.z.UserSharedCollectionWithGroup]:(e,t)=>t(Ks.USER_SHARED_COLLECTION_SHARED_WITH_GROUP,{user:`${e.properties.author_login}`,name:`**${e.properties.collection_name}**`,role:`${e.properties.permission}`,group:`${e.properties.group_name}`}),[Hs.z.UserAcceptedCollection]:(e,t)=>t(Ks.USER_SHARED_COLLECTION_ACCEPTED,{user:`${e.properties.author_login}`,name:`**${e.properties.collection_name}**`}),[Hs.z.UserRejectedCollection]:(e,t)=>t(Ks.USER_SHARED_COLLECTION_REJECTED,{user:`${e.properties.author_login}`,name:`**${e.properties.collection_name}**`}),[Hs.z.UserAddedItemToCollection]:(e,t)=>{const n="USER_SHARED_COLLECTION_ADDED_CREDENTIAL"+("admin"===e.properties.permission?"_ADMIN":"_LIMITED");return e.properties.domain_url?t(Ks[n],{user:`${e.properties.author_login}`,domain:`**${e.properties.domain_url}**`,rights:`${e.properties.permission}`,name:`**${e.properties.collection_name}**`}):t(Ks[n+"_NO_DOMAIN"],{user:`${e.properties.author_login}`,rights:`${e.properties.permission}`,name:`**${e.properties.collection_name}**`})},[Hs.z.UserRemovedItemFromCollection]:(e,t)=>t(Ks.USER_SHARED_COLLECTION_REMOVED_CREDENTIAL,{user:`${e.properties.author_login}`,domain:`**${e.properties.domain_url}**`,name:`**${e.properties.collection_name}**`}),[Hs.z.UserUpdatedGroupRoleInCollection]:(e,t)=>t(Ks.USER_SHARED_COLLECTION_UPDATED_GROUP_ROLES,{user:`${e.properties.author_login}`,group:`**${e.properties.group_name}**`,role1:`${e.properties.old_permission}`,role2:`${e.properties.permission}`,name:`**${e.properties.collection_name}**`}),[Hs.z.UserUpdatedUserRoleInCollection]:(e,t)=>t(Ks.USER_SHARED_COLLECTION_UPDATED_USER_ROLES,{user:`${e.properties.author_login}`,email:`**${e.properties.group_name}**`,role1:`${e.properties.old_permission}`,role2:`${e.properties.permission}`,name:`**${e.properties.collection_name}**`}),[Hs.z.UserRevokedGroupFromCollection]:(e,t)=>t(Ks.USER_SHARED_COLLECTION_REVOKED_GROUPS,{user:`${e.properties.author_login}`,name:`**${e.properties.collection_name}**`,group:`**${e.properties.group_name}**`}),[Hs.z.UserRevokedUserFromCollection]:(e,t)=>t(Ks.USER_SHARED_COLLECTION_REVOKED_USER,{user:`${e.properties.author_login}`,name:`**${e.properties.collection_name}**`,email:`**${e.properties.target_login}**`}),[Hs.z.UserRenamedSharedCollection]:(e,t)=>t(Ks.USER_PRIVATE_COLLECTION_RENAMED,{user:`${e.properties.author_login}`,old:`**${e.properties.old_collection_name}**`,new:`**${e.properties.collection_name}**`}),[Hs.z.UserCreatedCredential]:(e,t)=>t(Ks.USER_CREATED_CREDENTIAL,{domain:`**${e.properties.domain_url}**`}),[Hs.z.UserModifiedCredential]:(e,t)=>t(Ks.USER_MODIFIED_CREDENTIAL,{domain:`**${e.properties.domain_url}**`}),[Hs.z.UserDeletedCredential]:(e,t)=>t(Ks.USER_DELETED_CREDENTIAL,{domain:`**${e.properties.domain_url}**`}),[Hs.z.UserImportedCredentials]:(e,t)=>t(e.properties.import_count>1?Ks.USER_IMPORTED_CREDENTIALS.MANY:Ks.USER_IMPORTED_CREDENTIALS.ONE,{importCount:`**${e.properties.import_count}**`}),[Hs.z.UserCreatedSecureNote]:(e,t)=>t(Ks.USER_CREATED_SECURE_NOTE,{name:`**${e.properties.item_name}**`}),[Hs.z.UserModifiedSecureNote]:(e,t)=>t(Ks.USER_MODIFIED_SECURE_NOTE,{name:`**${e.properties.item_name}**`}),[Hs.z.UserDeletedSecureNote]:(e,t)=>t(Ks.USER_DELETED_SECURE_NOTE,{name:`**${e.properties.item_name}**`}),[Hs.z.NudgeExecuted]:(e,t)=>{const n=e,a=Qs(n.properties.nudge_name,t);return t(n.properties.failures>0?Ks.NUDGE_EXECUTED_WITH_FAILURES:Ks.NUDGE_EXECUTED,{nudge_name:`**${a}**`,successes:`**${n.properties.successes}**`,failures:`**${n.properties.failures}**`})},[Hs.z.NudgeConfigured]:(e,t)=>{const n=e,a=Qs(n.properties.nudge_name,t),i=Js(n.properties.status,t);return t(Ks.NUDGE_CONFIGURED,{nudge_name:`**${a}**`,status:`**${i}**`})},[Hs.z.NitroIntegrationAppInstalled]:(e,t)=>t(Ks.NITRO_INTEGRATION_APP_INSTALLED,{integration_app:`**${e.properties.integration_app}**`}),[Hs.z.NitroIntegrationAppUninstalled]:(e,t)=>t(Ks.NITRO_INTEGRATION_APP_UNINSTALLED,{integration_app:`**${e.properties.integration_app}**`}),[Hs.z.UserReceivedNudge]:(e,t)=>{const n=Qs(e.properties.nudge_received,t);return t(Ks.USER_RECEIVED_NUDGE,{nudge_received:`**${n}**`})},[Hs.z.MassDeploymentConfigurationUpdated]:(e,t)=>{const n=Js(e.properties.status,t);return t(Ks.MASS_DEPLOYMENT_CONFIGURATION_UPDATED,{status:`**${n}**`})},[Hs.z.UserTypedCompromisedPassword]:(e,t)=>t(Ks.USER_TYPED_COMPROMISED_PASSWORD,{domain_url:`**${e.properties?.domain_url}**`}),[Hs.z.UserTypedWeakPassword]:(e,t)=>t(Ks.USER_TYPED_WEAK_PASSWORD,{domain_url:`**${e.properties?.domain_url}**`}),[Hs.z.UserTypedPassword]:(e,t)=>{const{properties:{domain_url:n,health_status:a}}=e;return t("compromised"===a?Ks.USER_TYPED_COMPROMISED_PASSWORD:Ks.USER_TYPED_WEAK_PASSWORD,{domain_url:`**${n}**`})},[Hs.z.UserPerformedAutofillCredential]:(e,t)=>{const{properties:{credential_login:n,credential_domain:a,autofilled_domain:i}}=e;return t(Ks.USER_PERFORMED_AUTOFILL_CREDENTIAL,{credential_login:`**${n}**`,credential_domain:`**${a}**`,autofilled_domain:`**${i}**`})},[Hs.z.UserPerformedAutofillPayment]:(e,t)=>{const{properties:{item_name:n,item_type:a,autofilled_domain:i}}=e;return t("bank_account"===a?Ks.USER_PERFORMED_AUTOFILL_BANK_ACCOUNT:Ks.USER_PERFORMED_AUTOFILL_PAYMENT_CARD,{item_name:`**${n}**`,item_type:`**${a}**`,autofilled_domain:`**${i}**`})},[Hs.z.UserAuthenticatedWithPasskey]:(e,t)=>{const{properties:{passkey_domain:n,current_domain:a,credential_login:i}}=e;return t(Ks.USER_AUTHENTICATED_WITH_PASSKEY,{credential_login:`**${i}**`,passkey_domain:`**${n}**`,current_domain:`**${a}**`})},[Hs.z.UserRevealedCredentialField]:(e,t)=>{const{properties:{credential_domain:n,credential_login:a,field:i}}=e;return t(Ks.USER_REVEALED_CREDENTIAL_FIELD,{field:`**${i}**`,credential_login:`**${a}**`,credential_domain:`**${n}**`})},[Hs.z.UserRevealedCreditCardField]:(e,t)=>{const{properties:{name:n,field:a}}=e;return t(Ks.USER_REVEALED_CREDIT_CARD_FIELD,{field:`**${a}**`,name:`**${n}**`})},[Hs.z.UserRevealedBankAccountField]:(e,t)=>{const{properties:{name:n,field:a}}=e;return t(Ks.USER_REVEALED_BANK_ACCOUNT_FIELD,{field:`**${a}**`,name:`**${n}**`})},[Hs.z.UserRevealedSecret]:(e,t)=>{const{properties:{name:n}}=e;return t(Ks.USER_REVEALED_SECRET_FIELD,{name:`**${n}**`})},[Hs.z.UserRevealedSecureNote]:(e,t)=>{const{properties:{name:n}}=e;return t(Ks.USER_REVEALED_SECURE_NOTE_FIELD,{name:`**${n}**`})}},to=(e,t)=>Ys.includes(e.log_type)?eo[e.log_type](e,t):"",no=Object.values(Hs.z);var ao=n(54760);const io=Object.values(Hs.z),ro="team_activity_list_head_admin",so="team_activity_list_head_action",oo="team_activity_list_head_time_csv";var lo;const co=({progressPercent:e})=>{const{translate:t}=(0,g.Z)(),n=Math.min(Math.max(e,0),100);return(0,f.BX)(f.HY,{children:[(0,f.BX)("div",{sx:{gap:"8px",height:"16px",display:"flex",flexDirection:"row",flexWrap:"nowrap",alignItems:"center"},children:[(0,f.tZ)(o.bG,{percentage:n,size:"small"}),100===n?lo||(lo=(0,f.tZ)(o.JO,{size:"small",name:"FeedbackSuccessFilled",color:"ds.text.positive.quiet"})):null]}),(0,f.tZ)(o.nv,{textStyle:"ds.body.helper.regular",color:"ds.text.neutral.quiet",sx:{marginTop:"4px"},children:t("team_activity_download_modal_progress",{progressPercentage:n})})]})},_o=({isOpen:e,areLogsLoading:t,hasMoreLogs:n,logs:a,loadMoreLogs:i,onClose:s})=>{const[c,d]=(0,r.useState)(0),{translate:_}=(0,g.Z)(),{showToast:u}=(0,o.pm)(),p=()=>{s(),d(0)};return(0,r.useEffect)((()=>{if(!e||t)return;if(n)return d(c<80?c+20:c),void i(1e3);d(100);const r=((e,t,n=!1)=>{const a=(n?[t(ro),t("team_activity_list_head_category"),t(so),t(oo)]:[t(ro),t(so),t(oo)]).join(",")+"\n",i=e.filter((e=>io.includes(e.log_type))).map((e=>{var a;const i=null!=(a=e.properties?.author_login)?a:"",r=to(e,t).replace(/\*\*/g,"").replace(/[“”]/g,'"'),{label:s}=$s(e,t),o=new Date(e.date_time).toISOString(),l=`${o.substr(0,10)} ${o.substr(11,8)}`;return n?`${i},${s},${r},${l}`:`${i},${r},${l}`}));return(0,m.Kz)(new l.UserDownloadAuditLogsDataEvent({flowStep:l.FlowStep.Complete,auditLogCount:i.length})),a+i.join("\n")})(a,_,!0);try{(0,ao.S)(["\ufeff",r],"dashlane-activity-export.csv","text/csv;charset=utf-8"),setTimeout(p,2e3)}catch(e){u({mood:"danger",description:_("_common_generic_error")}),(0,m.Kz)(new l.UserDownloadAuditLogsDataEvent({flowStep:l.FlowStep.Error,auditLogDownloadError:l.AuditLogDownloadError.NoCsv}))}}),[e,n,t,a]),(0,f.tZ)("div",{children:(0,f.tZ)(o.Vq,{isOpen:e,closeActionLabel:_("_common_dialog_dismiss_button"),onClose:p,title:_("team_activity_download_modal_title"),children:(0,f.BX)("div",{sx:{maxHeight:"fit-content",overflowX:"hidden",overflowY:"auto"},children:[(0,f.tZ)(co,{progressPercent:c}),(0,f.tZ)(o.nv,{textStyle:"ds.body.standard.regular",color:"ds.text.neutral.quiet",sx:{margin:"16px 0"},children:_("team_activity_download_modal_body")}),(0,f.tZ)(o.ke,{mood:"neutral",size:"small",title:_("team_activity_download_modal_warning")})]})})})},uo=e=>t=>{!e||"Enter"!==t.key&&" "!==t.key||(e(),t.preventDefault())},mo={padding:"16px 0 16px 16px",textAlign:"left",fontSize:"12px",fontWeight:"600",verticalAlign:"middle",whiteSpace:"break-spaces",textTransform:"uppercase",cursor:"default"},po=({onClick:e,sortOrder:t,colSpan:n,tooltipLabel:a,headerLabel:i,headerElement:s})=>{const[l,c]=(0,r.useState)(!1);return(0,f.tZ)("th",{scope:"col",role:"columnheader",colSpan:n,tabIndex:0,"aria-sort":(d=t,"asc"===d?"ascending":"desc"===d?"descending":"none"),onClick:e,onMouseEnter:()=>c(!0),onMouseLeave:()=>c(!1),onFocus:()=>c(!0),onBlur:()=>c(!1),onKeyDown:uo(e),sx:mo,children:(0,f.BX)("div",{sx:{display:"flex",height:"100%",maxWidth:"140px",alignItems:"center"},children:[s||null,a?(0,f.tZ)(o.u,{content:a,isOpen:l,children:(0,f.tZ)("span",{sx:{marginTop:"-5px",paddingTop:"5px",minWidth:0,whiteSpace:"break-spaces"},children:i})}):(0,f.tZ)("span",{sx:{minWidth:0,whiteSpace:"break-spaces",overflow:"hidden",textOverflow:"ellipsis"},children:i}),(0,f.tZ)("div",{sx:{width:"10px"},children:t?(0,f.tZ)(o.JO,{sx:{ml:"4px"},name:"desc"===t?"CaretDownOutlined":"CaretUpOutlined",size:"small"}):null})]})});var d},go=({headerElement:e,colSpan:t,headerLabel:n,tooltipLabel:a})=>(0,f.BX)("th",{colSpan:t,sx:mo,children:[e||null,a?(0,f.tZ)(o.u,{content:a,children:(0,f.tZ)("span",{sx:{minWidth:0,whiteSpace:"break-spaces"},children:n})}):(0,f.tZ)("span",{sx:{minWidth:0,whiteSpace:"break-spaces"},children:n})]}),ho=({columns:e,sxProps:t})=>(0,f.tZ)("thead",{sx:t,children:(0,f.tZ)("tr",{"aria-rowindex":1,sx:{color:"ds.text.neutral.quiet"},children:e.map((e=>e.onClick?(0,f.tZ)(po,{...e},e.headerKey):(0,f.tZ)(go,{...e},e.headerKey)))})}),yo=({children:e,withCategories:t=!1})=>{const{translate:n}=(0,g.Z)(),a=[{headerLabel:n("team_activity_list_head_admin"),headerKey:"admin"},{headerLabel:n("team_activity_list_head_category"),headerKey:"category"},{headerLabel:n("team_activity_list_head_action"),headerKey:"action"},{headerLabel:n("team_activity_list_head_time"),headerKey:"time"}].filter((e=>"category"!==e.headerKey||t));return(0,f.BX)("table",{sx:{width:"100%",lineHeight:1.5,textAlign:"left"},children:[(0,f.tZ)(ho,{columns:a,sxProps:{backgroundColor:"ds.container.agnostic.neutral.quiet"}}),(0,f.tZ)("tbody",{sx:Us.TABLE_BODY,children:e},"table-body")]})};var bo=n(32814),xo=n(53506);const So=({text:e})=>{if(!e)return null;const t=e.split("**");return 1===t.length?(0,f.tZ)("span",{children:e}):(0,f.tZ)("span",{children:t.map(((e,t)=>t%2==1?(0,f.tZ)("strong",{children:e},`${e}-${t}`):e))})},fo={LOGIN_CELL:{display:"flex",padding:"15px 16px 14px"},LOGIN_TEXT:{height:"31px",marginLeft:"16px",maxWidth:"300px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}},vo=({login:e,categoryIcon:t,categoryLabel:n,activityDescription:a,timestampMs:i})=>(0,f.BX)("tr",{children:[(0,f.BX)("td",{sx:fo.LOGIN_CELL,children:[(0,f.tZ)(bo.q,{email:e,size:30}),(0,f.tZ)("div",{id:"user-email",sx:fo.LOGIN_TEXT,children:(0,f.tZ)(o.nv,{color:"ds.text.neutral.catchy",textStyle:"ds.body.standard.regular",children:e})})]}),t&&n?(0,f.tZ)("td",{children:(0,f.tZ)(o.Vp,{leadingDecoration:t,label:n})}):null,(0,f.tZ)("td",{children:(0,f.tZ)(So,{text:a})}),(0,f.tZ)("td",{className:"dateCell--JBqTpeYwB5",children:(0,f.tZ)(xo.v,{date:new Date(i)})})]}),Co=(0,r.memo)(vo);var Eo=n(9225),Zo=n(57571);let To=function(e){return e.LAST_DAY="last_day",e.LAST_WEEK="last_week",e.LAST_MONTH="last_month",e.LAST_3_MONTHS="last_3_months",e.LAST_6_MONTHS="last_6_months",e.LAST_YEAR="last_year",e.YEAR_TO_DATE="year_to_date",e}({});const Do=864e5,ko=e=>{const t=Date.now(),n=t-e*Do;return{startDate:Math.floor(n/1e3),endDate:Math.ceil(t/1e3)}},Io=e=>{switch(e){case To.LAST_DAY:return ko(1);case To.LAST_WEEK:return ko(7);case To.LAST_MONTH:return ko(30);case To.LAST_3_MONTHS:return ko(90);case To.LAST_6_MONTHS:return ko(180);case To.LAST_YEAR:return ko(360);case To.YEAR_TO_DATE:return(()=>{const e=new Date,t=new Date(e.getFullYear(),0,1),n=Math.floor((e.getTime()-t.getTime())/Do);return ko(n)})()}};var Ao=n(76376);const No=(e,t)=>[e.url,...e.subPaths?e.subPaths.map((t=>`${e.url}${t}`)):[]].includes(t),wo={TITLE:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"32px"},TAB:{width:"auto",whiteSpace:"nowrap",color:"ds.text.neutral.standard !important",backgroundColor:"ds.container.expressive.neutral.supershy.idle !important","&:hover, &:active":{backgroundColor:"ds.container.expressive.neutral.supershy.hover !important"}},DISABLED_TAB:{pointerEvents:"none",color:"ds.text.oddity.disabled"},SELECTED_TAB:{backgroundColor:"ds.container.expressive.neutral.supershy.active !important"}},Oo=({title:e,titleBadge:t,subtitle:n,tabs:a=[],extraInfo:r,hasInfobox:s})=>{const{pathname:l}=(0,i.TH)();return e||a.length?(0,f.BX)("nav",{className:s?void 0:"tabMenuContainer--y2MfbHSdck",children:[e?(0,f.tZ)(o.X6,{as:"h1",textStyle:"ds.title.section.large",color:"ds.text.neutral.catchy",children:(0,f.BX)("span",{sx:wo.TITLE,children:[e,t]})}):null,n?(0,f.tZ)(o.nv,{as:"h2",textStyle:"ds.body.standard.regular",color:"ds.text.neutral.quiet",sx:{marginBottom:"32px",a:{fontWeight:600}},children:n}):null,null!=r?r:null,a.length?(0,f.tZ)(B.G8v,{children:a.map((e=>(0,f.tZ)(B.h2L,{label:e.label,notification:e.notifications,selected:No(e,l),sx:(0,o.jM)([wo.TAB,e.isDisabled?wo.DISABLED_TAB:{},No(e,l)?wo.SELECTED_TAB:{}]),as:t=>(0,f.tZ)(i.OL,{to:e.url,...t})},e.label)))}):null]}):null},Ro=()=>{const{translate:e}=(0,g.Z)(),t=(0,G.U)(),n=`${ae.ub}?plan=business&subCode=${null!=t?t:""}`;return(0,f.tZ)(o.ke,{title:e("team_activity_business_infobox_title"),description:e("team_activity_business_infobox_description"),size:"large",actions:[(0,f.tZ)(o.zx,{as:"a",href:n,rel:"noopener noreferrer",target:"_blank",onClick:()=>{(0,m.Kz)(new l.UserClickEvent({clickOrigin:l.ClickOrigin.BannerActivityLogPaywall,button:l.Button.UpgradeBusinessTier}))},children:e("team_account_teamplan_plan_buy_dashlane")},"buyDashlane")],sx:{marginBottom:"32px"}})},Lo=()=>{const{translate:e}=(0,g.Z)(),t=(0,F.u)(Rr.t);return(0,f.tZ)(o.ke,{title:e("team_activity_logs_infobox_title"),description:e("team_activity_logs_infobox_description"),size:"large",actions:[(0,f.tZ)(o.zx,{intensity:"quiet",onClick:()=>{t.markActivityLogsInfoboxSeen()},children:e("team_activity_logs_infobox_confirm")},"dismiss")],sx:{marginBottom:"32px"}})};var Mo,Bo;const Po=({title:e})=>{const{translate:t}=(0,g.Z)(),{routes:n}=(0,Ao.Xo)(),a=(0,s.qr)({queryConfig:{query:fe.C.getAccountRecoveryRequestCount},liveConfig:{live:fe.C.liveAccountRecoveryRequestCount}},[]),i=(0,we.h)(),r=(0,Ms.S)(),o=(()=>{const e=(0,Ms.S)(),t=(0,re.C)(),n=(0,c.k)(Rr.t,"hasSeenActivityLogsInfobox"),a=(0,Ee.o)("monetization_extension_activity_logs_repackage"),i=(0,Ee.o)("monetization_extension_trial_activity_logs"),r=!e?.activityLog.enabled;if(!t||n.status!==s.rq.Success)return null;const o=a&&r&&!n.data,l=i&&t.isFreeTrial?Mo||(Mo=(0,f.tZ)(Ro,{})):o?Bo||(Bo=(0,f.tZ)(Lo,{})):void 0;return{activityInfobox:l,hasInfobox:!!l}})(),l=!r?.activityLog.enabled,d=a.status===s.rq.Success&&a.data,_=l?t("team_activity_paywall_header"):t.markup("team_activity_header_subtitle_markup",{},{linkTarget:"_blank"});return(0,f.tZ)(Oo,{title:e,subtitle:_,tabs:(()=>{const e=[];return e.push({label:t("team_activity_header_tab_activity_logs"),url:`${n.teamActivityRoutePath}/recent`}),i.status===s.rq.Success&&i.data&&e.push({label:t("team_activity_header_tab_mpr_requests"),url:`${n.teamActivityRoutePath}/requests`,notifications:d||0}),e})(),extraInfo:o?.activityInfobox,hasInfobox:o?.hasInfobox})},Uo=(0,r.memo)(Po),zo=({header:e,children:t})=>(0,f.BX)("div",{sx:{display:"flex",flexDirection:"column",padding:"32px",gap:"16px"},children:[e,t]}),Xo={ACTIVITY_PANEL:{display:"inline-block",backgroundColor:"ds.container.agnostic.neutral.supershy",padding:"24px 32px",borderRadius:"8px",border:"1px solid ds.border.neutral.quiet.idle",flex:"1"}},qo=({isLoading:e,children:t})=>{const{translate:n}=(0,g.Z)();return(0,f.tZ)(zo,{header:(0,f.tZ)(Uo,{title:n("team_activity_header_title")}),children:e?(0,f.tZ)(Ci.Z,{containerStyle:{minHeight:240}}):(0,f.tZ)("div",{sx:Xo.ACTIVITY_PANEL,children:t})})},jo=({startDownload:e,areFiltersLocked:t,userFilter:n,handleChangeUser:a})=>{const{translate:i}=(0,g.Z)();return(0,f.BX)("div",{sx:{display:"flex",justifyContent:"space-between",marginBottom:"16px"},children:[(0,f.tZ)(o.Um,{label:i("team_activity_filters_label_user_login"),onChange:a,value:n,sx:{width:"350px"}}),(0,f.tZ)(o.zx,{onClick:e,disabled:t,layout:"iconLeading",icon:"DownloadOutlined",children:i("team_activity_download_button")})]})};var Go;const Fo=({activityCategoryFilter:e,activityTypeFilter:t,areFiltersLocked:n,domainFilter:a,handleApplyFilter:i,handleChangeActivityCategory:r,handleChangeActivityType:s,handleChangeCredential:l,handleChangeDatePeriod:c,handleClearFilters:d,periodFilter:_,sortedTranslatedCategories:u})=>{const{translate:m}=(0,g.Z)();return(0,f.BX)("div",{sx:{display:"flex",flexDirection:"column",backgroundColor:"ds.container.agnostic.neutral.quiet",borderRadius:"8px",padding:"24px",gap:"16px"},children:[Go||(Go=(0,f.tZ)(o.nv,{textStyle:"ds.body.helper.regular",children:"Filter by"})),(0,f.BX)("div",{sx:{display:"grid",gap:"24px",justifyContent:"space-between",gridTemplateColumns:"repeat(4, calc(25% - 20px))"},children:[(0,f.tZ)(o.qo,{label:m("team_activity_filters_label_credential"),disabled:n,onChange:l,value:a}),(0,f.tZ)(o.mg,{label:m("team_activity_filters_label_category"),disabled:n,onChange:r,value:e[0],children:u.map((({category:e,translatedCategory:t})=>(0,f.tZ)(o.$m,{value:e,children:t},`select_option_${e}`)))}),(0,f.tZ)(o.mg,{label:m("team_activity_filters_label_type"),disabled:n,onChange:s,value:t[0],children:Ys.map((e=>(0,f.tZ)(o.$m,{value:e,children:`team_audit_log_activity_${e}`},`select_option_${e}`)))}),(0,f.tZ)(o.mg,{label:m("team_activity_filters_label_date"),disabled:n,onChange:c,value:_,children:Object.values(To).map((e=>(0,f.tZ)(o.$m,{value:e,children:m(`team_audit_log_date_range_${e}`)},`select_option_${e}`)))})]}),(0,f.BX)("div",{sx:{display:"flex",flexDirection:"row",gap:"8px"},children:[(0,f.tZ)(o.zx,{mood:"brand",onClick:i,disabled:n,children:m("team_activity_filters_action_apply")}),(0,f.tZ)(o.zx,{mood:"neutral",intensity:"quiet",layout:"labelOnly",onClick:d,disabled:n,children:m("team_activity_filters_action_clear")})]})]})},Vo=({applyFilters:e,startDownload:t,list:n,isLoading:a,setDateRange:i,sortedTranslatedCategories:s,initialCategoryFilters:o=[]})=>{const[l,c]=(0,r.useState)(""),[d,_]=(0,r.useState)(""),[u,m]=(0,r.useState)(o),[p,g]=(0,r.useState)([]),[h,y]=(0,r.useState)(To.LAST_WEEK),b=0===n.length&&a;return(0,f.BX)("div",{sx:{marginBottom:"16px"},children:[(0,f.tZ)(jo,{handleChangeUser:({target:{value:e}})=>c(e),userFilter:l,startDownload:t,areFiltersLocked:b}),(0,f.tZ)(Fo,{activityCategoryFilter:u,activityTypeFilter:p,areFiltersLocked:b,domainFilter:d,handleApplyFilter:()=>{i(Io(h));const t={login:l,domain:d,categories:u,logTypes:p},n=Object.entries(t).reduce(((e,[t,n])=>n.length?e?{...e,[t]:n}:{[t]:n}:e),void 0);e(n)},handleChangeActivityCategory:e=>m([e]),handleChangeActivityType:e=>g([e]),handleChangeCredential:({target:{value:e}})=>_(e),handleChangeDatePeriod:e=>{y(e)},handleClearFilters:()=>{c(""),_(""),m([]),g([])},periodFilter:h,sortedTranslatedCategories:s})]})};var Ho,Wo,$o,Yo;const Ko=()=>{const{translate:e}=(0,g.Z)(),t=(0,r.useRef)(null),n=(0,r.useRef)(null),{search:a}=(0,i.TH)(),s=(0,Jr.parse)(a)?.categoryFilters,[d,_]=(0,r.useState)(Io(To.LAST_WEEK)),{list:u,hasMore:p,isLoading:h,hasError:y,loadMore:b,applyFilters:x}=((e,t,n)=>{const[a,i]=(0,r.useState)(!1),[s,o]=(0,r.useState)(n),{initiateActivityLogsRetrieval:l,loadNextActivityLogs:d}=(0,F.u)(Eo.g),{data:_,status:u}=(0,c.k)(Eo.g,"activityLogs");(0,r.useEffect)((()=>{a||(l({startDate:e,endDate:t,filters:s,target:"table"}),i(!0))}),[t,s,a,e]);const m=u===Ze.rq.Success&&_.hasMoreData,p=u===Ze.rq.Success?_.logs:[],g=u!==Ze.rq.Success||_.status===Zo.Q.LOADING||m&&0===_.logs.length;return{list:p,hasMore:m,isLoading:!a||g,hasError:u===Ze.rq.Error||"ERROR"===_?.status,loadMore:e=>d({maxResults:e,target:"table"}),applyFilters:e=>{o(e),i(!1)}}})(d.startDate,d.endDate,s?{categories:[s]}:void 0);(0,Bs.M)({hasMore:p,scrollContainerRef:t,bottomRef:n,loadMore:b});const S=h&&!u.length,v=h&&u.length,[C,E]=(0,r.useState)(!1),Z=(0,ta.V)(),T=(0,r.useCallback)((()=>{E(!1),(0,m.Nc)(l.PageView.TacActivityList)}),[]),D=u.map((t=>((e,t)=>{var n;return no.includes(e.log_type)?{uuid:e.uuid,date:new Date(e.date_time),timestampMs:e.date_time,category:$s(e,t),activityDescription:to(e,t),userLogin:null!=(n=e.properties?.author_login)?n:""}:null})(t,e))).filter((e=>null!==e)),k=Ws.map((t=>({category:t,translatedCategory:e(`team_audit_log_category_${t}`)}))).sort(((e,t)=>e.translatedCategory<t.translatedCategory?-1:1));return(0,f.BX)(qo,{isLoading:!1,children:[(0,f.BX)("div",{className:"container--XdLBgpl4YX",ref:t,children:[(0,f.tZ)(Vo,{applyFilters:x,startDownload:()=>{E(!0)},list:u,isLoading:h,setDateRange:_,sortedTranslatedCategories:k,initialCategoryFilters:s?[s]:[]}),y?Ho||(Ho=(0,f.tZ)(Gs,{})):null,0!==u.length||y||h?null:Wo||(Wo=(0,f.tZ)(Vs,{})),S&&!y?$o||($o=(0,f.tZ)(Fs,{})):null,!y&&u.length>0?(0,f.tZ)(yo,{withCategories:!0,children:D.map((e=>(0,f.tZ)(Co,{login:e.userLogin,categoryIcon:e.category.icon,categoryLabel:e.category.label,activityDescription:e.activityDescription,timestampMs:e.timestampMs},`log_${e.uuid}`)))}):null,y?Z.showAlert(e("_common_generic_error"),B.BLW.ERROR):null,(0,f.tZ)("div",{ref:n,children:v?(0,f.tZ)("div",{sx:{display:"flex",height:"40px",justifyContent:"center",paddingTop:"20px",paddingBottom:"60px"},children:Yo||(Yo=(0,f.tZ)(o.ZX,{}))}):null})]}),(0,f.tZ)(_o,{isOpen:C,areLogsLoading:h,hasMoreLogs:p,logs:u,loadMoreLogs:b,onClose:T})]})};var Qo;const Jo={display:"flex",gap:"4px",padding:"5px 0px",alignItems:"center",color:"ds.text.brand.standard",backgroundColor:"ds.background.default",cursor:"pointer",marginTop:"5px"},el=({internalAction:e,linkText:t})=>(0,f.BX)("button",{onClick:e,sx:Jo,children:[(0,f.tZ)(o.nv,{as:"span",sx:{fontWeight:"500"},children:t}),Qo||(Qo=(0,f.tZ)(o.JO,{name:"ArrowRightOutlined",size:"small",color:"ds.text.brand.standard"}))]}),tl=({supportHeader:e,children:t})=>{const{translate:n}=(0,g.Z)();return(0,f.BX)(B.Zbd,{sx:{display:"flex",gap:"8px",flexDirection:"column",padding:"32px 24px",background:"ds.container.agnostic.neutral.supershy"},children:[(0,f.tZ)(o.X6,{as:"h2",textStyle:"ds.title.supporting.small",color:"ds.text.neutral.quiet",sx:{marginBottom:"8px"},children:null!=e?e:n("webapp_tac_infocard_title")}),t]})};var nl;const al=({children:e,href:t,onClick:n,...a})=>(0,f.BX)(o.nv,{as:"a",onClick:n,href:t,rel:"noopener noreferrer",target:"_blank",color:"ds.text.brand.quiet",sx:{display:"inline-flex",textDecoration:"underline",flexDirection:"row",":hover":{textDecoration:"none",color:"ds.text.brand.standard"},":hover + svg":{fill:"ds.text.brand.standard"}},...a,children:[e,nl||(nl=(0,f.tZ)(o.JO,{name:"ActionOpenExternalLinkOutlined",color:"ds.text.brand.quiet"}))]});let il=function(e){return e[e.ExternalLink=0]="ExternalLink",e[e.InternalLink=1]="InternalLink",e}({});const rl=({heading:e,description:t,linkText:n,supportHeading:a,linkProps:i})=>(0,f.BX)(tl,{supportHeader:a,children:[(0,f.tZ)(o.nv,{sx:{mb:"8px"},color:"ds.text.neutral.catchy",textStyle:"ds.title.block.medium",as:"h3",children:e}),(0,r.isValidElement)(t)?t:(0,f.tZ)(o.nv,{color:"ds.text.neutral.standard",textStyle:"ds.body.standard.regular",sx:{mb:n&&i.linkType===il.ExternalLink&&i.linkHref?"24px":0},children:t}),i.linkType===il.ExternalLink&&i.linkHref?(0,f.tZ)(al,{href:i.linkHref,children:n}):null,i.linkType===il.InternalLink?(0,f.tZ)(el,{linkText:n,internalAction:i.internalAction}):null]}),sl=({openContactDialog:e})=>{const{translate:t}=(0,g.Z)();return(0,f.tZ)(rl,{supportHeading:t("team_settings_contact_us_support_header"),heading:t("team_settings_contact_us_heading"),description:t("team_settings_contact_us_description"),linkText:t("team_settings_contact_us_link_title"),linkProps:{linkType:il.InternalLink,internalAction:e}})};var ol,ll;const cl={container:{borderRadius:"8px",border:"1px solid ds.border.neutral.quiet.idle",padding:"32px",backgroundColor:"ds.background.default",display:"flex",flexDirection:"column",alignItems:"flex-start",gap:"32px",alignContent:"start"},header:{display:"flex",flexDirection:"column",gap:"8px",alignSelf:"stretch"},itemContainer:{display:"flex",flexDirection:"column",gap:"32px",alignSelf:"stretch"},item:{display:"flex",flexDirection:"row",alignItems:"flex-start",gap:"16px"},icon:{backgroundColor:"ds.container.expressive.brand.quiet.idle",borderRadius:"8px",padding:"10px"},actions:{display:"flex",justifyContent:"space-between",alignItems:"center",alignSelf:"stretch"}},dl=()=>{const{translate:e}=(0,g.Z)(),{routes:t}=(0,i.Xo)();return(0,f.BX)("div",{sx:cl.container,children:[(0,f.BX)("div",{sx:cl.header,children:[(0,f.tZ)(o.Ct,{iconName:"PremiumOutlined",layout:"iconLeading",label:e("team_settings_sso_paywall_business_badge"),mood:"brand",intensity:"quiet"}),(0,f.tZ)(o.X6,{as:"h2",textStyle:"ds.title.section.medium",children:e("team_activity_paywall_track_organization_header")}),(0,f.tZ)(o.nv,{textStyle:"ds.body.standard.regular",color:"ds.text.neutral.quiet",children:e("team_activity_paywall_track_organization_description")})]}),(0,f.BX)("div",{sx:cl.itemContainer,children:[(0,f.BX)("div",{sx:cl.item,children:[(0,f.tZ)("div",{sx:cl.icon,children:ol||(ol=(0,f.tZ)(o.JO,{name:"ActionSearchOutlined",size:"large",color:"ds.text.brand.standard"}))}),(0,f.BX)("div",{children:[(0,f.tZ)(o.nv,{textStyle:"ds.title.block.medium",sx:{marginBottom:"5px"},children:e("team_activity_paywall_track_members_header")}),(0,f.tZ)(o.nv,{textStyle:"ds.body.reduced.regular",color:"ds.text.neutral.quiet",children:e("team_activity_paywall_track_members_description")})]})]}),(0,f.BX)("div",{sx:cl.item,children:[(0,f.tZ)("div",{sx:cl.icon,children:ll||(ll=(0,f.tZ)(o.JO,{name:"CsvOutlined",size:"large",color:"ds.text.brand.standard"}))}),(0,f.BX)("div",{children:[(0,f.tZ)(o.nv,{textStyle:"ds.title.block.medium",sx:{marginBottom:"5px"},children:e("team_activity_paywall_download_header")}),(0,f.tZ)(o.nv,{textStyle:"ds.body.reduced.regular",color:"ds.text.neutral.quiet",children:e("team_activity_paywall_download_description")})]})]})]}),(0,f.BX)("div",{sx:cl.actions,children:[(0,f.tZ)(o.Qj,{href:"https://support.dashlane.com/hc/en-us/articles/4414606120210-Track-Starter-Team-or-Business-plan-activity",isExternal:!0,children:e("team_activity_paywall_learn_more")}),(0,f.tZ)(o.zx,{mood:"brand",intensity:"catchy",icon:"PremiumOutlined",layout:"iconLeading",as:i.rU,to:`${t.teamAccountChangePlanRoutePath}?plan=business`,onClick:()=>{(0,m.Kz)(new l.UserClickEvent({clickOrigin:l.ClickOrigin.ActivityLogPaywall,button:l.Button.UpgradeBusinessTier}))},"data-testid":"upgrade",children:e("team_contact_support_upgrade_to_business_cta")})]})]})};var _l;const ul=()=>{const{translate:e}=(0,g.Z)(),[t,n]=(0,r.useState)(!1);return(0,f.BX)(zo,{header:(0,f.tZ)(Uo,{title:e("team_activity_header_title")}),children:[(0,f.tZ)(ni,{mainContent:_l||(_l=(0,f.tZ)(B.T5p,{gridTemplateColumns:"auto",gridAutoRows:"min-content",children:(0,f.tZ)(dl,{})})),secondaryContent:(0,f.tZ)(sl,{openContactDialog:()=>n(!0)}),sx:{padding:0}}),t?(0,f.tZ)(ne.c,{onDismiss:()=>n(!1)}):null]})};var ml,pl;const gl=()=>{const e=(0,Ms.S)(),t=!e?.activityLog.enabled;return r.useEffect((()=>{(0,m.Nc)(l.PageView.TacActivityList)}),[]),(0,f.tZ)("div",{children:t?ml||(ml=(0,f.tZ)(ul,{})):pl||(pl=(0,f.tZ)(Ko,{}))})};var hl,yl,bl=n(95445),xl=n(21484);const Sl={TABLE:{width:"100%",lineHeight:"1.5",textAlign:"left"},TABLE_BODY:{tr:{boxShadow:"inset 0 -1px 0 0 ds.border.neutral.quiet.idle",height:"60px",td:{padding:"16px",verticalAlign:"middle",variant:"text.ds.body.reduced.regular",color:"ds.text.neutral.standard"}}},LOGIN_CELL:{display:"flex",padding:"15px 16px 14px"},LOGIN_TEXT:{height:"31px",marginLeft:"16px",maxWidth:"300px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},ACTION_CELL:{display:"flex",gap:"36px",justifyContent:"flex-end"}},fl=({onAccept:e,onDecline:t,dateFormatter:n,requests:a})=>{const{translate:i}=(0,g.Z)(),r=[{headerLabel:i("team_master_password_reset_table_head_member"),headerKey:"member"},{headerLabel:i("team_master_password_reset_table_head_time"),headerKey:"time"},{headerLabel:"",headerKey:"actions"}];return(0,f.BX)("table",{sx:Sl.TABLE,children:[(0,f.tZ)(ho,{columns:r}),(0,f.tZ)("tbody",{sx:Sl.TABLE_BODY,children:a.map((a=>{const r=(0,Bt.Z)(a.creationDateUnix),s=n(r);return(0,f.BX)("tr",{children:[(0,f.BX)("td",{sx:Sl.LOGIN_CELL,children:[(0,f.tZ)(bo.q,{email:a.login,size:30}),(0,f.tZ)("div",{id:"user-email",sx:Sl.LOGIN_TEXT,children:(0,f.tZ)(o.nv,{color:"ds.text.neutral.catchy",textStyle:"ds.body.standard.regular",children:a.login})})]}),(0,f.tZ)("td",{children:s}),(0,f.BX)("td",{sx:Sl.ACTION_CELL,children:[(0,f.tZ)(o.zx,{mood:"danger",intensity:"supershy",layout:"iconOnly",size:"medium",icon:hl||(hl=(0,f.tZ)(o.JO,{name:"FeedbackFailFilled"})),onClick:()=>t(a),"aria-label":i("team_master_password_reset_dialog_decline_button_ok")}),(0,f.tZ)(o.zx,{mood:"positive",intensity:"supershy",layout:"iconOnly",size:"medium",icon:yl||(yl=(0,f.tZ)(o.JO,{name:"FeedbackSuccessFilled"})),onClick:()=>e(a),"aria-label":i("team_master_password_reset_dialog_accept_button_ok")})]})]},(0,D.uniqueId)())}))},"table-body")]})},vl=(0,r.memo)(fl),Cl="team_master_password_reset_dialog_accept_button_cancel",El="team_master_password_reset_dialog_decline_button_cancel",Zl={LIST_CONTAINER:{display:"flex",flexDirection:"column",justifyContent:"center",margin:"0 auto",marginBottom:"16px",alignItems:"center"},NO_ITEMS:{border:"dashed 1px ds.border.neutral.standard.idle",height:"288px",marginTop:"132px"}},Tl=({lee:e})=>{var t;const{translate:n}=(0,g.Z)(),{getTeamId:a,getTeamPolicies:i}=(0,bl.Y)(d.o,{getTeamId:{},getTeamPolicies:{}},[]),s=a.data?.teamId,l={dialogIsVisible:!1,dialogType:null,selectedRequest:null},[c,_]=(0,r.useState)(l),[u,m]=(0,r.useState)(!1),p=(0,r.useCallback)((async()=>{s&&await(0,Se.mP)({teamId:Number(s)})}),[s]);(0,r.useEffect)((()=>{(async()=>{try{m(!0),i.data?.recoveryEnabled&&(await p(),m(!1))}catch(e){console.error(`RequestsActivity - fetchStatus failed with error ${e}`),m(!1)}})()}),[p,i.data]);const h=e=>{_({dialogIsVisible:!0,dialogType:"accept",selectedRequest:e})},y=e=>{_({dialogIsVisible:!0,dialogType:"decline",selectedRequest:e})},b=e=>[n.shortDate(e,Kt._T.l),n.shortDate(e,Kt._T.LT)].join(" - "),x=()=>_(l);return i.status!==Ze.rq.Success&&a.status!==Ze.rq.Success?null:(0,f.BX)(qo,{isLoading:u,children:[(()=>{const t=(()=>{var t;const{teams:n}=(0,xl.e)(e.globalState);return null==s?[]:null!=(t=n[s]?.notifications?.accountRecoveryRequests)?t:[]})();return t.length?(0,f.tZ)("div",{sx:Zl.LIST_CONTAINER,children:(0,f.tZ)(vl,{onAccept:h,onDecline:y,dateFormatter:b,requests:t})}):(0,f.BX)("div",{sx:(0,o.jM)([Zl.LIST_CONTAINER,Zl.NO_ITEMS]),children:[(0,f.tZ)(o.JO,{name:"NotificationOutlined",sx:{width:"100px",height:"100px"},color:"ds.border.neutral.quiet.idle"}),(0,f.tZ)(o.nv,{textStyle:"ds.title.section.medium",sx:{marginTop:"36px"},children:n("team_master_password_reset_table_empty_label")}),(0,f.tZ)(o.nv,{textStyle:"ds.title.block.medium",color:"ds.text.neutral.quiet",sx:{marginTop:"7px"},children:n("team_master_password_reset_table_empty_helper")})]})})(),(0,f.BX)(o.Vq,{isOpen:c.dialogIsVisible&&"accept"===c.dialogType,onClose:x,closeActionLabel:n(Cl),actions:{primary:{children:n("team_master_password_reset_dialog_accept_button_ok"),onClick:()=>{c.selectedRequest&&(0,Se.Z8)({login:c.selectedRequest.login,recoveryKey:c.selectedRequest.recoveryClientKey,userPublicKey:c.selectedRequest.publicKey}).then((()=>{p(),_(l)})).catch((e=>{console.error(e)}))}},secondary:{children:n(Cl),onClick:x}},title:n("team_master_password_reset_dialog_accept_title"),children:[c.selectedRequest?.login?(0,f.tZ)(o.nv,{textStyle:"ds.body.standard.strong",children:n("team_master_password_reset_dialog_accept_content_bold",{login:c.selectedRequest.login})}):null,(0,f.tZ)(o.nv,{children:n("team_master_password_reset_dialog_accept_content")})]}),(0,f.BX)(o.Vq,{isOpen:c.dialogIsVisible&&"decline"===c.dialogType,onClose:x,closeActionLabel:n(El),actions:{primary:{children:n("team_master_password_reset_dialog_decline_button_ok"),onClick:async()=>{if(c.selectedRequest)try{await(0,Se.VK)({login:c.selectedRequest.login}),p(),_(l)}catch(e){console.error(e)}}},secondary:{children:n(El),onClick:x}},title:n("team_master_password_reset_dialog_decline_title"),children:[c.selectedRequest?.login?(0,f.tZ)(o.nv,{textStyle:"ds.body.standard.strong",children:n("team_master_password_reset_dialog_decline_content_bold",{login:null!=(t=c.selectedRequest?.login)?t:""})}):null,(0,f.tZ)(o.nv,{children:n("team_master_password_reset_dialog_decline_content")})]})]})};function Dl({path:e}){return(0,f.tZ)(i.GB,{path:[e,`${e}/recent`,`${e}/requests`],permission:e=>e.adminAccess.hasFullAccess,children:(0,f.BX)(i.rs,{children:[(0,f.tZ)(i.l_,{exact:!0,from:`${e}/`,to:`${e}/recent`}),(0,f.tZ)(i.Vy,{path:`${e}/requests`,component:Tl}),(0,f.tZ)(i.Vy,{path:`${e}/recent`,component:gl})]})})}n(68030);var kl=n(73183),Il=n(358);n(61238);const Al=({children:e,onRequestClose:t,footer:n})=>{const{translate:a}=(0,g.Z)(),i=a("team_directory_sync_key_dialog_title");return(0,f.tZ)(yi.o,{isOpen:!0,showCloseIcon:!0,onRequestClose:t,footer:n,title:i,children:e})},Nl=({onSubmitKeySuccess:e,onSubmitKeyError:t,checkDirectorySyncKeyRequest:n,handleDismiss:a,handleError:i})=>{const{translate:s}=(0,g.Z)(),[l,c]=(0,r.useState)({inputKey:"",isInputKeyInvalid:!1});return(0,f.BX)(Al,{onRequestClose:a,footer:(0,f.tZ)(B.cNS,{primaryButtonTitle:s("team_directory_sync_key_dialog_key_input_verify"),primaryButtonOnClick:async()=>{var a;const{publicKey:r=""}=null!=(a=n())?a:{},s=l.inputKey.replace(/\s/g,"").replace(/\n/g,"");var o;s===r?(()=>{const e=n();return e?(0,Se.QV)(e,"validated"):Promise.reject(new Error("missing params"))})().then((()=>{e()})).catch(i):(o=s).length%4==0&&atob(o).includes("</RSAKeyValue>")?t():c((e=>({...e,isInputKeyInvalid:!0})))},secondaryButtonTitle:s("team_directory_sync_key_dialog_key_input_postpone"),secondaryButtonOnClick:a,intent:"primary"}),children:[(0,f.tZ)(o.nv,{sx:{marginBottom:"2em"},color:"ds.text.neutral.quiet",children:s.markup("team_directory_sync_key_dialog_key_input_message_markup")}),(0,f.tZ)(o.Kx,{placeholder:s("team_directory_sync_key_dialog_key_input_placeholder"),onChange:({target:{value:e}})=>{c({inputKey:e,isInputKeyInvalid:!1})},value:l.inputKey,feedback:l.isInputKeyInvalid?{text:s("team_directory_sync_key_dialog_key_input_invalid")}:void 0,error:l.isInputKeyInvalid})]})};var wl=function(e){return e[e.Initial=0]="Initial",e[e.KeyInput=1]="KeyInput",e[e.KeySuccess=2]="KeySuccess",e[e.KeyError=3]="KeyError",e[e.KeySuspended=4]="KeySuspended",e}(wl||{});const Ol=e=>{var t;const{translate:n}=(0,g.Z)(),[a,i]=(0,r.useState)(wl.Initial),s=()=>e.lee.globalState.directorySyncKey.checkDirectorySyncKeyRequest,l=()=>{e.lee.dispatchGlobal((0,Il.M2)())},c=()=>{e.lee.dispatchGlobal((0,Il.HK)())},d=()=>{e.lee.dispatchGlobal((0,Il.er)())},_=()=>{const t="directorySyncKeyValidationError",n=B.BLW.ERROR,a={key:t,level:n,textKey:"team_directory_sync_key_error_markup",handleClose:()=>e.lee.dispatchGlobal((0,kl.FV)(t))};e.lee.dispatchGlobal((0,kl.wN)(a)),c()},u=()=>{i(wl.KeyInput)},m=()=>{(()=>{const e=s();return e?(0,Se.QV)(e,"rejected"):Promise.reject(new Error("missing params"))})().then((()=>{i(wl.KeySuspended),d()})).catch(_)},p=()=>{i(wl.KeySuccess),d()},h=()=>{i(wl.KeyError)};switch(a){case wl.Initial:return(0,f.tZ)(Al,{onRequestClose:l,footer:(0,f.tZ)(B.cNS,{primaryButtonTitle:n("team_directory_sync_key_dialog_initial_continue"),primaryButtonOnClick:u,secondaryButtonTitle:n("team_directory_sync_key_dialog_initial_postpone"),secondaryButtonOnClick:l,intent:"primary"}),children:(0,f.tZ)(o.nv,{color:"ds.text.neutral.quiet",children:n.markup("team_directory_sync_key_dialog_initial_message_markup")})});case wl.KeyInput:return t||(0,f.tZ)(Nl,{onSubmitKeySuccess:p,onSubmitKeyError:h,checkDirectorySyncKeyRequest:s,handleDismiss:l,handleError:_});case wl.KeySuccess:return(0,f.tZ)(Al,{onRequestClose:c,footer:(0,f.tZ)(B.cNS,{secondaryButtonTitle:n("team_directory_sync_key_dialog_key_success_close"),secondaryButtonOnClick:c}),children:(0,f.BX)(o.kC,{gap:"8px",children:[(0,f.tZ)(o.JO,{name:"FeedbackSuccessOutlined",size:"xlarge",color:"ds.text.positive.quiet",sx:{width:"64px",height:"64px"}}),(0,f.BX)("div",{children:[(0,f.tZ)(o.X6,{as:"h1",children:n("team_directory_sync_key_dialog_key_success_header")}),(0,f.tZ)(o.nv,{children:n("team_directory_sync_key_dialog_key_success_message")})]})]})});case wl.KeyError:return(0,f.tZ)(Al,{onRequestClose:c,footer:(0,f.tZ)(B.cNS,{primaryButtonTitle:n("team_directory_sync_key_dialog_key_error_validate"),primaryButtonOnClick:m,secondaryButtonTitle:n("team_directory_sync_key_dialog_key_error_retry"),secondaryButtonOnClick:u,intent:"danger"}),children:(0,f.BX)(o.kC,{gap:"8px",children:[(0,f.tZ)(o.JO,{name:"FeedbackFailOutlined",size:"xlarge",color:"ds.text.danger.quiet",sx:{width:"64px",height:"64px"}}),(0,f.BX)("div",{children:[(0,f.tZ)(o.X6,{as:"h1",children:n("team_directory_sync_key_dialog_key_error_header")}),(0,f.tZ)(o.nv,{color:"ds.text.neutral.quiet",children:n("team_directory_sync_key_dialog_key_error_message")})]})]})});case wl.KeySuspended:return(0,f.tZ)(Al,{onRequestClose:c,footer:(0,f.tZ)(B.cNS,{secondaryButtonTitle:n("team_directory_sync_key_dialog_key_suspended_close"),secondaryButtonOnClick:c}),children:(0,f.tZ)(o.nv,{color:"ds.text.neutral.quiet",children:n.markup("team_directory_sync_key_dialog_key_suspended_message_markup")})})}},Rl=()=>{var e;const{translate:t}=(0,g.Z)(),{queue:n,popAlertFromQueue:a}=Y(),i=()=>{a()},[r]=n;return r?(0,f.tZ)(yi.o,{isOpen:!0,onRequestClose:i,footer:(0,f.tZ)(B.cNS,{secondaryButtonTitle:null!=(e=r.okButtonLabel)?e:t("_common_alert_dismiss_button"),secondaryButtonOnClick:i}),title:r.title,children:(0,f.tZ)("div",{children:r.message})}):null};var Ll=n(92386);const Ml=({lee:e,notificationKey:t,buttonTextKey:n,level:a,redirectPath:r,onClickButton:s,keyParams:o,notificationName:l})=>{const c={key:t,level:a,textKey:t,buttonTextKey:n,keyParams:o,handleClose:()=>{e.dispatchGlobal((0,kl.FV)(t)),l&&fe.C.markNotificationAsSeen(l)}};r&&(c.handleLinkClick=n=>{n.preventDefault(),(0,X.Tx)(r)?(0,X.Yk)(r,{type:"",action:""}):(e.dispatchGlobal((0,kl.FV)(t)),(0,i.uX)(r))}),s&&(c.handleButtonClick=()=>{s()}),e.dispatchGlobal((0,kl.wN)(c))};var Bl=n(70226);const Pl="TRIAL_PERIOD_0_15D",Ul="GRACE_PERIOD_PAID",zl="ENABLE_RECOVERY",Xl="ADD_ADMINS";var ql=n(9937);const jl={notification:"notification--JlZi_NwcwA"},Gl=({level:e=B.BLW.SUCCESS,text:t,buttonTextKey:n,onClose:a,onLinkClick:i,onClickButton:s})=>{const o=r.useRef(null),{translate:l}=(0,g.Z)(),c=(0,r.useCallback)((e=>{if(!i)return;const t=e.target;t&&"a"===t.tagName.toLowerCase()&&i(e)}),[i]);return(0,r.useEffect)((()=>{if(!o||!o.current)return;const e=o.current;return e.addEventListener("click",c),()=>{e.removeEventListener("click",c)}}),[c]),(0,f.tZ)("div",{className:jl.notification,children:(0,f.tZ)(B.bZj,{severity:e,size:B.k3y.SMALL,showIcon:!0,closeIconName:l("_common_alert_dismiss_button"),onClose:a,onAction:s||void 0,actionText:n||void 0,children:(0,f.tZ)("span",{ref:o,className:jl.text,children:t})})})};var Fl=n(11030);const Vl=({lee:e})=>{const{translate:t}=(0,g.Z)(),n=(0,re.C)(),a=(0,u.s)(),s=(0,Fl.z)(),[o,c]=(0,r.useState)(!1),[d,_]=(0,r.useState)([]),p=(0,r.useCallback)(((n,a,i)=>{if(!n||!a||!i)return null;(async({lee:e,teamTrialStatus:t,teamBillingInfo:n,teamPolicies:a,showTacInExtension:i,translate:r})=>{const s=(({lee:e,teamTrialStatus:t,teamBillingInfo:n,teamPolicies:a,showTacInExtension:i})=>{const r=new Set;i&&r.add("TAC_IN_EXTENSION"),t.isGracePeriod&&!t.isFreeTrial&&r.add(Ul),t.isFreeTrial&&!t.isGracePeriod&&((0,Bl.PY)(n.nextBillingDetails.dateUnix)<15?r.add("TRIAL_PERIOD_15_30D"):r.add(Pl)),a.recoveryEnabled||a.ssoEnabled||r.add(zl);const s=(0,k.ev)(e.globalState)||0,o=e.carbon.spaceData.spaces.find((e=>s===+e.teamId));return o&&o.details.teamAdmins.length<=1&&r.add(Xl),r})({lee:e,teamTrialStatus:t,teamBillingInfo:n,teamPolicies:a,showTacInExtension:i});e.dispatchGlobal((0,kl.L1)());const o=e.permission.adminAccess.hasFullAccess,l=await fe.C.getNotificationStatus();s.has(Ul)&&(e=>{Ml({lee:e,notificationKey:"team_notifications_renewal_grace_period_markup",level:B.BLW.ERROR,redirectPath:e.routes.teamAccountRoutePath})})(e),o&&(s.has(zl)&&l.tacEnableAccountRecoveryBanner===_e.E.Unseen&&(e=>{const t=`${e.routes.teamSettingsRoutePath}/master-password-policies`;Ml({lee:e,notificationKey:"team_notifications_enable_account_recovery_markup",level:B.BLW.WARNING,redirectPath:t,notificationName:_e.O.TacEnableAccountRecoveryBanner})})(e),s.has(Xl)&&l.tacOnlyOneAdminBanner===_e.E.Unseen&&!Ll.G6()&&(e=>{const t=e.routes.teamAccountRoutePath;Ml({lee:e,notificationKey:"team_notifications_add_admins_markup",level:B.BLW.WARNING,redirectPath:t,notificationName:_e.O.TacOnlyOneAdminBanner})})(e)),s.has(Pl)&&(({lee:e,spaceTier:t,translate:n})=>{const a=(0,P.Uo)({tier:t,translate:n});Ml({lee:e,notificationKey:"team_notifications_free_trial_D0_T15_markup",keyParams:{planTier:a},level:B.BLW.SUCCESS,redirectPath:e.routes.teamAccountRoutePath})})({lee:e,spaceTier:n.spaceTier,translate:r})})({lee:e,teamTrialStatus:n,teamBillingInfo:a,teamPolicies:i,showTacInExtension:!1,translate:t})}),[]),h=(()=>{const{routes:e}=(0,i.Xo)(),t=(0,bl.Y)(Rr.t,{getIdPFailedProvisioningsData:{},hasSeenIdPFailedNotification:{}},[]),{markIdPFailedNotificationSeen:n}=(0,F.u)(Rr.t);if(t.getIdPFailedProvisioningsData.status!==Ze.rq.Success||t.hasSeenIdPFailedNotification.status!==Ze.rq.Success||!t.getIdPFailedProvisioningsData.data?.nbOfFailedCreations)return[];const{requiredSeats:a}=t.getIdPFailedProvisioningsData.data;return!t.hasSeenIdPFailedNotification.data&&t.getIdPFailedProvisioningsData.data.shouldShowNotifications.alertFailuresNeedSeats?[{key:"idpErrorNotification",level:B.BLW.ERROR,textKey:"team_idp_error_notification_description",isPluralKey:!0,keyParams:{count:a},buttonTextKey:"team_idp_error_notification_cta",handleClose:()=>{(0,m.Kz)(new l.UserCallToActionEvent({callToActionList:[l.CallToAction.Close,l.CallToAction.BuySeats],toastName:l.ToastName.InsufficientSeatsProvisioningError,chosenAction:l.CallToAction.Close,hasChosenNoAction:!1})),n()},handleButtonClick:()=>{(0,m.Kz)(new l.UserCallToActionEvent({callToActionList:[l.CallToAction.Close,l.CallToAction.BuySeats],toastName:l.ToastName.InsufficientSeatsProvisioningError,chosenAction:l.CallToAction.BuySeats,hasChosenNoAction:!1})),(0,i.uX)(`${e.teamAccountRoutePath}?showSeatsDialog=true&seatsToBuy=${a}`)}}]:[]})();return(0,r.useEffect)((()=>{_((()=>{const t=e.globalState.notifications.list,n=function(e){const t=e.permission.adminAccess.hasFullAccess,n=e.globalState.directorySyncKey;return t&&n.validationPostponed?[{key:"directorySyncPosponedValidation",level:B.BLW.WARNING,textKey:"team_directory_sync_key_postponed_notif_markup",handleLinkClick:t=>{t.preventDefault(),e.dispatchGlobal((0,Il.b3)())},handleClose:()=>e.dispatchGlobal((0,Il.vg)())}]:[]}(e),a=function(e){const t=e.permission.adminAccess.hasFullAccess,n=e.globalState.ieNotifications;return t&&Ll.w6()&&n.displayIeDropNotification?[{key:"directorySyncPosponedValidation",level:B.BLW.WARNING,textKey:"wac_ie_drop_message_markup",handleClose:()=>e.dispatchGlobal((0,ql.w)())}]:[]}(e);return[...t,...h,...n,...a]})())}),[e.globalState.ieNotifications,e.globalState.directorySyncKey,e.globalState.notifications.list]),(0,r.useEffect)((()=>{p(n,a,s)}),[a,s,n]),(0,f.BX)("div",{className:"notifications--SCKfre7VSM",children:[d.map((e=>(0,f.tZ)(Gl,{level:e.level,text:(0,Kt.t5)(e.textKey)?t.markup(e.textKey,e.keyParams):e.isPluralKey?t(e.textKey,e.keyParams):t(e.textKey),buttonTextKey:e.isPluralKey&&e.buttonTextKey?t(e.buttonTextKey,e.keyParams):e.buttonTextKey?t(e.buttonTextKey):void 0,onClose:e.handleClose,onLinkClick:e.handleLinkClick,onClickButton:e.handleButtonClick},e.key))),o?(0,f.tZ)(oe.F,{isShown:o,setIsShown:c,isFromVault:!1}):null]})};var Hl=n(6995);var Wl,$l;const Yl=e=>{const[t,n]=r.useState(!1);(0,Hl._)();const a=(0,q.a)(e.lee.dispatchGlobal),i=(0,U.B)(),s=()=>{const t=e.lee.globalState.carbon.loginStatus?.loggedIn,n=e.lee.globalState.user.session.login,a=e.lee.globalState.user.session.uki,r=i?.premiumStatus,s=e.lee.globalState.user.session.permissions?.tacAccessPermissions;return t&&Boolean(n&&a)&&Boolean(r)&&Boolean(s)},o=()=>{const t=e.lee.globalState.user.session.permissions?.tacAccessPermissions;return Boolean(t?.size)};return r.useEffect((()=>{!s()||o()||a()}),[t]),s()&&o()?(0,f.tZ)($,{globalReportError:e.lee.reportError,children:(0,f.tZ)(Ce.qc,{lee:e.lee,children:(0,f.tZ)(ye,{children:(0,f.tZ)(Ae,{children:(0,f.tZ)(Et,{lee:e.lee,children:(0,f.BX)("div",{children:[e.children,$l||($l=(0,f.tZ)(Rl,{})),(0,f.tZ)(Vl,{lee:e.lee}),e.lee.globalState.directorySyncKey.displayDialog?(0,f.tZ)(Ol,{lee:e.lee}):null,(0,f.tZ)("div",{className:"alertPopup--S9uF3SnYTj",id:"alert-popup-portal"})]})})})})})}):Wl||(Wl=(0,f.tZ)("div",{}))};var Kl=n(92630),Ql=n(82622);let Jl=function(e){return e.Loading="loading",e.Start="start",e.Pending="pending",e.Validated="validated",e.Deactivating="deactivating",e}({});const ec=()=>{const[e,t]=(0,r.useState)({domain:null,status:Jl.Loading}),[n,a]=(0,r.useState)([]),i=(0,r.useCallback)((async()=>{try{const e=await fe.C.getTeamDomains();if(e.success&&e.domains.length){const n=e.domains.filter((e=>e.status===Ql.p.pending)),i=e.domains.filter((e=>e.status===Ql.p.valid));if(i.length){a(i);const e=i[0];t({domain:e,status:Jl.Validated})}else if(n.length){const e=n[n.length-1];t({domain:e,status:Jl.Pending})}else t({domain:e.domains[e.domains.length-1],status:Jl.Pending})}else t({domain:null,status:Jl.Start})}catch(e){t({domain:null,status:Jl.Start})}}),[]);return(0,r.useEffect)((()=>{i()}),[i]),{verifiedOrPendingDomain:e,verifiedDomains:n,updateDomainState:i,deactivateDomain:async()=>{if(null!==e.domain){t((e=>({domain:e.domain,status:Jl.Deactivating})));try{(await fe.C.deactivateTeamDomain({domain:e.domain.name})).success?t({domain:null,status:Jl.Start}):i()}catch(e){i()}}},tryVerifyDomain:async()=>{await fe.C.completeTeamDomainRegistration(),await i()},selectVerifiedDomain:e=>{t({domain:e,status:Jl.Validated})}}};var tc=n(37466),nc=n(41495),ac=n(63756),ic=n(44554);const rc=()=>{const{translate:e}=(0,g.Z)(),t=Tt(),n=mn();if(!t||!n.hasLimitedOffer)return null;const{translatedEquivalentPrice:a,translatedPrice:i}=n;return(0,f.tZ)(o.ke,{title:e("team_dashboard_upgrade_tile_infobox_title"),description:(0,f.BX)(f.HY,{children:[(0,f.BX)(o.X6,{as:"h5",textStyle:"ds.title.block.small",color:"ds.text.brand.standard",sx:{marginBottom:"4px"},children:[(0,f.tZ)("span",{sx:{textDecoration:"line-through"},children:a})," ",i," ",e("team_dashboard_upgrade_tile_infobox_price")]}),(0,f.tZ)(o.nv,{textStyle:"ds.body.helper.regular",color:"ds.text.brand.standard",children:e("team_dashboard_upgrade_tile_infobox_description")})]}),mood:"brand"})},sc="team_dashboard_upgrade_tile_business_upgrade_header",oc="team_dashboard_upgrade_tile_feature_unlimited_seats",lc="team_dashboard_upgrade_tile_cta_buy_dashlane",cc="team_dashboard_upgrade_tile_feature_sso",dc="team_dashboard_upgrade_tile_feature_scim",_c="team_dashboard_upgrade_tile_feature_friends_and_family",uc="team_dashboard_upgrade_tile_feature_support",mc="team_upgrade_to_business",pc=()=>{const e=(0,re.C)();return e?.spaceTier===_.lD.Standard};var gc,hc,yc;const bc=({iconName:e,children:t})=>(0,f.BX)(o.kC,{gap:"12px",alignItems:"center",flexWrap:"nowrap",children:[(0,f.tZ)("div",{sx:{padding:"8px",backgroundColor:"ds.container.expressive.brand.quiet.idle",borderRadius:"8px"},children:(0,f.tZ)(o.JO,{name:e,size:"large",color:"ds.text.brand.standard"})}),(0,f.tZ)(o.nv,{textStyle:"ds.body.standard.regular",color:"ds.text.neutral.catchy",children:t})]}),xc=({dismissible:e,headingLevel:t="h5"})=>{const{translate:n}=(0,g.Z)(),a=(()=>{const e=(0,G.U)(),{routes:t}=(0,i.Xo)(),n=(0,re.C)();if(!n)return null;const a=n.isFreeTrial,r=n.spaceTier===_.lD.Starter,s=n.spaceTier===_.lD.Team,o=n.spaceTier===_.lD.Business,l=n.spaceTier===_.lD.Standard,c=n.daysLeftInTrial;return a&&s?{header:{key:c?"team_dashboard_upgrade_tile_team_trial_header_markup":"team_dashboard_upgrade_tile_team_trial_header_last_day",variables:{daysLeft:c}},description:{key:"team_dashboard_upgrade_tile_business_trial_description"},features:[{iconName:"GroupOutlined",key:oc},{iconName:"FeatureVpnOutlined",key:"team_dashboard_upgrade_tile_feature_vpn"}],cta:{key:lc,external:!0,link:`${ae.ub}?plan=team&subCode=${null!=e?e:""}`}}:a&&o?{header:{key:c?"team_dashboard_upgrade_tile_business_trial_header_markup":"team_dashboard_upgrade_tile_business_trial_header_last_day",variables:{daysLeft:c}},description:{key:"team_dashboard_upgrade_tile_business_trial_description"},features:[{iconName:"ToolsOutlined",key:cc},{iconName:"SharedOutlined",key:dc},{iconName:"GroupOutlined",key:_c},{iconName:"ItemPhoneHomeOutlined",key:uc}],cta:{key:lc,external:!0,link:`${ae.ub}?plan=business&subCode=${null!=e?e:""}`}}:!a&&r?{header:{key:sc},description:{key:"team_dashboard_upgrade_tile_team_upgrade_description"},features:[{iconName:"GroupOutlined",key:oc},{iconName:"SharedOutlined",key:"team_dashboard_upgrade_tile_feature_group"},{iconName:"LockOutlined",key:cc},{iconName:"SettingsOutlined",key:"team_dashboard_upgrade_tile_feature_activity_logs"}],cta:{key:mc,link:t.teamAccountChangePlanRoutePath}}:!a&&s?{header:{key:sc},description:{key:"team_dashboard_upgrade_tile_business_upgrade_description"},features:[{iconName:"ToolsOutlined",key:cc},{iconName:"SharedOutlined",key:dc},{iconName:"GroupOutlined",key:_c},{iconName:"ItemPhoneHomeOutlined",key:uc}],cta:{key:"team_dashboard_upgrade_tile_cta_upgrade",link:t.teamAccountChangePlanRoutePath}}:!a&&l?{header:{key:sc},description:{key:"account_summary_upgrade_standard_title"},features:[{iconName:"GroupOutlined",key:"account_summary_unlimited_seats_description"},{iconName:"ToolsOutlined",key:"team_dashboard_upgrade_tile_feature_provisioning"},{iconName:"HealthPositiveOutlined",key:"team_dashboard_upgrade_tile_feature_integrations"},{iconName:"ItemPhoneHomeOutlined",key:"team_dashboard_upgrade_tile_feature_additional_support"}],cta:{key:mc,link:t.teamAccountChangePlanRoutePath}}:null})(),r=(0,Te.Y)(),c=(0,i.k6)(),d=pc(),u=()=>{a&&(a.cta.external?(0,X.Yo)(a.cta.link):c.push(a.cta.link),(0,m.Kz)(new l.UserClickEvent({button:l.Button.BuyDashlane,clickOrigin:l.ClickOrigin.FeatureLimitationsBlock})))},p=r.status===s.rq.Success&&(0,P.pq)(r.data),h=r.status===s.rq.Success&&(0,P.f1)(r.data);return a?(0,f.tZ)(o.kC,{flexDirection:"column",gap:"24px",children:d?(0,f.BX)(f.HY,{children:[(0,f.BX)(o.kC,{flexDirection:"column",gap:"8px",children:[(0,f.BX)(o.kC,{alignItems:"start",flexWrap:"nowrap",justifyContent:"space-between",flexDirection:"column",gap:"16px",children:[(0,f.tZ)(o.Ct,{label:n(a.header.key),mood:"brand",iconName:"PremiumOutlined",layout:"iconLeading"}),(0,f.tZ)("div",{sx:{display:"flex",justifyContent:"center",flex:1},children:(0,f.tZ)("img",{role:"presentation",alt:"",src:ys,sx:{objectFit:"contain",width:"100%",height:"auto"}})})]}),(0,f.tZ)(o.nv,{textStyle:"ds.title.block.medium",color:"ds.text.neutral.catchy",children:n(a.description.key)})]}),a.features.map((e=>(0,f.tZ)(Ss,{iconName:e.iconName,description:e.key},e.key))),(0,f.tZ)(o.zx,{mood:"brand",intensity:"catchy",onClick:u,layout:"iconLeading",icon:"PremiumOutlined",children:n(a.cta.key)},a.cta.key)]}):(0,f.BX)(f.HY,{children:[(0,f.BX)(o.kC,{flexDirection:"column",gap:"8px",children:[(0,f.BX)(o.kC,{alignItems:"start",flexWrap:"nowrap",justifyContent:"space-between",children:[(0,f.tZ)(o.X6,{as:t,textStyle:"ds.title.block.medium",color:"ds.text.neutral.catchy",children:a.header.key.includes("markup")?n.markup(a.header.key,a.header.variables):n(a.header.key,a.header.variables)}),e?(0,f.tZ)(o.zx,{sx:{padding:"4px"},mood:"neutral",intensity:"supershy",size:"medium",layout:"iconOnly",onClick:()=>(0,ic.ql)({type:nc.U.DASHBOARD_UPRADE}),icon:hc||(hc=(0,f.tZ)(o.JO,{color:"ds.text.neutral.quiet",name:"ActionCloseOutlined"}))}):null]}),(0,f.tZ)(o.nv,{textStyle:"ds.body.standard.regular",color:"ds.text.neutral.quiet",children:n(a.description.key)})]}),a.features.map((e=>(0,f.tZ)(bc,{iconName:e.iconName,children:e.key.includes("markup")?n.markup(e.key):n(e.key)},e.key))),p?yc||(yc=(0,f.tZ)(rc,{})):null,(0,f.tZ)(o.zx,{fullsize:!0,mood:e?"brand":"neutral",intensity:e?"catchy":"quiet",onClick:u,layout:h?"iconLeading":void 0,icon:h?"PremiumOutlined":void 0,children:n(a.cta.key)},a.cta.key)]})}):gc||(gc=(0,f.tZ)(o.ZX,{size:"large",mood:"neutral"}))},Sc=({requiredSeatsForIdP:e})=>{const{translate:t}=(0,g.Z)();return(0,f.tZ)(o.u,{content:t("team_idp_errors_badge_seats_required_tooltip",{count:e}),children:(0,f.tZ)(o.Ct,{label:t("team_idp_errors_badge_seats_required",{count:e,nbOfRequiredSeats:e}),mood:"danger",intensity:"quiet"})})},fc=e=>{const t=e.toFixed(1),n=e.toFixed();return parseFloat(n)-parseFloat(t)==0?n:t},vc=({showPasswordHealthScore:e,securityIndex:t,shieldSize:n,textSize:a})=>{let i="";const r="small"===a?"ds.specialty.spotlight.small":"ds.specialty.spotlight.medium";return e?(i=t>=80?"ds.text.positive.quiet":t>=40?"ds.text.warning.quiet":"ds.text.danger.quiet",t>=60?(0,f.BX)(f.HY,{children:[(0,f.tZ)(o.JO,{name:"HealthPositiveOutlined",size:n,color:i}),(0,f.tZ)(o.nv,{textStyle:r,color:"ds.text.neutral.catchy",children:`${fc(t)}%`})]}):(0,f.BX)(f.HY,{children:[(0,f.tZ)(o.JO,{name:"HealthNegativeOutlined",size:n,color:i}),(0,f.tZ)(o.nv,{textStyle:r,color:"ds.text.neutral.catchy",children:`${fc(t)}%`})]})):(i="ds.text.brand.quiet",(0,f.BX)(f.HY,{children:[(0,f.tZ)(o.JO,{name:"HealthUnknownOutlined",size:n,color:i}),(0,f.tZ)(o.nv,{textStyle:r,color:"ds.text.neutral.catchy",children:"-"})]}))},Cc="link--nWXIzseKub";var Ec;const Zc={HEADER:{display:"flex"},FOOTER:{lineHeight:"1",fontSize:"16px"},MAIN_CARD_CONTENT:{display:"flex",flexDirection:"column",gap:"4px"}},Tc=({title:e})=>(0,f.tZ)(B.ua7,{sx:{fontSize:2,maxWidth:"180px"},placement:"bottom",content:e,children:Ec||(Ec=(0,f.tZ)(B.uMt,{size:13,tabIndex:0,color:"ds.text.neutral.quiet"}))}),Dc=e=>(0,f.tZ)(o.X6,{as:"h1",color:"ds.text.neutral.quiet",textStyle:"ds.title.supporting.small",children:e}),kc=({children:e})=>(0,f.tZ)(B.Zbd,{sx:{height:"146px",width:"232px",marginRight:"32px",flexShrink:"0",padding:"16px",overflow:"inherit",color:"ds.text.neutral.catchy",backgroundColor:"ds.container.agnostic.neutral.supershy",borderColor:"ds.border.neutral.quiet.idle",display:"flex",flexDirection:"column",justifyContent:"space-between"},children:e}),Ic=({passwordHealth:e,seats:t,passwordHealthHistoryEmpty:n})=>{const{translate:a}=(0,g.Z)(),{routes:r}=(0,Ao.Xo)(),{compromised:s,securityIndex:l}=e,d=`${t.used}/${t.provisioned}`,{openDialog:u,shouldShowFrozenStateDialog:m}=(0,A.Ub)(),p=(0,c.k)(Rr.t,"getIdPFailedProvisioningsData"),h=p.status===Ze.rq.Success?p.data?.requiredSeats:0,y=(0,re.C)(),b=!!y&&y.spaceTier===_.lD.Starter,x=!!y&&y.spaceTier===_.lD.Standard,S=()=>{m&&u()};return(0,f.BX)("section",{className:"cardsRow--UeIGdGJnGY",sx:{display:"flex",justifyContent:"flex-start"},children:[(0,f.tZ)(kc,{children:(0,f.BX)("div",{sx:Zc.MAIN_CARD_CONTENT,children:[(0,f.BX)("header",{sx:Zc.HEADER,children:[Dc(a("team_dashboard_card_health_score")),(0,f.tZ)(Tc,{title:a("team_dashboard_card_health_score_info")})]}),(0,f.tZ)("div",{sx:{display:"flex",gap:"12px",alignItems:"center"},children:(0,f.tZ)(vc,{showPasswordHealthScore:!n,securityIndex:l,shieldSize:"xlarge",textSize:"medium"})})]})}),(0,f.BX)(kc,{children:[(0,f.BX)("div",{sx:Zc.MAIN_CARD_CONTENT,children:[(0,f.BX)("header",{sx:Zc.HEADER,children:[Dc(a("team_dashboard_card_compromised")),(0,f.tZ)(Tc,{title:a("team_dashboard_card_compromised_info")})]}),(0,f.tZ)(o.nv,{textStyle:"ds.specialty.spotlight.medium",color:s?"ds.text.danger.quiet":"ds.text.neutral.catchy",children:s})]}),s?(0,f.tZ)("footer",{sx:Zc.FOOTER,children:(0,f.tZ)(i.rU,{className:Cc,to:r.teamMembersRoutePath,children:a("team_dashboard_card_compromised_details_link")})}):null]}),(0,f.BX)(kc,{children:[(0,f.BX)("div",{sx:Zc.MAIN_CARD_CONTENT,children:[(0,f.BX)("header",{sx:Zc.HEADER,children:[Dc(a("team_dashboard_card_seats_taken")),(0,f.tZ)(Tc,{title:a("team_dashboard_card_seats_taken_info")})]}),(0,f.tZ)(o.nv,{textStyle:d.length>10?"ds.specialty.spotlight.small":"ds.specialty.spotlight.medium",color:"ds.text.neutral.catchy",children:d}),h?(0,f.tZ)(Sc,{requiredSeatsForIdP:h}):null]}),(0,f.tZ)("footer",{sx:Zc.FOOTER,children:(0,f.tZ)(i.rU,{className:Cc,to:b||x?`${r.teamAccountChangePlanRoutePath}`:m?{}:`${r.teamAccountRoutePath}?showSeatsDialog=true`,onClick:S,children:a("team_dashboard_card_seats_buy_link")})})]}),(0,f.BX)(kc,{children:[(0,f.BX)("div",{sx:Zc.MAIN_CARD_CONTENT,children:[(0,f.BX)("header",{sx:Zc.HEADER,children:[Dc(a("team_dashboard_card_pending_invitations")),(0,f.tZ)(Tc,{title:a("team_dashboard_card_pending_invitations_info")})]}),(0,f.tZ)(o.nv,{textStyle:"ds.specialty.spotlight.medium",color:"ds.text.neutral.catchy",children:t.pending})]}),(0,f.tZ)("footer",{sx:Zc.FOOTER,children:(0,f.tZ)(i.rU,{onClick:S,className:Cc,to:m?{}:{pathname:r.teamMembersRoutePath,state:t.pending?{openResendPendingInvitationsDialog:!0}:{openSendInvitesDialog:!0}},children:t.pending?a("team_dashboard_card_resend_invitations_link"):a("team_dashboard_card_send_invitations_link")})})]})]})};var Ac=n(53265),Nc=n(22269),wc=n(353),Oc=n(71437),Rc=n(64900),Lc=n(99477),Mc=n(33117),Bc=n(28290),Pc=n(40934),Uc=n(42094);let zc=function(e){return e[e.AllTime=0]="AllTime",e[e.Last7Days=1]="Last7Days",e[e.Last30Days=2]="Last30Days",e}({});var Xc=n(65580),qc=n(42930);const jc=(e,t,n)=>{const a=[];switch(e){case zc.AllTime:{if(n>=5&&n<=8){t.forEach((e=>{const{date:t}=e;1===new Date(t).getDate()&&a.push(t)}));break}const{length:e}=t;if(e<=7){t.forEach((e=>{a.push(e.date)}));break}const i=e/7;let r=e-1;for(;r>=0;)a.push(t[Math.round(r)]?.date),r-=i;break}case zc.Last7Days:t.forEach((e=>{a.push(e.date)}));break;case zc.Last30Days:t.forEach((e=>{const{date:t}=e;0===new Date(t).getDay()&&a.push(t)}));break;default:(0,Xc.U)(e)}return a},Gc=({historyToDisplay:e,passwordHealthHistoryEmpty:t,view:n})=>{const{translate:a}=(0,g.Z)(),i=0!==e.length?(e=>{const t=new Date,n=new Date(e);let a=12*(t.getFullYear()-n.getFullYear());return a-=n.getMonth(),a+=t.getMonth(),a+1})(e[0].date):0;return jc(n,e,i),(0,f.tZ)(qc.K,{dataKey:"date",ticks:t?[]:jc(n,e,i),tickSize:4,tickFormatter:t?()=>"":e=>((e,t,n,a)=>{const i=t===zc.AllTime&&n>=5,r=new Date(e),s=a.shortDate(r,i?Kt._T.MMM_YYYY:Kt._T.L_M_D),o=a.shortDate(r,Kt._T.MMMM);if(i)return s===o||s.endsWith(".")?s:`${s}.`;const[l,c]=s.split(" ");return l===o?s:`${l}. ${c}`})(e,n,i,a),fontSize:"small"})},Fc="legendItem--MoxC6xF4tG",Vc="legendIcon--p8Emm90xE4",Hc=({active:e,label:t,payload:n})=>{const{translate:a}=(0,g.Z)();if(!e)return null;const i=n?`${fc(n[0]?.value)}%`:null;return(0,f.BX)("div",{className:"customTooltipContainer--iAM2rWgGzw",children:[(0,f.tZ)("time",{className:"date--JuYmIy6PnQ",children:t}),(0,f.BX)("div",{className:"score--RRdFFcOQCh",children:[(0,f.BX)("div",{className:Fc,children:[(0,f.tZ)("div",{className:Vc}),(0,f.tZ)("p",{children:a("team_dashboard_graph_score_hover_legend")})]}),(0,f.tZ)("p",{children:i})]})]})};var Wc;const $c=({history:e,passwordHealthHistoryEmpty:t,infoboxOnTop:n})=>{const[a,i]=(0,r.useState)(zc.AllTime),s=(e=>{const{length:t}=e;if(t<=2)return e;const n=(0,Mc.Z)(e[0].date),a=(0,Mc.Z)(e[t-1].date),i=(0,Bc.Z)(a,n);if(i===t-1)return e;const r=[];let s=0,o=e[s].securityIndex,l=n,c=n;for(let t=0;t<=i;t++)(0,Pc.Z)(c,l)?(r.push(e[s]),o=e[s].securityIndex,s++,l=(0,Mc.Z)(e[s]?.date)):r.push({date:c.toISOString().slice(0,10),securityIndex:o}),c=(0,Uc.Z)(c,1);return r})(e),l=((e,t)=>{switch(e){case zc.AllTime:return t;case zc.Last7Days:return t.slice(t.length-7,t.length);case zc.Last30Days:return t.slice(t.length-30,t.length);default:(0,Xc.U)(e)}})(a,s),{translate:c}=(0,g.Z)();return(0,f.BX)(f.HY,{children:[(0,f.BX)("section",{className:M()("topSection--nM0XDipPte",{"addMarginTop--fLzJVO2qx1":n}),children:[(0,f.BX)("div",{className:Fc,children:[(0,f.tZ)("div",{className:Vc}),(0,f.tZ)(o.nv,{textStyle:"ds.body.helper.regular",color:"ds.text.neutral.quiet",children:c("team_dashboard_graph_score_legend")})]}),(0,f.BX)(B.G8v,{children:[s.length>7?(0,f.tZ)(B.yPU,{label:c("team_dashboard_graph_7_days_button"),selected:a===zc.Last7Days,onClick:()=>{i(zc.Last7Days)},size:"small"}):null,s.length>30?(0,f.tZ)(B.yPU,{label:c("team_dashboard_graph_30_days_button"),selected:a===zc.Last30Days,onClick:()=>{i(zc.Last30Days)},size:"small"}):null,(0,f.tZ)(B.yPU,{label:c("team_dashboard_graph_all_time_button"),selected:a===zc.AllTime,onClick:()=>{s.length<=7||i(zc.AllTime)},size:"small"})]})]}),(0,f.tZ)("section",{sx:{width:"100%",height:"211px",flexGrow:1},children:(0,f.tZ)(Ac.h,{sx:{height:"100%",width:"100%"},children:(0,f.BX)(Nc.w,{data:t?[]:l,sx:{position:"relative",right:"18px"},children:[Wc||(Wc=(0,f.tZ)(wc.q,{vertical:!1})),(0,f.tZ)(Oc.B,{domain:[0,100],tickFormatter:e=>`${e}%`,fontSize:"small"}),Gc({historyToDisplay:l,passwordHealthHistoryEmpty:t,view:a}),(0,f.tZ)(Rc.u,{content:e=>{const t=c.shortDate((0,Mc.Z)(e.label),{year:"numeric",month:"long",day:"numeric",timeZone:"UTC"});return(0,f.tZ)(Hc,{...e,label:t})},animationDuration:500,animationEasing:"ease-out",cursor:!t}),(0,f.tZ)(Lc.x,{dataKey:"securityIndex",stroke:"#0e6476",strokeWidth:"2",dot:!1,activeDot:{strokeWidth:0,r:4},animationDuration:500,isAnimationActive:!0})]})})})]})};var Yc=n(28207),Kc=n(80936);const Qc="team_dashboard_industry_benchmark_cta",Jc="19px",ed="https://support.dashlane.com/hc/articles/202699411-Password-Health",td=({showDataWarning:e,ratingVSIndustry:t,deltaVSIndustry:n})=>{const{translate:a}=(0,g.Z)(),i=(0,Kc.I)(),r=i.status===Ze.rq.Success&&!i.isDisabled,s={lower:{message:a("team_dashboard_industry_benchmark_info_lower",{count:n}),infoboxMood:"danger",ctas:[(0,f.tZ)(o.Qj,{href:ed,isExternal:!0,children:a(Qc)},"see_how_danger")]},onPar:{message:a("team_dashboard_industry_benchmark_info_onpar"),infoboxMood:"warning",ctas:[(0,f.tZ)(o.Qj,{href:ed,isExternal:!0,children:a(Qc)},"see_how_warning")]},higher:{message:a("team_dashboard_industry_benchmark_info_higher",{count:n}),infoboxMood:"positive",ctas:[]}};return e?(0,f.tZ)(o.ke,{size:"medium",sx:{marginTop:Jc},title:a(r?"team_dashboard_graph_not_enough_data_warning":"team_dashboard_graph_not_enough_data_warning_min",{minPasswords:5})}):t?(0,f.tZ)(o.ke,{size:"large",sx:{marginTop:Jc},title:s[t].message,mood:s[t].infoboxMood,actions:s[t].ctas,icon:"higher"===t?"HealthPositiveOutlined":"HealthNegativeOutlined"}):null},nd=({isLoading:e,history:t,passwordHealthHistoryEmpty:n})=>{const{translate:a}=(0,g.Z)(),i=(0,Yc.u)(),r=(()=>{const e=(0,Ee.o)(hi.P.DashHackIndustryBenchmarkDev),{data:t,status:n}=(0,c.k)(d.o,"getIndustryBenchmarkData");return n!==Ze.rq.Success?{status:n}:{status:n,data:e?t:null}})();if(i.status!==Ze.rq.Success||r.status!==Ze.rq.Success)return null;const s=!e&&n,{ratingVSIndustry:l,deltaVSIndustry:_}={...r.data},u=s||!!l;return(0,f.BX)("section",{sx:{padding:"3%",flexGrow:1,display:"flex",flexDirection:"column"},children:[(0,f.tZ)(o.X6,{as:"h5",color:"ds.text.neutral.catchy",textStyle:"ds.title.section.medium",sx:{marginBottom:"1%"},children:a("team_dashboard_graph_heading")}),u?(0,f.tZ)(td,{showDataWarning:s,ratingVSIndustry:l,deltaVSIndustry:_}):null,(0,f.tZ)($c,{history:t,infoboxOnTop:u,passwordHealthHistoryEmpty:n})]})},ad=({title:e,value:t,color:n})=>(0,f.BX)("div",{sx:{display:"flex",flexDirection:"column",gap:"8px",marginRight:"8px",minWidth:"70px"},children:[(0,f.tZ)("header",{children:(0,f.tZ)(o.nv,{as:"h2",color:"ds.text.neutral.quiet",textStyle:"ds.body.helper.regular",children:e})}),(0,f.tZ)(o.nv,{textStyle:"ds.specialty.spotlight.small",color:null!=n?n:"ds.text.neutral.standard",children:t})]}),id=({compromised:e,passwords:t,reused:n,safe:a,securityIndex:i,weak:r,passwordHealthHistoryEmpty:s})=>{const{translate:l}=(0,g.Z)();return(0,f.BX)("section",{sx:{borderTop:"1px solid",borderTopColor:"ds.border.neutral.quiet.idle",display:"flex",padding:"3% 2%"},children:[(0,f.BX)("div",{sx:{display:"flex",flexDirection:"column",gap:"8px",width:"240px",padding:"0 24px",borderRight:"1px solid",borderRightColor:"ds.border.neutral.quiet.idle"},children:[(0,f.tZ)("header",{children:(0,f.tZ)(o.nv,{as:"h2",color:"ds.text.neutral.quiet",textStyle:"ds.body.helper.regular",children:l("team_dashboard_password_health_breakdown_score")})}),(0,f.tZ)("div",{sx:{fontSize:"x-large",fontWeight:"bold",display:"inline-flex",alignItems:"center","& > svg":{marginRight:"7px"},color:"ds.text.neutral.standard"},children:(0,f.tZ)(vc,{showPasswordHealthScore:!s,securityIndex:i,shieldSize:"medium",textSize:"small"})})]}),(0,f.BX)("div",{sx:{display:"flex",justifyContent:"space-between",padding:"0 24px",width:"100%"},children:[(0,f.tZ)(ad,{title:l("team_dashboard_password_health_breakdown_total"),value:t}),(0,f.tZ)(ad,{title:l("team_dashboard_password_health_breakdown_safe"),value:a,color:a?"ds.text.positive.quiet":void 0}),(0,f.tZ)(ad,{title:l("team_dashboard_password_health_breakdown_weak"),value:r,color:r?"ds.text.warning.quiet":void 0}),(0,f.tZ)(ad,{title:l("team_dashboard_password_health_breakdown_reused"),value:n,color:n?"ds.text.warning.quiet":void 0}),(0,f.tZ)(ad,{title:l("team_dashboard_password_health_breakdown_compromised"),value:e,color:e?"ds.text.danger.quiet":void 0})]})]})},rd=({isLoading:e,report:t,passwordHealthHistoryEmpty:n})=>(0,f.BX)(B.Zbd,{sx:{height:"100%",display:"flex",flexDirection:"column",backgroundColor:"ds.container.agnostic.neutral.supershy",borderColor:"ds.border.neutral.quiet.idle"},children:[(0,f.tZ)(nd,{isLoading:e,history:t.passwordHealthHistory,passwordHealthHistoryEmpty:n}),(0,f.tZ)(id,{...t.passwordHealth,passwordHealthHistoryEmpty:n})]}),sd="https://support.dashlane.com/hc/articles/4507132108946",od={HEADING:"team_dashboard_dark_web_insights_heading",SECURITY_INCIDENTS:{LABEL:"team_dashboard_dark_web_insights_security_incidents",TOOLTIP:"team_dashboard_dark_web_insights_security_incidents_tooltip"},EMAILS_AFFECTED:{LABEL:"team_dashboard_dark_web_insights_emails_affected",TOOLTIP:"team_dashboard_dark_web_insights_emails_affected_tooltip"},SUGGESTED_INVITATION:{LABEL:"team_dashboard_dark_web_insights_suggested_invitations",TOOLTIP:"team_dashboard_dark_web_insights_suggested_invitations_tooltip"},RETURNING_USER_CTA:"team_dashboard_dark_web_insights_go_to_cta",RETURNING_USER_VIEW_DOMAIN_GUIDE_CTA:"team_dashboard_dark_web_insights_view_guide_cta",UNVERIFIED_MSG:"team_dashboard_dark_web_insights_domain_unverified_msg",UNVERIFIED_SUBTEXT:"team_dashboard_dark_web_insights_domain_unverified_sub_text",INCIDENT_FREE_MSG:"team_dashboard_dark_web_insights_domain_incident_free_msg",INCIDENT_FREE_SUBTEXT:"team_dashboard_dark_web_insights_domain_incident_free_sub_text",GENERATING_INSIGHTS_MESSAGE:"team_dashboard_dark_web_insights_generating_msg",NEW_INCIDENTS_NOTIFICATION_MSG:{ONE:"team_dashboard_dark_web_insights_notify_new_incidents_one",MANY:"team_dashboard_dark_web_insights_notify_new_incidents_many"},TEAM_NEW_LABEL:"team_new_label"},ld=({count:e,labelAndTooltip:t,primaryColor:n,secondaryColor:a})=>{const{translate:i}=(0,g.Z)();return(0,f.BX)(o.kC,{gap:"6px",sx:{margin:"16px 0"},alignItems:"center",children:[(0,f.tZ)(B.X6q,{size:"x-small",color:n,sx:{width:"57px"},children:e}),(0,f.BX)(B.ua7,{sx:{fontSize:2,maxWidth:"180px"},placement:"top",content:i(t.TOOLTIP),children:[(0,f.tZ)(B.nvN,{"aria-label":i(t.LABEL),size:"small",sx:{minWidth:"calc(100% - 83px)",width:"min-content"},color:null!=a?a:n,children:i(t.LABEL)}),(0,f.tZ)(B.uMt,{size:13,tabIndex:0,color:null!=a?a:n})]})]})},cd=({children:e})=>(0,f.tZ)(B.Zbd,{sx:{minHeight:"418px",width:"282px",backgroundColor:"ds.container.agnostic.neutral.supershy",borderColor:"ds.border.neutral.quiet.idle"},children:(0,f.tZ)(o.kC,{sx:{minHeight:"418px",padding:"20px"},flexDirection:"column",justifyContent:"space-between",alignItems:"start",children:e})}),dd=({text:e,subtext:t,imgSrc:n})=>(0,f.BX)(f.HY,{children:[(0,f.tZ)("img",{src:n}),(0,f.tZ)(B.nvN,{size:"medium",bold:!0,sx:{marginBottom:"8px"},children:e}),(0,f.tZ)(B.nvN,{size:"small",color:B.colors.grey00,children:t})]}),_d=({domain:e})=>(0,f.tZ)(B.nvN,{size:"x-small",bold:!0,sx:{padding:"4px 8px",backgroundColor:`${B.colors.dashGreen06}`,borderRadius:"4px",width:"fit-content",height:"24px",marginBottom:"34px"},children:e}),ud=({newLeaksCount:e,newLeaksAffectedEmailCount:t})=>{const{translate:n}=(0,g.Z)(),{setHasNewBreaches:a}=be();(0,r.useEffect)((()=>{e>0&&a(!0)}),[e,a]);const i=e>1?od.NEW_INCIDENTS_NOTIFICATION_MSG.MANY:od.NEW_INCIDENTS_NOTIFICATION_MSG.ONE;return e>0?(0,f.BX)(o.kC,{sx:{backgroundColor:B.colors.pink05,borderRadius:"4px",padding:"5px 8px",marginTop:"25px"},children:[(0,f.tZ)(B.nvN,{size:"small",color:B.colors.red00,sx:{width:"calc(100% - 5px)"},children:n(i,{numIncidents:e,count:t})}),(0,f.tZ)(B.P_k,{dot:!0,ariaLabel:n(od.TEAM_NEW_LABEL)})]}):null},md=({domainInfo:e})=>{const t=e.leaksCount,n=e.emailsImpactedCount,a=e.emailsImpactedCount-e.teamMembersImpactedCount;return(0,f.BX)(f.HY,{children:[(0,f.tZ)(ld,{count:t,labelAndTooltip:od.SECURITY_INCIDENTS,primaryColor:B.colors.dashGreen00,secondaryColor:B.colors.dashGreen01}),(0,f.tZ)(ld,{count:n,labelAndTooltip:od.EMAILS_AFFECTED,primaryColor:B.colors.dashGreen00,secondaryColor:B.colors.dashGreen01}),(0,f.tZ)(ld,{count:a,labelAndTooltip:od.SUGGESTED_INVITATION,primaryColor:B.colors.dashGreen00,secondaryColor:B.colors.dashGreen01}),(0,f.tZ)(ud,{newLeaksCount:e.newLeaksCount,newLeaksAffectedEmailCount:e.newLeaksAffectedEmailCount})]})},pd=({domainName:e,domainInfo:t})=>{const{translate:n}=(0,g.Z)(),{routes:a}=(0,Ao.Xo)();return(0,f.BX)(f.HY,{children:[(0,f.BX)("section",{sx:{width:"100%"},children:[(0,f.tZ)(_d,{domain:e}),t.leaksCount>0?(0,f.tZ)(md,{domainInfo:t}):(0,f.tZ)(dd,{imgSrc:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNTIiIGhlaWdodD0iNTIiIHZpZXdCb3g9IjAgMCA1MiA1MiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGcgY2xpcC1wYXRoPSJ1cmwoI2NsaXAwXzMxMTNfMTkwOTY0KSI+CjxyZWN0IHdpZHRoPSI1MiIgaGVpZ2h0PSI1MiIgcng9IjI2IiBmaWxsPSIjRDlERkUwIi8+CjxwYXRoIGZpbGwtcnVsZT0iZXZlbm9kZCIgY2xpcC1ydWxlPSJldmVub2RkIiBkPSJNMjAuNzIxOSAxMy40NzMzQzE0LjI4MjEgMTQuMjgxNiA5LjcxNjc2IDIwLjE1NzMgMTAuNTI1IDI2LjU5NzJMMTEuMTk1MyAzMS45MzgxTDcuOTg0NDUgMzIuMzQxMUM2Ljg4ODQ4IDMyLjQ3ODYgNi4xMTE1MiAzMy40Nzg2IDYuMjQ5MDggMzQuNTc0Nkw5LjE2NTA4IDU3LjgwOEM5LjMwMjYzIDU4LjkwNCAxMC4zMDI2IDU5LjY4MDkgMTEuMzk4NiA1OS41NDM0TDQwLjI5OTIgNTUuOTE2MUM0MS4zOTUyIDU1Ljc3ODYgNDIuMTcyMSA1NC43Nzg2IDQyLjAzNDYgNTMuNjgyNkwzOS4xMTg2IDMwLjQ0OTJDMzguOTgxIDI5LjM1MzIgMzcuOTgxIDI4LjU3NjIgMzYuODg1MSAyOC43MTM4TDM0LjUxNjEgMjkuMDExMUwzMy44NDU4IDIzLjY3MDJDMzMuMDM3NiAxNy4yMzA0IDI3LjE2MTggMTIuNjY1MSAyMC43MjE5IDEzLjQ3MzNaTTE0LjE3NjUgMjYuNjYxTDE0Ljc4MjQgMzEuNDg3OUwzMC45Mjc1IDI5LjQ2MTVMMzAuMzIxNyAyNC42MzQ2QzI5Ljc2MjIgMjAuMTc2MiAyNS42OTQzIDE3LjAxNTYgMjEuMjM2IDE3LjU3NTJDMTYuNzc3NiAxOC4xMzQ4IDEzLjYxNyAyMi4yMDI2IDE0LjE3NjUgMjYuNjYxWk00Ni43NzUzIDE4LjY1ODZMNDAuNDg1NiAyMi42MTkzTDQxLjkxMTEgMjQuODgyOUw0OC4yMDA3IDIwLjkyMjJMNDYuNzc1MyAxOC42NTg2Wk00My4xODE2IDI3LjI3NjRMNDcuMDcxNyAyNy4zNjhMNDcuMDEwMyAyOS45Nzc3TDQzLjEyMDIgMjkuODg2MUw0My4xODE2IDI3LjI3NjRaTTM3LjQ1NiAxNS43NDIyTDM2LjA3NyAyMC42Nzc3TDM4LjgxNzQgMjEuNDQzNEw0MC4xOTY0IDE2LjUwNzlMMzcuNDU2IDE1Ljc0MjJaIiBmaWxsPSIjMEUzNTNEIi8+CjwvZz4KPGRlZnM+CjxjbGlwUGF0aCBpZD0iY2xpcDBfMzExM18xOTA5NjQiPgo8cmVjdCB3aWR0aD0iNTIiIGhlaWdodD0iNTIiIHJ4PSIyNiIgZmlsbD0id2hpdGUiLz4KPC9jbGlwUGF0aD4KPC9kZWZzPgo8L3N2Zz4K",text:n(od.INCIDENT_FREE_MSG,{domainName:e}),subtext:n(od.INCIDENT_FREE_SUBTEXT)})]}),(0,f.tZ)(i.rU,{to:a.teamDarkWebInsightsRoutePath,sx:{textDecoration:"none",color:`${B.colors.midGreen00}`,marginBottom:"16px","&:hover":{textDecoration:"underline"}},onClick:()=>{(0,m.Kz)(new l.UserOpenDomainDarkWebMonitoringEvent({accessPath:l.AccessPath.MainDashboardButton,isFirstVisit:!1}))},children:n(od.RETURNING_USER_CTA)})]})},gd=({domainName:e})=>{const{translate:t}=(0,g.Z)();return(0,f.BX)(f.HY,{children:[(0,f.BX)("section",{sx:{width:"100%"},children:[(0,f.tZ)(_d,{domain:e}),(0,f.tZ)(dd,{imgSrc:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNTMiIGhlaWdodD0iNTMiIHZpZXdCb3g9IjAgMCA1MyA1MyIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9IjUzIiBoZWlnaHQ9IjUzIiByeD0iMjYuNSIgZmlsbD0iI0Q5REZFMCIvPgo8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTI2LjgwMDQgMTMuNzUzN0wyNi45NjE2IDEzLjEwOTFDMjcuNjA2MiAxMC42MTEzIDI5Ljg2MjIgOSAzMi4zNjAxIDlDMzUuMzQxMyA5IDM4IDExLjQxNzMgMzggMTQuNDc4OUMzOCAxNi45NzY4IDM2LjMwNzkgMTkuMDcxNiAzMy45NzEyIDE5LjcxNjRWMjAuNzY0SDMwLjc0ODJWMTguODMwM0MzMC43NDgyIDE3Ljc4MjcgMzEuNTU0IDE2LjgxNiAzMi42ODE5IDE2LjczNTRDMzMuODA5OSAxNi41NzQyIDM0Ljc3NjggMTUuNjg3OSAzNC43NzY4IDE0LjQ3OTRDMzQuNzc2OCAxMy4xOTAyIDMzLjY0ODkgMTIuMjIzMyAzMi4zNTk1IDEyLjIyMzNDMzEuMjMxNiAxMi4yMjMzIDMwLjM0NTMgMTIuODY3OSAzMC4wMjI5IDEzLjkxNTRMMjkuODYxNyAxNC41NTk5TDI2LjggMTMuNzU0MkwyNi44MDA0IDEzLjc1MzdaTTM0LjM3NDQgMjMuNzQ1NUMzNC4zNzQ0IDI0Ljg1OCAzMy40NzI2IDI1Ljc2IDMyLjM2MDEgMjUuNzZDMzEuMjQ3NiAyNS43NiAzMC4zNDU2IDI0Ljg1OCAzMC4zNDU2IDIzLjc0NTVDMzAuMzQ1NiAyMi42MzMgMzEuMjQ3NiAyMS43MzEzIDMyLjM2MDEgMjEuNzMxM0MzMy40NzI2IDIxLjczMTMgMzQuMzc0NCAyMi42MzMgMzQuMzc0NCAyMy43NDU1Wk0zNi44NzkxIDM0LjYzMzlDMzYuODc5MSAzMi42MTggMzYuNDE5MyAzMC42ODU5IDM1LjU0MTMgMjguODhMMzEuNjk1OCAyOC44OEwzMi4xOTczIDI5LjcxOTlDMzIuODI0MiAzMC43Njk5IDMzLjIwMDQgMzEuOTAzOSAzMy40MDk0IDMzLjA3OTlMMjkuMzEyOSAzMy4wNzk5QzI5LjI3MTIgMzAuOTggMjguOTc4NCAyOC44OCAyOC41MTg2IDI2LjgyMTlDMjcuNTk4OSAyMy4xNjgxIDI1LjkyNjkgMjEuMzIgMjMuNTAyNCAyMS4zMkMxNi4xMDMyIDIxLjI3OCAxMC4wNDE5IDI3LjI4NDEgMTAuMDAwMiAzNC42NzU5QzkuOTU4NDIgNDIuMDY3NyAxNS44OTQzIDQ4LjE1NzkgMjMuMjkzMyA0OC4xOTk4SDIzLjYyNzhDMzEuMDI2NyA0OC4xMTU4IDM2Ljk2MjUgNDIuMDY3OSAzNi44NzkxIDM0LjYzMzlaTTIxLjAzNjEgMzYuNDRMMjUuOTY4NiAzNi40NEMyNS43NTk1IDQxLjIyNzkgMjQuNzU2NSA0NC44Mzk5IDIzLjUwMjMgNDQuODM5OUMyMi4yNDgyIDQ0LjgzOTkgMjEuMjQ1MSA0MS4yMjc5IDIxLjAzNjEgMzYuNDRaTTIzLjUwMjMgMjQuNjgwM0MyNC43NTY1IDI0LjY4MDMgMjUuNzU5NSAyOC4zMzQyIDI1Ljk2ODYgMzMuMDgwMkgyMS4wMzYxQzIxLjI0NTIgMjguMzM0MiAyMi4yNDgyIDI0LjY4MDMgMjMuNTAyMyAyNC42ODAzWk0xNy42OTE3IDMzLjA4MDJMMTMuNjM2OSAzMy4wODAzQzE0LjA5NjcgMzAuMTQwMSAxNS44OTQxIDI3LjUzNjIgMTguNDg2IDI2LjAyNDJMMTguNzM2OCAyNS44OTgyQzE4LjY1MzEgMjYuMTkyMyAxOC41Njk3IDI2LjQ4NjIgMTguNDg2IDI2LjgyMjJDMTguMDI2MiAyOC44ODAzIDE3LjczMzQgMzAuOTgwMyAxNy42OTE3IDMzLjA4MDJaTTE4LjQ4NiA0Mi42OTgyQzE4LjU2OTcgNDMuMDM0MiAxOC42NTMxIDQzLjMyOCAxOC43MzY4IDQzLjYyMjFMMTguNzM2OCA0My42MjIyQzE3LjEwNjUgNDIuNzQwMSAxNS43MjcgNDEuNDM4MiAxNC44NDkgMzkuODAwMkMxNC4yMjIxIDM4Ljc1MDIgMTMuODQ1OSAzNy42MTYxIDEzLjYzNjkgMzYuNDQwMUgxNy42OTE3QzE3LjczMzQgMzguNTQwMSAxOC4wMjYyIDQwLjY0MDEgMTguNDg2IDQyLjY5ODJaTTI5LjMxMjggMzYuNDQwMUwzMy4zNjc2IDM2LjQ0QzMyLjkwNzggMzkuNDIyMSAzMS4xMTA0IDQxLjk4NDEgMjguNTE4NCA0My40OTYxTDI4LjI2NzcgNDMuNjIyMUMyOC4zNTE0IDQzLjMyOCAyOC40MzQ4IDQzLjAzNDEgMjguNTE4NCA0Mi42OTgxQzI4Ljk3ODMgNDAuNjQgMjkuMjcxMSAzOC41NCAyOS4zMTI4IDM2LjQ0MDFaIiBmaWxsPSIjMEUzNTNEIi8+Cjwvc3ZnPgo=",text:t(od.UNVERIFIED_MSG),subtext:t(od.UNVERIFIED_SUBTEXT)})]}),(0,f.tZ)(B.rUS,{sx:{textDecoration:"none",fontWeight:"lighter",marginBottom:"16px","&:hover":{textDecoration:"underline"}},color:B.colors.midGreen00,target:"_blank",rel:"noopener noreferrer",href:sd,onClick:()=>{(0,m.Kz)(new l.UserOpenHelpCenterEvent({helpCenterArticleCta:l.HelpCenterArticleCta.ViewDomainVerificationGuide}))},children:t(od.RETURNING_USER_VIEW_DOMAIN_GUIDE_CTA)})]})},hd=({domainName:e})=>{const{translate:t}=(0,g.Z)();return(0,f.BX)(f.HY,{children:[(0,f.tZ)(_d,{domain:e}),(0,f.tZ)(o.ZX,{size:44,sx:{alignSelf:"center"}}),(0,f.tZ)(B.nvN,{size:"small",color:B.colors.grey00,sx:{marginBottom:"3em",overflow:"hidden",width:"-webkit-fill-available"},children:t(od.GENERATING_INSIGHTS_MESSAGE)})]})},yd=({verifiedOrPendingDomain:e,dwiSummaryResponse:t})=>{const{translate:n}=(0,g.Z)(),a=e.status===Ql.p.valid,i=e.name;return(0,f.BX)(cd,{children:[(0,f.tZ)(o.X6,{as:"h5",textStyle:"ds.title.section.medium",color:"ds.text.neutral.catchy",children:n(od.HEADING)}),a?t?.success?(0,f.tZ)(pd,{domainName:i,domainInfo:t.data[i]}):(0,f.tZ)(hd,{domainName:i}):(0,f.tZ)(gd,{domainName:i})]})},bd=n.p+"daa928a30146cfbef943.png";var xd,Sd;const fd={TEAM_NEW_LABEL:"team_new_label",HEADING:"team_dashboard_dark_web_insights_discovery_heading",SUBTEXT:"team_dashboard_dark_web_insights_discovery_subtext",ALTERNATE_HEADING:"team_dashboard_dark_web_insights_discovery_heading_alternate",ALTERNATE_SUBTEXT:"team_dashboard_dark_web_insights_discovery_subtext_alternate",SECURITY_INCIDENTS:{LABEL:"team_dashboard_dark_web_insights_security_incidents",TOOLTIP:"team_dashboard_dark_web_insights_security_incidents_tooltip"},EMAILS_AFFECTED:{LABEL:"team_dashboard_dark_web_insights_emails_affected",TOOLTIP:"team_dashboard_dark_web_insights_emails_affected_tooltip"},GET_STARTED_CTA:"team_dashboard_dark_web_insights_discovery_get_started_cta"},vd=()=>{const{translate:e}=(0,g.Z)(),{routes:t}=(0,Ao.Xo)(),n=(0,i.k6)(),{unseen:a}=(0,ge.m)(_e.O.TacDarkWebInsightsNewBadge);return(0,f.tZ)(o.zx,{onClick:()=>{(0,m.Kz)(new l.UserOpenDomainDarkWebMonitoringEvent({accessPath:l.AccessPath.MainDashboardButton,isFirstVisit:a})),n.push(t.teamDarkWebInsightsRoutePath)},children:e(fd.GET_STARTED_CTA)},"primary")},Cd=({data:e,companyName:t})=>{const{translate:n}=(0,g.Z)(),[a]=Object.keys(e),i=e[a];return(0,f.BX)(cd,{children:[(0,f.tZ)(o.Ct,{layout:"labelOnly",label:n(fd.TEAM_NEW_LABEL),mood:"brand"}),(0,f.tZ)(o.X6,{textStyle:"ds.title.section.medium",color:"ds.text.neutral.catchy",as:"h3",sx:{marginTop:"1em",width:"100%",overflow:"hidden"},children:n(fd.HEADING,{companyName:t})}),(0,f.tZ)(o.nv,{textStyle:"ds.body.standard.regular",color:"ds.text.neutral.standard",children:n(fd.SUBTEXT)}),(0,f.BX)("div",{sx:{backgroundColor:`${B.colors.dashGreen06}`,padding:"2px 14px",width:"100%",borderRadius:"10px"},children:[(0,f.tZ)(ld,{count:i.leaksCount,labelAndTooltip:fd.SECURITY_INCIDENTS,primaryColor:B.colors.dashGreen01}),(0,f.tZ)(ld,{count:i.emailsImpactedCount,labelAndTooltip:fd.EMAILS_AFFECTED,primaryColor:B.colors.dashGreen01})]}),xd||(xd=(0,f.tZ)(vd,{}))]})},Ed=({companyName:e})=>{const{translate:t}=(0,g.Z)();return(0,f.BX)(cd,{children:[(0,f.tZ)("div",{sx:{alignSelf:"end"},children:(0,f.tZ)(o.Ct,{layout:"labelOnly",label:t(fd.TEAM_NEW_LABEL),mood:"brand"})}),(0,f.tZ)("img",{sx:{backgroundColor:`${B.colors.midGreen05}`,height:"122px",width:"122px",borderRadius:"50%",backgroundImage:`url(${bd})`,backgroundRepeat:"no-repeat",backgroundSize:"cover",backgroundPositionX:"60%"}}),(0,f.tZ)(o.X6,{textStyle:"ds.title.section.medium",color:"ds.text.neutral.catchy",as:"h3",sx:{width:"100%"},children:t(fd.ALTERNATE_HEADING,{companyName:e})}),(0,f.tZ)(o.nv,{textStyle:"ds.body.standard.regular",color:"ds.text.neutral.standard",children:t(fd.ALTERNATE_SUBTEXT)}),Sd||(Sd=(0,f.tZ)(vd,{}))]})},Zd=({dwiSummaryResponse:e})=>{var t;const{spaceDetails:n}=(0,Ce.fV)(),a=null!=(t=n?.teamName)?t:"-";return e?.success?(0,f.tZ)(Cd,{data:e.data,companyName:a}):(0,f.tZ)(Ed,{companyName:a})};var Td,Dd,kd;const Id={seats:{pending:0,provisioned:0,used:0},passwordHealthHistory:[],passwordHealth:{compromised:0,passwords:0,reused:0,safe:0,securityIndex:0,weak:0}},Ad=()=>{const{data:e,status:t}=(0,c.k)(Kl.B,"getReport"),n=t===Ze.rq.Success?e:Id,a=t===Ze.rq.Loading,{verifiedOrPendingDomain:{domain:i,status:s}}=ec(),[d,u]=(0,r.useState)(null),p=t===Ze.rq.Success&&0===n.passwordHealthHistory.length,h=(0,r.useCallback)((async()=>{const e=await fe.C.getDarkWebInsightsSummary();u(e)}),[]);(0,r.useEffect)((()=>{(0,m.Nc)(l.PageView.TacDashboard),h()}),[h]);const y=(({dismissible:e})=>{const t=(0,ac.D)(),n=(0,re.C)(),a=(0,ie.lZ)();if(!n||a.isLoading)return!1;const i=n.isFreeTrial;if(n.spaceTier===_.lD.Business&&!i)return!1;const r=t.find((e=>e.type===nc.U.DASHBOARD_UPRADE&&e.dismissedAt));return!e||!r})({dismissible:!0}),{translate:b}=(0,g.Z)();return(0,f.BX)(zo,{header:(0,f.tZ)(o.X6,{as:"h1",color:"ds.text.neutral.standard",textStyle:"ds.title.section.large",children:b("dashboard_page_title")}),children:[(0,f.BX)(B.T5p,{fullWidth:!0,alignItems:"top",gap:"32px",gridTemplateColumns:"710px auto",gridTemplateRows:"auto auto",gridTemplateAreas:`'cards cards' '${y?"pwHealth upgrade":"pwHealth dwi"}'`,children:[(0,f.tZ)(B.dDn,{gridArea:"cards",children:(0,f.tZ)(Ic,{passwordHealth:n.passwordHealth,seats:n.seats,passwordHealthHistoryEmpty:p})}),(0,f.tZ)(B.dDn,{gridArea:"pwHealth",sx:{minHeight:"418px"},children:(0,f.tZ)(rd,{isLoading:a,report:n,passwordHealthHistoryEmpty:p})}),y?(0,f.tZ)(B.dDn,{gridArea:"upgrade",sx:{width:"282px"},children:(0,f.tZ)(B.Zbd,{sx:{padding:"16px",backgroundColor:"ds.container.agnostic.neutral.supershy",borderColor:"ds.border.neutral.quiet.idle"},children:Td||(Td=(0,f.tZ)(xc,{dismissible:!0}))})}):(0,f.tZ)(B.dDn,{gridArea:"dwi",children:s===Jl.Loading?Dd||(Dd=(0,f.tZ)(cd,{})):null!==i?(0,f.tZ)(yd,{verifiedOrPendingDomain:i,dwiSummaryResponse:d}):(0,f.tZ)(Zd,{dwiSummaryResponse:d})})]}),a?kd||(kd=(0,f.tZ)(tc.a,{})):null]})},Nd=()=>{const{translate:e}=(0,g.Z)();return(0,f.tZ)("div",{children:(0,f.BX)(tl,{children:[(0,f.tZ)(o.X6,{as:"h3",textStyle:"ds.title.block.medium",children:e("team_breach_report_need_help")}),(0,f.tZ)(o.nv,{textStyle:"ds.body.standard.regular",color:"ds.text.neutral.quiet",children:e("team_dark_web_insights_need_help_description")}),(0,f.tZ)(al,{href:"https://support.dashlane.com/hc/articles/5015658490514",onClick:()=>{(0,m.Kz)(new l.UserOpenHelpCenterEvent({helpCenterArticleCta:l.HelpCenterArticleCta.LearnAboutDarkWebInsights}))},children:e("team_dark_web_insights_learn_more_txt")}),(0,f.tZ)(al,{href:sd,onClick:()=>{(0,m.Kz)(new l.UserOpenHelpCenterEvent({helpCenterArticleCta:l.HelpCenterArticleCta.LearnAboutDomainVerification}))},children:e("team_breach_report_learn_domain_verification_txt")})]})})};var wd=n(94017),Od=n.n(wd);const Rd=({registerDomain:e=(()=>{}),disabled:t,registrationError:n,clearRegistrationErrors:a=(()=>{}),domainLoadError:i})=>{const{translate:s}=(0,g.Z)(),[o,l]=r.useState(""),c=i?"":s("team_settings_domain_url_placeholder");return(0,f.BX)(f.HY,{children:[(0,f.BX)("div",{className:"domainUrlInput--VQjVVbbN2d",children:[(0,f.tZ)(B.oil,{value:o,placeholder:c,fullWidth:!0,feedbackText:n,feedbackType:n?"error":void 0,onChange:e=>{n&&a(),l(e.target.value)},disabled:!!i||t}),i&&(0,f.tZ)("p",{className:"domainLoadErrorText--WEJL2Ne0Pt",children:i})]}),(0,f.tZ)(B.zxk,{type:"button",className:M()("domainUrlButton--lFqlfJ3Gzv",{"domainLoadError--ajAHmgDUO9":i}),disabled:t,nature:"secondary",onClick:()=>e(o),children:s("team_settings_domain_button_add")})]})};var Ld=n(18402),Md=n.n(Ld);const Bd=({domain:e,onConfirm:t,onDismiss:n})=>{const{translate:a}=(0,g.Z)(),[i,s]=(0,r.useState)(!1),o=(0,r.useRef)(!1);return(0,r.useEffect)((()=>()=>{o.current=!0}),[o]),(0,f.tZ)(yi.o,{isOpen:!0,onRequestClose:n,footer:(0,f.tZ)(B.cNS,{primaryButtonTitle:a("team_settings_domain_deactivate_button_remove"),primaryButtonOnClick:async()=>{s(!0),await t(),o.current||(s(!1),n())},primaryButtonProps:{disabled:i},secondaryButtonTitle:a("team_settings_domain_deactivate_button_cancel"),secondaryButtonOnClick:n,intent:"primary"}),title:a("team_settings_domain_deactivate_title"),children:(0,f.tZ)("p",{children:a.markup("team_settings_domain_deactivate_description_markup",{domainUrl:e.name})})})},Pd=({domain:e,deactivateDomain:t,isDisabled:n,disabledTooltipText:a})=>{const[i,s]=(0,r.useState)(!1);return(0,f.BX)(f.HY,{children:[i?(0,f.tZ)(Bd,{domain:e,onConfirm:t,onDismiss:()=>s(!1)}):null,(0,f.tZ)("div",{className:"deactivateTrashcan--nLkrRLE9CS",onClick:()=>{n||s(!0)},children:(0,f.tZ)(B.ua7,{passThrough:!n,placement:"top",content:null!=a?a:"",sx:{maxWidth:"180px"},children:(0,f.tZ)(B.XHJ,{disabled:n,size:25,color:Md()["--dash-green-00"]})})})]})},Ud="column--QmWD9Od6Ul",zd=({label:e,centerLabel:t,labelHelper:n,children:a})=>(0,f.BX)("div",{className:"row--b0sY7KH6EJ",children:[(0,f.BX)("div",{className:Ud,children:[(0,f.tZ)("div",{className:M()("label--IAVg4TIabV",{"centerLabel--kRDzb_3UrS":t}),children:e}),n?(0,f.tZ)("div",{className:"labelHelper--ZvFzwTua9S",children:n}):null]}),(0,f.tZ)("div",{className:Ud,children:a})]});let Xd=function(e){return e[e.ClaimDomain=0]="ClaimDomain",e[e.VerifyDomain=1]="VerifyDomain",e[e.SSOConnector=2]="SSOConnector",e[e.EnableSSO=3]="EnableSSO",e}({}),qd=function(e){return e[e.SSOConnector=0]="SSOConnector",e[e.ConfigureIDP=1]="ConfigureIDP",e[e.EnableSSO=2]="EnableSSO",e}({}),jd=function(e){return e[e.dismiss=0]="dismiss",e[e.action=1]="action",e}({});const Gd="team_settings_domain_deactivate_button_tooltip_error",Fd=({currentStep:e,deactivateDomain:t,domain:n,isDisabled:a,setCurrentSteps:i,verifyDomain:s})=>{var o;const[l,c]=r.useState(!1),{translate:d}=(0,g.Z)();return(0,f.BX)("div",{className:"domainContainer--uTWD0PQykR",children:[(()=>{if(!n)return null;switch(e){case Wd.Verify:case Wd.VerifyFailed:return(0,f.BX)(f.HY,{children:[(0,f.tZ)(Qd,{domain:n,verifyDomain:()=>c(!0),domainStep:e}),(0,f.tZ)(Pd,{domain:n,deactivateDomain:()=>t(n),isDisabled:a,disabledTooltipText:d(Gd)})]});case Wd.Complete:return(0,f.BX)(f.HY,{children:[o||(o=(0,f.tZ)(t_,{domain:n})),(0,f.tZ)(Pd,{domain:n,deactivateDomain:()=>t(n),isDisabled:a,disabledTooltipText:d(Gd)})]});default:return null}})(),(()=>{if(!n||!l)return null;switch(e){case Wd.Verify:return(0,f.tZ)(r_,{domainName:n.name,onConfirm:()=>s(n),onDismiss:()=>c(!1)});case Wd.VerifyFailed:return(0,f.tZ)(s_,{onDismiss:()=>{i((e=>({...e,[n.id]:Wd.Verify}))),c(!1)}});default:return null}})()]},n.id)},Vd="team_settings_domain_register_invalid_error",Hd={INVALID_PUBLIC_DOMAIN:"team_settings_domain_register_public_error",DOMAIN_CONTAINS_EXISTING_NONTEAM_USERS:"team_settings_domain_register_contact_support"};let Wd=function(e){return e[e.Register=0]="Register",e[e.Verify=1]="Verify",e[e.VerifyFailed=2]="VerifyFailed",e[e.Complete=3]="Complete",e}({});const $d=({isTeamSettingsLoading:e,teamSettings:t,setStepComplete:n,uncompleteSteps:a})=>{const{translate:i}=(0,g.Z)(),[s,o]=r.useState(!1),[l,c]=r.useState([]),[d,_]=r.useState(""),[u,m]=r.useState(""),[p,h]=r.useState({}),y=e=>"valid"===e.status,b=()=>l.filter((e=>y(e))),x=t?.ssoEnabled||!1,S=r.useCallback(((e=[])=>{e.forEach((e=>{switch(e.status){case Ql.p.pending:h((t=>({...t,[e.id]:Wd.Verify}))),n(Xd.ClaimDomain);break;case Ql.p.valid:h((t=>({...t,[e.id]:Wd.Complete}))),n(Xd.ClaimDomain),n(Xd.VerifyDomain);break;default:h((t=>({...t,[e.id]:Wd.Register})))}}))}),[]),v=r.useCallback((async()=>{o(!0),m("");const e=await fe.C.getTeamDomains();return o(!1),e.success?(c(e.domains),e.domains):(m(i("team_settings_domain_fetch_error")),Promise.resolve(void 0))}),[fe.C.getTeamDomains]),C=async e=>{const t=await fe.C.completeTeamDomainRegistration();t.success&&t.domains.find((t=>t.name===e.name))&&t.domains.find((t=>t.name===e.name))?.status===Ql.p.valid?(n(Xd.VerifyDomain),h((t=>({...t,[e.id]:Wd.Complete})))):h((t=>({...t,[e.id]:Wd.VerifyFailed})))},E=async e=>{e&&(await fe.C.deactivateTeamDomain({domain:e.name})).success&&(S(await v()),b().length||a([Xd.EnableSSO,Xd.SSOConnector,Xd.ClaimDomain,Xd.VerifyDomain]))};return r.useEffect((()=>{(async()=>{S(await v())})()}),[v,S]),(0,f.BX)(f.HY,{children:[(0,f.tZ)(zd,{label:`1. ${i("team_settings_domain_title")}`,labelHelper:i("team_settings_domain_multi_description"),children:s||e?(0,f.tZ)(Ci.Z,{size:20,containerStyle:{alignItems:"normal"}}):(0,f.tZ)(Rd,{registerDomain:async e=>{if(l.length>=5)return;if(!Od().isFQDN(e))return void _(i(Vd));const t=await fe.C.registerTeamDomain({domain:e});if(t.success)S(await v());else if(!t.success){const{error:{code:e}}=t,n=Hd[e];_(i(null!=n?n:Vd))}},domainLoadError:u,registrationError:d,disabled:l.length>=5,clearRegistrationErrors:()=>_("")})}),s||e||0===l.length?null:(0,f.BX)(f.HY,{children:[(0,f.tZ)("div",{className:"divider--SU_Ctssudp"}),(0,f.tZ)(zd,{label:i("team_settings_domain_added"),children:(0,f.tZ)("div",{className:"domainsContainer--eO_SBqHaFr",children:l.map(((e,t)=>t<5?(0,f.tZ)(Fd,{currentStep:p[e.id],deactivateDomain:E,domain:e,isDisabled:x&&1===b().length&&y(e),setCurrentSteps:h,verifyDomain:C},e.id):null))})})]})]})},{orange00:Yd,dashGreen02:Kd}=B.colors,Qd=({verifyDomain:e,domain:t,domainStep:n})=>{const{translate:a}=(0,g.Z)();return(0,f.BX)(B.T5p,{gap:"10px",gridTemplateColumns:"1fr auto",children:[(0,f.tZ)(B.oil,{value:t?t.name:"",fullWidth:!0,readOnly:!0,endAdornment:(0,f.BX)(B.T5p,{gridTemplateColumns:"auto auto",gap:"5px",children:[(0,f.tZ)(B.nvN,{size:"small",color:n===Wd.VerifyFailed?Yd:Kd,children:n===Wd.VerifyFailed?a("team_settings_domain_verify_failed"):a("team_settings_domain_not_verified")}),(0,f.tZ)(B.enX,{color:n===Wd.VerifyFailed?Yd:Kd})]}),feedbackType:n===Wd.VerifyFailed?"warning":void 0}),(0,f.tZ)(B.zxk,{nature:"secondary",onClick:e,type:"button",children:a("team_settings_domain_button_verify")})]})};var Jd;const{accessibleValidatorGreen:e_}=B.colors,t_=({domain:e})=>(0,f.tZ)(B.oil,{value:e.name,endAdornment:Jd||(Jd=(0,f.tZ)(B.rE2,{color:e_})),readOnly:!0,fullWidth:!0});var n_,a_=n(1234);const i_="team_settings_domain_verify_load_error",r_=({description:e,isDarkWebInsights:t,secondaryDescription:n,domainName:a,href:i="https://support.dashlane.com/hc/articles/360013149040",linkLabel:s,onClick:c,onDismiss:d,onConfirm:_})=>{const{translate:u}=(0,g.Z)(),[p,h]=(0,r.useState)({id:0,name:""}),[y,b]=(0,r.useState)(""),[x,S]=(0,r.useState)(!1),[v,C]=(0,r.useState)(!1);(0,r.useEffect)((()=>{(async()=>{S(!0);try{const e=await fe.C.getTeamDomains();if(e.success){const t=e.domains.find((e=>e.name===a));t?h(t):b(u(i_))}}catch(e){b(u(i_))}finally{S(!1)}})()}),[a,u]);const{dnsToken:{computedToken:E,challengeDomain:Z}={computedToken:"",challengeDomain:""}}=p,T=({id:e,inputValue:t,labelText:n})=>({textInputProps:{id:e,label:n,readOnly:!0,disabled:x,fullWidth:!0,startAdornment:x?n_||(n_=(0,f.tZ)(o.ZX,{})):void 0},iconButtonProps:{disabled:x},inputValue:t});return(0,f.BX)(B.VqE,{isOpen:!0,onClose:d,closeIconName:u("_common_dialog_dismiss_button"),children:[(0,f.tZ)(B.$N8,{title:u("team_settings_domain_verify_title")}),(0,f.tZ)(B.a7O,{children:(0,f.BX)(B.T5p,{gap:"32px",gridTemplateColumns:"1fr",gridAutoRows:"auto",children:[(0,f.tZ)(B.nvN,{color:B.colors.grey00,children:e||u.markup("team_settings_domain_verify_description_markup",{domainUrl:a})}),y?(0,f.tZ)(B.nvN,{color:B.colors.red00,children:y}):(0,f.BX)(f.HY,{children:[(0,f.tZ)(a_.x,{...T({id:"hostnameInput",labelText:u("team_settings_domain_verify_host"),inputValue:Z})}),(0,f.tZ)(a_.x,{...T({id:"txtValueInput",labelText:u("team_settings_domain_verify_txt"),inputValue:E})})]}),n?(0,f.tZ)(B.nvN,{color:B.colors.grey00,children:n}):null]})}),(0,f.tZ)(B.cNS,{primaryButtonTitle:u("team_settings_domain_verify_confirm"),primaryButtonOnClick:async()=>{C(!0);try{await _()}catch(e){b(e.message),t&&(0,m.Kz)(new l.UserVerifyDomainEvent({domainVerificationStep:l.DomainVerificationStep.DomainVerificationError}))}finally{C(!1),t&&(0,m.Kz)(new l.UserVerifyDomainEvent({domainVerificationStep:l.DomainVerificationStep.TapVerifyDomainCtaWithDnsInformation}))}},primaryButtonProps:{disabled:!!y||x||v},intent:"primary",children:(0,f.tZ)(B.rUS,{sx:{alignSelf:"center",mr:"auto"},color:B.colors.midGreen00,target:"_blank",rel:"noopener noreferrer",href:i,onClick:c,children:s||u("team_settings_domain_verify_setup")})})]})},s_=({onDismiss:e,domainName:t})=>{const{translate:n}=(0,g.Z)(),a=t?n.markup("team_settings_domain_verify_failure_title_markup",{domainUrl:t}):n("team_settings_domain_verify_failure_title");return(0,f.BX)(B.VqE,{isOpen:!0,onClose:e,children:[(0,f.tZ)(B.$N8,{title:a}),(0,f.tZ)(B.a7O,{children:n("team_settings_domain_verify_failure_desc")}),(0,f.tZ)(B.cNS,{primaryButtonTitle:n("team_settings_domain_verify_failure_button"),primaryButtonOnClick:e,intent:"primary"})]})},o_=({description:e,isDarkWebInsights:t,secondaryDescription:n,domainName:a,linkLabel:i,href:s,onClick:o,onDismiss:l,onError:c,onSuccess:d})=>{const[_,u]=(0,r.useState)(!1),m=(0,r.useRef)(!1),p=(0,r.useCallback)((async()=>{const e=await fe.C.completeTeamDomainRegistration();if(!m.current){if(e.success){const t=e.domains.find((e=>e.name===a));t?.status===Ql.p.valid?d():c&&c()}else u(!0);return()=>{m.current=!0}}}),[a,d,c]);return _?(0,f.tZ)(s_,{onDismiss:l,domainName:a}):(0,f.tZ)(r_,{description:e,isDarkWebInsights:t,secondaryDescription:n,linkLabel:i,domainName:a,href:s,onConfirm:p,onDismiss:l,onClick:o})},l_={CONTAINER:{position:"relative",paddingLeft:"34px",borderLeft:"1px dashed ds.border.brand.standard.idle",paddingBottom:"16px",paddingRight:"24px",marginTop:"15px",flexBasis:"33%"},IMG:{position:"absolute",top:0,left:0,transform:"translate(-50%, -30%)"}},c_=({img:e,title:t,subtitle:n,caps:a,titleColor:i})=>(0,f.BX)("div",{sx:l_.CONTAINER,children:[(0,f.tZ)("img",{src:e,sx:l_.IMG}),(0,f.tZ)(o.nv,{textStyle:"ds.title.block.medium",color:i,sx:{marginBottom:"8px",textTransform:a?"uppercase":void 0},children:t}),(0,f.tZ)(o.nv,{color:"ds.text.neutral.quiet",textStyle:"ds.body.reduced.regular",children:n})]}),d_=()=>{const{translate:e}=(0,g.Z)();return(0,f.tZ)(B.Zbd,{sx:{padding:"32px 24px"},children:(0,f.BX)(o.kC,{sx:{paddingLeft:"24px",borderBottomColor:"ds.border.brand.standard.idle",borderBottomStyle:"solid",borderBottomWidth:"1px"},justifyContent:"space-between",children:[(0,f.tZ)(c_,{img:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNTMiIGhlaWdodD0iNTMiIHZpZXdCb3g9IjAgMCA1MyA1MyIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGNpcmNsZSB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGN4PSI1MCUiIGN5PSI1MCUiIHI9IjI1IiBzdHJva2U9IiMwMDllYWEiIGZpbGw9IiNGNkY5RkEiLz4KPHBhdGggZD0iTTI2LjEyODMgMzBIMjcuNjE2M1YyMS4zMjRIMjYuNjIwM0MyNi41NjAzIDIyLjA1IDI2LjAzODMgMjIuNDQ2IDI0LjUyMDMgMjIuNDQ2VjIzLjMxNkgyNi4xMjgzVjMwWiIgZmlsbD0iIzAwOWVhYSIgZmlsbC1vcGFjaXR5PSIwLjk1IiBzdHJva2U9IiMwMDllYWEiIHN0cm9rZS1vcGFjaXR5PSIwLjk1IiBzdHJva2Utd2lkdGg9IjAuNSIgLz4KPC9zdmc+Cg==",title:e("team_breach_report_verify_domain_stepper_title"),subtitle:e("team_dark_web_insights_stepper_verify_domain_subtitle"),titleColor:"ds.text.brand.standard"}),(0,f.tZ)(c_,{img:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNTMiIGhlaWdodD0iNTMiIHZpZXdCb3g9IjAgMCA1MyA1MyIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGNpcmNsZSB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGN4PSI1MCUiIGN5PSI1MCUiIHI9IjI1IiBzdHJva2U9IiMwMDllYWEiIGZpbGw9IiNGNkY5RkEiLz4KPHBhdGggZD0iTTI0LjAwNDkgMzBIMzAuMTI0OVYyOC43NTJIMjUuNjMwOVYyOC42MjZDMjUuNjMwOSAyNi41NjIgMzAuMTA2OSAyNi44NSAzMC4xMDY5IDIzLjc1NEMzMC4xMDY5IDIyLjIzIDI4Ljk0MjkgMjEuMjA0IDI3LjA4ODkgMjEuMjA0QzI0Ljk0MDkgMjEuMjA0IDIzLjg1NDkgMjIuNDgyIDIzLjgzMDkgMjQuMDY2SDI1LjI0NjlDMjUuMzYwOSAyMy4wMjggMjYuMDUwOSAyMi40NCAyNy4wNDY5IDIyLjQ0QzI3Ljk4MjkgMjIuNDQgMjguNTcwOSAyMi45OCAyOC41NzA5IDIzLjc2QzI4LjU3MDkgMjUuODYgMjQuMDA0OSAyNS43MjIgMjQuMDA0OSAyOC44MThWMzBaIiBmaWxsPSIjMDA5ZWFhIiBmaWxsLW9wYWNpdHk9IjAuOTUiIHN0cm9rZT0iIzAwOWVhYSIgc3Ryb2tlLW9wYWNpdHk9IjAuOTUiIHN0cm9rZS13aWR0aD0iMC41Ii8+Cjwvc3ZnPgo=",title:e("team_dark_web_insights_view_insights_stepper_title"),subtitle:e("team_dark_web_insights_view_insights_stepper_subtitle")}),(0,f.tZ)(c_,{img:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNTQiIGhlaWdodD0iNTMiIHZpZXdCb3g9IjAgMCA1NCA1MyIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGNpcmNsZSB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGN4PSI1MCUiIGN5PSI1MCUiIHI9IjI1IiBzdHJva2U9IiMwMDllYWEiIGZpbGw9IiNGNkY5RkEiLz4KPHBhdGggZD0iTTIzLjczMzUgMjMuOTI4SDI1LjE0OTVDMjUuMjAzNSAyMi44MDYgMjYuMDAxNSAyMi4zNjggMjYuODc3NSAyMi4zNjhDMjcuOTA5NSAyMi4zNjggMjguNTYzNSAyMi44NzggMjguNTYzNSAyMy41NUMyOC41NjM1IDI0LjI4MiAyNy44NDM1IDI0Ljg1MiAyNi44MTc1IDI0Ljg4MkwyNi4wNzM1IDI0LjkxMlYyNi4xTDI2Ljg3NzUgMjYuMTI0QzI3Ljk2MzUgMjYuMTQ4IDI4Ljc3OTUgMjYuNjUyIDI4Ljc3OTUgMjcuNTM0QzI4Ljc3OTUgMjguMzU2IDI4LjA1MzUgMjguOTI2IDI2Ljg4MzUgMjguOTI2QzI1Ljk0MTUgMjguOTI2IDI1LjI0NTUgMjguNDM0IDI1LjA3NzUgMjcuNDAySDIzLjY1NTVDMjMuNjkxNSAyOS4wODIgMjQuOTAzNSAzMC4xMiAyNi44NTM1IDMwLjEzMkMyOC44MDk1IDMwLjE0NCAzMC4zNDU1IDI5LjIyIDMwLjM0NTUgMjcuNTdDMzAuMzQ1NSAyNi40MTggMjkuNTUzNSAyNS43MTYgMjguNTA5NSAyNS40MjhDMjkuNjI1NSAyNS4wNDQgMzAuMTI5NSAyNC4zNDggMzAuMTI5NSAyMy40OUMzMC4xMjk1IDIxLjk3MiAyOC43NzM1IDIxLjIwNCAyNi44OTU1IDIxLjIwNEMyNS4xNDM1IDIxLjIwNCAyMy43MzM1IDIyLjE0NiAyMy43MzM1IDIzLjkyOFoiIGZpbGw9IiMwMDllYWEiIGZpbGwtb3BhY2l0eT0iMC45NSIgIHN0cm9rZT0iIzAwOWVhYSIgc3Ryb2tlLW9wYWNpdHk9IjAuOTUiIHN0cm9rZS13aWR0aD0iMC41Ii8+Cjwvc3ZnPgo=",title:e("team_breach_report_reduce_risk_title"),subtitle:e("team_breach_report_reduce_risk_subtitle")})]})})};var __,u_=n(97962);const m_="team_breach_report_domain_register_invalid_error",p_={INVALID_PUBLIC_DOMAIN:"team_settings_domain_register_public_error",DOMAIN_CONTAINS_EXISTING_NONTEAM_USERS:"team_settings_domain_register_contact_support",DOMAIN_ALREADY_EXISTS:"team_settings_domain_register_duplicated_error"},g_=({onSuccess:e,onError:t})=>{const{translate:n}=(0,g.Z)(),a=(0,u_.f)(),{openDialog:i,shouldShowFrozenStateDialog:s}=(0,A.Ub)(),[c,d]=(0,r.useState)(""),[_,u]=(0,r.useState)(""),[p,h]=(0,r.useState)(!1),[y,b]=(0,r.useState)(!1);return(0,r.useEffect)((()=>{if(void 0!==a){const e=a.substring(a.lastIndexOf("@")+1);d(e)}}),[a]),(0,f.BX)(f.HY,{children:[__||(__=(0,f.tZ)(d_,{})),(0,f.BX)("div",{children:[(0,f.BX)(B.Zbd,{sx:{padding:"24px",margin:"24px 0"},children:[(0,f.tZ)(B.X6q,{size:"x-small",children:n("team_dark_web_insights_verify_domain_title")}),(0,f.tZ)(B.nvN,{sx:{marginBottom:"20px",marginTop:"10px"},color:B.colors.grey00,children:n("team_breach_report_verify_domain_description")}),(0,f.BX)(o.kC,{gap:"16px",children:[(0,f.tZ)("div",{sx:{width:"75%"},children:(0,f.tZ)(B.oil,{onChange:e=>{d(e.target.value),u("")},fullWidth:!0,value:c,autoFocus:!0,endAdornment:_||""===c||!Od().isFQDN(c)?void 0:(0,f.tZ)(B.rE2,{color:B.colors.accessibleValidatorGreen}),feedbackText:_||void 0,feedbackType:_?"error":void 0})}),(0,f.tZ)("div",{sx:{width:"20%"},children:(0,f.tZ)(B.zxk,{type:"button",disabled:""===c||y,onClick:()=>{(async e=>{if((0,m.Kz)(new l.UserVerifyDomainEvent({domainVerificationStep:l.DomainVerificationStep.TapContinueCtaWithDomainUrl})),s)return void i();if(!Od().isFQDN(e))return void u(n(m_));b(!0);const t=await fe.C.registerTeamDomain({domain:e});if(b(!1),t.success)return u(""),void h(!0);if(!t.success){const{error:{code:e}}=t,a=p_[e];u(n(null!=a?a:m_))}})(c),(0,m.Kz)(new l.UserVerifyDomainEvent({domainVerificationStep:l.DomainVerificationStep.TapContinueCtaWithDomainUrl}))},children:n("team_dwi_verify_domain_button")})})]})]}),p?(0,f.tZ)(o_,{description:n.markup("breach_report_verify_domain_dialog_description_markup"),secondaryDescription:n("breach_report_verify_domain_dialog_secondary_description"),linkLabel:n("breach_report_verify_domain_href_label"),href:sd,onClick:()=>{(0,m.Kz)(new l.UserOpenHelpCenterEvent({helpCenterArticleCta:l.HelpCenterArticleCta.ViewDomainVerificationGuide}))},domainName:c,onSuccess:()=>{e(c)},isDarkWebInsights:!0,onError:t,onDismiss:t}):null]})]})};async function h_(e,t,n=0){const a=await fe.C.getDarkWebInsightsReportResults({domain:e,offset:n,count:t});if(a?.success)return a.data;throw new Error("[fetchDarkWebInsightsResults] - Server Error: Unable to load dark web insight report results data")}var y_,b_,x_;const S_=({domainName:e})=>{const{translate:t}=(0,g.Z)();return(0,f.BX)(B.Zbd,{sx:{minHeight:"575px",padding:"24px",display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column"},children:[y_||(y_=(0,f.tZ)("img",{src:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTEzIiBoZWlnaHQ9IjExMyIgdmlld0JveD0iMCAwIDExMyAxMTMiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHg9IjAuNSIgd2lkdGg9IjExMiIgaGVpZ2h0PSIxMTMiIHJ4PSI1NiIgZmlsbD0iI0Y1RjdGNyIvPgo8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTUwLjAzMzggMjYuNTYyMkM0MC45NzkgMjcuNjk4NiAzNC41NiAzNS45NjAyIDM1LjY5NjQgNDUuMDE1TDM2LjY0OTUgNTIuNjA4NUwzMS45OTUyIDUzLjE5MjZDMzAuODk5MiA1My4zMzAyIDMwLjEyMjMgNTQuMzMwMSAzMC4yNTk4IDU1LjQyNjFMMzQuNTYyMSA4OS43MDVDMzQuNjk5NyA5MC44MDEgMzUuNjk5NyA5MS41Nzc5IDM2Ljc5NTYgOTEuNDQwNEw3OS4wNDI4IDg2LjEzOEM4MC4xMzg4IDg2LjAwMDQgODAuOTE1NyA4NS4wMDA1IDgwLjc3ODIgODMuOTA0NUw3Ni40NzU5IDQ5LjYyNTZDNzYuMzM4MyA0OC41Mjk2IDc1LjMzODQgNDcuNzUyNyA3NC4yNDI0IDQ3Ljg5MDJMNjkuNDM5NiA0OC40OTNMNjguNDg2NiA0MC44OTk1QzY3LjM1MDEgMzEuODQ0OCA1OS4wODg1IDI1LjQyNTcgNTAuMDMzOCAyNi41NjIyWk00MC43NDk5IDQ0LjQ2OTlMNDEuNjkxOSA1MS45NzU2TDY0LjM5MjggNDkuMTI2NUw2My40NTA3IDQxLjYyMDhDNjIuNjY0IDM1LjM1MjEgNTYuOTQ0NCAzMC45MDgxIDUwLjY3NTcgMzEuNjk0OUM0NC40MDcxIDMyLjQ4MTcgMzkuOTYzMSAzOC4yMDEyIDQwLjc0OTkgNDQuNDY5OVpNNzguMTg0MiAzMi4yODA4TDc0LjE0ODUgMzYuNDAzNkw3NS43NCAzNy45NjE2TDc5Ljc3NTggMzMuODM4OEw3OC4xODQyIDMyLjI4MDhaTTc3LjI0NzEgNDAuMDg4Mkw3OS45MzA0IDM5LjUxNDhMODAuMjkzMiA0MS4yMTI1TDc3LjYwOTkgNDEuNzg1OUw3Ny4yNDcxIDQwLjA4ODJaTTcxLjA0MTMgMzEuODczOEw3MC44ODg3IDM1Ljg0ODRMNzIuNzg0MiAzNS45MjEyTDcyLjkzNjggMzEuOTQ2Nkw3MS4wNDEzIDMxLjg3MzhaIiBmaWxsPSIjOUZBRUIxIi8+Cjwvc3ZnPgo="})),b_||(b_=(0,f.tZ)("br",{})),(0,f.tZ)(B.nvN,{color:B.colors.black,bold:!0,size:"large",children:t("team_dashboard_dark_web_insights_domain_incident_free_title",{domainName:e})}),x_||(x_=(0,f.tZ)("br",{})),(0,f.tZ)(B.nvN,{color:B.colors.grey00,children:t("team_dwi_domain_incident_free_description")})]})};var f_,v_,C_,E_;const Z_={minHeight:"575px",padding:"24px",display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column"},T_=()=>{const{translate:e}=(0,g.Z)();return(0,f.BX)(B.Zbd,{sx:Z_,children:[f_||(f_=(0,f.tZ)(o.ZX,{size:88})),v_||(v_=(0,f.tZ)("br",{})),(0,f.tZ)(B.nvN,{color:B.colors.grey00,children:e("team_dark_web_insights_scanning_incidents_txt")})]})},D_=()=>{const{translate:e}=(0,g.Z)();return(0,f.BX)(B.Zbd,{sx:Z_,children:[C_||(C_=(0,f.tZ)(o.ZX,{size:88})),E_||(E_=(0,f.tZ)("br",{})),(0,f.tZ)(B.nvN,{color:B.colors.grey00,children:e("team_dashboard_dark_web_insights_generating_msg")})]})},k_=e=>{const[t,n]=(0,r.useState)(!1),[a,i]=(0,r.useState)([]),[s,o]=(0,r.useState)(null),l=(0,r.useCallback)((async t=>{if(!t?.signal?.aborted)if(null!==e){n(!0);try{const t=await(0,Se.YY)({teamId:e});i(t)}catch(e){const t=new Error(`useTeamMember: ${e}`);o(t)}finally{n(!1)}}else o(new Error("No team id provided"))}),[e]);return(0,r.useEffect)((()=>{const e=new AbortController;return l(),()=>{e.abort()}}),[l]),{teamMembersLoading:t,teamMembersError:s,teamMembers:a,refreshTeamMembers:l}},I_=e=>e.filter((({status:e})=>"removed"!==e)).length;var A_=n(91578),N_=n(91032),w_=n(64467),O_=n(3090);var R_;const L_=["text/*",".csv",".txt"],M_="_common_dialog_dismiss_button",B_=({lee:e,isFreeTrial:t,isOpen:n,slotsTaken:a,slotsTotal:c,exclude:d,preFilledEmails:_,closeInviteDialog:u,handleInviteCompleteSuccess:p,handleInvitePartialSuccess:h,setShowActivationDialog:y})=>{const{routes:b}=(0,i.Xo)(),{translate:x}=(0,g.Z)(),{showToast:S}=(0,o.pm)(),{reportTACError:v}=Y(),{proposeMembers:C}=(0,F.u)(Aa.L),E=(0,Te.Y)(),{billingDetails:Z,amountToPay:k,amountToTax:I,onSeatCountChange:A}=Xi(null),[N,w]=(0,r.useState)(!1),[O,R]=(0,r.useState)(!1),[L,M]=(0,r.useState)(null!=_?_:new Set([])),[B,U]=(0,r.useState)(0),[z,X]=(0,r.useState)(0),[q,j]=(0,r.useState)(0),[G,V]=(0,r.useState)(0),[H,W]=(0,r.useState)(!1),$=pc();(0,r.useEffect)((()=>{R(N)}),[N]),(0,r.useEffect)((()=>{M(null!=_?_:new Set([]))}),[_]),(0,r.useEffect)((()=>{L.size||j(0)}),[L]);const K=()=>{u(),w(!1),U(0),X(0)},Q=async(t,n)=>{var a;n=null!=(a=n)?a:0,X(t.length),w(!0);const i=n+Math.min(t.length-n,500),r=t.slice(n,i),s={};try{const n=await(async t=>{if(!(0,ts.v0)(e.globalState)){const e=new Error(es.N);throw v(e),e}if(!e.apiMiddleware.teamPlans)throw new Error("we want to remove this middleware but we can't just yet!");try{const e=await C({proposedMemberLogins:t,force:!0});if("failure"===e.tag)throw new Error(e.error);return e.data}catch(e){const t=e.code&&e.subCode?`invite_error_${e.code}_${e.subCode}`:"team_members_invite_error_message";throw S({description:x(t),closeActionLabel:x(M_),mood:"danger"}),new Error(x(t))}})(r);if(U(i),(0,D.merge)(s,n),i<t.length)return Q(t,i);if((0,O_.e)(s)){h(s.proposedMembers,s.refusedMembers);const e=Object.keys(s.proposedMembers).length,t=Object.keys(s.refusedMembers).length;(0,m.Kz)(new l.UserSendManualInviteEvent({flowStep:l.FlowStep.Complete,inviteCount:e,inviteFailedCount:t,inviteResentCount:0,inviteSuccessfulCount:e-t,isImport:q>0,importSize:q,isResend:!1}))}else p(t),G<0?1===L.size?S({description:x("team_members_invite_success_message_with_added_seats_one_invite",{cost:x.price(Z.currency,(k+I)/100)}),closeActionLabel:x(M_),mood:"brand"}):S({description:x("team_members_invite_success_message_with_added_seats",{total:L.size,count:-G,cost:x.price(Z.currency,(k+I)/100)}),closeActionLabel:x(M_),mood:"brand"}):S({description:x("team_members_invite_success_message_with_count",{count:L.size}),closeActionLabel:x(M_),mood:"brand"}),(0,m.Kz)(new l.UserSendManualInviteEvent({flowStep:l.FlowStep.Complete,inviteCount:t.length,inviteFailedCount:0,inviteResentCount:0,inviteSuccessfulCount:t.length,isImport:q>0,importSize:q,isResend:!1}));return K()}catch(e){throw(0,m.Kz)(new l.UserSendManualInviteEvent({flowStep:l.FlowStep.Error,inviteCount:L.size,inviteFailedCount:L.size,inviteResentCount:0,inviteSuccessfulCount:0,isImport:q>0,importSize:q,isResend:!1})),K(),e}},J=e=>function(e){if(function(e){const t=e.match(/[\x00-\x09\x0e-\x1F]/g);return!!t&&t.length/e.length>.03}(e))return[];if(!e.includes("@"))return[e];return function(e){const t={};return e.forEach((e=>t[e]=!0)),Object.keys(t)}(e.match(/[^<> ,;:\t\n\r"']+@[a-zA-Z0-9_.-]+/g)||[])}(e).filter((e=>!L.has(e))),ee=e=>(0,Mn.vV)(e)&&!(e=>!!d?.includes(e))(e),te=e=>{j(e.length),M(new Set([...L,...e]))},ne=e=>{v(e)},ae=[...L].filter((e=>!ee(e))).length;let ie=0===L.size||ae>0||G<0&&fi(-G)||H;(0,r.useEffect)((()=>{if(c){const e=c-(L.size-ae)-a;V(e),e<0?(A(-e),(E.status===s.rq.Success&&(0,P.f1)(E.data)||$)&&W(!0)):W(!1)}}),[L,E,c,a]);const{loading:re,billingCountry:se}=T();if(re)return R_||(R_=(0,f.tZ)(o.ZX,{}));const oe="US"===se?"team_invite_dialog_input_counter_negative_tax":"team_invite_dialog_input_counter_negative_vat",le=x($?"team_dialog_standard_limit_warning":"team_dialog_starter_limit_warning");return(0,f.BX)(o.Vq,{isOpen:n,title:x("invite_user_dialog_title"),closeActionLabel:x(M_),onClose:()=>{N||((0,m.Kz)(new l.UserSendManualInviteEvent({flowStep:l.FlowStep.Cancel,inviteCount:L.size,inviteFailedCount:0,inviteResentCount:0,inviteSuccessfulCount:0,isImport:q>0,importSize:q,isResend:!1})),K(),M(new Set([])))},"aria-describedby":"dialogContent",actions:{primary:{children:x("invite_user_dialog_button"),onClick:async()=>{try{await Q([...L]),y(!0)}catch(e){(0,m.Kz)(new l.UserSendManualInviteEvent({flowStep:l.FlowStep.Error,inviteCount:L.size,inviteFailedCount:L.size,inviteResentCount:0,inviteSuccessfulCount:0,isImport:q>0,importSize:q,isResend:!1})),S({description:x("_common_generic_error"),closeActionLabel:x(M_),mood:"danger"})}M(new Set([]))},disabled:ie,layout:"iconLeading",icon:"ItemEmailOutlined"}},children:[(0,f.BX)("div",{sx:{display:"flex",flexDirection:"column",overflowY:"auto",gap:"8px",marginBottom:"16px"},children:[(0,f.tZ)(o.nv,{textStyle:"ds.body.standard.regular",color:"ds.text.neutral.quiet",children:x(N?"team_invite_dialog_input_label_sending":"invite_user_dialog_input_label")}),(0,f.tZ)(N_.Z,{accept:L_,passClicksThrough:!0,onChange:e=>{te(J(e.join("\0")))},onError:ne,children:(0,f.tZ)(w_.L,{setIsOverlayVisible:R,placeholder:x("team_invite_dialog_input_placeholder"),tags:[...L],isOverlayVisible:O,setTags:e=>{M(new Set(e))},formatToTags:J,validate:ee},"tags")}),H?(0,f.tZ)(o.ke,{title:(0,f.BX)(f.HY,{children:[(0,f.tZ)(o.nv,{textStyle:"ds.title.block.small",children:le}),(0,f.tZ)(i.rU,{to:b.teamAccountChangePlanRoutePath,children:x("team_dialog_starter_change_plan")})]}),mood:"brand",icon:"FeedbackSuccessOutlined"}):(()=>{if(!c)return null;const e=G<0?fi(-G)?x("team_account_teamplan_upgrade_premium_buy_more_seats_than_cap",{seatCap:bi,salesEmail:xi}):I?x(oe,{count:-G,total:c,cost:x.price(Z.currency,(k+I)/100)}):x("team_invite_dialog_input_counter_negative",{count:-G,total:c,cost:x.price(Z.currency,k/100)}):x("team_invite_dialog_input_counter",{count:G,total:c}),n=x("team_invite_dialog_input_counter_special",{total:c});let a=e;return t&&G<1&&(ie=G<0||ie,a=n),(0,f.tZ)(o.nv,{color:G<1?"ds.text.danger.quiet":"ds.text.positive.quiet",textStyle:"ds.body.reduced.regular",sx:{display:N?"none":"flex"},children:a})})()]}),(0,f.BX)("div",{sx:{display:"flex",flexDirection:"column"},children:[(0,f.tZ)(o.nv,{color:"ds.text.positive.quiet",textStyle:"ds.body.reduced.regular",sx:{display:N?"flex":"none"},children:x("team_invite_dialog_invitations_counter",{count:B,total:z})}),(0,f.tZ)("div",{sx:{display:N?"none":"flex"},children:(0,f.tZ)(N_.Z,{accept:L_,onChange:e=>{te(J(e.join("\0")))},onError:ne,children:(0,f.tZ)(o.nv,{as:"span",textStyle:"ds.title.section.medium",color:"ds.text.brand.quiet",sx:{cursor:"pointer"},children:x("team_invite_dialog_import_description")})})}),(0,f.tZ)(o.nv,{textStyle:"ds.body.reduced.regular",color:"ds.text.neutral.quiet",sx:{display:N?"none":"flex"},children:x("team_invite_dialog_import_example_text")})]})]})};var P_=n(21550);const U_={INVITE_RESTRICTED:"team_invite_result_dialog_refused_member_reason_admin_restricted_markup",PRE_EXISTING_MP_USER:"team_invite_result_dialog_refused_member_reason_pre_existing_mp_user_markup",GENERIC_ERROR:"team_invite_result_dialog_refused_member_reason_generic_error_markup",EMAIL_DOES_NOT_MATCH_SSO_DOMAIN:"team_invite_result_dialog_refused_member_reason_EMAIL_DOES_NOT_MATCH_SSO_DOMAIN",ALREADY_MEMBER:"team_invite_result_dialog_refused_member_reason_already_member",ALREADY_MEMBER_OTHER_TEAM:"team_invite_result_dialog_refused_member_reason_already_member_other_team",HAS_AUTOMATIC_RENEW:"team_invite_result_dialog_refused_member_reason_has_automatic_renew",NO_FREE_SLOT_FREE_PLAN:"team_invite_result_dialog_refused_member_reason_no_free_slot_free_plan",SSO_ALREADY_ACTIVATED:"team_invite_result_dialog_refused_member_reason_sso_already_activated",PENDING_DEACTIVATION_DOMAIN_DOES_NOT_MATCH:"team_invite_result_dialog_refused_member_reason_pending_deactivation_domain_does_not_match"};let z_=function(e){return e.SSO_ALREADY_ACTIVATED="sso_already_activated",e.USER_HAS_MASTER_PASSWORD="USER_HAS_MASTER_PASSWORD",e}({});const X_=e=>{switch(e){case U_.INVITE_RESTRICTED:return P_.Iu.markup(U_.INVITE_RESTRICTED,{helpCenter:ae.Iw});case U_.PRE_EXISTING_MP_USER:return P_.Iu.markup(U_.PRE_EXISTING_MP_USER,{ssoLimitations:ae.Iw,dashlaneSupport:ae.Bw});default:return P_.Iu.markup(U_.GENERIC_ERROR,{helpCenter:ae.Bw})}},q_="inviteResultDialogHeader--v_8lOJQXCj",j_="refusedMember--SNbCU5FzB1",G_="reason--jFHJ7kk1d9",F_="irDialogIcon--Rx0OQmu57r";var V_;const H_={invitedMembers:{},refusedMembers:{},show:!1},W_=()=>{const[e,t]=r.useState(H_);return{invitePartialSuccessState:e,setInvitePartialSuccessState:t,handleInvitationResultClosed:()=>{t(H_)}}},$_=({teamId:e,isOpen:t,invitedMembers:n,refusedMembers:a,onClose:i})=>{const{translate:s}=(0,g.Z)(),[o,l]=r.useState([]),[c,d]=r.useState([]),_=Object.keys(n).length,u=Object.keys(a).length,{teamSettings:m,teamSettingsLoading:p}=ve(e),h=m?.ssoEnabled;return r.useEffect((()=>{if(p)return;const e=[],t=[];Object.keys(a).forEach((n=>{const i=a[n];i!==z_.SSO_ALREADY_ACTIVATED||h?i===z_.USER_HAS_MASTER_PASSWORD&&h?t.push({email:n,key:U_.PRE_EXISTING_MP_USER,errorType:i}):e.push({email:n,errorType:i}):t.push({email:n,key:U_.INVITE_RESTRICTED,errorType:i})})),l(e),d(t)}),[p,h,a]),(0,f.BX)(B.VqE,{closeIconName:s("_common_dialog_dismiss_button"),isOpen:t,onClose:i,ariaDescribedby:"refusedList",children:[(0,f.tZ)(B.$N8,{title:s("team_invite_result_dialog_title")}),(0,f.tZ)(B.a7O,{children:p?V_||(V_=(0,f.tZ)(Ci.Z,{size:30})):(0,f.BX)(f.HY,{children:[_?(0,f.BX)("div",{className:"successfulInvitesRatio--Jbd0Eax7op",children:[(0,f.tZ)("img",{src:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTgiIGhlaWdodD0iMTgiIHZpZXdCb3g9IjAgMCAxOCAxOCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICA8cGF0aCBkPSJNNiA5TDcuOTU5MjggMTFMMTEuOTc5NiA3TTAuNSA5QzAuNSA0LjMwNTQ1IDQuMzA2MyAwLjUgOSAwLjVDMTMuNjkzNyAwLjUgMTcuNSA0LjMwNTQ1IDE3LjUgOUMxNy41IDEzLjY5NDYgMTMuNjkzNyAxNy41IDkgMTcuNUM0LjMwNjMgMTcuNSAwLjUgMTMuNjk0NiAwLjUgOVoiIHN0cm9rZT0iIzIwQjQyMiIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIi8+Cjwvc3ZnPgo=",className:F_}),(0,f.tZ)("span",{className:q_,children:s("team_invite_result_dialog_successful_invites_rate",{proposedMembers:_+u,invitedMembers:_})})]}):null,(0,f.BX)("div",{className:"refusedMemberListTitle--Omq1aAlxkx",children:[(0,f.tZ)("img",{src:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTgiIGhlaWdodD0iMTgiIHZpZXdCb3g9IjAgMCAxOCAxOCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICA8cGF0aCBkPSJNNS41IDEyLjVMMTIuNSA1LjVNMTIuNSAxMi41TDUuNSA1LjVNMC41IDlDMC41IDQuMzA1ODcgNC4zMDU4NyAwLjUgOSAwLjVDMTMuNjk0MSAwLjUgMTcuNSA0LjMwNTg3IDE3LjUgOUMxNy41IDEzLjY5NDEgMTMuNjk0MSAxNy41IDkgMTcuNUM0LjMwNTg3IDE3LjUgMC41IDEzLjY5NDEgMC41IDlaIiBzdHJva2U9IiNGRjAwMkQiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIvPgo8L3N2Zz4K",className:F_}),(0,f.tZ)("span",{id:"refusedList",className:q_,children:s("team_invite_result_dialog_refused_member_list_title",{count:u})})]}),(0,f.BX)("ul",{className:"refusedMemberList--pPxtCXVRX3",children:[o.map((e=>(0,f.BX)("li",{className:j_,children:[e.email,(0,f.BX)("span",{className:G_,children:[": ",U_[e.errorType.toUpperCase()]?s(U_[e.errorType.toUpperCase()]):s.markup(U_.GENERIC_ERROR,{helpCenter:ae.Bw},{linkTarget:"_blank"})]})]},e.email))),c.map((e=>(0,f.BX)("li",{className:j_,children:[e.email,(0,f.BX)("span",{className:G_,children:[": ",X_(e.key)]})]},e.email)))]})]})}),(0,f.tZ)(B.cNS,{primaryButtonTitle:s("team_invite_result_dialog_button_ok"),primaryButtonOnClick:i,secondaryButtonTitle:s("team_invite_result_dialog_button_help_center"),secondaryButtonOnClick:()=>(0,X.Yo)(ae.Bw)})]})};var Y_=n(70141);function K_(){const[e,t]=(0,r.useState)(!0),[n,a]=(0,r.useState)(null),[i,s]=(0,r.useState)(null),[o,l]=(0,r.useState)(null),c=(0,r.useCallback)((async(e,t)=>{try{const n=await fe.C.requestInviteLinkToken({teamUuid:e,login:t});if(n.success)return n.data;l(n.error.code)}catch{l(Y_.S)}return null}),[]);return{inviteLinkDataLoading:e,inviteLinkError:o,inviteLinkData:n,inviteLinkDataForAdmin:i,getInviteLinkData:(0,r.useCallback)((async e=>{t(!0);try{const t=await fe.C.getInviteLink({teamKey:e});if(t.success)return a(t.data),t.data;l(t.error.code)}catch{l(Y_.S)}finally{t(!1)}return null}),[]),requestInviteLinkToken:c,getInviteLinkDataForAdmin:(0,r.useCallback)((async()=>{t(!0);try{const e=await fe.C.getInviteLinkForAdmin({});if(e.success)return s(e.data),e.data;l(e.error.code)}catch{l(Y_.S)}finally{t(!1)}return null}),[]),createInviteLink:(0,r.useCallback)((async e=>{t(!0);try{const t=await fe.C.createInviteLink({displayName:e});if(t.success)return t.data;l(t.error.code)}catch{l(Y_.S)}finally{t(!1)}return null}),[]),changeInviteLinkTeamKey:(0,r.useCallback)((async()=>{t(!0);try{const e=await fe.C.changeInviteLinkTeamKey({});if(e.success)return e.data;l(e.error.code)}catch{l(Y_.S)}finally{t(!1)}return null}),[]),toggleInviteLink:(0,r.useCallback)((async e=>{t(!0);try{const t=await fe.C.toggleInviteLink({disabled:e});if(t.success)return t.data;l(t.error.code)}catch{l(Y_.S)}finally{t(!1)}return null}),[])}}const Q_="_common_toast_close_label",J_=({showActivationDialog:e,setShowActivationDialog:t,setShowSharingDialog:n})=>{const{toggleInviteLink:a,createInviteLink:i,getInviteLinkDataForAdmin:r}=K_(),{setAsInteracted:s}=(0,ge.d)(_e.O.ActivateInviteLink),{translate:l}=(0,g.Z)(),{showToast:c}=(0,o.pm)(),d=ur();return d?(0,f.tZ)(o.Vq,{title:l("team_activation_dialog_title"),closeActionLabel:l("_common_dialog_dismiss_button"),isOpen:e,onClose:()=>t(!1),actions:{primary:{children:l("team_activation_dialog_activate_button"),onClick:async()=>{s?.(),t(!1);const e=await r();e?.teamKey?await a(!1):(await i(d),c({description:l("team_activation_dialog_notification"),mood:"brand",closeActionLabel:l(Q_)})),n(!0)}},secondary:{children:l("team_activation_dialog_notrightnow_button"),onClick:()=>{s?.(),t(!1),c({description:l("team_activation_dialog_cancel_notification"),mood:"brand",closeActionLabel:l(Q_)})}}},children:(0,f.tZ)(o.nv,{sx:{marginBottom:"15px"},children:l("team_activation_dialog_paragrah")})}):null};var eu=n(33090);const tu=({showSharingDialog:e,setShowSharingDialog:t})=>{const{translate:n}=(0,g.Z)(),{inviteLinkDataForAdmin:a,getInviteLinkDataForAdmin:i}=K_(),s=(0,ta.V)();return(0,r.useEffect)((()=>{i()}),[i]),(0,f.BX)(B.VqE,{closeIconName:n("_common_dialog_dismiss_button"),isOpen:e,onClose:()=>t(!1),children:[(0,f.tZ)(B.$N8,{title:n("team_sharing_invite_dialog_title")}),(0,f.BX)(B.a7O,{children:[(0,f.tZ)(B.nvN,{sx:{marginBottom:"15px"},color:B.colors.dashGreen01,children:n("team_sharing_invite_dialog_paragrah")}),(0,f.tZ)(B.nvN,{sx:{marginBottom:"15px",fontWeight:"600"},color:B.colors.dashGreen01,children:(0,ae.cI)(a?.teamKey)})]}),(0,f.tZ)(B.cNS,{children:(0,f.tZ)(eu.q,{copyValue:(0,ae.cI)(a?.teamKey),buttonText:n("team_sharing_invite_dialog_copy_link"),onClick:()=>{navigator.clipboard.writeText((0,ae.cI)(a?.teamKey)),s.showAlert(n("team_sharing_invite_dialog_copied_notification"),B.BLW.SUCCESS)}})})]})};var nu=n(35214);const au=()=>{const{data:e,status:t}=(0,c.k)(nu.t,"inviteLinkData"),{data:n,status:a}=(0,c.k)(d.o,"getTeamName"),{data:i,status:r}=(0,c.k)(d.o,"getTeamId"),{requestUserInviteTokenSending:s}=(0,F.u)(nu.t),{toggleInviteLink:o}=(0,F.u)(nu.t);if(t===Ze.rq.Error||a===Ze.rq.Error||r===Ze.rq.Error||null===i?.teamId||null===e)return{status:Ze.rq.Error};if(t===Ze.rq.Loading||a===Ze.rq.Loading||r===Ze.rq.Loading)return{status:Ze.rq.Loading};const l=i.teamId;return{status:t,teamKey:e.teamKey,enabled:e.enabled,sendRequestInviteToken:async e=>{try{await s({login:e,teamUuid:l})}catch(e){throw new Error(`sendRequestInviteToken fetchData: failed with error: ${e}`)}},sendToggleInviteLink:async e=>{try{await o({enabled:e,teamName:n})}catch(e){throw new Error(`sendToggleInviteLink fetchData: failed with error: ${e}`)}}}},iu="_common_toast_close_label",ru=({isOpen:e,onCancel:t,onInviteLinkActivation:n})=>{const{translate:a}=(0,g.Z)(),{showToast:i}=(0,o.pm)(),r=au(),{setAsInteracted:s}=(0,ge.d)(_e.O.ActivateInviteLink);return r.status!==Ze.rq.Success?null:(0,f.tZ)(o.Vq,{isOpen:e,onClose:t,closeActionLabel:a("_common_dialog_dismiss_button"),title:a("team_activation_dialog_title"),actions:{primary:{children:a("team_activation_dialog_activate_button"),onClick:async()=>{await r.sendToggleInviteLink(!0),n&&n(),i({mood:"brand",description:a("team_activation_dialog_notification"),closeActionLabel:a(iu)}),s?.()}},secondary:{children:a("team_activation_dialog_notrightnow_button"),onClick:()=>{t(),i({mood:"brand",description:a("team_activation_dialog_cancel_notification"),closeActionLabel:a(iu)}),s?.()}}},children:(0,f.tZ)(o.nv,{textStyle:"ds.body.standard.regular",color:"ds.text.neutral.standard",children:a("team_activation_dialog_paragrah")})})};var su;const ou="team_sharing_invite_dialog_copy_link",lu="_common_dialog_dismiss_button",cu=({isOpen:e,onClose:t})=>{const{translate:n}=(0,g.Z)(),{showToast:a}=(0,o.pm)(),i=au(),r=i.status===Ze.rq.Success?i.teamKey:void 0,s=(0,ae.cI)(r),l=async()=>{r&&(await navigator.clipboard.writeText(s),a({mood:"brand",description:n("team_sharing_invite_dialog_copied_notification"),closeActionLabel:n(lu)}))};return(0,f.BX)(o.Vq,{isOpen:e,onClose:()=>{t()},closeActionLabel:n(lu),title:n("team_sharing_invite_dialog_title"),actions:{primary:{children:r?n(ou):su||(su=(0,f.tZ)(o.ZX,{mood:"inverse"})),icon:r?"ActionCopyOutlined":void 0,layout:"iconLeading",onClick:l}},children:[(0,f.tZ)(o.nv,{textStyle:"ds.body.standard.regular",color:"ds.text.neutral.standard",children:n("team_sharing_invite_dialog_paragrah")}),(0,f.tZ)(o.qo,{label:n("team_sharing_invite_dialog_input_label"),value:s,readOnly:!0,actions:[{label:n(ou),iconName:"ActionCopyOutlined",onClick:l}],sx:{overflow:"hidden"}})]})},du=({lee:e,teamId:t,isFreeTrial:n,totalSeatCount:a,numSeatsTaken:i,excludedInviteMembers:s,shouldShowInviteDialog:o,handleCloseInviteDialog:l,handleInvitePartialSuccess:c,handleInviteCompleteSuccess:d,invitePartialSuccessState:_,handleInvitationResultClosed:u,preFilledInviteEmails:m})=>{const{inviteLinkDataForAdmin:p,inviteLinkDataLoading:g,getInviteLinkDataForAdmin:h}=K_(),y=(0,Ee.o)(A_.G.WebOnboardingInviteLinkTacMigration),b=au(),[x,S]=(0,r.useState)(!1),[v,C]=(0,r.useState)(!1),{interacted:E}=(0,ge.d)(_e.O.ActivateInviteLink);if((0,r.useEffect)((()=>{!1===y&&h()}),[h,y]),null==y)return null;const Z=b.status===Ze.rq.Success?b:void 0,T=y?!E&&x&&!Z?.teamKey&&b.status===Ze.rq.Success:!E&&x&&!g&&!p?.teamKey;return(0,f.BX)(f.HY,{children:[o?(0,f.tZ)(B_,{lee:e,slotsTotal:a,slotsTaken:i,exclude:s,isFreeTrial:n,isOpen:o,closeInviteDialog:l,handleInvitePartialSuccess:c,handleInviteCompleteSuccess:e=>{(y?!0===Z?.enabled:!1===p?.disabled)&&C(!0),d(e)},preFilledEmails:m,setShowActivationDialog:S}):null,T?y?(0,f.tZ)(ru,{isOpen:x,onCancel:()=>{S(!1)},onInviteLinkActivation:()=>{S(!1),C(!0)}}):(0,f.tZ)(J_,{showActivationDialog:x,setShowActivationDialog:S,setShowSharingDialog:C}):null,v?y?(0,f.tZ)(cu,{isOpen:v,onClose:()=>{C(!1)}}):(0,f.tZ)(tu,{showSharingDialog:v,setShowSharingDialog:C}):null,_.show?(0,f.tZ)($_,{teamId:t,isOpen:_.show,onClose:u,invitedMembers:_.invitedMembers,refusedMembers:_.refusedMembers}):null]})},_u=({lee:e,isOpen:t,onClose:n,prefilledEmails:a,teamMembers:i,handleInviteCompleteSuccess:r})=>{const{invitePartialSuccessState:s,setInvitePartialSuccessState:o,handleInvitationResultClosed:l}=W_(),{teamId:c}=(0,Ce.fV)(),d=(0,re.C)(),_=(0,u.s)(),m=I_(i);return d&&_?(0,f.tZ)(du,{lee:e,teamId:c,totalSeatCount:_.seatsNumber,numSeatsTaken:m,excludedInviteMembers:i.filter((({status:e})=>"removed"!==e)).map((({login:e})=>e)),isFreeTrial:d.isFreeTrial,shouldShowInviteDialog:t,handleCloseInviteDialog:n,handleInvitePartialSuccess:(e,t)=>o({show:!0,invitedMembers:e,refusedMembers:t}),handleInviteCompleteSuccess:r,invitePartialSuccessState:s,handleInvitationResultClosed:l,preFilledInviteEmails:a}):null},uu=1e3,mu="_common_toast_close_label",pu=({domainName:e})=>{const{showToast:t}=(0,o.pm)(),[n,a]=(0,r.useState)(!1),[i,s]=(0,r.useState)(!1),{translate:c}=(0,g.Z)();return(0,f.tZ)(o.zx,{mood:"neutral",intensity:"quiet",layout:"iconLeading",onClick:async()=>{let n;try{(0,m.Kz)(new l.UserClickEvent({button:l.Button.DownloadCsv})),a(!0),n=setTimeout((()=>{s(!0)}),2e3),await(async()=>{const t=[],n=await h_(e,uu,0),a=Math.ceil(n.emailsImpactedCount/uu);t.push(...n.emails);const i=async(n=0)=>{const r=[];for(;n<a||(a-n)%5!=0;)r.push(h_(e,uu,n*uu)),n+=1;const s=await Promise.all(r);t.push(...s.flatMap((e=>e.emails))),n<a&&i(n)};var r,s;await i(1),r=t,s=c.shortDate,(0,ao.S)(((e,t)=>{let n=["email","domain","data_affected","incident_date","view_status"].join(",")+"\n";for(const a of e)for(const e of a.leaks)n+=[`"${a.email}"`,`"${e.domain}"`,`"${e.types.join(", ")}"`,`"${t((0,Bt.Z)(e.breachDateUnix))}"`,`"${a.viewStatus}"`].join(",")+"\n";return n})(r,s),"DWI-report.csv","text/csv;charset=utf-8")})(),t({description:c("team_dark_web_insights_download_csv_success"),closeActionLabel:c(mu)})}catch(e){t({description:c("_common_generic_error"),mood:"danger",closeActionLabel:c(mu)})}finally{clearTimeout(n),a(!1),s(!1)}},icon:"DownloadOutlined",disabled:n,isLoading:i,children:c("team_dark_web_insights_download_csv")})};var gu=n(63748);const hu=({breach:e,id:t,isFirstInGroup:n=!1,isLastInGroup:a=!1,opened:i=!1})=>{const{translate:r}=(0,g.Z)();return(0,f.BX)("tr",{id:t,sx:{backgroundColor:B.colors.grey06,borderLeft:`3px solid ${B.colors.dashGreen00}`,display:i?"table-row":"none",height:"44px","> td":{verticalAlign:"middle",padding:"5px 16px",paddingTop:n?"18px":void 0,paddingBottom:a?"18px":void 0}},children:[(0,f.tZ)("td",{colSpan:2,children:(0,f.tZ)(B.nvN,{size:"small",as:"div",sx:{fontWeight:"light",display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"flex-end"},children:(0,f.BX)("div",{sx:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"flex-end"},children:[e.domain&&""!==e.domain?(0,f.tZ)(B.plG,{size:"small",text:e.domain,backgroundColor:B.colors.dashGreen00}):null,(0,f.tZ)("div",{title:e.domain,sx:{paddingLeft:"8px",width:"100px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:e.domain})]})})}),(0,f.tZ)("td",{children:(0,f.tZ)(B.nvN,{sx:{"::first-letter":{textTransform:"uppercase"},textTransform:"lowercase"},size:"x-small",color:B.colors.grey00,children:(s=e.types,s.map((e=>r(bu[e]))).join(", "))})}),(0,f.tZ)("td",{colSpan:3,children:(0,f.tZ)(B.nvN,{size:"x-small",as:"span",color:B.colors.grey00,children:(0,f.tZ)(xo.v,{date:(0,Bt.Z)(e.breachDateUnix),format:Kt._T.ll})})})]});var s},yu={borderBottom:`1px solid ${B.colors.dashGreen05}`,height:"55px",position:"relative",borderLeft:"3px solid white","&:hover,:focus-visible":{cursor:"pointer",boxShadow:"0px 4px 8px rgba(0, 0, 0, 0.16)"},'&[aria-expanded="true"]':{borderLeftColor:B.colors.dashGreen00},"> td":{verticalAlign:"middle",padding:"0 16px"}},bu={[gu.hb.Password]:"team_dark_web_insights_incident_data_type_password",[gu.hb.CreditCard]:"team_dark_web_insights_incident_data_type_credit_card",[gu.hb.IPAddress]:"team_dark_web_insights_incident_data_type_ip_address",[gu.hb.MailingAddress]:"team_dark_web_insights_incident_data_type_mailing_address",[gu.hb.Phone]:"team_dark_web_insights_incident_data_type_phone",[gu.hb.Email]:"team_dark_web_insights_incident_data_type_email",[gu.hb.Social]:"team_dark_web_insights_incident_data_type_social",[gu.hb.GeoLocation]:"team_dark_web_insights_incident_data_type_geolocation",[gu.hb.UserName]:"team_dark_web_insights_incident_data_type_username",[gu.hb.PersonalInfo]:"team_dark_web_insights_incident_data_type_personalinfo"},xu=({userReport:e,isPendingMember:t=!1,onInviteAction:n,shouldShowInviteButton:a})=>{const{translate:i}=(0,g.Z)(),[s,l]=(0,r.useState)(!1),c=e.leaks?.map(((t,n)=>`${e.email}-${n}`)).join(" ");return(0,f.BX)(f.HY,{children:[(0,f.BX)("tr",{id:e.email,tabIndex:0,"aria-expanded":s,"aria-controls":c,onKeyDown:e=>{"Enter"===e.key&&(e.preventDefault(),l((e=>!e)))},onClick:()=>{l((e=>!e))},sx:yu,children:[(0,f.tZ)("td",{children:(0,f.tZ)(B.nvN,{size:"x-small",as:"span",children:e.email})}),(0,f.tZ)("td",{children:(0,f.BX)(o.kC,{children:[(0,f.tZ)(B.nvN,{size:"medium",as:"span",sx:{fontWeight:"bold"},children:e.breachesCount}),e.viewStatus===gu.j8.New?(0,f.tZ)(B.P_k,{dot:!0,ariaLabel:i("team_new_label")}):null]})}),(0,f.tZ)(B.nvN,{size:"x-small",as:"td",color:B.colors.grey00,sx:{maxWidth:"160px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",textTransform:"lowercase","::first-letter":{textTransform:"uppercase"}},children:(e=>{const t=e.leaks.map((e=>e.types.map((e=>i(bu[e])))));return[...new Set(t.flat())].join(", ")})(e)}),(0,f.tZ)("td",{children:(0,f.tZ)(B.nvN,{size:"x-small",as:"span",color:B.colors.grey00,children:(0,f.tZ)(xo.v,{date:(0,Bt.Z)(e.leaks[0].breachDateUnix),format:Kt._T.ll})})}),(0,f.tZ)("td",{children:a?(0,f.tZ)(B.zxk,{onClick:()=>{n(e.email)},type:"button",nature:"secondary",children:i("team_dark_web_insights_incident_summary_invite_button")}):(0,f.tZ)(B.nvN,{size:"x-small",as:"span",color:B.colors.grey00,children:i(t?"team_dark_web_insights_incident_summary_pending":"team_dark_web_insights_incident_summary_member")})}),(0,f.tZ)("td",{"aria-label":i("team_dark_web_insights_incident_summary_expand"),children:(0,f.tZ)(B.veu,{sx:{transform:s?"scale3D(1, -1, 1)":"scale3D(1, 1, 1)"}})})]},e.email),e.leaks.map(((t,n,a)=>{const i=`${e.email}-${t.domain}-${t.breachDateUnix}`;return(0,f.tZ)(hu,{id:i,breach:t,opened:s,isFirstInGroup:0===n,isLastInGroup:n===a.length-1},i)}))]})},Su=({emailsToInvite:e,reports:t,isLoading:n,pendingMembers:a,onInviteAction:i})=>{const{translate:r}=(0,g.Z)(),s=[{headerLabel:r("team_dark_web_insights_table_header_email_affected"),headerKey:"email-affected"},{headerLabel:r("team_dark_web_insights_table_header_incidents"),headerKey:"incidents"},{headerLabel:r("team_dark_web_insights_table_header_data_affected"),headerKey:"data-affected"},{headerLabel:r("team_dark_web_insights_table_header_last_incident"),headerKey:"last-incident"},{headerLabel:r("team_dark_web_insights_table_header_member_status"),headerKey:"member-status"},{headerLabel:"",headerKey:"actions"}];return(0,f.BX)("div",{sx:{minWidth:"100%",minHeight:"600px"},children:[n?(0,f.tZ)("div",{sx:{display:"block",width:"950px",height:"600px",position:"absolute",textAlign:"center"},children:(0,f.tZ)(o.ZX,{sx:{position:"relative",top:"50%"},size:120})}):null,(0,f.BX)("table",{sx:{minWidth:"100%"},children:[(0,f.tZ)(ho,{columns:s}),(0,f.tZ)("tbody",{sx:n?{opacity:"0.5"}:{},children:t.map((t=>(0,f.tZ)(xu,{userReport:t,onInviteAction:i,isPendingMember:a.includes(t.email),shouldShowInviteButton:e.includes(t.email)},t.email)))})]})]})},fu=({label:e,labelGridArea:t,title:n,titleGridArea:a})=>(0,f.BX)(f.HY,{children:[(0,f.tZ)(o.nv,{sx:{gridArea:t},textStyle:"ds.specialty.monospace.small",color:"ds.text.warning.quiet",children:n}),(0,f.tZ)(o.nv,{color:"ds.text.neutral.quiet",sx:{gridArea:a},children:e})]}),vu=({gridArea:e})=>(0,f.tZ)("div",{sx:{gridArea:e,backgroundColor:"ds.border.neutral.quiet.idle",height:"100%",width:"1px",alignSelf:"center"}});var Cu,Eu;const Zu=({reports:e,suggestedInvitees:t,onInviteAll:n})=>{const{translate:a}=(0,g.Z)();return(0,f.BX)(B.Zbd,{sx:{marginBottom:"24px",padding:"24px 24px"},children:[(0,f.tZ)(o.X6,{as:"h3",sx:{marginBottom:"24px"},children:a("team_dark_web_insights_summary_title")}),(0,f.BX)(B.T5p,{gridTemplateColumns:"1fr 1px 1fr 1px 1fr max-content",gridTemplateAreas:'"label-0 divider-left label-1 divider-right label-2 invite-all" "title-0 divider-left title-1 divider-right title-2 invite-all"',alignItems:"center",sx:{columnGap:"16px",justifyContent:"center"},children:[(0,f.tZ)(fu,{labelGridArea:"label-0",label:a("team_dark_web_insights_summary_employees_affected"),titleGridArea:"title-0",title:e.emailsImpactedCount}),Cu||(Cu=(0,f.tZ)(vu,{gridArea:"divider-left"})),(0,f.tZ)(fu,{labelGridArea:"label-1",label:a("team_dark_web_insights_summary_total_incidents"),titleGridArea:"title-1",title:e.leaksCount}),Eu||(Eu=(0,f.tZ)(vu,{gridArea:"divider-right"})),(0,f.tZ)(fu,{labelGridArea:"label-2",label:a("team_dark_web_insights_summary_not_protected"),titleGridArea:"title-2",title:a("team_dark_web_insights_summary_employee_invitation",{count:t.length})}),(0,f.tZ)(B.dDn,{gridArea:"invite-all",alignSelf:"center",children:(0,f.tZ)(o.zx,{onClick:n,children:a("team_dark_web_insights_summary_invite_all_button")})})]})]})};var Tu,Du;const ku="team_dark_web_insights_table_pagination_page_size",Iu=[15,50,100],Au=({lee:e,domainName:t})=>{const{translate:n}=(0,g.Z)(),a=(0,ta.V)(),{teamId:i}=(0,Ce.fV)(),{teamMembers:s,refreshTeamMembers:c}=k_(i),{openDialog:d,shouldShowFrozenStateDialog:_}=(0,A.Ub)(),[u,p]=(0,r.useState)(!0),[h,y]=(0,r.useState)(null),[b,x]=(0,r.useState)(!1),[S,v]=(0,r.useState)(1),[C,E]=(0,r.useState)(15),{unseen:Z,setAsSeen:T}=(0,ge.m)(_e.O.TacDarkWebInsightsNewBadge),[D,k]=(0,r.useState)(!1),[I,N]=(0,r.useState)(new Set([])),w=s.filter((e=>["pending","proposed"].includes(e.status))).map((e=>e.login)),O=s.filter((e=>["pending","proposed","accepted"].includes(e.status))).map((e=>e.login)),R=(0,r.useMemo)((()=>{var e;return null!=(e=h?.allImpactedEmails.filter((e=>!O.includes(e))))?e:[]}),[h?.allImpactedEmails,O]);(0,r.useEffect)((()=>{(0,m.Nc)(l.PageView.TacDarkWebInsights)}),[]);const L=(0,r.useCallback)((async(e,t,i)=>{x(!0);try{const n=await h_(e,i,i*(t-1));y(n),v(t),E(i),(0,m.Kz)(new l.UserLoadDarkWebInsightsResultsEvent({}))}catch{a.showAlert(n("team_dark_web_insights_generic_error"),B.BLW.ERROR)}finally{p(!1),x(!1)}}),[]);(0,r.useEffect)((()=>{L(t,1,C)}),[t]),(0,r.useEffect)((()=>{Z&&h?.emails&&T()}),[Z,T,h?.emails]);const M=(0,r.useCallback)((()=>{_?d():R.length<=0||(k(!0),(0,m.Kz)(new l.UserSendManualInviteEvent({flowStep:l.FlowStep.Start,inviteCount:0,inviteFailedCount:0,inviteResentCount:0,inviteSuccessfulCount:0,isImport:!1,isResend:!1})),N(new Set(R)))}),[R]);return(0,f.BX)(f.HY,{children:[u?Tu||(Tu=(0,f.tZ)(T_,{})):null,!u&&h?.emails?0===h.leaksCount?(0,f.tZ)(S_,{domainName:t}):(0,f.BX)(f.HY,{children:[(0,f.tZ)(Zu,{reports:h,suggestedInvitees:R,onInviteAll:M}),(0,f.BX)(B.Zbd,{sx:{padding:"32px 24px"},children:[(0,f.BX)("div",{sx:{display:"flex",justifyContent:"space-between",marginBottom:"24px",alignItems:"center"},children:[(0,f.tZ)(o.X6,{as:"h3",children:n("team_dark_web_insights_table_title")}),(0,f.tZ)(pu,{domainName:t})]}),(0,f.tZ)(Su,{reports:h.emails,isLoading:b,pendingMembers:w,emailsToInvite:R,onInviteAction:e=>{_?d():(k(!0),(0,m.Kz)(new l.UserSendManualInviteEvent({flowStep:l.FlowStep.Start,inviteCount:0,inviteFailedCount:0,inviteResentCount:0,inviteSuccessfulCount:0,isImport:!1,isResend:!1})),N(new Set([e])))}}),(0,f.BX)(B.T5p,{alignItems:"center",gridTemplateColumns:"1fr auto 1fr",sx:{paddingTop:6,paddingBottom:3},children:[(0,f.tZ)(o.nv,{color:"ds.text.neutral.quiet",textStyle:"ds.body.helper.regular",children:n("team_dark_web_insights_table_pagination_item_count",{first:C*(S-1)+1,last:Math.min(C*(S-1)+C,h.emailsImpactedCount),total:h.emailsImpactedCount})}),(0,f.tZ)(B.tlE,{totalPages:Math.ceil(h.emailsImpactedCount/C),currentPage:S,onPageChange:e=>L(t,e,C)},S),(0,f.BX)(o.h_,{children:[(0,f.tZ)(o.sB,{showCaret:!0,intensity:"supershy",mood:"neutral",size:"small",sx:{marginLeft:"auto"},children:n(ku,{pageSize:C})}),(0,f.tZ)(o.Nv,{children:Iu.map((e=>(0,f.tZ)(o.hP,{label:n(ku,{pageSize:e}),onSelect:()=>e!==C&&L(t,1,e)},e)))})]})]}),(0,f.tZ)(_u,{lee:e,isOpen:D,prefilledEmails:I,onClose:()=>{k(!1),N(new Set([]))},handleInviteCompleteSuccess:()=>c(),teamMembers:s})]})]}):null,u||h?.emails||""===t?null:Du||(Du=(0,f.tZ)(D_,{}))]})};var Nu,wu,Ou=n(15622);const Ru=({lastVerificationAttemptDateUnix:e,onRetry:t})=>{const{translate:n}=(0,g.Z)();return(0,f.BX)(o.kC,{justifyContent:"space-between",flexDirection:"column",gap:5,sx:{margin:"30px 0",paddingLeft:"24px",borderLeft:`solid 2px ${B.colors.grey00}`},children:[(0,f.BX)(B.nvN,{size:"x-small",bold:!0,children:[n("team_dwi_pending_latest_attempt_label")," ",e?(0,f.tZ)(Ou.Z,{date:(0,Bt.Z)(e)}):null]}),(0,f.tZ)(B.zxk,{type:"button",nature:"ghost",sx:{width:"fit-content",margin:0,padding:0,minWidth:0,height:"fit-content","&:hover":{backgroundColor:"transparent !important",textDecoration:"underline"},"&:focus":{backgroundColor:"transparent !important",textDecoration:"underline"}},onClick:t,children:(0,f.BX)(o.kC,{alignItems:"center",gap:2,children:[Nu||(Nu=(0,f.tZ)(B.DuK,{size:12})),(0,f.tZ)(B.nvN,{size:"x-small",color:B.colors.midGreen00,children:n("team_dwi_pending_retry_button_label")})]})})]})},Lu=({domain:e,isDeactivating:t,handleDeactivateDomain:n,handleRetryValidateDomain:a})=>{const{translate:i}=(0,g.Z)(),{dnsToken:{computedToken:r,challengeDomain:s}={computedToken:"",challengeDomain:""},lastVerificationAttemptDateUnix:l}=e;return(0,f.BX)(f.HY,{children:[wu||(wu=(0,f.tZ)(d_,{})),(0,f.BX)("div",{children:[(0,f.BX)(B.Zbd,{sx:{padding:"24px",margin:"24px 0"},children:[(0,f.tZ)(B.X6q,{size:"x-small",children:i("team_breach_report_domain_verify_pending_title")}),(0,f.tZ)(B.nvN,{sx:{marginBottom:"20px",marginTop:"10px"},color:B.colors.grey00,children:i("team_dwi_pending_verification_txt")}),(0,f.tZ)(Ru,{lastVerificationAttemptDateUnix:l,onRetry:a}),(0,f.BX)(o.kC,{gap:"16px",children:[(0,f.tZ)("div",{sx:{width:"70%"},children:(0,f.tZ)(B.oil,{fullWidth:!0,defaultValue:e.name,disabled:!0})}),(0,f.tZ)("div",{children:(0,f.tZ)(B.zxk,{type:"button",disabled:t,nature:"secondary",onClick:n,children:i("team_dwi_pending_cancel_button_label")})}),(0,f.tZ)("div",{children:(0,f.tZ)(B.zxk,{type:"button",disabled:!0,sx:{maxWidth:"120px"},children:i("team_breach_report_verifying_txt")})})]})]}),(0,f.tZ)(B.UQy,{size:"medium",children:(0,f.BX)(B.UlM,{open:!0,children:[(0,f.tZ)(B._Oh,{children:i("team_breach_report_domain_verify_dns_confirm_text")}),(0,f.tZ)(B.rN7,{children:(0,f.BX)(B.T5p,{gap:"24px",gridTemplateColumns:"1fr",gridAutoRows:"auto",children:[(0,f.tZ)(B.nvN,{size:"small",color:B.colors.grey00,children:i("team_breach_report_domain_verify_dns_description")}),(0,f.tZ)(a_.x,{inputValue:s,textInputProps:{fullWidth:!0,readOnly:!0,label:i("team_settings_domain_verify_host")}}),(0,f.tZ)(a_.x,{inputValue:r,textInputProps:{fullWidth:!0,readOnly:!0,label:i("team_settings_domain_verify_txt")}}),(0,f.tZ)(B.nvN,{size:"small",sx:{marginBottom:"20px"},color:B.colors.grey00,children:i("team_breach_report_domain_verify_dns_secondary_description")})]})})]})})]})]})},Mu={background:"ds.container.expressive.neutral.quiet.idle",color:"ds.text.neutral.standard",cursor:"default"},Bu=({label:e})=>(0,f.tZ)(B.OTy,{sx:{":hover":Mu,":focus":Mu,...Mu},disabled:!0,selected:!1,size:"medium",label:e}),Pu=({activeDomain:e,verifiedDomains:t,selectVerifiedDomain:n})=>{var a;const i=(0,Ee.o)(me.w.DwiMultipleDomainsProd),r=null!=(a=e?.name)?a:"",s=t.map((e=>(0,f.tZ)(B.OTy,{sx:Mu,onClick:()=>{r!==e.name&&n(e)},selected:r===e.name,size:"medium",label:e.name},e.name)));return(0,f.tZ)(B.G8v,{sx:{marginTop:"12px",padding:0},children:i&&t.length>1?s:""!==r?(0,f.tZ)(Bu,{label:r}):null})};var Uu,zu;const Xu={display:"flex",justifyContent:"center",width:"100%",height:"100%",backgroundColor:`${B.colors.dashGreen06}`,alignItems:"center"},qu=({lee:e})=>{const{translate:t}=(0,g.Z)(),{verifiedOrPendingDomain:{domain:n,status:a},verifiedDomains:i,updateDomainState:s,deactivateDomain:c,tryVerifyDomain:d,selectVerifiedDomain:_}=ec();return(0,r.useEffect)((()=>{(0,m.Nc)(l.PageView.TacDarkWebInsights)}),[]),(0,f.BX)(f.HY,{children:[(0,f.BX)("div",{sx:{px:"48px",pt:"32px",pb:"12px"},children:[(0,f.tZ)(o.X6,{as:"h1",children:t("team_dashboard_dark_web_insights_heading")}),(0,f.tZ)(Pu,{activeDomain:n,verifiedDomains:i,selectVerifiedDomain:_})]}),(0,f.tZ)(ni,{fullWidth:!0,mainContent:(0,f.tZ)("div",{children:a===Jl.Loading?Uu||(Uu=(0,f.tZ)("div",{sx:Xu,children:(0,f.tZ)(o.ZX,{size:120})})):null===n||a===Jl.Start?(0,f.tZ)(g_,{onSuccess:s,onError:s}):a===Jl.Validated?(0,f.tZ)(Au,{lee:e,domainName:n.name}):(0,f.tZ)(Lu,{domain:n,isDeactivating:a===Jl.Deactivating,handleDeactivateDomain:c,handleRetryValidateDomain:d})}),secondaryContent:zu||(zu=(0,f.tZ)(Nd,{}))})]})};var ju=n(28233),Gu=n(87499),Fu=n(19070);const Vu=({iconName:e,title:t,description:n})=>(0,f.BX)("div",{sx:{display:"flex",flexDirection:"row",gap:"16px"},children:[(0,f.tZ)(o.vY,{name:e,mood:"brand"}),(0,f.BX)("div",{sx:{display:"flex",flexDirection:"column",gap:"4px"},children:[(0,f.tZ)(o.X6,{as:"h3",textStyle:"ds.title.block.medium",children:t}),(0,f.tZ)(o.nv,{textStyle:"ds.body.reduced.regular",color:"ds.text.neutral.quiet",children:n})]})]});var Hu=n(88761);const Wu="team_risk_detection_presetup_secondary_card_badge",$u=()=>{const{translate:e}=(0,g.Z)();return(0,f.BX)(B.Zbd,{sx:{height:"100%",display:"flex",flexDirection:"column",padding:"24px",gap:"24px",backgroundColor:"ds.container.agnostic.neutral.supershy",borderColor:"ds.border.neutral.quiet.idle"},children:[(0,f.tZ)(o.Ct,{label:e(Wu),iconName:"TipOutlined",layout:"iconLeading",mood:"brand"}),(0,f.tZ)("div",{sx:{display:"flex",justifyItems:"center",alignItems:"center",backgroundColor:"ds.container.agnostic.neutral.quiet",padding:"16px 9px",borderRadius:"8px",border:"none"},children:(0,f.tZ)("img",{src:Hu,width:"100%",alt:e(Wu)})}),(0,f.tZ)(o.X6,{as:"h4",textStyle:"ds.title.block.medium",children:e("team_risk_detection_presetup_secondary_card_title")}),(0,f.tZ)(o.nv,{textStyle:"ds.body.standard.regular",color:"ds.text.neutral.quiet",children:e("team_risk_detection_presetup_secondary_card_subtitle")}),(0,f.tZ)(o.Qj,{size:"small",isExternal:!0,href:ae.Zi,children:e("team_risk_detection_presetup_secondary_card_learn_more_link")})]})};var Yu,Ku;const Qu=({setError:e})=>{const{translate:t}=(0,g.Z)(),{generateMassDeploymentTeamKey:n}=(0,F.u)(Fu.i);return(0,r.useEffect)((()=>{(0,m.Nc)(l.PageView.TacRiskDetection)}),[]),(0,f.tZ)(ni,{mainContent:(0,f.tZ)(B.Zbd,{sx:{minHeight:"680px",display:"flex",alignItems:"center",justifyContent:"center",padding:"24px",backgroundColor:"ds.container.agnostic.neutral.supershy",borderColor:"ds.border.neutral.quiet.idle"},children:(0,f.BX)("div",{sx:{display:"flex",flexDirection:"column",alignItems:"center",maxWidth:"570px",gap:"16px"},children:[(0,f.BX)("div",{sx:{display:"flex",flexDirection:"column",alignItems:"center",gap:"16px"},children:[(0,f.tZ)("img",{src:Gu,sx:{width:"240px",aspectRatio:"3/2"},alt:""}),(0,f.tZ)(o.X6,{as:"h2",textStyle:"ds.title.section.large",sx:{letterSpacing:"-1px",textAlign:"center"},children:t("team_risk_detection_presetup_main_card_title")})]}),(0,f.BX)("div",{sx:{display:"flex",padding:"24px",flexDirection:"column",alignItems:"left",gap:"16px"},children:[(0,f.tZ)(Vu,{iconName:"ToolsOutlined",title:t("team_risk_detection_presetup_main_card_deploy_title"),description:t("team_risk_detection_presetup_main_card_deploy_subtitle")}),(0,f.tZ)(Vu,{iconName:"PhishingAlertOutlined",title:t("team_risk_detection_presetup_main_card_get_informed_title"),description:t("team_risk_detection_presetup_main_card_get_informed_subtitle")}),(0,f.tZ)(Vu,{iconName:"TipOutlined",title:t("team_risk_detection_presetup_main_card_take_action_title"),description:t("team_risk_detection_presetup_main_card_take_action_subtitle")})]}),(0,f.tZ)(o.zx,{size:"medium",layout:"iconTrailing",icon:Yu||(Yu=(0,f.tZ)(o.JO,{name:"ArrowRightOutlined"})),onClick:async()=>{(0,m.Kz)(new l.UserSetupRiskDetectionEvent({riskDetectionSetupStep:l.RiskDetectionSetupStep.StartSetup})),(0,V.hx)(await n())&&e()},children:t("team_risk_detection_presetup_main_card_start_setup_button")})]})}),fullWidth:!0,secondaryContent:Ku||(Ku=(0,f.tZ)($u,{}))})},Ju={CARD:{height:"100%",display:"flex",flexDirection:"column",padding:"24px",gap:"16px",backgroundColor:"ds.container.agnostic.neutral.supershy",borderColor:"ds.border.neutral.quiet.idle"},DISPLAY_FIELD_CONTAINER:{height:"100%",display:"flex",padding:"8px 16px",gap:"8px",backgroundColor:"ds.container.agnostic.neutral.quiet",border:"none"},DISPLAY_FIELD_WHITE:{height:"100%",display:"flex",padding:"8px 16px",gap:"8px",backgroundColor:"ds.container.agnostic.neutral.supershy",borderColor:"ds.border.neutral.quiet.idle"},VERTICAL_DIVIDER:{borderLeft:"1px solid ds.border.neutral.quiet.idle"}};var em;const tm={STEP_SECTION:{display:"flex",flexDirection:"column",gap:"8px",paddingTop:"4px"}},nm=()=>(0,f.tZ)("div",{sx:Ju.VERTICAL_DIVIDER}),am=({badgeLabel:e,header:t,description:n,mood:a="brand",intensity:i="quiet"})=>(0,f.BX)("div",{sx:tm.STEP_SECTION,children:[(0,f.tZ)(o.Ct,{label:e,mood:a,intensity:i}),(0,f.tZ)(o.X6,{as:"h3",textStyle:"ds.title.block.small",children:t}),(0,f.tZ)(o.nv,{textStyle:"ds.body.reduced.regular",color:"ds.text.neutral.quiet",children:n})]}),im=({active:e})=>{const{translate:t}=(0,g.Z)();return(0,f.BX)(B.Zbd,{sx:Ju.CARD,children:[(0,f.tZ)(o.X6,{as:"h2",textStyle:"ds.title.supporting.small",color:"ds.text.neutral.quiet",children:t("team_risk_detection_setup_how_to_title")}),(0,f.BX)("div",{sx:{display:"flex",gap:"16px"},children:[(0,f.tZ)(am,{mood:e?"neutral":"brand",intensity:e?"quiet":"catchy",badgeLabel:t("team_risk_detection_setup_how_to_step1_badge"),header:t("team_risk_detection_setup_how_to_step1_title"),description:t("team_risk_detection_setup_how_to_step1_description")}),em||(em=(0,f.tZ)(nm,{})),(0,f.tZ)(am,{mood:e?"brand":"neutral",intensity:e?"catchy":"quiet",badgeLabel:t("team_risk_detection_setup_how_to_step2_badge"),header:t("team_risk_detection_setup_how_to_step2_title"),description:t("team_risk_detection_setup_how_to_step2_description")})]})]})},rm=()=>{const{translate:e}=(0,g.Z)();return(0,f.BX)(B.Zbd,{sx:(0,o.jM)([Ju.CARD,{padding:"24px"}]),children:[(0,f.tZ)(o.X6,{as:"h4",textStyle:"ds.title.supporting.small",color:"ds.text.neutral.quiet",children:e("team_risk_detection_setup_secondary_card_title")}),(0,f.BX)("div",{sx:{display:"flex",flexDirection:"column",gap:"8px"},children:[(0,f.tZ)(o.X6,{as:"h5",textStyle:"ds.title.block.medium",children:e("team_risk_detection_setup_secondary_card_subtitle")}),(0,f.tZ)(o.nv,{color:"ds.text.neutral.quiet",children:e("team_risk_detection_setup_secondary_card_description")})]}),(0,f.tZ)(o.Qj,{isExternal:!0,href:ae.Zi,onClick:()=>{(0,m.Kz)(new l.UserOpenHelpCenterEvent({helpCenterArticleCta:l.HelpCenterArticleCta.SeeRiskDetectionSetupGuide}))},children:e("team_risk_detection_setup_secondary_card_link")})]})};var sm,om=n(29270);const lm="team_risk_detection_setup_status_close_toast",cm=()=>(0,f.tZ)("div",{sx:Ju.VERTICAL_DIVIDER}),dm=({token:e,setError:t})=>{const{updateLoggedOutMonitoringActiveStatus:n}=(0,F.u)(Fu.i),a=(0,c.k)(Fu.i,"getLastLogDate"),{showToast:d}=(0,o.pm)(),{translate:_}=(0,g.Z)(),{routes:u}=(0,i.Xo)();(0,r.useEffect)((()=>{(0,m.Nc)(l.PageView.TacRiskDetectionSettings)}),[]);const p=async()=>{(0,m.Kz)(new l.UserSetupRiskDetectionEvent({riskDetectionSetupStep:l.RiskDetectionSetupStep.TurnOff}));const e=await n({active:!1});(0,V.d6)(e)?(t({hasError:!1,retryFunction:void 0}),d({description:_("team_risk_detection_setup_status_turned_off_toast"),closeActionLabel:_(lm)})):t({hasError:!0,retryFunction:async()=>{await p()}})},h=a.status===s.rq.Loading?"...":a.status===s.rq.Error?"N/A":null===a.data.lastLogDate?_("team_risk_detection_setup_status_no_logs_yet"):_.shortDate(new Date(a.data.lastLogDate),Kt.qG.L_LT);return(0,f.BX)(B.Zbd,{sx:Ju.CARD,children:[(0,f.tZ)(o.X6,{as:"h2",textStyle:"ds.title.supporting.small",color:"ds.text.neutral.quiet",children:_("team_risk_detection_setup_status_title")}),(0,f.BX)(B.Zbd,{sx:(0,o.jM)([Ju.DISPLAY_FIELD_CONTAINER,{padding:"24px",justifyContent:"space-between"}]),children:[(0,f.BX)(o.kC,{flexDirection:"row",gap:"16px",children:[(0,f.BX)(o.kC,{flexDirection:"column",justifyContent:"center",gap:"4px",sx:{width:"170px"},children:[(0,f.tZ)(o.X6,{as:"h4",textStyle:"ds.title.supporting.small",sx:{height:"18px"},children:_("team_risk_detection_setup_status_integration_status_title")}),(0,f.tZ)(o.Ct,{label:_("team_risk_detection_setup_status_integration_status_badge_label"),mood:"positive"})]}),sm||(sm=(0,f.tZ)(cm,{})),(0,f.BX)(o.kC,{flexDirection:"column",justifyContent:"center",gap:"4px",children:[(0,f.tZ)(o.X6,{as:"h4",textStyle:"ds.title.supporting.small",sx:{height:"18px"},children:_("team_risk_detection_setup_status_last_log_date_title")}),(0,f.tZ)(o.nv,{textStyle:"ds.body.reduced.monospace",color:"ds.text.neutral.standard",children:h})]})]}),(0,f.tZ)(o.zx,{as:om.rU,to:`${u.teamActivityRoutePath}/recent?categoryFilters=${Hs.p.RiskDetection}`,mood:"brand",intensity:"quiet",layout:"iconTrailing",icon:"ArrowRightOutlined",sx:{alignSelf:"end"},children:_("team_risk_detection_setup_status_see_logs_button")})]}),(0,f.tZ)(B.Zbd,{sx:Ju.DISPLAY_FIELD_CONTAINER,children:(0,f.tZ)(o.CW,{actions:[(0,f.tZ)(o.zx,{intensity:"supershy",layout:"iconLeading",icon:"ActionCopyOutlined",onClick:async()=>{(0,m.Kz)(new l.UserSetupRiskDetectionEvent({riskDetectionSetupStep:l.RiskDetectionSetupStep.CopyIntuneConfigurationToken}));try{await navigator.clipboard.writeText(e),d({description:_("team_risk_detection_setup_status_token_copied_toast"),closeActionLabel:_(lm)})}catch{d({mood:"danger",description:_("_common_generic_error"),closeActionLabel:_(lm)})}},children:_("team_risk_detection_setup_guidelines_token_field_copy_button")},"CopyToken")],label:_("team_risk_detection_setup_guidelines_token_field_title"),value:e,sx:{width:"-webkit-fill-available"}})}),(0,f.tZ)(o.zx,{sx:{alignSelf:"end"},onClick:p,children:_("team_risk_detection_setup_status_integration_status_turn_off_button")})]})};var _m=n(80972);const um=({selectedBrowsers:e,setSelectedBrowsers:t})=>{const{translate:n}=(0,g.Z)(),a=n=>{if(e.includes(n.target.value)){const a=e.filter((e=>e!==n.target.value));0===a.length?t(["chrome"]):t(a)}else t([...e,n.target.value])};return(0,f.BX)(o.Zb,{sx:{backgroundColor:"ds.background.alternate",gap:"unset"},children:[(0,f.tZ)(o.nv,{textStyle:"ds.title.block.medium",color:"ds.text.neutral.catchy",sx:{marginBottom:"4px"},children:n("team_risk_detection_setup_guidelines_browser_selection_card_title")}),(0,f.tZ)(o.nv,{textStyle:"ds.body.reduced.regular",color:"ds.text.neutral.quiet",sx:{marginBottom:"8px"},children:n("team_risk_detection_setup_guidelines_browser_selection_card_subtitle")}),(0,f.BX)(o.kC,{justifyContent:"space-between",sx:{paddingX:"8px"},children:[(0,f.tZ)(o.XZ,{label:n("team_risk_detection_setup_deployment_method_browser_option_chrome"),checked:e.includes("chrome"),value:"chrome",onChange:a}),(0,f.tZ)(o.XZ,{label:n("team_risk_detection_setup_deployment_method_browser_option_edge"),checked:e.includes("edge"),value:"edge",onChange:a}),(0,f.tZ)(o.XZ,{disabled:!0,label:n("team_risk_detection_setup_deployment_method_browser_option_firefox"),checked:!1,value:"firefox"})]})]})},mm="team_risk_detection_setup_toast_close",pm={chrome:"team_risk_detection_setup_guidelines_extension_id_update_url_label_chrome",edge:"team_risk_detection_setup_guidelines_extension_id_update_url_label_edge",firefox:"firefox"},gm=({selectedBrowsers:e,setupInformation:t})=>{var n;const{translate:a}=(0,g.Z)(),{showToast:i}=(0,o.pm)(),{generateAndDownloadMassDeploymentScript:r}=(0,F.u)(Fu.i),s=async()=>{try{await r({targetedBrowsers:e,targetedMassDeploymentSoftware:"microsoft-intune",targetedOS:"windows"})}catch{i({mood:"danger",description:a("team_risk_detection_setup_download_error_description"),closeActionLabel:a(mm),action:{onClick:s,label:a("team_risk_detection_setup_download_error_retry")}})}},l=(e,t)=>async()=>{try{await navigator.clipboard.writeText(e),i({description:t,closeActionLabel:a(mm)})}catch{i({mood:"danger",description:a("_common_generic_error"),closeActionLabel:a(mm)})}};return(0,f.BX)(f.HY,{children:[(0,f.BX)(o.kC,{alignItems:"center",color:"ds.text.neutral.catchy",id:"intune-guidelines","aria-labelledby":"intune-tab",children:[(0,f.tZ)(o.Om,{type:"windows",size:"small",sx:{marginRight:"8px"}}),a("team_risk_detection_setup_guidelines_title_intune_windows")]}),(0,f.tZ)(o.nv,{children:a.markup("team_risk_detection_setup_guidelines_policies_paragraph_intune_windows_markup")}),(0,f.tZ)(o.Zb,{sx:Ju.DISPLAY_FIELD_WHITE,children:(0,f.tZ)(o.CW,{label:a("team_risk_detection_setup_guidelines_script_field_title"),value:"Dashlane-Risk-Detection-Policies-Script.ps1",actions:[(0,f.tZ)(o.zx,{intensity:"supershy",layout:"iconLeading",icon:"DownloadOutlined",onClick:s,children:a("team_risk_detection_setup_guidelines_script_field_download_button")},"DownloadScript")]})}),(0,f.tZ)(o.Zb,{sx:Ju.DISPLAY_FIELD_WHITE,children:(0,f.tZ)(o.CW,{label:a("team_risk_detection_setup_guidelines_token_field_title"),value:t.massDeploymentTeamKey,actions:[(0,f.tZ)(o.zx,{intensity:"supershy",layout:"iconLeading",icon:"ActionCopyOutlined",onClick:l(null!=(n=t.massDeploymentTeamKey)?n:"",a("team_risk_detection_setup_status_token_copied_toast")),children:a("team_risk_detection_setup_guidelines_token_field_copy_button")},"CopyToken")]})}),(0,f.tZ)(o.nv,{children:a.markup("team_risk_detection_setup_guidelines_force_install_paragraph_intune_windows_markup")}),e.map((e=>{var n;return(0,f.BX)("div",{children:[(0,f.tZ)(o.Zb,{sx:Ju.DISPLAY_FIELD_WHITE,children:(0,f.tZ)(o.CW,{label:a(pm[e]),value:t.massDeploymentSetupInformation?.massDeploymentExtensionIDsAndUpdateURLs[e],actions:[(0,f.tZ)(o.zx,{intensity:"supershy",layout:"iconLeading",icon:"ActionCopyOutlined",onClick:l(null!=(n=t.massDeploymentSetupInformation?.massDeploymentExtensionIDsAndUpdateURLs[e])?n:"","team_risk_detection_setup_status_value_copied_toast"),children:a("team_risk_detection_setup_guidelines_device_configuration_field_copy_button")},"CopyValue")]})}),"chrome"===e?(0,f.tZ)(o.ke,{icon:"FeedbackInfoOutlined",title:a.markup("team_risk_detection_setup_guidelines_import_admx_infobox_markup"),sx:{marginTop:"16px"}}):null]},e)}))]})},hm="team_risk_detection_setup_guidelines_device_configuration_field_copy_button",ym="team_risk_detection_setup_toast_close",bm="team_risk_detection_setup_status_value_copied_toast",xm={chrome:"team_risk_detection_setup_guidelines_property_list_fields_label_chrome",edge:"team_risk_detection_setup_guidelines_property_list_fields_label_edge",firefox:"team_risk_detection_setup_guidelines_property_list_fields_label_firefox"},Sm={chrome:"team_risk_detection_setup_guidelines_preference_domains_fields_label_chrome",edge:"team_risk_detection_setup_guidelines_preference_domains_fields_label_edge",firefox:"team_risk_detection_setup_guidelines_preference_domains_fields_label_firefox"},fm=({selectedBrowsers:e,setupInformation:t})=>{var n;const{translate:a}=(0,g.Z)(),{showToast:i}=(0,o.pm)(),r=(e,t)=>async()=>{try{await navigator.clipboard.writeText(e),i({description:t,closeActionLabel:a(ym)})}catch{i({mood:"danger",description:a("_common_generic_error"),closeActionLabel:a(ym)})}};return(0,f.BX)(f.HY,{children:[(0,f.BX)(o.kC,{alignItems:"center",color:"ds.text.neutral.catchy",id:"intune-guidelines","aria-labelledby":"intune-tab",children:[(0,f.tZ)(o.Om,{type:"apple",size:"small",sx:{marginRight:"8px"}}),a("team_risk_detection_setup_guidelines_title_jamf_macos")]}),(0,f.tZ)(o.nv,{children:a.markup("team_risk_detection_setup_guidelines_policies_paragraph_part_one_jamf_macos_markup")}),(0,f.tZ)(o.nv,{children:a.markup("team_risk_detection_setup_guidelines_policies_paragraph_part_two_jamf_macos_markup")}),(0,f.tZ)(o.nv,{children:a.markup("team_risk_detection_setup_guidelines_policies_paragraph_part_three_jamf_macos_markup")}),e.map((e=>{var n;return(0,f.tZ)("div",{children:(0,f.tZ)(o.Zb,{sx:Ju.DISPLAY_FIELD_WHITE,children:(0,f.tZ)(o.CW,{label:a(Sm[e]),value:t.massDeploymentSetupInformation?.extensionPreferenceDomains[e],actions:[(0,f.tZ)(o.zx,{intensity:"supershy",layout:"iconLeading",icon:"ActionCopyOutlined",onClick:r(null!=(n=t.massDeploymentSetupInformation?.extensionPreferenceDomains[e])?n:"",a(bm)),children:a(hm)},"CopyValue")]})})},e)})),(0,f.tZ)(o.Zb,{sx:Ju.DISPLAY_FIELD_WHITE,children:(0,f.tZ)(o.Y6,{label:a("team_risk_detection_setup_guidelines_property_list_fields_label_generic"),value:t.massDeploymentSetupInformation?.extensionPoliciesValue,actions:[(0,f.tZ)(o.zx,{intensity:"supershy",layout:"iconLeading",icon:"ActionCopyOutlined",onClick:r(null!=(n=t.massDeploymentSetupInformation?.extensionPoliciesValue)?n:"",a(bm)),children:a(hm)},"CopyValue")]})}),(0,f.tZ)(o.nv,{children:a.markup("team_risk_detection_setup_guidelines_force_install_paragraph_part_one_jamf_macos_markup")}),(0,f.tZ)(o.nv,{children:a.markup("team_risk_detection_setup_guidelines_force_install_paragraph_part_two_jamf_macos_markup")}),(0,f.tZ)(o.nv,{children:a.markup("team_risk_detection_setup_guidelines_force_install_paragraph_part_three_jamf_macos_markup")}),e.map((e=>{var n,i;return(0,f.BX)("div",{children:[(0,f.tZ)(o.Zb,{sx:Ju.DISPLAY_FIELD_WHITE,children:(0,f.tZ)(o.CW,{label:a(Sm[e]),value:t.massDeploymentSetupInformation?.browsersPreferenceDomains[e],actions:[(0,f.tZ)(o.zx,{intensity:"supershy",layout:"iconLeading",icon:"ActionCopyOutlined",onClick:r(null!=(n=t.massDeploymentSetupInformation?.browsersPreferenceDomains[e])?n:"",a(bm)),children:a(hm)},"CopyToken")]})}),(0,f.tZ)(o.Zb,{sx:{...Ju.DISPLAY_FIELD_WHITE,marginTop:"16px"},children:(0,f.tZ)(o.Y6,{label:a(xm[e]),value:t.massDeploymentSetupInformation?.browsersForceInstallValues[e],actions:[(0,f.tZ)(o.zx,{intensity:"supershy",layout:"iconLeading",icon:"ActionCopyOutlined",onClick:r(null!=(i=t.massDeploymentSetupInformation?.browsersForceInstallValues[e])?i:"",a(bm)),children:a(hm)},"CopyValue")]})})]},`jamf-force-install-guidelines-${e}`)}))]})};var vm;const Cm="team_risk_detection_setup_guidelines_title",Em="team_risk_detection_setup_guidelines_subtitle",Zm=({title:e,isCollapsible:t=!1,setError:n})=>{const[a,i]=(0,r.useState)("microsoft-intune"),[s,l]=(0,r.useState)(["chrome"]),{translate:d}=(0,g.Z)(),_=(e=>{const{status:t,data:n}=(0,c.k)(Fu.i,"getMassDeploymentSetupInformation",{targetedBrowsers:e.targetedMassDeploymentBrowsers,targetedMassDeploymentSoftware:e.targetedMassDeploymentSoftware,targetedOS:e.targetedMassDeploymentOS});return t===Ze.rq.Loading?{isLoading:!0,isError:!1}:t===Ze.rq.Error?{isLoading:!1,isError:!0}:{massDeploymentSetupInformation:n.massDeploymentSetupInformation,massDeploymentTeamKey:n.massDeploymentTeamKey,isLoading:!1,isError:!1}})({targetedMassDeploymentBrowsers:s,targetedMassDeploymentSoftware:a,targetedMassDeploymentOS:"microsoft-intune"===a?"windows":"macos"}),u=[{contentId:"intune-guidelines",title:d("team_risk_detection_setup_deployment_method_deployment_software_option_intune"),id:"intune-tab",onSelect:()=>i("microsoft-intune")},{contentId:"jamf-guidelines",title:d("team_risk_detection_setup_deployment_method_deployment_software_option_jamf"),id:"jamf-tab",onSelect:()=>i("jamf")}];if(_.isLoading)return vm||(vm=(0,f.tZ)(o.ZX,{}));if(_.isError)return n({hasError:!0,retryFunction:()=>n({hasError:!1,retryFunction:void 0})}),null;const m=()=>"microsoft-intune"===a&&(0,_m.Ss)(_.massDeploymentSetupInformation)?(0,f.tZ)(gm,{selectedBrowsers:s,setupInformation:{massDeploymentSetupInformation:_.massDeploymentSetupInformation,massDeploymentTeamKey:_.massDeploymentTeamKey}}):"jamf"===a&&(0,_m.kv)(_.massDeploymentSetupInformation)?(0,f.tZ)(fm,{selectedBrowsers:s,setupInformation:{massDeploymentSetupInformation:_.massDeploymentSetupInformation,massDeploymentTeamKey:_.massDeploymentTeamKey}}):null;return t?(0,f.tZ)(B.UQy,{children:(0,f.tZ)(o.Zb,{children:(0,f.BX)(B.UlM,{sx:{"&[open]":{margin:"0px !important"},"& > summary, > div":{padding:"0px !important"},"& > div:nth-of-type(1)":{padding:"0px !important"}},children:[(0,f.tZ)(B._Oh,{size:"medium",children:(0,f.tZ)("span",{sx:{color:"ds.text.neutral.quiet",fontWeight:500,fontSize:"11px",lineHeight:"12px",letterSpacing:"0.03em",textTransform:"uppercase"},children:e})}),(0,f.BX)(B.rN7,{sx:{display:"flex",flexDirection:"column",gap:"16px",backgroundColor:"ds.container.agnostic.neutral.supershy",color:"ds.text.neutral.standard",marginTop:"14px"},children:[(0,f.tZ)(o.X6,{as:"h1",textStyle:"ds.title.section.medium",children:d(Cm)}),(0,f.tZ)(o.nv,{textStyle:"ds.title.block.medium",children:d(Em)}),(0,f.tZ)(o.mQ,{fullWidth:!0,tabs:u,defaultTab:0}),(0,f.tZ)(um,{selectedBrowsers:s,setSelectedBrowsers:l}),(0,f.tZ)(o.Zb,{sx:{backgroundColor:"ds.background.alternate",minHeight:"524px"},children:m()})]})]})})}):(0,f.BX)(o.Zb,{children:[(0,f.tZ)(o.nv,{textStyle:"ds.title.supporting.small",color:"ds.text.neutral.quiet",children:e}),(0,f.tZ)(o.X6,{as:"h1",textStyle:"ds.title.section.medium",children:d(Cm)}),(0,f.tZ)(o.nv,{textStyle:"ds.title.block.medium",children:d(Em)}),(0,f.tZ)(o.mQ,{fullWidth:!0,tabs:u,defaultTab:0}),(0,f.tZ)(um,{selectedBrowsers:s,setSelectedBrowsers:l}),(0,f.tZ)(o.Zb,{sx:{backgroundColor:"ds.background.alternate",minHeight:"524px"},children:m()})]})},Tm=({setError:e})=>{const{showToast:t}=(0,o.pm)(),{translate:n}=(0,g.Z)(),{updateLoggedOutMonitoringActiveStatus:a}=(0,F.u)(Fu.i);(0,r.useEffect)((()=>{(0,m.Nc)(l.PageView.TacRiskDetectionSetup)}),[]);const i=async()=>{(0,m.Kz)(new l.UserSetupRiskDetectionEvent({riskDetectionSetupStep:l.RiskDetectionSetupStep.TurnOn}));const r=await a({active:!0});(0,V.d6)(r)?(e({hasError:!1,retryFunction:void 0}),t({description:n("team_risk_detection_setup_toast_turned_on"),closeActionLabel:n("team_risk_detection_setup_toast_close")})):e({hasError:!0,retryFunction:async()=>{await i()}})};return(0,f.BX)(o.Zb,{children:[(0,f.tZ)(o.X6,{as:"h2",textStyle:"ds.title.supporting.small",color:"ds.text.neutral.quiet",children:n("team_risk_detection_setup_guidelines_step_turn_on_step_number")}),(0,f.tZ)(o.X6,{as:"h1",textStyle:"ds.title.section.medium",children:n("team_risk_detection_setup_guidelines_step_turn_on_title")}),(0,f.tZ)(o.nv,{textStyle:"ds.title.block.medium",children:n("team_risk_detection_setup_guidelines_step_turn_on_subtitle")}),(0,f.tZ)(o.nv,{textStyle:"ds.body.standard.regular",children:n("team_risk_detection_setup_guidelines_step_turn_on_description")}),(0,f.tZ)(o.zx,{sx:{alignSelf:"end"},onClick:i,children:n("team_risk_detection_setup_guidelines_turn_on_button")})]})};var Dm=n(85701);const km=({title:e,mood:t,score:n=0})=>(0,f.BX)("div",{sx:{flex:1},children:[(0,f.tZ)(o.nv,{textStyle:"ds.specialty.spotlight.medium",color:"positive"===t?"ds.text.brand.standard":`ds.text.${t}.quiet`,sx:{marginBottom:"2px"},children:null!=n?n:"N/A"}),(0,f.tZ)(o.nv,{textStyle:"ds.body.reduced.regular",children:e})]});var Im,Am=n(13091);const Nm={logins:"#32A9B2",compromised:"#FF7385",weak:"#ED892D"},wm=e=>{const{color:t}=e;return(0,f.tZ)("div",{sx:{width:"9px"},children:(0,f.tZ)("svg",{viewBox:"0 0 2 2",xmlns:"http://www.w3.org/2000/svg",children:(0,f.tZ)("line",{x1:"0",y1:"1",x2:"2",y2:"1",stroke:t,strokeWidth:"0.4"})})})},Om=({graphData:e,timeScale:t})=>{const{translate:n}=(0,g.Z)(),[a,i]=(0,r.useState)(!0),s=e.reduce(((e,{nLogins:t,nWeak:n,nCompromised:a})=>Math.max(e,t,n,a)),10),l=10*Math.ceil(s/10);return(0,f.BX)(f.HY,{children:[(0,f.tZ)(Ac.h,{height:220,children:(0,f.BX)(Nc.w,{data:e,children:[Im||(Im=(0,f.tZ)(wc.q,{vertical:!1})),(0,f.tZ)(Oc.B,{domain:[0,l],fontSize:"small"}),(0,f.tZ)(qc.K,{dataKey:"startDate",fontSize:"small",tickFormatter:e=>{const a=new Date(e);switch(t){case"week":return n.shortDate(a,Kt.qG.L_M_D);case"month":return`${n.shortDate(a,Kt.qG.L_M_D)} - ${n.shortDate((0,Am.Z)(a),Kt.qG.L_M_D)}`;case"year":return n.shortDate(a,Kt.qG.MMM)}}}),(0,f.tZ)(Lc.x,{dataKey:"nLogins",type:"linear",stroke:Nm.logins,strokeWidth:"2",isAnimationActive:!1}),(0,f.tZ)(Lc.x,{dataKey:"nWeak",type:"linear",stroke:Nm.weak,strokeWidth:"2",isAnimationActive:!1}),(0,f.tZ)(Lc.x,{dataKey:"nCompromised",type:"linear",stroke:Nm.compromised,strokeWidth:"2",isAnimationActive:!1})]})}),(0,f.BX)(o.Zb,{sx:{display:"flex",flexDirection:"column",padding:"16px",gap:"16px",backgroundColor:"ds.container.agnostic.neutral.quiet",borderColor:"ds.border.neutral.quiet.idle"},children:[(0,f.BX)(o.kC,{as:"button",flexDirection:"row",alignItems:"center",gap:"8px",onClick:()=>i(!a),sx:{cursor:"pointer",background:"none",width:"fit-content"},children:[(0,f.tZ)(o.X6,{as:"h3",textStyle:"ds.title.supporting.small",color:"ds.text.neutral.quiet",children:n("team_risk_detection_insights_graph_keys")}),(0,f.tZ)(o.JO,{name:a?"CaretRightOutlined":"CaretDownOutlined",size:"small",color:"ds.text.neutral.quiet"})]}),a?null:(0,f.tZ)(o.kC,{flexDirection:"row",gap:"32px",sx:{paddingLeft:"16px"},children:[["nLogins",Nm.logins,n("team_risk_detection_insights_graph_key_at_risk")],["nWeak",Nm.weak,n("team_risk_detection_insights_graph_key_weak")],["nCompromised",Nm.compromised,n("team_risk_detection_insights_graph_key_compromised")]].map((([e,t,n])=>(0,f.BX)(o.kC,{flexDirection:"row",gap:"8px",alignItems:"baseline",children:[(0,f.tZ)(wm,{color:t}),(0,f.tZ)(o.nv,{textStyle:"ds.body.helper.regular",color:"ds.text.neutral.quiet",children:n})]},e)))})]})]})};var Rm,Lm,Mm;const Bm="team_risk_detection_empty_risks_infobox_title",Pm=()=>(0,f.tZ)("div",{sx:Ju.VERTICAL_DIVIDER}),Um=({setError:e})=>{const[t,n]=(0,r.useState)("week"),{translate:a}=(0,g.Z)(),i=(0,c.k)(Fu.i,"getRiskDetectionInsights",{timeScale:t}),s=(0,c.k)(Rr.t,"hasSeenCRDRisksFoundInfobox"),{markCRDRisksFoundInfoboxSeen:d}=(0,F.u)(Rr.t);if((0,r.useEffect)((()=>{(0,m.Nc)(l.PageView.TacRiskDetectionInsights)}),[]),i.status===Ze.rq.Loading)return(0,f.tZ)("div",{sx:{display:"flex",justifyContent:"center",width:"100%",padding:"20vh 0"},children:Rm||(Rm=(0,f.tZ)(o.ZX,{size:160}))});i.status===Ze.rq.Error&&e({hasError:!0,retryFunction:()=>e({hasError:!1})});const _="week"===t?"team_risk_detection_insights_metrics_title_week":"month"===t?"team_risk_detection_insights_metrics_title_month":"team_risk_detection_insights_metrics_title_year",u=i.data?.insights,p=i.data?.riskDetectionHistory,h=u&&i.data?.hasLogsInLastYear,y=!!h&&s.status===Ze.rq.Success&&!s.data;return(0,f.BX)(f.HY,{children:[y?(0,f.tZ)(o.ke,{mood:"brand",icon:"TipOutlined",size:"large",title:a("team_risk_detection_insights_infobox_risks_detected_title"),description:a("team_risk_detection_insights_infobox_risks_detected_description"),actions:[(0,f.tZ)(o.zx,{intensity:"quiet",size:"small",onClick:()=>d(),children:"Dismiss"},"dismiss")]}):null,(0,f.BX)(o.Zb,{sx:{display:"flex",flexDirection:"column",maxWidth:"100%",padding:"24px",gap:"24px",backgroundColor:"ds.container.agnostic.neutral.supershy",borderColor:"ds.border.neutral.quiet.idle"},children:[(0,f.tZ)(o.X6,{as:"h2",children:a(_)}),(0,f.BX)(o.kC,{flexDirection:"row",gap:"24px",children:[(0,f.tZ)(km,{title:a("team_risk_detection_insights_total_employees_title"),mood:"positive",score:h?u.nLogins:null}),Lm||(Lm=(0,f.tZ)(Pm,{})),(0,f.tZ)(km,{title:a("team_risk_detection_insights_total_weak_logins_title"),mood:"warning",score:h?u.nWeak:null}),Mm||(Mm=(0,f.tZ)(Pm,{})),(0,f.tZ)(km,{title:a("team_risk_detection_insights_total_compromised_logins_title"),mood:"danger",score:h?u.nCompromised:null})]})]}),(0,f.BX)(o.Zb,{gap:"24px",sx:{flexDirection:"column",borderRadius:"8px",padding:"24px",maxWidth:"100%",backgroundColor:"ds.container.agnostic.neutral.supershy",borderColor:"ds.border.neutral.quiet.idle"},children:[(0,f.BX)(o.kC,{flexDirection:"row",justifyContent:"space-between",children:[(0,f.tZ)(o.X6,{as:"h2",children:a("team_risk_detection_insights_graph_title")}),(0,f.tZ)(o.mQ,{tabs:[{id:"tab-week",title:a("team_risk_detection_insights_graph_tab_week"),contentId:"content-week",onSelect:()=>{n("week")}},{id:"tab-month",title:a("team_risk_detection_insights_graph_tab_month"),contentId:"content-month",onSelect:()=>{n("month")}},{id:"tab-year",title:a("team_risk_detection_insights_graph_tab_year"),contentId:"content-year",onSelect:()=>{n("year")}}]})]}),p&&h?(0,f.tZ)(o.kC,{flexDirection:"column",gap:"12px",children:(0,f.tZ)(Om,{graphData:p,timeScale:t})}):(0,f.BX)(o.kC,{flexDirection:"row",justifyContent:"center",sx:{position:"relative",textAlign:"center"},children:[(0,f.tZ)(o.kC,{justifyContent:"center",flexDirection:"row",children:(0,f.tZ)("img",{src:Dm,width:"100%",alt:a(Bm)})}),(0,f.BX)(o.kC,{justifyContent:"center",flexDirection:"column",gap:"8px",sx:{maxWidth:"520px",position:"absolute",top:"40%",left:"50%",transform:"translate(-50%, -50%)"},children:[(0,f.tZ)(o.X6,{as:"h3",textStyle:"ds.title.block.medium",children:a(Bm)}),(0,f.tZ)(o.nv,{textStyle:"ds.body.standard.regular",color:"ds.text.neutral.quiet",children:a("team_risk_detection_empty_risks_infobox_description")})]})]})]})]})};var zm;const Xm=({token:e,active:t,setError:n})=>{const{translate:a}=(0,g.Z)(),[i,s]=(0,r.useState)(t?"insights":"settings"),l=[{id:"tab-insights",title:a("team_risk_detection_tabs_insights"),contentId:"content-insights",onSelect:()=>{s("insights")}},{id:"tab-settings",title:a("team_risk_detection_tabs_settings"),contentId:"content-settings",onSelect:()=>{s("settings")}}];return(0,f.BX)(f.HY,{children:[t?(0,f.tZ)(o.mQ,{tabs:l,sx:{margin:"0 42px"},defaultTab:"settings"===i?1:0}):null,(0,f.tZ)("div",{"aria-labelledby":"tab-settings",id:"content-settings",children:"settings"===i?(0,f.tZ)(ni,{fullWidth:!0,reducedVerticalPadding:!0,mainContent:(0,f.BX)("div",{sx:{display:"flex",flexDirection:"column",gap:"10px"},children:[(0,f.tZ)(im,{active:t}),t?(0,f.BX)(f.HY,{children:[(0,f.tZ)(dm,{token:e,setError:n}),(0,f.tZ)(Zm,{title:a("team_risk_detection_setup_guidelines_title_collapsed"),setError:n,isCollapsible:!0})]}):(0,f.BX)(f.HY,{children:[(0,f.tZ)(Zm,{title:a("team_risk_detection_setup_guidelines_step_number"),setError:n}),(0,f.tZ)(Tm,{setError:n})]})]}),secondaryContent:zm||(zm=(0,f.tZ)(rm,{}))}):void 0}),(0,f.tZ)("div",{"aria-labelledby":"tab-insights",id:"content-insights",children:"insights"===i?(0,f.tZ)(o.kC,{flexDirection:"column",gap:"16px",sx:{padding:"16px 42px"},children:(0,f.tZ)(Um,{setError:n})}):void 0})]})},qm=({helpCenterLink:e,retryFunction:t})=>{const{translate:n}=(0,g.Z)();return(0,f.tZ)("div",{sx:{minHeight:"680px",display:"flex",alignItems:"center",justifyContent:"center",padding:"24px"},children:(0,f.BX)("div",{sx:{display:"flex",flexDirection:"column",alignItems:"center",maxWidth:"480px"},children:[(0,f.tZ)(o.JO,{name:"FeedbackFailOutlined",color:"ds.text.danger.standard",size:"xlarge",sx:{marginBottom:"40px",width:"64px",height:"64px"}}),(0,f.tZ)(o.X6,{as:"h1",textStyle:"ds.title.section.large",color:"ds.text.danger.standard",sx:{marginBottom:"8px"},children:n("team_risk_detection_setup_error_heading")}),(0,f.tZ)(o.nv,{sx:{textAlign:"center"},children:n(t?"team_risk_detection_setup_error_retry_description":"team_risk_detection_setup_error_generic_description")}),t?(0,f.tZ)(o.zx,{onClick:t,sx:{marginTop:"40px"},children:n("team_risk_detection_setup_error_retry_button")}):null,e?(0,f.tZ)(o.Qj,{isExternal:!0,href:e,sx:{marginTop:"40px"},children:n("team_risk_detection_setup_error_help_center_link")}):null]})})},jm=({onClick:e})=>{const{translate:t}=(0,g.Z)();return(0,f.BX)(B.Zbd,{sx:(0,o.jM)([Ju.CARD,{padding:"24px"}]),children:[(0,f.tZ)(o.X6,{as:"h4",textStyle:"ds.title.supporting.small",color:"ds.text.neutral.quiet",children:t("team_risk_detection_contact_us_secondary_card_title")}),(0,f.BX)("div",{sx:{display:"flex",flexDirection:"column",gap:"8px"},children:[(0,f.tZ)(o.X6,{as:"h5",textStyle:"ds.title.block.medium",children:t("team_risk_detection_contact_us_secondary_card_subtitle")}),(0,f.tZ)(o.nv,{color:"ds.text.neutral.quiet",children:t("team_risk_detection_contact_us_secondary_card_description")})]}),(0,f.tZ)(o.Qj,{onClick:e,sx:{cursor:"pointer"},children:t("team_risk_detection_contact_us_secondary_card_button")})]})},Gm=()=>{const{translate:e}=(0,g.Z)(),{routes:t}=(0,i.Xo)(),[n,a]=(0,r.useState)(!1);return(0,r.useEffect)((()=>{(0,m.Nc)(l.PageView.TacRiskDetectionPaywall)}),[]),(0,f.BX)(f.HY,{children:[(0,f.tZ)(ni,{mainContent:(0,f.tZ)(B.Zbd,{sx:{display:"flex",padding:"48px",backgroundColor:"ds.container.agnostic.neutral.supershy",borderColor:"ds.border.neutral.quiet.idle"},children:(0,f.BX)(o.kC,{flexDirection:"column",gap:"32px",children:[(0,f.BX)(o.kC,{flexDirection:"column",gap:"8px",children:[(0,f.tZ)(o.Ct,{mood:"brand",intensity:"quiet",layout:"iconLeading",label:e("team_risk_detection_paywall_premium_badge"),iconName:"PremiumOutlined"}),(0,f.tZ)(o.X6,{as:"h2",textStyle:"ds.title.section.large",sx:{letterSpacing:"-1px"},children:e("team_risk_detection_paywall_main_card_title")})]}),(0,f.BX)(o.kC,{flexDirection:"column",alignItems:"left",gap:"32px",children:[(0,f.tZ)(Vu,{iconName:"ProtectionOutlined",title:e("team_risk_detection_paywall_main_card_credential_risk_title"),description:e("team_risk_detection_paywall_main_card_credential_risk_subtitle")}),(0,f.tZ)(Vu,{iconName:"RiskDetectionOutlined",title:e("team_risk_detection_paywall_main_card_receive_alert_title"),description:e("team_risk_detection_paywall_main_card_receive_alert_subtitle")}),(0,f.tZ)(Vu,{iconName:"TipOutlined",title:e("team_risk_detection_paywall_main_card_take_action_title"),description:e("team_risk_detection_paywall_main_card_take_action_subtitle")})]}),(0,f.tZ)(o.kC,{justifyContent:"right",children:(0,f.tZ)(o.zx,{as:i.rU,to:`${t.teamAccountChangePlanRoutePath}?plan=business`,size:"medium",layout:"iconLeading",icon:"PremiumOutlined",onClick:()=>{(0,m.Kz)(new l.UserClickEvent({button:l.Button.UpgradeBusinessTier}))},children:e("team_risk_detection_paywall_main_card_upgrade_business_button")})})]})}),fullWidth:!0,secondaryContent:(0,f.tZ)(jm,{onClick:()=>a(!0)})}),n?(0,f.tZ)(ne.c,{onDismiss:()=>a(!1)}):null]})};var Fm,Vm;const Hm=ue.q.RiskDetectionV1BetaTesters,Wm=ue.q.RiskDetectionV2Prod,$m=ue.q.RiskDetectionV2OnDemand,Ym=()=>{const e=(0,Qe.rp)(["riskDetection"]),t=(0,pe._)(),{routes:n}=(0,Ao.Xo)(),a=(0,Ne.k6)(),{translate:i}=(0,g.Z)(),s=(0,re.C)(),[l,c]=(0,r.useState)({hasError:!1,retryFunction:void 0}),d=(0,ju.C)();if(t.status===Ze.rq.Loading||d.isLoading||!s)return(0,f.tZ)("div",{sx:{display:"flex",justifyContent:"center"},children:Fm||(Fm=(0,f.tZ)(o.ZX,{size:75}))});const _=!!t.data?.[Hm]||!!t.data?.[$m],u=!!t.data?.[Wm];if(!_&&!u||d.hasError)return a.push(n.teamDashboardRoutePath),null;const{massDeploymentTeamKey:m,active:p}=d,h=u&&!e&&!_;return(0,f.BX)(f.HY,{children:[(0,f.BX)("div",{sx:{display:"flex",px:"48px",pt:"32px",pb:"12px",gap:"8px",alignItems:"center"},children:[(0,f.tZ)(o.X6,{as:"h1",textStyle:"ds.title.section.large",children:i("team_risk_detection_page_main_header")}),h?null:(0,f.BX)(f.HY,{children:[(0,f.tZ)(o.Ct,{label:i("team_business_plus_badge_label"),mood:"brand",intensity:"quiet",layout:"iconLeading",iconName:"PremiumOutlined"}),s.isFreeTrial?null:(0,f.tZ)(o.nv,{textStyle:"ds.body.helper.regular",color:"ds.text.brand.standard",children:i("team_business_plus_badge_expiration")})]})]}),h?Vm||(Vm=(0,f.tZ)(Gm,{})):l.hasError?(0,f.tZ)(qm,{retryFunction:()=>{c({hasError:!1})}}):m?(0,f.tZ)(Xm,{token:m,active:!!p,setError:c}):(0,f.tZ)(Qu,{setError:()=>c({hasError:!0,retryFunction:void 0})})]})},Km=e=>(0,f.tZ)("div",{className:"container--INT3GORhR4",children:e.children});var Qm=n(14691);const Jm="group_name_already_in_use";var ep=n(33377),tp=n(68505);const np={HEADER:{display:"inline-block",width:"100%",verticalAlign:"top"},CARD_CONTAINER:{display:"flex",gap:"16px",flexDirection:"column",padding:"32px",borderRadius:"8px",backgroundColor:"ds.container.agnostic.neutral.supershy",border:"1px solid ds.border.neutral.quiet.idle"}},ap={nameContainer:"nameContainer--NmQCGqTrTR",nameInput:"nameInput--Vpc7anR7aO",nameEditIcon:"nameEditIcon--Thlp4CT5Bq",spinner:"spinner--QQ6Zpwc8Zd",_errorText:"_errorText--shQIAebNjL",errorMessage:"errorMessage--Btb66DLL6K _errorText--shQIAebNjL",error:"error--UkyphHJLOB _errorText--shQIAebNjL"},ip=({onNameChanged:e,defaultValue:t,editable:n,saving:a})=>{const i=(0,r.useRef)(null),[s,l]=(0,r.useState)(t),[c,d]=(0,r.useState)(!1),[_,u]=(0,r.useState)(null);(0,r.useEffect)((()=>{c&&i.current?.focus()}),[c,i]);const m=()=>{const n=i.current?.value.trim();d(!1),l(n||t),e&&n&&e(n).then((({success:e,error:t=null})=>{d(!e),u(e?null:t)}))},p=Boolean(_);return(0,f.BX)(o.X6,{as:"h1",color:"ds.text.neutral.standard",textStyle:"ds.title.section.large",children:[!c&&(0,f.BX)("div",{className:M()(ap.nameContainer,{[ap.hoverableContainer]:n}),onClick:()=>{n&&d(!0)},children:[s,a?(0,f.tZ)(Ci.Z,{size:20,containerClassName:ap.nameEditIcon}):(0,f.tZ)("img",{className:ap.nameEditIcon,src:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTUiIGhlaWdodD0iMTUiIHZpZXdCb3g9IjAgMCAxNSAxNSIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICA8cGF0aCBkPSJNMTAuMTY3OCAxLjA3MjAzQzEwLjkzMDUgMC4zMDkzMjMgMTIuMTY2OCAwLjMwOTMyMyAxMi45Mjk1IDEuMDcyMDNDMTMuNjkyMyAxLjgzNDc0IDEzLjY5MjMgMy4wNzEwOSAxMi45Mjk1IDMuODM0NzhNMS4xOTA0NCAxMC4wNDlMMC41IDEzLjUwMjJMMy45NTIyMSAxMi44MTE4TDExLjU0ODEgNS4yMTQ5N0w4Ljc4NjI4IDIuNDUzMkwxLjE5MDQ0IDEwLjA0OVoiIHN0cm9rZT0iIzBFNjQ3NiIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIi8+Cjwvc3ZnPgo="})]}),c&&(0,f.tZ)("div",{className:ap.editNameContainer,children:(0,f.tZ)("input",{ref:i,type:"text",className:M()(ap.nameInput,{[ap.error]:p}),defaultValue:s,onBlur:m,onKeyUp:e=>{13===e.keyCode&&m()}})}),c&&p?(0,f.tZ)("div",{className:ap.errorMessage,children:_}):null]})};var rp=n(3431);const sp=({lee:e,userGroup:t})=>{const n=(0,r.useRef)(null),{translate:a}=(0,g.Z)(),{teamId:i}=(0,Ce.fV)(),{teamMembers:s}=k_(i),[o,l]=(0,r.useState)(null),[c,d]=(0,r.useState)([]),{invitePartialSuccessState:_,setInvitePartialSuccessState:u,handleInvitationResultClosed:m}=W_(),p=(0,ta.V)(),h=e=>(0,f.tZ)(bo.q,{className:"avatar--ZwBEp_dc1w",email:e,size:32}),y=()=>Boolean(c.length);return(0,f.BX)("div",{children:[(0,f.BX)(tp.e,{ref:n,buttonLabel:a("team_groups_edit_add_members"),confirmButtonLabel:a("team_groups_edit_add_member_confirm"),cancelButtonLabel:a("team_groups_edit_add_member_cancel"),confirmButtonDisabled:!y(),onCancelButtonClick:()=>{d([]),l(null)},onConfirmButtonClick:async()=>{if(!y())return;const r=c,{groupId:s,revision:o,name:_}=t,m=r.map((e=>({alias:e.toLowerCase(),permission:"limited"})));if(null===i)return void e.reportError(new Error(es.N));const g=await(0,Se.j_)({teamId:i,groupId:s,revision:o,users:m});if(g.error)return"no_free_slot"===g.error.message||"not_enough_free_slots"===g.error.message?void p.showAlert(a("team_group_edit_add_member_not_enough_slots_error",{count:m.length,groupName:_}),B.BLW.ERROR):void p.showAlert(a("team_groups_edit_invite_member_to_group_error_message_markup"),B.BLW.ERROR);Object.keys(g.refusedMembers).length&&u({invitedMembers:{},refusedMembers:g.refusedMembers,show:!0}),n.current&&n.current.hidePopup(),d([]),l(null)},popupClassName:"addMemberPopup--Zd2J1smSL4",children:[(0,f.tZ)("span",{className:"addMemberLabel--DXxhvug4yq",children:a("team_groups_edit_add_member_header")}),o&&(0,f.tZ)("div",{className:"error--IjVtbntYUX",children:o}),(0,f.tZ)(rp.J,{autoFocus:!0,className:"addMemberMultiselect--CDfv8wJoB6",dataSource:(()=>{const e=new Set(t.users.filter((({status:e})=>["accepted","pending"].includes(e))).map((({alias:e})=>e)));return s.filter((({login:t,status:n})=>"removed"!==n&&!e.has(t))).map((({login:e})=>({text:e,icon:h(e)})))})(),getCurrentSelectionAvatar:h,defaultValue:c,isItemValid:e=>(0,Mn.vV)(e),onChange:e=>{d(e)},onError:e=>l(e?a(`team_groups_edit_error_${e.message}`):null),placeholder:a("team_groups_edit_add_member_input_placeholder")})]}),(0,f.tZ)($_,{teamId:(0,k.ev)(e.globalState),isOpen:_.show,onClose:m,invitedMembers:_.invitedMembers,refusedMembers:_.refusedMembers})]})},op=ep.Maybe.nothing(),lp=({onBackLinkClick:e,onDeleteClick:t,onRenameGroup:n,groupName:a,lee:i,userGroup:s})=>{const{translate:l}=(0,g.Z)(),[c,d]=(0,r.useState)(ep.Maybe.nothing()),[_,u]=(0,r.useState)(!1);return(0,f.BX)("div",{sx:np.HEADER,children:[(0,f.tZ)(o.zx,{intensity:"supershy",layout:"iconLeading",icon:"ArrowLeftOutlined",onClick:t=>{e(t)},children:l("team_groups_edit_header_back")}),(0,f.BX)("div",{style:{display:"flex",justifyContent:"space-between",marginTop:"16px"},children:[(0,f.tZ)(ip,{defaultValue:a,editable:!0,saving:_,onNameChanged:async e=>{u(!0);const{error:t}=await n(e);return u(!1),t===Jm?{success:!1,error:l("team_groups_edit_header_name_already_exists")}:{success:!0}}}),(0,f.BX)("div",{style:{display:"flex",gap:"8px"},children:[(0,f.tZ)(tp.e,{buttonLabel:l("team_groups_edit_header_delete_group"),cancelButtonLabel:l("team_groups_edit_header_delete_group_cancel_button"),confirmButtonLabel:l("team_groups_edit_header_delete_group_confirm_button"),onCancelButtonClick:()=>{d(op)},onConfirmButtonClick:()=>{d(op),t()},confirmButtonDisabled:!c.caseOf({just:e=>e===a,nothing:()=>!1}),popupClassName:"confirmPopup--NTDDMjDo4B",buttonMood:"neutral",buttonIntensity:"quiet",buttonIconName:"ActionDeleteOutlined",children:(0,f.BX)("div",{style:{display:"flex",flexDirection:"column",gap:10,marginBottom:12},children:[(0,f.tZ)(B.nvN,{size:"large",children:l.markup("team_groups_edit_header_delete_group_confirm_title_markup",{group:a})}),(0,f.tZ)(B.nvN,{color:"neutrals.8",children:l("team_groups_edit_header_delete_group_confirm_subtitle")}),(0,f.tZ)(B.oil,{fullWidth:!0,onChange:e=>{const t=e.target.value?.trim();d(ep.Maybe.maybe(t))},type:"text",defaultValue:c.caseOf({just:e=>e,nothing:()=>{}}),autoFocus:!0})]})}),(0,f.tZ)(sp,{lee:i,userGroup:s})]})]})]})};var cp,dp=n(26849),_p=n(28746);const up=e=>(0,f.tZ)("svg",{className:e.className,width:"16",height:"16",viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg",fill:"none",children:cp||(cp=(0,f.tZ)("path",{d:"M13.5 2.5V15.5H2.5V2.5M10.5 2.5V0.5H5.5V2.5M1 2.5H15M5.5 6V11M8 6V11M10.5 6V11",stroke:"#0E6476",strokeLinecap:"round",strokeLinejoin:"round"}))});var mp;const pp=({member:e,handleRemoveMember:t})=>{const{translate:n}=(0,g.Z)();return(0,f.BX)("tr",{children:[(0,f.tZ)("td",{className:"emailCell--c3avC4hgf6",children:(0,f.BX)("div",{className:"emailCellContainer--yFS7a4HnT_",children:[(0,f.tZ)(bo.q,{className:"avatar--XHrkwJbc_C",email:e.alias,size:32}),e.alias]})}),(0,f.tZ)("td",{className:"rightsCell--Z6diiNotCT",children:n((a=e.permission,i=e.status,"admin"===a&&"accepted"===i?"team_groups_edit_member_list_rights_manager":"limited"===a&&"accepted"===i?"team_groups_edit_member_list_rights_member":"pending"===i?"team_groups_edit_member_list_rights_pending":""))}),(0,f.tZ)("td",{className:"plusCell--B02g3LGOlG",children:(0,f.tZ)("div",{style:{cursor:"pointer"},onClick:()=>t(e),children:mp||(mp=(0,f.tZ)(up,{}))})})]});var a,i},gp=r.memo(pp),hp=(0,dp.ascend)((0,dp.prop)("permission")),yp=(0,dp.ascend)((0,dp.compose)(dp.toLower,(0,dp.prop)("alias"))),bp=(0,dp.sortWith)([hp,yp]),xp=ep.Maybe.nothing(),Sp=({lee:e,className:t,userGroup:n,revokeMembers:a})=>{const{translate:i}=(0,g.Z)(),[s,o]=(0,r.useState)(0),[l,c]=(0,r.useState)({showRemoveUserDialog:!1,removeMemberCandidate:ep.Maybe.nothing()}),d=e=>{c({showRemoveUserDialog:!0,removeMemberCandidate:ep.Maybe.just(e)})},_=()=>(n.users||[]).filter((e=>"accepted"===e.status||"pending"===e.status)),u=()=>{c({showRemoveUserDialog:!1,removeMemberCandidate:xp})},m=(0,dp.map)((e=>(0,f.tZ)(gp,{member:e,handleRemoveMember:d},e.alias))),p=[{headerLabel:i("team_groups_edit_member_list_header_email"),headerKey:"email"},{headerLabel:i("team_groups_edit_member_list_header_group_rights"),colSpan:2,headerKey:"group-rights"}];return(0,f.BX)("div",{children:[(0,f.BX)("table",{className:M()(t,"table--hj3WYleNh5"),children:[(0,f.tZ)(ho,{columns:p}),(0,f.tZ)("tbody",{children:(()=>{const e=24*s;return(0,dp.compose)(m,(0,dp.slice)(e,e+24),bp)(_())})()})]}),(0,f.tZ)("div",{className:"pagination--Xk8h572zZ7",children:(0,f.tZ)(_p.Z,{currentPageIndex:s,itemsLength:_().length,itemsPerPage:24,onChange:e=>{o(e)}})}),(0,f.tZ)(yi.o,{isOpen:l.showRemoveUserDialog,onRequestClose:u,footer:(0,f.tZ)(B.cNS,{primaryButtonTitle:i("team_groups_edit_member_list_action_remove_dialog_cta"),primaryButtonOnClick:()=>{ep.Maybe.sequence({removeMemberCandidate:l.removeMemberCandidate,userGroup:ep.Maybe.just(n)}).caseOf({just:({removeMemberCandidate:t,userGroup:n})=>{a(e.dispatchGlobal,{groupId:n.groupId,revision:n.revision,users:[t.userId]},{title:i("team_groups_edit_revoke_member_from_group_error_title"),message:i("team_groups_edit_revoke_member_from_group_error_message")})},nothing:()=>{}}),c({showRemoveUserDialog:!1,removeMemberCandidate:xp})},secondaryButtonTitle:i("team_groups_edit_member_list_action_remove_dialog_cancel"),secondaryButtonOnClick:u}),title:i("team_groups_edit_member_list_action_remove_dialog_header"),children:(0,f.BX)("div",{children:[(0,f.tZ)("div",{className:"removeDialogTitle--Zn2JmJtOF0",children:i("team_groups_edit_member_list_action_remove_dialog_title",{email:l.removeMemberCandidate.caseOf({just:e=>e.userId,nothing:()=>""})})}),(0,f.tZ)("div",{children:i("team_groups_edit_member_list_action_remove_dialog_subtitle")})]})})]})};var fp=n(89611),vp=n(86662);const Cp=e=>`{${e.match.params.uuid}}`,Ep={userGroup:{live:fe.C.liveAdministrableUserGroup,liveParam:Cp,query:fe.C.getAdministrableUserGroup,queryParam:Cp}},Zp={strategies:Ep},Tp=(0,fp.$)((0,vp.i)((({lee:e,userGroup:t})=>{const{routes:n}=(0,i.Xo)(),{translate:a}=(0,g.Z)(),{addAlertToQueue:s}=Y();(0,r.useEffect)((()=>{(0,m.Nc)(l.PageView.TacGroupDetails)}),[]);const o=(e,t,n,a)=>{try{const e=JSON.parse(a);e.code&&(t.message+=` : ${e.code}`)}finally{e(Qm.Qy.error({message:n,content:{error:a}})),s(t)}};if(!t)return null;const c=(0,f.tZ)(lp,{onBackLinkClick:()=>{(0,i.uX)(n.teamGroupsRoutePath)},onDeleteClick:()=>{const{groupId:r,revision:s}=t;(0,Se.FU)({groupId:r,revision:s}).then((()=>{(0,i.uX)(n.teamGroupsRoutePath)})).catch((t=>{const n={title:a("team_groups_edit_delete_group_error_title"),message:a("team_groups_edit_delete_group_error_message")};o(e.dispatchGlobal,n,"Group deletion failed",t.message)}))},onRenameGroup:async n=>{if(n===t.name)return{success:!0};const i=(t,n)=>{const i={title:a("team_groups_edit_rename_group_error_title"),message:a("team_groups_edit_rename_group_error_message")};return o(e.dispatchGlobal,i,n,t.message),{success:!1,error:"group_renaming_failed"}};try{if(!await fe.C.isGroupNameAvailable(n))return{success:!1,error:Jm}}catch(e){return i(e,"Group name availability check failed")}try{const{groupId:e,revision:a}=t;return await(0,Se.J0)({groupId:e,revision:a,name:n}),{success:!0}}catch(e){return i(e,"Group renaming failed")}},groupName:t.name,lee:e.child(),userGroup:t});return(0,f.tZ)(zo,{header:c,children:(0,f.tZ)("div",{sx:np.CARD_CONTAINER,children:(0,f.tZ)(Sp,{lee:e.child(),userGroup:t,revokeMembers:(e,t,n)=>{try{fe.C.revokeUserGroupMembers(t).then((({error:t})=>{t&&o(e,n,"Revoke member from group failed",t.message)}))}catch(t){o(e,n,"Revoke member from group failed",t.message)}}})})})}),Zp),Ep);var Dp=n(58432);const kp=(0,Dp.SP)("edit",{},[]);var Ip=n(89789);const Ap="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTUiIGhlaWdodD0iMTQiIHZpZXdCb3g9IjAgMCAxNSAxNCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICA8cGF0aCBkPSJNOC41IDEuMTMyMzJMMTQuNSA3LjEzMjMyTTguNSAxMy4xMzIzTDE0LjUgNy4xMzIzMk0xNC41IDcuMTMyMzJMMC41MDAwMDEgNy4xMzIzMiIgc3Ryb2tlPSIjRDZEMkNFIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiLz4KPC9zdmc+Cg==",Np="onboardingStepArrow--gqb_E47Df_",wp="onboardingStepPanel--qnDSxlGTtS",Op="onboardingStepCounterPanel--KZLs4foheX",Rp="onboardingStepText--K_Kh_SIwEm",Lp="circle--mihUuCFcJa";var Mp,Bp;const Pp={CONTAINER:{width:"100%",textAlign:"center",paddingTop:"58px",border:"dashed 1px ds.border.neutral.quiet.idle",backgroundColor:"ds.container.agnostic.neutral.supershy"}},Up=()=>{const{translate:e}=(0,g.Z)();return(0,f.BX)("div",{sx:Pp.CONTAINER,children:[(0,f.tZ)("div",{className:"onboardingTitlePanel--yGKYcW_2lp",children:(0,f.tZ)(o.X6,{as:"h1",textStyle:"ds.title.section.large",color:"ds.text.neutral.catchy",children:e("team_groups_list_onboarding_title")})}),(0,f.BX)("div",{className:"onboardingStepsContainer--LZ8j5MDbRH",children:[(0,f.BX)("div",{className:wp,children:[(0,f.tZ)("div",{className:Op,children:(0,f.tZ)("div",{className:Lp,children:"1"})}),(0,f.tZ)("div",{className:Rp,children:e("team_groups_list_onboarding_step_1")})]}),(0,f.tZ)("div",{className:Np,children:Mp||(Mp=(0,f.tZ)("img",{src:Ap}))}),(0,f.BX)("div",{className:wp,children:[(0,f.tZ)("div",{className:Op,children:(0,f.tZ)("div",{className:Lp,children:"2"})}),(0,f.tZ)("div",{className:Rp,children:e("team_groups_list_onboarding_step_2")})]}),(0,f.tZ)("div",{className:Np,children:Bp||(Bp=(0,f.tZ)("img",{src:Ap}))}),(0,f.BX)("div",{className:wp,children:[(0,f.tZ)("div",{className:Op,children:(0,f.tZ)("div",{className:Lp,children:"3"})}),(0,f.tZ)("div",{className:Rp,children:e("team_groups_list_onboarding_step_3")})]})]})]})},zp=({key:e,index:t,isFirstTimeGroupCreation:n,hasNewGroupDelayPassed:a,children:i})=>{const{translate:r}=(0,g.Z)();return(0,f.tZ)(B.ua7,{sx:{"@keyframes fadeIn":{"0%":{opacity:0},"100%":{opacity:1}},animation:"fadeIn 250ms ease-out"},passThrough:0!==t||!n||!a,placement:"bottom",arrowSize:12,trigger:"persist",content:(0,f.tZ)(o.nv,{color:"ds.text.inverse.standard",children:r("team_groups_list_new_group_tooltip")}),children:i},e)},Xp=({enforcePaywall:e,className:t})=>{const{translate:n}=(0,g.Z)(),{routes:a}=(0,i.Xo)();return(0,f.tZ)(o.ke,{title:n(e?"team_group_list_paywall_block_title":"team_group_list_paywall_warning_title"),description:n("team_group_list_paywall_description"),actions:[(0,f.tZ)(i.rU,{to:`${a.teamAccountChangePlanRoutePath}?plan=business`,onClick:()=>{(0,m.Kz)(new l.UserClickEvent({clickOrigin:e?l.ClickOrigin.GroupsStarterLimitReached:l.ClickOrigin.GroupsStarterLimitCloseToBeReached,button:l.Button.UpgradeBusinessTier}))},children:(0,f.tZ)(o.zx,{icon:"PremiumOutlined",layout:"iconLeading",size:"small",children:n("team_group_list_paywall_upgrade")})},"upgrade")],mood:e?"warning":"brand",size:"large",className:t})},qp=({className:e})=>{const{translate:t}=(0,g.Z)(),n=ae.tz;return(0,f.tZ)(o.ke,{title:t("team_group_list_in_trial_business_paywall_block_title"),description:t("team_group_list_in_trial_business_paywall_block_description"),mood:"brand",size:"large",actions:[(0,f.tZ)(o.zx,{onClick:()=>{},as:"a",href:n,rel:"noreferrer",target:"_blank",children:t("team_group_list_in_trial_business_paywall_block_upgrade")},"upgrade")],className:e})};var jp=n(26053);const Gp=()=>{const{translate:e}=(0,g.Z)(),{routes:t}=(0,i.Xo)();return(0,f.BX)(o.Zb,{sx:{margin:"auto",textAlign:"center",gap:"24px",width:"100%",backgroundColor:"ds.container.agnostic.neutral.supershy"},children:[(0,f.tZ)("div",{sx:{paddingTop:"40px"},children:(0,f.tZ)("img",{alt:"",src:jp,sx:{objectFit:"contain",maxWidth:"320px",height:"auto"}})}),(0,f.BX)("div",{sx:{width:"512px",margin:"0 auto"},children:[(0,f.tZ)(o.X6,{as:"h1",textStyle:"ds.title.section.large",color:"ds.text.neutral.catchy",sx:{marginBottom:"8px"},children:e("team_groups_entrylevel_paywall_title")}),(0,f.tZ)(o.nv,{color:"ds.text.neutral.standard",children:e("team_groups_entrylevel_paywall_description")})]}),(0,f.tZ)(i.rU,{to:`${t.teamAccountChangePlanRoutePath}?plan=business`,sx:{paddingBottom:"64px"},children:(0,f.tZ)(o.zx,{icon:"PremiumOutlined",layout:"iconLeading",size:"large",mood:"brand",intensity:"catchy",children:e("team_upgrade_to_business")})},"upgrade")]})};var Fp,Vp,Hp;const Wp={GROUP_ROW:{display:"grid",gap:"16px",gridTemplateColumns:"repeat(auto-fill, minmax(400px, 1fr))",gridAutoRows:"62px"},GROUP_ITEM:{cursor:"pointer",display:"flex",flexDirection:"column",justifyContent:"center",backgroundColor:"ds.container.expressive.neutral.supershy.idle",borderRadius:"4px",border:"1px solid ds.border.neutral.quiet.idle",textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden",padding:"20px 16px"}},$p="team_groups_list_search_placeholder",Yp=(e,t)=>{const n=e.name.toLocaleLowerCase(),a=t.name.toLocaleLowerCase();return n.localeCompare(a)},Kp={userGroups:{live:fe.C.liveAdministrableUserGroups,query:fe.C.getAdministrableUserGroups}},Qp={strategies:Kp,loadingComponent:(0,f.tZ)(Ci.Z,{containerStyle:{minHeight:240}})},Jp=(0,fp.$)((0,vp.i)((({userGroups:e,lee:t})=>{const n=(0,r.useRef)(null),{translate:a}=(0,g.Z)(),{teamId:s}=(0,Ce.fV)(),{routes:c}=(0,Ao.Xo)(),{addAlertToQueue:d,reportTACError:_}=Y(),[u,p]=(0,r.useState)(""),[h,y]=(0,r.useState)(!1),[b,x]=(0,r.useState)(!1),[S,v]=(0,r.useState)(""),[C,E]=(0,r.useState)(e),Z=(0,r.useRef)(!1),T=(0,i.k6)(),{displayStarterPaywall:D,displayInTrialBusinessPaywall:k,enforceStarterPaywall:I}=(e=>{const t=(0,re.C)(),n=(0,Te.Y)(),a=(0,Ee.o)("monetization_extension_group_sharing_repackage"),i=(0,Ms.S)(),r=(0,ie.lZ)(),s=!r.isLoading&&r.isTeamSoftDiscontinued;if(n.status!==Ze.rq.Success||!a||s)return{displayStarterPaywall:!1,enforceStarterPaywall:!1,displayInTrialBusinessPaywall:!1};const o=i?.groupSharing.info?.limit,l=!!o;return{displayStarterPaywall:l,enforceStarterPaywall:l&&e.length>=o,displayInTrialBusinessPaywall:(0,P.NG)(n.data)&&!!t?.isFreeTrial}})(e),A=pc();(0,r.useEffect)((()=>{(0,m.Nc)(l.PageView.TacGroupList)}),[]),(0,r.useEffect)((()=>{const t=[...e].sort(Yp),n=S?t.filter((e=>e.name.toLocaleLowerCase().includes(S.trim().toLocaleLowerCase()))):t;E(n)}),[S,e]);const N=e=>{T.push({pathname:c.teamGroupRoutePath((0,Ip.FN)(e.groupId))})},w=async e=>{var t;const n=null!=(t=e.target.value.trim())?t:"",a=""!==n&&await fe.C.isGroupNameAvailable(n);p(n),y(a)},O=()=>{p("")},R=async()=>{if(!s)throw new Error("teamId missing when attempting to create group");try{await(0,Se.wZ)(t.dispatchGlobal,{name:u,teamId:s}),n.current?.hidePopup(),p(""),e?.length?Z.current&&(Z.current=!1):(Z.current=!0,setTimeout((()=>{x(!0)}),700))}catch(e){let t;try{t=JSON.parse(e.message)?.code}catch{t=`${e?.message}`.toUpperCase()}t!==W&&d({title:a("team_groups_list_create_group_error_title"),message:a("MISSING_PUBLIC_KEY"===t?"team_groups_list_create_group_missing_public_key_error_message":"team_groups_list_create_group_error_message")}),_(new Error(e.message))}};return(0,f.tZ)(zo,{header:(()=>{const e=!h&&""!==u;return(0,f.tZ)("div",{sx:np.HEADER,children:(0,f.BX)("div",{sx:{display:"flex",justifyContent:"space-between"},children:[(0,f.tZ)(o.X6,{as:"h1",color:"ds.text.neutral.standard",textStyle:"ds.title.section.large",children:a("team_groups_list_title")}),I||A?null:(0,f.tZ)(tp.e,{ref:n,buttonLabel:a("team_groups_list_new_group_cta"),confirmButtonLabel:a("team_groups_list_new_group_creation_confirm_btn"),cancelButtonLabel:a("team_groups_list_new_group_creation_cancel_btn"),onConfirmButtonClick:R,onCancelButtonClick:O,confirmButtonDisabled:!h,children:(0,f.BX)("div",{style:{display:"flex",flexDirection:"column",gap:10,marginBottom:12},children:[(0,f.tZ)(o.nv,{as:"label",children:a("team_groups_list_new_group_creation_header")}),(0,f.tZ)(B.oil,{fullWidth:!0,onChange:w,defaultValue:u,type:"text",placeholder:a("team_groups_list_new_group_input_placeholder"),feedbackType:e?"error":void 0,feedbackText:e?a("team_groups_list_create_group_name_already_exists"):void 0,autoFocus:!0})]})})]})})})(),children:(()=>{const t=e?.length?C.map(((e,t)=>e?(0,f.tZ)(zp,{index:t,isFirstTimeGroupCreation:Z.current,hasNewGroupDelayPassed:b,children:(0,f.tZ)("div",{className:"groupItem",onClick:()=>N(e),onKeyDown:t=>{"Enter"===t.key&&N(e)},tabIndex:0,role:"button",title:e.name,sx:Wp.GROUP_ITEM,children:(0,f.tZ)(o.X6,{as:"h2",textStyle:"ds.title.block.medium",color:"ds.text.neutral.catchy",sx:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:e.name})})},e.groupId):null)):Fp||(Fp=(0,f.tZ)(Up,{}));return(0,f.BX)(f.HY,{children:[D?(0,f.tZ)(Xp,{enforcePaywall:I,sx:{marginBottom:"24px"}}):null,k?(0,f.tZ)(qp,{sx:{marginBottom:"24px"}}):null,A?Hp||(Hp=(0,f.tZ)(Gp,{})):(0,f.BX)("div",{sx:np.CARD_CONTAINER,children:[(0,f.tZ)(o.oi,{"aria-label":a($p),placeholder:a($p),type:"search",onChange:e=>{var t;return v(null!=(t=e.target.value)?t:"")},prefixIcon:Vp||(Vp=(0,f.tZ)(o.JO,{name:"ActionSearchOutlined"})),sx:{maxWidth:"365px",margin:0,padding:"0"}}),(0,f.tZ)(o.ke,{title:a("team_groups_list_info_box_title"),mood:"neutral"}),(0,f.tZ)("div",{sx:e?.length?Wp.GROUP_ROW:void 0,children:t})]})]})})()})}),Qp),Kp),eg=(0,Dp.SP)("list",{},[]);function tg(e){const{path:t,permission:n}=e;return(0,f.tZ)(i.GB,{exact:!0,path:[t,`${t}/:uuid`],component:Km,permission:n,children:(0,f.BX)(i.rs,{children:[(0,f.tZ)(i.Vy,{exact:!0,path:t,component:Jp,reducer:eg}),(0,f.tZ)(i.Vy,{path:`${t}/:uuid`,component:Tp,reducer:kp})]})})}var ng=n(74537);const ag="team_idp_infoboxes_dismiss_button",ig=()=>{const{routes:e}=(0,i.Xo)(),{translate:t}=(0,g.Z)(),n=(0,bl.Y)(Rr.t,{getIdPFailedProvisioningsData:{},hasSeenIdPNeedsSeatsInfobox:{},hasSeenIdPProvisioningsPendingInfobox:{}},[]),{markIdPNeedsSeatsInfoboxSeen:a,markIdPProvisioningsPendingInfoboxSeen:r}=(0,F.u)(Rr.t),{getIdPFailedProvisioningsData:s,hasSeenIdPNeedsSeatsInfobox:c,hasSeenIdPProvisioningsPendingInfobox:d}=n;if(s.status!==Ze.rq.Success||!s.data?.nbOfFailedCreations||c.status!==Ze.rq.Success||d.status!==Ze.rq.Success)return null;const{nbOfPendingProvisionings:_,requiredSeats:u,shouldShowNotifications:p}=s.data,h=!d.data&&p.warningProvisioningsPending,y=!c.data&&p.alertFailuresNeedSeats;return(0,f.BX)(f.HY,{children:[h?(0,f.tZ)(o.ke,{size:"large",mood:"warning",title:t("team_idp_pending_warning_infobox_title",{count:_,nbOfFailedUsers:_}),description:t("team_idp_pending_warning_infobox_description"),icon:"FeedbackWarningOutlined",actions:[(0,f.tZ)(o.zx,{size:"small",intensity:"quiet",onClick:()=>{(0,m.Kz)(new l.UserClickEvent({button:l.Button.Dismiss,clickOrigin:l.ClickOrigin.ProvisionRemainingSeatsReminder})),r()},children:t(ag)},"dismiss-pending-provisionings")]}):null,y?(0,f.tZ)(o.ke,{size:"large",mood:"danger",title:t("team_idp_errors_infobox_title",{count:u,nbOfFailedUsers:u}),icon:"FeedbackFailOutlined",actions:[(0,f.tZ)(o.zx,{size:"small",intensity:"quiet",onClick:()=>{(0,m.Kz)(new l.UserClickEvent({button:l.Button.Dismiss,clickOrigin:l.ClickOrigin.InsufficientSeatsProvisioningErrorBanner})),a()},children:t(ag)},"dismiss-failed-provisionings"),(0,f.tZ)(o.zx,{as:i.rU,size:"small",intensity:"catchy",to:`${e.teamAccountRoutePath}?showSeatsDialog=true&seatsToBuy=${u}`,onClick:()=>{(0,m.Kz)(new l.UserClickEvent({button:l.Button.BuySeats,clickOrigin:l.ClickOrigin.InsufficientSeatsProvisioningErrorBanner}))},children:t("team_idp_errors_infobox_button_buy_seats",{count:u})},"buy-seats-idp")]}):null]})},rg=({handleClickOnRetry:e})=>{const{translate:t}=(0,g.Z)();return(0,f.BX)(f.HY,{children:[(0,f.tZ)("div",{sx:{transform:"translate(-5px, -5px)",margin:"25px 0px"},children:(0,f.tZ)(B.enX,{color:o.O9.lightTheme.ds.text.danger.quiet,size:75})}),(0,f.tZ)(B.$N8,{id:"backup-code-generation-error-dialog-title",title:t("team_members_generate_recovery_codes_error_dialog_title")}),(0,f.tZ)(B.a7O,{children:(0,f.tZ)(B.nvN,{id:"backup-code-generation-error-dialog-description",sx:{color:o.O9.lightTheme.ds.text.neutral.standard},children:t("team_members_generate_recovery_codes_error_dialog_description")})}),(0,f.tZ)(B.cNS,{primaryButtonTitle:t("team_members_generate_recovery_codes_error_dialog_confirm_button"),primaryButtonProps:{id:"backup-code-generation-error-dialog-try-again-button",type:"button",autoFocus:!0},primaryButtonOnClick:()=>e()})]})};var sg,og=n(22958);const lg=({memberLogin:e,recoveryCodes:t,handleClickOnDone:n})=>{const{translate:a}=(0,g.Z)();return(0,f.BX)("div",{children:[(0,f.tZ)(B.$N8,{id:"backup-code-generation-dialog-list-title",title:a("team_members_generate_recovery_codes_dialog_title",{memberLogin:e})}),(0,f.BX)(B.a7O,{children:[(0,f.tZ)(B.nvN,{id:'id="backup-code-generation-dialog-list-description"',sx:{mb:"24px",mt:"6px",color:"ds.text.neutral.standard"},children:a("team_members_generate_recovery_codes_dialog_description",{memberLogin:e})}),(0,f.tZ)(B.j49,{color:"ds.text.brand.standard",id:'id="backup-code-generation-dialog-list-eyebrow"',children:a("team_members_generate_recovery_codes_dialog_codes_label")}),(0,f.tZ)(B.Zbd,{sx:{mt:"6px",padding:"8px 12px",width:"100%"},children:t?.map(((e,t)=>(0,f.tZ)(B.nvN,{"data-testid":`two-factor-authentication-backup-code-${t}`,children:e},e)))}),(0,f.tZ)(B.zxk,{sx:{mt:"24px"},type:"button",nature:"secondary",id:"backup-code-generation-dialog-list-download-button",onClick:()=>{const e=t?.join("\n");(0,ao.W)(e,og.B)},children:(0,f.BX)(o.kC,{children:[(0,f.tZ)("div",{sx:{mr:"10px"},children:sg||(sg=(0,f.tZ)(B._8t,{size:16}))}),a("team_members_generate_recovery_codes_dialog_download_button")]})})]}),(0,f.tZ)(B.cNS,{primaryButtonTitle:a("team_members_generate_recovery_codes_dialog_confirm_button"),primaryButtonProps:{id:"id=backup-code-generation-dialog-list-done-button",type:"button",autoFocus:!0},primaryButtonOnClick:()=>n()})]})};var cg;const dg=({isOpen:e,memberLogin:t,closeBackupCodeDialog:n})=>{const[a,i]=(0,r.useState)(!1),[s,o]=(0,r.useState)(),l=async()=>{const e=await fe.C.getRecoveryCodesAsTeamCaptain({login:t});e.success?o(e.data.recoveryCodes):i(!0)},c=()=>{i(!1),o(void 0),n()};(0,r.useEffect)((()=>{e&&!a&&l()}),[e]);const{translate:d}=(0,g.Z)();return(0,f.tZ)(B.VqE,{isOpen:e,closeIconName:a?d("BUTTON_CLOSE_DIALOG"):"",onClose:()=>{c()},children:a?(0,f.tZ)(rg,{handleClickOnRetry:()=>{i(!1),l()}}):s?(0,f.tZ)(lg,{memberLogin:t,recoveryCodes:s,handleClickOnDone:c}):(0,f.BX)(f.HY,{children:[(0,f.tZ)(B.$N8,{id:"backup-code-generation-dialog-loader-title",title:d("team_members_generate_recovery_codes_dialog_loading_title",{memberLogin:t})}),(0,f.tZ)(B.a7O,{children:(0,f.tZ)("div",{sx:{mt:"26px"},children:cg||(cg=(0,f.tZ)(Ci.Z,{mode:"light",size:75}))})})]})})};var _g=n(93383);const ug=({closeDialog:e,resendOrReactivate:t})=>{const{translate:n}=(0,g.Z)(),{showToast:a}=(0,o.pm)(),[i,s]=(0,r.useState)(!1),l=(0,Ee.o)(A_.G.WebOnboardingInviteLinkTacMigration),c=au(),d=c.status===Ze.rq.Success?c:void 0,{getInviteLinkDataForAdmin:_,inviteLinkDataForAdmin:u}=K_(),m=l?!0===d?.enabled:!1===u?.disabled,p=(0,ae.cI)(l?d?.teamKey:u?.teamKey);return(0,r.useEffect)((()=>{!1===l&&_()}),[_,l]),(0,f.BX)(o.Vq,{title:n("team_members_reinvite_dialog_title"),isOpen:!0,onClose:e,closeActionLabel:"Closing dialog",actions:{primary:{isLoading:i,disabled:i,children:n("team_members_resend_invite_dialog_resend_confirm"),onClick:async()=>{s(!0),await t(),s(!1),e()}},secondary:m?{children:n("team_members_resend_copy_invite_link"),onClick:()=>{navigator.clipboard.writeText(p),a({description:n("team_members_share_invite_link_copied"),mood:"brand"})}}:void 0},children:[(0,f.tZ)(o.nv,{children:n("team_members_resend_invite_dialog_message")}),m?(0,f.BX)(f.HY,{children:[(0,f.tZ)(o.nv,{textStyle:"ds.body.standard.regular",children:n("team_members_resend_invite_link_description")}),(0,f.tZ)(o.nv,{textStyle:"ds.body.standard.regular",sx:{textDecoration:"underline"},children:p})]}):null]})};var mg=n(44774);const pg={REVOKE_ERROR_MSG:"team_members_revoke_error_message",REVOKE_SUCCESS_MSG:"team_members_revoke_success_message",SINGLE:{REVOKE_DIALOG_CONFIRM:"team_members_revoke_single_dialog_confirm",REVOKE_DIALOG_CANCEL:"team_members_revoke_single_dialog_cancel",REVOKE_DIALOG_MSG:"team_members_revoke_single_dialog_message",REVOKE_DIALOG_MSG_B2B_ONLY:"team_members_revoke_single_dialog_message_b2b_only",REVOKE_DIALOG_TITLE:"team_members_revoke_single_dialog_title"},MULTIPLE:{REVOKE_DIALOG_CONFIRM:"team_members_remove_multiple_dialog_confirm",REVOKE_DIALOG_CANCEL:"team_members_revoke_multiple_dialog_cancel",REVOKE_DIALOG_MSG:"team_members_revoke_multiple_dialog_message",REVOKE_DIALOG_MSG_B2B_ONLY:"team_members_revoke_multiple_dialog_message_b2b_only",REVOKE_DIALOG_TITLE:"team_members_remove_multiple_dialog_title"},CLOSE_DIALOG_BUTTON_LABEL:"_common_dialog_dismiss_button"},gg=({lee:e,closeDialog:t,selectedMembers:n})=>{const{translate:a}=(0,g.Z)(),i=(0,ta.V)(),{reportTACError:r}=Y(),s=(0,Kc.I)(),l=1===n.length,c=s.status!==Ze.rq.Success||!s.isDisabled,d=l?pg.SINGLE:pg.MULTIPLE;return(0,f.tZ)(o.Vq,{isOpen:!0,onClose:t,isDestructive:!0,actions:{primary:{children:a(d.REVOKE_DIALOG_CONFIRM),onClick:async()=>{t();const s=(0,ts.v0)(e.globalState);if(!s)return void r(new Error(es.N));const{teamId:o}=s;if(o)try{const t=n.map((e=>e.login)),{content:{removedMembers:r,unproposedMembers:l,refusedMembers:c}}=await(new mg.Z).revokeMembers({auth:s,memberLogins:t}),d=Object.keys({...r,...l});d.forEach((t=>{const a=n.find((e=>e.login===t));e.dispatch(_g.Rb(a))})),Object.keys(c).forEach((t=>{const r=n.find((e=>e.login===t));if(!r)throw new Error(`member '${t}' not found in members list`);i.showAlert(a(pg.REVOKE_ERROR_MSG),B.BLW.ERROR),e.dispatch(_g.Jo(r))})),d.length&&(i.showAlert(a(pg.REVOKE_SUCCESS_MSG,{count:d.length}),B.BLW.SUCCESS),await(0,Se.hh)({teamId:o,action:"memberRevoked",users:d}))}catch(e){r(e)}}},secondary:{children:a(d.REVOKE_DIALOG_CANCEL),onClick:t}},closeActionLabel:a(pg.CLOSE_DIALOG_BUTTON_LABEL),title:l?a(pg.SINGLE.REVOKE_DIALOG_TITLE):a(pg.MULTIPLE.REVOKE_DIALOG_TITLE,{count:n.length}),children:(0,f.tZ)(o.nv,{className:"automation-tests-revoke-member-dialog-content",children:l?a(c?pg.SINGLE.REVOKE_DIALOG_MSG:pg.SINGLE.REVOKE_DIALOG_MSG_B2B_ONLY,{username:n[0].login||n[0].name}):a(c?pg.MULTIPLE.REVOKE_DIALOG_MSG:pg.MULTIPLE.REVOKE_DIALOG_MSG_B2B_ONLY)})})};var hg;const yg=({closeDialog:e})=>{const{translate:t}=(0,g.Z)(),n=(0,ta.V)(),{inviteLinkDataForAdmin:a,getInviteLinkDataForAdmin:i}=K_();(0,r.useEffect)((()=>{i()}),[i]);const s=(0,ae.cI)(a?.teamKey);return(0,f.tZ)(yi.o,{showCloseIcon:!0,isOpen:!0,footer:(0,f.tZ)(B.cNS,{intent:"primary",primaryButtonTitle:(0,f.BX)(f.HY,{children:[hg||(hg=(0,f.tZ)(o.JO,{name:"ActionCopyOutlined",size:"medium",color:"ds.text.inverse.catchy"})),t("team_memebers_share_link_dialog_copy_link_button")]}),primaryButtonOnClick:async()=>{await navigator.clipboard.writeText(s),n.showAlert(t("team_members_share_invite_link_copied"),B.BLW.SUCCESS)}}),onRequestClose:e,title:t("team_memebers_share_link_dialog_title"),children:(0,f.BX)(f.HY,{children:[(0,f.tZ)(B.nvN,{children:t("team_memebers_share_link_dialog_paragraph")}),(0,f.tZ)(B.nvN,{sx:{marginTop:"16px",fontWeight:"600"},children:s})]})})},bg=({membersWithoutPublicKey:e,onClose:t})=>{const{translate:n}=(0,g.Z)();return(0,f.tZ)(yi.o,{isOpen:Boolean(e.length),footer:(0,f.tZ)(B.cNS,{intent:"secondary",secondaryButtonTitle:n("team_members_error_popup_public_keys_ok"),secondaryButtonOnClick:t}),onRequestClose:t,title:n("team_members_error_popup_public_keys_title"),children:(0,f.BX)("div",{children:[n("team_members_error_popup_public_keys_message"),(0,f.tZ)("ul",{sx:{listStyleType:"disc",paddingLeft:"40px",marginTop:"1em",marginBottom:"1em"},children:e.map((({login:e})=>(0,f.tZ)("li",{children:e},e)))})]})})},xg=({closeDialog:e,applyActionOnMembers:t})=>{const{translate:n}=(0,g.Z)(),a=(0,ta.V)(),{getInviteLinkDataForAdmin:i,inviteLinkDataForAdmin:s,createInviteLink:o,toggleInviteLink:l}=K_(),c=ur();return(0,r.useEffect)((()=>{i()}),[i]),c?(0,f.tZ)(yi.o,{showCloseIcon:!0,isOpen:!0,footer:(0,f.tZ)(B.cNS,{intent:"primary",primaryButtonTitle:n("team_activation_dialog_activate_button"),primaryButtonOnClick:()=>(async()=>{s?.teamKey?s?.disabled&&await l(!1):await o(c),a.showAlert(n("team_activation_dialog_notification"),B.BLW.SUCCESS),await i(),t("shareInviteLink")})(),secondaryButtonTitle:n("team_activation_dialog_notrightnow_button"),secondaryButtonOnClick:e}),onRequestClose:e,title:n("team_activation_dialog_title"),children:(0,f.tZ)(B.nvN,{children:n("team_activation_dialog_paragrah")})}):null};var Sg=n(9748);const fg={teamCaptain:"team_members_assignment_dialog_admin_description",groupManager:"team_members_assignment_dialog_group_manager_description",member:"team_members_assignment_dialog_member_description"};var vg=function(e){return e.TeamCaptain="teamCaptain",e.Member="member",e.GroupManager="groupManager",e}(vg||{});const Cg=({member:e,newRole:t,updateUsersRights:n,closeDialog:a})=>{const{translate:i}=(0,g.Z)(),s=(0,ta.V)(),l=(0,Sg.U)(),c=Dg(e),[d,_]=(0,r.useState)(null!=t?t:c),u=pc(),m=u?vg:Tg;return null===l?null:(0,f.BX)(B.VqE,{isOpen:!0,onClose:a,closeIconName:i("_common_dialog_dismiss_button"),children:[(0,f.tZ)(B.$N8,{title:i("team_members_assignment_dialog_title",{user:e.login})}),(0,f.BX)(B.a7O,{children:[(0,f.tZ)(Zr.S,{value:d,onChange:e=>{_(e.target.value)},groupName:"roles",children:Object.values(m).map((e=>{return(0,f.BX)(Zr.E,{value:e,disabled:(t=e,!!(l&&t!==Tg.TeamCaptain&&t!==d||u&&t===Tg.GroupManager)),children:["groupManager"===e&&u?(0,f.tZ)("div",{sx:{display:"flex",flexDirection:"column",gap:"16px"},children:(0,f.BX)("div",{sx:{display:"flex",gap:"8px"},children:[(0,f.tZ)(o.nv,{color:"ds.text.neutral.standard",textStyle:"ds.body.standard.regular",children:i(kg[e])}),(0,f.tZ)(o.Ct,{mood:"brand",intensity:"quiet",label:i("team_upgrade_label"),layout:"iconLeading",iconName:"PremiumOutlined",sx:{color:"ds.text.brand.standard !important",alignSelf:"center"}})]})}):(0,f.tZ)(o.nv,{color:"ds.text.neutral.standard",textStyle:"ds.body.standard.regular",children:i(kg[e])}),(0,f.tZ)(o.nv,{color:"ds.text.neutral.quiet",textStyle:"ds.body.standard.regular",children:i(fg[e])})]},e);var t}))}),d===Tg.Member||u?null:(0,f.tZ)(o.ke,{mood:"brand",title:i("team_members_assignment_dialog_groups_infobox")})]}),(0,f.tZ)(B.cNS,{primaryButtonTitle:i("team_members_assignment_dialog_update_button"),primaryButtonOnClick:async()=>{if(d===c)return a();try{const t=await n([{member:e,oldRole:c,newRole:d}]);if(!t)return;if(t.successes.length)s.showAlert(i("team_members_assignment_single_success",{username:e.name||e.login||"Member",previousRole:i(kg[c]),newRole:i(kg[d])}),B.BLW.SUCCESS);else if(t.errors.length)throw t.errors[0].error}catch{s.showAlert(i("team_members_assignment_single_error",{username:e.name||e.login||"Member"}),B.BLW.ERROR)}finally{a()}},primaryButtonProps:{type:"button",style:{padding:"0 20px"},disabled:d===c},secondaryButtonTitle:i("team_members_assignment_dialog_cancel_button"),secondaryButtonOnClick:a,secondaryButtonProps:{type:"button",style:{border:"none",padding:"0 20px",color:"ds.text.neutral.catchy",backgroundColor:"ds.container.expressive.neutral.quiet.idle"}}})]})},Eg="team_members_assignment_multiple_error",Zg=({selectedMembers:e,newRole:t,updateUsersRights:n,closeDialog:a})=>{const{translate:i}=(0,g.Z)(),r=(0,ta.V)();return(0,f.tZ)(yi.o,{isOpen:!0,footer:(0,f.tZ)(B.cNS,{intent:"primary",primaryButtonTitle:i("team_members_assignment_multiple_dialog_submit"),primaryButtonOnClick:async()=>{const s=e.map((e=>({member:e,oldRole:Dg(e),newRole:t})));try{const e=await n(s);if(!e)return;const a=i(kg[t]);e.successes.length&&e.errors.length?r.showAlert(i("team_members_assignment_multiple_partial_success",{countSuccess:e.successes.length,countTotal:s.length,newRole:a}),B.BLW.WARNING):e.successes.length?r.showAlert(i("team_members_assignment_multiple_success",{count:e.successes.length,newRole:a}),B.BLW.SUCCESS):e.errors.length&&r.showAlert(i(Eg,{count:e.errors.length}),B.BLW.ERROR)}catch{r.showAlert(i(Eg,{count:e.length}),B.BLW.ERROR)}finally{a()}},secondaryButtonTitle:i("team_members_assignment_multiple_dialog_cancel"),secondaryButtonOnClick:a}),onRequestClose:a,title:i("team_members_assignment_multiple_dialog_title",{countTotal:e.length,newRole:i(kg[t])}),children:(()=>{switch(t){case Tg.TeamCaptain:return i("team_members_assignment_multiple_dialog_admin_message");case Tg.GroupManager:return i("team_members_assignment_multiple_dialog_group_manager_message");default:return i("team_members_assignment_multiple_dialog_member_message")}})()})};let Tg=function(e){return e.TeamCaptain="teamCaptain",e.GroupManager="groupManager",e.Member="member",e}({});const Dg=e=>e.isTeamCaptain?Tg.TeamCaptain:e.isGroupManager?Tg.GroupManager:Tg.Member,kg={teamCaptain:"team_members_assignment_dialog_admin_label",groupManager:"team_members_assignment_dialog_group_manager_label",member:"team_members_assignment_dialog_member_label"},Ig=({selectedMembers:e,newRole:t,lee:n,closeDialog:a})=>{const{reportTACError:i}=Y(),{translate:r}=(0,g.Z)(),{addGroupManager:s,removeGroupManager:o}=(0,F.u)(br.J),l=async e=>{const t=(0,ts.v0)(n.globalState);if(!t)return void i(new Error(es.N));const{teamId:a}=t;if(!a)throw new Error("No team ID when attempting role assignment");const r={errors:[],successes:[]};for await(const{member:t,oldRole:i,newRole:l}of e)try{switch(i){case Tg.TeamCaptain:await(0,Se.Lx)({teamId:a,memberLogin:t.login}),n.dispatch(_g.bj(t)),await(0,Se.hh)({teamId:a,action:"adminDemoted",users:[t.login]});break;case Tg.GroupManager:await o({memberLogin:t.login,teamId:a}),n.dispatch(_g.vE(t))}switch(l){case Tg.TeamCaptain:await(0,Se.JQ)({teamId:a,memberLogin:t.login}),n.dispatch(_g.VW(t)),await(0,Se.hh)({teamId:a,action:"adminPromoted",users:[t.login]});break;case Tg.GroupManager:await s({memberLogin:t.login,teamId:a}),n.dispatch(_g.lp(t))}r.successes.push(t.login)}catch(e){r.errors.push({member:t.login,error:e})}return r};return e.length?1===e.length?(0,f.tZ)(Cg,{member:e[0],newRole:t,updateUsersRights:l,closeDialog:a}):(0,f.tZ)(Zg,{selectedMembers:e,newRole:null!=t?t:Tg.Member,updateUsersRights:l,closeDialog:a}):(0,f.tZ)(yi.o,{isOpen:!0,footer:(0,f.tZ)(B.cNS,{intent:"secondary",secondaryButtonTitle:r("team_members_assignment_nobody_dialog_cancel"),secondaryButtonOnClick:a}),onRequestClose:a,title:r("team_members_assignment_nobody_dialog_title"),children:r("team_members_assignment_nobody_dialog_message",{newRole:t?r(kg[t]):""})})},Ag=e=>e.filter((e=>["pending","proposed"].includes(e.status)));var Ng;const wg={SUMMARY_CARD:{display:"flex",flexDirection:"column",justifyContent:"space-between",gap:"16px",flex:1},BUTTON_AND_BADGE_AREA:{display:"flex",flexDirection:"row",gap:"16px",alignItems:"center"}},Og=({title:e,titleColor:t,subtitle:n,action:a,isLoading:i,badge:r})=>(0,f.BX)("div",{sx:wg.SUMMARY_CARD,children:[i?Ng||(Ng=(0,f.tZ)(o.ZX,{mood:"brand"})):(0,f.tZ)(o.nv,{textStyle:"ds.specialty.monospace.medium",color:null!=t?t:"ds.text.neutral.quiet",children:e}),(0,f.tZ)(o.nv,{as:"h2",textStyle:"ds.body.standard.regular",color:"ds.text.neutral.quiet",children:n}),(0,f.BX)("div",{sx:wg.BUTTON_AND_BADGE_AREA,children:[(0,f.tZ)(o.zx,{disabled:a.disabled,mood:a.mood,intensity:a.intensity,onClick:a.onClick,layout:"iconTrailing",icon:a.icon,children:a.label}),null!=r?r:null]})]}),Rg=({onReinviteAllClick:e})=>{const{translate:t}=(0,g.Z)(),{routes:n}=(0,i.Xo)(),a=(0,i.k6)(),{data:s,status:d}=(0,c.k)(Kl.B,"getReport"),u=(0,c.k)(Rr.t,"getIdPFailedProvisioningsData"),{openDialog:p,shouldShowFrozenStateDialog:h}=(0,A.Ub)(),y=(0,re.C)(),b=!!y&&y.spaceTier===_.lD.Starter,x=!!y&&y.spaceTier===_.lD.Standard,[S,v]=(0,r.useState)(!0),[C,E]=(0,r.useState)(0),[Z,T]=(0,r.useState)(0),[D,k]=(0,r.useState)(0),[I,N]=(0,r.useState)(0),[w,O]=(0,r.useState)(0),[R,L]=(0,r.useState)(!0),M=u.status===Ze.rq.Success?u.data?.requiredSeats:0;return(0,r.useEffect)((()=>{"success"===d&&null!==h&&(N(s.seats.pending),E(s.seats.provisioned-s.seats.used),T(s.seats.provisioned),k(s.seats.used/s.seats.provisioned),O(s.passwordHealth.securityIndex),v(!1),L(0===s.seats.pending&&1===s.seats.used))}),[s,d,h]),(0,f.BX)("div",{sx:{display:"flex",flexDirection:"column",gap:"24px",backgroundColor:"ds.container.agnostic.neutral.supershy",border:"1px solid ds.border.neutral.quiet.idle",borderRadius:"8px",padding:"24px"},children:[(0,f.tZ)(o.X6,{as:"h2",textStyle:"ds.title.supporting.small",color:"ds.text.neutral.quiet",children:t("team_members_summary_title")}),(0,f.BX)("div",{sx:{display:"flex",flexDirection:"row",justifyContent:"space-between",gap:"24px"},children:[(0,f.tZ)(Og,{isLoading:S,title:`${C}`,titleColor:D<=.5?"ds.text.positive.quiet":D<=.9?"ds.text.warning.quiet":"ds.text.danger.quiet",subtitle:t("team_members_summary_seat_count_content",{totalSeats:Z}),action:{label:t("team_members_summary_seat_count_cta"),disabled:S,mood:"brand",intensity:D>.5?"catchy":"quiet",onClick:()=>{(0,m.Kz)(new l.UserClickEvent({button:l.Button.BuySeats,clickOrigin:l.ClickOrigin.UsersSummary})),h?p():b||x?a.push(`${n.teamAccountChangePlanRoutePath}`):a.push(`${n.teamAccountRoutePath}?showSeatsDialog=true`)}},badge:M?(0,f.tZ)(Sc,{requiredSeatsForIdP:M}):void 0}),(0,f.tZ)("div",{sx:{width:"1px",backgroundColor:"ds.border.neutral.quiet.idle"}}),(0,f.tZ)(Og,{isLoading:S,title:`${I||(R?"-":t("team_members_summary_reinvite_users_no_new_invites_label"))}`,titleColor:R?"ds.text.neutral.quiet":0===I?"ds.text.positive.quiet":"ds.text.warning.quiet",subtitle:0===I?t(R?"team_members_summary_reinvite_users_no_members_content":"team_members_summary_reinvite_users_no_new_invites_content"):t("team_members_summary_reinvite_users_content",{count:I}),action:{label:t("team_members_summary_reinvite_users_cta",{count:I}),mood:"neutral",intensity:"quiet",disabled:S||0===I,onClick:()=>{(0,m.Kz)(new l.UserClickEvent({button:l.Button.ReInviteUsers,clickOrigin:l.ClickOrigin.UsersSummary})),h?p():e()}}}),(0,f.tZ)("div",{sx:{width:"1px",backgroundColor:"ds.border.neutral.quiet.idle"}}),(0,f.tZ)(Og,{isLoading:S,title:`${w||"-"}`,titleColor:w>=80?"ds.text.positive.quiet":w>=40?"ds.text.warning.quiet":w>0?"ds.text.danger.quiet":"ds.text.neutral.quiet",subtitle:t(!w||S?"team_members_summary_security_score_content_no_data":"team_members_summary_security_score_content"),action:{label:t("team_members_summary_security_score_cta"),mood:"neutral",intensity:"quiet",icon:"ActionOpenExternalLinkOutlined",onClick:()=>{(0,m.Kz)(new l.UserClickEvent({button:l.Button.CheckImproveHealthScore,clickOrigin:l.ClickOrigin.UsersSummary})),(0,X.Yo)("https://support.dashlane.com/hc/en-us/articles/360016225300-Manage-the-Password-Health-of-your-Starter-Team-or-Business-plan")}}})]})]})};var Lg=n(96266),Mg=n(89368);const Bg=({title:e,icon:t,description:n,onClick:a,key:i})=>(0,f.tZ)(B.W7o,{fullWidth:!0,onClick:a,sx:{height:"auto",textAlign:"left"},children:(0,f.BX)(B.T5p,{gap:"4px",gridTemplateColumns:"20px auto",gridTemplateRows:"auto auto",children:[(0,f.tZ)(B.dDn,{children:(0,f.tZ)(o.JO,{name:t,size:"medium"})}),(0,f.tZ)(B.dDn,{children:(0,f.tZ)(o.nv,{as:"span",textStyle:"ds.body.standard.strong",children:e})}),n?(0,f.tZ)(B.dDn,{gridArea:"2 / 2 / 3 / 3",sx:{textWrap:"wrap"},children:(0,f.tZ)(o.nv,{as:"span",color:"ds.text.neutral.quiet",textStyle:"ds.title.block.small",children:n})}):null]})},i);var Pg;const Ug=({members:e,onMembersActionSelect:t})=>{const{translate:n}=(0,g.Z)(),{getInviteLinkDataForAdmin:a}=K_(),i=(0,Ee.o)(A_.G.WebOnboardingInviteLinkTacMigration),r=au(),s=r.status===Ze.rq.Success?r:void 0;return null==i?null:(0,f.tZ)(B.h_2,{sx:{zIndex:1001},content:[(0,f.tZ)(Bg,{onClick:()=>{t("reinviteAll",Ag(e))},icon:"NotificationOutlined",title:n("team_members_resend_invite_all")},"resendInvite"),(0,f.tZ)(Bg,{onClick:async()=>{const e=i?null:await a();t((i?s?.enabled:e?.teamKey&&!e?.disabled)?"shareInviteLink":"enableInviteLink")},icon:"ActionCopyOutlined",title:n("team_members_share_invite_link")},"shareInviteLink"),(0,f.tZ)(Bg,{onClick:()=>{(0,m.Kz)(new l.UserClickEvent({button:l.Button.DownloadCsv})),(e=>{(0,ao.S)((e=>{const t=e.map((e=>{var t,n,a,i;return[e.login,e.status,e.twoFAInformation.type,null!=(t=e.nbrPasswords)?t:0,null!=(n=e.weakPasswords)?n:0,null!=(a=e.reused)?a:0,null!=(i=e.compromisedPasswords)?i:0,e.nbrPasswords>=5?e.securityIndex:"unavailable",e.ssoStatus,e.accountRecoveryKeyStatus,e.recoveryCreationDateUnix?"enabled":"disabled",e.lastUpdateDateUnix?(0,Bt.Z)(e.lastUpdateDateUnix).toISOString():e.revokedDateUnix?(0,Bt.Z)(e.revokedDateUnix).toISOString():e.status].join(",")})).join("\n");return`${["login email","status","twoFA_Status","number_passwords","weak_passwords","reused_passwords","compromised_passwords","password_health_score","sso_status","account_recovery_key_status","admin_recovery_status","last_active"].join(",")}\n${t}`})(e),"team-members.csv","text/csv;charset=utf-8")})(e)},icon:"DownloadOutlined",title:n("team_members_download_csv"),description:n("team_members_download_csv_description")},"exportUserCSV")].filter(Boolean),children:(0,f.tZ)(o.zx,{id:"expand-invite-option","aria-label":n("team_members_expand_invite_option"),intensity:"quiet",mood:"neutral",size:"medium",layout:"iconOnly",sx:{marginLeft:"16px"},icon:Pg||(Pg=(0,f.tZ)(o.JO,{name:"ActionMoreOutlined",size:"medium",color:"ds.text.neutral.standard"}))})})};var zg=n(57341),Xg=n(7867);const qg="team_members_bulk_actions_menu_member",jg="team_members_bulk_actions_menu_group_manager",Gg=({onMultipleReassignActionSelect:e})=>{const{translate:t}=(0,g.Z)(),{openDialog:n,shouldShowFrozenStateDialog:a}=(0,A.Ub)(),i=pc(),[s,l]=r.useState(!1),c=t=>{a&&t!==Tg.TeamCaptain?n():e(t),l(!1)};return(0,f.tZ)(Xg.j,{onOutsideClick:()=>{l(!1)},children:(0,f.BX)("div",{className:"container--zGfanmJ20J",children:[(0,f.tZ)(zg.Z,{label:t("team_members_bulk_actions_menu_label"),onClick:()=>{l(!s)},classNames:["dropdownButton--eX1Pwf6noX"],icon:(0,f.tZ)("img",{className:M()("buttonIcon--K7qOhGWIeC",{"flip--CjjllwCv0e":s}),src:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTAiIGhlaWdodD0iNiIgdmlld0JveD0iMCAwIDEwIDYiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CiAgPHBhdGggZD0iTTkuNSAwLjVMNSA1LjVMMC41IDAuNSIgc3Ryb2tlPSIjNkU4NjhCIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiLz4KPC9zdmc+Cg==",role:"none"}),iconClassName:["iconContainer--_MWkwTD793"],iconPosition:"right"}),s?(0,f.BX)("ul",{className:"menu--svPbw6Qghp",children:[(0,f.tZ)("li",{onClick:()=>c(Tg.TeamCaptain),children:t("team_members_bulk_actions_menu_admin")},"admin"),i?(0,f.BX)(f.HY,{children:[(0,f.tZ)("li",{onClick:()=>c(Tg.Member),children:t(qg)},"member"),(0,f.tZ)("li",{sx:{pointerEvents:"none",color:"ds.text.oddity.disabled"},children:(0,f.tZ)(o.nv,{sx:{color:"ds.text.oddity.disabled"},children:t(jg)})},"groupManager")]}):(0,f.BX)(f.HY,{children:[(0,f.tZ)("li",{onClick:()=>c(Tg.GroupManager),children:t(jg)},"groupManager"),(0,f.tZ)("li",{onClick:()=>c(Tg.Member),children:t(qg)},"member")]})]}):null]})})};var Fg=function(e){return e[e.TEAM_CAPTAIN=0]="TEAM_CAPTAIN",e[e.GROUP_MANAGER=1]="GROUP_MANAGER",e[e.BILLING_ADMIN=2]="BILLING_ADMIN",e[e.ACCEPTED=3]="ACCEPTED",e[e.PENDING_PROPOSED=4]="PENDING_PROPOSED",e[e.DEFAULT=5]="DEFAULT",e}(Fg||{});const Vg=({isTeamCaptain:e,isBillingAdmin:t,isGroupManager:n,status:a})=>{switch(!0){case e:return Fg.TEAM_CAPTAIN;case n:return Fg.GROUP_MANAGER;case t:return Fg.BILLING_ADMIN;case"accepted"===a:return Fg.ACCEPTED;case["pending","proposed"].includes(a):return Fg.PENDING_PROPOSED;default:return Fg.DEFAULT}},Hg=(e,t)=>"number"==typeof e?e:t&&["pending","proposed","removed","revoked"].includes(t)?-1:0,Wg=e=>e.map((e=>{return{...e,filterableStatus:(t=e.status,"proposed"===t?"pending":"revoked"===t?"removed":"unproposed"!==t?t:void 0),sortableLastActivity:e.revokedDateUnix||e.lastUpdateDateUnix||0,sortablePasswords:Hg(e.nbrPasswords,e.status),sortableRights:Vg(e),sortableSecurityScore:Hg(e.securityIndex,e.status),sortableSafePasswords:Hg(e.safePasswords,e.status),sortableWeakPasswords:Hg(e.weakPasswords,e.status),sortableReused:Hg(e.reused,e.status),sortableCompromisedPasswords:Hg(e.compromisedPasswords,e.status)};var t}));var $g=n(73630),Yg=n(92350);const Kg=({member:e,onDismiss:t,onMemberActionSelect:n})=>{const{translate:a}=(0,g.Z)(),i=!!e.twoFAInformation&&("totp_device_registration"===e.twoFAInformation.type||"totp_login"===e.twoFAInformation.type),r=(0,Ee.o)(Yg.u.ChangeLoginEmailWebDev);return(0,f.tZ)(Xg.j,{onOutsideClick:t,children:(0,f.tZ)("ul",{className:"menu--tp5V4puFsY",children:(()=>{if("removed"===e.status)return(0,f.BX)("li",{id:"reactivate-quick-action",onClick:()=>n("reactivate",e),children:[(0,f.tZ)(o.JO,{name:"ItemEmailOutlined",color:"ds.text.neutral.quiet",sx:{marginRight:"16px"}}),a("team_members_reactivate_single_label")]},"reactivate");const t=[];return"pending"!==e.status&&"proposed"!==e.status||t.push((0,f.BX)("li",{id:"reinvite-quick-action",onClick:()=>n("reinvite",e),children:[(0,f.tZ)(o.JO,{name:"ItemEmailOutlined",color:"ds.text.neutral.quiet",sx:{marginRight:"16px"}}),a("team_members_resend_invite_label")]},"resendInvite")),"pending"!==e.status&&"proposed"!==e.status&&t.push((0,f.BX)("li",{id:"reassign-quick-action",onClick:()=>n("reassign",e),children:[(0,f.tZ)(o.JO,{name:"ItemPersonalInfoOutlined",color:"ds.text.neutral.quiet",sx:{marginRight:"16px"}}),a("team_members_change_role_label")]},"reassign")),r&&"pending"!==e.status&&"proposed"!==e.status&&t.push((0,f.BX)("li",{id:"change-login-email",onClick:()=>n("changeLoginEmail",e),children:[(0,f.tZ)(o.JO,{name:"ItemLoginOutlined",color:"ds.text.neutral.quiet",sx:{marginRight:"16px"}}),a("team_members_change_login_email")]},"change-login-email")),t.push((0,f.tZ)(o.u,{content:a("team_members_assignment_dialog_remove_billing_contact_tooltip"),location:"top",passThrough:!e.isBillingAdmin,sx:{whiteSpace:"normal"},children:(0,f.BX)("li",{id:"revoke-quick-action",onClick:e.isBillingAdmin?void 0:()=>n("revoke",e),sx:e.isBillingAdmin?{cursor:"not-allowed !important",opacity:"0.5"}:void 0,children:[(0,f.tZ)(o.JO,{name:"ActionDeleteOutlined",color:"ds.text.neutral.quiet",sx:{marginRight:"16px"}}),a("team_members_revoke_single_label")]},"revoke")},"revoke")),i&&"pending"!==e.status&&"proposed"!==e.status&&t.push((0,f.BX)("li",{id:"generate-2fa-recovery-code-quick-action",onClick:()=>n("generateBackupCode",e),children:[(0,f.tZ)(o.JO,{name:"RecoveryKeyOutlined",color:"ds.text.neutral.quiet",sx:{marginRight:"16px"}}),a("team_members_generate_recovery_codes_label")]},"generate2FABackupCodes")),t})()})})},Qg="securityScoreOver80--Hgr2G6S0v_",Jg="securityScoreOver60--_JHvGMsVMu",eh="securityScoreOver40--uopteVjbhe",th="securityScoreOver20--DGwlRT6aTn",nh="securityScoreOver0--KWOlPM746R",ah="securityScoreUnknown--X1UUUGTTOI",ih="box--b300GjbePX",rh="shield--aR0K8YOyOo",sh="medium--oK53lyprG3",oh="small--Y3Ur7GidSI",lh=({score:e,size:t,children:n})=>{const a="small"===t?oh:sh;return(0,f.BX)("div",{className:M()(ih,(i=e,i.caseOf({nothing:()=>ah,just:e=>e>=80?Qg:e>=60?Jg:e>=40?eh:e>=20?th:nh})),a),children:[(0,f.tZ)("div",{className:rh}),(0,f.tZ)("div",{children:n})]});var i};var ch,dh;const _h={LOGIN_TEXT:{variant:"text.ds.body.reduced.regular",wordBreak:"break-word",color:"ds.text.neutral.catchy",marginLeft:"16px",maxWidth:"280px",minWidth:"140px"},ROW:{boxShadow:"inset 0 -1px 0 0 ds.border.neutral.quiet.idle",height:"60px",variant:"text.ds.body.reduced.regular",td:{padding:"16px",verticalAlign:"middle"}},ACTIVE:{color:"ds.text.neutral.standard"},REVOKED:{color:"ds.text.neutral.quiet"}},uh="team_members_row_invitation_pending",mh=({checkedMembers:e,currentLoggedLogin:t,members:n,onMemberActionSelect:a,onMemberToggleCheck:i})=>{var s,l;const{translate:c}=(0,g.Z)(),[d,_]=(0,r.useState)(null),u=e=>{_(e===d?null:e)},m=(e,t)=>{u(d),a(e,t)},p=()=>(0,f.BX)(o.kC,{gap:"4px",children:[(0,f.tZ)(o.nv,{textStyle:"ds.body.standard.regular",color:"ds.text.neutral.quiet",children:c("team_members_row_security_score_unavailable")}),(0,f.tZ)(o.u,{wrapTrigger:!0,location:"bottom",content:c("team_members_row_security_score_breakdown_less_than_five"),children:(0,f.tZ)("div",{sx:{display:"flex",alignItems:"center"},children:ch||(ch=(0,f.tZ)(o.JO,{name:"FeedbackInfoOutlined",color:"ds.text.neutral.quiet",size:"xsmall"}))})})]}),h=e=>{const t=ep.Maybe.maybe(e.nbrPasswords>=5||!e.nbrPasswords&&e.securityIndex&&e.securityIndex>0?e.securityIndex:null);return t.caseOf({just:e=>0===e?s||(s=(0,f.tZ)(p,{})):(0,f.tZ)(lh,{score:t,size:"small",children:(0,f.tZ)("div",{className:"securityScoreCellText--uh3PGGldwN",children:`${fc(e)}%`})}),nothing:()=>l||(l=(0,f.tZ)(p,{}))})},y=e=>{switch(!0){case["pending","proposed"].includes(e.status):return c(uh);case Boolean(e.lastUpdateDateUnix||e.revokedDateUnix):return(0,f.tZ)(Ou.Z,{date:(0,Bt.Z)(e.lastUpdateDateUnix||e.revokedDateUnix)});case"pending"===e.status:return c(uh);default:return c("team_members_row_never_logged_in")}},b=e=>"removed"===e.status?c("team_members_row_revoked"):e.isTeamCaptain?c("team_members_row_captain"):e.isGroupManager?c("team_members_row_group_manager"):c("team_members_row_member"),x=e=>(0,f.tZ)(Kg,{member:e,onDismiss:()=>u(e.login),onMemberActionSelect:m});return(0,f.tZ)("tbody",{className:"tableBody--UVKDDE_osD",children:(()=>{const a=(e,t)=>null!=t?t:"accepted"!==e?"-":0;return n.map((n=>{return(0,f.BX)("tr",{id:"removed"===n.status?"revoked":"active",sx:(0,o.jM)([_h.ROW,"removed"===n.status?_h.REVOKED:_h.ACTIVE]),children:[(0,f.tZ)("td",{children:n.login!==t&&"removed"!==n.status&&(0,f.tZ)(o.XZ,{checked:!!Array.from(e).find((e=>e.login===n.login)),"aria-label":"Select user",onChange:()=>i(n)})}),(0,f.BX)("td",{className:"loginCell--zmWQn6nt_m",children:[(0,f.tZ)(bo.q,{email:n.login,size:30}),(0,f.tZ)("div",{sx:_h.LOGIN_TEXT,className:"automation-tests-member-login",children:(0,f.tZ)($g.Z,{tooltipText:n.login,children:n.login})})]}),(0,f.tZ)("td",{className:"securityScoreCell--TRrWX93JKm",children:h(n)}),(0,f.BX)("td",{className:"passwordsCell--gft4asedk5",children:[(0,f.tZ)("span",{className:"passwordsCellIcon--oJaMYYHQ_9"}),(r=n.status,s=n.nbrPasswords,"accepted"!==r?"-":!s||s<5?"<5":s)]}),(0,f.tZ)("td",{children:a(n.status,n.safePasswords)}),(0,f.tZ)("td",{children:a(n.status,n.weakPasswords)}),(0,f.tZ)("td",{children:a(n.status,n.reused)}),(0,f.tZ)("td",{children:a(n.status,n.compromisedPasswords)}),(0,f.tZ)("td",{children:y(n)}),(0,f.BX)("td",{children:[n.isBillingAdmin?(0,f.tZ)(o.u,{location:"top",content:c("team_account_heading_billing_admin_tooltip"),sx:{textAlign:"start"},children:(0,f.BX)("div",{sx:{display:"flex",alignItems:"center"},children:[(0,f.tZ)(o.nv,{textStyle:"ds.body.standard.strong",sx:{display:"inline-block"},children:c("team_account_heading_billing_admin")}),(0,f.tZ)(o.JO,{color:"ds.text.neutral.standard",name:"FeedbackInfoOutlined",sx:{display:"inline-block",marginLeft:"4px"},size:"small"})]})}):null,b(n)]}),(0,f.BX)("td",{className:"actionsCell--NotN6ngLnK",style:{position:"relative"},children:[n.login===d?x(n):null,n.login!==t?(0,f.tZ)(o.zx,{id:"users-action-menu-button","aria-label":c("team_members_row_aria_label_users_actions"),onClick:()=>u(n.login),layout:"iconOnly",intensity:"supershy",icon:dh||(dh=(0,f.tZ)(o.JO,{name:"SettingsOutlined",color:"ds.text.neutral.standard"}))}):null]})]},n.login);var r,s}))})()})},ph={TOP:{display:"flex",justifyContent:"space-between",height:"90px",marginBottom:"16px",color:"ds.text.neutral.quiet"},TOP_PAGINATION_TEXT:{whiteSpace:"nowrap",display:"flex",gap:"5px",alignItems:"center",maxHeight:"42px",overflowY:"hidden",marginRight:"16px"}},gh="team_members_heading_name",hh="team_members_heading_security_score",yh="team_members_heading_password_count",bh="team_members_heading_last_login",xh=24,Sh=({lee:e,members:t,onMembersActionSelect:n,onMembersInvite:a})=>{var i;const{translate:s}=(0,g.Z)(),l=(0,ts.v0)(e.globalState),c=null!=(i=l?.login)?i:"",[d,_]=(0,r.useState)(Wg(t)),[u,m]=(0,r.useState)(new Set),[p,h]=(0,r.useState)(0),[y,b]=(0,r.useState)(["accepted","pending","removed"]),[x,S]=(0,r.useState)(""),[v,C]=(0,r.useState)({sortBy:"sortableRights",sortOrder:"asc"}),E=pc()?"team_members_heading_entrylevel_tooltip_markup":"team_members_heading_rights_tooltip_markup";(0,r.useEffect)((()=>{m(new Set),_(Wg(t))}),[t]);const Z=()=>{const e=x?.toLocaleUpperCase(),t="asc"===v.sortOrder?dp.ascend:dp.descend;return(0,dp.sortWith)([t((0,dp.prop)(v.sortBy))])(d.filter((e=>e.filterableStatus&&y.includes(e.filterableStatus))).filter((t=>!x||t.login.toLocaleUpperCase().includes(e))))},T=e=>{h(e)},D=e=>{const t=e===v.sortBy&&"asc"===v.sortOrder?"desc":"asc";C({sortBy:e,sortOrder:t})},k=e=>{h(0),b((t=>t.includes(e)?t.filter((t=>t!==e)):t.concat([e])))},I=e=>!e.isBillingAdmin&&["accepted","pending","proposed"].includes(e.status),A=()=>{m(new Set)},N=()=>{const e=p*xh,t=new Set;Z().slice(e,e+xh).reduce(((e,t)=>(c===t.login||e.add({...t}),e)),t),Array.from(u).forEach((e=>t.add({...e}))),m(t)},w=p*xh,O=Z(),R={first:O.length?w+1:0,last:Math.min(O.length,w+xh)},L=O.slice(w,w+xh),M=(e=>{const t=e.filter((e=>Array.from(u).find((t=>t.login===e.login)))).length;let n;return e.find((e=>e.login===c)),e.length,n=0===t?N:A,(0,f.tZ)(o.XZ,{onChange:n,"aria-label":"select-all"})})(L),B=[{headerLabel:"",headerElement:M,headerKey:"checkbox"},{headerLabel:s(gh),tooltipLabel:s(gh),onClick:()=>D("login"),sortOrder:"login"!==v.sortBy?void 0:v.sortOrder,headerKey:"login"},{headerLabel:s(hh),tooltipLabel:s(hh),onClick:()=>D("sortableSecurityScore"),sortOrder:"sortableSecurityScore"!==v.sortBy?void 0:v.sortOrder,headerKey:"security-score"},{headerLabel:s(yh),tooltipLabel:s(yh),onClick:()=>D("sortablePasswords"),sortOrder:"sortablePasswords"!==v.sortBy?void 0:v.sortOrder,headerKey:"num-passwords"},{headerLabel:s("team_members_heading_safe"),tooltipLabel:s("team_members_heading_safe_tooltip"),onClick:()=>D("sortableSafePasswords"),sortOrder:"sortableSafePasswords"!==v.sortBy?void 0:v.sortOrder,headerKey:"safe-passwords"},{headerLabel:s("team_members_heading_weak"),tooltipLabel:s("team_members_heading_weak_tooltip"),onClick:()=>D("sortableWeakPasswords"),sortOrder:"sortableWeakPasswords"!==v.sortBy?void 0:v.sortOrder,headerKey:"weak-passwords"},{headerLabel:s("team_members_heading_reused"),tooltipLabel:s("team_members_heading_reused_tooltip"),onClick:()=>D("sortableReused"),sortOrder:"sortableReused"!==v.sortBy?void 0:v.sortOrder,headerKey:"reused-passwords"},{headerLabel:s("team_members_heading_compromised"),tooltipLabel:s("team_members_heading_compromised_tooltip"),onClick:()=>D("sortableCompromisedPasswords"),sortOrder:"sortableCompromisedPasswords"!==v.sortBy?void 0:v.sortOrder,headerKey:"compromised-passwords"},{headerLabel:s(bh),tooltipLabel:s(bh),onClick:()=>D("sortableLastActivity"),sortOrder:"sortableLastActivity"!==v.sortBy?void 0:v.sortOrder,headerKey:"last-login"},{headerLabel:(0,f.BX)("span",{sx:{display:"flex",alignItems:"center"},children:[s("team_members_heading_rights")," ",(0,f.tZ)(o.JO,{color:"ds.text.neutral.quiet",name:"FeedbackInfoOutlined",sx:{display:"inline-block",marginLeft:"4px"},size:"small"})]}),tooltipLabel:(0,f.tZ)("div",{sx:{"& > * > p:not(:last-child)":{marginBottom:"10px"}},children:s.markup(E)}),onClick:()=>D("sortableRights"),sortOrder:"sortableRights"!==v.sortBy?void 0:v.sortOrder,headerKey:"permissions"},{headerLabel:s("team_members_heading_actions"),headerKey:"actions"}];return(0,f.BX)("div",{className:"container--lTIFkRrWrT",children:[(0,f.tZ)("div",{sx:ph.TOP,children:(0,f.BX)("div",{className:"tableHeaderContainer--NOzH1jto0x",children:[(0,f.tZ)(Mg.n,{type:"search",containerStyle:{flexGrow:1,maxWidth:"300px",marginBottom:"15px"},onChange:e=>{h(0),S(e.currentTarget.value)},placeholder:s("team_members_filter_control_search_placeholder"),placeholderIcon:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjEiIGhlaWdodD0iMjEiIHZpZXdCb3g9IjAgMCAyMSAyMSIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICA8cGF0aCBkPSJNNy4zNzUgMTMuNzY0Nkw0LjM3NSAxNi43NjQ2TTE2LjM3NSA5LjI2NDY1QzE2LjM3NSAxMS43NDk5IDE0LjM2MDMgMTMuNzY0NiAxMS44NzUgMTMuNzY0NkM5LjM4OTcyIDEzLjc2NDYgNy4zNzUgMTEuNzQ5OSA3LjM3NSA5LjI2NDY1QzcuMzc1IDYuNzc5MzcgOS4zODk3MiA0Ljc2NDY1IDExLjg3NSA0Ljc2NDY1QzE0LjM2MDMgNC43NjQ2NSAxNi4zNzUgNi43NzkzNyAxNi4zNzUgOS4yNjQ2NVoiIHN0cm9rZT0iI0NDQzdDMiIgc3Ryb2tlLXdpZHRoPSIxLjUiLz4KPC9zdmc+Cg=="}),(0,f.BX)("div",{className:"topContainer--ST6B1mEZjJ",children:[(0,f.tZ)("div",{className:"topLeft--viTEuhR25Z",children:(0,f.BX)("div",{className:"statusFilters--SMNEn98faE",children:[(0,f.tZ)(o.XZ,{label:s("team_members_filter_control_include_active"),onChange:()=>k("accepted"),checked:y.includes("accepted")}),(0,f.tZ)(o.XZ,{label:s("team_members_filter_control_include_invited"),onChange:()=>k("pending"),checked:y.includes("pending")}),(0,f.tZ)(o.XZ,{label:s("team_members_filter_control_include_revoked"),onChange:()=>k("removed"),checked:y.includes("removed")})]})}),u.size>0&&[(0,f.tZ)(Gg,{onMultipleReassignActionSelect:e=>{let t=[...u];switch(e){case"member":t=t.filter((e=>e.isTeamCaptain||e.isGroupManager));break;case"teamCaptain":t=t.filter((e=>!e.isTeamCaptain&&"accepted"===e.status));break;case"groupManager":t=t.filter((e=>!e.isGroupManager&&"accepted"===e.status))}n("reassign",t,e)}},"dropdown"),(0,f.tZ)(Lg.Z,{classNames:["revokeButton--_sdxTpsqR2 topButton--vxY2fF8Lv4"],label:s("team_members_revoke_multiple_label"),disabled:![...u].some(I),onClick:()=>{let e=[...u];e=e.filter(I),n("revoke",e)}},"button")],(0,f.BX)("div",{className:"topRight--YZ2DF7wcrD",children:[(0,f.BX)("div",{className:"topPagination--rTlBiQ0EDF",children:[(0,f.BX)("div",{sx:ph.TOP_PAGINATION_TEXT,children:[(0,f.tZ)(o.nv,{textStyle:"ds.body.standard.regular",color:"ds.text.neutral.catchy",children:s("team_members_filter_pagination_top_count",{first:R.first,last:R.last})}),(0,f.tZ)(o.nv,{textStyle:"ds.body.standard.regular",color:"ds.text.neutral.quiet",children:s("team_members_filter_pagination_top_total",{total:O.length})})]}),(0,f.tZ)(_p.Z,{currentPageIndex:p,isShort:!0,itemsLength:O.length,itemsPerPage:xh,onChange:T})]}),(0,f.tZ)(o.zx,{icon:"ActionAddOutlined",layout:"iconLeading",onClick:a,children:s("team_members_quota_progress_add")}),t.length>1&&(0,f.tZ)(Ug,{members:t,onMembersActionSelect:n})]})]})]})}),(0,f.BX)("table",{className:"table--a8O2px0gHj",children:[(0,f.tZ)(ho,{columns:B}),(0,f.tZ)(mh,{checkedMembers:u,currentLoggedLogin:c,members:L,onMemberActionSelect:(e,t)=>{n(e,[t])},onMemberToggleCheck:e=>{m((t=>{const n=Array.from(t).find((t=>t.login===e.login)),a=new Set(t);return n?a.delete(n):a.add({...e}),a}))}})]}),(0,f.tZ)("div",{className:"bottom--b6BPTxGASq",children:(0,f.tZ)(_p.Z,{currentPageIndex:p,itemsLength:O.length,itemsPerPage:xh,onChange:T})})]})},fh=[],vh=()=>{const{translate:e}=(0,g.Z)(),{shouldShowNonMembersInfobox:t,nonMembersCount:n,nonMembersList:a}=(()=>{const e=(0,c.k)(Aa.L,"getNonMembersCount"),t=(0,c.k)(Aa.L,"getHasAdminDismissedInfobox"),n=(0,c.k)(Aa.L,"getNonMembersList");return{shouldShowNonMembersInfobox:e.status===Ze.rq.Success&&t.status===Ze.rq.Success&&e.data>0&&!t.data,nonMembersCount:e.status===Ze.rq.Success&&t.status===Ze.rq.Success?e.data:0,nonMembersList:n.status===Ze.rq.Success?n.data:fh}})(),[i,s]=(0,r.useState)(!1),l=function(){const{dismissNonMembersInfobox:e}=(0,F.u)(Aa.L);return e}();return(0,r.useEffect)((()=>{i&&a.length&&(function(e){const t=e.map((e=>[e.userId,e.login,e.premiumStatus,e.proposedState,(0,Bt.Z)(e.lastActivityDateUnix).toISOString()].join(","))).join("\n");(0,ao.S)(`${["user_id","login","premium_status","proposedState","last_activity_date"].join(",")}\n${t}`,"non-members-list.csv","text/csv;charset=utf-8")}(a),s(!1))}),[i,a]),t?(0,f.tZ)(o.ke,{title:e("non_members_infobox_title",{count:n}),description:e("non_members_infobox_description"),mood:"warning",size:"large",actions:[(0,f.tZ)(o.zx,{intensity:"quiet",size:"small",onClick:()=>l(),children:e("non_members_infobox_dismiss_cta")},"dismiss-non-members-infobox"),(0,f.tZ)(o.zx,{size:"small",isLoading:i,onClick:()=>s(!0),children:e("non_members_infobox_download_cta")},"download-non-members-list")]}):null};var Ch,Eh,Zh=n(16910);const Th={IDENTICAL_EMAIL:"webapp_change_contact_email_error_identical_email",INVALID_EMAIL:"webapp_change_contact_email_error_email_format",GENERIC_ERROR:"webapp_change_contact_email_error_generic",ERROR_RESTRICTED_EMAIL:"webapp_change_contact_email_error_restricted_email",ALREADY_USED:"webapp_change_contact_email_error_already_used"},Dh=({closeDialog:e,selectedMembers:t})=>{var n;const{translate:a}=(0,g.Z)(),{showToast:i}=(0,o.pm)(),[s,l]=(0,r.useState)(""),[c,d]=(0,r.useState)(""),_=(0,Fl.z)()?.teamDomain,u=n=>{const r=((e,t,n)=>{const a=e.split("@")[1];return(0,Mn.vV)(e)?e===t?"IDENTICAL_EMAIL":n&&n.length&&!n.find((e=>e===a))?"ERROR_RESTRICTED_EMAIL":null:"INVALID_EMAIL"})(n,t[0].login,_);r?d(r):(e(),i({description:a("webapp_change_login_email_tac_confirmation_toast")}))};return(0,f.tZ)(ea.J9,{initialValues:{email:s},onSubmit:()=>u(s),children:(0,f.BX)(o.Vq,{isOpen:!0,onClose:e,title:a("webapp_change_login_email_section_title"),closeActionLabel:a("_common_dialog_dismiss_button"),actions:{primary:{children:a("webapp_change_login_email_change_email_button"),type:"submit",onClick:()=>u(s),disabled:!s},secondary:{children:a("_common_action_cancel"),onClick:e}},children:[(0,f.tZ)(o.nv,{children:a.markup("webapp_change_login_email_tac_description_markup")}),(0,f.tZ)(o.s8,{label:a("webapp_change_login_email_tac_current_email_label"),value:t[0].login,readOnly:!0}),(0,f.tZ)(ea.l0,{children:(0,f.tZ)(o.s8,{label:a("webapp_change_login_email_new_email_label"),error:!!c,autoFocus:!0,onChange:e=>{const t=e.target.value;l(t),d("")},value:s,feedback:c?{id:Zh.H,text:a(null!=(n=Th[c])?n:a(Th.GENERIC_ERROR))}:void 0})}),_&&_.length>0?(0,f.BX)(o.nv,{color:"ds.text.neutral.quiet",textStyle:"ds.body.helper.regular",children:[`${a("webapp_change_login_email_tac_accepted_domain_first_part")} `,(0,f.tZ)(o.nv,{as:"span",textStyle:"ds.body.helper.regular",color:"ds.text.neutral.catchy",sx:{fontWeight:"bold"},children:`${_.join(", ")}.`}),Ch||(Ch=(0,f.tZ)("br",{})),a("webapp_change_login_email_tac_accepted_domain_second_part")]}):null,Eh||(Eh=(0,f.tZ)(o.nv,{textStyle:"ds.body.helper.regular"}))]})})};var kh,Ih;const Ah="_common_toast_close_label",Nh=({lee:e,location:t})=>{const n=(0,r.useRef)(!1),{translate:a}=(0,g.Z)(),{reportTACError:i}=Y(),s=(0,ta.V)(),_=(0,ng.v)(),{proposeMembers:u}=(0,F.u)(Aa.L),{showToast:p}=(0,o.pm)(),{openDialog:h,shouldShowFrozenStateDialog:y}=(0,A.Ub)(),b=(0,re.C)(),{data:x,status:S}=(0,c.k)(d.o,"getTeamSeats"),[v,C]=(0,r.useState)(!0),{invitePartialSuccessState:E,setInvitePartialSuccessState:Z,handleInvitationResultClosed:T}=W_(),[D,I]=(0,r.useState)(null),[N,w]=(0,r.useState)(!1),O=(0,Ee.o)(A_.G.WebOnboardingInviteLinkTacMigration),[R,L]=(0,r.useState)({showError:!1,membersWithoutPublicKey:[]}),M=(0,r.useCallback)((()=>{const t=(0,ts.v0)(e.globalState);return t||i(new Error(es.N)),t}),[e.globalState,i]),B=(0,r.useCallback)((()=>{y?h():(w(!0),(0,m.Kz)(new l.UserSendManualInviteEvent({flowStep:l.FlowStep.Start,inviteCount:0,inviteFailedCount:0,inviteResentCount:0,inviteSuccessfulCount:0,isImport:!1,isResend:!1})))}),[y]),P=t=>{e.dispatch(_g.eY(t))},U=(e,t)=>{Z({show:!0,invitedMembers:e,refusedMembers:t}),P(Object.keys(e))},z=(0,r.useCallback)(((t,n=[],i)=>{const r=async()=>{if(n.forEach((t=>{e.dispatch(_g.bh(t))})),!M())return;const t=n.map((e=>e.login));try{const i=await u({proposedMemberLogins:t});if("failure"===i.tag)throw new Error(i.error);if(i.data&&(0,O_.e)(i.data)){const{refusedMembers:a}=i.data.content;Object.values(a).forEach((t=>{const a=n.find((e=>e.login===t));U(i.data.proposedMembers,i.data.refusedMembers),e.dispatch(_g.S2(a))})),(0,m.Kz)(new l.UserSendManualInviteEvent({flowStep:l.FlowStep.Complete,inviteCount:t.length+Object.keys(a).length,inviteFailedCount:Object.keys(a).length,inviteResentCount:t.length,inviteSuccessfulCount:t.length-Object.keys(a).length,isImport:!1,isResend:!0}))}else p({description:a("team_members_invite_success_message"),mood:"brand",closeActionLabel:a(Ah)}),(0,m.Kz)(new l.UserSendManualInviteEvent({flowStep:l.FlowStep.Complete,inviteCount:t.length,inviteFailedCount:0,inviteResentCount:t.length,inviteSuccessfulCount:t.length,isImport:!1,isResend:!0}))}catch(i){const{message:r="",data:s={}}=i,o=a("team_members_invite_error_message_no_free_slot"),c=a("team_members_invite_error_message"),{content:{error:d=r}={}}=s,_=["no_free_slot_free_plan","no_free_slot"].includes(d)?o:c;n.forEach((t=>{e.dispatch(_g.S2(t))})),p({description:_,mood:"danger",closeActionLabel:a(Ah)}),(0,m.Kz)(new l.UserSendManualInviteEvent({flowStep:l.FlowStep.Error,inviteCount:t.length,inviteFailedCount:t.length,inviteResentCount:t.length,inviteSuccessfulCount:0,isImport:!1,isResend:!0}))}},s=n.map((e=>e.login));switch(t){case"reassign":return I((0,f.tZ)(Ig,{lee:e,selectedMembers:n,newRole:i,closeDialog:()=>I(null)}));case"reactivate":case"reinvite":return y?void h():void r();case"reinviteAll":return y?void h():I((0,f.tZ)(ug,{resendOrReactivate:r,closeDialog:()=>I(null)}));case"revoke":return I((0,f.tZ)(gg,{lee:e,selectedMembers:n,closeDialog:()=>I(null)}));case"changeLoginEmail":return I((0,f.tZ)(Dh,{selectedMembers:n,closeDialog:()=>I(null)}));case"generateBackupCode":return I((0,f.tZ)(dg,{memberLogin:s[0],isOpen:!0,closeBackupCodeDialog:()=>I(null)}));case"enableInviteLink":return y?void h():I(!0===O?(0,f.tZ)(ru,{isOpen:!0,onCancel:()=>I(null),onInviteLinkActivation:()=>z("shareInviteLink")}):(0,f.tZ)(xg,{closeDialog:()=>I(null),applyActionOnMembers:z}));case"shareInviteLink":return y?void h():I(!0===O?(0,f.tZ)(cu,{isOpen:!0,onClose:()=>I(null)}):(0,f.tZ)(yg,{closeDialog:()=>I(null)}))}}),[s,M,U,y,a]);if((0,r.useEffect)((()=>{if(n.current||null===_||null===y)return;n.current=!0;const a=M();if(!a)return;const{teamId:r}=a;r&&((0,Se.YY)({teamId:r}).then((n=>{var a;e.dispatch(_g.Wq({members:n})),_g.xF({extraFreeSlots:null!=(a=x?.extraFree)?a:0,membersNumber:n.length}),C(!1);const i=n&&1===n.length,r=t.state?.openSendInvitesDialog;if(!y&&(!_&&i||r))B();else if(t.state?.openResendPendingInvitationsDialog&&!y)return void z("reinviteAll",Ag(n));const s=n.filter((e=>!e.hasPublicKey)).filter((e=>"accepted"===e.status));s.length&&L({showError:!0,membersWithoutPublicKey:s})})).catch(i),(0,m.Nc)(l.PageView.TacUserList))}),[B,z,M,e,t.state?.openResendPendingInvitationsDialog,t.state?.openSendInvitesDialog,_,i,y,a,x?.extraFree]),!b||S!==Ze.rq.Success)return null;const X=I_(e.state.members.valueOr([]));return(0,f.tZ)(zo,{header:(0,f.tZ)(o.X6,{as:"h1",color:"ds.text.neutral.standard",textStyle:"ds.title.section.large",children:a("team_members_page_title")}),children:(0,f.BX)("div",{sx:{display:"flex",flexDirection:"column",gap:"16px"},children:[kh||(kh=(0,f.tZ)(vh,{})),Ih||(Ih=(0,f.tZ)(ig,{})),(0,f.tZ)(Rg,{onReinviteAllClick:()=>{z("reinviteAll",Ag(e.state.members.valueOr([])))}}),(0,f.tZ)("div",{sx:{display:"flex",justifyContent:"center"},children:v?(0,f.tZ)(Ci.Z,{containerStyle:{minHeight:240}}):(0,f.tZ)(Sh,{lee:e,members:e.state.members.valueOr([]),onMembersActionSelect:z,onMembersInvite:B})}),R.showError?(0,f.tZ)(bg,{membersWithoutPublicKey:R.membersWithoutPublicKey,onClose:()=>L((e=>({...e,showError:!1})))}):null,D,(0,f.tZ)(du,{lee:e,teamId:(0,k.ev)(e.globalState),totalSeatCount:e.state.totalSeatCount.valueOr(0),numSeatsTaken:X,excludedInviteMembers:e.state.members.valueOr([]).filter((({status:e})=>"removed"!==e)).map((({login:e})=>e)),isFreeTrial:b.isFreeTrial,shouldShowInviteDialog:N,handleCloseInviteDialog:()=>w(!1),handleInvitePartialSuccess:U,handleInviteCompleteSuccess:P,invitePartialSuccessState:E,handleInvitationResultClosed:T})]})})};var wh=n(78128);const Oh={settingsPage:"settingsPage--k2Ztg5L3TZ",withoutHeader:"withoutHeader--K7wlLBUI31",settingsContainer:"settingsContainer--nyZHFHWont",settingsRow:"settingsRow--Mid_I3S6Qx",settingsLabelContainer:"settingsLabelContainer--rCMIUljV94",settingsGreyedLabel:"settingsGreyedLabel--L0ZP86y4UJ",textSettingRow:"textSettingRow--JwyTaO5qbq",selectSettingRow:"selectSettingRow--CRjY3loqBA",switchSettingRow:"switchSettingRow--THK1RoaDKQ",textFieldInputColumn:"textFieldInputColumn--G3ALnYhur_",helperLabelPanel:"helperLabelPanel--gGU7C6m_r2",infoBoxPanel:"infoBoxPanel--TMnBp9xS5d",textWithButtonSettingRow:"textWithButtonSettingRow--rWQRX8E5Np",versionContainer:"versionContainer--eWfpg9oE65",versionNumber:"versionNumber--uHC_eBvZbs",confirmationContent:"confirmationContent--C7lnmdM6Vl"};var Rh;const Lh=({children:e,sideContent:t,trailingContent:n,title:a,isLoading:i=!1})=>{const r=t?{display:"flex",flexDirection:"column",gap:"24px",maxWidth:"800px"}:{backgroundColor:"ds.container.agnostic.neutral.supershy",padding:"32px",borderRadius:"8px"};return i?Rh||(Rh=(0,f.tZ)(tc.a,{scopedToPage:!0})):(0,f.tZ)("div",{className:M()(Oh.settingsPage,{[Oh.withoutHeader]:!a}),children:(0,f.BX)("div",{className:Oh.settingsContainer,children:[a?(0,f.tZ)(o.X6,{as:"h1",textStyle:"ds.title.section.large",color:"ds.text.neutral.catchy",sx:{marginBottom:"32px"},children:a}):null,(0,f.BX)("div",{sx:{display:"flex",gap:"24px"},children:[(0,f.BX)("div",{sx:r,children:[e,(0,f.tZ)("div",{children:n})]}),t]})]})})};var Mh=n(23104),Bh=n(99203);const Ph=({data:e,targetUri:t,...n})=>{const a=(0,r.useRef)(null);return(0,f.BX)("form",{action:t,method:"post",ref:a,target:"_blank",rel:"noopener",children:[(()=>{const t=[];return Object.keys(e).forEach((n=>t.push((0,f.tZ)("input",{defaultValue:e[n],type:"hidden",name:n},String(65535*Math.random()).replace(/\./,""))))),(0,f.tZ)("div",{children:t})})(),(0,f.tZ)(Lg.Z,{onClick:()=>a.current?.submit(),...n})]})},Uh={uploadCsvLabel:"uploadCsvLabel--sX4DnYKGlL",fileContainer:"fileContainer--M2SFpr0Pvl",file:"file--dJtQQDGzSk",fileIcon:"fileIcon--MKumqlXPl7",fileTitle:"fileTitle--d2cupH4GiA",fileTitleHeader:"fileTitleHeader--jqYDFR_MsK",fileTitleHint:"fileTitleHint--g2OBjT1L4G",fileTitleHintError:"fileTitleHintError--F4iw3QsNVb",fileTitleHintSuccess:"fileTitleHintSuccess--JPyWdw7GS8",fileProgressBackground:"fileProgressBackground--NEs2tyO8Pe",fileProgress:"fileProgress--cr0wc0wF3w",fileProgressAnimation:"fileProgressAnimation--aFpkqnmOMV",fileProgressComplete:"fileProgressComplete--y2f1JLicyr",fileButtons:"fileButtons--ofyh4FIc7u",fileError:"fileError--RHrDBIVtVA",fileErrorTitle:"fileErrorTitle--Jx5QASYwkS",fileErrorTitleIcon:"fileErrorTitleIcon--b8GGJ4i0UT",fileErrorContent:"fileErrorContent--G67_aw40u7"},zh="team_settings_duo_header_general",Xh=e=>{const{translate:t}=(0,g.Z)(),{reportTACError:n}=Y(),a=(0,r.useRef)(null),[i,s]=(0,r.useState)(!1),[o,l]=(0,r.useState)(!1),[_,u]=(0,r.useState)(!1),[m,p]=(0,r.useState)(!1),[h,y]=(0,r.useState)(!1),[b,x]=(0,r.useState)(!1),[S,v]=(0,r.useState)(!1),[C,E]=(0,r.useState)(null),[Z,T]=(0,r.useState)(!1),[D,k]=(0,r.useState)(null),I=(()=>{const e=(0,c.k)(d.o,"getTeamDuoInfo");return{status:e.status,data:e.data,error:e.error}})(),A=e.lee.apiMiddleware.teamPlans?e.lee.apiMiddleware.teamPlans:(n(new Error("teamPlans service not set in apiMiddleware")),null),N=e.lee.apiMiddleware.strongAuth?e.lee.apiMiddleware.strongAuth:(n(new Error("strongAuth service not set in apiMiddleware")),null);return(0,r.useEffect)((()=>{(()=>{if(I.status===Ze.rq.Success&&I.data){const{duo:t,duoIntegrationKey:n,duoSecretKey:a,duoApiHostname:i}=I.data;e.lee.dispatch(wh.k0({duo:t,duoIntegrationKey:n,duoSecretKey:a,duoApiHostname:i}))}else I.status===Ze.rq.Error&&console.error(`DuoSettings: fetchData failed with error: ${I.error}`)})()}),[I.data,I.error,I.status]),(0,f.BX)(Lh,{title:t(zh),children:[(0,f.tZ)("p",{className:Oh.settingsHeader,children:t(zh)}),(0,f.tZ)(zd,{label:t("team_settings_duo_enable_label"),labelHelper:t("team_settings_duo_enable_helper"),children:(0,f.tZ)(Mh.Z,{genericErrorMessage:t("_common_generic_error"),isDisabled:I.status===Ze.rq.Loading||i,saveValueFunction:()=>{const t=!e.lee.state.hasDuo;return s(!0),e.lee.dispatch(wh.FC(t)),A?.setSettings({duo:t}).then((()=>s(!1))).catch((()=>{}))},value:e.lee.state.hasDuo})}),(0,f.tZ)("p",{className:Oh.settingsHeader,children:t("team_settings_duo_header_setup")}),(0,f.BX)(zd,{label:t("team_settings_duo_integration_key_label"),labelHelper:t("team_settings_duo_integration_key_helper"),children:[(0,f.tZ)(Mg.n,{containerStyle:{width:"300px"},inputStyle:{minHeight:42},defaultValue:e.lee.state.duoIntegrationKey,isDisabled:o,onBlur:t=>{if(o)return;const n=t.target.value;e.lee.dispatch(wh.a2(n)),l(!0),u(!1),A&&A.setSettings({duoIntegrationKey:n}).then((()=>{l(!1)})).catch((()=>{}))},onFocus:()=>u(!0),placeholder:t("team_settings_duo_integration_key_hint")}),_||o?(0,f.tZ)("div",{children:(0,f.tZ)(Lg.Z,{label:t("team_settings_duo_integration_key_button"),loading:o})}):null]}),(0,f.BX)(zd,{label:t("team_settings_duo_secret_key_label"),labelHelper:t("team_settings_duo_secret_key_helper"),children:[(0,f.tZ)(Mg.n,{containerStyle:{width:"300px"},inputStyle:{minHeight:42},defaultValue:e.lee.state.duoSecretKey,isDisabled:m,onBlur:(t=>{if(m)return;const n=t.target.value;e.lee.dispatch(wh.E4(n)),p(!0),y(!1),A&&A.setSettings({duoSecretKey:n}).then((()=>{p(!1)})).catch((()=>{}))}).bind(void 0),onFocus:()=>y(!0),placeholder:t("team_settings_duo_secret_key_hint")}),h||m?(0,f.tZ)("div",{children:(0,f.tZ)(Lg.Z,{label:t("team_settings_duo_secret_key_button"),loading:m})}):null]}),(0,f.BX)(zd,{label:t("team_settings_duo_api_host_label"),labelHelper:t("team_settings_duo_api_host_helper"),children:[(0,f.tZ)(Mg.n,{containerStyle:{width:"300px"},inputStyle:{minHeight:42},defaultValue:e.lee.state.duoApiHostname,isDisabled:b,onBlur:(t=>{if(b)return;const n=t.target.value;e.lee.dispatch(wh.qf(n)),x(!0),v(!1),A&&A.setSettings({duoApiHostname:n}).then((()=>{x(!1)})).catch((()=>{}))}).bind(void 0),onFocus:()=>v(!0),placeholder:t("team_settings_duo_api_host_hint")}),S||b?(0,f.tZ)("div",{children:(0,f.tZ)(Lg.Z,{label:t("team_settings_duo_api_host_button"),loading:b})}):null]}),(0,f.tZ)("p",{className:Oh.settingsHeader,children:t("team_settings_duo_header_directory")}),(0,f.tZ)(zd,{label:t("team_settings_duo_upload_csv_label"),labelHelper:(0,f.BX)("ol",{className:Uh.uploadCsvLabel,children:[(0,f.tZ)("li",{children:t("team_settings_duo_upload_csv_helper_step_one")}),(0,f.tZ)("li",{children:t("team_settings_duo_upload_csv_helper_step_two")}),(0,f.tZ)("li",{children:t("team_settings_duo_upload_csv_helper_step_three")})]}),children:(0,f.BX)("div",{className:Uh.fileContainer,children:[(0,f.BX)("div",{className:Uh.file,children:[(0,f.tZ)("span",{className:Uh.fileIcon}),(0,f.tZ)("div",{className:Uh.fileTitle,children:D?[(0,f.tZ)("div",{className:Uh.fileTitleHeader,children:D},"header"),(0,f.tZ)("div",{className:Uh.fileProgressBackground,children:(0,f.tZ)("div",{className:Z?Uh.fileProgressComplete:Uh.fileProgress})},"progress"),(0,f.tZ)("p",{className:[Uh.fileTitleHint,Z&&C?Uh.fileTitleHintError:Uh.fileTitleHintSuccess].join(" "),children:t(Z?C?"team_settings_duo_upload_csv_feedback_error":"team_settings_duo_upload_csv_feedback_success":"team_settings_duo_upload_csv_feedback_progress")},"hint")]:[(0,f.tZ)("div",{className:Uh.fileTitleHeader,children:"duo_usernames.csv"},"header")]})]}),(0,f.BX)("div",{className:Uh.fileButtons,children:[(0,f.tZ)("input",{type:"file",id:"file",accept:"text/csv, text/plain, .csv",ref:a,style:{display:"none"},onChange:(()=>{var e;D&&k(null);const t=null!=(e=a.current?.files?.[0])?e:{name:""};k(t.name),N&&N.uploadDuoCsv(t).then((()=>{T(!0),setTimeout((()=>k(null)),2e3)})).catch((e=>{E(e.code.toLowerCase()),T(!0)}))}).bind(void 0)}),(0,f.tZ)(Bh.Z,{label:t("team_settings_duo_upload_csv_button_upload"),onClick:(()=>{a.current?.click()}).bind(void 0)}),(0,f.tZ)(Ph,{data:{login:e.lee.globalState.user.session.login,uki:e.lee.globalState.user.session.uki},label:t("team_settings_duo_upload_csv_button_download"),style:{marginLeft:"16px"},targetUri:"https://ws1.dashlane.com/3/strongauth/exportDuoUsernames"})]}),C?(0,f.BX)("div",{className:Uh.fileError,children:[(0,f.BX)("div",{className:Uh.fileErrorTitle,children:[(0,f.tZ)("span",{className:Uh.fileErrorTitleIcon,children:"!"}),t("team_settings_duo_upload_csv_error_title")]}),(0,f.tZ)("p",{className:Uh.fileErrorContent,children:t(`team_settings_duo_upload_csv_error_${C}`)})]}):null]})})]})};var qh=n(57457);const jh=()=>(0,c.k)(d.o,"getTeamPolicies");var Gh=n(74466);const Fh=({content:e,header:t,index:n})=>(0,f.BX)(o.kC,{gap:"8px",sx:{flexFlow:"row",flexBasis:"25%"},children:[(0,f.tZ)(o.kC,{justifyContent:"center",alignItems:"center",sx:{width:36,height:36,borderRadius:36,flexShrink:0,backgroundColor:"ds.container.expressive.brand.quiet.idle",color:"ds.text.brand.standard"},children:n}),(0,f.BX)("section",{children:[(0,f.tZ)(o.X6,{as:"h4",textStyle:"ds.title.block.medium",sx:{marginBottom:"8px"},children:t}),(0,f.tZ)(o.nv,{textStyle:"ds.body.reduced.regular",color:"ds.text.neutral.quiet",children:e})]})]}),Vh=()=>{const{translate:e}=(0,g.Z)();return(0,f.BX)("div",{sx:{display:"flex",flexDirection:"row",marginBottom:40,gap:"24px"},children:[(0,f.tZ)(Fh,{index:1,header:e("team_settings_master_password_policies_settings_stepper_step_request_title"),content:e("team_settings_master_password_policies_settings_stepper_step_request_subtitle")}),(0,f.tZ)(Fh,{index:2,header:e("team_settings_master_password_policies_settings_stepper_step_approval_title"),content:e("team_settings_master_password_policies_settings_stepper_step_approval_subtitle")}),(0,f.tZ)(Fh,{index:3,header:e("team_settings_master_password_policies_settings_stepper_step_recover_title"),content:e("team_settings_master_password_policies_settings_stepper_step_recover_subtitle")}),(0,f.tZ)(Fh,{index:4,header:e("team_settings_master_password_policies_settings_stepper_step_login_title"),content:e("team_settings_master_password_policies_settings_stepper_step_login_subtitle")})]})};var Hh;const Wh=e=>{const[t,n]=(0,r.useState)(!1),[i,s]=(0,r.useState)(!1),[c,d]=(0,r.useState)(!1),[_,u]=(0,r.useState)(!1),[p,h]=(0,r.useState)(""),[y,b]=(0,r.useState)(!1),{translate:x}=(0,g.Z)(),{reportTACError:S}=Y(),v=(0,Sg.U)(),{status:C,data:E}=jh(),{showToast:Z}=(0,o.pm)();if((0,r.useEffect)((()=>{null!==v&&((0,m.Nc)(l.PageView.TacSettingsAccountRecovery),(async()=>{if(n(!0),(0,ts.v0)(e.lee.globalState))try{const t=E?.recoveryEnabled;e.lee.dispatch(Gh.x({recoveryEnabled:t}));const n=await(async()=>{const t=(0,ts.v0)(e.lee.globalState);if(t&&t.teamId){const e=await(0,Se.mP)({teamId:t.teamId});return Boolean(e.length)}return S(new Error(es.N)),!1})();u(n)}catch(e){console.error(e)}finally{n(!1)}else S(new Error(es.N))})())}),[v,E]),C!==Ze.rq.Success||!E)return null;const T=async t=>{n(!0);const a=(0,k.ev)(e.lee.globalState);if(a)try{await(0,Se.jy)({teamId:a,settings:{recoveryEnabled:t}}),e.lee.dispatch(Gh.Zn(t)),Z({id:"toggleRecovery",description:x(t?"team_settings_master_password_policies_dialog_alert_label_available":"team_settings_master_password_policies_dialog_alert_label_unavailable"),action:{label:x("common_alert_undo_action"),onClick:()=>{T(!t)}}}),n(!1)}catch(e){n(!1)}else S(new Error(es.N))},D=async()=>{d((e=>!e))},I=async()=>{s(!0);const t=await(0,Se.RR)({masterPassword:p});s(!1),t?(await Promise.all([D(),T(!e.lee.state.recoveryEnabled)]),h(""),b(!1)):b(!0)},A=_&&e.lee.state.recoveryEnabled;return(0,f.BX)(Lh,{title:x("team_settings_menu_title_account_recovery"),children:[(0,f.BX)("div",{children:[(0,f.BX)("div",{sx:{position:"relative"},children:[(0,f.tZ)(o.X6,{textStyle:"ds.title.section.medium",as:"h3",sx:{marginBottom:"8px"},children:x("team_settings_master_password_policies_settings_recover_label")}),(0,f.tZ)(o.nv,{textStyle:"ds.body.standard.regular",sx:{marginBottom:"40px",paddingRight:"80px"},children:x("team_settings_master_password_policies_settings_recover_label_helper")}),(0,f.tZ)(o.ZD,{sx:{position:"absolute",top:0,right:0},disabled:t||A,readOnly:!!v,tooltip:v?x("team_settings_master_password_policies_settings_recovery_blocked_discontinued"):void 0,checked:e.lee.state.recoveryEnabled,onChange:D})]}),(0,f.tZ)(o.X6,{textStyle:"ds.title.section.medium",as:"h3",sx:{marginBottom:"24px"},children:x("team_settings_master_password_policies_settings_how_it_works_label")}),Hh||(Hh=(0,f.tZ)(Vh,{})),(0,f.tZ)(o.nv,{textStyle:"ds.body.standard.regular",color:"ds.text.neutral.quiet",sx:{marginBottom:"4px"},children:x("team_settings_master_password_policies_settings_how_it_works_label_helper")}),(0,f.tZ)(o.Qj,{isExternal:!0,href:a.WW,children:x("team_settings_master_password_policies_settings_how_it_works_label_helper_link_text")})]}),(0,f.tZ)(qh.Z,{isOpen:c,title:e.lee.state.recoveryEnabled?x("team_settings_master_password_policies_dialog_title_disable"):x("team_settings_master_password_policies_dialog_title_enable"),labelDismiss:x("team_settings_master_password_policies_dialog_cta_cancel_label"),labelConfirm:e.lee.state.recoveryEnabled?x("team_settings_master_password_policies_dialog_cta_confirm_label_disable"):x("team_settings_master_password_policies_dialog_cta_confirm_label_enable"),onDismiss:()=>{h(""),b(!1),d(!1)},onConfirm:()=>I(),ctaIsDisabled:i||!p,onChange:e=>{h(e.target.value),b(!1)},isMasterPasswordInvalid:y,onKeyDown:e=>{(async e=>{13===e.keyCode&&p&&await I()})(e)},children:e.lee.state.recoveryEnabled?(0,f.BX)("div",{children:[(0,f.tZ)(o.nv,{children:x.markup("team_settings_master_password_policies_confirmation_dialog_disable_label_markup")}),(0,f.tZ)(o.nv,{children:x("team_settings_master_password_policies_confirmation_dialog_disable_sublabel")})]}):(0,f.BX)("div",{children:[(0,f.tZ)(o.nv,{children:x.markup("team_settings_master_password_policies_confirmation_dialog_enable_label_markup",{},{linkTarget:"_blank"})}),(0,f.tZ)(o.nv,{children:x("team_settings_master_password_policies_confirmation_dialog_enable_sublabel")})]})})]})},$h=({children:e})=>(0,f.tZ)("div",{sx:{display:"flex",flexDirection:"column",alignItems:"flex-start",gap:"32px",border:"1px solid ds.border.neutral.quiet.idle",borderRadius:"8px",padding:"32px",backgroundColor:"ds.background.default"},children:e}),Yh=({header:e})=>(0,f.tZ)(o.X6,{as:"h2",textStyle:"ds.title.section.medium",color:"ds.text.neutral.standard",children:e.label},e.label),Kh=({onClick:e,content:t})=>(0,f.tZ)(o.zx,{mood:"brand",intensity:"quiet",onClick:e,sx:{maxWidth:"fit-content"},children:t}),Qh="team_settings_saving_label",Jh="team_settings_save_success_label",ey={SETTINGS_LABEL_MARGIN_TOP:{marginTop:"13px"},HELPER_LABEL_PANEL:{color:"ds.text.neutral.standard",marginTop:"13px",marginBottom:"8px",paddingRight:"70px",fontSize:"12px",fontWeight:"400"}};var ty=n(24107);const ny=({field:e,editSettings:t,checkForAuthenticationError:n})=>{const{translate:a}=(0,g.Z)(),{reportTACError:i}=Y(),s=!!e.multiLine,o=e.deserializer?e.deserializer(e.value):e.value,l=(0,r.useCallback)((async a=>{var r;if(!t)return;if(e.validator){const t=e.serializer?e.serializer(a):a,n=e.validator(t);if(n)throw new Error(e.getErrorMessageForKey?.(n))}if(n?.())return;const s={};if(["disableAutoLoginDomains","teamDomain"].includes(null!=(r=e.feature)?r:"")){const t=e.value;if(t.length){const n=e.serializer?.(a),i=t.filter((e=>!n.some((t=>t===e)))),r=n.filter((e=>!t.some((t=>t===e))));e.feature&&(s[e.feature]={removed:i,added:r.map((e=>e.toLowerCase()))})}else e.serializer&&e.feature&&(s[e.feature]={added:e.serializer(a)})}else e.feature&&(s[e.feature]=e.serializer?e.serializer(a):a);if(e.constraintsFromOtherFields&&e.constraintsFromOtherFields.requiredFor?.forEach((e=>e.reset?.(s))),Object.keys(s).length)try{await t(s)}catch(t){i(t,e.getErrorMessageForKey?.(t.message))}}),[n,t,e,i]);return(0,f.tZ)(ty.X,{multiLine:s,defaultValue:o,ariaLabelledBy:e.feature,saveBtnLabel:a("team_settings_button_save_label"),savingBtnLabel:a(Qh),editBtnLabel:a("team_settings_button_edit_label"),placeholder:e.hintText,inputStyle:e.inputStyle,hintStyle:e.hintStyle,successMessage:a(Jh),onSave:l,textFieldClassName:Oh.textFieldInputColumn,isDisabled:e.isReadOnly},e.label)};var ay,iy;const ry=({label:e,value:t,isReadOnly:n,options:a,saveValueFunction:i,successMessage:s,savingMessage:l})=>{const[c,d]=(0,r.useState)(""),[_,u]=(0,r.useState)(!1),[m,p]=(0,r.useState)(!1),g=_?l:c||"";return(0,f.BX)("div",{sx:{position:"relative",display:"flex",gap:"8px"},children:[(0,f.tZ)("div",{sx:{width:"100%"},children:(0,f.tZ)(o.mg,{label:e,value:""===t?"disabled":t,disabled:null!=n?n:_,readOnly:n,onChange:e=>{u(!0),i(e).then((()=>{u(!1),p(!0),d(""),setTimeout((()=>{p(!1)}),1e3)})).catch((e=>{u(!1),p(!1);const t=(0,zi.i)(e);d(t)}))},labelPersists:!1,feedback:{text:m?s:g},error:!!c,children:a.map((e=>(0,f.tZ)(o.$m,{value:e.value,disabled:!!e.disabled,children:e.label},e.label)))})}),_||m?(0,f.tZ)("div",{sx:{display:"flex",height:"48px",alignItems:"center"},children:_?ay||(ay=(0,f.tZ)(o.ZX,{mood:"positive",size:24})):iy||(iy=(0,f.tZ)(o.JO,{name:"FeedbackSuccessOutlined",color:"ds.text.positive.quiet",size:"large"}))}):null]})},sy=({field:e,checkForAuthenticationError:t,editSettings:n})=>{const{translate:a}=(0,g.Z)(),{reportTACError:i}=Y(),s=(0,r.useCallback)((async a=>{if(!n||t?.()||!e.feature)return;const r={},s=e.serializer?e.serializer(a):a,o="disabled"===a?"":"unset"===a?null:s;r[e.feature]=o;try{await n(r)}catch(t){const n=t.data?.content||{},a=e.getErrorMessageForKey?.(n.error);i(t,a)}}),[t,n,e,i]);return(0,f.tZ)(ry,{label:e.label,value:e.value,saveValueFunction:s,successMessage:a(Jh),savingMessage:a(Qh),options:e.options,isReadOnly:e.isReadOnly},e.label)},oy=({field:e,editSettings:t,checkForAuthenticationError:n,policies:a})=>{var i;const{translate:s}=(0,g.Z)(),{reportTACError:l}=Y(),[c,d]=(0,r.useState)(!1),[_,u]=(0,r.useState)(""),[m,p]=(0,r.useState)(!1),h=null!=(i=e.value)&&i?e.confirmDisable:e.confirmEnable,y=e.value?e.confirmDisable:e.confirmEnable,b=(0,r.useCallback)((async()=>{if(!t||n?.())return;const a={};if(e.feature){const t=void 0!==e.value&&!e.value;a[e.feature]=e.serializer?e.serializer(t):t,t||e.constraintsFromOtherFields?.requiredFor?.forEach((e=>e.reset?.(a)))}try{await t(a)}catch(t){const n=t.data?.content||429===t.code&&{error:"too_many_requests"}||"not_authorized"===t.message&&{error:"not_authorized"}||{},a=e.getErrorMessageForKey?.(n.error);l(t,a)}}),[n,t,e,l]),x=(0,r.useCallback)((()=>{d(!1),u(""),p(!1)}),[]),S=(0,r.useCallback)((()=>(d(!0),u(""),p(!1),Promise.resolve())),[]),v=(0,r.useCallback)((async()=>{const e=await(0,Se.RR)({masterPassword:null!=_?_:""});return p(!e),e?(x(),b()):Promise.resolve()}),[b,x,_]),C=(0,r.useCallback)((e=>{u(e.target.value),p(!1)}),[]),E=(0,r.useCallback)((e=>{"Enter"===e.key&&_&&v()}),[v,_]),Z=(0,r.useCallback)((async()=>{e.customSwitchHandler?await e.customSwitchHandler():h?await S():await b()}),[h,e,b,S]);return(0,f.BX)(f.HY,{children:[(0,f.tZ)(Mh.Z,{isLoading:e.isLoading,genericErrorMessage:s("_common_generic_error"),ariaLabelledBy:e.feature,value:e.value,isReadOnly:e.isReadOnly,isDisabled:e.constraintsFromOtherFields?.disabledWhen?.some((e=>a&&e?.condition?.(a))),disabledFeedbackMessage:e.constraintsFromOtherFields?.disabledWhen?.find((e=>a&&e?.condition?.(a)&&e?.warningMessage))?.warningMessage,saveValueFunction:Z,successMessage:s("team_settings_save_success_label"),savingMessage:s("team_settings_saving_label")},e.label),c&&y?(0,f.BX)(qh.Z,{isOpen:!0,title:y.title,labelDismiss:y.dismiss,labelConfirm:y.confirm,onDismiss:x,onConfirm:v,onChange:C,isMasterPasswordInvalid:m,ctaIsDisabled:!_,onKeyDown:E,children:[(0,f.tZ)(o.nv,{color:"ds.text.neutral.quiet",children:y.helper1}),(0,f.tZ)(o.nv,{color:"ds.text.neutral.quiet",children:y.helper2}),(0,f.tZ)(o.nv,{color:"ds.text.neutral.quiet",children:y.label})]}):null]})},ly=e=>{const{field:t,...n}=e;switch(t.type){case"text":return(0,f.tZ)(ny,{field:t,...n});case"select":return(0,f.tZ)(sy,{field:t,...n});case"switch":return(0,f.tZ)(oy,{...e});case"cta":return(0,f.tZ)(Kh,{onClick:t.ctaAction,content:t.ctaLabel});default:return null}},cy=e=>{var t;const{field:n}=e;return(0,f.tZ)("div",{sx:{width:"100%"},children:(0,f.BX)("div",{sx:{display:"flex",gap:"40px",justifyContent:"space-between"},children:[(0,f.BX)("div",{sx:{display:"flex",flexDirection:"column",gap:"8px"},children:[(0,f.tZ)(o.X6,{as:"h3",textStyle:"ds.title.block.medium",color:"ds.text.neutral.catchy",sx:"select"===n.type||"text"===n.type?ey.SETTINGS_LABEL_MARGIN_TOP:{},id:n.feature,children:n.label.split("//").map(((e,t)=>t%2?(0,f.tZ)("span",{sx:{color:"ds.text.oddity.disabled",fontWeight:"300"},children:e},e):e))}),n.badgeLabel?(0,f.tZ)(o.Ct,{label:n.badgeLabel,mood:"brand",iconName:n.badgeIconName,layout:"iconLeading"}):null,n.helperLabel?(0,f.tZ)(o.nv,{id:"helper-label-panel",textStyle:"ds.body.standard.regular",color:"ds.text.neutral.quiet",children:n.helperLabel}):null,n.infoBox?(0,f.tZ)(o.ke,{size:"large",title:n.infoBox.title,description:n.infoBox.description,mood:null!=(t=n.infoBox.mood)?t:"neutral"}):null,("text"===n.type||"select"===n.type||"cta"===n.type)&&(0,f.tZ)("div",{children:(0,f.tZ)(ly,{...e})})]}),"switch"===n.type&&(0,f.tZ)("div",{children:(0,f.tZ)(ly,{...e})})]})},n.feature)},dy="_common_generic_error",_y=({teamName:e,isTeamDiscontinuedAfterTrial:t})=>{const{translate:n}=(0,g.Z)(),a=au(),i=!0===(0,Ee.o)(A_.G.WebOnboardingInviteLinkTacMigration),{inviteLinkDataForAdmin:s,getInviteLinkDataForAdmin:l,inviteLinkDataLoading:c,createInviteLink:d,toggleInviteLink:_}=K_();(0,r.useEffect)((()=>{i||l()}),[l,i]);const u=i?a.status===Ze.rq.Success?a:null:s,m=i?a.status===Ze.rq.Success?a.enabled:null:!s?.disabled,p=(0,ae.cI)(u?.teamKey),h={type:"switch",isLoading:i?a.status===Ze.rq.Loading:c,label:n("team_settings_enable_invite_link_label"),isReadOnly:t,feature:"inviteLink",value:!0===m,customSwitchHandler:i?async()=>{a.status===Ze.rq.Success&&await a.sendToggleInviteLink(!m).catch((()=>{throw Error(n(dy))}))}:async()=>{const t=u?.teamKey;if(t){if(!await _(null==m||m))throw Error(n(dy))}else if(!await d(e))throw Error(n(dy));if(!await l())throw Error(n(dy))},helperLabel:(0,f.BX)(f.HY,{children:[n("team_settings_disable_enable_invite_link_helper"),!0===m?(0,f.BX)("span",{sx:{marginTop:"12px",display:"flex",flexDirection:"row",flexWrap:"nowrap",alignItems:"center",gap:"8px"},children:[(0,f.tZ)(eu.q,{mood:"neutral",intensity:"supershy",iconProps:{color:"ds.text.neutral.standard"},copyValue:p,"data-testid":"invite-link-copy-button"}),(0,f.tZ)(o.nv,{as:"span",textStyle:"ds.body.reduced.link",children:p})]}):null]})};return(0,f.tZ)(cy,{field:h})},uy=()=>{const{translate:e}=(0,g.Z)(),t=ur(),n=(0,Sg.U)(),a={type:"header",label:e("team_settings_header_user_access")};return t&&null!==n?(0,f.BX)($h,{children:[(0,f.tZ)(Yh,{header:a}),(0,f.tZ)(_y,{teamName:t,isTeamDiscontinuedAfterTrial:n})]}):null},my=({settingRow:e,editSettings:t,checkForAuthenticationError:n})=>{const{reportTACError:a}=Y();return(0,f.tZ)(o.ke,{sx:{margin:"16px 0"},title:e.label,description:e.description,icon:e.icon,size:"large",mood:e.mood,actions:[e.actions?.secondary?(0,f.tZ)(o.zx,{mood:e.mood,intensity:"quiet",icon:"ActionOpenExternalLinkOutlined",layout:"iconLeading",onClick:e.actions?.secondary.onClick,children:e.actions?.secondary.label},e.actions?.secondary.label):null,e.actions?.primary?(0,f.tZ)(o.zx,{mood:e.mood,intensity:"catchy",onClick:async()=>{if(t&&e.featuresToDisable&&!n?.())try{await t(e.featuresToDisable)}catch(e){a(e)}},children:e.actions?.primary.label},e.actions?.primary.label):null]})},py=({textWithButton:e})=>(0,f.BX)("div",{sx:{display:"flex",alignItems:"flex-start",flexDirection:"row",marginBottom:"32px",marginTop:"7px"},children:[(0,f.BX)("div",{children:[(0,f.tZ)(o.X6,{as:"h3",textStyle:"ds.title.block.medium",color:"ds.text.neutral.catchy",sx:ey.SETTINGS_LABEL_MARGIN_TOP,children:e.label.split("//").map(((e,t)=>t%2?(0,f.tZ)("span",{sx:{color:"ds.text.oddity.disabled",fontWeight:"300"},children:e},e):e))}),e.helperLabel?(0,f.tZ)("div",{id:"helper-label-panel",sx:ey.HELPER_LABEL_PANEL,children:e.helperLabel}):null]}),(0,f.tZ)("div",{children:(0,f.tZ)(Bh.Z,{label:e.buttonLabel,onClick:e?.onClick})})]},e.label),gy=({settingRow:e,...t})=>{switch(e.type){case"header":return(0,f.tZ)(Yh,{header:e});case"textwithbutton":return(0,f.tZ)(py,{textWithButton:e});case"quickDisable":return(0,f.tZ)(my,{settingRow:e});default:return(0,f.tZ)(cy,{field:e,...t})}},hy=e=>{const{translate:t}=(0,g.Z)(),{isDiscontinuedAfterTrialAndSmartManagementIsDisabled:n,policies:a}=e;if(!a)return null;const i={type:"text",multiLine:!0,isReadOnly:n,label:t("team_settings_team_domain"),helperLabel:t("team_settings_team_domain_helper"),hintText:t("team_settings_team_domain_placeholder"),feature:"teamDomain",value:a.teamDomain,serializer:e=>e?e.split(";").map((e=>e.trim().toLowerCase())).filter((e=>Boolean(e.length))):[],deserializer:e=>e?.length?e.join(";"):"",validator:e=>e.some((e=>!Od().isFQDN(e)))?"wrong_url":e.some((e=>e.length>255))?"wrong_size":null,getErrorMessageForKey:e=>{switch(e){case"wrong_size":return t("team_settings_team_domain_save_error_msg_wrong_size",{lengthLimit:255});case"wrong_url":return t("team_settings_team_domain_save_error_msg_wrong_url");case"too_many_requests":return t("team_settings_too_many_requests");default:return t("team_settings_team_domain_save_error_msg_generic_error")}},constraintsFromOtherFields:{requiredFor:[{feature:"enableForcedDomains",reset:e=>{a.teamDomain.length||(e.enableForcedDomains=!1)}},{feature:"enableRemoveForcedContent",reset:e=>{a.teamDomain.length||(e.enableRemoveForcedContent=!1)}}]}};return(0,f.tZ)(gy,{settingRow:i,...e})},yy=()=>{const{translate:e}=(0,g.Z)(),t={type:"quickDisable",label:e("team_settings_space_management_click_to_disable_infobox_title"),description:e("team_settings_space_management_click_to_disable_infobox_subtitle"),mood:"brand",featuresToDisable:{enableForcedDomains:!1,enableRemoveForcedContent:!1},actions:{primary:{label:e("team_settings_space_management_infobox_disable_button")},secondary:{label:e("team_settings_space_management_infobox_learn_more_button"),onClick:()=>(0,X.Yo)(ae.Rf)}}};return(0,f.tZ)(gy,{settingRow:t})},by=()=>{const{translate:e}=(0,g.Z)(),t={type:"quickDisable",label:e("team_settings_space_management_disabled_infobox_title"),description:e("team_settings_space_management_disabled_infobox_subtitle"),icon:"FeedbackSuccessOutlined",mood:"positive",actions:{secondary:{label:e("team_settings_space_management_infobox_learn_more_button"),onClick:()=>(0,X.Yo)(ae.Rf)}}};return(0,f.tZ)(gy,{settingRow:t})},xy=e=>{const{translate:t}=(0,g.Z)(),{isDiscontinuedAfterTrialAndSmartManagementIsDisabled:n,policies:a}=e;if(!a)return null;const i={type:"switch",isReadOnly:n,label:t("team_settings_enable_space_restrictions"),helperLabel:t("team_settings_enable_space_restrictions_helper"),value:a.enableForcedDomains,feature:"enableForcedDomains",getErrorMessageForKey:e=>t("too_many_requests"===e?"team_settings_too_many_requests":"team_settings_enable_space_restrictions_save_error_msg_generic_error"),constraintsFromOtherFields:{disabledWhen:[{feature:"teamDomain",condition:e=>!e.teamDomain?.length,warningMessage:t("team_settings_enable_space_restrictions_define_team_domain_first")}],requiredFor:[{feature:"enableRemoveForcedContent",reset:e=>e.enableRemoveForcedContent=!1}]}};return(0,f.tZ)(gy,{settingRow:i,...e})},Sy=e=>{const{translate:t}=(0,g.Z)(),{isDiscontinuedAfterTrialAndSmartManagementIsDisabled:n,policies:a}=e;if(!a)return null;const i={type:"switch",label:t("team_settings_remove_forced_content"),isReadOnly:n,helperLabel:t("team_settings_remove_forced_content_helper"),value:a.enableRemoveForcedContent,feature:"enableRemoveForcedContent",getErrorMessageForKey:e=>t("too_many_requests"===e?"team_settings_too_many_requests":"team_settings_enable_space_restrictions_save_error_msg_generic_error"),constraintsFromOtherFields:{disabledWhen:[{feature:"teamDomain",condition:e=>!e.teamDomain?.length,warningMessage:t("team_settings_remove_forced_content_define_team_domain_first")},{feature:"enableForcedDomains",condition:e=>!e.enableForcedDomains,warningMessage:t("team_settings_remove_forced_content_enable_forced_domains_first")}]}};return(0,f.tZ)(gy,{settingRow:i,...e})};var fy,vy;const Cy=e=>{const{translate:t}=(0,g.Z)(),{showQuickDisableOfSmartSpaceManagement:n,policies:a}=e,i={type:"header",label:t("team_settings_header_team_space_options")},r=n&&!a?.enableForcedDomains&&!a?.enableRemoveForcedContent,s=n&&(a?.enableForcedDomains||a?.enableRemoveForcedContent);return(0,f.BX)($h,{children:[(0,f.tZ)(Yh,{header:i}),s&&(fy||(fy=(0,f.tZ)(yy,{}))),r&&(vy||(vy=(0,f.tZ)(by,{}))),(0,f.tZ)(hy,{isDiscontinuedAfterTrialAndSmartManagementIsDisabled:r,...e}),(0,f.tZ)(xy,{isDiscontinuedAfterTrialAndSmartManagementIsDisabled:r,...e}),(0,f.tZ)(Sy,{isDiscontinuedAfterTrialAndSmartManagementIsDisabled:r,...e})]})},Ey=e=>{const{translate:t}=(0,g.Z)(),{isTeamDiscontinuedAfterTrial:n,policies:a}=e;if(!a)return null;const i={type:"select",label:t("team_settings_force_crypto_payload_label"),isReadOnly:n,helperLabel:t("team_settings_force_crypto_payload_helper"),value:a.cryptoForcedPayload,feature:"cryptoForcedPayload",options:[{label:t("team_settings_force_crypto_payload_option_disabled"),value:"disabled"},{label:t("team_settings_force_crypto_payload_option_argon2"),value:"$1$argon2d$16$3$32768$2$aes256$cbchmac$16$"},{label:t("team_settings_force_crypto_payload_option_pbkdf2_advanced"),value:"$1$pbkdf2$16$200000$sha256$aes256$cbchmac$16$"},{label:t("team_settings_force_crypto_payload_option_pbkdf2_standard"),value:"KWC3",disabled:!0}],getErrorMessageForKey:e=>t("too_many_requests"===e?"team_settings_too_many_requests":"team_settings_force_crypto_payload_save_error_msg_generic_error")};return(0,f.tZ)(gy,{settingRow:i,...e})},Zy=e=>{const{translate:t}=(0,g.Z)(),{isTeamDiscontinuedAfterTrial:n,policies:a}=e;if(!a)return null;const i={type:"switch",isReadOnly:n,label:t("team_settings_enforce_2fa"),helperLabel:t("team_settings_enforce_2fa_helper"),infoBox:{title:t("team_settings_generate_recovery_codes_infobox_title"),description:t.markup("team_settings_generate_recovery_codes_infobox_description_markup")},value:a.enforce2FA,feature:"enforce2FA",confirmEnable:{title:t("team_settings_enforce_2fa_confirm_enable_title"),label:t("team_settings_enforce_2fa_confirm_enable_helper2"),dismiss:t("team_settings_enforce_2fa_confirm_enable_dismiss"),confirm:t("team_settings_enforce_2fa_confirm_enable_confirm")},getErrorMessageForKey:e=>t("too_many_requests"===e?"team_settings_too_many_requests":"team_settings_enforce_2fa_save_error_msg_generic_error")};return(0,f.tZ)(gy,{settingRow:i,...e})},Ty=e=>{const{translate:t}=(0,g.Z)(),{isPersonalSpaceEnabledViaTeamSetting:n,isTeamDiscontinuedAfterTrial:a,policies:i}=e;if(!i||n)return null;const r={type:"switch",label:t("team_settings_allow_export"),helperLabel:t("team_settings_allow_export_helper"),infoBox:a?{title:t("team_settings_allow_export_infobox_title"),description:t("team_settings_allow_export_infobox_subtitle"),mood:"brand"}:void 0,value:i.vaultExportEnabled,feature:"vaultExportEnabled",getErrorMessageForKey:e=>t("too_many_requests"===e?"team_settings_too_many_requests":"_common_generic_error")};return(0,f.tZ)(gy,{settingRow:r,...e})},Dy=e=>{const{translate:t}=(0,g.Z)(),n=pc(),{hasExcludedPolicy:a,hasTrialBusinessPaywall:i,isTeamDiscontinuedAfterTrial:r,policies:s}=e,o=a("forceAutomaticLogout");if(!s)return null;const l={type:"select",isReadOnly:r||o||n,label:t("team_settings_force_auto_logout_after"),helperLabel:t("team_settings_force_auto_logout_after_helper"),badgeIconName:o||i||n?"PremiumOutlined":void 0,badgeLabel:o||i||n?t("team_settings_available_in_business_plan"):void 0,value:s.forceAutomaticLogout,feature:"forceAutomaticLogout",options:["unset","15","30","60"].map((e=>({label:t("team_settings_force_auto_logout_after_"+e),value:e}))),getErrorMessageForKey:e=>t("too_many_requests"===e?"team_settings_too_many_requests":"team_settings_force_auto_logout_after_save_error_msg_generic_error")};return(0,f.tZ)(gy,{settingRow:l,...e})},ky=e=>{const{translate:t}=(0,g.Z)(),{hasExcludedPolicy:n,hasTrialBusinessPaywall:a,isTeamDiscontinuedAfterTrial:i,policies:r}=e,s=n("lockOnExit");if(!r)return null;const o={type:"switch",isReadOnly:i||s,label:t("team_settings_lock_on_exit"),helperLabel:t("team_settings_lock_on_exit_helper"),value:r.lockOnExit,feature:"lockOnExit",badgeIconName:s||a?"PremiumOutlined":void 0,badgeLabel:s||a?t("team_settings_available_in_business_plan"):void 0,getErrorMessageForKey:e=>t("too_many_requests"===e?"team_settings_too_many_requests":"team_settings_lock_on_exit_save_error_msg_generic_error")};return(0,f.tZ)(gy,{settingRow:o,...e})},Iy=e=>{const{translate:t}=(0,g.Z)(),n=pc(),{hasExcludedPolicy:a,hasTrialBusinessPaywall:i,isPersonalSpaceEnabledViaTeamSetting:r,isTeamDiscontinuedAfterTrial:s,policies:o}=e,l=a("collectSensitiveDataAuditLogsEnabled");if(!o)return null;const c={type:"switch",isReadOnly:s||l||n,label:t("team_settings_collect_sensitive_data_audit_logs_enabled"),helperLabel:t(r?"team_settings_collect_sensitive_data_audit_logs_enabled_helper":"team_settings_collect_sensitive_data_audit_logs_enabled_helper_without_space"),badgeIconName:l||i||n?"PremiumOutlined":void 0,badgeLabel:l||i||n?t("team_settings_available_in_business_plan"):void 0,value:o.collectSensitiveDataAuditLogsEnabled,feature:"collectSensitiveDataAuditLogsEnabled",getErrorMessageForKey:e=>t("too_many_requests"===e?"team_settings_too_many_requests":"team_settings_lock_on_exit_save_error_msg_generic_error")};return(0,f.tZ)(gy,{settingRow:c,...e})},Ay=e=>{const{translate:t}=(0,g.Z)(),n=pc(),{hasExcludedPolicy:a,hasTrialBusinessPaywall:r,policies:s,routes:o,showPaywallInfo:c}=e,d=a("secureWifiEnabled"),{shouldShowBuyOrUpgradePaywall:u,isTrialOrGracePeriod:p,accountSubscriptionCode:h,planType:y}=c,b=!d&&u&&p,x=!d&&u&&"starter"===y,S=`${ae.ub}?plan=${y===_.lD.Team?"team":"business"}&subCode=${h}&utm_source=button:buy_dashlane+click_origin:vpn_feature_activation_setting+origin_page:tac/settings/policies+origin_component:main_app`;let v,C,E;if(b?(v=t("team_settings_available_in_paid_subscription_badge"),C=()=>{(0,m.Kz)(new l.UserClickEvent({button:l.Button.BuyDashlane,clickOrigin:l.ClickOrigin.VpnFeatureActivationSetting})),(0,X.Yo)(S)},E=t("team_settings_buy_dashlane_cta")):x?(v=t("team_settings_upgrade_badge"),C=()=>{(0,m.Kz)(new l.UserClickEvent({button:l.Button.SeePlan,clickOrigin:l.ClickOrigin.VpnFeatureActivationSetting})),(0,i.uX)(`${o.teamAccountChangePlanRoutePath}`)},E=t("team_settings_see_plans_cta")):(d||r||n)&&(v=t("team_settings_available_in_business_plan")),!s)return null;const Z={type:x||b?"cta":"switch",badgeIconName:x||b||d||r||n?"PremiumOutlined":void 0,badgeLabel:v,ctaAction:C,ctaLabel:E,isReadOnly:d||n,label:t("team_settings_vpn"),helperLabel:t("team_settings_vpn_helper"),value:s.enableVPN,feature:"enableVPN",getErrorMessageForKey:e=>{switch(e){case"too_many_requests":return t("team_settings_too_many_requests");case"not_authorized":return t("team_settings_vpn_disabled_for_free_trial");default:return t("team_settings_vpn_save_error_msg_generic_error")}}};return(0,f.tZ)(gy,{settingRow:Z,...e})},Ny=e=>{const{translate:t}=(0,g.Z)(),{policies:n}=e;if(!n)return null;const a={type:"switch",label:t("team_settings_rich_icons"),helperLabel:t("team_settings_rich_icons_helper"),value:n.richIconsEnabled,feature:"richIconsEnabled",getErrorMessageForKey:e=>t("too_many_requests"===e?"team_settings_too_many_requests":"team_settings_server_error")};return(0,f.tZ)(gy,{settingRow:a,...e})},wy=e=>{const{translate:t}=(0,g.Z)(),n={type:"header",label:t("team_settings_header_security")};return(0,f.BX)($h,{children:[(0,f.tZ)(Yh,{header:n}),(0,f.tZ)(Ey,{...e}),(0,f.tZ)(Zy,{...e}),(0,f.tZ)(Ty,{...e}),(0,f.tZ)(Dy,{...e}),(0,f.tZ)(ky,{...e}),(0,f.tZ)(Iy,{...e}),(0,f.tZ)(Ay,{...e}),(0,f.tZ)(Ny,{...e})]})},Oy=({className:e})=>{const{translate:t}=(0,g.Z)(),n=(0,Ee.o)("monetization_extension_policies_revert_notice"),a=(0,F.u)(Rr.t),i=(0,c.k)(Rr.t,"HasSeenStarterRepackagePolicyInfobox");return!n||i.status!==Ze.rq.Success||i.data?null:(0,f.tZ)(o.ke,{title:t("team_settings_starter_repackage_policy_change_title"),description:t("team_settings_starter_repackage_policy_change_description"),size:"large",actions:[(0,f.tZ)(o.zx,{onClick:()=>{a.markStarterRepackagePolicyInfoboxSeen()},children:t("team_settings_starter_repackage_policy_change_cta")},"dismiss")],sx:{whiteSpace:"break-spaces"},className:e})},Ry=({className:e})=>{const{translate:t}=(0,g.Z)(),n=(0,G.U)(),a=`${ae.ub}?plan=business&subCode=${null!=n?n:""}`;return(0,f.tZ)(o.ke,{className:e,title:t("team_settings_in_trial_paywall_repackage_policies_title"),size:"large",actions:[(0,f.tZ)(o.zx,{onClick:()=>{(0,m.Kz)(new l.UserClickEvent({button:l.Button.UpgradeBusinessTier,clickOrigin:l.ClickOrigin.BannerTacSettingsPoliciesPaywall}))},as:"a",href:a,rel:"noreferrer",target:"_blank",children:t("team_settings_in_trial_paywall_repackage_policies_cta")},"cta")]})},Ly={CONTAINER:{display:"flex",flexDirection:"column",gap:"24px",padding:"24px",backgroundColor:"ds.container.agnostic.neutral.supershy",border:"1px solid ds.border.neutral.quiet.idle",borderRadius:"8px"},HEADER:{display:"flex",flexDirection:"column",gap:"8px"},FEATURES_LIST:{display:"grid",gap:"16px",gridTemplateColumns:"1fr"}},My=()=>{const{translate:e}=(0,g.Z)(),{routes:t}=(0,i.Xo)(),n=`${t.teamAccountChangePlanRoutePath}?plan=business`;return(0,f.BX)("div",{sx:Ly.CONTAINER,children:[(0,f.BX)("div",{sx:Ly.HEADER,children:[(0,f.tZ)(o.X6,{as:"h5",textStyle:"ds.title.section.medium",color:"ds.text.neutral.catchy",children:e("team_settings_starter_repackage_upgrade_tile_title")}),(0,f.tZ)(o.nv,{textStyle:"ds.body.reduced.regular",color:"ds.text.neutral.quiet",children:e("team_settings_starter_repackage_upgrade_tile_subtitle")})]}),(0,f.BX)("div",{sx:Ly.FEATURES_LIST,children:[(0,f.tZ)(bc,{iconName:"SettingsOutlined",children:e("team_settings_starter_repackage_upgrade_tile_feature_advanced_policies")}),(0,f.tZ)(bc,{iconName:"GroupOutlined",children:e("team_settings_starter_repackage_upgrade_tile_feature_unlimited_seats")}),(0,f.tZ)(bc,{iconName:"ToolsOutlined",children:e("team_settings_starter_repackage_upgrade_tile_feature_sso")}),(0,f.tZ)(bc,{iconName:"SharedOutlined",children:e("team_settings_starter_repackage_upgrade_tile_feature_scim")})]}),(0,f.tZ)(o.zx,{fullsize:!0,mood:"brand",intensity:"catchy",layout:"iconLeading",icon:"PremiumOutlined",onClick:()=>{(0,m.Kz)(new l.UserClickEvent({button:l.Button.UpgradeBusinessTier,clickOrigin:l.ClickOrigin.FeatureLimitationsBlock}))},as:i.rU,to:n,children:e("team_settings_starter_repackage_upgrade_tile_cta")})]})};var By,Py,Uy;const zy={CONTAINER:{display:"flex",flexDirection:"column",gap:"24px",marginBottom:"24px"}},Xy=()=>{const{hasStarterPaywall:e,hasTrialBusinessPaywall:t}=ke();return pc()?(0,f.tZ)("div",{sx:zy.CONTAINER,children:(0,f.tZ)(o.Zb,{sx:{padding:"16px",backgroundColor:"ds.container.agnostic.neutral.supershy",borderColor:"ds.border.neutral.quiet.idle"},children:By||(By=(0,f.tZ)(xc,{}))})}):e?(0,f.BX)("div",{sx:zy.CONTAINER,children:[Py||(Py=(0,f.tZ)(Oy,{})),Uy||(Uy=(0,f.tZ)(My,{}))]}):t?(0,f.tZ)(Ry,{sx:{alignContent:"start",height:"100%"}}):null},qy=e=>{const{translate:t}=(0,g.Z)(),n=pc(),{hasTrialBusinessPaywall:a,hasExcludedPolicy:i,isTeamDiscontinuedAfterTrial:r,policies:s}=e,o=i("sharingDisabled");if(!s)return null;const l={type:"switch",isReadOnly:r||o||n,label:t("team_settings_allow_sharing"),helperLabel:t("team_settings_allow_sharing_helper"),value:s.allowSharing,feature:"allowSharing",badgeIconName:o||a||n?"PremiumOutlined":void 0,badgeLabel:o||a||n?t("team_settings_available_in_business_plan"):void 0,getErrorMessageForKey:e=>t("too_many_requests"===e?"team_settings_too_many_requests":"team_settings_allow_sharing_save_error_msg_generic_error"),constraintsFromOtherFields:{requiredFor:[{feature:"restrictSharingToTeam",reset:e=>e.restrictSharingToTeam=!1}]}};return(0,f.tZ)(gy,{settingRow:l,...e})},jy=e=>{const{translate:t}=(0,g.Z)(),n=pc(),{isTeamDiscontinuedAfterTrial:a,policies:r,restrictSharingPaywallDetails:s,routes:o}=e;if(!r)return null;const{accountSubscriptionCode:c,shouldShowBuyPaywall:d,shouldShowUpgradePaywall:_}=s,u=`${ae.ub}?plan=business&subCode=${c}&utm_source=button:buy_dashlane+click_origin:restrict_sharing_to_team_activation_setting+origin_page:tac/settings/policies+origin_component:main_app`,p=()=>(0,m.Kz)(new l.UserClickEvent({button:l.Button.SeeB2bPlanTiers,clickOrigin:l.ClickOrigin.TacSettingsPolicies}));let h,y;d?(h=()=>{p(),(0,X.Yo)(u)},y=t("team_settings_buy_dashlane_cta")):_&&(h=()=>{p(),(0,i.uX)(`${o.teamAccountChangePlanRoutePath}`)},y=t("team_settings_see_plans_cta"));const b={type:n?"switch":d||_?"cta":"switch",badgeIconName:d||_||n?"PremiumOutlined":void 0,badgeLabel:d||_||n?t("team_settings_available_in_business_plan"):void 0,ctaAction:h,ctaLabel:y,isReadOnly:a||n,label:t("team_settings_restrict_sharing_to_team_title"),helperLabel:t("team_settings_restrict_sharing_to_team_description"),value:r.restrictSharingToTeam,feature:"restrictSharingToTeam",getErrorMessageForKey:e=>t("too_many_requests"===e?"team_settings_too_many_requests":"team_settings_restrict_sharing_to_team_generic_error"),constraintsFromOtherFields:{disabledWhen:[{feature:"allowSharing",condition:e=>!e.allowSharing,warningMessage:t("team_settings_restrict_sharing_to_team_enable_sharing_first")}]}};return(0,f.tZ)(gy,{settingRow:b,...e})},Gy=e=>{const{translate:t}=(0,g.Z)(),n={type:"header",label:t("team_setting_header_sharing")};return(0,f.BX)($h,{children:[(0,f.tZ)(Yh,{header:n}),(0,f.tZ)(qy,{...e}),(0,f.tZ)(jy,{...e})]})};var Fy=n(13134);const Vy=e=>{const{translate:t}=(0,g.Z)(),n=pc(),{hasTrialBusinessPaywall:a,hasExcludedPolicy:i,isTeamDiscontinuedAfterTrial:r,policies:s}=e,o=i("autologinDomainDisabledArray");if(!s)return null;const l={type:"text",isReadOnly:r||o||n,multiLine:!0,label:t("team_settings_disable_auto_login_domains"),helperLabel:t("team_settings_disable_auto_login_domains_helper"),hintText:t("team_settings_disable_auto_login_domains_placeholder"),value:s.disableAutoLoginDomains,badgeIconName:o||a||n?"PremiumOutlined":void 0,badgeLabel:o||a||n?t("team_settings_available_in_business_plan"):void 0,serializer:e=>(e.length?e.split(";"):[]).filter((e=>!!e.length)).map((e=>e.trim())),deserializer:e=>e?.length?e.join(";"):"",validator:e=>e.some((e=>!new Fy.Y(e).isUrlValid()))?"wrong_url":e.some((e=>e.length>255))?"wrong_size":null,feature:"disableAutoLoginDomains",getErrorMessageForKey:e=>{switch(e){case"wrong_size":return t("team_settings_disable_auto_login_domains_save_error_msg_wrong_size",{lengthLimit:255});case"wrong_url":return t("team_settings_disable_auto_login_domains_save_error_msg_wrong_url");case"too_many_requests":return t("team_settings_too_many_requests");default:return t("team_settings_disable_auto_login_domains_save_error_msg_generic_error")}}};return(0,f.tZ)(gy,{settingRow:l,...e})},Hy=e=>{const{translate:t}=(0,g.Z)(),n={type:"header",label:t("team_settings_header_browser_settings")};return(0,f.BX)($h,{children:[(0,f.tZ)(Yh,{header:n}),(0,f.tZ)(Vy,{...e})]})};var Wy,$y,Yy;const Ky=({lee:e})=>{const{routes:t}=(0,i.Xo)(),{translate:n}=(0,g.Z)(),a=xe(e.permission.adminAccess),s=function(e){const t=(0,G.U)(),n=(0,re.C)();if(!n)return null;const a=e.hasBillingAccess,i=n.isFreeTrial||n.isGracePeriod;return{shouldShowBuyPaywall:a&&i,shouldShowUpgradePaywall:a&&!i&&n.spaceTier!==_.lD.Business,accountSubscriptionCode:null!=t?t:""}}(e.permission.adminAccess),o=(0,Sg.U)(),c=(()=>{const e=(0,ie.lZ)(),t=(0,Ee.o)(me.w.EcommerceWebB2BDiscontinuationDev);return e.isLoading||"boolean"!=typeof t?null:t&&!!e.isTeamSoftDiscontinued&&!!e.isTrial})(),{reportTACError:u}=Y(),{data:p,status:h}=jh(),y=(()=>{const{editTeamPolicies:e}=(0,F.u)(d.o);return e})(),{hasExcludedPolicy:b,hasTrialBusinessPaywall:x}=ke();(0,r.useEffect)((()=>{(0,m.Nc)(l.PageView.TacSettingsPolicies)}),[]);const S=async t=>{const n=(0,ts.v0)(e.globalState);if(0===Object.keys(t).length||!n?.teamId)return Promise.resolve();await y({teamId:n.teamId,policyUpdates:t})},v=()=>!(0,ts.v0)(e.globalState)&&(u(new Error(es.N)),!0);if(!a||!s||null===o||null===c)return Wy||(Wy=(0,f.tZ)(tc.a,{}));h===Ze.rq.Error&&u(new Error("Error loading team policies"));const C=!(null==p)&&p.enablePersonalSpace;return(0,f.tZ)(Lh,{title:n("team_settings_menu_title_policies"),isLoading:h===Ze.rq.Loading,sideContent:$y||($y=(0,f.tZ)(Xy,{})),children:h===Ze.rq.Success&&p?(0,f.BX)(f.HY,{children:[Yy||(Yy=(0,f.tZ)(uy,{})),C?(0,f.tZ)(Cy,{checkForAuthenticationError:v,editSettings:S,policies:p,showQuickDisableOfSmartSpaceManagement:c}):null,(0,f.tZ)(wy,{checkForAuthenticationError:v,editSettings:S,hasExcludedPolicy:b,hasTrialBusinessPaywall:x,isPersonalSpaceEnabledViaTeamSetting:C,isTeamDiscontinuedAfterTrial:o,policies:p,routes:t,showPaywallInfo:a}),(0,f.tZ)(Gy,{checkForAuthenticationError:v,editSettings:S,hasExcludedPolicy:b,hasTrialBusinessPaywall:x,isTeamDiscontinuedAfterTrial:o,policies:p,restrictSharingPaywallDetails:s,routes:t}),(0,f.tZ)(Hy,{checkForAuthenticationError:v,editSettings:S,hasExcludedPolicy:b,hasTrialBusinessPaywall:x,isTeamDiscontinuedAfterTrial:o,policies:p})]}):null})};function Qy({path:e}){return(0,f.tZ)(i.GB,{path:e,permission:e=>e.adminAccess.hasFullAccess,children:(0,f.BX)(i.rs,{children:[(0,f.tZ)(i.l_,{exact:!0,from:e,to:`${e}${a.B9.POLICIES}`}),(0,f.tZ)(i.Vy,{path:`${e}${a.B9.POLICIES}`,component:Ky}),(0,f.tZ)(i.Vy,{path:`${e}${a.B9.DUO}`,component:Xh,reducer:wh.ZP}),(0,f.tZ)(i.Vy,{path:`${e}${a.B9.MASTER_PASSWORD_POLICIES}`,component:Wh,reducer:Gh.ZP})]})})}var Jy=n(26024),eb=n(95450);const tb=new Map([[_.lD.Business,l.B2bPlanTier.Business],[_.lD.Team,l.B2bPlanTier.Team],[_.lD.Legacy,l.B2bPlanTier.Legacy],[_.lD.Enterprise,l.B2bPlanTier.Business]]),nb=({currentBillingPlanTier:e,emailDomainError:t,emailDomainSubmittedCount:n,emailDomainValidatedCount:a,encryptionServicePlatformSelected:i,idpValidationResponse:r,ssoSetupStep:s,ssoSolutionChosen:o,testSsoResponse:c})=>{(0,m.Kz)(new l.UserSetupSsoEvent({currentBillingPlanTier:e,emailDomainError:null!=t?t:l.EmailDomainError.OtherError,emailDomainSubmittedCount:null!=n?n:0,emailDomainValidatedCount:null!=a?a:0,encryptionServicePlatformSelected:null!=i?i:l.EncryptionServicePlatformSelected.AmazonWebServices,idpValidationResponse:null!=r?r:l.IdpValidationResponse.Success,ssoSetupStep:s,ssoSolutionChosen:o,testSsoResponse:null!=c?c:l.TestSsoResponse.NotTested}))},ab=e=>e&&tb.get(e)||l.B2bPlanTier.Business,ib=e=>{nb({...e,currentBillingPlanTier:ab(e.currentBillingPlanTier),ssoSolutionChosen:l.SsoSolutionChosen.SelfHostedSso})},rb=e=>{nb({...e,currentBillingPlanTier:ab(e.currentBillingPlanTier),ssoSolutionChosen:l.SsoSolutionChosen.NitroSso})};var sb=n(5961),ob=n.n(sb),lb=n(24047);const cb=e=>{const{markdownValue:t="",linkParams:n={},linkProps:a}=e,{linkTarget:i,onLinkClicked:r=(()=>{})}=n,s=t.includes("\n");return(0,f.tZ)(ob(),{source:t,allowedTypes:["Text","Link","Emph","Strong","Paragraph","Softbreak","List","Item","Code"],containerTagName:"span",softBreak:"br",renderers:{Paragraph:s?"p":"span",Link:function(e){return(0,f.tZ)(lb.Z,{...a,"aria-label":t,href:e.href,target:i,onClick:()=>{r(e.href)},children:e.children})}}})},db=({onClose:e,onConfirm:t,titleText:n,bodyText:a})=>{const{translate:i}=(0,g.Z)(),[s,l]=(0,r.useState)(!1),[c,d]=(0,r.useState)(null),_=i("_common_action_cancel");return(0,f.BX)(B.VqE,{isOpen:!0,disableOutsideClickClose:!0,disableScrolling:!0,closeIconName:_,onClose:e,children:[(0,f.tZ)(B.$N8,{title:n}),(0,f.tZ)(B.a7O,{children:(0,f.tZ)(B.nvN,{color:c?"ds.text.danger.standard":"ds.text.neutral.standard",children:null!=c?c:a})}),(0,f.BX)(B.cNS,{children:[(0,f.tZ)(o.zx,{sx:{mr:"12px"},mood:"neutral",intensity:"quiet",onClick:()=>{e()},disabled:s,children:_}),(0,f.tZ)(o.zx,{mood:"brand",intensity:"catchy",onClick:async()=>{l(!0),d(null);try{await t(),l(!1),e()}catch(e){d(e instanceof Error?e.message:i("_common_generic_error")),l(!1)}},isLoading:s,disabled:s,children:"Yes, clear setup"})]})]})};let _b=function(e){return e.ChooseSso="ChooseSso",e.SelfHosted="SelfHosted",e.Nitro="Nitro",e}({});const ub=({pageContext:e,onSetupClear:t})=>{const{routes:n}=(0,i.Xo)(),a=(0,U.B)(),s=(0,G.U)(),{translate:d}=(0,g.Z)(),[_,u]=(0,r.useState)(!1),{teamId:p}=(0,Ce.fV)(),{initSsoProvisioning:h}=(0,F.u)(Jy.y),{status:y,data:b}=(0,c.k)(Jy.y,"ssoProvisioning");if(y!==Ze.rq.Success||b.enableSSO.ssoEnabled)return null;const{global:{inferredSsoState:x,ssoCapable:S}}=b;if(!1===S)return(0,f.tZ)(o.ke,{mood:"neutral",size:"large",title:d("team_settings_es_sso_plan_error_header"),description:d("team_settings_es_sso_plan_missing_body"),actions:a?.premiumStatus?[(0,P.wt)(a.premiumStatus)?(0,f.tZ)(o.zx,{onClick:()=>{(0,m.Kz)(new l.UserClickEvent({button:l.Button.BuyDashlane,clickOrigin:l.ClickOrigin.SsoPaywallBanner})),(0,X.Yo)(`${ae.ub}?plan=business&subCode=${null!=s?s:""}`)},role:"link",children:d("team_account_teamplan_plan_buy_dashlane")},"buy"):(0,f.tZ)(i.rU,{to:`${n.teamAccountChangePlanRoutePath}?plan=business`,children:(0,f.tZ)(o.zx,{children:d("team_settings_es_sso_plan_missing_button")})},"upgrade")]:[]});const v=[eb.s5.enum.NitroIncomplete,eb.s5.enum.SelfHostedIncomplete];if(e!==_b.ChooseSso&&v.includes(x)){let n=null,a=async()=>{await(t?.()),ib({ssoSetupStep:l.SsoSetupStep.ClearSsoSettings})};e===_b.Nitro&&x===eb.s5.enum.SelfHostedIncomplete&&(n={title:"To use Confidential SSO, clear self-hosted SSO setup",description:"If you want to use Confidential SSO, select **Clear setup** to erase your progress in Dashlane. Make sure to also delete your progress in your IdP.",cta:"Clear setup"},a=async()=>{await fe.C.clearSelfHostedESSettings(),await h({teamId:`${p}`}),await(t?.())});const i=[eb.s5.enum.NitroComplete,eb.s5.enum.SelfHostedComplete];if(n&&!i.includes(x))return(0,f.BX)(f.HY,{children:[_?(0,f.tZ)(db,{onClose:()=>u(!1),onConfirm:a,titleText:"Are you sure?",bodyText:"This action can’t be undone."}):null,(0,f.tZ)(o.ke,{mood:"neutral",size:"large",title:n.title,description:(0,f.tZ)(cb,{markdownValue:n.description}),actions:[(0,f.tZ)(o.zx,{onClick:()=>u(!0),children:n.cta},"clear")]})]})}return(0,f.tZ)(o.ke,{mood:"warning",size:"large",title:"Switching between SSO options isn't available right now",description:"We're in the process of adding new capabilities to Confidential SSO. During this period, you can't switch between the two options. Before turning on your chosen SSO option, please make sure it meets your organization's needs."})};var mb,pb=n(65911);const gb=[{li:"In a separate window, log in to your IdP account."},{li:"Find the section to create a new SSO application.",ol:[{li:"Add the ID and URLs provided here to your application."},{li:"Add members who will log in to Dashlane with SSO to your application."}]}],hb=({content:e})=>(0,f.tZ)("ol",{sx:{color:"ds.text.neutral.quiet"},children:e.map((({li:e,ol:t},n)=>(0,f.BX)(o.nv,{as:"li",textStyle:"ds.body.standard.regular",children:[(0,f.tZ)(cb,{markdownValue:e}),t?(0,f.tZ)(hb,{content:t}):null]},n)))}),yb=()=>{var e,t,n;const{translate:a}=(0,g.Z)(),i=(0,c.k)(Jy.y,"ssoProvisioning"),r=i.status===Ze.rq.Loading,s={entityId:null!=(e=i.data?.idpApplication.entityId)?e:"",acsUrl:null!=(t=i.data?.idpApplication.acsUrl)?t:"",signOnUrl:null!=(n=i.data?.idpApplication.signOnUrl)?n:""};return(0,f.BX)("div",{sx:{display:"grid",gridTemplateColumns:"auto",gridAutoRows:"auto",gap:"24px",marginBottom:"32px"},children:[(0,f.BX)("div",{sx:{ol:{listStyleType:"decimal",ml:"20px",ol:{listStyleType:"lower-alpha"}}},children:[(0,f.tZ)(o.X6,{as:"h2",textStyle:"ds.title.section.medium",color:"ds.text.neutral.standard",sx:{mb:"8px"},children:a("sso_confidential_idp_setup_page_title")}),mb||(mb=(0,f.tZ)(hb,{content:gb}))]}),(0,f.tZ)(o.ke,{mood:"brand",size:"small",title:a("sso_confidential_idp_setup_infobox_message")}),(0,f.BX)("div",{sx:{display:"grid",gridTemplateColumns:"auto",gridAutoRows:"auto",gap:"24px"},children:[(0,f.tZ)(pb.x,{isLoading:r,value:s.entityId,label:a("sso_confidential_idp_setup_entity_id_label"),readOnly:!0}),(0,f.tZ)(pb.x,{isLoading:r,value:s.acsUrl,label:a("sso_confidential_idp_setup_acs_url_label"),readOnly:!0}),(0,f.tZ)(pb.x,{isLoading:r,value:s.signOnUrl,label:a("sso_confidential_idp_setup_sign_on_url_label"),readOnly:!0})]})]})},bb="_common_toast_close_label",xb="sso_confidential_metadata_form_field_placeholder",Sb="sso_confidential_metadata_form_error_could_not_find_entrypoint",fb="sso_confidential_metadata_form_error_cound_not_validate_certificate",vb="sso_confidential_metadata_form_error_server_error",Cb={XML_PARSE_FAILED:"sso_confidential_metadata_form_error_could_not_read_metadata",KEY_DESCRIPTOR_NOT_FOUND:Sb,IDP_ENTRYPOINT_NOT_FOUND:Sb,INVALID_IDP_SSO_DESCRIPTOR:Sb,MISSING_CERTIFICATE:"sso_confidential_metadata_form_error_no_certificate",MULTIPLE_CERTIFICATES:"sso_confidential_metadata_form_error_multiple_certificates",INVALID_ENTRYPOINT:"sso_confidential_metadata_form_error_invalid_entrypoint",CERTIFICATE_TOO_SHORT:fb,CERTIFICATE_TOO_LONG:fb,CERTIFICATE_DECODE_FAILED:fb},Eb={INVALID_METADATA_CONTENT:"sso_confidential_metadata_form_error_invalid_metadata_content",INVALID_METADATA_URL:"sso_confidential_metadata_form_error_invalid_metadata_url",DOMAIN_UPDATE_FAILED:vb,SAVE_METADATA_FAILED:vb,INTERNAL_ERROR:"sso_confidential_metadata_form_error_internal_error"},Zb="Unexpected server error. Please try again or contact Customer Support.",Tb="ssoIdpMetadata",Db=()=>{var e;const{showToast:t}=(0,o.pm)(),[n,a]=(0,r.useState)(!1),[i,s]=(0,r.useState)(!1),{translate:d}=(0,g.Z)(),_=(0,c.k)(Jy.y,"ssoProvisioning"),{testLoginUserWithEnclaveSSO:u,validateMetadata:m,updateMetadata:p}=(0,F.u)(Jy.y),h=_.status===Ze.rq.Loading,y=!h&&_.data?.idpMetadata.idpUuid&&_.data?.idpMetadata.metadataValue,b=null!=(e=_.data?.idpMetadata.metadataValue)?e:"",x={ssoIdpMetadata:b},S=_.data?.global.inferredSsoState,v=[eb.s5.enum.SelfHostedIncomplete,eb.s5.enum.SelfHostedComplete].includes(S),C=(0,r.useCallback)((async(e,t)=>{try{a(!0),rb({ssoSetupStep:l.SsoSetupStep.UpdateIdpSettings});const n=await p({metadata:""===e.ssoIdpMetadata?null:e.ssoIdpMetadata});if(a(!1),(0,V.hx)(n)){const e=n.error.tag.toUpperCase();return t.setFieldError(Tb,d(e in Eb?Eb[e]:Zb))}_.data?.global.isTeamProvisionedInNitro||rb({ssoSetupStep:l.SsoSetupStep.CreateSsoApplication})}catch(e){return t.setFieldError(Tb,Zb)}}),[_.data?.global,d,p]),E=async e=>{var t;if(e&&!new Fy.Y(e).isUrlValid())try{const n=await m({metadata:e});if(rb({ssoSetupStep:l.SsoSetupStep.ValidateIdpMetadata,idpValidationResponse:(t=n,(0,V.hx)(t)?Object.values(l.IdpValidationResponse).includes(t.error.tag)?t.error.tag:l.IdpValidationResponse.XmlParseFailed:l.IdpValidationResponse.Success)}),(0,V.hx)(n)){const e=n.error.tag.toUpperCase();return d(e in Cb?Cb[e]:Cb.XML_PARSE_FAILED)}}catch(e){return e instanceof Error?e.message:"Unknown error"}},Z=async()=>{if(!y)return;s(!0);const e=await u(void 0),n=(0,V.d6)(e);rb({ssoSetupStep:l.SsoSetupStep.TestSsoConnection,testSsoResponse:n?l.TestSsoResponse.Success:l.TestSsoResponse.Failure}),t(n?{description:d("sso_confidential_test_nitro_sso_success_feedback"),closeActionLabel:d(bb),mood:"brand"}:{description:d("sso_confidential_test_nitro_sso_error_feedback"),closeActionLabel:d(bb),mood:"danger"}),s(!1)};return(0,f.tZ)(ea.J9,{initialValues:x,onSubmit:C,enableReinitialize:!0,children:({isSubmitting:e,isValid:t,isValidating:a,dirty:r})=>{const s=v||e||h,l=s||!t||a||!r;return(0,f.tZ)(ea.l0,{noValidate:!0,children:(0,f.BX)("div",{sx:{display:"grid",gridTemplateColumns:"auto",gridAutoRows:"auto",gap:"8px"},children:[(0,f.tZ)(o.X6,{as:"h2",textStyle:"ds.title.section.medium",color:"ds.text.neutral.standard",children:d("sso_confidential_metadata_form_section_heading")}),(0,f.tZ)(o.nv,{textStyle:"ds.body.standard.regular",color:"ds.text.neutral.standard",sx:{marginBottom:"24px"},children:d("sso_confidential_metadata_form_paragraph")}),(0,f.tZ)(ea.gN,{name:Tb,validateOnChange:!0,validate:E,children:({field:t,meta:{error:n}})=>(0,f.tZ)(o.Kx,{required:!0,id:t.name,label:d("sso_confidential_metadata_form_field_label"),placeholder:d(xb),"aria-label":d(xb),autoCorrect:"off",autoComplete:"off",spellCheck:"false",disabled:s,feedback:!n||e||a?void 0:{text:n},error:!(!n||e||a),...t})}),(0,f.BX)("div",{sx:{display:"flex",flexDirection:"row",gap:"16px",justifyContent:"flex-end",mt:"12px"},children:[(0,f.tZ)(o.zx,{sx:{justifySelf:"end"},mood:"neutral",intensity:"quiet",disabled:!y,isLoading:i,onClick:Z,children:d("sso_confidential_test_nitro_sso_button_label")}),(0,f.tZ)(o.zx,{type:"submit",sx:{justifySelf:"end"},mood:"brand",intensity:b?"quiet":"catchy",disabled:l,isLoading:n,children:d("sso_confidential_metadata_form_button_submit")})]})]})})}})},kb="sso_confidential_enable_nitro_sso_confirm_dialog_cancel",Ib=({title:e,body:t,primaryActionLabel:n,onConfirm:a,onCancel:i})=>{const{translate:s}=(0,g.Z)(),[l,c]=(0,r.useState)(!1);return(0,f.tZ)(o.Vq,{closeActionLabel:s(kb),title:e,isOpen:!0,onClose:i,actions:{primary:{children:n,onClick:async()=>{try{c(!0),await a()}catch{c(!1)}},disabled:l,isLoading:l},secondary:{children:s(kb),onClick:i,disabled:l}},children:t})},Ab=()=>{const{translate:e}=(0,g.Z)(),{showAlert:t}=(0,ta.V)(),[n,a]=(0,r.useState)(!1),i=(0,c.k)(Jy.y,"ssoProvisioning"),{enableSso:s}=(0,F.u)(Jy.y),d=i.data?.domainSetup[0]?.domainName,_=d?i.data?.domainVerificationInfo[d]:null,u=_?.verificationStatus!==eb.X5.enum.valid,m=i.data?.enableSSO.ssoEnabled,p=Boolean(u||m);return(0,f.BX)(f.HY,{children:[(0,f.BX)("div",{sx:{display:"grid",gap:"8px"},children:[(0,f.tZ)(o.nv,{as:"h2",textStyle:"ds.title.section.medium",color:"ds.text.neutral.standard",children:e("sso_confidential_enable_nitro_sso_section_heading")}),(0,f.tZ)(o.nv,{textStyle:"ds.body.standard.regular",color:"ds.text.neutral.standard",sx:{mb:"4px",gridRow:"2",gridColumn:"1/1"},children:e("sso_confidential_enable_nitro_sso_description")}),(0,f.tZ)("div",{sx:{justifySelf:"end"},children:(0,f.tZ)(o.zx,{id:"enableSso",onClick:()=>{a(!0),rb({ssoSetupStep:l.SsoSetupStep.TurnOnSso})},disabled:p,children:e("sso_confidential_enable_nitro_sso_button_label")})})]}),n?(0,f.tZ)(Ib,{title:e("sso_confidential_enable_nitro_sso_confirm_dialog_title"),body:e("sso_confidential_enable_nitro_sso_confirm_dialog_body"),primaryActionLabel:e("sso_confidential_enable_nitro_sso_confirm_dialog_primary_action_label"),onConfirm:async()=>{await(async()=>{const n=await s();(0,V.d6)(n)?t(e("sso_confidential_enable_nitro_sso_success_feedback"),B.BLW.SUCCESS):t(n.error.tag,B.BLW.ERROR)})(),rb({ssoSetupStep:l.SsoSetupStep.CompleteSsoSetup}),a(!1)},onCancel:()=>{a(!1)}}):null]})};n(58810);var Nb=n(57459);const wb={ERROR_SSO_INVALID_TOKEN:"sso_confidential_verify_domain_step_domain_input_feedback_sso_error_invalid_token",ERROR_SSO_TOKEN_NOT_FOUND:"sso_confidential_verify_domain_modal_error_infobox_title_token_not_found",ERROR_SSO_TOKEN_NOT_FOUND_DESCRIPTION:"sso_confidential_verify_domain_modal_error_infobox_description_token_not_found",ERROR_SSO_GENERIC:"sso_confidential_verify_domain_modal_error_infobox_title_generic_error"},Ob=({pendingReason:e,tokenFound:t,verificationStatus:n})=>n===eb.X5.enum.pending&&e===eb.Q8.enum.invalidToken?{title:wb.ERROR_SSO_INVALID_TOKEN,data:t}:n===eb.X5.enum.pending&&e===eb.Q8.enum.tokenNotFound?{title:wb.ERROR_SSO_TOKEN_NOT_FOUND,description:wb.ERROR_SSO_TOKEN_NOT_FOUND_DESCRIPTION}:n===eb.X5.enum.invalid?{title:wb.ERROR_SSO_GENERIC}:null,Rb={CLOSE:"_common_dialog_dismiss_button",TITLE:"sso_confidential_verify_domain_modal_title",SUBDOMAIN_LABEL:"sso_confidential_verify_domain_modal_subdomain_label",TXT_LABEL:"sso_confidential_verify_domain_modal_txt_label",INSTRUCTION_1:"sso_confidential_verify_domain_modal_instruction_1",INSTRUCTION_2:"sso_confidential_verify_domain_modal_instruction_2",INSTUCTION_3:"sso_confidential_verify_domain_modal_instruction_3_markup",INFOBOX_TITLE:"sso_confidential_verify_domain_modal_infobox_title",VERIFY_DOMAIN_BUTTON:"sso_confidential_verify_domain_modal_verify_domain_button",VERIFY_DOMAIN_BUTTON_RETRY:"sso_confidential_verify_domain_modal_verify_domain_button_retry",VERIFY_DOMAIN_CLOSE:"sso_confidential_verify_domain_modal_verify_domain_button_close",...wb},Lb=({domainName:e,domainVerificationInfo:t,onClose:n})=>{const{translate:a}=(0,g.Z)(),{checkDNSValidation:i}=(0,F.u)(Jy.y),[s,l]=(0,r.useState)(!1),[c,d]=(0,r.useState)(!1),[_,u]=(0,r.useState)(null);(0,r.useEffect)((()=>{t?.verificationStatus===eb.X5.enum.valid&&c&&n()}),[t,c]),(0,r.useEffect)((()=>{t&&u(Ob(t))}),[t]);const{pendingReason:m,subdomainValue:p,txtValue:h,verificationStatus:y}=t;let b=a(Rb.VERIFY_DOMAIN_BUTTON);return"valid"===y?b=a(Rb.VERIFY_DOMAIN_CLOSE):("pending"===y&&m||"invalid"===y)&&(b=a(Rb.VERIFY_DOMAIN_BUTTON_RETRY)),(0,f.BX)(o.Vq,{closeActionLabel:a(Rb.CLOSE),title:a(Rb.TITLE,{domainName:e}),isOpen:!0,onClose:n,actions:{primary:{children:b,onClick:"valid"===y?n:async()=>{l(!0);const t=await i({domainName:e});l(!1),(0,V.hx)(t)?u({title:Rb.ERROR_SSO_GENERIC}):d(!0)},isLoading:s}},children:[(0,f.BX)("ol",{sx:{listStyleType:"decimal",ml:"20px"},children:[(0,f.tZ)(o.nv,{as:"li",textStyle:"ds.body.standard.regular",color:"ds.text.neutral.standard",children:a(Rb.INSTRUCTION_1)}),(0,f.tZ)(o.nv,{as:"li",textStyle:"ds.body.standard.regular",color:"ds.text.neutral.standard",children:a(Rb.INSTRUCTION_2)}),(0,f.tZ)(o.nv,{as:"li",textStyle:"ds.body.standard.regular",color:"ds.text.neutral.standard",children:a.markup(Rb.INSTUCTION_3)})]}),(0,f.tZ)(o.ke,{title:a(Rb.INFOBOX_TITLE),mood:"brand"}),(0,f.tZ)(pb.x,{label:a(Rb.SUBDOMAIN_LABEL),value:null!=p?p:"",readOnly:!0}),(0,f.tZ)(pb.x,{label:a(Rb.TXT_LABEL),value:null!=h?h:"",readOnly:!0}),_?(0,f.tZ)(o.ke,{title:a(_.title),description:_.data||_.description&&a(_.description),mood:"danger",size:"medium"}):null]})};var Mb;const Bb=()=>{const{translate:e}=(0,g.Z)(),[t,n]=(0,r.useState)(!1),{data:a,editTeamPolicies:i,status:s}=(()=>{const{data:e,status:t}=(0,c.k)(d.o,"getTeamId"),{data:n,status:a}=(0,c.k)(d.o,"getTeamPolicies"),{editTeamPolicies:i}=(0,F.u)(d.o);return a===Ze.rq.Error||t===Ze.rq.Error?{status:Ze.rq.Error}:a===Ze.rq.Loading||t===Ze.rq.Loading?{status:Ze.rq.Loading}:{status:Ze.rq.Success,data:{teamPolicies:n},editTeamPolicies:t=>i({teamId:Number(e.teamId),policyUpdates:t})}})(),l=(0,c.k)(Jy.y,"ssoProvisioning");return(0,r.useEffect)((()=>{if(l.status===Ze.rq.Success){var e;const a=null!=(e=l.data?.global.inferredSsoState)?e:"";var t;["SelfHostedComplete","SelfHostedIncomplete"].includes(a)?fe.C.getTeamDomains().then((e=>{e.success&&n(e.domains.some((e=>"valid"===e.status)))})):n((null!=(t=l.data?.domainSetup)?t:[]).some((e=>e.verificationStatus===eb.X5.enum.valid)))}}),[l]),(0,f.BX)("div",{sx:{backgroundColor:"ds.container.agnostic.neutral.quiet",borderRadius:"8px",padding:"24px",display:"flex",flexDirection:"column",gap:"16px"},children:[(0,f.BX)(o.X6,{as:"h3",textStyle:"ds.title.supporting.small",color:"ds.text.neutral.quiet",children:[e("jit_provisioning_cat_title")," "]})," ",(0,f.BX)("div",{sx:{display:"flex",flexDirection:"row",gap:"16px"},children:[(0,f.BX)("div",{sx:{display:"flex",flexDirection:"column",alignItems:"flex-start",gap:"8px"},children:[(0,f.tZ)(o.X6,{as:"h2",textStyle:"ds.title.block.medium",color:"ds.text.neutral.catchy",children:e("jit_provisioning_title")}),(0,f.tZ)(o.nv,{textStyle:"ds.body.standard.regular",color:"ds.text.neutral.standard",children:e("jit_provisioning_description")})]}),(0,f.tZ)("div",{children:s===Ze.rq.Loading?Mb||(Mb=(0,f.tZ)(o.ZX,{mood:"brand"})):(0,f.tZ)(o.ZD,{disabled:!t,onChange:e=>{e.preventDefault(),s===Ze.rq.Success&&i?.({ssoProvisioning:e.target.checked})},defaultChecked:!!a?.teamPolicies.ssoProvisioning})})]})]})};var Pb;const Ub={SSO_STATUS_ACTIVE:"sso_confidential_verify_domain_step_sso_status_active",SSO_STATUS_VERIFIED:"sso_confidential_verify_domain_step_sso_status_verified",SSO_STATUS_UNVERIFIED:"sso_confidential_verify_domain_step_sso_status_unverified",SSO_STATUS_ERROR:"sso_confidential_verify_domain_step_sso_status_error",INPUT_LABEL:"sso_confidential_verify_domain_step_domain_input_label",BUTTON_DELETE_LABEL:"_common_action_delete",BUTTON_VERIFY_LABEL:"sso_confidential_verify_domain_step_domain_input_button_verify",BUTTON_VIEW_DETAILS_LABEL:"sso_confidential_verify_domain_step_domain_input_button_view_details",ERROR_DOMAIN_ALREADY_PROVISIONED:"sso_confidential_verify_domain_error_domain_already_provisioned",FEEDBACK_SSO_ACTIVE:"sso_confidential_verify_domain_step_domain_input_feedback_sso_active",...wb},zb=({error:e,isValid:t,isValidSSOActive:n})=>{const{translate:a}=(0,g.Z)(),i=(e,t,n)=>(0,f.tZ)(o.Ct,{mood:e,intensity:t,label:a(n)});return n?i("positive","catchy",Ub.SSO_STATUS_ACTIVE):t?i("positive","quiet",Ub.SSO_STATUS_VERIFIED):e?i("danger","quiet",Ub.SSO_STATUS_ERROR):i("neutral","quiet",Ub.SSO_STATUS_UNVERIFIED)},Xb=({disabled:e,domainName:t,domainVerificationInfo:n,id:a,onModalOpen:i,onDeleteDomain:s,onUpdateDomain:l,provisionedDomains:c,ssoActive:d})=>{const{translate:_}=(0,g.Z)(),{provisionDomain:u,deleteDomain:m}=(0,F.u)(Jy.y),[p,h]=(0,r.useState)(!1),[y,b]=(0,r.useState)(!1),[x,S]=(0,r.useState)(0===t.length),[v,C]=(0,r.useState)(!1),[E,Z]=(0,r.useState)(null),T=c.get(t)===a,D=T&&n?.verificationStatus===eb.X5.enum.valid,k=D&&d;(0,r.useEffect)((()=>{if(!T&&c.has(t))C(!0);else if(n){var e;Z(null!=(e=Ob(n)?.title)?e:null)}}),[t,n,T,c]);const I=((e,t,n)=>t?Ub.ERROR_DOMAIN_ALREADY_PROVISIONED:e||(n?Ub.FEEDBACK_SSO_ACTIVE:null))(E,v,k);return(0,f.BX)(f.HY,{children:[(0,f.tZ)(B.dDn,{alignSelf:"start",justifySelf:"start",sx:{paddingTop:"16px"},children:(0,f.tZ)(zb,{error:!!E||v||n?.verificationStatus===eb.X5.enum.expired||n?.verificationStatus===eb.X5.enum.invalid,isValid:D,isValidSSOActive:k})}),(0,f.tZ)(B.dDn,{children:(0,f.tZ)(o.qo,{label:_(Ub.INPUT_LABEL),placeholder:_(Ub.INPUT_LABEL),labelPersists:!1,autoCorrect:"off",autoComplete:"off",disabled:e,readOnly:T,onChange:({target:{value:e}})=>{C(!1),Z(null),S(0===e.length)},onBlur:e=>{l(e.currentTarget.value.trim().toLocaleLowerCase())},value:t,sx:{width:"400px"},error:v||!!E,feedback:I?_(I):void 0})}),(0,f.tZ)(B.dDn,{alignSelf:"start",justifySelf:"end",sx:{paddingTop:"5px"},...k&&{gridColumnStart:"3",gridColumnEnd:"5"},children:D&&!v?(0,f.tZ)(o.zx,{mood:"neutral",intensity:"quiet",onClick:i,disabled:e,children:_(Ub.BUTTON_VIEW_DETAILS_LABEL)}):(0,f.tZ)(o.zx,{mood:"brand",intensity:"quiet",disabled:e||x||v||y,isLoading:p,onClick:async()=>{try{if(!n&&!E){h(!0);const e=await u({domainName:t});if((0,V.hx)(e))return"DomainAlreadyProvisioned"===e.error.tag?void C(!0):void Z(Ub.ERROR_SSO_GENERIC)}i()}catch{Z(Ub.ERROR_SSO_GENERIC)}finally{h(!1)}},sx:{position:"relative"},children:_(Ub.BUTTON_VERIFY_LABEL)})}),k?null:(0,f.tZ)(B.dDn,{alignSelf:"start",justifySelf:"end",sx:{paddingTop:"5px"},children:(0,f.tZ)(o.zx,{"aria-label":Ub.BUTTON_DELETE_LABEL,disabled:p,isLoading:y,mood:"danger",intensity:"supershy",layout:"iconOnly",icon:Pb||(Pb=(0,f.tZ)(o.JO,{name:"ActionDeleteOutlined"})),onClick:async()=>{try{if(n&&!v){b(!0);const e=await m({domainName:t});if((0,V.hx)(e))return void Z(Ub.ERROR_SSO_GENERIC)}s()}catch{Z(Ub.ERROR_SSO_GENERIC)}finally{b(!1)}},sx:{position:"relative"}})}),(0,f.tZ)(B.dDn,{gridColumnStart:1,gridColumnEnd:5,sx:{borderBottom:"1px solid ds.border.neutral.quiet.idle"}})]})};var qb,jb;const Gb={VERIFY_DOMAIN_TITLE:"sso_confidential_verify_domain_step_title",TABLE_HEADER_STATUS:"sso_confidential_verify_domain_step_table_header_status",TABLE_HEADER_DOMAIN:"sso_confidential_verify_domain_step_table_header_domain",BUTTON_ADD_LABEL:"sso_confidential_verify_domain_step_add_domain_button_label",PAGINATION_ITEM_COUNT:"_common_pagination_item_count",...wb},Fb=20,Vb=()=>{var e;const{translate:t}=(0,g.Z)(),[n,a]=(0,r.useState)([]),[i,s]=(0,r.useState)(1),[l,d]=(0,r.useState)(null),{spaceDetails:_}=(0,Ce.fV)(),u=(0,c.k)(Jy.y,"ssoProvisioning"),m=u.data?.domainVerificationInfo,p=null!=(e=u.data?.enableSSO.ssoEnabled)&&e,h=u.data?.global.ssoIsNitroProvider&&!!u.data?.idpMetadata.metadataValue;(0,r.useEffect)((()=>{if(u.data?.domainVerificationInfo&&0===n.length){var e,t;const n=Object.keys(null!=(e=u.data?.domainVerificationInfo)?e:{});a(n.length?n.map((e=>({id:(0,Nb.Z)(),domainName:e}))):[{id:(0,Nb.Z)(),domainName:null!=(t=_?.associatedEmail.split("@")[1])?t:""}])}}),[n.length,u.data?.domainVerificationInfo]);const y=(0,r.useMemo)((()=>m?((e,t)=>new Map(e.toReversed().reduce(((e,{id:n,domainName:a})=>(t[a]&&e.push([a,n]),e)),[])))(n,m):new Map),[m,n]);if(u.status!==Ze.rq.Success)return null;const b=(i-1)*Fb;return(0,f.BX)("div",{sx:{display:"flex",flexDirection:"column",gap:"32px"},children:[(0,f.tZ)(o.X6,{as:"h3",color:"ds.text.neutral.standard",textStyle:"ds.title.section.medium",children:t(Gb.VERIFY_DOMAIN_TITLE)}),(0,f.BX)(B.T5p,{gap:"16px 10px",gridTemplateColumns:"100px 1fr 126px 40px",children:[(0,f.tZ)(B.dDn,{children:(0,f.tZ)(o.X6,{as:"h4",color:"ds.text.neutral.quiet",textStyle:"ds.title.supporting.small",children:t(Gb.TABLE_HEADER_STATUS)})}),(0,f.tZ)(B.dDn,{gridColumnStart:2,gridColumnEnd:5,children:(0,f.tZ)(o.X6,{as:"h4",color:"ds.text.neutral.quiet",textStyle:"ds.title.supporting.small",children:t(Gb.TABLE_HEADER_DOMAIN)})}),n.length>0?(0,f.BX)(f.HY,{children:[(0,f.tZ)(B.dDn,{gridColumnStart:1,gridColumnEnd:5,sx:{borderBottom:"1px solid ds.border.neutral.quiet.idle"}}),n.slice(b,b+Fb).map((({id:e,domainName:t})=>m?(0,f.tZ)(Xb,{disabled:!h,domainName:t,domainVerificationInfo:m[t],id:e,onDeleteDomain:()=>(async e=>{const t=n.filter((({id:t})=>t!==e)),r=Math.ceil(t.length/Fb);i>r&&s(r),a(t)})(e),onModalOpen:()=>(async e=>{const{domainName:t}=n.find((({id:t})=>t===e));d(t)})(e),onUpdateDomain:t=>((e,t)=>{const i=n.map((n=>{const{id:a}=n;return a===e?{id:a,domainName:t}:n}));a(i)})(e,t),provisionedDomains:y,ssoActive:p},e):null))]}):null,(0,f.tZ)(B.dDn,{gridColumnStart:2,children:(0,f.tZ)(o.zx,{mood:"brand",intensity:"supershy",layout:"iconLeading",icon:qb||(qb=(0,f.tZ)(o.JO,{name:"ActionAddOutlined"})),size:"small",onClick:()=>{s(Math.ceil((n.length+1)/Fb)),a([...n,{id:(0,Nb.Z)(),domainName:""}])},disabled:!h,children:t(Gb.BUTTON_ADD_LABEL)})}),n.length>Fb?(0,f.BX)(B.dDn,{gridColumnStart:1,gridColumnEnd:5,sx:{alignItems:"center",display:"grid",gridTemplateColumns:"1fr auto 1fr",padding:"24px"},children:[(0,f.tZ)(o.nv,{color:"ds.text.neutral.quiet",textStyle:"ds.body.helper.regular",children:t(Gb.PAGINATION_ITEM_COUNT,{first:b+1,last:Math.min(b+Fb,n.length),total:n.length})}),(0,f.tZ)(B.tlE,{currentPage:i,onPageChange:s,totalPages:Math.ceil(n.length/Fb)},i)]}):null]}),jb||(jb=(0,f.tZ)(Bb,{})),l&&m?.[l]?(0,f.tZ)(Lb,{domainName:l,domainVerificationInfo:m[l],onClose:()=>{d(null)}}):null]})},Hb=({title:e,paragraph:t,badge:n,children:a,onBackClicked:i,showBackButton:r=!0})=>{const s=(0,Ne.k6)(),l=null!=i?i:()=>{s.push(".")};return(0,f.BX)("div",{sx:{padding:"24px 0"},children:[(0,f.BX)("div",{sx:{padding:"0 32px"},children:[(0,f.BX)(o.kC,{gap:"8px",sx:{marginBottom:"16px"},alignItems:"center",children:[r,(0,f.tZ)(o.zx,{layout:"iconOnly",icon:"CaretLeftOutlined",intensity:"supershy",mood:"neutral",onClick:l}),(0,f.tZ)(o.X6,{as:"h1",textStyle:"ds.title.section.large",children:e}),n?(0,f.tZ)(o.Ct,{...n}):null]}),t?(0,f.tZ)(o.nv,{sx:{marginBottom:"32px"},children:t}):null]}),a]})};var Wb,$b,Yb,Kb,Qb;const Jb={CARD_1_HEADING:"Before you start",CARD_1_BODY_INTRO:"To set up SSO, you'll need:",CARD_1_BODY_POINTS:["Access to your IdP and public DNS provider accounts","A list of members to add to your SSO application","IdP metadata","Email domain"],CARD_1_SUB_HEADING:"Need help?",CARD_1_SUB_BODY:"For help setting up SSO, contact our Customer Support.",CARD_2_HEADING:"After turning on SSO",CARD_2_BODY_FIRST:"After SSO is turned on, non-admin members are required to log in with SSO.",CARD_2_BODY_SECOND:"They must use the browser extension when using Dashlane on a computer. They can also log in with SSO on mobile.",CARD_2_BODY_THIRD:"Admins can't log in with SSO. They still need to enter their Master Password."},ex="support@dashlane.com",tx=()=>{const{status:e,data:t}=(0,c.k)(Jy.y,"ssoProvisioning");if(e!==s.rq.Success)return null;const n=e===s.rq.Success?!t.enableSSO.ssoEnabled:null;return(0,f.tZ)("div",{children:(0,f.BX)(o.kC,{flexDirection:"column",gap:"32px",sx:{flexGrow:1},children:[n?(0,f.tZ)(ub,{pageContext:_b.Nitro}):null,(0,f.BX)(B.Zbd,{sx:{padding:"32px"},children:[Wb||(Wb=(0,f.tZ)(yb,{})),$b||($b=(0,f.tZ)(Db,{}))]}),(0,f.tZ)(B.Zbd,{sx:{padding:"32px"},children:Yb||(Yb=(0,f.tZ)(Vb,{}))}),(0,f.tZ)(B.Zbd,{sx:{padding:"32px"},children:Kb||(Kb=(0,f.tZ)(Ab,{}))})]})})},nx=e=>(0,f.BX)("div",{sx:{border:"none",display:"flex",gap:"24px",flexDirection:"column"},...e,children:[(0,f.BX)(tl,{children:[(0,f.tZ)(o.X6,{as:"h3",textStyle:"ds.title.block.medium",children:Jb.CARD_1_HEADING}),(0,f.tZ)(o.nv,{textStyle:"ds.body.standard.regular",color:"ds.text.neutral.quiet",children:Jb.CARD_1_BODY_INTRO}),(0,f.tZ)(o.nv,{as:"ul",textStyle:"ds.body.standard.regular",color:"ds.text.neutral.quiet",sx:{margin:"0px 0px 8px 20px",listStyleType:"disc"},children:Jb.CARD_1_BODY_POINTS.map((e=>(0,f.tZ)("li",{children:e},e)))}),(0,f.tZ)(o.X6,{as:"h3",textStyle:"ds.title.block.medium",children:Jb.CARD_1_SUB_HEADING}),(0,f.tZ)(o.nv,{textStyle:"ds.body.standard.regular",color:"ds.text.neutral.quiet",children:Jb.CARD_1_SUB_BODY}),(0,f.tZ)(al,{href:`mailto:${ex}`,sx:{fontSize:"14px"},children:ex})]}),(0,f.BX)(tl,{children:[(0,f.tZ)(o.X6,{as:"h3",textStyle:"ds.title.block.medium",children:Jb.CARD_2_HEADING}),(0,f.tZ)(o.nv,{textStyle:"ds.title.block.small",color:"ds.text.neutral.quiet",children:Jb.CARD_2_BODY_FIRST}),(0,f.tZ)(o.nv,{textStyle:"ds.title.block.small",color:"ds.text.neutral.quiet",children:Jb.CARD_2_BODY_SECOND}),(0,f.tZ)(o.nv,{textStyle:"ds.title.block.small",color:"ds.text.danger.standard",children:Jb.CARD_2_BODY_THIRD})]})]}),ax=({backRoute:e})=>{const{data:t}=(0,c.k)(Jy.y,"ssoProvisioning"),{translate:n}=(0,g.Z)(),a=!t?.enableSSO.ssoEnabled;return(0,f.tZ)(Hb,{title:n("sso_confidential_page_title"),showBackButton:a,onBackClicked:()=>{rb({ssoSetupStep:l.SsoSetupStep.ReturnToSsoSelection}),(0,i.uX)(e)},children:Qb||(Qb=(0,f.tZ)(ni,{mainContent:(0,f.tZ)(tx,{}),secondaryContent:(0,f.tZ)(nx,{})}))})},ix=()=>{const[e,t]=(0,r.useState)(!1),[n,a]=(0,r.useState)(),i=(0,r.useCallback)((async()=>{try{return await fe.C.getEncryptionServiceConfig()}catch{return{success:!1,error:{code:Y_.S}}}}),[]),s=(0,r.useCallback)((async(e=new AbortController)=>{e.signal.aborted||t(!0);const n=await i();return e.signal.aborted||(n.success&&a(n.data),t(!1)),n}),[i]);return(0,r.useEffect)((()=>{const e=new AbortController;return s(e),()=>{e.abort()}}),[s]),{esConfigLoading:e,esConfig:n,refreshEncryptionServiceConfig:s}};var rx=n(53123),sx=n(40010),ox=n(54661);const lx="esConfigurationLabel",cx=({value:e,disabled:t,error:n,isLoading:a=!1,configRegenRequired:i,lastGeneratedTimeStamp:r})=>{const{translate:s}=(0,g.Z)(),l=r?(0,f.BX)(o.kC,{gap:"4px",sx:{mt:"8px"},justifyContent:"center",children:[(0,f.tZ)(o.nv,{textStyle:"ds.body.reduced.strong",children:s("team_settings_encryption_service_generate_configuration_timestamp")}),(0,f.tZ)(o.nv,{textStyle:"ds.body.reduced.regular",children:(0,Bt.Z)(r).toLocaleString(navigator.language,{...Kt.qG.lll,timeZoneName:"short"})})]}):null;return(0,f.BX)(B.T5p,{gridTemplateAreas:"'label button' 'description button' 'timestamp timestamp' 'config buttons'",gridTemplateColumns:"3fr 1fr",sx:{gridColumnGap:"8px"},children:[(0,f.tZ)(B.dDn,{gridArea:"label",sx:{paddingBottom:"8px"},as:o.nv,innerAs:"label",id:lx,textStyle:"ds.title.block.medium",children:s("team_settings_encryption_service_generate_configuration_label")}),(0,f.tZ)(B.dDn,{gridArea:"description",as:o.nv,children:s("team_settings_encryption_service_generate_configuration_label_helper")}),(0,f.BX)(B.dDn,{gridArea:"button",children:[(0,f.tZ)(o.zx,{disabled:t||a,mood:e&&!i?"neutral":"brand",intensity:e&&!i?"quiet":"catchy",fullsize:!0,type:"submit",isLoading:a,children:s("team_settings_encryption_service_generate_configuration_button")}),i?null:l]}),e?(0,f.BX)(f.HY,{children:[(0,f.tZ)(B.dDn,{gridArea:"config",sx:{marginTop:"18px"},children:(0,f.tZ)(o.Kx,{"aria-labelledby":lx,readOnly:!0,disabled:i,value:e,feedback:n?{text:n}:void 0,error:!!n})}),(0,f.BX)(B.dDn,{as:o.kC,gridArea:"buttons",sx:{marginTop:"18px"},flexDirection:"column",gap:"8px",children:[(0,f.tZ)(eu.q,{disabled:i,copyValue:e,buttonText:s("input_copy_button"),fullsize:!0}),(0,f.tZ)(ox.o,{disabled:i,buttonText:s("team_settings_encryption_service_config_download_button"),downloadString:e,fileName:"dashlane-encryption-service-config.txt",fileType:"text/plain",fullsize:!0})]})]}):null]})};function dx(e){const t=(0,r.useMemo)((()=>e),[e]),[n,a]=(0,r.useState)(!1),[i,s]=(0,r.useState)(),o=(0,r.useCallback)((async()=>{const e={success:!1,error:{code:Y_.S}};try{return t?await fe.C.getTeamDevice({teamDeviceAccessKey:t}):e}catch{return e}}),[t]),l=(0,r.useCallback)((async(e=new AbortController)=>{e.signal.aborted||a(!0);const t=await o();return e.signal.aborted||(t.success&&s(t.data.teamDevice),a(!1)),t}),[o]);return(0,r.useEffect)((()=>{const e=new AbortController;return l(e),()=>{e.abort()}}),[l]),{teamDeviceLoading:n,teamDevice:i,refreshTeamDevice:l}}const _x={AWS:"https://support.dashlane.com/hc/articles/4404322174482-Dashlane-Encryption-Service-Overview-and-Setup?utm_source=extension#h_01FTXGN0C8B9HMKRD8J0BSYRAH","Microsoft Azure":"https://support.dashlane.com/hc/articles/4404322174482-Dashlane-Encryption-Service-Overview-and-Setup?utm_source=extension#h_01FTXGMVBAEK5GB0TZJ86K7ZWE"},ux=({context:e="GENERIC",...t})=>{var n,a;const{esConfig:i,esConfigLoading:s}=ix(),{teamDevice:l,teamDeviceLoading:c}=dx(i?.deviceAccessKey),[d,_]=(0,r.useState)(!1),{translate:u}=(0,g.Z)(),m={CONTENT:u.markup("team_settings_encryption_service_restart_failed_info_content_markup",{helpArticle:null!=(n=_x[null!=(a=i?.deploymentLocation)?a:""])?n:"",supportLink:"https://support.dashlane.com/hc/requests/new?utm_source=extension"},{linkTarget:"_blank"})},p={GENERIC:{TITLE:u("team_settings_encryption_service_restart_failed_info_title"),...m},SCIM:{TITLE:u("team_settings_encryption_service_restart_failed_info_title_scim"),...m},ES:{TITLE:u("team_settings_encryption_service_restart_failed_info_title_es"),...m},SSO:{TITLE:u("team_settings_encryption_service_restart_failed_info_title_sso"),...m}};return(0,r.useEffect)((()=>{if(!c&&!s&&l&&i){const t=!l.hasLatestConfig&&"GENERIC"===e||"GENERIC"!==e;_(t)}}),[l,i,c,s,e]),d?(0,f.tZ)(o.ke,{mood:"warning",size:"large",title:p[e].TITLE,description:p[e].CONTENT,actions:p[e].BUTTON?[(0,f.tZ)(o.zx,{mood:"brand",intensity:"catchy",onClick:()=>{_(!1)},children:p[e].BUTTON},"primary")]:void 0,...t}):null};var mx,px,gx,hx,yx;const bx="team_settings_encryption_service_enter_endpoint_placeholder_aws_linux",xx="_common_generic_error",Sx="https://",fx={AWS:"https://eu-west-1.console.aws.amazon.com/acm/home?region=eu-west-1#/welcome","Microsoft Azure":"https://portal.azure.com/#create/Microsoft.Template/uri/https%3A%2F%2Fget.dashlane.com%2Fazure%2Farm%2Fes%2Fazuredeploy.json"},vx={AWS:"https://support.dashlane.com/hc/articles/4404322174482-Dashlane-Encryption-Service-Overview-and-Setup?utm_source=extension#h_01FTXGN0C8B9HMKRD8J0BSYRAH","Microsoft Azure":"https://support.dashlane.com/hc/articles/4404322174482-Dashlane-Encryption-Service-Overview-and-Setup?utm_source=extension#h_01FTXGMVBAEK5GB0TZJ86K7ZWE"},Cx={AWS:"team_settings_encryption_service_go_to_label_helper_aws_markup","Microsoft Azure":"team_settings_encryption_service_go_to_label_helper_azure_markup"},Ex={AWS:"team_settings_encryption_service_enter_endpoint_helper_aws_linux","Microsoft Azure":"team_settings_encryption_service_enter_endpoint_helper_azure"},Zx={"Microsoft Azure":"team_settings_encryption_service_enter_endpoint_placeholder_azure",AWS:bx},Tx="config",Dx="deploymentLocation",kx="encryptionServiceEndpoint",Ix="ssoConnectorKey",Ax="-sso.azurewebsites.net",Nx=({migratingFromSSOConnector:e=!1,esConfig:t,onSave:n,teamSettings:a,updateTeamSettings:s})=>{var c,d,_;const[u,m]=(0,r.useState)(!1),[p,h]=(0,r.useState)(""),[y,b]=(0,r.useState)(!1),[x,S]=(0,r.useState)(!1),{translate:v}=(0,g.Z)(),{spaceDetails:C,teamId:E}=(0,Ce.fV)(),{initSsoProvisioning:Z}=(0,F.u)(Jy.y),T=null!=(c=C?.associatedEmail)?c:"",D=(0,i.k6)(),k=a?.ssoServiceProviderUrl,I={encryptionServiceEndpoint:(null!=k?k:"").replace(Sx,""),config:null!=(d=t?.config)?d:"",deploymentLocation:null!=(_=t?.deploymentLocation)?_:"",ssoConnectorKey:""},A=()=>D.goBack(),N=e=>e?null:v("team_settings_encryption_service_error_select_service"),w=e=>{const t=v("team_settings_encryption_service_error_invalid_ssoConnectorKey");try{const[t,n]=e.split("|"),a=atob(n);if(!t||!n||!a||36!==t.length||64!==a.length)throw new Error("Invalid key format")}catch{return t}return null},O=e=>{const t=v("team_settings_encryption_service_error_invalid_endpoint");if(!e)return t;let n;try{n=new URL(`${Sx}${e}`)}catch(e){return t}return"/"!==n.pathname||""!==n.search||""!==n.hash||n.href.includes("?")?t:null};return(0,f.tZ)(ea.J9,{onSubmit:async(t,{setFieldValue:a,setFieldTouched:i})=>{h(""),m(!0),S(!1);const{deploymentLocation:r,encryptionServiceEndpoint:o,ssoConnectorKey:c}=t;if(!r)return void i(Dx);if(e&&!c)return void i(Ix);a(Tx,"");const d=e=>e.replace(/\/$/,"").toLowerCase();try{const i={deploymentLocation:r,encryptionServiceEndpoint:Sx+d(o),updateTeamDeviceConfigParams:{}};e&&c&&(i.updateTeamDeviceConfigParams.ssoConnectorKey=c);const _=await fe.C.generateAndSaveEncryptionServiceConfig(i);if(!_.success)return void h(v(xx));const u=_.data.basicConfig;if(a(Tx,u.config),t[kx]!==I.encryptionServiceEndpoint&&(await s({ssoServiceProviderUrl:t[kx]?`${Sx}`+d(`${t[kx]}`):null}),await Z({teamId:`${E}`})),m(!1),_.data.encryptionServiceReloadingStatus!==rx.x.OK)return S(!0),b(!1),void n?.();ib({ssoSetupStep:l.SsoSetupStep.GenerateAndSaveConfiguration}),p||n?.()}catch(e){m(!1),h(v(xx))}},initialValues:I,onReset:A,children:n=>{var a,i;return(0,f.BX)(ea.l0,{autoComplete:"off",children:[(0,f.tZ)(sx.X,{dirty:n.dirty&&!u&&!x}),(0,f.BX)(B.Zbd,{children:[(0,f.tZ)(B.Ol2,{children:v("team_settings_encryption_service_header")}),(0,f.BX)(B.aYP,{children:[e?(0,f.BX)(f.HY,{children:[(0,f.BX)(B.T5p,{gridTemplateAreas:"'header header' 'description description' 'input button'",gridTemplateColumns:"1fr auto",gap:"10px",children:[(0,f.tZ)(B.dDn,{gridArea:"header",children:(0,f.tZ)(o.nv,{as:"h3",textStyle:"ds.title.block.medium",children:v("team_settings_encryption_service_migrate_sso_title")})}),(0,f.tZ)(B.dDn,{gridArea:"description",children:(0,f.tZ)(o.nv,{color:"ds.text.neutral.quiet",textStyle:"ds.body.standard.regular",children:v.markup("team_settings_encryption_service_migrate_sso_description_markup")})}),(0,f.tZ)(B.dDn,{gridArea:"input",children:(0,f.tZ)(ea.gN,{name:Ix,validate:w,children:({field:{onChange:e,...t},meta:{error:a,touched:i}})=>(0,f.tZ)(B.oil,{onChange:t=>{e(t)},id:"ssoConnectorKey",placeholder:v("team_settings_encryption_service_sso_connector_key_placeholder"),fullWidth:!0,feedbackText:i&&a?a:void 0,feedbackType:i&&a?"error":void 0,"aria-invalid":i&&!!a,readOnly:n.isSubmitting,...t})})})]}),mx||(mx=(0,f.tZ)("hr",{}))]}):null,(0,f.BX)(B.T5p,{gridTemplateAreas:"'label select' 'desc select'",gap:"8px",children:[(0,f.tZ)(B.dDn,{gridArea:"label",as:o.nv,innerAs:"label",htmlFor:"deploymentLocation",sx:{gridArea:"label"},textStyle:"ds.title.block.medium",children:v("team_settings_encryption_service_deploy_label")}),(0,f.tZ)(B.dDn,{gridArea:"desc",as:o.nv,children:v.markup("team_settings_encryption_service_deploy_label_helper_markup",{customerSupport:"https://support.dashlane.com/hc/requests/new?utm_source=extension"},{linkTarget:"_blank"})}),(0,f.tZ)(B.dDn,{gridArea:"select",children:(0,f.tZ)(ea.gN,{name:Dx,validate:N,children:({field:{onChange:e,...t},meta:{error:a,touched:i}})=>(0,f.tZ)(B.PhF,{onChange:t=>{n.setFieldValue(kx,((e,t)=>{if(!e||!t)return"";const n=e.replace(/.+@/,"");if("Microsoft Azure"===t){const[e,t,...a]=n.split(".").reverse(),i=t+Ax;return i.length<=42?i:t.slice(0,42-Ax.length)+Ax}return"AWS"===t?"dashlane-sso."+n:""})(T,t.target.value)),b(I.deploymentLocation!==t.target.value),ib({ssoSetupStep:l.SsoSetupStep.SelectEncryptionServicePlatform,encryptionServicePlatformSelected:"AWS"===t.target.value?l.EncryptionServicePlatformSelected.AmazonWebServices:l.EncryptionServicePlatformSelected.Azure}),e(t)},feedbackId:"deploymentLocationFeedback",selectId:"deploymentLocation",options:Object.keys(Ex),placeholder:v("team_settings_encryption_service_select_host"),intent:i&&a?"error":void 0,feedbackText:i&&a?a:void 0,readOnly:n.isSubmitting,...t})})})]}),px||(px=(0,f.tZ)("hr",{})),(0,f.BX)(B.T5p,{gridTemplateColumns:"auto",gap:"8px",children:[(0,f.tZ)(B.dDn,{as:o.nv,innerAs:"label",htmlFor:"endpointInput",textStyle:"ds.title.block.medium",children:v("team_settings_encryption_service_enter_endpoint_label")}),(0,f.tZ)(B.dDn,{as:o.nv,sx:{mb:"16px"},children:v(null!=(a=Ex[n.values[Dx]])?a:"team_settings_encryption_service_enter_endpoint_label_helper_no_selection")}),e?(0,f.BX)(o.nv,{children:[v("team_settings_encryption_service_current_endpoint_label")," ",k]}):null,(0,f.tZ)(ea.gN,{name:kx,validate:O,children:({field:{onChange:e,...t},meta:{error:a,touched:i},form:{values:{deploymentLocation:r}}})=>{var s;return(0,f.tZ)(B.oil,{sx:{pl:0},onChange:t=>{b(I.encryptionServiceEndpoint!==t.target.value),e(t)},startAdornment:gx||(gx=(0,f.tZ)(o.nv,{color:"ds.text.neutral.quiet",children:Sx})),id:"endpointInput",placeholder:v(null!=(s=Zx[r])?s:bx),fullWidth:!0,feedbackText:i&&a?a:void 0,feedbackType:i&&a?"error":void 0,"aria-invalid":i&&!!a,readOnly:n.isSubmitting,...t})}})]}),hx||(hx=(0,f.tZ)("hr",{})),x?(0,f.tZ)(ux,{sx:{marginBottom:"20px"},context:"ES"}):null,(0,f.tZ)(ea.gN,{name:Tx,children:({field:a,meta:i,form:{values:{deploymentLocation:r,ssoConnectorKey:s}}})=>{var o;return(0,f.tZ)(cx,{configRegenRequired:y,disabled:!r||e&&!s,lastGeneratedTimeStamp:t?.lastGeneratedTimeStamp,value:a.value,error:(null!=(o=i.error)?o:!n.isSubmitting&&y)?v("team_settings_encryption_service_config_regen_warning"):void 0,isLoading:u||n.isSubmitting})}}),yx||(yx=(0,f.tZ)("hr",{})),(0,f.BX)(B.T5p,{gridTemplateAreas:"'header button' 'description button'",gap:"8px",children:[(0,f.tZ)(B.dDn,{gridArea:"header",as:o.nv,textStyle:"ds.title.block.medium",children:v("team_settings_encryption_service_go_to_label")}),(0,f.tZ)(B.dDn,{gridArea:"description",as:o.nv,sx:{mb:"16px"},children:(i=n.values.deploymentLocation,i||(i="AWS"),v.markup(Cx[i],{setupGuide:vx[i]},{linkTarget:"_blank"}))}),(0,f.tZ)(B.dDn,{gridArea:"button",as:o.zx,type:"button",mood:n.values.config&&!y?"brand":"neutral",disabled:!n.values[Dx]||!n.values[Tx]||y,onClick:()=>{ib({ssoSetupStep:l.SsoSetupStep.AddConfigurationToServiceHost}),(0,X.Yo)(fx[n.values[Dx]])},icon:"ActionOpenExternalLinkOutlined",layout:"iconTrailing",sx:{gridArea:"button",height:"fit-content"},children:v("team_settings_encryption_service_go_to_button")})]})]}),(0,f.BX)(B.eWM,{flexWrap:"nowrap",children:[p?(0,f.tZ)(o.nv,{sx:{width:"40%",ml:0,mr:"auto"},textStyle:"ds.title.supporting.small",color:"ds.text.danger.standard",children:p}):null,(0,f.tZ)(o.zx,{mood:"neutral",intensity:"quiet",size:"large",type:"button",onClick:()=>A(),children:v("team_settings_encryption_service_button_cancel")})]})]})]})}})};var wx,Ox=n(91684);const Rx="team_settings_encryption_service_not_available",Lx=({config:e})=>{var t;const{translate:n}=(0,g.Z)(),{teamDevice:a,refreshTeamDevice:i,teamDeviceLoading:r}=dx(e.deviceAccessKey),s=n.markup("team_settings_encryption_service_tooltip_text_markup",{updateServiceUrl:"https://support.dashlane.com/hc/articles/360015973719"},{linkTarget:"_blank"},{color:"ds.text.inverse.catchy",hoverColor:"ds.text.brand.quiet",activeColor:"ds.text.brand.standard"});return(0,f.tZ)(Ox.R,{children:r?wx||(wx=(0,f.tZ)(o.ZX,{})):(0,f.BX)(o.kC,{flexDirection:"column",gap:"5px",children:[(0,f.tZ)(o.nv,{textStyle:"ds.body.reduced.regular",color:"ds.text.neutral.standard",children:`${n("team_settings_encryption_service_last_restart")}\n                    ${a?.lastStartDateUnix?(0,Bt.Z)(a.lastStartDateUnix).toLocaleString(navigator.language,{...Kt.qG.lll,timeZoneName:"short"}):n(Rx)}`}),(0,f.BX)(o.kC,{gap:"8px",children:[(0,f.tZ)(o.nv,{textStyle:"ds.body.reduced.regular",color:"ds.text.neutral.standard",children:`\n                   ${n("team_settings_encryption_service_version")}\n                   ${null!=(t=a?.version)?t:n(Rx)}\n                  `}),!1===a?.hasLatestVersion?(0,f.tZ)(o.u,{wrapTrigger:!0,content:s,children:(0,f.tZ)(o.Ct,{mood:"danger",iconName:"FeedbackWarningOutlined",layout:"iconLeading",label:n("team_settings_encryption_service_new_version")})}):null]}),(0,f.BX)(o.nv,{as:"a",color:"ds.text.brand.standard",sx:{textDecoration:"none",fontWeight:"normal"},onClick:()=>i(),textStyle:"ds.body.reduced.regular",children:[(0,f.tZ)(o.JO,{sx:{display:"inline",marginRight:"5px"},name:"ActionRefreshOutlined",size:"xsmall",color:"ds.text.brand.standard"}),n("team_settings_encryption_service_refresh")]})]})})};var Mx;const Bx=({esConfig:e,loading:t,parentPath:n,disableSetupButton:a})=>{const{translate:r}=(0,g.Z)(),s=(0,i.k6)(),c=!e&&!t;return(0,f.tZ)(B.Zbd,{children:(0,f.BX)(B.T5p,{as:B.aYP,gridTemplateAreas:"'header button' 'description button' 'status .'",gridTemplateColumns:"1fr auto",gap:"8px",sx:{bg:"white",border:"none"},children:[(0,f.BX)(B.dDn,{gridArea:"header",children:[e?null:(0,f.tZ)(o.X6,{as:"h3",color:"ds.text.neutral.quiet",textStyle:"ds.title.supporting.small",children:r("team_settings_encryption_service_get_started")}),(0,f.tZ)(o.X6,{as:"h3",textStyle:"ds.title.section.medium",children:r("team_settings_encryption_service_header")})]}),(0,f.BX)(B.dDn,{gridArea:"description",children:[(0,f.tZ)(o.nv,{textStyle:"ds.title.block.small",color:"ds.text.neutral.quiet",children:r("team_settings_encryption_service_description")}),Mx||(Mx=(0,f.tZ)("br",{})),(0,f.tZ)(o.nv,{as:"a",textStyle:"ds.title.block.small",href:"https://support.dashlane.com/hc/articles/360013149040#why-encryption",color:"ds.text.brand.standard",rel:"noopener noreferrer",target:"_blank",children:r("team_settings_encryption_service_more_info_link")})]}),(0,f.tZ)(B.dDn,{id:"esSetupButton",as:o.zx,disabled:t||a,mood:c?"brand":"neutral",intensity:c?"catchy":"quiet",gridArea:"button",type:"button",alignSelf:"center",size:"large",onClick:()=>{ib({ssoSetupStep:l.SsoSetupStep.SetUpEncryptionServiceSettings}),s.push(`${n}/encryption-service-settings`)},isLoading:t,children:r(e?"team_settings_button_edit_label":"team_settings_encryption_service_set_up")}),e?(0,f.tZ)(B.dDn,{gridArea:"status",sx:{mt:"20px"},children:(0,f.tZ)(Lx,{config:e})}):null]})})};var Px=n(79869),Ux=n(47418);const zx=({actions:e,endIcon:t,fieldName:n,feedbackType:a,feedbackText:i,handleAdd:r,...s})=>{const[{value:{name:o},onBlur:l,...c},{error:d},{setValue:_}]=(0,ea.U$)(n),u=o?null!=i?i:d:void 0,m=(null!=a?a:u)?"error":void 0;return(0,f.tZ)(Ux.h,{textInputProps:{id:n,endAdornment:t,feedbackText:u,feedbackType:m,fullWidth:!0,value:o,...c,...s,onChange:({currentTarget:{value:e}})=>{_({name:e})},onKeyPress:e=>{"Enter"===e.key&&(r(),e.preventDefault(),e.stopPropagation())},onBlur:e=>{e.currentTarget.value&&!e.currentTarget.readOnly&&r(),l?.(e)}},tooltipProps:{passThrough:!0},replacementActions:e})};var Xx,qx,jx,Gx;const{accessibleValidatorGreen:Fx,orange00:Vx,dashGreen02:Hx}=B.colors,Wx="team_settings_domain_register_invalid_error",$x=({fieldArrayName:e,domainLoadError:t,refreshDomains:n})=>{const{translate:a}=(0,g.Z)(),{values:i}=(0,ea.u6)(),[s,l]=(0,r.useState)({}),[c,d]=(0,r.useState)({}),[_,u]=(0,r.useState)(""),[m,p]=(0,r.useState)(null),h=(e,t)=>{l((n=>({...n,[e]:t})))},y=async t=>{await(async t=>{const n=t.trim();if(!Od().isFQDN(n))throw new Error(a(Wx));if(i[e].reduce(((e,t)=>t.name===n?e+1:e),0)>1)throw new Error(a("team_settings_domain_register_duplicated_error"));(e=>{d((t=>({...t,[e]:!0})))})(t);const r=await fe.C.registerTeamDomain({domain:n});var s;if((e=>{d((({[e]:t,...n})=>n))})(t),!r.success)throw new Error(a(null!=(s={INVALID_PUBLIC_DOMAIN:"team_settings_domain_register_public_error",DOMAIN_CONTAINS_EXISTING_NONTEAM_USERS:"team_settings_domain_register_contact_support"}[r.error.code])?s:Wx))})(t.name),await n()};return t?(0,f.tZ)(o.kC,{fullWidth:!0,justifyContent:"center",children:(0,f.tZ)(B.j49,{color:"errors.4",children:t})}):(0,f.BX)(f.HY,{children:[(0,f.tZ)(B.nvN,{as:"label",htmlFor:`${e}.${i[e].length-1}`,bold:!0,sx:{display:"inline-block",mb:"8px"},children:a("team_settings_domain_title")}),(0,f.tZ)(B.nvN,{size:"small",sx:{mb:"24px"},children:a("team_settings_es_sso_setup_domain_description")}),(0,f.tZ)(ea.F2,{name:e,children:e=>(0,f.tZ)(B.T5p,{justifyContent:"stretch",gridTemplateColumns:"auto",gap:"8px",gridAutoRows:"auto",children:i[e.name].map(((t,n)=>{var r,l;const d=c[t.name],_=t.status===Ql.p.valid,m=t.status===Ql.p.pending||t.status===Ql.p.invalid||t.status===Ql.p.expired,g=d?Xx||(Xx=(0,f.tZ)(o.ZX,{size:"medium"})):_?qx||(qx=(0,f.tZ)(B.rE2,{color:Fx})):m?(0,f.tZ)(B.enX,{color:t.status===Ql.p.pending?Hx:Vx}):void 0;return(0,f.tZ)(f.HY,{children:(0,f.tZ)(zx,{placeholder:a("team_settings_es_sso_domain_url_placeholder"),fieldName:`${e.name}.${n}`,readOnly:null!=(l=!!t.status)?l:d,autoFocus:n===i[e.name].length-1,endIcon:g,feedbackType:!t.status&&s[t.name]?"error":void 0,feedbackText:t.status?void 0:s[t.name],handleAdd:async()=>{try{await y(t),u(t.name)}catch(e){h(t.name,e.message)}},actions:(0,f.BX)(f.HY,{children:[t.status===Ql.p.pending||void 0===t.status?(0,f.tZ)(B.zxk,{nature:"secondary",type:"button",disabled:d,onClick:()=>(async e=>{try{void 0===e.status&&await y(e),u(e.name)}catch(t){h(e.name,t.message)}})(t),children:a(void 0===t.status?"team_settings_es_sso_setup_add_domain":"team_settings_es_sso_setup_verify_button")}):null,t.name.length&&void 0!==t.status?(0,f.tZ)(Px.h,{nature:"secondary",type:"button",disabled:d,onClick:()=>p(t),icon:jx||(jx=(0,f.tZ)(B.XHJ,{}))}):null]})})},`${e.name}.${null!=(r=t.id)?r:n}`)}))})}),Gx||(Gx=(0,f.tZ)(Bb,{})),_?(0,f.tZ)(o_,{domainName:_,onSuccess:async()=>{u(""),await n()},onDismiss:()=>u("")}):null,m?(0,f.tZ)(Bd,{domain:m,onDismiss:()=>p(null),onConfirm:async()=>{await(async e=>{if(!e)return;const t=await fe.C.deactivateTeamDomain({domain:e});return t.success?void 0:t.error.code})(m.name),await n()}}):null]})};var Yx;const Kx=({inputValue:e,labelText:t,disabled:n,loading:a,id:i})=>(0,f.tZ)(a_.x,{inputValue:e,textInputProps:{fullWidth:!0,readOnly:!0,disabled:n,id:i,startAdornment:a?Yx||(Yx=(0,f.tZ)(o.ZX,{})):void 0,label:(0,f.tZ)(B.nvN,{as:"label",bold:!0,sx:{mb:"4px"},htmlFor:i,children:t})},iconButtonProps:{disabled:n}}),Qx=e=>{const t=(0,r.useMemo)((()=>{var t,n;return{draft:null!=(t=e?.draft)&&t,deviceAccessKey:null!=(n=e?.deviceAccessKey)?n:""}}),[e?.draft,e?.deviceAccessKey]),[n,a]=(0,r.useState)(!0),[i,s]=(0,r.useState)(null),[o,l]=(0,r.useState)(null),c=(0,r.useCallback)((async()=>{try{return await fe.C.getTeamDeviceEncryptedConfig(t)}catch{return{success:!1,error:{code:Y_.S}}}}),[t]),d=(0,r.useCallback)((async(e=new AbortController)=>{e.signal.aborted||a(!0);const t=await c();return e.signal.aborted||(s(t.success?null:t.error.code),t.success&&l(t.data),a(!1)),t}),[c]),_=(0,r.useCallback)((async e=>{a(!0);try{return await fe.C.updateTeamDeviceEncryptedConfig(e)}catch{return{success:!1,error:{code:Y_.S}}}finally{a(!1)}}),[]);return(0,r.useEffect)((()=>{const e=new AbortController;return d(e),()=>{e.abort()}}),[d]),{teamDeviceConfigLoading:n,loadTeamDeviceConfigErrorCode:i,teamDeviceConfig:o,updateTeamDeviceConfig:_,refreshTeamDeviceConfig:d}};var Jx,eS,tS,nS;const{grey00:aS}=B.colors,iS="team_settings_es_sso_setup_header",rS="team_settings_domain_fetch_error",sS={GENERIC_ERROR:"_common_generic_error"},oS=e=>e?`${e}/saml/callback`:"",lS="ssoIdpMetadata",cS=()=>{var e;const{translate:t}=(0,g.Z)(),{teamId:n}=(0,Ce.fV)(),{updateTeamDeviceConfig:a}=Qx(),[s,l]=(0,r.useState)(!1),[c,d]=(0,r.useState)(!1),[_,u]=(0,r.useState)([]),m=(0,r.useRef)(null),[p,h]=(0,r.useState)(!1),[y,b]=(0,r.useState)(""),{teamSettings:x={},teamSettingsLoading:S}=ve(n),{ssoIdpMetadata:v,ssoServiceProviderUrl:C=""}=x,E=(0,i.k6)(),Z=(0,r.useCallback)((async()=>{try{b("");const e=await fe.C.getTeamDomains();if(e.success){const t=e.domains.length?e.domains:[];u([...t,{name:"",id:0}])}else b(t(rS))}catch(n){var e;b(null!=(e=n.message)?e:t(rS))}}),[t]);(0,r.useEffect)((()=>{h(!0),Z().then((()=>h(!1)))}),[Z]);const T={domains:_,ssoIdpMetadata:null!=(e=null!=v?v:m.current?.value)?e:""},D=()=>E.goBack();return S||p?(0,f.BX)(B.Zbd,{children:[(0,f.tZ)(B.Ol2,{children:t(iS)}),Jx||(Jx=(0,f.tZ)(B.aYP,{children:(0,f.tZ)(o.kC,{fullWidth:!0,justifyContent:"center",children:(0,f.tZ)(o.ZX,{size:60})})}))]}):(0,f.tZ)(ea.J9,{onSubmit:async(e,n)=>{try{var i;l(!0),d(!1);const r=await a({ssoEnabled:!0,[lS]:e[lS],connectorEndpoint:C||void 0,teamDeviceUrl:null!=(i=x.ssoServiceProviderUrl)?i:void 0});if(!r.success){const e=r.error.code.toUpperCase();if("DEACTIVATED_TEAM_DEVICE"===e)return;const a=t(sS[e]?sS[e]:sS.GENERIC_ERROR);return void n.setFieldError(lS,a)}if(r.data.encryptionServiceReloadingStatus!==rx.x.OK)return void d(!0);D()}catch(e){n.setFieldError(lS,t(sS.GENERIC_ERROR)),l(!1)}},initialValues:T,enableReinitialize:!0,children:({isSubmitting:e,dirty:n})=>{return(0,f.BX)(ea.l0,{autoComplete:"off",noValidate:!0,children:[(0,f.tZ)(sx.X,{dirty:n&&!s&&!c}),(0,f.BX)(B.Zbd,{children:[(0,f.tZ)(B.Ol2,{children:t(iS)}),(0,f.BX)(B.aYP,{children:[(0,f.tZ)($x,{fieldArrayName:"domains",domainLoadError:y,refreshDomains:Z}),eS||(eS=(0,f.tZ)("hr",{})),(0,f.tZ)(o.ke,{title:t.markup("team_settings_es_sso_setup_copy_info_to_idp_markup"),sx:{mb:"32px"}}),(0,f.BX)(B.T5p,{justifyContent:"stretch",gridTemplateColumns:"auto",gap:"32px",gridAutoRows:"auto",children:[(0,f.tZ)(Kx,{id:"entity-id-input",inputValue:(a=C,a?`${a}/saml/`:""),labelText:t("team_settings_es_sso_entity_id_label"),disabled:S||!C,loading:S}),(0,f.tZ)(Kx,{id:"acs-url-input",inputValue:oS(C),labelText:t("team_settings_es_sso_acs_url_label"),disabled:S||!C,loading:S})]}),tS||(tS=(0,f.tZ)("hr",{})),(0,f.tZ)(B.nvN,{as:"label",bold:!0,htmlFor:"sso-metadata-input",children:t("team_settings_es_sso_metadata_label")}),(0,f.tZ)(B.nvN,{size:"small",color:aS,sx:{mt:"8px",mb:"24px"},children:t("team_settings_es_sso_metadata_description")}),(0,f.tZ)(ea.gN,{name:lS,children:({field:e,meta:{error:t,touched:n}})=>(0,f.tZ)(B.oil,{id:"sso-metadata-input",sx:{height:"10em",resize:"vertical"},...e,ref:m,multiline:!0,fullWidth:!0,feedbackText:n&&t?t:void 0,feedbackType:n&&t?"error":void 0})})]}),(0,f.BX)(B.eWM,{children:[c?(0,f.tZ)(o.kC,{sx:{flexGrow:1,justifyContent:"center"},children:nS||(nS=(0,f.tZ)(ux,{context:"SSO"}))}):null,(0,f.tZ)(B.zxk,{disabled:e,nature:"secondary",size:"large",type:"button",onClick:D,children:t("team_settings_es_sso_setup_cancel")}),(0,f.tZ)(B.zxk,{disabled:e,nature:"primary",type:"submit",size:"large",children:t("team_settings_es_sso_setup_save")})]})]})]});var a}})};var dS=n(73670);const{grey00:_S}=B.colors,uS="team_settings_enable_sso_test_button",mS=({actionsDisabled:e,ssoServiceProviderUrl:t})=>{const{translate:n}=(0,g.Z)(),a=t?`${t}/saml/login?redirect=test_idp`:"";return(0,f.BX)(B.T5p,{gap:"8px",gridTemplateAreas:"'header buttons' 'description buttons' ",gridTemplateColumns:"1fr auto",children:[(0,f.tZ)(B.dDn,{as:B.nvN,innerAs:"h3",size:"large",bold:!0,gridArea:"header",children:n("team_settings_enable_sso_test_title")}),(0,f.tZ)(B.dDn,{gridArea:"description",as:B.nvN,size:"small",color:_S,children:n("team_settings_enable_sso_test_description")}),(0,f.BX)(B.T5p,{gap:"8px",gridTemplateAreas:"'test copy'",as:B.dDn,gridArea:"buttons",children:[(0,f.tZ)(B.dDn,{gridArea:"test",children:(0,f.BX)(dS.M,{onClick:()=>{(0,X.Yo)(a)},size:"medium","aria-label":n(uS),disabled:null!=e?e:!a,content:n("team_settings_es_sso_setup_incomplete"),children:[n(uS),(0,f.tZ)(B.RTC,{sx:{ml:"4px"},color:"white"})]})}),(0,f.tZ)(B.dDn,{gridArea:"copy",children:(0,f.tZ)(eu.q,{buttonText:n("team_settings_copy_sso_url_button"),disabled:null!=e?e:!a,copyValue:null!=a?a:""})})]})]})},pS=({closeDialog:e})=>{const{translate:t}=(0,g.Z)();return(0,f.tZ)(yi.o,{isOpen:!0,onRequestClose:()=>e(jd.dismiss),footer:(0,f.tZ)(B.cNS,{primaryButtonTitle:t("team_settings_enable_sso_dialog_disable_action"),primaryButtonOnClick:()=>e(jd.action),secondaryButtonTitle:t("team_settings_enable_sso_cancel"),secondaryButtonOnClick:()=>e(jd.dismiss),intent:"danger"}),title:t("team_settings_enable_sso_dialog_disable_title"),children:t("team_settings_enable_sso_dialog_disable_description")})};var gS;const{grey00:hS}=B.colors,yS=({actionsDisabled:e,ssoEnabled:t,updateTeamSettings:n,loading:a})=>{const{translate:i}=(0,g.Z)(),[s,c]=(0,r.useState)(!1),[d,_]=(0,r.useState)(!1),u=(0,ta.V)(),{initSsoProvisioning:m}=(0,F.u)(Jy.y),{teamId:p}=(0,Ce.fV)(),h=()=>{u.showAlert(t?i("_common_generic_error"):i.markup("team_settings_enable_sso_action_toggle_warning_markup",void 0,{linkTarget:"_blank"}),B.BLW.ERROR)};return(0,f.BX)(f.HY,{children:[(0,f.BX)(B.T5p,{gap:"8px",gridTemplateAreas:"'header buttons' 'description toggle' ",gridTemplateColumns:"1fr auto",children:[(0,f.tZ)(B.dDn,{as:B.nvN,innerAs:"h3",size:"large",bold:!0,gridArea:"header",children:i("team_settings_enable_sso_action_title")}),(0,f.BX)(B.dDn,{gridArea:"description",as:B.nvN,size:"small",color:hS,children:[i("team_settings_enable_sso_action_description"),gS||(gS=(0,f.tZ)("br",{})),i("team_settings_enable_sso_action_description_note")]}),(0,f.tZ)(B.dDn,{gridArea:"toggle",children:(0,f.tZ)(o.ZD,{disabled:e||a,checked:t,onChange:async()=>{t?c(!0):(_(!0),ib({ssoSetupStep:l.SsoSetupStep.TurnOnSso}))}})})]}),s?(0,f.tZ)(pS,{closeDialog:async e=>{if(c(!1),e!==jd.dismiss&&p)try{const e=!t;await n({ssoEnabled:e}),await m({teamId:p})}catch(e){h()}}}):null,d?(0,f.tZ)(Ib,{title:i("team_settings_enable_sso_confirm_dialog_title"),body:i("team_settings_enable_sso_confirm_dialog_body"),primaryActionLabel:i("team_settings_enable_sso_confirm_dialog_primary_action_label"),onCancel:()=>{_(!1)},onConfirm:async()=>{await(async()=>{if(p)try{await n({ssoEnabled:!0}),await m({teamId:p}),ib({ssoSetupStep:l.SsoSetupStep.CompleteSsoSetup})}catch(e){h()}})(),_(!1)}}):null]})};var bS;const{grey00:xS}=B.colors;var SS=function(e){return e.UNKNOWN="UNKNOWN",e.LOADING="LOADING",e.COMPLETE="COMPLETE",e.INCOMPLETE="INCOMPLETE",e.NOT_STARTED="NOT_STARTED",e.UNAVAILABLE="UNAVAILABLE",e.ERROR="ERROR",e}(SS||{});const fS=[eb.s5.enum.NitroComplete,eb.s5.enum.NitroIncomplete],vS=({disableSetupButton:e,isSsoCapable:t})=>{var n;const{translate:a}=(0,g.Z)(),{teamId:s}=(0,Ce.fV)(),{teamSettings:o={},updateTeamSettings:l,teamSettingsLoading:d}=ve(s),{ssoEnabled:_=!1,ssoServiceProviderUrl:u="",ssoIdpMetadata:m}=o,[p,h]=(0,r.useState)(SS.UNKNOWN),y=(0,c.k)(Jy.y,"ssoProvisioning"),b=null!=(n=y.data?.global.inferredSsoState)?n:eb.s5.enum.Unknown;(0,r.useEffect)((()=>{h(SS.LOADING),fe.C.getTeamDomains().then((e=>{if(!e.success)return void h(SS.ERROR);const t=fS.includes(b);if(!u||t)return void h(SS.UNAVAILABLE);const n=e.domains.some((({status:e})=>"valid"===e)),a=e.domains.length>0,i=!!m;switch(!0){case n&&i:h(SS.COMPLETE);break;case!a&&i||a&&!i||!n&&a&&i:h(SS.INCOMPLETE);break;case!a&&!i:h(SS.NOT_STARTED)}}))}),[b,m,u]);const x=p===SS.UNAVAILABLE||d||e,{path:S}=(0,i.$B)(),v=(0,i.k6)(),C=[SS.COMPLETE,SS.INCOMPLETE].includes(p);return(0,f.BX)(B.Zbd,{children:[(0,f.BX)(B.T5p,{as:B.aYP,gridTemplateAreas:"'header button' 'description button'",gridTemplateColumns:"1fr auto",gap:"8px",sx:{bg:"white",border:"none"},children:[(0,f.tZ)(B.dDn,{as:B.nvN,innerAs:"h3",size:"large",bold:!0,gridArea:"header",children:a("team_settings_es_sso_setup_header")}),(0,f.tZ)(B.dDn,{gridArea:"description",as:B.nvN,size:"small",color:xS,children:a("team_settings_es_sso_setup_description")}),(0,f.tZ)(B.dDn,{gridArea:"button",alignSelf:"center",children:(0,f.tZ)(dS.M,{id:"ssoSetupButton",loading:d||p===SS.LOADING,disabled:x,type:"button",size:"large",onClick:()=>{v.push(`${S}/sso-settings`)},content:a("team_settings_es_sso_setup_configure_es_tooltip"),neverShowTooltip:!t,mood:C?"neutral":"brand",intensity:C?"quiet":"catchy",children:a(C?"team_settings_button_edit_label":"team_settings_es_sso_setup_button")})})]}),C?(0,f.BX)(B.aYP,{sx:{bg:"white"},children:[(0,f.tZ)(mS,{actionsDisabled:p!==SS.COMPLETE,ssoServiceProviderUrl:u}),bS||(bS=(0,f.tZ)("br",{})),(0,f.tZ)(yS,{actionsDisabled:p!==SS.COMPLETE,ssoEnabled:_,loading:d,updateTeamSettings:l})]}):null]})};var CS,ES,ZS;const{dashDarkerGreen00:TS,dashGreen00:DS,dashGreen06:kS,midGreen00:IS}=B.colors,AS=({backRoute:e})=>{const{translate:t}=(0,g.Z)(),{path:n}=(0,i.$B)(),{esConfig:a,esConfigLoading:r,refreshEncryptionServiceConfig:s}=ix(),{teamId:d}=(0,Ce.fV)(),{teamSettings:_,updateTeamSettings:u,teamSettingsLoading:m}=ve(d),{status:p,data:h}=(0,c.k)(Jy.y,"ssoProvisioning");if(p!==Ze.rq.Success)return null;const{global:{ssoCapable:y,inferredSsoState:b},enableSSO:{ssoEnabled:x}}=h,S=b===eb.s5.enum.NitroIncomplete,v=!x,C=b===eb.s5.enum.SsoConnectorToSelfHostedMigration;return(0,f.BX)(B.T5p,{gridTemplateColumns:"auto",gridTemplateRows:"auto 1fr",fullWidth:!0,sx:{height:"100%"},children:[(0,f.BX)("div",{sx:{bg:kS,px:"48px",pt:"32px",pb:"4px"},children:[(0,f.tZ)(Oo,{title:t("team_settings_es_sso_title")}),v?(0,f.BX)(B.rUS,{color:IS,hoverColor:DS,activeColor:TS,onClick:()=>{ib({ssoSetupStep:l.SsoSetupStep.ReturnToSsoSelection}),(0,i.uX)(e)},sx:{fontSize:"16px",display:"flex",textDecoration:"none",marginTop:"-18px"},children:[(0,f.tZ)(o.JO,{name:"ArrowLeftOutlined",size:"small",color:DS,sx:{marginRight:"10px"}})," ","Back"]}):null]}),(0,f.tZ)(ni,{mainContent:(0,f.tZ)(B.T5p,{gridTemplateColumns:"auto",gridAutoRows:"min-content",gap:"32px",children:(0,f.BX)(i.rs,{children:[(0,f.BX)(i.AW,{exact:!0,path:n,children:[(0,f.tZ)(ub,{pageContext:_b.SelfHosted,onSetupClear:()=>u({ssoServiceProviderUrl:null})}),CS||(CS=(0,f.tZ)(ux,{})),C?(0,f.tZ)(o.ke,{title:t("team_settings_es_sso_migration_infobox_title"),description:t("team_settings_es_sso_migration_infobox_body")}):null,(0,f.tZ)(Bx,{loading:r||null===y,esConfig:a,parentPath:n,disableSetupButton:!y||S}),(0,f.tZ)(vS,{isSsoCapable:y,disableSetupButton:!y||!a?.config})]}),(0,f.tZ)(i.AW,{path:`${n}/encryption-service-settings`,children:r||m?ES||(ES=(0,f.tZ)(o.ZX,{})):(0,f.tZ)(Nx,{migratingFromSSOConnector:C,onSave:()=>s(),teamSettings:_,updateTeamSettings:u,esConfig:a})}),(0,f.tZ)(i.AW,{path:`${n}/sso-settings`,children:ZS||(ZS=(0,f.tZ)(cS,{}))})]})}),secondaryContent:(0,f.tZ)(rl,{description:t("team_settings_es_sso_setup_guide_description"),heading:t("team_settings_es_sso_setup_guide_heading"),linkText:t("team_settings_es_sso_setup_guide_link_text"),linkProps:{linkType:il.ExternalLink,linkHref:"https://support.dashlane.com/hc/articles/360013149040"}})})]})},NS=({closeDialog:e})=>{const{translate:t}=(0,g.Z)(),n=t.markup("team_settings_sso_desktop_infobox_warning_markup",{learnMore:ae.rh},{linkTarget:"_blank"});return(0,f.tZ)(B.VqE,{closeIconName:t("_common_dialog_dismiss_button"),isOpen:!0,onClose:()=>e(jd.dismiss),children:(0,f.BX)("div",{className:"container--m6KmsQvg_3",children:[(0,f.tZ)(B.$N8,{title:t("team_settings_enable_sso_dialog_activate_title")}),(0,f.tZ)(B.a7O,{children:(0,f.tZ)("div",{className:"toggleInfoBox--y5TmWAMYcl",children:n&&(0,f.tZ)(B.vDh,{severity:"warning",size:"small",title:n})})}),(0,f.tZ)(B.cNS,{primaryButtonOnClick:()=>e(jd.action),primaryButtonTitle:t("team_settings_enable_sso_dialog_activate_action"),secondaryButtonOnClick:()=>e(jd.dismiss),secondaryButtonTitle:t("team_settings_enable_sso_cancel")})]})})},wS=({closeDialog:e})=>{const{translate:t}=(0,g.Z)();return(0,f.tZ)(yi.o,{isOpen:!0,onRequestClose:()=>e(jd.dismiss),footer:(0,f.tZ)(B.cNS,{primaryButtonTitle:t("team_settings_enable_sso_dialog_disable_action"),primaryButtonOnClick:()=>e(jd.action),secondaryButtonTitle:t("team_settings_enable_sso_cancel"),secondaryButtonOnClick:()=>e(jd.dismiss),intent:"danger"}),title:t("team_settings_enable_sso_dialog_disable_title"),children:t("team_settings_enable_sso_dialog_disable_description")})},OS=({teamSettings:e,updateTeamSettings:t,teamId:n,planTier:a,setStepComplete:i})=>{var s;const[o,l]=(0,r.useState)(null!=(s=e?.ssoEnabled)&&s),[c,d]=(0,r.useState)(!1),[_,u]=(0,r.useState)(!1),[m,p]=(0,r.useState)([]),[h,y]=(0,r.useState)(!1);(0,r.useEffect)((()=>{if(!o)return"legacy"===a||"team"===a?y(!0):void 0;i(Xd.EnableSSO)}),[n,m,o,a,i]),(0,r.useEffect)((()=>{(async()=>{const e=await fe.C.getTeamDomains();e.success&&p(e.domains.filter((e=>"valid"===e.status)).map((e=>e.name)))})()}),[]);const{translate:b}=(0,g.Z)(),x=async e=>{if(u(!1),e!==jd.dismiss)try{const e=!o;await t({ssoEnabled:e}),l(e)}catch(e){d(!0)}};return(0,f.BX)("div",{className:"enableSSOContainer--VLsANoM8AQ",children:[(0,f.tZ)(zd,{label:b("team_settings_enable_sso_test_title"),labelHelper:b("team_settings_enable_sso_test_description"),children:(0,f.tZ)(B.zxk,{type:"button",nature:"primary",onClick:()=>{(0,X.Yo)(`${e?.ssoServiceProviderUrl}/saml/login?redirect=test_idp`)},disabled:!(e&&e.ssoServiceProviderUrl),children:b("team_settings_enable_sso_test_button")})}),(0,f.tZ)(zd,{label:b("team_settings_enable_sso_action_title"),labelHelper:b("team_settings_enable_sso_action_description"),children:h?(0,f.tZ)(B.zxk,{nature:"primary",onClick:()=>(0,X.Yo)(ae.Bw),type:"button",children:b("team_settings_enable_sso_contact_support")}):(0,f.BX)("div",{children:[(0,f.tZ)(B.ZDl,{onClick:()=>u(!0),checked:o,disabled:c}),o?(0,f.tZ)("div",{className:"toggleDescription--S3OccP6JDd",children:b("team_settings_enable_sso_action_toggle_description")}):null,c?(0,f.tZ)("div",{className:"toggleWarning--TU8a__FJDp",children:b.markup("team_settings_enable_sso_action_toggle_warning_markup")}):null]})}),_?o?(0,f.tZ)(wS,{closeDialog:x}):(0,f.tZ)(NS,{closeDialog:x}):null]})};var RS=n(68197);const LS=({isTeamSettingsLoading:e,teamSettings:t})=>{const{translate:n}=(0,g.Z)(),[a,i]=r.useState(""),[s,o]=r.useState(""),[l,c]=r.useState(""),d=t?.ssoServiceProviderUrl;return r.useEffect((()=>{!e&&d&&(i((0,RS.UQ)(d,"saml")),o((0,RS.UQ)(d,"saml/")),c((0,RS.UQ)(d,"saml/callback")))}),[e,d]),(0,f.BX)("div",{className:"configureIDPContainer--ACoVdM7s0N",children:[(0,f.tZ)(zd,{label:n("team_settings_configure_idp_connector_metadata"),centerLabel:!0,children:(0,f.tZ)(a_.x,{inputValue:a,textInputProps:{fullWidth:!0,readOnly:!0}})}),(0,f.tZ)(zd,{label:n("team_settings_configure_idp_entity_id"),centerLabel:!0,children:(0,f.tZ)(a_.x,{inputValue:s,textInputProps:{fullWidth:!0,readOnly:!0}})}),(0,f.tZ)(zd,{label:n("team_settings_configure_idp_login_url"),centerLabel:!0,children:(0,f.tZ)(a_.x,{inputValue:l,textInputProps:{fullWidth:!0,readOnly:!0}})})]})};var MS=n(98783),BS=n.n(MS);const PS="connectorInfoContainer--e07d9cT8Hu",US="textField--Nk7DpcX8Pp",zS="loading--sfYFOqhXPS",XS="installerButtonContainer--iP6MNTnQrn",qS="errorText--snbBoX2meA",jS=({keyValue:e,onGenerateClicked:t,isGeneratorDisabled:n,generatorDisabledText:a})=>{const{translate:i}=(0,g.Z)(),[s,o]=(0,r.useState)(!1),l=(0,r.useRef)(null);return(0,r.useEffect)((()=>{l.current&&new(BS())(l.current,{text:()=>e})}),[e]),(0,f.tZ)(zd,{label:i("team_settings_connector_generator_title"),labelHelper:i("team_settings_connector_generator_description"),children:(0,f.tZ)("div",{className:"generatorContainer--_83Buo4tVF",children:(0,f.tZ)(B.ua7,{content:a,passThrough:!n,sx:{maxWidth:"210px"},children:(0,f.BX)("div",{className:n?"generatorDisableContent--Olv4UpdAqY":"",children:[(0,f.tZ)(B.zxk,{type:"button","aria-describedby":"errorKeyWarning",className:"generatorButton--I0z2qEK25R",onClick:()=>{o(!0),t()},disabled:n,children:i("team_settings_connector_generator_button")}),(0,f.tZ)("div",{className:"generatorInputContainer--M4lkXUrCCY",children:(0,f.tZ)(a_.x,{inputValue:e,textInputProps:{readOnly:!0,fullWidth:!0,disabled:n,style:{cursor:n?"not-allowed":"text"}},tooltipProps:{passThrough:n},iconButtonProps:{disabled:n}})}),s&&(0,f.tZ)("p",{id:"errorKeyWarning",className:qS,children:i("team_settings_connector_generator_warning")})]})})})})},GS="team_settings_connector_installer_tooltip",FS=({isTeamSettingsLoading:e,isSsoEnabled:t,idpMetadata:n,connectorUrl:a})=>{const{translate:i}=(0,g.Z)(),[s,o]=(0,r.useState)(""),[l,c]=(0,r.useState)("");(0,r.useEffect)((()=>{o("")}),[n,a]);const d=Boolean(n&&a&&(l||t));return(0,f.BX)(f.HY,{children:[(0,f.tZ)(jS,{keyValue:l,onGenerateClicked:async()=>{const e=await fe.C.generateSSOConnectorKey();c(e)},isGeneratorDisabled:t,generatorDisabledText:i("team_settings_connector_generator_instance_help")}),(0,f.tZ)(zd,{label:i("team_settings_connector_installer_title"),labelHelper:i("team_settings_connector_installer_description"),children:(0,f.tZ)("div",{className:e?zS:XS,children:(0,f.BX)(B.ua7,{content:i(GS),passThrough:d,sx:{maxWidth:"210px"},children:[(0,f.BX)(B.zxk,{type:"button","aria-describedby":"configError",disabled:!d,onClick:async()=>{o("");const e=await fe.C.createSSOConnectorConfig({connectorUrl:a,connectorKey:l,idpMetadata:n});e.success?(0,ao.S)(e.config,"dashlane-sso-config.txt","text/plain"):e.success||o(e.error.code)},children:[(0,f.tZ)("div",{className:"downloadIcon--dtf6SHkd51",children:(0,f.tZ)(B._8t,{color:Md()["--white"]})}),i("team_settings_connector_installer_config_button")]}),s?(0,f.tZ)("p",{id:"configError",className:qS,children:i("team_settings_connector_installer_error")}):null]})})}),(0,f.tZ)(zd,{label:i("team_settings_connector_installer_setup_title"),labelHelper:i("team_settings_connector_installer_setup_description"),children:(0,f.tZ)("div",{className:e?zS:XS,children:(0,f.tZ)(B.ua7,{content:i(GS),passThrough:d,sx:{maxWidth:"210px"},children:(0,f.BX)(B.zxk,{type:"button",disabled:!d,onClick:()=>(0,X.Yo)(ae.nC),children:[(0,f.tZ)("div",{className:"openIcon--Jft6n3KJTS",children:(0,f.tZ)(B.RTC,{color:Md()["--white"]})}),i("team_settings_connector_installer_button")]})})})})]})},VS="team_settings_connector_edit",HS="team_settings_connector_save",WS="team_settings_connector_saving",$S="team_settings_connector_success",YS=({isTeamSettingsLoading:e,saveConnectorURL:t,saveIdpMetadata:n,teamSettings:a})=>{var i,r;const{translate:s}=(0,g.Z)();return(0,f.BX)(f.HY,{children:[(0,f.tZ)(zd,{label:s("team_settings_connector_metadata_title"),children:(0,f.tZ)("div",{className:PS,children:(0,f.tZ)(ty.X,{isDisabled:e,multiLine:!0,defaultValue:null!=(i=a?.ssoIdpMetadata)?i:"",saveBtnLabel:s(HS),savingBtnLabel:s(WS),editBtnLabel:s(VS),placeholder:s("team_settings_connector_metadata_placeholder"),successMessage:s($S),onSave:n,inputFieldClassName:"inputField--SXqAbTX3lX",textFieldClassName:US})})}),(0,f.tZ)(zd,{label:s("team_settings_connector_url_title"),labelHelper:s("team_settings_connector_url_description"),children:(0,f.tZ)("div",{className:PS,children:(0,f.tZ)(ty.X,{isDisabled:e,defaultValue:null!=(r=a?.ssoServiceProviderUrl)?r:"",saveBtnLabel:s(HS),savingBtnLabel:s(WS),editBtnLabel:s(VS),placeholder:s("team_settings_connector_url_placeholder"),successMessage:s($S),onSave:t,textFieldClassName:US})})})]})},KS=({setStepComplete:e,isTeamSettingsLoading:t=!1,teamSettings:n,updateTeamSettings:a})=>{var i,s,o;const{translate:l}=(0,g.Z)(),c=r.useCallback((async e=>{try{await a({ssoIdpMetadata:e})}catch(e){throw Error(l("team_settings_connector_metadata_error"))}}),[a,l]),d=r.useCallback((async e=>{try{const t=e?(0,RS.Yw)(e):null;await a({ssoServiceProviderUrl:t})}catch(e){throw Error(l("team_settings_connector_url_error"))}}),[a,l]),_=n?.ssoServiceProviderUrl,u=n?.ssoIdpMetadata;return r.useEffect((()=>{t||u&&_&&e(Xd.SSOConnector)}),[t,_,u,e]),(0,f.BX)("div",{className:"ssoConnectorContainer--ndf4jAvwn0",children:[(0,f.tZ)(YS,{isTeamSettingsLoading:t,teamSettings:n,saveConnectorURL:d,saveIdpMetadata:c}),(0,f.tZ)(FS,{isTeamSettingsLoading:t,isSsoEnabled:null!=(i=n?.ssoEnabled)&&i,idpMetadata:null!=(s=n?.ssoIdpMetadata)?s:"",connectorUrl:null!=(o=n?.ssoServiceProviderUrl)?o:""})]})},QS=({lee:e})=>{const{translate:t}=(0,g.Z)(),[n,a]=(0,r.useState)(new Set),[i,s]=(0,r.useState)(new Set),[c,d]=(0,r.useState)(new Set([qd.EnableSSO,qd.SSOConnector]));(0,r.useEffect)((()=>{(0,m.Nc)(l.PageView.TacSettingsSsoLegacy)}),[]),(0,r.useEffect)((()=>{const e=new Set,t=new Set([qd.EnableSSO,qd.ConfigureIDP,qd.SSOConnector]);n.has(Xd.ClaimDomain)&&n.has(Xd.VerifyDomain)&&(e.add(qd.SSOConnector),e.add(qd.ConfigureIDP),e.add(qd.EnableSSO),t.delete(qd.SSOConnector),t.delete(qd.ConfigureIDP),t.delete(qd.EnableSSO)),n.has(Xd.EnableSSO)&&(e.delete(qd.SSOConnector),e.delete(qd.ConfigureIDP)),s(e),d(t)}),[n]);const _=(0,r.useCallback)((e=>{a((t=>{const n=e=>e.every((e=>t.has(e)));let a=!0;switch(e){case Xd.EnableSSO|Xd.VerifyDomain:a=!0;break;case Xd.SSOConnector:a=n([Xd.ClaimDomain,Xd.VerifyDomain]);break;case Xd.EnableSSO:a=n([Xd.ClaimDomain,Xd.VerifyDomain,Xd.SSOConnector])}return a&&!t.has(e)?new Set([...t,e]):t}))}),[]),u=(0,r.useCallback)((e=>{a((t=>{const n=new Set(t);return e.forEach((e=>{n.delete(e)})),n}))}),[]),p=(0,k.ev)(e.globalState),{teamSettingsLoading:h,teamSettings:y,updateTeamSettings:b,planTier:x}=ve(p),S=[{label:t("team_settings_sso_connector_title"),component:KS,locked:c.has(qd.SSOConnector),open:i.has(qd.SSOConnector),index:2},{label:t("team_settings_sso_identity_provider_title"),component:LS,locked:c.has(qd.ConfigureIDP),open:i.has(qd.ConfigureIDP),index:3},{label:t("team_settings_sso_enable_title"),component:OS,locked:c.has(qd.EnableSSO),open:i.has(qd.EnableSSO),index:4}];return(0,f.tZ)("div",{sx:{minHeight:"100%",minWidth:"1116px",padding:"32px 48px"},children:(0,f.BX)("div",{sx:{display:"flex",flexDirection:"column",maxWidth:"74em"},children:[(0,f.tZ)(o.X6,{as:"h1",textStyle:"ds.title.section.large",color:"ds.text.neutral.catchy",sx:{marginBottom:"32px"},children:t("team_settings_menu_title_single_sign_on")}),(0,f.BX)("div",{sx:{display:"inline-block",backgroundColor:"ds.container.agnostic.neutral.supershy",padding:"32px",marginBottom:"10px",flex:"1",borderRadius:"8px"},children:[(()=>{if(!y||y.ssoEnabled)return null;if("team"===x||"legacy"===x){const e=t.markup("team_settings_sso_teamplan_infobox_warning_markup"),n=t("team_settings_sso_teamplan_infobox_warning_button");return(0,f.tZ)("div",{className:"infoBox--w1PtJInNuc",children:(0,f.tZ)(B.vDh,{title:e,size:"simple",secondaryLabel:n,secondary:()=>(0,X.Yo)(ae.Bw)})})}return null})(),(0,f.tZ)("p",{className:Oh.settingsHeader,children:t("team_settings_sso_title")}),(0,f.tZ)(zd,{label:t("team_settings_sso_guide_title"),labelHelper:t("team_settings_sso_guide_description"),children:(0,f.tZ)(Bh.Z,{label:t("team_settings_sso_setup_button"),onClick:()=>{(0,X.Yo)(ae.nC)}})}),(0,f.tZ)($d,{isTeamSettingsLoading:h,teamSettings:y,setStepComplete:_,uncompleteSteps:u,updateTeamSettings:b,teamId:p,planTier:x})]}),h?(0,f.tZ)(Ci.Z,{containerClassName:"loadingContainer--Qcn7EL4GD5",size:40}):(0,f.tZ)(B.UQy,{size:"large",children:S.map((e=>(0,f.BX)(B.UlM,{open:e.open,readOnly:e.locked,children:[(0,f.tZ)(B._Oh,{children:`${e.index}. ${e.label}`}),(0,f.tZ)(B.rN7,{children:(0,f.tZ)("fieldset",{disabled:e.locked,children:(0,f.tZ)(e.component,{isTeamSettingsLoading:h,teamSettings:y,setStepComplete:_,updateTeamSettings:b,teamId:null!=p?p:null,planTier:null!=x?x:null})})})]},e.label)))})]})})};var JS=n(31930);const ef={title:"tac_settings_choose_sso_card_self_hosted_title",redirectUrl:"self-hosted-sso",supportedFeatures:[{title:"tac_settings_sso_self_hosted_card_zero_knowledge",description:"",isSupported:!0,iconName:"FeedbackSuccessOutlined"},{title:"tac_settings_sso_self_hosted_card_simplified_setup",description:"tac_settings_sso_self_hosted_card_not_simplified_setup_description",isSupported:!1,iconName:"FeedbackFailOutlined"},{title:"tac_settings_sso_self_hosted_card_verified_domain",description:"",isSupported:!0,iconName:"FeedbackSuccessOutlined"},{title:"tac_settings_sso_self_hosted_card_scim_support",description:"",isSupported:!0,iconName:"FeedbackSuccessOutlined"}]},tf={title:"tac_settings_choose_sso_card_nitro_title",redirectUrl:"confidential-sso",supportedFeatures:[{title:"tac_settings_sso_self_hosted_card_zero_knowledge",description:"",isSupported:!0,iconName:"FeedbackSuccessOutlined"},{title:"tac_settings_sso_self_hosted_card_simplified_setup",description:"tac_settings_sso_nitro_card_simplified_setup_description",isSupported:!0,iconName:"FeedbackSuccessOutlined"},{title:"tac_settings_sso_self_hosted_card_verified_domain",description:"",isSupported:!0,iconName:"FeedbackSuccessOutlined"},{title:"tac_settings_sso_self_hosted_card_scim_support",description:"",isSupported:!0,iconName:"FeedbackSuccessOutlined"}]},nf={title:"tac_settings_choose_sso_card_sso_connector_title",redirectUrl:"sso-connector",supportedFeatures:[{title:"tac_settings_sso_self_hosted_card_zero_knowledge",description:"",isSupported:!0,iconName:"FeedbackSuccessOutlined"},{title:"tac_settings_sso_self_hosted_card_simplified_setup",description:"tac_settings_sso_self_hosted_card_not_simplified_setup_description",isSupported:!1,iconName:"FeedbackFailOutlined"},{title:"tac_settings_sso_self_hosted_card_verified_domain",description:"",isSupported:!1,iconName:"FeedbackFailOutlined"},{title:"tac_settings_sso_self_hosted_card_scim_support",description:"",isSupported:!1,iconName:"FeedbackFailOutlined"}]},af=({title:e,description:t,isSupported:n,iconName:a,disabled:i=!1})=>{const{translate:r}=(0,g.Z)();return(0,f.BX)(o.kC,{gap:"8px",flexWrap:"nowrap",alignItems:"flex-start",children:[(0,f.tZ)(o.vY,{name:a,mood:i?"neutral":!1===n?"danger":"brand"}),(0,f.BX)(o.kC,{flexDirection:"column",gap:"4px",children:[(0,f.tZ)(o.nv,{textStyle:"ds.body.standard.regular",color:i?"ds.text.oddity.disabled":"ds.text.neutral.catchy",children:r(e)}),t?(0,f.tZ)(o.nv,{textStyle:"ds.body.helper.regular",color:i?"ds.text.oddity.disabled":"ds.text.neutral.quiet",children:r(t)}):null]})]})},rf=({title:e,redirectUrl:t,optionNumber:n,supportedFeatures:a,buttonLabel:r,onCtaClick:s,disabled:l=!1,selected:c=!1,featureCardStatus:d="NOT_STARTED",ctaDataTestId:_,setBusinessPlanBadge:u=!1})=>{const{translate:m}=(0,g.Z)(),p=(0,i.k6)(),h=`${(0,i.$B)().path}/${t}`;return(0,f.tZ)(B.Zbd,{sx:{padding:"24px",borderColor:c?"ds.border.brand.standard.idle":"ds.border.neutral.quiet.idle",backgroundColor:"ds.container.agnostic.neutral.supershy",width:"100%"},children:(0,f.BX)(B.T5p,{gridTemplateAreas:"'business business' 'option badge' 'title title' 'body body' 'button button'",children:[u?(0,f.tZ)(B.dDn,{gridArea:"business",sx:{marginBottom:"8px"},children:(0,f.tZ)(o.Ct,{iconName:"PremiumOutlined",layout:"iconLeading",label:m("team_settings_sso_paywall_business_badge"),mood:"brand",intensity:"quiet"})}):null,n&&(0,f.tZ)(B.dDn,{gridArea:"option",sx:{marginBottom:"8px"},children:(0,f.tZ)(o.nv,{color:l?"ds.text.oddity.disabled":"ds.text.neutral.quiet",textStyle:"ds.body.helper.regular",children:`${m("tac_settings_directory_sync_card_option")} ${n}`})}),"ACTIVATED"===d||"STARTED"===d?(0,f.tZ)(B.dDn,{gridArea:"badge",justifySelf:"right",children:(0,f.tZ)(o.Ct,{mood:"ACTIVATED"===d?"positive":"warning",intensity:"catchy",label:m("ACTIVATED"===d?"tac_settings_directory_sync_card_badge_enabled":"tac_settings_feature_card_badge_configuration_not_completed")})}):null,(0,f.tZ)(B.dDn,{gridArea:"title",sx:{marginBottom:"32px"},children:(0,f.tZ)(o.X6,{as:"h3",textStyle:"ds.title.section.medium",color:l?"ds.text.oddity.disabled":"ds.text.neutral.catchy",sx:{display:"inline-block"},children:m(e)})}),(0,f.tZ)(B.dDn,{gridArea:"body",children:(0,f.tZ)(o.kC,{gap:"32px",flexDirection:"column",sx:{marginBottom:"32px"},children:a.map((e=>(0,f.tZ)(af,{disabled:l,...e},n+e.title)))})}),(0,f.tZ)(B.dDn,{gridArea:"button",justifySelf:"right",children:u?(0,f.tZ)(o.zx,{role:"button",onClick:()=>s?.(),disabled:l,intensity:"catchy",layout:"iconLeading",icon:"PremiumOutlined",children:r}):(0,f.tZ)(o.zx,{role:"button",onClick:()=>{s?.(),p.push(h)},disabled:l,intensity:"catchy","data-testid":_,children:r})})]})})},sf={CouldNotGetTeamStatus:"COULD_NOT_GET_TEAM_STATUS",TeamIdNotFound:"TEAM_ID_NOT_FOUND",UserNotAuthorized:"USER_NOT_AUTHORIZED",InvalidSsoState:"INVALID_SSO_STATE",GenericSsoError:"GENERIC_SSO_ERROR"},of={ERROR_HEADER:"team_settings_sso_error_header",RETRY:"team_settings_sso_error_button_retry",COULD_NOT_GET_TEAM_STATUS:"team_settings_sso_error_message_team_status",TEAM_ID_NOT_FOUND:"team_settings_sso_error_message_team_id",USER_NOT_AUTHORIZED:"team_settings_sso_error_message_not_authorized",INVALID_SSO_STATE:"team_settings_sso_error_message_invalid_sso_state",GENERIC_SSO_ERROR:"team_settings_sso_error_message_generic"},lf=({onReloadData:e,errorTag:t})=>{const{translate:n}=(0,g.Z)();return(0,f.BX)(o.kC,{alignItems:"center",justifyContent:"center",fullWidth:!0,gap:"40px",sx:{mt:"20vh",flexDirection:"column"},children:[(0,f.tZ)(o.JO,{name:"FeedbackFailOutlined",color:"ds.text.danger.quiet",sx:{height:"64px",width:"64px"}}),(0,f.BX)(o.kC,{alignItems:"center",flexDirection:"column",gap:"8px",children:[(0,f.tZ)(o.X6,{textStyle:"ds.title.section.large",as:"h1",children:n(of.ERROR_HEADER)}),t?(0,f.tZ)(o.nv,{children:n(of[sf[t]])}):null]}),(0,f.tZ)(o.kC,{gap:"16px",children:(0,f.tZ)(o.zx,{mood:"brand",intensity:"catchy",onClick:e,children:n(of.RETRY)})})]})},cf=({backgroundColor:e,withBorder:t,paddingSize:n="normal",...a})=>(0,f.tZ)("div",{sx:{bg:null!=e?e:"ds.container.agnostic.neutral.quiet",p:"tight"===n?"24px":"32px 24px",border:t?"1px solid #8C8F9033":void 0,borderRadius:3,height:"fit-content"},...a});var df=n(18533);const _f=()=>{const{translate:e}=(0,g.Z)(),[t,n]=(0,r.useState)(!1),{migrateToConfidentialSso:a}=(0,F.u)(Jy.y),{showToast:i}=(0,o.pm)(),s=(0,r.useRef)(null);return(0,f.BX)(B.T5p,{as:cf,backgroundColor:"ds.background.default",paddingSize:"normal",gridTemplateRows:"auto 1fr auto",justifyItems:"center",gap:"8px",children:[(0,f.tZ)(o.qo,{ref:s,label:e("migrate_to_confidential_sso_input_label"),sx:{width:"400px"}}),(0,f.tZ)(o.zx,{layout:"iconLeading",icon:"ToolsOutlined",isLoading:t,onClick:async()=>{try{n(!0);const t=await a({ssoConnectorKey:s.current?.value.trim()});if((0,V.hx)(t)){const n=(0,df.EQ)(t.error,{SSO_CONNECTOR_KEY_MISSING:()=>e("migrate_to_confidential_sso_connector_key_missing"),SSO_CONNECTOR_KEY_FORMAT_INVALID:()=>e("migrate_to_confidential_sso_connector_key_format_invalid")});i({description:n,closeActionLabel:e("_common_toast_close_label"),mood:"danger"})}else i({description:e("migrate_to_confidential_sso_success"),closeActionLabel:e("_common_toast_close_label")})}catch(t){i({description:e("migrate_to_confidential_sso_error"),closeActionLabel:e("_common_toast_close_label"),mood:"danger"})}finally{n(!1)}},children:e("migrate_to_confidential_sso_migrate_button_label")})]})};var uf,mf,pf;const gf=()=>{const{translate:e}=(0,g.Z)(),[t,n]=(0,r.useState)(!1),[a,i]=(0,r.useState)(!0),[s,d]=(0,r.useState)(null),_=(0,u.s)(),p=(0,pe._)(),h=(0,c.k)(Jy.y,"ssoProvisioning"),y=(0,c.k)(JS.m,"scimConfiguration"),{initSsoProvisioning:b}=(0,F.u)(Jy.y),{teamId:x}=(0,Ce.fV)(),S=(0,r.useCallback)((async e=>{if(!e)return;d("");const t=await b({teamId:`${e}`});(0,V.hx)(t)&&d(t.error.tag)}),[b]);(0,r.useEffect)((()=>{S(x).then((()=>{n(!0)}))}),[S,x]),(0,r.useEffect)((()=>{(0,m.Nc)(l.Page.TacSso)}),[]);const{ssoMigrationFF:v,ssoConnectorCardFF:C,confidentialSSOMigrationFF:E}=(()=>{if(p.status!==Ze.rq.Success)return{};const{itadmin_tac_encryptionservice_SSOmigration_reset:e,setup_rollout_web_ssoconnector_card:t,setup_rollout_confidential_migration:n}=p.data;return{ssoMigrationFF:null!=e&&e,ssoConnectorCardFF:null!=t&&t,confidentialSSOMigrationFF:null!=n&&n}})();if((0,r.useEffect)((()=>{p.status===Ze.rq.Success&&_&&h.status===Ze.rq.Success&&y.status===Ze.rq.Success&&t&&i(!1)}),[_,h.status,y.status,t,p]),a)return(0,f.tZ)(B.T5p,{justifyItems:"center",children:(0,f.tZ)(o.ZX,{size:75,sx:{marginTop:"20vh"}})});if(s||h.status===Ze.rq.Error||y.status===Ze.rq.Error)return(0,f.tZ)(lf,{onReloadData:()=>{S(x)},errorTag:s});if(h.status!==Ze.rq.Success||y.status!==Ze.rq.Success||!_)return null;const{inferredSsoState:Z,ssoCapable:T}=h.data.global,D=!T||Z===eb.s5.enum.Unknown,k=Z===eb.s5.enum.SelfHostedIncomplete||Z===eb.s5.enum.SelfHostedComplete,I=Z===eb.s5.enum.NitroIncomplete||Z===eb.s5.enum.NitroComplete,A=Z===eb.s5.enum.SsoConnectorIncomplete||Z===eb.s5.enum.SsoConnectorComplete||C;return(0,f.BX)(B.T5p,{gap:"16px",alignContent:"start",sx:{px:"48px",pt:"32px",pb:"12px"},children:[(0,f.BX)(B.T5p,{fullWidth:!0,gap:"24px",gridTemplateColumns:A?"1fr 1fr 1fr":"1fr 1fr",children:[(0,f.tZ)(rf,{selected:I,optionNumber:1,...tf,buttonLabel:e(I?"tac_settings_choose_sso_confidential_card_button_edit":"tac_settings_choose_sso_confidential_card_button_setup"),disabled:D||Z===eb.s5.enum.SelfHostedComplete||A,featureCardStatus:Z===eb.s5.enum.NitroComplete?"ACTIVATED":Z===eb.s5.enum.NitroIncomplete?"STARTED":"NOT_STARTED",onCtaClick:()=>{rb({currentBillingPlanTier:_.spaceTier,ssoSetupStep:l.SsoSetupStep.ChooseYourSsoSolution})}}),(0,f.tZ)(rf,{optionNumber:2,...ef,selected:k,buttonLabel:e(k?"tac_settings_choose_sso_self_hosted_card_button_edit":"tac_settings_choose_sso_self_hosted_card_button_setup"),disabled:D||Z===eb.s5.enum.NitroComplete||Z===eb.s5.enum.NitroIncomplete||!!y.data.token||A&&!v,featureCardStatus:Z===eb.s5.enum.SelfHostedComplete?"ACTIVATED":Z===eb.s5.enum.SelfHostedIncomplete?"STARTED":"NOT_STARTED",onCtaClick:()=>{ib({currentBillingPlanTier:_.spaceTier,ssoSetupStep:l.SsoSetupStep.ChooseYourSsoSolution})}}),A?(0,f.tZ)(rf,{optionNumber:3,...nf,buttonLabel:e("tac_settings_choose_sso_sso_connector_card_button_edit"),disabled:I||k,featureCardStatus:"ACTIVATED"}):null]}),E?uf||(uf=(0,f.tZ)(_f,{})):null]})},hf=()=>{const{translate:e}=(0,g.Z)();return(0,f.BX)(B.T5p,{gridTemplateColumns:"auto",gridTemplateRows:"auto 1fr",fullWidth:!0,sx:{height:"100%"},children:[(0,f.BX)(B.T5p,{sx:{px:"48px",pt:"32px",pb:"12px"},children:[(0,f.tZ)(Oo,{title:"Choose your single sign-on (SSO) configuration"}),(0,f.tZ)(o.nv,{textStyle:"ds.body.standard.regular",children:e("choose_sso_screen_paragraph_sso_description")}),(0,f.BX)("div",{sx:{display:"flex",alignItems:"center"},children:[(0,f.BX)(o.nv,{as:"a",href:"https://support.dashlane.com/hc/en-us/articles/360013149040",textStyle:"ds.body.standard.regular",color:"ds.text.brand.quiet",sx:{padding:"5px 5px 5px 0px",gap:"4px"},children:[" ",e("choose_sso_screen_link_lean_more")]}),mf||(mf=(0,f.tZ)(o.JO,{name:"ActionOpenExternalLinkOutlined",size:"small",color:"ds.text.brand.quiet"}))]})]}),pf||(pf=(0,f.tZ)(gf,{}))]})};var yf=n(85993);const bf={ITEM:{display:"flex",flexDirection:"row",alignItems:"flex-start",gap:"16px"}},xf=({iconName:e,title:t,subtitle:n})=>{const{translate:a}=(0,g.Z)();return(0,f.BX)("div",{sx:bf.ITEM,children:[(0,f.tZ)(o.vY,{name:e,mood:"brand"}),(0,f.BX)("div",{children:[(0,f.tZ)(o.nv,{textStyle:"ds.title.block.medium",sx:{marginBottom:"5px"},children:a(t)}),(0,f.tZ)(o.nv,{textStyle:"ds.body.reduced.regular",color:"ds.text.neutral.quiet",children:a(n)})]})]})};var Sf;const ff={WHATS_SSO:{i18nKey:"team_settings_sso_paywall_whats_sso",url:ae.Tz},ZERO_KNOWLEDGE:{i18nKey:"team_settings_sso_paywall_zero_knowledge",url:ae.mn},MULTI_DOMAINS:{i18nKey:"team_settings_sso_paywall_multi_domains",url:ae.I9},SELF_HOSTED:{i18nKey:"team_settings_sso_paywall_self_hosted",url:ae.bx},CONFIDENTIAL_SSO:{i18nKey:"team_settings_sso_paywall_confidential_sso",url:ae.Fn},IDENTITY_PROVIDER:{i18nKey:"team_settings_sso_paywall_identity_provider",url:ae.HX},HELP_CENTER:{i18nKey:"team_settings_sso_paywall_helper_center",url:ae.Tx}},vf={CONTAINER:{borderRadius:"8px",border:"1px solid ds.border.neutral.quiet.idle",padding:"32px",backgroundColor:"ds.background.default",display:"flex",flexDirection:"column",alignItems:"flex-start"},HEADER:{display:"flex",flexDirection:"column",alignItems:"flex-start",gap:"8px",alignSelf:"stretch"},ITEMS:{display:"flex",flexDirection:"column",alignItems:"flex-start",gap:"32px",alignSelf:"stretch"},ACTIONS:{display:"flex",justifyContent:"space-between",alignItems:"center",alignSelf:"stretch"}},Cf=({isTrialOrGracePeriod:e})=>{const{translate:t}=(0,g.Z)(),{routes:n}=(0,i.Xo)(),a=(0,G.U)();return(0,f.BX)(B.T5p,{gap:"32px",alignContent:"start",sx:vf.CONTAINER,children:[(0,f.BX)("div",{sx:vf.HEADER,children:[(0,f.tZ)(o.Ct,{iconName:"PremiumOutlined",layout:"iconLeading",label:t("team_settings_sso_paywall_business_badge"),mood:"brand",intensity:"quiet"}),(0,f.tZ)(o.nv,{textStyle:"ds.title.section.large",children:t("team_settings_sso_paywall_title")}),(0,f.tZ)(o.nv,{textStyle:"ds.body.standard.regular",color:"ds.text.neutral.quiet",children:t("team_settings_sso_paywall_description")})]}),(0,f.BX)("div",{sx:vf.ITEMS,children:[(0,f.tZ)(xf,{iconName:"ProtectionOutlined",title:"team_settings_sso_paywall_user_experience_item",subtitle:"team_settings_sso_paywall_user_experience_description"}),(0,f.tZ)(xf,{iconName:"FeatureDarkWebMonitoringOutlined",title:"team_settings_sso_paywall_transparency_item",subtitle:"team_settings_sso_paywall_transparency_description"}),(0,f.tZ)(xf,{iconName:"AccountSettingsOutlined",title:"team_settings_sso_paywall_access_item",subtitle:"team_settings_sso_paywall_access_description"}),(0,f.tZ)(xf,{iconName:"ToolsOutlined",title:"team_settings_sso_paywall_confidential_sso_item",subtitle:"team_settings_sso_paywall_confidential_sso_description"})]}),(0,f.BX)("div",{sx:vf.ACTIONS,children:[Sf||(Sf=(0,f.tZ)(yf.a,{dropdownItems:ff,titleKey:"team_settings_sso_paywall_learn_more"})),(0,f.tZ)(o.zx,{mood:"brand",intensity:"catchy",icon:"PremiumOutlined",layout:"iconLeading",role:e?"link":void 0,onClick:()=>{(0,m.Kz)(new l.UserClickEvent({button:l.Button.UpgradeBusinessTier,clickOrigin:l.ClickOrigin.SsoPaywallPage})),e?(0,X.Yo)(`${ae.ub}?plan=business&subCode=${null!=a?a:""}&utm_source=button:upgrade_business_tier+click_origin:sso_paywall_page+origin_page:tac/sso/paywall+origin_component:main_app`):(0,i.uX)(`${n.teamAccountChangePlanRoutePath}?plan=business`)},children:t("team_settings_sso_paywall_upgrade_business")})]})]})},Ef=({isTrialOrGracePeriod:e})=>{const[t,n]=(0,r.useState)(!1);return(0,r.useEffect)((()=>{(0,m.Nc)(l.PageView.TacSsoPaywall)}),[]),(0,f.BX)(f.HY,{children:[(0,f.tZ)(ni,{mainContent:(0,f.tZ)(B.T5p,{gridTemplateColumns:"auto",gridAutoRows:"min-content",gap:"32px",children:(0,f.tZ)(Cf,{isTrialOrGracePeriod:e})}),secondaryContent:(0,f.tZ)(sl,{openContactDialog:()=>n(!0)})}),t?(0,f.tZ)(ne.c,{onDismiss:()=>n(!1)}):null]})};var Zf;const Tf="/sso-connector",Df="/self-hosted-sso",kf="/confidential-sso",If="/paywall",Af=({lee:e})=>{var t;const n=(0,i.$B)(),{data:a}=(0,c.k)(Jy.y,"ssoProvisioning"),r=a?.global.inferredSsoState,s=r===eb.s5.enum.NitroComplete||r===eb.s5.enum.NitroIncomplete||r===eb.s5.enum.SsoConnectorComplete||r===eb.s5.enum.SsoConnectorIncomplete,o=r===eb.s5.enum.SelfHostedComplete||r===eb.s5.enum.SelfHostedIncomplete||r===eb.s5.enum.SsoConnectorComplete||r===eb.s5.enum.SsoConnectorIncomplete,{shouldShowBuyOrUpgradePaywall:l,isTrialOrGracePeriod:d,planType:u}=null!=(t=xe(e.permission.adminAccess))?t:{},m=u===_.lD.Standard,p=l&&(u===_.lD.Starter||u===_.lD.Team||m);return(0,f.BX)(i.rs,{children:[(0,f.tZ)(i.AW,{path:`${n.path}${Df}`,children:s?(0,f.tZ)(i.l_,{to:n.path}):(0,f.tZ)(AS,{backRoute:n.url})}),(0,f.tZ)(i.AW,{path:`${n.path}${kf}`,children:o?(0,f.tZ)(i.l_,{to:n.path}):(0,f.tZ)(ax,{backRoute:n.url})}),(0,f.tZ)(i.AW,{path:`${n.path}${If}`,children:(0,f.tZ)(Ef,{isTrialOrGracePeriod:null!=d&&d})}),(0,f.tZ)(i.AW,{path:`${n.path}${Tf}`,children:(0,f.tZ)(QS,{lee:e})}),(0,f.tZ)(i.AW,{exact:!0,path:n.path,children:p?(0,f.tZ)(i.l_,{to:`${n.path}${If}`}):Zf||(Zf=(0,f.tZ)(hf,{}))})]})};var Nf=n(10121),wf=n(58480);const Of=({accountInfo:e})=>{const{translate:t}=(0,g.Z)(),{routes:n}=(0,i.Xo)(),a=(0,G.U)();return e?.premiumStatus?(0,f.tZ)(o.ke,{title:t("team_settings_active_directory_paywall_title"),description:t("team_settings_active_directory_paywall_description"),actions:[(0,P.wt)(e.premiumStatus)?(0,f.tZ)(o.zx,{onClick:()=>{(0,m.Kz)(new l.UserClickEvent({button:l.Button.UpgradeBusinessTier,clickOrigin:l.ClickOrigin.DirectorySyncPaywallPage})),(0,X.Yo)(`${ae.ub}?plan=business&subCode=${null!=a?a:""}`)},children:t("team_settings_active_directory_paywall_buy")},"buy"):(0,f.tZ)(i.rU,{to:`${n.teamAccountChangePlanRoutePath}?plan=business`,children:(0,f.tZ)(o.zx,{children:t("team_settings_active_directory_paywall_upgrade")})},"upgrade")],size:"large",sx:{marginBottom:"32px"}}):null};var Rf,Lf;const Mf="_common_generic_error",Bf=({lee:e,disableForm:t,adSyncEnabled:n,isAdSyncCapable:a,accountInfo:i})=>{const{translate:s}=(0,g.Z)(),c=(0,Ee.o)(A_.G.WebOnboardingInviteLinkTacMigration),d=au(),_=d.status===Ze.rq.Success?d.teamKey:void 0,{reportTACError:u}=Y(),{lastADSyncDateError:p,lastADSyncDateLoading:h,lastADSyncDate:y}=function(){const[e,t]=(0,r.useState)(!1),[n,a]=(0,r.useState)(),[i,s]=(0,r.useState)(null),o=(0,r.useCallback)((async e=>{try{e.signal.aborted||t(!0);const n=await async function(){const e=await fe.C.getLastADSyncDate();if(e.success)return{lastSyncRequestForTeamUnix:e.data.lastSyncRequestForTeam,lastSuccessfulSyncRequestForTeamUnix:e.data.lastSuccessfulSyncRequestForTeam};throw new Error(`getScimLastSyncDate: failed with error ${e.error}`)}();e.signal.aborted||(a(n),t(!1),s(null))}catch(n){e.signal.aborted||(t(!1),s(n))}}),[]);return(0,r.useEffect)((()=>{const e=new AbortController;return o(e),()=>{e.abort()}}),[o]),{lastADSyncDateLoading:e,lastADSyncDate:n,lastADSyncDateError:i}}(),b=s.shortDate,[x,S]=(0,r.useState)(!0),[v,C]=(0,r.useState)(!1),[E,Z]=(0,r.useState)(!1),[T,D]=(0,r.useState)(!1),[k,I]=(0,r.useState)(!1),{inviteLinkDataForAdmin:A,getInviteLinkDataForAdmin:N}=K_(),[w,O]=(0,r.useState)(!1),[R,L]=(0,r.useState)(void 0),{teamId:M}=(0,Ce.fV)(),{teamSettings:P,teamSettingsLoading:U,updateTeamSettings:z}=ve(M),X=(0,r.useCallback)((()=>e.apiMiddleware.teamPlans?e.apiMiddleware.teamPlans:(u(new Error("teamPlans service missing from apiMiddleware")),null)),[]);(0,r.useEffect)((()=>{(0,m.Nc)(l.PageView.TacSettingsDirectorySyncActiveDirectory)}),[]),(0,r.useEffect)((()=>{!1===c&&N()}),[N,c]);const q=(0,r.useCallback)((()=>{if(!P)return;const{activeDirectorySyncType:t,activeDirectoryToken:n,activeDirectorySyncStatus:a}=P;try{const i={activeDirectorySyncStatus:a,activeDirectorySyncType:t,activeDirectoryToken:n,teamId:M};L(n),e.dispatch(wf.vo(i)),Z(["full","deprovision-only"].includes(null!=t?t:"")),I(["full","provision-only"].includes(null!=t?t:"")),S(!1)}catch(e){console.error(`ActiveDirectorySettings - fetchData: failed with error: ${e}`)}}),[e,M,P]);if((0,r.useEffect)((()=>{U&&q()}),[b,U,q]),null==c)return null;const j=(e,t)=>e?t?"full":"provision-only":t?"deprovision-only":null,G=(0,ae.cI)(c?_:A?.teamKey);return(0,f.BX)(Hb,{title:"Active Directory",children:[c?(0,f.tZ)(cu,{isOpen:w,onClose:()=>{O(!1)}}):(0,f.tZ)(tu,{showSharingDialog:w,setShowSharingDialog:O}),(0,f.BX)(B.T5p,{gap:"10px",gridTemplateAreas:"'mainContent secondaryContent'",gridTemplateColumns:"auto 1fr",alignContent:"flex-start",children:[(0,f.tZ)(B.dDn,{gridArea:"mainContent",children:(0,f.BX)(Lh,{children:[a?null:(0,f.tZ)(Of,{accountInfo:i}),(0,f.tZ)(o.nv,{sx:{marginTop:t?"32px":void 0},color:"ds.text.neutral.quiet",textStyle:"ds.body.standard.strong",children:s("team_settings_active_directory_title_help")}),(0,f.tZ)(zd,{label:s("team_settings_active_directory_header_label"),labelHelper:s("team_settings_active_directory_header_helper"),children:(0,f.tZ)("div",{children:(0,f.tZ)(Bh.Z,{label:s("team_settings_active_directory_header_button_label"),onClick:()=>{window.open("https://support.dashlane.com/hc/articles/115002155485","_blank")}})})}),(0,f.tZ)(o.nv,{color:"ds.text.neutral.quiet",textStyle:"ds.body.standard.strong",children:s("team_settings_active_directory_title_status")}),(0,f.tZ)(zd,{label:s("team_settings_active_directory_last_successful_sync_date_label"),children:h?Rf||(Rf=(0,f.tZ)(o.ZX,{color:"ds.oddity.focus",size:"medium"})):p?`${s("_common_generic_error")} ${p.message.toLowerCase()}`:y?.lastSuccessfulSyncRequestForTeamUnix?b((0,Bt.Z)(y.lastSuccessfulSyncRequestForTeamUnix),Kt._T.lll):s("team_settings_active_directory_last_successful_sync_date_value_never")}),(()=>{const{activeDirectorySyncStatus:t}=e.state;return t?.failedSyncCount?(0,f.BX)(f.HY,{children:[(0,f.tZ)(zd,{label:s("team_settings_active_directory_last_error_message_label"),children:(0,f.tZ)("span",{sx:{color:"ds.text.danger.standard"},children:t.lastFailedSync?.error})}),(0,f.tZ)(zd,{label:s("team_settings_active_directory_last_error_date_label"),children:(0,f.tZ)("span",{sx:{color:"ds.text.danger.standard"},children:t?.lastFailedSync?b((0,Bt.Z)(t.lastFailedSync.eventDateUnix),Kt._T.lll):null})}),(0,f.tZ)(zd,{label:s("team_settings_active_directory_fail_count_label"),children:(0,f.tZ)("span",{sx:{color:"ds.text.danger.standard"},children:e.state.activeDirectorySyncStatus.failedSyncCount})})]}):null})(),(0,f.tZ)(o.nv,{color:"ds.text.neutral.quiet",textStyle:"ds.body.standard.strong",children:s("team_settings_active_directory_title_setup")}),(0,f.tZ)(zd,{label:s("team_settings_active_directory_automated_provisioning_label"),labelHelper:s("team_settings_active_directory_automated_provisioning_helper"),children:(0,f.tZ)(Mh.Z,{genericErrorMessage:s(Mf),isDisabled:x||T||t,saveValueFunction:async()=>{if(T)return Promise.resolve();D(!0);const t=!k,n=j(t,E);try{if(!P)return;let{activeDirectorySyncStatus:a}=P;if(!a){const e=await(async()=>{const e=await X();if(!e)return;const{activeDirectorySyncStatus:t,activeDirectoryToken:n}=await e.getADToken();return L(n),{activeDirectorySyncStatus:t,activeDirectoryToken:n}})();a=e?.activeDirectorySyncStatus}await z({activeDirectorySyncType:n}),e.dispatch(wf.dV(n)),I(t),D(!1)}catch(e){u(e)}},value:k})}),(0,f.tZ)(zd,{label:s("team_settings_active_directory_automated_deprovisioning_label"),labelHelper:s("team_settings_active_directory_automated_deprovisioning_helper"),children:(0,f.tZ)(Mh.Z,{genericErrorMessage:s(Mf),isDisabled:x||v||t,saveValueFunction:async()=>{if(v)return Promise.resolve();C(!0);const t=!E,n=j(k,t);try{await z({activeDirectorySyncType:n}),e.dispatch(wf.dV(n)),Z(t),C(!1)}catch(e){u(e)}},value:E})}),(0,f.BX)(zd,{label:s("team_settings_active_directory_cron_script_label"),labelHelper:s("team_settings_active_directory_cron_script_helper"),children:[(0,f.tZ)(Mg.n,{defaultValue:e.state.activeDirectoryScript,isDisabled:!0,multiLine:!0,style:{backgroundColor:"ds.container.expressive.neutral.quiet.active",fontSize:"12px",height:"180px",width:"300px"}}),(0,f.tZ)("div",{children:(0,f.tZ)(Lg.Z,{label:e.state.isCopied?s("team_settings_active_directory_button_copy_feedback"):s("team_settings_active_directory_button_copy_label"),onClick:()=>{navigator.clipboard.writeText(e.state.activeDirectoryScript).then((()=>{e.dispatch(wf.Kk(!0)),window.setTimeout((()=>e.dispatch(wf.Kk(!1))),700)}))},disabled:!R})})]})]})}),n?(0,f.tZ)(B.dDn,{gridArea:"secondaryContent",sx:{maxWidth:"500px",minWidth:"250px"},alignSelf:"flex-start",children:(0,f.tZ)(rl,{linkProps:{linkType:il.ExternalLink},heading:s("team_settings_encryption_service_scim_invite_link_heading"),description:(0,f.BX)("div",{children:[(0,f.tZ)(o.nv,{sx:{mb:"8px"},children:s("team_settings_encryption_service_scim_invite_link_description_first")}),(0,f.BX)(o.nv,{as:"a",onClick:e=>{e.preventDefault(),navigator.clipboard.writeText(G),O(!0)},sx:{display:"flex",gap:"4px"},href:"_blank",children:[s("team_settings_encryption_service_scim_invite_link_copy"),Lf||(Lf=(0,f.tZ)(o.JO,{color:"ds.text.brand.standard",name:"ActionCopyOutlined",size:"medium"}))]})]})})}):null]})]})};var Pf,Uf;const zf={CONTAINER:{borderRadius:"8px",padding:"24px",border:"1px solid ds.border.neutral.quiet.idle",background:"ds.container.agnostic.neutral.supershy","& h1":{margin:"8px 0px"}},MAIN_TITLE:{margin:"8px 0px",fontFamily:"Public Sans",fontSize:"22px",fontStyle:"normal",fontWeight:"500",lineHeight:"28px"},CONTENT_CARD:{margin:"32px 0px",display:"flex",flexDirection:"row",gap:"16px"},CONTENT_CARD_FEATURE_TITLE:{fontSize:"16px",fontStyle:"normal",fontWeight:"500",lineHeight:"20px",color:"ds.text.neutral.catchy"},CONTENT_CARD_FEATURE_DESC:{color:"ds.text.neutral.quiet",fontSize:"13px",fontStyle:"normal",fontWeight:"400",lineHeight:"18px",maxWidth:"600px"},BUTTONS:{display:"flex",justifyContent:"space-between"}},Xf={LINK_ZEROKNOWLEDGE:{i18nKey:"team_settings_directory_sync_scim_paywall_link_zeroknowledge",url:ae.mn},LINK_MULTIPLEDOMAINS:{i18nKey:"team_settings_directory_sync_scim_paywall_link_multiple_domains",url:ae.I9},LINK_SELFHOSTED:{i18nKey:"team_settings_directory_sync_scim_paywall_link_self_hosted",url:ae.uR},LINK_CONFIDENTIAL:{i18nKey:"team_settings_directory_sync_scim_paywall_link_confidential",url:ae.FP},LINK_IDP_INTEGRATION:{i18nKey:"team_settings_directory_sync_scim_paywall_link_idp",url:ae.uC},LINK_ADMIN_HC:{i18nKey:"team_settings_directory_sync_scim_paywall_link_help_center",url:ae.Tx}},qf=({isTrialOrGracePeriod:e})=>{const{translate:t}=(0,g.Z)(),{routes:n}=(0,i.Xo)(),a=(0,G.U)();return(0,r.useEffect)((()=>{(0,m.Nc)(l.PageView.TacSettingsDirectorySyncPaywall)}),[]),(0,f.BX)("div",{sx:zf.CONTAINER,children:[(0,f.tZ)(o.Ct,{iconName:"PremiumOutlined",label:t("team_settings_directory_sync_scim_paywall_business_badge"),layout:"iconLeading",intensity:"quiet",mood:"brand",sx:{height:"16px"}}),(0,f.tZ)("h2",{sx:zf.MAIN_TITLE,children:t("team_settings_directory_sync_scim_paywall_title")}),(0,f.tZ)(o.nv,{color:"ds.text.neutral.quiet",textStyle:"ds.body.standard.regular",children:t("team_settings_directory_sync_scim_paywall_description")}),(0,f.BX)("div",{sx:zf.CONTENT_CARD,children:[Pf||(Pf=(0,f.tZ)(o.vY,{name:"ToolsOutlined",mood:"brand"})),(0,f.BX)("div",{children:[(0,f.tZ)("span",{sx:zf.CONTENT_CARD_FEATURE_TITLE,children:t("team_settings_directory_sync_scim_paywall_feature_selfhosted_title")}),(0,f.tZ)(o.nv,{sx:zf.CONTENT_CARD_FEATURE_DESC,children:t("team_settings_directory_sync_scim_paywall_feature_selfhosted_desc")})]})]}),(0,f.BX)("div",{sx:zf.CONTENT_CARD,children:[Uf||(Uf=(0,f.tZ)(o.vY,{name:"ToolsOutlined",mood:"brand"})),(0,f.BX)("div",{children:[(0,f.tZ)("div",{sx:{display:"flex",gap:"5px"},children:(0,f.tZ)("span",{sx:zf.CONTENT_CARD_FEATURE_TITLE,children:t("team_settings_directory_sync_scim_paywall_feature_confidential_title")})}),(0,f.tZ)(o.nv,{sx:zf.CONTENT_CARD_FEATURE_DESC,children:t("team_settings_directory_sync_scim_paywall_feature_confidential_desc")})]})]}),(0,f.BX)("div",{sx:zf.BUTTONS,children:[(0,f.tZ)(yf.a,{dropdownItems:Xf,titleKey:"team_settings_directory_sync_scim_paywall_dropdown_learn_more"}),(0,f.tZ)(o.zx,{layout:"iconLeading",icon:"PremiumOutlined",mood:"brand",intensity:"catchy",onClick:()=>{(0,m.Kz)(new l.UserClickEvent({button:l.Button.UpgradeBusinessTier,clickOrigin:l.ClickOrigin.DirectorySyncPaywallPage})),e?(0,X.Yo)(`${ae.ub}?plan=business&subCode=${null!=a?a:""}&utm_source=button:upgrade_business_tier+click_origin:directory_sync_paywall_page+origin_page:tac/settings/directory_sync/paywall+origin_component:main_app`):(0,i.uX)(`${n.teamAccountChangePlanRoutePath}?plan=business`)},role:e?"link":"button",children:t("team_settings_directory_sync_scim_paywall_upgrade_business")})]})]})},jf=({isSCIMCapable:e,isTrialOrGracePeriod:t,showPaywall:n})=>{const{data:a,status:i}=(0,c.k)(Jy.y,"ssoProvisioning");if(i!==Ze.rq.Success)return null;const{global:{inferredSsoState:r}}=a;if(r===eb.s5.enum.NitroComplete)throw new Error("Invalid state: cannot access SCIM if the team is using Confidential SSO until the enclave supports SCIM.");return!1===e&&n&&void 0!==t?(0,f.tZ)(qf,{isTrialOrGracePeriod:t}):null};var Gf;const Ff=({lastSyncUnix:e,version:t,loading:n,refreshData:a})=>{const{translate:i}=(0,g.Z)();return(0,f.tZ)(Ox.R,{children:n?Gf||(Gf=(0,f.tZ)(o.ZX,{})):(0,f.BX)(o.kC,{flexDirection:"column",gap:"5px",children:[(0,f.tZ)(o.nv,{textStyle:"ds.body.reduced.regular",color:"ds.text.neutral.standard",children:`${i("team_settings_directory_sync_last_sync")} ${e?(0,Bt.Z)(e).toLocaleString(navigator.language,{...Kt.qG.lll,timeZoneName:"short"}):i("team_settings_directory_sync_not_available")}`}),(0,f.tZ)(o.nv,{textStyle:"ds.body.reduced.regular",color:"ds.text.neutral.standard",children:`${i("team_settings_encryption_service_version")} ${null!=t?t:i("team_settings_encryption_service_not_available")}`}),(0,f.BX)(o.nv,{as:"a",color:"ds.text.brand.standard",sx:{textDecoration:"none",fontWeight:"normal",display:"flex",flexDirection:"row"},onClick:()=>a(),children:[(0,f.tZ)(o.JO,{name:"ActionRefreshOutlined",sx:{marginRight:"5px"},color:"ds.text.brand.standard",size:"xsmall"}),i("team_settings_scim_sync_refresh")]})]})})},Vf=({loading:e,parentPath:t,teamSettings:n,esConfig:a,isScimCapable:r,disableSetupButton:s})=>{const l=(0,i.k6)(),{translate:c}=(0,g.Z)(),{teamDeviceConfigLoading:d,teamDeviceConfig:_}=Qx({draft:!1,deviceAccessKey:a?.deviceAccessKey}),{teamDeviceLoading:u,teamDevice:m,refreshTeamDevice:p}=dx(a?.deviceAccessKey),h=e||d,y=!n?.ssoServiceProviderUrl||h||s||!r,b=!_?.configProperties?.scimAuthToken;return(0,f.tZ)(B.Zbd,{children:(0,f.BX)(B.T5p,{as:B.aYP,gap:"8px",gridTemplateAreas:"'header button' 'description button' 'status status'",gridTemplateColumns:"1fr auto",sx:{bg:"white",border:"none"},children:[(0,f.tZ)(B.dDn,{as:o.X6,innerAs:"h3",size:"large",bold:!0,gridArea:"header",textStyle:"ds.title.section.medium",children:c("team_settings_directory_sync_scim_header")}),(0,f.tZ)(B.dDn,{gridArea:"description",as:o.nv,size:"small",textStyle:"ds.title.block.small",color:"ds.text.neutral.quiet",children:c("team_settings_directory_sync_scim_description")}),(0,f.tZ)(B.dDn,{gridArea:"button",children:(0,f.tZ)(dS.M,{id:"scimSetupButton",loading:h,disabled:y,neverShowTooltip:s,size:"large",onClick:()=>{l.push(`${t}${nv}`)},content:c("team_settings_es_sso_setup_configure_es_tooltip"),mood:b&&!y?"brand":"neutral",intensity:b&&!y?"catchy":"quiet",children:c(b?"team_settings_directory_sync_scim_set_up_button":"team_settings_button_edit_label")})}),_?.configProperties?.scimEnabled?(0,f.tZ)(B.dDn,{gridArea:"status",sx:{mt:"20px"},children:(0,f.tZ)(Ff,{loading:u,version:m?.version,refreshData:p,lastSyncUnix:m?.lastActivityDateUnix})}):null]})})};var Hf,Wf,$f;const Yf={GENERIC_ERROR:"_common_generic_error"},Kf=({config:e,esEndpoint:t})=>{var n;const{translate:a}=(0,g.Z)(),s=(0,i.k6)(),{teamDeviceConfigLoading:l,teamDeviceConfig:c,updateTeamDeviceConfig:d,refreshTeamDeviceConfig:_,loadTeamDeviceConfigErrorCode:u}=Qx({draft:!1,deviceAccessKey:e?.deviceAccessKey}),[m,p]=(0,r.useState)(""),[h,y]=(0,r.useState)(!1),[b,x]=(0,r.useState)(!1),[S,v]=(0,r.useState)(!1),[C,E]=(0,r.useState)(!1),Z=l;(0,r.useEffect)((()=>{const e=u;e&&e!==Y_.B&&p(e)}),[u,a]);const T=()=>s.goBack(),D=async({values:e,resetForm:n})=>{x(!0),y(!1);const a={scimEnabled:e.encryptionServiceSync,teamDeviceUrl:null!=t?t:void 0};!S&&c?.configProperties?.scimAuthToken||(a.scimAuthToken=e.scimToken);const i=await d(a);v(!1),await _(),x(!1),i.success?i.data.encryptionServiceReloadingStatus===rx.x.OK?(n({values:e}),T()):y(!0):p(i.error.code)},k={scimToken:(I=c?.configProperties?.scimAuthToken,null!=(A=I?.replace(/./g,"*"))?A:""),scimEndpoint:t?(0,RS.UQ)(t,"scim/2.0"):"",encryptionServiceSync:null!=(n=c?.configProperties?.scimEnabled)&&n};var I,A;const N=()=>{E(!1)};return(0,f.tZ)(ea.J9,{onSubmit:async(e,t)=>{e.encryptionServiceSync?E(!0):await D({values:e,resetForm:t.resetForm})},enableReinitialize:!0,initialValues:k,children:({values:e,setFieldValue:t,isSubmitting:n,dirty:i,resetForm:r})=>{var s,d;return(0,f.BX)(ea.l0,{autoComplete:"off",noValidate:!0,children:[(0,f.tZ)(sx.X,{dirty:i&&!b&&!h}),(0,f.BX)(B.Zbd,{children:[(0,f.tZ)(B.Ol2,{children:a("team_settings_directory_sync_scim_header")}),(0,f.BX)(B.aYP,{children:[(0,f.tZ)(o.ke,{mood:"brand",title:a("team_settings_directory_sync_scim_infobox")}),(0,f.BX)(B.T5p,{gridTemplateAreas:"'header button' 'desc button' 'inputField inputField'",gap:"8px",sx:{mt:"32px"},children:[(0,f.tZ)(B.dDn,{gridArea:"header",as:o.nv,innerAs:"label",htmlFor:"scimTokenInput",textStyle:"ds.title.block.medium",children:a("team_settings_directory_sync_scim_set_up_token_label")}),(0,f.tZ)(B.dDn,{as:o.zx,gridArea:"button",type:"button",alignSelf:"right",intensity:"quiet",mood:"brand",disabled:Z||n,onClick:()=>(e=>{v(!0),e("scimToken",(0,Nb.Z)())})(t),sx:{height:"fit-content",width:"100%"},children:e.scimToken?a("team_settings_directory_sync_scim_set_up_reset_buttons"):a("team_settings_directory_sync_scim_set_up_generate_buttons")}),(0,f.tZ)(B.dDn,{gridArea:"desc",as:o.nv,size:"medium",sx:{marginBottom:"24px"},color:"ds.text.neutral.quiet",children:a("team_settings_directory_sync_scim_set_up_token_description")}),(0,f.tZ)(B.dDn,{gridArea:"inputField",children:(0,f.tZ)(ea.gN,{name:"scimToken",children:({field:t})=>t.value?(0,f.tZ)(a_.x,{inputValue:t.value,iconButtonProps:{disabled:Boolean(e.scimToken)&&!S||n},passwordInputProps:{disabled:Boolean(e.scimToken)&&!S||n,fullWidth:!0,readOnly:!0,...t,id:"scimTokenInput"}}):null})})]}),(0,f.BX)(B.T5p,{gridTemplateColumns:"auto",gap:"8px",children:[(0,f.tZ)(B.dDn,{as:o.nv,innerAs:"label",htmlFor:"endpointInput",sx:{marginTop:"32px"},textStyle:"ds.title.block.medium",children:a("team_settings_directory_sync_scim_set_up_endpoint_label")}),(0,f.tZ)(ea.gN,{name:"scimEndpoint",children:({field:e})=>(0,f.tZ)(a_.x,{inputValue:e.value,textInputProps:{fullWidth:!0,readOnly:!0,...e,id:"endpointInput"}})})]}),Hf||(Hf=(0,f.tZ)("hr",{})),(0,f.BX)(B.T5p,{gridTemplateAreas:"'label toggle' 'desc .'",gap:"8px",children:[(0,f.tZ)(B.dDn,{gridArea:"label",as:o.nv,innerAs:"label",htmlFor:"encryptionServiceSync",textStyle:"ds.title.block.medium",children:a("team_settings_directory_sync_scim_set_up_service_label")}),(0,f.tZ)(B.dDn,{gridArea:"desc",as:o.nv,color:"ds.text.neutral.quiet",children:a("team_settings_directory_sync_scim_set_up_service_description")}),(0,f.tZ)(B.dDn,{gridArea:"toggle",children:l?Wf||(Wf=(0,f.tZ)(o.ZX,{mood:"brand"})):(0,f.tZ)(o.ZD,{disabled:Z||n,id:"encryptionServiceSync",onChange:e=>((e,t)=>{t("encryptionServiceSync",e.currentTarget.checked)})(e,t),defaultChecked:null!=(s=c?.configProperties?.scimEnabled)&&s})})]})]}),(0,f.BX)(B.eWM,{children:[m?(0,f.tZ)(o.nv,{sx:{width:"40%",ml:0,mr:"auto"},textStyle:"ds.title.supporting.small",children:a(null!=(d=Yf?.[m])?d:Yf.GENERIC_ERROR)}):null,h?(0,f.tZ)(o.kC,{sx:{flexGrow:1,justifyContent:"center"},children:$f||($f=(0,f.tZ)(ux,{context:"SCIM"}))}):null,(0,f.tZ)(o.zx,{mood:"neutral",intensity:"quiet",size:"large",type:"button",onClick:T,children:a("team_settings_directory_sync_scim_set_up_button_cancel")}),(0,f.tZ)(o.zx,{type:"submit",disabled:Z||n||!i,children:a("team_settings_directory_sync_scim_set_up_button_save_changes")})]})]}),C?(0,f.tZ)(Ib,{title:a("team_settings_directory_sync_scim_confirm_dialog_title"),body:a("team_settings_directory_sync_scim_confirm_dialog_body"),primaryActionLabel:a("team_settings_directory_sync_scim_confirm_dialog_primary_action_label"),onCancel:N,onConfirm:()=>(async({values:e,resetForm:t})=>{await D({values:e,resetForm:t}),E(!1)})({values:e,resetForm:r})}):null]})}})};var Qf;const Jf=({isScimEnabled:e})=>{const{translate:t}=(0,g.Z)(),{getInviteLinkDataForAdmin:n}=K_(),a=au(),i=(0,Ee.o)(A_.G.WebOnboardingInviteLinkTacMigration),[l,c]=(0,r.useState)(!1),[d,_]=(0,r.useState)(!1);if(null==i)return null;const u=a.status===s.rq.Success?a:void 0;return(0,f.BX)(o.kC,{gap:"6",children:[i?(0,f.tZ)(cu,{isOpen:l,onClose:()=>{c(!1)}}):(0,f.tZ)(tu,{showSharingDialog:l,setShowSharingDialog:c}),d?i?(0,f.tZ)(ru,{isOpen:d,onCancel:()=>{_(!1)}}):(0,f.tZ)(J_,{showActivationDialog:d,setShowActivationDialog:_,setShowSharingDialog:c}):null,(0,f.tZ)(rl,{linkProps:{linkType:il.ExternalLink,linkHref:"https://support.dashlane.com/hc/articles/4404301553938?utm_source=extension"},heading:t("team_settings_encryption_service_scim_setup_guide_heading"),description:t("team_settings_encryption_service_scim_setup_guide_description"),linkText:t("team_settings_encryption_service_scim_setup_guide_link_text")}),e?(0,f.tZ)(rl,{linkProps:{linkType:il.ExternalLink},heading:t("team_settings_encryption_service_scim_invite_link_heading"),description:(0,f.BX)("div",{children:[(0,f.tZ)(o.nv,{color:"ds.text.neutral.standard",textStyle:"ds.body.standard.regular",sx:{mb:"8px"},children:t("team_settings_encryption_service_scim_invite_link_description_first")}),(0,f.BX)(o.nv,{as:"a",color:"ds.text.brand.standard",onClick:async e=>{e.preventDefault();const t=await n();(i?u?.enabled:t?.disabled||!t?.teamKey)?_(!0):c(!0)},href:"_blank",sx:{gap:"4px"},children:[(0,f.tZ)("span",{children:t("team_settings_encryption_service_scim_invite_link_copy")}),Qf||(Qf=(0,f.tZ)(o.JO,{name:"ActionCopyOutlined",size:"medium",color:"ds.text.brand.standard"}))]})]})}):null]})};var ev,tv;const nv="/scim-settings",av=({isScimEnabled:e,isScimCapable:t,teamSettings:n,updateTeamSettings:a,disableForm:s=!1,adSyncEnabled:c,ssoConnectorSetup:d})=>{const[u,p]=(0,r.useState)(!1),{translate:h}=(0,g.Z)(),{path:y}=(0,i.$B)(),{esConfig:b,esConfigLoading:x,refreshEncryptionServiceConfig:S}=ix(),v=(0,Ee.o)(me.w.ItadminTacEncryptionserviceSSOmigrationReset),C=Boolean(v||!x&&d);(0,r.useEffect)((()=>{(0,m.Nc)(l.PageView.TacSettingsDirectorySyncSelfHostedScim)}),[]);const E=xe({hasBillingAccess:!0});if(!E)return null;const{shouldShowBuyOrUpgradePaywall:Z,planType:T,isTrialOrGracePeriod:D}=E,k=Z&&T!==_.lD.Business;return(0,f.tZ)(Hb,{title:"Self-hosted SCIM",children:(0,f.tZ)(ni,{mainContent:(0,f.tZ)(B.T5p,{gridTemplateColumns:"auto",gridAutoRows:"min-content",gap:"32px",children:(0,f.BX)(i.rs,{children:[(0,f.BX)(i.AW,{exact:!0,path:y,children:[k?(0,f.tZ)(jf,{isSCIMCapable:t,isTrialOrGracePeriod:D,showPaywall:!0}):(0,f.BX)(f.HY,{children:[ev||(ev=(0,f.tZ)(ux,{})),(0,f.tZ)(jf,{isSCIMCapable:t}),c?(0,f.tZ)(o.ke,{size:"medium",mood:"neutral",title:h("team_settings_encryption_service_scim_setup_ad_sync_warning_heading"),description:h("team_settings_encryption_service_scim_setup_ad_sync_warning_description")}):null,C?(0,f.tZ)(o.ke,{size:"medium",mood:"brand",title:h("team_settings_es_sso_migration_infobox_title"),description:(0,f.tZ)(o.nv,{children:h("team_settings_es_sso_migration_infobox_body")})}):null,(0,f.tZ)(Bx,{parentPath:y,loading:x||null===t,esConfig:b,disableSetupButton:!1===t||s}),(0,f.tZ)(Vf,{teamSettings:n,parentPath:y,loading:x||null===t,esConfig:b,isScimCapable:!0===t,disableSetupButton:s})]}),u?(0,f.tZ)(ne.c,{onDismiss:()=>p(!1)}):null]}),(0,f.tZ)(i.AW,{path:`${y}/encryption-service-settings`,children:x?tv||(tv=(0,f.tZ)(o.ZX,{mood:"brand"})):(0,f.tZ)(Nx,{migratingFromSSOConnector:C,onSave:()=>S(),teamSettings:n,updateTeamSettings:a,esConfig:b})}),(0,f.tZ)(i.AW,{path:`${y}${nv}`,children:(0,f.tZ)(Kf,{config:b,esEndpoint:n?.ssoServiceProviderUrl})})]})}),secondaryContent:k?(0,f.tZ)(sl,{openContactDialog:()=>p(!0)}):(0,f.tZ)(Jf,{isScimEnabled:e})})})},iv={title:"tac_settings_directory_sync_card_title_confidential_scim",redirectUrl:"confidential-scim",supportedFeatures:[{title:"tac_settings_directory_sync_card_cloud_based",description:"tac_settings_directory_sync_card_cloud_based_description",iconName:"SettingsOutlined"},{title:"tac_settings_directory_sync_card_confidential_automatic_syncs",description:"tac_settings_directory_sync_card_confidential_automatic_syncs_description",iconName:"ConfigureOutlined"},{title:"tac_settings_directory_sync_card_user_provisioning",description:"tac_settings_directory_sync_card_user_provisioning_description",iconName:"GroupOutlined"},{title:"tac_settings_directory_sync_card_sharing_group",description:"tac_settings_directory_sync_card_sharing_group_description",iconName:"FeedbackSuccessOutlined"}]},rv={title:"tac_settings_directory_sync_card_title_selfhosted_scim",redirectUrl:"scim-provisioning",supportedFeatures:[{title:"tac_settings_directory_sync_card_selfhosted_scim_cloud_based",description:"tac_settings_directory_sync_card_selfhosted_scim_cloud_based_description",iconName:"AccountSettingsOutlined"},{title:"tac_settings_directory_sync_card_selfhosted_confidential_automatic_syncs",description:"tac_settings_directory_sync_card_selfhosted_confidential_automatic_syncs_description",iconName:"ConfigureOutlined"},{title:"tac_settings_directory_sync_card_selfhosted_user_provisioning",description:"tac_settings_directory_sync_card_selfhosted_user_provisioning_description",iconName:"GroupOutlined"},{title:"tac_settings_directory_sync_card_selfhosted_sharing_group",description:"tac_settings_directory_sync_card_selfhosted_sharing_group_description",iconName:"FeedbackSuccessOutlined"}]},sv={title:"tac_settings_directory_sync_card_title_ad_sync",redirectUrl:"active-directory",supportedFeatures:[{title:"tac_settings_directory_sync_card_ad_sync_cloud_based",description:"tac_settings_directory_sync_card_ad_sync_cloud_based_description",iconName:"AccountSettingsOutlined"},{title:"tac_settings_directory_sync_card_automatic_ad_sync_syncs",description:"tac_settings_directory_sync_card_automatic_ad_sync_syncs_description",iconName:"ConfigureOutlined"},{title:"tac_settings_directory_sync_card_ad_sync_user_provisioning",description:"tac_settings_directory_sync_card_ad_sync_user_provisioning_description",iconName:"GroupOutlined"},{title:"tac_settings_directory_sync_card_ad_sync_sharing_group",description:"tac_settings_directory_sync_card_ad_sync_sharing_group_description",iconName:"FeedbackSuccessOutlined"}]},ov=({isNitroSSOActivated:e,isSelfhostedSSOActivated:t})=>{const{translate:n}=(0,g.Z)(),{routes:a}=(0,Ao.Xo)();return e||t?(0,f.tZ)(o.ke,{title:n(e?"tac_settings_directory_sync_card_disabled_selfhosted_incompatible":"tac_settings_directory_sync_card_disabled_confidential_incompatible"),size:"large"}):(0,f.tZ)(o.ke,{title:n("tac_settings_directory_sync_card_disabled_confidential_not_activated"),size:"large",actions:[(0,f.tZ)(o.zx,{as:i.rU,to:a.teamSettingsSsoConfidential,size:"small",children:n("tac_settings_directory_sync_card_disabled_confidential_not_activated_button")},"enable-confidential-sso")]})},lv="tac_settings_directory_sync_card_button_setup",cv="tac_settings_directory_sync_card_button_edit";let dv=function(e){return e.ConfidentialScim="confidential-scim-cta",e.SelfhostedScim="selfhosted-scim-cta",e.AdSyncScim="adsync-scim-cta",e}({});const _v=({ssoState:e,scimState:t,isLoading:n=!1})=>{const{translate:a}=(0,g.Z)(),s=(0,Ms.S)(),c=!!s?.scim.enabled,d=xe({hasBillingAccess:!0}),_=!!d?.isTrialOrGracePeriod,u=(0,i.k6)(),{routes:p}=(0,i.Xo)(),h=pc(),[y,b]=(0,r.useState)(!1),x=t!==Nf.r.enum.None,S=e===eb.s5.enum.SsoConnectorComplete||e===eb.s5.enum.SsoConnectorIncomplete,v=h?"tac_settings_directory_sync_entrylevel_header_helper":"tac_settings_directory_sync_header_helper";return(0,r.useEffect)((()=>{(0,m.Nc)(l.PageView.TacSettingsDirectorySync)}),[]),n||null===s||null===d?(0,f.tZ)(B.T5p,{justifyItems:"center",children:(0,f.tZ)(o.ZX,{size:75,sx:{marginTop:"20vh"}})}):(0,f.BX)("div",{sx:{margin:"32px",display:"flex",gap:"32px",flexDirection:"column"},children:[(0,f.BX)("div",{children:[(0,f.tZ)(o.X6,{as:"h1",textStyle:"ds.title.section.large",sx:{marginBottom:"16px"},children:a("tac_settings_directory_sync_header")}),(0,f.tZ)(o.nv,{sx:{marginBottom:"8px"},children:a(v)}),(0,f.tZ)(al,{href:"https://support.dashlane.com/hc/articles/4404301553938?utm_source=extension",children:a("tac_settings_directory_sync_header_link")})]}),x||S||h?null:(0,f.tZ)(ov,{isNitroSSOActivated:e===eb.s5.enum.NitroComplete,isSelfhostedSSOActivated:e===eb.s5.enum.SelfHostedComplete}),h?(0,f.BX)(B.T5p,{fullWidth:!0,gridTemplateColumns:"1fr 1fr 0.5fr",gap:"24px",children:[(0,f.tZ)(rf,{setBusinessPlanBadge:!0,...sv,selected:t===Nf.r.enum.AdSyncComplete,featureCardStatus:"NOT_STARTED",buttonLabel:a("team_upgrade_to_business"),onCtaClick:()=>{u.push(`${p.teamAccountChangePlanRoutePath}?plan=business`)}}),(0,f.tZ)(qf,{isTrialOrGracePeriod:_}),(0,f.tZ)("div",{sx:{height:"252px"},children:(0,f.tZ)(sl,{openContactDialog:()=>b(!0)})}),y?(0,f.tZ)(ne.c,{onDismiss:()=>b(!1)}):null]}):(0,f.tZ)(B.T5p,{fullWidth:!0,gridTemplateColumns:"repeat(3, 1fr)",gap:"24px",children:c?(0,f.BX)(f.HY,{children:[(0,f.tZ)(rf,{optionNumber:1,...iv,selected:t===Nf.r.enum.NitroComplete,buttonLabel:a(t===Nf.r.enum.NitroComplete?cv:lv),disabled:e!==eb.s5.enum.NitroComplete||t===Nf.r.enum.SelfHostedComplete||t===Nf.r.enum.AdSyncComplete,featureCardStatus:t===Nf.r.enum.NitroComplete?"ACTIVATED":"NOT_STARTED",onCtaClick:()=>{(0,m.Kz)(new l.UserSetupConfidentialScimEvent({scimSetupStep:l.ScimSetupStep.ClickSetUp}))},ctaDataTestId:dv.ConfidentialScim}),(0,f.tZ)(rf,{optionNumber:2,...rv,selected:t===Nf.r.enum.SelfHostedComplete,buttonLabel:a(t===Nf.r.enum.SelfHostedComplete?cv:lv),featureCardStatus:t===Nf.r.enum.SelfHostedComplete?"ACTIVATED":"NOT_STARTED",disabled:e===eb.s5.enum.NitroComplete||e===eb.s5.enum.NitroIncomplete||e===eb.s5.enum.SsoConnectorComplete||e===eb.s5.enum.SsoConnectorIncomplete||t===Nf.r.enum.NitroComplete||t===Nf.r.enum.AdSyncComplete,ctaDataTestId:dv.SelfhostedScim}),(0,f.tZ)(rf,{optionNumber:3,...sv,selected:t===Nf.r.enum.AdSyncComplete,featureCardStatus:t===Nf.r.enum.AdSyncComplete?"ACTIVATED":"NOT_STARTED",buttonLabel:a(t===Nf.r.enum.AdSyncComplete?cv:lv),disabled:t===Nf.r.enum.NitroComplete||t===Nf.r.enum.SelfHostedComplete,ctaDataTestId:dv.AdSyncScim})]}):(0,f.BX)(f.HY,{children:[(0,f.tZ)(rf,{optionNumber:1,...sv,selected:t===Nf.r.enum.AdSyncComplete,featureCardStatus:t===Nf.r.enum.AdSyncComplete?"ACTIVATED":"NOT_STARTED",buttonLabel:a(t===Nf.r.enum.AdSyncComplete?cv:lv),disabled:t===Nf.r.enum.NitroComplete||t===Nf.r.enum.SelfHostedComplete,ctaDataTestId:"adsync-scim-cta"}),(0,f.tZ)(qf,{isTrialOrGracePeriod:_})]})})]})},uv=({isTokenGenerated:e})=>{const[t,n]=(0,r.useState)(!1),[a,i]=(0,r.useState)(!1),{translate:s}=(0,g.Z)(),{generateScimToken:c}=(0,F.u)(JS.m),d=(0,r.useCallback)((async()=>{n(!0),await c(void 0),(0,m.Kz)(new l.UserSetupConfidentialScimEvent({scimSetupStep:e?l.ScimSetupStep.ReGenerateToken:l.ScimSetupStep.GenerateScimToken})),n(!1)}),[c,e]);return(0,f.BX)(f.HY,{children:[(0,f.tZ)(o.X6,{as:"h2",textStyle:"ds.title.section.medium",sx:{marginBottom:"8px"},children:s("tac_settings_confidential_scim_generate_token_header")}),(0,f.tZ)(o.nv,{textStyle:"ds.body.standard.regular",sx:{marginBottom:"24px"},children:s("tac_settings_confidential_scim_generate_token_header_helper")}),(0,f.tZ)(o.zx,{intensity:e?"quiet":"catchy",mood:"brand",isLoading:!e&&t,onClick:e?()=>i(!0):d,children:s(e?"tac_settings_confidential_scim_regenerate_token_button":"tac_settings_confidential_scim_generate_token_button")}),(0,f.tZ)(o.Vq,{actions:{primary:{children:s("tac_settings_confidential_scim_regenerate_token_dialog_primary_action"),onClick:()=>{d(),i(!1)},isLoading:t},secondary:{children:s("tac_settings_confidential_scim_regenerate_token_dialog_secondary_action"),onClick:()=>i(!1)}},closeActionLabel:"Close",onClose:()=>i(!1),title:s("tac_settings_confidential_scim_regenerate_token_dialog_title"),isOpen:a,children:(0,f.tZ)(o.nv,{children:s("tac_settings_confidential_scim_regenerate_token_dialog")})})]})},mv="input_copy_button",pv="input_copied_button_feedback",gv=({scimApiToken:e,scimEndpoint:t})=>{const{translate:n}=(0,g.Z)(),[a,i]=(0,r.useState)(!1),[s,c]=(0,r.useState)(!1),d=async(e,t)=>{t&&(await navigator.clipboard.writeText(t),"token"===e?(i(!0),setTimeout((()=>i(!1)),2e3)):(c(!0),setTimeout((()=>c(!1)),2e3)))};return(0,f.BX)(f.HY,{children:[(0,f.tZ)(o.X6,{as:"h2",textStyle:"ds.title.section.medium",sx:{marginBottom:"8px"},children:n("tac_settings_confidential_scim_copy_token_header")}),(0,f.tZ)(o.nv,{textStyle:"ds.body.standard.regular",sx:{marginBottom:"24px"},children:n("tac_settings_confidential_scim_copy_token_header_helper")}),(0,f.tZ)(o.ZI,{label:n("tac_settings_confidential_scim_copy_token_field_token_label"),value:null!=e?e:"",disabled:!e,readOnly:!!e,toggleVisibilityLabel:{hide:n("_common_password_hide_label"),show:n("_common_password_show_label")},sx:{marginBottom:"16px"},actions:[{iconName:"ActionCopyOutlined",label:n(a?pv:mv),key:"copy-token",onClick:async()=>{await d("token",null!=e?e:""),(0,m.Kz)(new l.UserSetupConfidentialScimEvent({scimSetupStep:l.ScimSetupStep.CopyApiToken}))}}]}),(0,f.tZ)(o.qo,{value:null!=t?t:"",label:n("tac_settings_confidential_scim_copy_token_field_endpoint_label"),disabled:!t,readOnly:!!t,actions:[{iconName:"ActionCopyOutlined",key:"copy-endpoint",label:n(s?pv:mv),onClick:async()=>{(0,m.Kz)(new l.UserSetupConfidentialScimEvent({scimSetupStep:l.ScimSetupStep.CopyEndpointLink})),await d("endpoint",null!=t?t:"")}}]})]})},hv=({active:e})=>{const t=(0,r.useRef)(!1),{translate:n}=(0,g.Z)(),{updateScimConfiguration:a}=(0,F.u)(JS.m),{showToast:i}=(0,o.pm)();return(0,r.useEffect)((()=>(t.current&&i({description:n(e?"tac_settings_activate_automatic_provisioning":"tac_settings_deactivate_automatic_provisioning"),closeActionLabel:"close"}),()=>{t.current=!0})),[e]),(0,f.BX)(B.T5p,{gridTemplateAreas:"'title toggle' 'description toggle'",alignItems:"center",children:[(0,f.tZ)(B.dDn,{gridArea:"title",as:o.X6,id:"userProvisioningActivation",innerAs:"h2",textStyle:"ds.title.section.medium",sx:{marginBottom:"8px"},children:n("tac_settings_confidential_scim_activate_header")}),(0,f.tZ)(B.dDn,{gridArea:"description",as:o.nv,textStyle:"ds.body.standard.regular",children:n("tac_settings_confidential_scim_activate_header_helper")}),(0,f.tZ)(B.dDn,{justifySelf:"end",gridArea:"toggle",as:o.ZD,"aria-labelledby":"userProvisioningActivation",sx:{marginLeft:"24px"},onChange:()=>{(0,m.Kz)(new l.UserSetupConfidentialScimEvent({scimSetupStep:e?l.ScimSetupStep.DeactivateDirectorySync:l.ScimSetupStep.ActivateDirectorySync})),a({active:!e})},checked:e})]})},yv=({scimEndpoint:e,scimConfiguration:t})=>{const{translate:n}=(0,g.Z)();return(0,f.BX)(o.kC,{gap:"32px",flexDirection:"column",as:B.Zbd,sx:{padding:"32px"},children:[(0,f.tZ)(o.Ct,{mood:"neutral",intensity:"quiet",label:n("tac_settings_confidential_scim_user_provisioning_badge"),sx:{marginBottom:"calc(8px - 32px)"}}),(0,f.tZ)("div",{children:(0,f.tZ)(uv,{isTokenGenerated:!!t.token})}),(0,f.tZ)("div",{children:(0,f.tZ)(gv,{scimEndpoint:e?.endpoint,scimApiToken:t.token})}),(0,f.tZ)("div",{children:(0,f.tZ)(hv,{active:t.active})})]})};var bv,xv,Sv;const fv={SEATS_REVIEW_SECTION:{display:"flex",flexDirection:"row",gap:"24px",marginBottom:"24px"},SEATS_REVIEW_ITEM:{width:"120px",display:"flex",flexDirection:"column",gap:"4px"},VERTICAL_DIVIDER:{borderLeft:"1px solid ds.border.neutral.quiet.idle",height:"48px"},BUTTON_SECTION:{display:"flex",flexDirection:"row",gap:"8px"}},vv=({onClickBuySeats:e})=>{const{translate:t}=(0,g.Z)(),{routes:n}=(0,i.Xo)(),{data:a}=(0,c.k)(d.o,"getTeamSeats"),r=(0,re.C)(),s=(0,G.U)();if(!r)return null;const _=`${ae.ub}?plan=business&subCode=${null!=s?s:""}`;return(0,f.BX)(B.Zbd,{sx:{display:"flex",flexDirection:"column",gap:"8px",padding:"32px"},children:[(0,f.tZ)(o.Ct,{mood:"brand",intensity:"quiet",layout:"iconLeading",iconName:"PremiumOutlined",label:t("tac_settings_confidential_scim_review_seats_card_pro_tip_badge")}),(0,f.BX)("div",{children:[(0,f.tZ)(o.X6,{as:"h2",textStyle:"ds.title.section.medium",sx:{marginBottom:"8px"},children:t("tac_settings_confidential_scim_review_seats_card_header")}),(0,f.tZ)(o.nv,{textStyle:"ds.body.standard.regular",sx:{marginBottom:"24px"},children:t("tac_settings_confidential_scim_review_seats_card_description")}),(0,f.BX)("div",{sx:fv.SEATS_REVIEW_SECTION,children:[(0,f.BX)("div",{sx:fv.SEATS_REVIEW_ITEM,children:[(0,f.tZ)(o.X6,{as:"h3",textStyle:"ds.title.supporting.small",color:"ds.text.neutral.quiet",children:t("tac_settings_confidential_scim_review_seats_card_total_seats")}),(0,f.tZ)(o.nv,{textStyle:"ds.specialty.monospace.small",color:"ds.text.neutral.standard",children:a?a.paid:bv||(bv=(0,f.tZ)(o.ZX,{}))})]}),(0,f.tZ)("div",{sx:fv.VERTICAL_DIVIDER}),(0,f.BX)("div",{sx:fv.SEATS_REVIEW_ITEM,children:[(0,f.tZ)(o.X6,{as:"h3",textStyle:"ds.title.supporting.small",color:"ds.text.neutral.quiet",children:t("tac_settings_confidential_scim_review_seats_card_occupied")}),(0,f.tZ)(o.nv,{textStyle:"ds.specialty.monospace.small",color:"ds.text.positive.quiet",children:a?a.paid-a.remaining:xv||(xv=(0,f.tZ)(o.ZX,{}))})]}),(0,f.tZ)("div",{sx:fv.VERTICAL_DIVIDER}),(0,f.BX)("div",{sx:fv.SEATS_REVIEW_ITEM,children:[(0,f.tZ)(o.X6,{as:"h3",textStyle:"ds.title.supporting.small",color:"ds.text.neutral.quiet",children:t("tac_settings_confidential_scim_review_seats_card_free")}),(0,f.tZ)(o.nv,{textStyle:"ds.specialty.monospace.small",color:"ds.text.positive.quiet",children:a?a.remaining:Sv||(Sv=(0,f.tZ)(o.ZX,{}))})]})]}),(0,f.BX)("div",{sx:fv.BUTTON_SECTION,children:[r.isFreeTrial?(0,f.tZ)(o.zx,{mood:"brand",intensity:"quiet",layout:"labelOnly",role:"link",onClick:()=>{(0,m.Kz)(new l.UserClickEvent({button:l.Button.BuyDashlane,clickOrigin:l.ClickOrigin.ProTip})),(0,X.Yo)(_)},children:t("team_buy_dashlane")}):(0,f.tZ)(o.zx,{mood:"brand",intensity:"quiet",layout:"labelOnly",onClick:e,children:t("tac_settings_confidential_scim_review_seats_card_buy_seats_button")}),(0,f.tZ)(om.rU,{to:n.teamAccountRoutePath,children:(0,f.tZ)(o.zx,{mood:"brand",intensity:"supershy",layout:"labelOnly",onClick:()=>{(0,m.Kz)(new l.UserClickEvent({button:l.Button.ReviewSubscription,clickOrigin:l.ClickOrigin.ProTip}))},children:t("tac_settings_confidential_scim_review_seats_card_review_subscription_button")})})]})]})]})},Cv=()=>{var e;const{translate:t}=(0,g.Z)(),{showToast:n}=(0,o.pm)(),[a,i]=(0,r.useState)(!1),{updateGroupProvisioningConfiguration:s}=(0,F.u)(Jy.y),{groupProvisioningConfiguration:d}=(()=>{const{data:e,status:t}=(0,c.k)(Jy.y,"getGroupProvisioningConfiguration");return t!==Ze.rq.Success?{groupProvisioningConfiguration:null}:{groupProvisioningConfiguration:e}})();return null===d?null:(0,f.BX)(B.Zbd,{sx:{display:"flex",flexDirection:"column",gap:"32px",padding:"32px"},children:[(0,f.BX)("div",{children:[(0,f.tZ)(o.Ct,{mood:"neutral",intensity:"quiet",label:t("tac_settings_confidential_scim_group_provisioning_badge"),sx:{marginBottom:"8px"}}),(0,f.tZ)(o.X6,{as:"h2",textStyle:"ds.title.section.medium",sx:{marginBottom:"8px"},children:t("tac_settings_confidential_scim_group_provisioning_header")}),(0,f.tZ)(o.nv,{sx:{marginBottom:"24px"},children:t("tac_settings_confidential_scim_group_provisioning_description")}),(0,f.tZ)(o.Qj,{href:"https://support.dashlane.com/hc/articles/10992671925778?utm_medium=misc&utm_source=dashlane_admin_console#scim",isExternal:!0,onClick:()=>{(0,m.Kz)(new l.UserOpenHelpCenterEvent({helpCenterArticleCta:l.HelpCenterArticleCta.SeeGroupProvisioningSetupGuide}))},children:t("tac_settings_confidential_scim_group_provisioning_support_link")})]}),(0,f.BX)("div",{sx:{display:"flex",gap:"24px",flexDirection:"row",alignItems:"center"},children:[(0,f.BX)("div",{children:[(0,f.tZ)(o.X6,{id:"groupProvisioningActivation",as:"h2",textStyle:"ds.title.section.medium",sx:{marginBottom:"8px"},children:t("tac_settings_confidential_scim_group_provisioning_step_2_header")}),(0,f.tZ)(o.nv,{textStyle:"ds.body.standard.regular",children:t("tac_settings_confidential_scim_group_provisioning_step_2_description")})]}),(0,f.tZ)(o.ZD,{"aria-labelledby":"groupProvisioningActivation",checked:null!=(e=d.groupProvisioningActivated)&&e,onChange:()=>(async()=>{var e;i(!0),"failure"===(await s({groupProvisioningActivated:null==(e=!d.groupProvisioningActivated)||e})).tag?n({mood:"danger",description:t("tac_settings_confidential_scim_group_provisioning_generic_error")}):(n({mood:"brand",description:t(d.groupProvisioningActivated?"tac_settings_confidential_scim_group_provisioning_toast_disabled":"tac_settings_confidential_scim_group_provisioning_toast_enabled")}),d.groupProvisioningActivated||(0,m.Kz)(new l.UserSetupConfidentialScimEvent({scimSetupStep:l.ScimSetupStep.ActivateGroupSync}))),i(!1)})(),readOnly:a})]})]})};var Ev;const Zv=()=>{var e,t;const{translate:n}=(0,g.Z)(),[a,i]=(0,r.useState)(),[s,o]=(0,r.useState)(),[c,d]=(0,r.useState)(!1),[p,h]=(0,r.useState)(!1),[y,b]=(0,r.useState)(),[x,S]=(0,r.useState)(),[v,C]=(0,r.useState)(!1),{scimConfiguration:E,scimEndpoint:Z}=(0,bl.Y)(JS.m,{scimConfiguration:{},scimEndpoint:{}},[]),T=(0,u.s)(),D=(0,Ee.o)(hi.P.ComputePlanPricingMigration),k=(e,t)=>{b(e),S(t),d(!1),h(!0)},I=()=>{T?.billingType===_.qo.Invoice?C(!0):d(!0),(0,m.Kz)(new l.UserClickEvent({button:l.Button.BuySeats,clickOrigin:l.ClickOrigin.ProTip}))};if((0,r.useEffect)((()=>{E.status===Ze.rq.Success&&E.data&&i(E.data)}),[E.data?.active,E.data?.token]),(0,r.useEffect)((()=>{Z.status===Ze.rq.Success&&Z.data&&o(Z.data)}),[Z.data?.endpoint]),(0,r.useEffect)((()=>{(0,m.Nc)(l.PageView.TacSettingsDirectorySyncConfidentialScim)}),[]),!T)return null;const{lastBillingDateUnix:A,nextBillingDetails:N,spaceTier:w,seatsNumber:O,usersToBeRenewedCount:R}=T;return(0,f.BX)(f.HY,{children:[p?null:(0,f.tZ)(Hb,{title:n("tac_settings_confidential_scim_header"),paragraph:n("tac_settings_confidential_scim_header_helper"),children:(0,f.tZ)(ni,{sx:{padding:"0 32px"},fullWidth:!0,mainContent:()=>(0,f.tZ)("div",{sx:{display:"flex",flexDirection:"column",gap:"24px"},children:a?(0,f.BX)(f.HY,{children:[e||(e=(0,f.tZ)(yv,{scimConfiguration:a,scimEndpoint:s})),a.active?t||(t=(0,f.tZ)(vv,{onClickBuySeats:I})):null,Ev||(Ev=(0,f.tZ)(Cv,{}))]}):null}),secondaryContent:(0,f.tZ)(rl,{heading:n("tac_settings_confidential_scim_help_card_header"),description:n("tac_settings_confidential_scim_help_card_description"),linkProps:{linkType:il.ExternalLink,linkHref:"https://support.dashlane.com/hc/articles/360013149040",onClick:()=>{(0,m.Kz)(new l.UserClickEvent({button:l.Button.SeeSetupGuide,clickOrigin:l.ClickOrigin.NeedHelp}))}},linkText:n("tac_settings_confidential_scim_help_card_link")})})}),v?(0,f.tZ)(Yi,{openUpgradeDialog:()=>{d(!0),C(!1)},handleClose:()=>C(!1)}):null,c?D?(0,f.tZ)(or,{numberOfCurrentPaidSlots:O,onUpgradeSuccess:k,onClose:()=>d(!1)}):(0,f.tZ)(ji,{nextBillingDetails:N,numberOfCurrentPaidSlots:O,numberOfCurrentUsedSlots:R,onUpgradeSuccess:k,onRequestClose:()=>d(!1),planTier:w},A):null,p&&y&&x?(0,f.tZ)(Fr,{lastAdditionalSeatsDetails:y,lastBillingDetails:x,onNavigateBack:()=>{h(!1),b(void 0),S(void 0)}}):null]})};function Tv({isNitroSCIMEnabled:e,isSelfhostedScimEnabled:t,isAdSyncEnabled:n,ssoState:a}){return a?e&&a===eb.s5.enum.NitroComplete?Nf.r.enum.NitroComplete:t&&a!==eb.s5.enum.SsoConnectorComplete&&a!==eb.s5.enum.SsoConnectorIncomplete&&a!==eb.s5.enum.NitroComplete&&a!==eb.s5.enum.NitroIncomplete?Nf.r.enum.SelfHostedComplete:n?Nf.r.enum.AdSyncComplete:Nf.r.enum.None:Nf.r.enum.None}const Dv="/scim-provisioning",kv="/confidential-scim",Iv="/active-directory",Av=()=>{var e,t;const{path:n}=(0,i.$B)(),{esConfig:a,esConfigLoading:s}=ix(),{teamDeviceConfig:l}=Qx({draft:!1,deviceAccessKey:a?.deviceAccessKey}),{teamId:d}=(0,Ce.fV)(),{teamSettings:_={},teamSettingsLoading:u,updateTeamSettings:m,teamCapabilities:p}=ve(d),g=(0,U.B)(),{initSsoProvisioning:h}=(0,F.u)(Jy.y),y=!u&&_.activeDirectorySyncType,b=l?.configProperties.scimEnabled,x=null!=(e=p?.activeDirectorySync.enabled)?e:null,{data:S}=(0,c.k)(Jy.y,"ssoProvisioning"),{data:v,status:C}=(0,c.k)(JS.m,"scimConfiguration"),E=S?.global.inferredSsoState,Z=Tv({isAdSyncEnabled:!!y,isSelfhostedScimEnabled:!!b,isNitroSCIMEnabled:!!v?.active,ssoState:E}),T=E===eb.s5.enum.NitroComplete||E===eb.s5.enum.NitroIncomplete||E===eb.s5.enum.SsoConnectorComplete||E===eb.s5.enum.SsoConnectorIncomplete||Z===Nf.r.enum.NitroComplete,D=E===eb.s5.enum.SelfHostedComplete||E===eb.s5.enum.SelfHostedIncomplete||E===eb.s5.enum.SsoConnectorComplete||E===eb.s5.enum.SsoConnectorIncomplete||Z===Nf.r.enum.SelfHostedComplete;(0,r.useEffect)((()=>{E===eb.s5.enum.Unknown&&d&&h({teamId:`${d}`})}),[h,E,d]);const k=b&&!y||!x,I=E===eb.s5.enum.NitroIncomplete||y&&!b,A=u||s||!g||E===eb.s5.enum.Unknown||C===Ze.rq.Loading,N=[eb.s5.enum.SsoConnectorComplete,eb.s5.enum.SsoConnectorIncomplete],w=E&&N.includes(E);return(0,f.tZ)(B.T5p,{gridTemplateColumns:"auto",gridTemplateRows:"auto 1fr",fullWidth:!0,sx:{height:"100%"},children:A?(0,f.tZ)(B.T5p,{justifyItems:"center",children:(0,f.tZ)(o.ZX,{size:75,sx:{marginTop:"20vh"}})}):(0,f.BX)(i.rs,{children:[(0,f.tZ)(i.Vy,{exact:!0,path:n,component:_v,permission:e=>e.adminAccess.hasFullAccess||e.adminAccess.hasBillingAccess,additionalProps:{ssoState:E,scimState:Z,isLoading:A}}),(0,f.tZ)(i.Vy,{exact:!0,path:`${n}${kv}`,component:Zv,permission:e=>!D&&(e.adminAccess.hasFullAccess||e.adminAccess.hasBillingAccess)}),(0,f.tZ)(i.Vy,{path:`${n}${Dv}`,component:av,additionalProps:{isScimEnabled:null!=b?b:null,isScimCapable:null!=(t=p?.scim.enabled)?t:null,teamSettings:_,updateTeamSettings:m,disableForm:I,adSyncEnabled:y,ssoConnectorSetup:w},permission:e=>!T&&(e.adminAccess.hasFullAccess||e.adminAccess.hasBillingAccess),redirectPath:n}),(0,f.tZ)(i.Vy,{path:`${n}${Iv}`,component:Bf,additionalProps:{isAdSyncCapable:x,disableForm:k,adSyncEnabled:y,accountInfo:g},reducer:wf.ZP})]})})};var Nv=n(14088);const wv=()=>{const{translate:e}=(0,g.Z)();return(0,f.BX)("div",{sx:{padding:"24px",borderColor:"ds.border.neutral.quiet.idle",backgroundColor:"ds.container.agnostic.neutral.supershy",borderRadius:"8px",display:"flex",flexDirection:"column",gap:"32px"},children:[(0,f.BX)("div",{sx:{display:"flex",flexDirection:"column",rowGap:"4px"},children:[(0,f.tZ)(o.Ct,{label:e("team_integrations_mass_deployment_badge"),mood:"brand",intensity:"quiet"}),(0,f.tZ)(o.X6,{as:"h2",textStyle:"ds.title.section.medium",color:"ds.text.neutral.catchy",children:e("team_integrations_mass_deployment_title")}),(0,f.tZ)(o.nv,{textStyle:"ds.body.standard.regular",color:"ds.text.neutral.standard",children:e("team_integrations_mass_deployment_description")})]}),(0,f.tZ)(o.Qj,{href:"https://support.dashlane.com/hc/articles/16995560527250-Mass-deploy-the-Dashlane-browser-extension",isExternal:!0,children:e("team_integrations_mass_deployment_link")})]})};var Ov=n(97275);const Rv=({containerTitle:e,containerDescription:t,isMainButtonDisabled:n=!1,disabledReason:a,mainButtonLink:i,badgeLabel:r,isCapable:s,children:l})=>(0,f.BX)("div",{sx:{padding:"24px",borderColor:"ds.border.neutral.quiet.idle",backgroundColor:"ds.container.agnostic.neutral.supershy",borderRadius:"8px",display:"flex",flexDirection:"column",gap:"32px"},children:[(0,f.BX)("div",{sx:{display:"flex",flexDirection:"column",gap:"4px"},children:[(0,f.tZ)(o.Ct,{label:r,mood:i?"brand":"neutral",intensity:"quiet"}),(0,f.tZ)(o.X6,{as:"h2",textStyle:"ds.title.section.medium",color:"ds.text.neutral.catchy",children:e}),!!t&&(0,f.tZ)(o.nv,{textStyle:"ds.body.standard.regular",color:"ds.text.neutral.standard",children:t})]}),l,!!n&&!!a&&s&&(0,f.tZ)(o.nv,{color:"ds.text.neutral.quiet",sx:{margin:"-28px 0px 0px 12px"},children:a})]}),Lv=({subCardDescription:e,subCardHeader:t,image:n,externalLink:a,externalLinkTitle:r,externalLinkOnClick:s,isMainButtonDisabled:l=!1,mainButtonTitle:c,mainButtonLink:d,mainButtonOnClick:_,secondButtonTitle:u,secondButtonLink:m,upgradeButtonLink:p,isCapable:h})=>{const{translate:y}=(0,g.Z)();return(0,f.BX)("div",{sx:{display:"flex",flex:1,backgroundColor:"ds.background.alternate",padding:"24px",borderRadius:"8px"},children:[(0,f.BX)("div",{sx:{display:"flex",flex:n?3:1,flexDirection:"column",justifyContent:"center",gap:"10px"},children:[(0,f.tZ)(o.X6,{as:"h2",textStyle:"ds.title.block.medium",color:"ds.text.neutral.catchy",children:t}),e||a||d||p?(0,f.BX)("div",{sx:{display:"flex",flexDirection:"column",gap:"24px"},children:[e?(0,f.tZ)(o.nv,{textStyle:"ds.body.standard.regular",color:"ds.text.neutral.standard",children:e}):null,!!a&&(0,f.tZ)(o.Qj,{href:a,isExternal:!0,onClick:s,children:r}),h&&d?(0,f.BX)("div",{sx:{display:"flex",gap:"8px"},children:[(0,f.tZ)(o.zx,{as:i.rU,to:d,disabled:l,onClick:_,children:c}),m?(0,f.tZ)(o.zx,{as:i.rU,to:m,mood:"neutral",intensity:"quiet",children:u}):null]}):p&&(0,f.tZ)(o.zx,{as:i.rU,to:p,layout:"iconLeading",icon:"PremiumOutlined",mood:"brand",intensity:"catchy",children:y("team_settings_directory_sync_scim_paywall_upgrade_business")})]}):null]}),n&&(0,f.tZ)("div",{sx:{display:"flex",justifyContent:"end",flex:1},children:(0,f.tZ)("img",{role:"presentation",alt:"",src:n,sx:{objectFit:"contain",width:"100%",height:"auto",maxWidth:"200px"}})})]})},Mv=({containerTitle:e,containerDescription:t,subCardDescription:n,subCardHeader:a,image:i,externalLink:r,externalLinkTitle:s,externalLinkOnClick:o,isMainButtonDisabled:l=!1,disabledReason:c,mainButtonTitle:d,mainButtonLink:_,mainButtonOnClick:u,secondButtonTitle:m,secondButtonLink:p,badgeLabel:g,upgradeButtonLink:h,isCapable:y})=>(0,f.tZ)(Rv,{containerTitle:e,containerDescription:t,isMainButtonDisabled:l,disabledReason:c,mainButtonLink:_,badgeLabel:g,isCapable:y,children:(0,f.tZ)(Lv,{subCardDescription:n,subCardHeader:a,image:i,externalLink:r,externalLinkTitle:s,externalLinkOnClick:o,isMainButtonDisabled:l,mainButtonTitle:d,mainButtonLink:_,mainButtonOnClick:u,secondButtonTitle:m,secondButtonLink:p,upgradeButtonLink:h,isCapable:y})});var Bv;const Pv=({containerTitle:e,subCardTitle:t,editButtonLink:n,badgeLabel:a})=>{const{translate:r}=(0,g.Z)();return(0,f.BX)("div",{sx:{padding:"24px",borderColor:"ds.border.neutral.quiet.idle",backgroundColor:"ds.container.agnostic.neutral.supershy",borderRadius:"8px",display:"flex",flexDirection:"column",gap:"32px"},children:[(0,f.BX)("div",{sx:{display:"flex",flexDirection:"column",gap:"4px"},children:[(0,f.tZ)(o.Ct,{label:a,mood:"brand",intensity:"quiet"}),(0,f.tZ)(o.X6,{as:"h2",textStyle:"ds.title.section.medium",color:"ds.text.neutral.catchy",children:e})]}),(0,f.BX)("div",{sx:{display:"flex",justifyContent:"space-between",backgroundColor:"ds.background.alternate",padding:"24px",borderRadius:"8px"},children:[(0,f.BX)("div",{sx:{display:"flex",alignItems:"center",gap:"8px"},children:[(0,f.tZ)(o.X6,{as:"h3",textStyle:"ds.title.block.medium",color:"ds.text.neutral.catchy",children:t}),Bv||(Bv=(0,f.tZ)(o.Ct,{label:"Enabled",mood:"positive",intensity:"catchy",layout:"labelOnly"}))]}),(0,f.tZ)(o.zx,{as:i.rU,to:n,mood:"brand",intensity:"quiet",children:r("team_integrations_edit_button")})]})]})};var Uv;const zv="team_integrations_siem_title",Xv="team_integrations_siem_badge",qv=({active:e,inferredSsoState:t})=>{const{translate:n}=(0,g.Z)(),{routes:r}=(0,i.Xo)(),s=(0,Ee.o)("setup_rollout_splunk_integration_prod"),c=t===eb.s5.enum.None||t===eb.s5.enum.NitroComplete||t===eb.s5.enum.NitroIncomplete,d=s&&c,u=(0,re.C)()?.spaceTier===_.lD.Business,p=`${r.teamIntegrationsRoutePath}${a.Nr.SIEM}`;return d?e?(0,f.tZ)(Pv,{containerTitle:n(zv),subCardTitle:(0,f.tZ)(o.X6,{as:"h3",textStyle:"ds.title.block.medium",color:"ds.text.neutral.catchy",children:n("team_integrations_splunk_active_title")}),badgeLabel:n(Xv),editButtonLink:p}):(0,f.tZ)(Mv,{containerTitle:n(zv),subCardHeader:(0,f.BX)("div",{sx:{display:"flex",gap:"8px"},children:[(0,f.tZ)(o.X6,{as:"h3",textStyle:"ds.title.block.medium",color:"ds.text.neutral.catchy",children:n("team_integrations_splunk_non_active_title")}),(0,f.BX)("div",{sx:{display:"flex",alignItems:"center",gap:"4px"},children:[Uv||(Uv=(0,f.tZ)(o.JO,{name:"TimeOutlined",size:"xsmall",color:"ds.text.neutral.standard"})),(0,f.BX)(o.nv,{color:"ds.text.neutral.standard",textStyle:"ds.body.helper.regular",children:["5 ",n("team_integrations_time")]})]})]}),subCardDescription:n("team_integrations_splunk_non_active_subtitle"),badgeLabel:n(Xv),externalLink:"https://support.dashlane.com/hc/articles/17674635955730",externalLinkTitle:n("team_integrations_splunk_non_active_link"),externalLinkOnClick:()=>(0,m.Kz)(new l.UserOpenHelpCenterEvent({helpCenterArticleCta:l.HelpCenterArticleCta.LearnAboutSplunkIntegration})),image:Ov,mainButtonTitle:n("team_integrations_splunk_non_active_main_button"),mainButtonLink:p,mainButtonOnClick:()=>(0,m.Kz)(new l.UserClickEvent({button:l.Button.SetUp,clickOrigin:l.ClickOrigin.SplunkIntegration})),isCapable:u,upgradeButtonLink:`${r.teamAccountChangePlanRoutePath}?plan=business`}):(0,f.tZ)(Mv,{containerTitle:n(zv),subCardHeader:(0,f.BX)("div",{sx:{display:"flex",gap:"8px"},children:[(0,f.tZ)(o.X6,{as:"h3",textStyle:"ds.title.block.medium",color:"ds.text.neutral.catchy",children:n("team_integrations_siem_subtitle")}),s?null:(0,f.tZ)(o.Ct,{label:n("team_integrations_siem_coming_soon"),layout:"labelOnly",intensity:"catchy",mood:"brand"})]}),subCardDescription:n(s?"team_integrations_siem_unavailable_subdescription":"team_integrations_siem_subdescription"),badgeLabel:n(Xv),isCapable:!1})};var jv,Gv;const Fv=()=>{const{translate:e}=(0,g.Z)();return(0,f.BX)("div",{sx:{display:"flex",gap:"8px"},children:[(0,f.tZ)(o.X6,{as:"h3",textStyle:"ds.title.block.medium",color:"ds.text.neutral.catchy",children:e("team_integrations_sso_subcard_title")}),(0,f.BX)("div",{sx:{display:"flex",alignItems:"center",gap:"4px"},children:[jv||(jv=(0,f.tZ)(o.JO,{name:"TimeOutlined",size:"xsmall",color:"ds.text.neutral.standard"})),(0,f.BX)(o.nv,{color:"ds.text.neutral.standard",textStyle:"ds.body.helper.regular",children:["10 ",e("team_integrations_time")]})]})]})},Vv=({isCapable:e,inferredScimState:t})=>{const{routes:n}=(0,i.Xo)(),{translate:r}=(0,g.Z)();return(0,f.tZ)(Mv,{containerTitle:r("team_integrations_sso_card_title"),subCardHeader:Gv||(Gv=(0,f.tZ)(Fv,{})),subCardDescription:r("team_integrations_sso_subcard_description"),image:ys,externalLink:"https://support.dashlane.com/hc/articles/10992671925778",externalLinkTitle:r("team_integrations_mass_deployment_link"),isMainButtonDisabled:t===Nf.r.enum.SelfHostedComplete,disabledReason:r("team_integrations_sso_disabled"),mainButtonTitle:r("team_integrations_scim_main_button"),mainButtonLink:`${n.teamIntegrationsRoutePath}${a.Nr.SSO}${kf}`,secondButtonTitle:r("team_integrations_scim_second_button"),secondButtonLink:`${n.teamIntegrationsRoutePath}${a.Nr.SSO}`,badgeLabel:r("team_integrations_sso_badge"),upgradeButtonLink:`${n.teamAccountChangePlanRoutePath}?plan=business`,isCapable:e})},Hv=({isCapable:e,inferredScimState:t,inferredSsoState:n})=>{const{translate:r}=(0,g.Z)(),{routes:s}=(0,i.Xo)(),l=n===eb.s5.enum.NitroComplete||n===eb.s5.enum.NitroIncomplete||t!==Nf.r.enum.SelfHostedComplete,c=n===eb.s5.enum.SelfHostedComplete||n===eb.s5.enum.SelfHostedIncomplete||t!==Nf.r.enum.NitroComplete;return n===eb.s5.enum.NitroComplete||n===eb.s5.enum.SelfHostedComplete?(0,f.tZ)(Pv,{containerTitle:r("team_integrations_sso_title"),subCardTitle:(0,f.tZ)(o.nv,{children:n===eb.s5.enum.NitroComplete?r("team_integrations_confidential_sso_title"):r("team_integrations_self_hosted_sso_title")}),editButtonLink:`${s.teamIntegrationsRoutePath}${a.Nr.SSO}${l?kf:c?Df:Tf}`,badgeLabel:r("team_integrations_sso_badge")}):(0,f.tZ)(Vv,{isCapable:e,inferredScimState:t})};var Wv,$v,Yv=n(99201);const Kv=()=>{const{translate:e}=(0,g.Z)();return(0,f.BX)("div",{sx:{display:"flex",gap:"8px"},children:[(0,f.tZ)(o.X6,{as:"h3",textStyle:"ds.title.block.medium",color:"ds.text.neutral.catchy",children:e("team_integrations_confidential_scim")}),(0,f.BX)("div",{sx:{display:"flex",alignItems:"center",gap:"4px"},children:[Wv||(Wv=(0,f.tZ)(o.JO,{name:"TimeOutlined",size:"xsmall",color:"ds.text.neutral.standard"})),(0,f.BX)(o.nv,{color:"ds.text.neutral.standard",textStyle:"ds.body.helper.regular",children:["5 ",e("team_integrations_time")]})]})]})},Qv=({isCapable:e,inferredSsoState:t})=>{const{routes:n}=(0,i.Xo)(),{translate:r}=(0,g.Z)(),s=t===eb.s5.enum.NitroComplete;return(0,f.tZ)(Mv,{containerTitle:r("team_integrations_scim_title"),subCardHeader:$v||($v=(0,f.tZ)(Kv,{})),subCardDescription:r("team_integrations_scim_subcard_description"),image:Yv,externalLink:"https://support.dashlane.com/hc/articles/10992671925778",externalLinkTitle:r("team_integrations_mass_deployment_link"),isMainButtonDisabled:!s,disabledReason:r("team_integrations_scim_disabled_reason"),mainButtonTitle:r("team_integrations_scim_main_button"),mainButtonLink:`${n.teamIntegrationsRoutePath}${a.Nr.DIRECTORY_SYNC}${iv.redirectUrl}`,secondButtonTitle:r("team_integrations_scim_second_button"),secondButtonLink:`${n.teamIntegrationsRoutePath}${a.Nr.DIRECTORY_SYNC}`,badgeLabel:r("team_integrations_scim_badge"),upgradeButtonLink:`${n.teamAccountChangePlanRoutePath}?plan=business`,isCapable:e})},Jv=({isCapable:e,inferredSsoState:t,inferredScimState:n})=>{const{translate:r}=(0,g.Z)(),{routes:s}=(0,i.Xo)(),l=t===eb.s5.enum.NitroComplete||t===eb.s5.enum.NitroIncomplete||n===Nf.r.enum.NitroComplete,c=t===eb.s5.enum.SsoConnectorComplete||t===eb.s5.enum.SsoConnectorIncomplete||n===Nf.r.enum.AdSyncComplete,d=!l&&!c;return n===Nf.r.enum.None?(0,f.tZ)(Qv,{isCapable:e,inferredSsoState:t}):(0,f.tZ)(Pv,{containerTitle:r("team_integrations_scim_title"),subCardTitle:(0,f.tZ)(o.nv,{children:n===Nf.r.enum.NitroComplete?r("team_integrations_confidential_scim"):n===Nf.r.enum.SelfHostedComplete?r("team_integrations_self_hosted_scim"):r("team_integrations_active_directory")}),editButtonLink:`${s.teamIntegrationsRoutePath}${a.Nr.DIRECTORY_SYNC}${l?kv:d?Dv:Iv}`,badgeLabel:r("team_integrations_scim_badge")})},eC=()=>{const{translate:e}=(0,g.Z)();return(0,f.BX)("div",{sx:{display:"flex",flexDirection:"column",gap:"16px"},children:[(0,f.tZ)(o.X6,{as:"h1",textStyle:"ds.title.section.large",children:e("team_settings_menu_title_integrations")}),(0,f.tZ)(o.nv,{children:e("team_integrations_title")})]})},tC=({isOpen:e,onClose:t})=>{const{teamId:n}=(0,Ce.fV)(),{clearSettings:a,initSsoProvisioning:i}=(0,F.u)(Jy.y),{translate:s}=(0,g.Z)(),{showToast:l}=(0,o.pm)(),[c,d]=(0,r.useState)(!1),[_,u]=(0,r.useState)(!1),m=async()=>{if(u(!1),!n)throw new Error("teamId not found");try{d(!0);const e=await a({teamId:n});(0,V.d6)(e)&&await i({teamId:n}),t(),l({description:s("team_integrations_confidential_reset_toast_description"),closeActionLabel:s("_common_toast_close_label")})}catch(e){u(!0)}finally{d(!1)}};return(0,f.tZ)(o.Vq,{isDestructive:!0,isOpen:e,onClose:t,title:s("team_integrations_confidential_reset_dialog_title"),closeActionLabel:s("_common_dialog_dismiss_button"),children:(0,f.BX)("div",{sx:{display:"flex",flexDirection:"column",gap:"32px"},children:[(0,f.tZ)(o.nv,{children:s("team_integrations_confidential_reset_dialog_description")}),(0,f.BX)("div",{sx:{alignItems:"flex-end",display:"flex",flexDirection:"column",gap:"8px"},children:[(0,f.BX)("div",{sx:{display:"flex",gap:"8px",justifyContent:"flex-end"},children:[(0,f.tZ)(o.zx,{disabled:c,mood:"neutral",onClick:m,children:s("_common_action_cancel")}),(0,f.tZ)(o.zx,{isLoading:c,mood:"danger",onClick:m,children:s("team_integrations_confidential_reset_dialog_delete_button")})]}),_?(0,f.tZ)(o.nv,{color:"ds.text.danger.quiet",textStyle:"ds.body.helper.regular",children:s("team_integrations_confidential_reset_dialog_generic_error")}):null]})]})})},nC=()=>{const{translate:e}=(0,g.Z)(),[t,n]=(0,r.useState)(!1);return(0,f.BX)(f.HY,{children:[(0,f.tZ)(o.ke,{actions:[(0,f.tZ)(o.zx,{mood:"danger",onClick:()=>n(!0),children:e("team_integrations_confidential_reset_infobox_delete_button")},"delete-confidential-integrations")],description:e("team_integrations_confidential_reset_infobox_description"),icon:"FeedbackWarningOutlined",mood:"danger",size:"large",title:e("team_integrations_confidential_reset_infobox_title")}),(0,f.tZ)(tC,{isOpen:t,onClose:()=>n(!1)})]})};var aC,iC,rC,sC;const oC=()=>{var e;const[t,n]=(0,r.useState)(!1),a=(0,Ms.S)(),{initSsoProvisioning:i}=(0,F.u)(Jy.y),s=(0,c.k)(Jy.y,"ssoProvisioning"),{data:l,status:d}=(0,c.k)(JS.m,"scimConfiguration"),{data:_,status:u}=(0,c.k)(Nv.v,"getSiemConfiguration"),{teamId:m}=(0,Ce.fV)(),p=(0,Ee.o)("setup_rollout_reset_confidential_button"),{teamSettings:g={}}=ve(m),{esConfig:h}=ix(),{teamDeviceConfig:y}=Qx({draft:!1,deviceAccessKey:h?.deviceAccessKey}),b=(0,r.useCallback)((async e=>{e&&await i({teamId:`${e}`})}),[i]),x=null==(e=a?.scim.enabled)||e;if((0,r.useEffect)((()=>{b(m).then((()=>{n(!0)}))}),[b,m]),s.status!==Ze.rq.Success||d!==Ze.rq.Success||u!==Ze.rq.Success||!t)return(0,f.tZ)("div",{sx:{display:"flex",justifyContent:"center"},children:aC||(aC=(0,f.tZ)(o.ZX,{size:75}))});const{inferredSsoState:S}=s.data.global,v=Tv({isAdSyncEnabled:!!g.activeDirectorySyncType,isSelfhostedScimEnabled:!!y?.configProperties.scimEnabled,isNitroSCIMEnabled:!!l?.active,ssoState:S});return(0,f.BX)("div",{sx:{display:"flex",flexDirection:"column",gap:"32px",padding:"32px"},children:[iC||(iC=(0,f.tZ)(eC,{})),p?rC||(rC=(0,f.tZ)(nC,{})):null,(0,f.tZ)(Hv,{inferredSsoState:S,inferredScimState:v,isCapable:x}),(0,f.tZ)(Jv,{inferredSsoState:S,inferredScimState:v,isCapable:x}),sC||(sC=(0,f.tZ)(wv,{})),(0,f.tZ)(qv,{active:_?.active,inferredSsoState:S})]})};var lC=n(55548),cC=n(32198),dC=n(24170);const _C=({defaultValue:e,onChange:t,disabled:n})=>{const{translate:a}=(0,g.Z)();return(0,f.BX)("div",{sx:{backgroundColor:"ds.container.agnostic.neutral.quiet",borderRadius:"8px",padding:"24px",display:"flex",flexDirection:"column",gap:"16px"},children:[(0,f.tZ)(o.X6,{as:"h3",textStyle:"ds.title.supporting.small",color:"ds.text.neutral.quiet",children:a("team_settings_splunk_configuration_splunk_self_signed_certificate_subtitle")}),(0,f.BX)("div",{sx:{display:"flex",flexDirection:"row",gap:"16px",justifyContent:"space-between"},children:[(0,f.BX)("div",{sx:{display:"flex",flexDirection:"column",alignItems:"flex-start",gap:"8px"},children:[(0,f.tZ)(o.X6,{as:"h2",textStyle:"ds.title.block.medium",color:"ds.text.neutral.catchy",children:a("team_settings_splunk_configuration_splunk_self_signed_certificate_title")}),(0,f.tZ)(o.nv,{textStyle:"ds.body.standard.regular",color:"ds.text.neutral.standard",children:a("team_settings_splunk_configuration_splunk_self_signed_certificate_description")})]}),(0,f.tZ)(o.ZD,{"aria-label":"selfSignedCertToggle",onChange:t,defaultChecked:e,disabled:n})]})]})},uC={INVALID_URL:"team_settings_set_siem_configuration_invalid_url",GENERIC_ERROR:"team_settings_set_siem_configuration_generic_error",TEAM_NOT_FOUND:"team_settings_set_siem_configuration_team_not_found",MISMATCHING_ADMIN_PROVISIONING_KEY:"team_settings_set_siem_configuration_mismatching_admin_provision_key",NO_SIEM_CONFIGURATION_UPDATE:"team_settings_set_siem_configuration_no_siem_configuration_update"},mC=({token:e,instanceURL:t,isSelfSignedCertificateAllowed:n,active:a,isTeamAlreadyCreated:i,hasSiemPaywall:s,hasSelfSignedCertFF:c,inferredSsoState:d})=>{const{translate:_}=(0,g.Z)(),{showToast:u}=(0,o.pm)(),{trackPageView:p}=(0,lC.D)(),{setSiemConfiguration:h}=(0,F.u)(Nv.v),{createTeamInEnclave:y}=(0,F.u)(cC.K),b=(0,r.useRef)(null),x=(0,r.useRef)(null),S=(0,r.useRef)(n),[v,C]=(0,r.useState)(!1),[E,Z]=(0,r.useState)(""),[T,D]=(0,r.useState)(!1),[k,I]=(0,r.useState)(!1),A=e&&t,N=d===eb.s5.enum.None||d===eb.s5.enum.NitroComplete||d===eb.s5.enum.NitroIncomplete,w=!s&&N;(0,r.useEffect)((()=>{p({pageView:l.PageView.TacIntegrationsSplunk})}),[]);const O=a=>{e!==b.current?.value||t!==x.current?.value||n!==S.current?C(!0):C(!1),"instanceURL"===a&&Z("")},R=e=>{e.tag===dC.M7.INVALID_URL?(Z(_(uC.INVALID_URL)),(0,m.Kz)(new l.UserSetupSplunkIntegrationEvent({splunkSetupStep:l.SplunkSetupStep.InvalidUrlError}))):(u({mood:"danger",description:_(e.tag in uC?uC[e.tag]:uC.GENERIC_ERROR)}),(0,m.Kz)(new l.UserSetupSplunkIntegrationEvent({splunkSetupStep:"MISMATCHING_ADMIN_PROVISIONING_KEY"===e.tag?l.SplunkSetupStep.MismatchAdminProvisioningKeyError:"TEAM_NOT_FOUND"===e.tag?l.SplunkSetupStep.TeamNotFoundError:l.SplunkSetupStep.GenericError})))};return(0,f.BX)(f.HY,{children:[N?null:(0,f.tZ)(o.ke,{mood:"danger",title:_("team_settings_splunk_configuration_splunk_unavailable_infobox_title"),sx:{marginBottom:"24px"}}),(0,f.tZ)(B.Zbd,{sx:{marginBottom:"24px"},children:(0,f.BX)("div",{sx:{display:"flex",flexDirection:"column",gap:"32px",padding:"32px",opacity:w?"1":"0.5"},children:[(0,f.BX)("div",{children:[(0,f.tZ)(o.X6,{as:"h2",sx:{marginBottom:"8px"},children:_("team_settings_splunk_configuration_step_1_title")}),(0,f.tZ)(o.nv,{sx:{marginBottom:"16px"},children:_("team_settings_splunk_configuration_step_1_description")}),s?null:(0,f.tZ)(o.ke,{mood:N?"brand":"neutral",title:_("team_settings_splunk_configuration_step_1_infobox")})]}),(0,f.BX)("div",{children:[(0,f.tZ)(o.X6,{as:"h2",sx:{marginBottom:"8px"},children:_("team_settings_splunk_configuration_step_2_title")}),(0,f.tZ)(o.nv,{sx:{marginBottom:"24px"},children:_("team_settings_splunk_configuration_step_2_description")}),(0,f.BX)("div",{sx:{display:"flex",gap:"16px",flexDirection:"column"},children:[(0,f.tZ)(o.qo,{value:t,label:_("team_settings_splunk_configuration_instance_url_label"),ref:x,onChange:()=>O("instanceURL"),id:"splunk-instance-url-field",disabled:!w,error:!!E,feedback:E||void 0}),(0,f.tZ)(o.ZI,{value:e,label:_("team_settings_splunk_configuration_token_label"),ref:b,onChange:()=>O("token"),disabled:!w,"data-testid":"splunk-token-field",toggleVisibilityLabel:{show:_("_common_password_show_label"),hide:_("_common_password_hide_label")}})]})]}),c?(0,f.tZ)(_C,{defaultValue:n,onChange:e=>{S.current=e.target.checked,O("selfSignedCert")},disabled:!w}):null,(0,f.tZ)("div",{sx:{display:"flex",justifyContent:"end"},children:(0,f.tZ)(o.zx,{intensity:"catchy",disabled:!v||!w,onClick:async()=>{D(!0),i||await y();const e=!b?.current?.value||!x?.current?.value,t=await h({token:b?.current?.value.trim(),instanceURL:x?.current?.value.trim(),active:!e&&void 0,isSelfSignedCertificateAllowed:S.current});"failure"===t.tag?R(t.error):(u({mood:"brand",description:_("team_settings_splunk_integration_saved_toast")}),(0,m.Kz)(new l.UserSetupSplunkIntegrationEvent({splunkSetupStep:l.SplunkSetupStep.SaveTokens})),C(!1)),D(!1)},isLoading:T,children:_(A?"team_settings_siem_configuration_actions_update":"team_settings_siem_configuration_actions_save")})})]})}),(0,f.tZ)(B.Zbd,{children:(0,f.BX)("div",{sx:{display:"flex",gap:"32px",padding:"32px",alignItems:"center",justifyContent:"space-between",opacity:w?"1":"0.5"},children:[(0,f.BX)("div",{children:[(0,f.tZ)(o.X6,{as:"h2",sx:{marginBottom:"8px"},children:_("team_settings_splunk_configuration_step_3_title")}),(0,f.tZ)(o.nv,{children:_("team_settings_splunk_configuration_step_3_description")})]}),(0,f.tZ)("div",{children:(0,f.tZ)(o.ZD,{"aria-label":"activateSiemToggle",onChange:()=>(async e=>{I(!0);const t=await h({active:e});"failure"===t.tag?R(t.error):(u({mood:"brand",description:_(e?"team_settings_splunk_integration_activated_toast":"team_settings_splunk_integration_deactivated_toast")}),(0,m.Kz)(new l.UserSetupSplunkIntegrationEvent({splunkSetupStep:e?l.SplunkSetupStep.ActivateSplunkIntegration:l.SplunkSetupStep.DeactivateSplunkIntegration}))),I(!1)})(!a),checked:a,disabled:!A||k||!w})})]})})]})},pC=()=>{const{translate:e}=(0,g.Z)(),{routes:t}=(0,i.Xo)();return(0,f.tZ)(o.ke,{title:e("team_settings_splunk_paywall_title"),description:e("team_settings_splunk_paywall_description"),mood:"brand",size:"large",actions:[(0,f.tZ)(o.zx,{mood:"brand",intensity:"catchy",icon:"PremiumOutlined",layout:"iconLeading",as:om.rU,to:`${t.teamAccountChangePlanRoutePath}?plan=business`,children:e("team_settings_siem_paywall_upgrade_cta")},"upgrade")],sx:{margin:"16px 32px 32px 32px"}})};var gC;const hC=()=>{var e,t;const[n,a]=(0,r.useState)(!1),{translate:i}=(0,g.Z)(),{teamId:s}=(0,Ce.fV)(),{initSsoProvisioning:d}=(0,F.u)(Jy.y),{data:u,status:p}=(0,c.k)(Nv.v,"getSiemConfiguration"),h=(0,Ee.o)("setup_rollout_siem_self_signed_certificate"),{data:y,status:b}=(0,c.k)(Jy.y,"ssoProvisioning"),x=(0,re.C)(),S=(0,r.useCallback)((async e=>{e&&await d({teamId:e})}),[d]);if((0,r.useEffect)((()=>{S(s).then((()=>{a(!0)}))}),[S,s]),!x)return null;const v=x.spaceTier!==_.lD.Business;return(0,f.tZ)(Hb,{title:i("team_settings_siem_header"),paragraph:v?void 0:i("team_settings_siem_header_helper"),badge:v?{label:i("account_summary_upgrade_content_business_badge"),mood:"brand",iconName:"PremiumOutlined",layout:"iconLeading"}:void 0,children:(0,f.BX)(f.HY,{children:[v?gC||(gC=(0,f.tZ)(pC,{})):null,(0,f.tZ)(ni,{sx:{padding:"0 32px"},fullWidth:!0,mainContent:p===Ze.rq.Success&&b===Ze.rq.Success&&null!==h&&n?(0,f.tZ)(mC,{token:null!=(e=u.token)?e:"",instanceURL:null!=(t=u.instanceURL)?t:"",isSelfSignedCertificateAllowed:u.isSelfSignedCertificateAllowed,active:u.active,isTeamAlreadyCreated:y.global.isTeamProvisionedInNitro,hasSiemPaywall:v,hasSelfSignedCertFF:!!h,inferredSsoState:y.global.inferredSsoState}):(0,f.tZ)(B.Zbd,{children:(0,f.tZ)(o.kC,{fullWidth:!0,justifyContent:"center",children:(0,f.tZ)(o.ZX,{size:60,sx:{padding:"16px"}})})}),secondaryContent:(0,f.tZ)(rl,{heading:i("team_settings_siem_help_card_header"),description:i("team_settings_splunk_help_card_description"),linkProps:{linkType:il.ExternalLink,linkHref:"https://support.dashlane.com/hc/articles/17674635955730",onClick:()=>{(0,m.Kz)(new l.UserClickEvent({button:l.Button.SeeSetupGuide,clickOrigin:l.ClickOrigin.NeedHelp}))}},linkText:i("team_settings_splunk_help_card_link")})})]})})};var yC=n(43874),bC=n(751);const xC=n.p+"333112f5f6782cda52ff.png";var SC=n(75822),fC=n(91356),vC=n(81244),CC=n(51545),EC=n(42557),ZC=n(62516),TC=n(59039);const DC=e=>TC.c.findIndex((t=>t===e)),kC=e=>{const t=new Date;return t.setUTCHours(e,0,0),t.getHours()},IC=(e,t)=>{const n=(0,EC.Z)(new Date,DC(e));n.setUTCHours(t,0,0);const a=n.getDay();return TC.c[a]},AC="nudges_configuration_options_frequency",NC="nudges_configuration_options_day",wC={compromised_passwords:"nudges_compromised_password_nudge_title",reused_passwords:"nudges_reused_password_nudge_title",weak_passwords:"nudges_weak_password_nudge_title"},OC={compromised_passwords:"nudges_compromised_password_nudge_description",reused_passwords:"nudges_reused_password_nudge_description",weak_passwords:"nudges_weak_password_nudge_description"},RC={compromised_passwords:"monday",reused_passwords:"wednesday",weak_passwords:"friday"},LC={compromised_passwords:"https://support.dashlane.com/hc/en-us/articles/202699411-Password-Health#compromised",reused_passwords:"https://support.dashlane.com/hc/en-us/articles/202699411-Password-Health#reused",weak_passwords:"https://support.dashlane.com/hc/en-us/articles/202699411-Password-Health#weak"},MC={compromised_passwords:l.NudgeType.CompromisedPasswords,reused_passwords:l.NudgeType.ReusedPasswords,weak_passwords:l.NudgeType.WeakPasswords},BC={compromised_passwords:l.ClickOrigin.NudgesCompromisedPasswords,reused_passwords:l.ClickOrigin.NudgesReusedPasswords,weak_passwords:l.ClickOrigin.NudgesWeakPasswords},PC=({updateNudge:e,sendTestNudge:t,displayName:n,dropdownOptions:a,existingNudge:i})=>{var s;const{translate:c}=(0,g.Z)(),[d,_]=(0,r.useState)(i?.nextRunTimestamp?new Date(1e3*i.nextRunTimestamp):void 0),u=(0,ea.TA)({initialValues:{active:!!i&&i.active,frequency:null!=(s=i?.options?.frequency)?s:"weekly",dayOfWeek:i?.options?.dayOfWeek?IC(i.options.dayOfWeek,i.options.timeOfDayUtc):RC[n],localTimeOfDay:i?.options?.timeOfDayUtc?kC(i.options.timeOfDayUtc):14},onSubmit:async t=>{const{active:a,frequency:i,dayOfWeek:r,localTimeOfDay:s}=t,{utcHours:o,utcDay:l}=((e,t)=>{let n=new Date;n.setHours(e,0,0),n=(0,EC.Z)(n,DC(t));const a=n.getUTCDay();return{utcHours:n.getUTCHours(),utcDay:TC.c[a]}})(s,r);await e({name:n,active:a,options:{frequency:i,dayOfWeek:"weekly"===i?l:void 0,timeOfDayUtc:o}})}}),p=async(e,t)=>{if("active"===t&&(0,m.Kz)(new l.UserToggleNudgeEvent({nudgeState:e?l.State.On:l.State.Off,integrationPlatform:l.IntegrationPlatform.Slack,nudgeType:MC[n]})),await u.setFieldValue(t,e),await u.submitForm(),"frequency"===t||"dayOfWeek"===t||"localTimeOfDay"===t){const n=(e=>{const t=new Date;let n=(0,SC.Z)(t,e.localTimeOfDay);if(n=(0,fC.Z)(n,0),"daily"===e.frequency)n=(0,Uc.Z)(n,1);else{const a=(0,vC.Z)(n),i=DC(e.dayOfWeek),r=i===a&&t.getHours()>=e.localTimeOfDay;(i!==a||r)&&(n=(0,CC.Z)(n,DC(e.dayOfWeek)))}return n})({...u.values,[t]:e});_(n)}};return(0,f.BX)(f.HY,{children:[(0,f.tZ)(o.ZD,{id:n,label:c(wC[n]),description:c(OC[n]),onChange:e=>p(e.target.checked,"active"),checked:u.values.active}),u.values.active&&a?(0,f.BX)("div",{sx:{display:"flex",flexDirection:"column",backgroundColor:"ds.background.alternate",padding:"16px",borderRadius:"8px",marginY:"16px",gap:"16px"},children:[(0,f.tZ)(o.X6,{as:"h1",textStyle:"ds.title.supporting.small",color:"ds.text.neutral.quiet",children:c("nudges_configuration_options_title")}),(0,f.BX)("div",{sx:{display:"grid",gridTemplateColumns:["auto","auto","auto auto","auto auto auto"],gap:"16px"},children:[(0,f.tZ)(o.mg,{label:c(AC),onChange:e=>p(e,"frequency"),value:u.values.frequency,labelPersists:!0,children:a.frequency.map(((e,t)=>(0,f.tZ)(o.$m,{value:e,children:c(`${AC}_${e}`)},`${e}-${t}`)))}),(0,f.tZ)(o.mg,{label:c(NC),onChange:e=>p(e,"dayOfWeek"),value:u.values.dayOfWeek,disabled:"daily"===u.values.frequency,labelPersists:!0,children:a.dayOfWeek.map(((e,t)=>(0,f.tZ)(o.$m,{value:e,children:c(`${NC}_${e}`)},`${e}-${t}`)))}),(0,f.tZ)(o.mg,{label:c("nudges_configuration_options_hour"),onChange:e=>p(Number(e),"localTimeOfDay"),value:String(u.values.localTimeOfDay),labelPersists:!0,children:a.timeOfDayUtc.map(((e,t)=>(0,f.tZ)(o.$m,{value:String(e),children:`${e}:00`},`${e}-${t}`)))})]}),d?(0,f.tZ)(o.ke,{title:(e=>{var t;const a=null!=(t=i?.expectedUserCount)?t:0;return 0===a?c("nudges_configuration_next_occurrence_no_user",{nudgeType:c(wC[n]).toLocaleLowerCase()}):c(1===a?"nudges_configuration_next_occurrence_single_user":"nudges_configuration_next_occurrence",{numberOfUsers:a,time:(0,Kn.Z)(e,"kk:mm"),date:(0,ZC.Z)(e,{weekday:"long",day:"numeric",month:"long"}),timezone:Intl.DateTimeFormat().resolvedOptions().timeZone})})(d)}):null,(0,f.BX)(o.kC,{flexDirection:"row",alignItems:"center",justifyContent:"space-between",children:[(0,f.tZ)(o.Qj,{href:LC[n],onClick:()=>{(0,m.Kz)(new l.UserClickEvent({button:l.Button.LearnMoreAboutNudges,clickOrigin:BC[n]}))},isExternal:!0,children:c("_common_action_learn_more")}),(0,f.tZ)(o.zx,{mood:"brand",intensity:"quiet",layout:"iconLeading",icon:"FeatureAutomationsOutlined",onClick:()=>t(n),children:c("team_settings_nudges_send_test")})]})]}):null]})},UC=()=>{const{translate:e}=(0,g.Z)();return(0,f.BX)(o.Zb,{gap:"8px",children:[(0,f.tZ)(o.X6,{as:"h2",textStyle:"ds.title.supporting.small",color:"ds.text.neutral.quiet",sx:{mb:"16px"},children:e("webapp_tac_infocard_title")}),(0,f.tZ)(o.nv,{color:"ds.text.neutral.catchy",textStyle:"ds.title.block.medium",as:"h3",children:e("team_settings_nudges_help_card_header")}),(0,f.tZ)(o.nv,{color:"ds.text.neutral.quiet",textStyle:"ds.body.standard.regular",sx:{mb:"16px"},children:e("team_settings_nudges_help_card_header_description")}),(0,f.tZ)(o.Qj,{onClick:()=>(0,m.Kz)(new l.UserClickEvent({button:l.Button.SeeSetupGuide,clickOrigin:l.ClickOrigin.NeedHelp})),href:"https://support.dashlane.com/hc/articles/19539724667026",isExternal:!0,children:e("team_settings_nudges_help_card_link")}),(0,f.tZ)("hr",{sx:{border:0,borderTop:"1px solid ds.border.neutral.quiet.idle",width:"100%"}}),(0,f.tZ)(o.nv,{color:"ds.text.neutral.catchy",textStyle:"ds.title.block.medium",as:"h3",children:e("team_settings_nudges_feedback_title")}),(0,f.tZ)(o.nv,{color:"ds.text.neutral.quiet",textStyle:"ds.body.standard.regular",sx:{mb:"16px"},children:e("team_settings_nudges_feedback_description")}),(0,f.tZ)(o.zx,{onClick:()=>{(0,m.Kz)(new l.UserClickEvent({button:l.Button.SubmitNudgesFeedback})),(0,X.Yo)("mailto:feedback@dashlane.com?subject=Nudges%20Private%20Beta%20Feedback")},mood:"neutral",intensity:"quiet",layout:"labelOnly",fullsize:!0,children:e("team_settings_nudges_feedback_cta")})]})};var zC,XC,qC;const jC="_common_generic_error",GC=()=>{const e=(0,Ee.o)("ace_nudges_uninstall_slack"),t=(0,c.k)(bC.R,"getTeamNudges"),{sendNudge:n,updateTeamNudge:a,uninstallNudges:i}=(0,F.u)(bC.R),r=(0,ta.V)(),{translate:s}=(0,g.Z)(),{reportTACError:d}=Y(),_=async e=>{try{const t=await a(e);if((0,V.d6)(t))return void r.showAlert(s("team_settings_nudges_configuration_update_nudge_success"),B.BLW.SUCCESS);r.showAlert(s("team_settings_nudges_configuration_update_nudge_error"),B.BLW.ERROR)}catch(e){r.showAlert(s(jC),B.BLW.ERROR)}},u=async e=>{try{const t=await n({type:e});if((0,V.d6)(t))return(0,m.Kz)(new l.UserSetupNudgesEvent({action:l.NudgeAction.SentTestNudge,integrationPlatform:l.IntegrationPlatform.Slack})),void r.showAlert(s("team_settings_nudges_configuration_send_nudge_success"),B.BLW.SUCCESS);r.showAlert(s("team_settings_nudges_configuration_send_nudge_error"),B.BLW.ERROR)}catch(e){r.showAlert(s(jC),B.BLW.ERROR)}};if(t.status===Ze.rq.Loading)return(0,f.tZ)("div",{sx:{display:"flex",justifyContent:"center"},children:zC||(zC=(0,f.tZ)(o.ZX,{size:75}))});t.status===Ze.rq.Error&&d(new Error(s("team_settings_nudges_configuration_get_nudges_error")));const p=t.data?.defaultNudges.map((({displayName:e,options:n})=>{switch(e){case"compromised_passwords":case"reused_passwords":case"weak_passwords":return{type:e,options:n,existingNudge:t.data.teamNudges.find((({nudge:t})=>t===e))};default:return{type:void 0}}})).filter((e=>!!e.type));return(0,f.tZ)(ni,{sx:{padding:"0 32px"},fullWidth:!0,mainContent:(0,f.BX)("div",{sx:{display:"flex",flexDirection:"column",gap:"24px 0"},children:[(0,f.BX)(B.Zbd,{sx:{display:"flex",flexDirection:"column",gap:"16px",padding:"24px"},children:[(0,f.tZ)(o.X6,{as:"h2",children:s("team_settings_nudges_setup_container_title")}),(0,f.BX)("div",{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",flex:1,backgroundColor:"ds.background.alternate",padding:"40px",borderRadius:"8px"},children:[(0,f.BX)("div",{children:[(0,f.tZ)(o.nv,{textStyle:"ds.title.supporting.small",sx:{marginBottom:"8px"},children:s("team_settings_nudges_configuration_status")}),(0,f.tZ)(o.Ct,{label:s("team_settings_nudges_configuration_status_value"),layout:"labelOnly",mood:"positive"})]}),e?(0,f.tZ)(o.zx,{mood:"danger",intensity:"supershy",size:"small",onClick:async()=>{try{const e=await i();if((0,V.d6)(e))return(0,m.Kz)(new l.UserSetupNudgesEvent({action:l.NudgeAction.UninstalledIntegration,integrationPlatform:l.IntegrationPlatform.Slack})),void r.showAlert(s("team_settings_nudges_uninstall_success"),B.BLW.SUCCESS);r.showAlert(s("team_settings_nudges_uninstall_error"),B.BLW.ERROR)}catch(e){r.showAlert(s(jC),B.BLW.ERROR)}},children:s("team_settings_nudges_uninstall")}):null]})]}),(0,f.BX)(B.Zbd,{sx:{padding:"24px"},children:[(0,f.BX)("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[XC||(XC=(0,f.tZ)(o.VZ,{domainLogoURL:xC,backgroundColor:"#FFFFFF"})),(0,f.tZ)(o.X6,{as:"h2",children:s("team_settings_nudges_configuration_schedule_title")})]}),(0,f.tZ)("hr",{sx:{width:"100%",borderTop:"1px solid ds.border.neutral.quiet.idle",marginTop:"24px",marginBottom:"24px"}}),p?p.map((({type:e,options:t,existingNudge:n},a)=>(0,f.tZ)(PC,{updateNudge:_,sendTestNudge:u,displayName:e,dropdownOptions:t,existingNudge:n},`${e}-${a}`))):null]})]}),secondaryContent:qC||(qC=(0,f.tZ)(UC,{}))})};n(20912);var FC,VC,HC=n(39019),WC=n(16687);const $C={LEGEND_NUDGE_WEAK:"team_settings_nudges_insights_legend_nudge_weak",LEGEND_WEAK_PASSWORDS:"team_settings_nudges_insights_legend_weak_passwords",LEGEND_NUDGE_COMPROMISED:"team_settings_nudges_insights_legend_nudge_compromised",LEGEND_COMPROMISED_PASSWORDS:"team_settings_nudges_insights_legend_compromised_passwords",LEGEND_NUDGE_REUSED:"team_settings_nudges_insights_legend_nudge_reused",LEGEND_REUSED_PASSWORDS:"team_settings_nudges_insights_legend_reused_passwords"},YC={weak:"#32A9B2",compromised:"#FF7385",reused:"#ED892D"},KC=e=>{const{color:t}=e;return(0,f.tZ)("div",{sx:{width:"8px"},children:(0,f.tZ)("svg",{viewBox:"0 0 2 2",xmlns:"http://www.w3.org/2000/svg",children:(0,f.tZ)("circle",{cx:"1",cy:"1",r:"1",strokeWidth:"0",fill:t})})})},QC=e=>{const{color:t}=e;return(0,f.tZ)("div",{sx:{width:"8px"},children:(0,f.tZ)("svg",{viewBox:"0 0 2 2",xmlns:"http://www.w3.org/2000/svg",children:(0,f.tZ)("line",{x1:"0",y1:"1",x2:"2",y2:"1",stroke:t,strokeWidth:"0.4"})})})},JC=e=>{const{cx:t,cy:n,stroke:a,payload:i,dataKey:r,r:s,strokeWidth:o,key:l}=e;return"nudgesSent"in i&&i.nudgesSent.includes(`${r}_passwords`)?(0,f.tZ)(WC.o,{id:`nudgeSentDot-${r}`,cx:t,cy:n,r:s,stroke:a,strokeWidth:o,fill:a},l):null},eE=({graphData:e})=>{const{translate:t}=(0,g.Z)(),n=e.reduce(((e,t)=>{if("compromised"in t){const{compromised:n,reused:a,weak:i}=t;return Math.max(e,n,a,i)}return e}),0),a=10*Math.ceil(n/10);return(0,f.BX)(f.HY,{children:[(0,f.tZ)("div",{sx:{width:"100%",height:"211px",flexGrow:1},"data-testid":"insight-graph",children:(0,f.tZ)(Ac.h,{sx:{height:"100%",width:"100%"},children:(0,f.BX)(Nc.w,{data:e,children:[FC||(FC=(0,f.tZ)(wc.q,{vertical:!1})),(0,f.tZ)(Oc.B,{domain:[0,a],fontSize:"small"}),VC||(VC=(0,f.tZ)(qc.K,{dataKey:"date",fontSize:"small"})),(0,f.tZ)(Lc.x,{id:"line-weak",dataKey:"weak",type:"linear",stroke:YC.weak,dot:JC,isAnimationActive:!1}),(0,f.tZ)(Lc.x,{id:"line-compromised",dataKey:"compromised",type:"linear",stroke:YC.compromised,dot:JC,isAnimationActive:!1}),(0,f.tZ)(Lc.x,{id:"line-reused",dataKey:"reused",type:"linear",stroke:YC.reused,dot:JC,isAnimationActive:!1})]})})}),(0,f.tZ)(o.Zb,{sx:{display:"flex",flexDirection:"row",padding:"16px",gap:"32px",backgroundColor:"ds.container.agnostic.neutral.quiet",borderColor:"ds.border.neutral.quiet.idle"},children:[["weak",YC.weak,$C.LEGEND_NUDGE_WEAK,$C.LEGEND_WEAK_PASSWORDS],["compromised",YC.compromised,$C.LEGEND_NUDGE_COMPROMISED,$C.LEGEND_COMPROMISED_PASSWORDS],["reused",YC.reused,$C.LEGEND_NUDGE_REUSED,$C.LEGEND_REUSED_PASSWORDS]].map((([e,n,a,i])=>(0,f.BX)(o.kC,{flexDirection:"column",gap:"8px",children:[(0,f.BX)(o.kC,{flexDirection:"row",gap:"8px",alignItems:"baseline",children:[(0,f.tZ)(KC,{color:n}),(0,f.tZ)(o.nv,{textStyle:"ds.body.helper.regular",color:"ds.text.neutral.quiet",children:t(a)})]}),(0,f.BX)(o.kC,{flexDirection:"row",gap:"8px",alignItems:"baseline",children:[(0,f.tZ)(QC,{color:n}),(0,f.tZ)(o.nv,{textStyle:"ds.body.helper.regular",color:"ds.text.neutral.quiet",children:t(i)})]})]},e)))})]})},tE=({title:e,mood:t,value:n,highlight:a})=>(0,f.BX)("div",{sx:{flex:1},children:["loading"===n?(0,f.tZ)(o.ZX,{"data-testid":"insight-loader",mood:t,size:"xlarge"}):(0,f.tZ)(o.nv,{"data-testid":"insight-value",textStyle:"ds.specialty.spotlight.medium",color:"positive"===t?"ds.text.brand.standard":`ds.text.${t}.quiet`,sx:{marginBottom:"2px"},children:"unknown"===n?"-":n}),(0,f.tZ)(o.nv,{textStyle:"ds.body.reduced.regular",children:e}),a&&(0,f.tZ)(o.Ct,{"data-testid":"insight-highlight",mood:t,intensity:"quiet",label:a.label,layout:"iconLeading",iconName:a.iconName,sx:{marginTop:"8px"}})]});var nE,aE,iE;const rE=()=>(0,f.tZ)("div",{sx:{borderLeft:"1px solid ds.border.neutral.quiet.idle"}}),sE=()=>{var e;const{translate:t}=(0,g.Z)(),n=(0,c.k)(bC.R,"getHealthAndNudgeReport",{numberOfDays:365}),[a,i]=(0,r.useState)(7),s=(e=>{switch(e.status){case Ze.rq.Loading:return{weak:{value:"loading"},compromised:{value:"loading"},reused:{value:"loading"}};case Ze.rq.Error:return{weak:{value:"unknown"},compromised:{value:"unknown"},reused:{value:"unknown"}};case Ze.rq.Success:{const[...t]=e.data.healthAndNudgeHistory,n=t.pop();if(void 0===n)return{weak:{value:"unknown"},compromised:{value:"unknown"},reused:{value:"unknown"}};const a={weak:t.findLast((e=>e.nudgesSent.includes("weak_passwords"))),compromised:t.findLast((e=>e.nudgesSent.includes("compromised_passwords"))),reused:t.findLast((e=>e.nudgesSent.includes("reused_passwords")))},i=(e,t)=>t?Math.round(100*(e-t)/t):void 0;return{weak:{value:n.weak,percentChange:i(n.weak,a.weak?.weak)},compromised:{value:n.compromised,percentChange:i(n.compromised,a.compromised?.compromised)},reused:{value:n.reused,percentChange:i(n.reused,a.reused?.reused)}}}}})(n),l=(e,n)=>{const{percentChange:a}=e[n];if("number"!=typeof a)return;const i=Math.abs(a);return 0===i?{label:t("team_settings_nudges_insights_no_change_since_nudge")}:{iconName:a>0?"ArrowUpOutlined":"ArrowDownOutlined",label:t("team_settings_nudges_insights_change_since_nudge",{percent:i})}},d=((e,t)=>{var n;const a=[];let i=(0,HC.Z)(new Date,t),r=null!=(n=e.findLast((e=>new Date(e.date)<=i)))?n:{};"nudgesSent"in r&&(r.nudgesSent=[]);for(;a.length<t;){var s;i=(0,Uc.Z)(i,1);const t=(0,Kn.Z)(i,"yyyy-MM-dd"),n=null!=(s=e.find((e=>e.date===t)))?s:{...r,date:t};a.push(n),r={...n,nudgesSent:[]}}return a})(null!=(e=n.data?.healthAndNudgeHistory)?e:[],a);return(0,f.BX)(o.kC,{flexDirection:"column",gap:"16px",sx:{margin:"0 32px"},children:[(0,f.BX)(o.Zb,{sx:{display:"flex",flexDirection:"row",padding:"24px",gap:"24px",backgroundColor:"ds.container.agnostic.neutral.supershy",borderColor:"ds.border.neutral.quiet.idle"},children:[(0,f.tZ)(tE,{title:t("team_settings_nudges_insights_weak"),mood:"positive",value:s.weak.value,highlight:l(s,"weak")}),nE||(nE=(0,f.tZ)(rE,{})),(0,f.tZ)(tE,{title:t("team_settings_nudges_insights_compromised"),mood:"danger",value:s.compromised.value,highlight:l(s,"compromised")}),aE||(aE=(0,f.tZ)(rE,{})),(0,f.tZ)(tE,{title:t("team_settings_nudges_insights_reused"),mood:"warning",value:s.reused.value,highlight:l(s,"reused")})]}),(0,f.BX)(o.Zb,{sx:{display:"flex",flexDirection:"column",padding:"24px",gap:"24px",backgroundColor:"ds.container.agnostic.neutral.supershy",borderColor:"ds.border.neutral.quiet.idle"},children:[(0,f.BX)(o.kC,{flexDirection:"row",justifyContent:"space-between",children:[(0,f.tZ)(o.X6,{as:"h5",color:"ds.text.neutral.catchy",textStyle:"ds.title.section.medium",sx:{marginBottom:"1%"},children:t("team_settings_nudges_insights_graph_heading")}),(0,f.tZ)(o.mQ,{tabs:[{id:"tab-7-days",title:t("team_settings_nudges_insights_graph_7_days"),contentId:"content-7-days",onSelect:()=>{i(7)}},{id:"tab-30-days",title:t("team_settings_nudges_insights_graph_30_days"),contentId:"content-30-days",onSelect:()=>{i(30)}},{id:"tab-year",title:t("team_settings_nudges_insights_graph_year"),contentId:"content-year",onSelect:()=>{i(365)}}]})]}),n.status!==Ze.rq.Success?iE||(iE=(0,f.tZ)(o.ZX,{"data-testid":"insight-graph-loader",size:"xlarge"})):(0,f.tZ)(eE,{graphData:d})]})]})};var oE,lE;const cE=()=>{const{translate:e}=(0,g.Z)(),[t,n]=(0,r.useState)("settings"),a=[{id:"tab-insights",title:e("team_settings_nudges_tabs_insights"),contentId:"content-insights",onSelect:()=>{(0,m.Nc)(l.PageView.ToolsNudgesInsights),n("insights")}},{id:"tab-settings",title:e("team_settings_nudges_tabs_configuration"),contentId:"content-settings",onSelect:()=>{(0,m.Nc)(l.PageView.ToolsNudgesConfiguration),n("settings")}}];return(0,f.BX)(f.HY,{children:[(0,f.tZ)(o.mQ,{tabs:a,sx:{margin:"0 32px 16px"},defaultTab:1}),(0,f.tZ)("div",{"aria-labelledby":"tab-settings",id:"content-settings",sx:{display:"settings"===t?"block":"none"},children:oE||(oE=(0,f.tZ)(GC,{}))}),(0,f.tZ)("div",{"aria-labelledby":"tab-insights",id:"content-insights",sx:{display:"insights"===t?"block":"none"},children:lE||(lE=(0,f.tZ)(sE,{}))})]})};var dE=n(20639);const _E=({iconName:e,title:t,description:n})=>(0,f.BX)("div",{sx:{display:"flex",flexDirection:"row",gap:"16px"},children:[(0,f.tZ)(o.vY,{name:e,mood:"brand"}),(0,f.BX)("div",{sx:{display:"flex",flexDirection:"column",gap:"4px"},children:[(0,f.tZ)(o.X6,{as:"h3",textStyle:"ds.title.block.medium",children:t}),(0,f.tZ)(o.nv,{textStyle:"ds.body.reduced.regular",color:"ds.text.neutral.quiet",children:n})]})]});var uE,mE,pE;const gE=()=>{const{translate:e}=(0,g.Z)(),{teamId:t}=(0,Ce.fV)(),n=(0,Qe.gW)(["nudges"]),{routes:a}=(0,i.Xo)(),{initSsoProvisioning:s}=(0,F.u)(Jy.y),d=(0,c.k)(Jy.y,"ssoProvisioning"),_=d.data?.global.inferredSsoState,u=n.status===Ze.rq.Success&&d.status===Ze.rq.Success&&_!==eb.s5.enum.Unknown;(0,r.useEffect)((()=>{_===eb.s5.enum.Unknown&&t&&s({teamId:`${t}`})}),[s,_,t]);const p=n.status===Ze.rq.Success&&n.data,h=_===eb.s5.enum.None||_===eb.s5.enum.NitroComplete||_===eb.s5.enum.NitroIncomplete;return(0,f.tZ)(B.Zbd,{sx:{minHeight:"680px",display:"flex",alignItems:"center",justifyContent:"center",padding:"24px",backgroundColor:"ds.container.agnostic.neutral.supershy",borderColor:"ds.border.neutral.quiet.idle",marginX:"32px",marginBottom:"32px"},children:(0,f.BX)(o.kC,{flexDirection:"column",alignItems:"center",gap:"32px",sx:{maxWidth:"560px",marginY:"75px"},children:[(0,f.BX)(o.kC,{flexDirection:"column",alignItems:"center",gap:"16px",children:[(0,f.tZ)("img",{src:dE,sx:{width:"320px",aspectRatio:"3/2"},alt:""}),(0,f.BX)(o.kC,{flexDirection:"column",alignItems:"center",gap:"8px",sx:{maxWidth:"512px",textAlign:"center"},children:[(0,f.tZ)(o.X6,{as:"h2",textStyle:"ds.title.section.large",color:"ds.text.neutral.catchy",children:e("team_settings_nudges_setup_overview_title")}),(0,f.tZ)(o.nv,{textStyle:"ds.body.standard.regular",color:"ds.text.neutral.standard",children:e("team_settings_nudges_setup_overview_subtitle")})]})]}),(0,f.BX)(o.kC,{flexDirection:"column",alignItems:"left",gap:"16px",children:[(0,f.tZ)(_E,{iconName:"ActionAddOutlined",title:e("team_settings_nudges_setup_step_one_title"),description:e("team_settings_nudges_setup_step_one_subtitle")}),(0,f.tZ)(_E,{iconName:"HealthPositiveOutlined",title:e("team_settings_nudges_setup_step_two_title"),description:e("team_settings_nudges_setup_step_two_subtitle")}),(0,f.tZ)(_E,{iconName:"TipOutlined",title:e("team_settings_nudges_setup_step_three_title"),description:e("team_settings_nudges_setup_step_three_subtitle")})]}),u?h?p?(0,f.tZ)(o.zx,{size:"medium",layout:"iconLeading",icon:pE||(pE=(0,f.tZ)(o.JO,{name:"ConfigureOutlined"})),onClick:()=>{(0,m.Kz)(new l.UserSetupNudgesEvent({action:l.NudgeAction.StartedSetup,integrationPlatform:l.IntegrationPlatform.Slack})),(0,X.Yo)("https://slack.com/oauth/v2/authorize?client_id=2317325599.7117714150453&scope=chat:write,chat:write.customize,users:read,users:read.email&user_scope="),window.close()},children:e("team_settings_nudges_setup")}):(0,f.tZ)(o.zx,{size:"medium",layout:"iconLeading",icon:mE||(mE=(0,f.tZ)(o.JO,{name:"PremiumOutlined"})),as:i.rU,to:`${a.teamAccountChangePlanRoutePath}?plan=business`,onClick:()=>(0,m.Kz)(new l.UserClickEvent({button:l.Button.ContactSales})),children:e("team_settings_nudges_setup_upgrade")}):(0,f.tZ)(o.ke,{title:e("team_settings_nudges_setup_incompatible"),mood:"danger"}):(0,f.tZ)("div",{sx:{display:"flex",justifyContent:"center"},children:uE||(uE=(0,f.tZ)(o.ZX,{size:"xlarge","data-testid":"nudges-setup-loader"}))})]})})};var hE,yE,bE;const xE=()=>{const{reportTACError:e}=Y(),t=(()=>{const{search:e,hash:t}=(0,i.TH)(),[n,a]=(0,r.useState)(void 0);return(0,r.useEffect)((()=>{var n;const i=(0,Jr.parse)(e),r=null!=(n=i.code)?n:"";if(r){delete i.code,a((e=>({...e,code:r})));const e=Object.keys(i).length>0?`?${(0,Jr.stringify)(i)}`:"",n=window.location.href.split("?")[0];window.history.replaceState({},"",n+e+t)}}),[e]),n})()?.code,[n,a]=(0,r.useState)(Boolean(t)),[s,d]=(0,r.useState)(!1),_=(0,c.k)(bC.R,"checkNudgesInstallation"),{validateNudgesInstallation:u,sendNudge:p}=(0,F.u)(bC.R),{translate:h}=(0,g.Z)(),y=(0,ta.V)();(0,r.useEffect)((()=>{t&&(async()=>{try{const e=await u({authCode:t});if((0,V.hx)(e)&&y.showAlert(h("team_settings_nudges_configuration_validation_error"),B.BLW.ERROR),(0,V.d6)(e)){(0,m.Kz)(new l.UserSetupNudgesEvent({action:l.NudgeAction.CompletedSetup,integrationPlatform:l.IntegrationPlatform.Slack}));const e=await p({type:"welcome"});(0,V.hx)(e)&&y.showAlert(h("team_settings_nudges_configuration_send_nudge_error"),B.BLW.ERROR),d(!0)}}catch(e){y.showAlert(h("_common_generic_error"),B.BLW.ERROR)}finally{a(!1)}})()}),[t]),_.status===Ze.rq.Error&&e(new Error("Unknown error occured while checking your Nudges installation"));const b=Boolean(_.data);return _.status===Ze.rq.Loading||n?(0,f.tZ)("div",{sx:{display:"flex",justifyContent:"center"},children:hE||(hE=(0,f.tZ)(o.ZX,{size:75,"data-testid":"nudges-validate-loader"}))}):b||s?yE||(yE=(0,f.tZ)(cE,{})):bE||(bE=(0,f.tZ)(gE,{}))};var SE,fE;const vE=()=>{const e=(0,Ee.o)("ace_tac_slack_integration"),t=(0,Qe.gW)(["nudges"]),{routes:n}=(0,i.Xo)(),a=(0,re.C)(),{translate:s}=(0,g.Z)();if((0,r.useEffect)((()=>{!1!==e&&void 0!==e||(0,i.uX)(n.teamIntegrationsRoutePath)}),[e]),null===e||!a)return(0,f.tZ)("div",{sx:{display:"flex",justifyContent:"center"},children:SE||(SE=(0,f.tZ)(o.ZX,{size:75}))});const l=t.status===Ze.rq.Success&&t.data;return(0,f.tZ)(yC.r,{moduleName:"TAC",useCaseName:"nudges",children:(0,f.BX)("div",{sx:{padding:"24px 0"},children:[(0,f.BX)("div",{sx:{display:"flex",alignItems:"center",paddingLeft:"32px",paddingBottom:"16px",gap:"8px"},children:[(0,f.tZ)(o.X6,{as:"h1",textStyle:"ds.title.section.large",children:s("webapp_sidemenu_nudges")}),l?(0,f.BX)(f.HY,{children:[(0,f.tZ)(o.Ct,{label:s("team_business_plus_badge_label"),mood:"brand",intensity:"quiet",layout:"iconLeading",iconName:"PremiumOutlined"}),a.isFreeTrial?null:(0,f.tZ)(o.nv,{textStyle:"ds.body.helper.regular",color:"ds.text.brand.standard",children:s("team_business_plus_badge_expiration")})]}):null]}),fE||(fE=(0,f.tZ)(xE,{}))]})})};function CE({path:e}){return(0,f.tZ)(i.GB,{path:e,permission:e=>e.adminAccess.hasFullAccess,children:(0,f.BX)(i.rs,{children:[(0,f.tZ)(i.Vy,{exact:!0,component:oC,path:`${e}`,permission:e=>TE("FULL",e),redirectPath:`${e}`}),(0,f.tZ)(i.Vy,{path:`${e}${a.Nr.DIRECTORY_SYNC}`,component:Av}),(0,f.tZ)(i.Vy,{path:`${e}${a.Nr.SSO}`,component:Af}),(0,f.tZ)(i.Vy,{path:`${e}${a.Nr.SIEM}`,component:hC}),(0,f.tZ)(i.Vy,{path:`${e}${a.Nr.NUDGES}`,component:vE})]})})}var EE=n(16037),ZE=n(97078);function TE(e,t){return!t.adminAccess||t.adminAccess.hasPermissionLevel(e)}const DE=({basePath:e,path:t})=>(0,f.tZ)(i.GB,{path:t,reducer:ZE.Z,permission:e=>e.loggedIn&&e.adminAccess.hasTACAccess,redirectPath:a.TT,component:Yl,children:(0,f.BX)(i.rs,{children:[(0,f.tZ)(i.l_,{exact:!0,from:`${e}/`,to:`${e}/${EE.$.DASHBOARD}`}),(0,f.tZ)(i.Vy,{component:ya,path:`${e}/${EE.$.CHANGE_PLAN}`,permission:e=>TE("BILLING",e)}),(0,f.tZ)(i.Vy,{component:ei,path:`${e}/${EE.$.POST_TRIAL_CHECKOUT}`,permission:e=>TE("BILLING",e)}),(0,f.tZ)(i.Vy,{component:Ls,path:`${e}/${EE.$.ACCOUNT}`,permission:e=>TE("BILLING",e),redirectPath:`${e}/${EE.$.GROUPS}`}),(0,f.tZ)(i.Vy,{component:Ad,path:`${e}/${EE.$.DASHBOARD}`,permission:e=>TE("FULL",e),redirectPath:`${e}/${EE.$.ACCOUNT}`}),(0,f.tZ)(Dl,{path:`${e}/${EE.$.ACTIVITY}`}),(0,f.tZ)(tg,{path:`${e}/${EE.$.GROUPS}`,permission:e=>TE("GROUP_READ",e)}),(0,f.tZ)(i.Vy,{component:Nh,path:`${e}/${EE.$.MEMBERS}`,permission:e=>TE("FULL",e),redirectPath:`${e}/${EE.$.ACCOUNT}`,reducer:_g.ZP}),(0,f.tZ)(i.Vy,{component:qu,path:`${e}/${EE.$.DARK_WEB_INSIGHTS}`,permission:e=>TE("FULL",e),redirectPath:`${e}/${EE.$.DARK_WEB_INSIGHTS}`,reducer:_g.ZP}),(0,f.tZ)(i.Vy,{component:Ym,path:`${e}/${EE.$.LOGGED_OUT_MONITORING}`,permission:e=>TE("FULL",e),redirectPath:`${e}/${EE.$.LOGGED_OUT_MONITORING}`}),(0,f.tZ)(Qy,{path:`${e}/${EE.$.SETTINGS}`}),(0,f.tZ)(CE,{path:`${e}/${EE.$.INTEGRATIONS}`})]})})},19122:(e,t,n)=>{n.d(t,{fV:()=>c,qc:()=>l});var a=n(96832),i=n(38452),r=n(39649),s=n(44110);const o=a.createContext({currentSpaceId:null,spaceDetails:null,teamId:null}),l=({lee:e,children:t})=>{var n;const a=(0,r.B)(e.globalState),l=null!=(n=(0,i.xO)(e.globalState)?.details)?n:null,c=(0,i.ev)(e.globalState);return(0,s.tZ)(o.Provider,{value:{teamId:c,currentSpaceId:a,spaceDetails:l},children:t})},c=()=>a.useContext(o)},12637:(e,t,n)=>{n.d(t,{j:()=>o});var a=n(33354),i=n(78060),r=n(28207),s=n(91);const o=()=>{var e;const t=(0,s.F)(),n=(0,r.u)(),o=(0,i.m)();if(t.status===a.rq.Error||n.status===a.rq.Error||o.status===a.rq.Error)return{status:a.rq.Success,shouldDisplayAdminVaultGetStartedGuide:!1};if(t.status!==a.rq.Success||n.status!==a.rq.Success||o.status!==a.rq.Success)return{status:a.rq.Loading};const l=!t.isGetStartedDismissed&&n.teamCreationDate>=1702508400&&null!=(e=o.isTeamCreator)&&e;return{status:a.rq.Success,shouldDisplayAdminVaultGetStartedGuide:l}}},6135:(e,t,n)=>{n.d(t,{S:()=>s});var a=n(99852),i=n(33354),r=n(47621);const s=()=>{const e=(0,a.k)(r.o,"getTeamCapabilities");return e.status===i.rq.Success?e.data:null}},16037:(e,t,n)=>{n.d(t,{$:()=>a});let a=function(e){return e.ACCOUNT="account",e.ACTIVITY="activity",e.CHANGE_PLAN="account/changeplan",e.DASHBOARD="dashboard",e.GROUPS="groups",e.MEMBERS="members",e.SETTINGS="settings",e.DARK_WEB_INSIGHTS="dark-web-insights",e.INTEGRATIONS="integrations",e.LOGGED_OUT_MONITORING="logged-out-monitoring",e.POST_TRIAL_CHECKOUT="account/checkout",e}({})},19471:(e,t,n)=>{n.d(t,{$b:()=>h,BJ:()=>v,Bw:()=>p,Bz:()=>z,F1:()=>a,FL:()=>L,FP:()=>A,FX:()=>u,Fn:()=>T,HX:()=>f,I9:()=>E,Iw:()=>b,J0:()=>O,M:()=>W,Mv:()=>i,Pr:()=>x,Rf:()=>R,Tx:()=>k,Tz:()=>G,Vr:()=>c,XP:()=>H,YD:()=>l,Zi:()=>P,bx:()=>Z,cI:()=>Y,hP:()=>D,hc:()=>g,i1:()=>q,jw:()=>M,lh:()=>j,mA:()=>w,mn:()=>F,n0:()=>m,nC:()=>S,nq:()=>B,o2:()=>V,oH:()=>_,rC:()=>r,rh:()=>C,sz:()=>U,to:()=>d,tz:()=>o,uC:()=>N,uR:()=>I,ub:()=>s,vS:()=>X,yi:()=>y,zF:()=>$});const a="https://app.dashlane.com",i="https://app.dashlane.com#/login",r="https://app.dashlane.com#/onboarding",s="https://www.dashlane.com/business/directbuy",o="https://www.dashlane.com/pricing",l="https://www.dashlane.com/business-password-manager/platform",c="https://support.dashlane.com/hc",d="https://support.dashlane.com/hc/requests/new",_="https://support.dashlane.com/hc/requests/new?req_type=dashlane_for_business",u="https://support.dashlane.com/hc/categories/200958889-Dashlane-Business",m="https://support.dashlane.com/hc/en-us/articles/360015304999-Joining-a-Dashlane-Business-plan-with-SSO-enabled#title2",p="https://support.dashlane.com/hc/requests/new",g="https://support.dashlane.com/hc/en-us/requests/new?utm_medium=misc&utm_source=dashlane_admin_console",h="https://support.dashlane.com/hc/en-us/articles/6351573344786?utm_medium=misc&utm_source=dashlane_admin_console",y="https://www.dashlane.com/download",b="https://support.dashlane.com/hc/articles/360014345059",x="https://dashlane.status.io/",S="https://support.dashlane.com/hc/articles/360013149040",f="https://support.dashlane.com/hc/articles/360013149040",v="https://www.dashlane.com/business/sso-download",C="https://support.dashlane.com/hc/articles/360017434219",E="https://support.dashlane.com/hc/en-us/articles/210826449",Z="https://support.dashlane.com/hc/en-us/articles/360015973719-Use-self-hosted-SSO-to-integrate-Dashlane-with-your-IdP",T="https://support.dashlane.com/hc/en-us/articles/10992671925778-Use-Dashlane-Confidential-SSO-to-integrate-with-your-IdP",D="https://support.dashlane.com/hc/en-us/articles/10992671925778",k="https://support.dashlane.com/hc/en-us/categories/200958889-Admins",I="https://support.dashlane.com/hc/en-us/articles/360013149040",A="https://support.dashlane.com/hc/en-us/articles/360013149040",N="https://support.dashlane.com/hc/en-us/articles/360013149040",w="https://www.dashlane.com/business-password-manager/enterprise",O="https://dashlane.zoom.us/webinar/register/6216504012380/WN_j-3JwzI0T1q1alUxHqsM7g#/registration",R="https://support.dashlane.com/hc/en-us/articles/212491369",L="https://support.dashlane.com/hc/articles/4516905332370",M="https://support.dashlane.com/hc/articles/4516905332370-Get-help-with-Dashlane#For-admins-only",B="https://support.dashlane.com/hc/articles/4516905332370#Purchase-order",P="https://support.dashlane.com/hc/articles/19810325141266",U="https://www.dashlane.com/terms",z="https://www.dashlane.com/privacy",X="https://support.dashlane.com/hc/requests/new?req_type=dashlane_for_business&ticket_form_id=4659353761426&topic=upgrade_to_dashlane_business",q="https://support.dashlane.com/hc/requests/new?req_type=dashlane_for_business&topic=add_seats",j=`${c}/articles/4516905332370#chatbot`,G="https://www.dashlane.com/blog/what-is-single-sign-on-sso",F="https://www.dashlane.com/resources/dashlane-zero-knowledge-security",V="https://support.apple.com/HT202039",H="https://support.apple.com/HT204088",W="https://support.google.com/googleplay/answer/7018481?co=GENIE.Platform%3DDesktop",$="https://support.google.com/store/answer/6160235",Y=(e="")=>`https://app.dashlane.com/#/team/signup?team=${e}`}}]);