"use strict";(self.webpackChunk_dashlane_leeloo=self.webpackChunk_dashlane_leeloo||[]).push([[9742],{82994:(e,t,i)=>{i.d(t,{s:()=>p}),i(96832);var s=i(78971),n=i(82598),a=i(33354),l=i(91871),o=i(88203);let r=function(e){return e.LastAdmin="LastAdmin",e.GroupSharing="GroupSharing",e.CollectionSharing="CollectionSharing",e.Generic="Generic",e}({});var c=i(65580),d=i(44110);const u=({reason:e,translations:t,goToSharingAccess:i,closeCantDeleteDialog:n})=>{const{translate:a}=(0,o.Z)(),l=((e,t)=>{const{groupSharingTitle:i,lastAdminTitle:s,collectionSharingTitle:n,genericErrorTitle:a}=e;switch(t){case r.LastAdmin:return s;case r.GroupSharing:return i;case r.CollectionSharing:return n;case r.Generic:return a;default:return(0,c.U)(t)}})(t,e),u=((e,t)=>{const{groupSharingSubtitle:i,lastAdminSubtitle:s,collectionSharingSubtitle:n,genericErrorSubtitle:a}=e;switch(t){case r.LastAdmin:return s;case r.GroupSharing:return i;case r.CollectionSharing:return n;case r.Generic:return a;default:return(0,c.U)(t)}})(t,e);return(0,d.tZ)(s.Vq,{isOpen:!0,onClose:n,title:null!=l?l:"",closeActionLabel:a("_common_dialog_dismiss_button"),actions:e===r.LastAdmin||r.GroupSharing||r.CollectionSharing?{primary:{children:t.lastAdminActionLabel,onClick:()=>{i(),n()}}}:void 0,children:u})};var m=i(37527);const h=({closeConfirmDeleteDialog:e,onDeleteConfirm:t,translations:i})=>{const{translate:n}=(0,o.Z)(),{confirmDeleteSubtitle:a,confirmDeleteTitle:l,confirmDeleteDismiss:r,confirmDeleteConfirm:c}=i;return(0,d.tZ)(s.Vq,{title:l,onClose:e,isOpen:!0,dialogClassName:m.Ht,closeActionLabel:n("_common_dialog_dismiss_button"),isDestructive:!0,actions:{primary:{children:c,onClick:t,id:"deletion-dialog-confirm-button"},secondary:{children:r,onClick:e,autoFocus:!0,id:"deletion-dialog-dismiss-button"}},children:a})},p=({closeConfirmDeleteDialog:e,goToSharingAccess:t,isVisible:i,itemId:c,onDeletionSuccess:m,sharingStatus:p,translations:g,vaultItemType:_,isShared:D,isSharedViaUserGroup:S,isItemInCollection:f,isLastAdmin:b})=>{const{showToast:C}=(0,s.pm)(),{translate:I}=(0,o.Z)(),{deleteVaultItems:v}=(0,n.u)(l.L);if(!i)return null;let E;return(D||p?.isShared)&&(S&&(E=r.GroupSharing),b&&(E=r.LastAdmin),f&&(E=r.CollectionSharing)),E&&t?(0,d.tZ)(u,{reason:E,translations:g,goToSharingAccess:t,closeCantDeleteDialog:e}):(0,d.tZ)(h,{closeConfirmDeleteDialog:e,onDeleteConfirm:async()=>{try{var e;(await v({ids:[c],vaultItemType:_})).tag===a.rq.Success?(C({description:null!=(e=g.deleteSuccessToast)?e:I("webapp_personal_info_edition_delete_success_toast")}),m()):C({description:I("_common_generic_error"),mood:"danger",isManualDismiss:!0})}catch(e){C({description:I("_common_generic_error"),mood:"danger",isManualDismiss:!0})}},translations:g})}},42521:(e,t,i)=>{i.d(t,{Jh:()=>o,UE:()=>a,ZP:()=>r});var s=i(96832),n=i(26849);const a=(0,n.compose)(n.not,n.isEmpty,n.trim,(0,n.defaultTo)("")),l=/.+@.+\..+/,o=e=>l.test(e.trim());class r extends s.Component{constructor(e){super(e),this.setInternalState=e=>{this.setState({internal:{...this.state.internal,...e}})},this.setUpdatedValues=e=>{const{signalEditedValues:t,onValuesUpdated:i}=this.props,s={...this.state.values,...e};this.setState({values:s},(()=>{t&&t(this.hasFormBeenEdited()),i&&i(s)}))},this.handleChange=(e,t="")=>{if(e instanceof Event&&t)throw new Error("handleChange was called with both a ChangeEvent and key.");const i=e?.target?{[e.target.dataset.name]:e.target.value}:{[t]:e};this.setUpdatedValues(i)},this.handleChanges=e=>{this.setUpdatedValues(e)},this.validateValues=e=>{if(0===Object.keys(e).length)return!0;const t=(0,n.reduce)(((t,i)=>(t[i]=e[i]?(0,n.compose)(n.not,e[i]):()=>!1,t)),{},Object.keys(this.state.values)),i=(0,n.evolve)(t,this.state.values);return this.setState({errors:i}),(0,n.all)((0,n.equals)(!1),(0,n.values)(i))},this.hasFormBeenEdited=()=>!(0,n.equals)(this.state.values,this.props.currentValues),this.getValues=()=>this.state.values;const t=Object.keys(e.currentValues).reduce(((e,t)=>(e[t]=!1,e)),{});this.state={internal:{},values:e.currentValues,errors:t}}componentDidUpdate(e){(0,n.equals)(this.props.currentValues,e.currentValues)||this.setState({values:this.props.currentValues})}}},86816:(e,t,i)=>{i.d(t,{Y:()=>b});var s=i(96832),n=i(50756),a=i(91871),l=i(39431),o=i(82598),r=i(14900),c=i(63520),d=i(15446),u=i(82994),m=i(92077),h=i(86498),p=i(88203),g=i(45272),_=i(18402),D=i.n(_),S=i(44110);const f={DELETE_CONFIRM:"webapp_personal_info_edition_delete_confirm",DELETE_DISMISS:"webapp_personal_info_edition_delete_dismiss",DELETE_SUBTITLE:"webapp_personal_info_edition_delete_subtitle"};function b(e){const{getItemTypeDescription:t,getDeleteTitle:i,getTitle:_,iconType:b,vaultItemType:C,renderForm:I}=e;return({lee:e,item:v,match:E})=>{const T=(0,s.useRef)(null),w=(0,h.V)(),{translate:V}=(0,p.Z)(),{routes:y}=(0,m.Xo)(),{updateVaultItem:L}=(0,o.u)(a.L),[U,Z]=(0,s.useState)(!1),[A,x]=(0,s.useState)(!1);if((0,s.useEffect)((()=>{const e={[l.U.Address]:n.PageView.ItemAddressDetails,[l.U.Company]:n.PageView.ItemCompanyDetails,[l.U.Email]:n.PageView.ItemEmailDetails,[l.U.Identity]:n.PageView.ItemIdentityDetails,[l.U.Phone]:n.PageView.ItemPhoneDetails,[l.U.Website]:n.PageView.ItemWebsiteDetails};(0,g.Nc)(e[C])}),[]),!v)return null;const P=()=>{(0,g.Nc)(n.PageView.ItemPersonalInfoList),(0,m.uX)(y.userPersonalInfo)},k=v?_(v,V):"",N={confirmDeleteConfirm:V(f.DELETE_CONFIRM),confirmDeleteDismiss:V(f.DELETE_DISMISS),confirmDeleteSubtitle:V(f.DELETE_SUBTITLE),confirmDeleteTitle:i(V)};return(0,S.BX)(c.zI,{isUsingNewDesign:!0,isViewingExistingItem:Boolean(E.params?.uuid),itemHasBeenEdited:U,onNavigateOut:P,onSubmit:async()=>{v.id&&Boolean(T.current?.isFormValid())&&(await(async()=>{const e=T.current?.getValues();e&&"success"!==(await L({vaultItemType:C,content:e,id:v.id})).tag&&w.showAlert(V("_common_generic_error"),r.BLW.ERROR)})(),P())},onClickDelete:()=>x(!0),ignoreCloseOnEscape:A,formId:"edit_personalinfo_panel",header:(0,S.tZ)(c.V9,{icon:(0,S.tZ)(d.ZP,{iconSize:d.Jh.headerEditPanelIcon,iconType:b}),iconBackgroundColor:D()["--dash-green-00"],title:k,titleDescription:t(V)}),children:[I(e,v,T,(()=>Z(!0))),(0,S.tZ)(u.s,{isVisible:A,itemId:v.id,closeConfirmDeleteDialog:()=>x(!1),onDeletionSuccess:P,translations:N,vaultItemType:C})]})}}},39742:(e,t,i)=>{i.r(t),i.d(t,{Connected:()=>u}),i(96832);var s=i(99852),n=i(91871),a=i(39431),l=i(47837),o=i(86816),r=i(15446),c=i(44110);const d=(0,o.Y)({getDeleteTitle:e=>e("webapp_personal_info_edition_delete_title_website"),getItemTypeDescription:e=>e("webapp_personal_info_edition_header_website_description"),getTitle:e=>e.itemName,iconType:r.Tu.website,vaultItemType:a.U.Website,renderForm:(e,t,i,s)=>{const n={itemName:t.itemName,URL:t.URL,spaceId:t.spaceId};return(0,c.tZ)(l.m,{lee:e,currentValues:n,signalEditedValues:s,ref:i})}}),u=e=>{const{data:t}=(0,s.k)(n.L,"query",{vaultItemTypes:[a.U.Website],ids:[`{${e.match.params.uuid}}`]});return(0,c.tZ)(d,{...e,item:t?.websitesResult.items[0]})}},47837:(e,t,i)=>{i.d(t,{m:()=>c});var s=i(78971),n=i(6697),a=i(42521),l=i(67406),o=i(68037),r=i(44110);class c extends a.ZP{isFormValid(){return this.validateValues({URL:a.UE})}render(){var e;const t=this.props.lee.translate.namespace("webapp_personal_info_edition_website_"),{shouldShowFrozenStateDialog:i}=this.context;return(0,r.BX)("div",{sx:{display:"flex",flexDirection:"column",gap:"16px"},children:[(0,r.tZ)(o.u,{title:t("content_card_details_label"),additionalSx:{display:"flex",flexDirection:"column",gap:"8px"},children:(0,r.tZ)(s.qo,{required:!0,label:t("website_label"),placeholder:t("placeholder_no_website"),"data-name":"URL",value:this.state.values.URL,error:this.state.errors.URL,onChange:this.handleChange,readOnly:!!i},"website")}),(0,r.BX)(o.u,{title:t("content_card_organization_label"),additionalSx:{display:"flex",flexDirection:"column",gap:"8px"},children:[(0,r.tZ)(s.qo,{label:t("name_label"),placeholder:t("placeholder_no_name"),"data-name":"itemName",value:this.state.values.itemName,onChange:this.handleChange,readOnly:!!i},"name"),(0,r.tZ)(l.M,{isUsingNewDesign:!0,labelSx:l.e,spaceId:null!=(e=this.state.values.spaceId)?e:"",onChange:e=>this.handleChange(e,"spaceId"),disabled:!!i})]})]})}}c.contextType=n.CQ}}]);