"use strict";(self.webpackChunk_dashlane_leeloo=self.webpackChunk_dashlane_leeloo||[]).push([[8652],{48094:(e,t,n)=>{n.d(t,{D:()=>l});var a=n(78971),o=n(96832),i=n(44110);const l=(0,o.forwardRef)((({label:e,name:t,value:n,placeholder:l,options:c,disabled:r,dataName:s="localeFormat",onChange:_},d)=>{const u=(0,o.useMemo)((()=>c.map((e=>(0,i.tZ)(a.$m,{value:e.value,children:e.label},e.value)))),[c]);return(0,i.tZ)(a.mg,{ref:d,name:t,label:e,placeholder:l,"data-name":s,value:n,onChange:_,readOnly:r,children:u},"country")}));l.displayName="CountryField"},48652:(e,t,n)=>{n.r(t),n.d(t,{Connected:()=>v});var a,o=n(99852),i=n(91871),l=n(39431),c=n(96832),r=n(26849),s=n(87279),_=n(82598),d=n(14900),u=n(50756),p=n(86498),m=n(88203),b=n(45272),C=n(92077),h=n(76376),I=n(63520),g=n(82994),y=n(60062),k=n(8940),f=n(49087),B=n(3045),w=n(31605),A=n(44110);const S=({item:e})=>{const{translate:t}=(0,m.Z)(),{routes:n}=(0,h.Xo)(),{updateVaultItem:o}=(0,_.u)(i.L),[S,v]=(0,c.useState)(!1),[D,N]=(0,c.useState)(!1),[E,L]=(0,c.useState)(new Set),[P,Z]=(0,c.useState)(e),[V,O]=(0,c.useState)(!1),{areProtectedItemsUnlocked:T,openProtectedItemsUnlocker:R,protectedItemsUnlockerShown:U}=(0,B.t)(),H=(0,f.B)(),q=(0,p.V)();(0,c.useEffect)((()=>{(0,b.Nc)(u.PageView.ItemBankStatementDetails)}),[]);const x=()=>{(0,b.Nc)(u.PageView.ItemPaymentList),(0,C.uX)(n.userPayments)},F=(0,c.useCallback)((t=>{Z((n=>{const a={...n,...t};return v(!(0,r.equals)(a,e)),a}))}),[e]),M=()=>{q.showAlert(t("_common_generic_error"),d.BLW.ERROR)},G={confirmDeleteConfirm:t("webapp_payment_edition_bank_account_delete_confirm"),confirmDeleteDismiss:t("webapp_payment_edition_bank_account_delete_dismiss"),confirmDeleteSubtitle:t("webapp_payment_edition_bank_account_delete_subtitle"),confirmDeleteTitle:t("webapp_payment_edition_bank_account_delete_title"),deleteSuccessToast:e.accountName?t("webapp_payment_edition_bank_account_name_delete_alert",{accountName:e.accountName}):t("webapp_payment_edition_bank_account_generic_delete_alert")},z=U||V;return(0,A.BX)(I.zI,{isUsingNewDesign:!0,onNavigateOut:x,ignoreCloseOnEscape:z,formId:"bank-account-edit-form",onSubmit:async()=>{if(D)return;const n=(0,k.e)(P);if(!n.isValid)return L(n.errorSet);N(!0);try{const n=await o({vaultItemType:l.U.BankAccount,content:P,id:e.id});if((0,s.d6)(n)){const e=P.accountName?t("webapp_payment_edition_bank_account_name_update_alert",{accountName:P.accountName}):t("webapp_payment_edition_bank_account_generic_update_alert");q.showAlert(e,d.BLW.SUCCESS),x()}else N(!1),M()}catch(e){N(!1),M()}},header:(0,A.tZ)(I.V9,{icon:a||(a=(0,A.tZ)(y.L,{})),iconBackgroundColor:d.colors.dashGreen06,title:e.accountName}),onClickDelete:()=>{O(!0)},itemHasBeenEdited:S,isViewingExistingItem:!0,children:[(0,A.tZ)(k.o,{itemId:e.id,bankAccount:P,errors:E,onCopy:e=>{H.setAlertMessage(e),H.show()},onValueChanged:F,areProtectedItemsUnlocked:T,openProtectedItemsUnlocker:R,variant:"edit"}),(0,A.tZ)(g.s,{isVisible:V,itemId:e.id,closeConfirmDeleteDialog:()=>{O(!1)},onDeletionSuccess:x,translations:G,vaultItemType:l.U.BankAccount}),H.isAlertVisible&&(0,A.tZ)("div",{className:w.Z.alertWrapper,children:(0,A.tZ)(d.bZj,{size:d.k3y.SMALL,severity:d.BLW.SUCCESS,closeIconName:t("_common_alert_dismiss_button"),onClose:()=>{H.hide()},children:H.alertMessage})})]})},v=e=>{const{data:t}=(0,o.k)(i.L,"query",{vaultItemTypes:[l.U.BankAccount],ids:[`{${e.match.params.uuid}}`]});return t?.bankAccountsResult.items.length?(0,A.tZ)(S,{...e,item:t.bankAccountsResult.items[0]}):null}},8940:(e,t,n)=>{n.d(t,{o:()=>O,e:()=>T});var a=n(96832),o=n(44105),i=n(50756),l=n(78971),c=n(88203),r=n(45272),s=n(6697),_=n(82207),d=n(68819),u=n(67406),p=n(30309);const m="webapp_payment_edition_field_bank_account_BIC",b="webapp_payment_edition_field_bank_account_no_BIC_placeholder",C="webapp_payment_edition_field_bank_account_account_number",h="webapp_payment_edition_field_bank_account_no_account_number_placeholder",I="webapp_payment_alert_bank_account_BIC_copied",g="webapp_payment_alert_bank_account_account_number_copied";var y=n(48038),k=n(5465);const f={},B=e=>e!==f,w=[];var A=n(68037),S=n(48094),v=n(62385),D=n(44110);const N="webapp_payment_edition_field_bank_account_action_hide",E="webapp_payment_edition_field_bank_account_action_show",L="webapp_payment_edition_field_bank_account_country",P="webapp_payment_edition_field_bank_account_bank_name",Z=(e,t)=>e.filter((e=>!(o.c[e]===o.c.UNIVERSAL||o.c[e]===o.c.NO_TYPE))).map((e=>({label:t(`country_name_${o.c[e]}`),value:o.c[e]}))).sort(((e,t)=>e.label.localeCompare(t.label))),V=(e,t)=>{const{bankAccount:n,errors:V=new Set,onValueChanged:O}=e,{bankCode:T,accountName:R,IBAN:U,BIC:H,ownerName:q,spaceId:x,country:F}=n,M=U.length>0,G=H.length>0,[z,W]=(0,a.useState)(!G),[X,$]=(0,a.useState)(!M),{translate:j}=(0,c.Z)(),{shouldShowFrozenStateDialog:K}=(0,s.Ub)(),{logRevealBankAccountField:J}=(0,v.E)(),Q="edit"===e.variant?!e.areProtectedItemsUnlocked:void 0,Y=(e=>{switch(e){case p.cH.MX:return{IBAN:"webapp_payment_edition_field_bank_account_CLABE",BIC:m,IBAN_PLACEHOLDER:"webapp_payment_edition_field_bank_account_no_CLABE_placeholder",BIC_PLACEHOLDER:b,IBAN_COPIED:"webapp_payment_alert_bank_account_CLABE_copied",BIC_COPIED:I};case p.cH.GB:return{IBAN:C,BIC:"webapp_payment_edition_field_bank_account_sort_code",IBAN_PLACEHOLDER:h,BIC_PLACEHOLDER:"webapp_payment_edition_field_bank_account_no_sort_code_placeholder",IBAN_COPIED:g,BIC_COPIED:"webapp_payment_alert_bank_account_sort_code_copied"};case p.cH.US:return{IBAN:C,BIC:"webapp_payment_edition_field_bank_account_routing_number",IBAN_PLACEHOLDER:h,BIC_PLACEHOLDER:"webapp_payment_edition_field_bank_account_no_routing_number_placeholder",IBAN_COPIED:g,BIC_COPIED:"webapp_payment_alert_bank_account_routing_number_copied"};default:return{IBAN:"webapp_payment_edition_field_bank_account_IBAN",BIC:m,IBAN_PLACEHOLDER:"webapp_payment_edition_field_bank_account_no_IBAN_placeholder",BIC_PLACEHOLDER:b,IBAN_COPIED:"webapp_payment_alert_bank_account_IBAN_copied",BIC_COPIED:I}}})(F),ee=(0,a.useCallback)((e=>t=>{const n="string"==typeof t?t:t.target.value;O({[e]:n})}),[O]),te="edit"===e.variant?t=>{(0,r.Kz)(new i.UserRevealVaultItemFieldEvent({field:t,isProtected:!0,itemId:e.itemId,itemType:i.ItemType.BankStatement}))}:void 0,ne="edit"===e.variant?(t,n)=>new Promise(((a,o)=>{if(t||e.areProtectedItemsUnlocked)return n(),a();Q&&"function"==typeof e.openProtectedItemsUnlocker&&e.openProtectedItemsUnlocker({action:d.P.Show,itemType:d.R.CreditCard,successCallback:()=>(n(),a()),cancelCallback:o})})):void 0,ae=()=>{!z&&te&&(te(i.Field.Bic),J({name:R,field:i.Field.Bic,country:F})),W((e=>!e))},oe=()=>{!X&&te&&(te(i.Field.Iban),J({name:R,field:i.Field.Iban,country:F})),$((e=>!e))},ie="edit"===e.variant?t=>{(0,r.Kz)(new i.UserCopyVaultItemFieldEvent({itemType:i.ItemType.BankStatement,field:i.Field.Bic,itemId:e.itemId,isProtected:!0})),t&&e.onCopy(j(Y.BIC_COPIED))}:void 0,le="edit"===e.variant?t=>{(0,r.Kz)(new i.UserCopyVaultItemFieldEvent({itemType:i.ItemType.BankStatement,field:i.Field.Iban,itemId:e.itemId,isProtected:!0})),t&&e.onCopy(j(Y.IBAN_COPIED))}:void 0,ce=(e=>{const t=(()=>{const e=a.useRef(f),t=(0,y.qr)({queryConfig:{query:k.C.getAllBanks}},[]);return B(e.current)||t.status!==y.rq.Success||(e.current=t.data),e.current})();return a.useMemo((()=>{var n;if(!B(t))return w;const a=(null!=(n=t[e])?n:[]).slice();return a.sort(((e,t)=>e.localizedString.localeCompare(t.localizedString))),a}),[t,e])})(F),re=ce!==w,se=(0,a.useMemo)((()=>ce.map((e=>({label:e.localizedString,value:`${e.code}`})))),[ce]);(0,a.useEffect)((()=>{var e;void 0===(e=T,se.find((({value:t})=>t===e)))&&se.length>0&&O({bankCode:se[0].value},!0),""!==T&&!se.length&&re&&O({bankCode:""})}),[T,n,se,re,O]);const _e=(0,a.useMemo)((()=>{const e=Object.keys(o.c);return(0,D.tZ)(S.D,{label:j(L),placeholder:j(L)+F,disabled:!!K,options:Z(e,j),value:F,onChange:ee("country")})}),[F,ee,K,j]),de=(0,a.useMemo)((()=>se.length>0?(0,D.tZ)(l.mg,{label:j(P),placeholder:j(P)+T,onChange:ee("bankCode"),value:T,readOnly:!!K,children:se.map((e=>(0,D.tZ)(l.$m,{value:e.value,children:e.label},e.value)))},`${F}bank`):null),[T,se,F,ee,K,j]);return(0,D.BX)("div",{sx:{display:"flex",flexDirection:"column",gap:"16px"},children:[(0,D.BX)(A.u,{title:j("webapp_payment_edition_content_bank_details_label"),additionalSx:{display:"flex",flexDirection:"column",gap:"8px"},children:[(0,D.tZ)(l.qo,{value:q,label:j("webapp_payment_edition_field_bank_account_owner_name"),placeholder:j("webapp_payment_edition_field_bank_account_no_owner_name_placeholder"),onChange:ee("ownerName"),disabled:!!K,ref:t},"owner"),(0,D.tZ)(l.Nc,{required:!0,label:j(Y.IBAN),placeholder:j(Y.IBAN_PLACEHOLDER),"data-name":"IBAN",readOnly:!X&&M||!!K,isValueInitiallyVisible:X,toggleVisibilityLabel:{hide:j(N),show:j(E)},onValueVisibilityChangeRequest:ne?()=>ne?.(X,oe):void 0,actions:le&&void 0!==Q?[(0,D.tZ)(_.m,{data:U,checkProtected:()=>Q,onCopy:le,itemType:d.R.BankAccount},"copy-iban")]:void 0,value:X?U:"●●●●●●●●●●●●●●●●",onChange:ee("IBAN"),error:V.has("IBAN")},"IBAN"),(0,D.tZ)(l.Nc,{readOnly:!z&&G||!!K,value:z?H:"●●●●●●",label:j(Y.BIC),placeholder:j(Y.BIC_PLACEHOLDER),isValueInitiallyVisible:z,toggleVisibilityLabel:{hide:j(N),show:j(E)},onValueVisibilityChangeRequest:ne?()=>ne?.(z,ae):void 0,actions:ie&&void 0!==Q?[(0,D.tZ)(_.m,{data:H,checkProtected:()=>Q,onCopy:ie,itemType:d.R.BankAccount},"copy-bic")]:void 0,onChange:ee("BIC"),error:V.has("BIC")},"BIC"),_e,de]}),(0,D.BX)(A.u,{title:j("webapp_payment_edition_content_bank_organization_label"),additionalSx:{display:"flex",flexDirection:"column",gap:"8px"},children:[(0,D.tZ)(l.qo,{value:R,label:j("webapp_payment_edition_field_bank_account_name"),placeholder:j("webapp_payment_edition_field_bank_account_no_name_placeholder"),onChange:ee("accountName"),disabled:!!K},"name"),(0,D.tZ)(u.M,{isUsingNewDesign:!0,spaceId:null!=x?x:"",labelSx:u.e,onChange:e=>ee("spaceId")(e),disabled:!!K})]})]})},O=(0,a.forwardRef)(V),T=e=>e.IBAN&&0!==e.IBAN.length?{isValid:!0}:{isValid:!1,errorSet:new Set(["IBAN"])}},60062:(e,t,n)=>{n.d(t,{L:()=>i}),n(96832);var a=n(14900);var o=n(44110);const i=()=>(0,o.tZ)("div",{className:"iconWrapper--JneIZUVWyv",children:(0,o.tZ)(a.QCj,{size:48,color:a.colors.white})})},49087:(e,t,n)=>{n.d(t,{B:()=>o});var a=n(96832);const o=()=>{const[e,t]=a.useState(""),[n,o]=a.useState(!1),i=()=>{o(!1)};return a.useEffect((()=>{if(!n)return;const e=setTimeout(i,5e3);return()=>clearTimeout(e)}),[n,e]),{isAlertVisible:n,alertMessage:e,setAlertMessage:t,hide:i,show:()=>{o(!0)}}}},82994:(e,t,n)=>{n.d(t,{s:()=>m}),n(96832);var a=n(78971),o=n(82598),i=n(33354),l=n(91871),c=n(88203);let r=function(e){return e.LastAdmin="LastAdmin",e.GroupSharing="GroupSharing",e.CollectionSharing="CollectionSharing",e.Generic="Generic",e}({});var s=n(65580),_=n(44110);const d=({reason:e,translations:t,goToSharingAccess:n,closeCantDeleteDialog:o})=>{const{translate:i}=(0,c.Z)(),l=((e,t)=>{const{groupSharingTitle:n,lastAdminTitle:a,collectionSharingTitle:o,genericErrorTitle:i}=e;switch(t){case r.LastAdmin:return a;case r.GroupSharing:return n;case r.CollectionSharing:return o;case r.Generic:return i;default:return(0,s.U)(t)}})(t,e),d=((e,t)=>{const{groupSharingSubtitle:n,lastAdminSubtitle:a,collectionSharingSubtitle:o,genericErrorSubtitle:i}=e;switch(t){case r.LastAdmin:return a;case r.GroupSharing:return n;case r.CollectionSharing:return o;case r.Generic:return i;default:return(0,s.U)(t)}})(t,e);return(0,_.tZ)(a.Vq,{isOpen:!0,onClose:o,title:null!=l?l:"",closeActionLabel:i("_common_dialog_dismiss_button"),actions:e===r.LastAdmin||r.GroupSharing||r.CollectionSharing?{primary:{children:t.lastAdminActionLabel,onClick:()=>{n(),o()}}}:void 0,children:d})};var u=n(37527);const p=({closeConfirmDeleteDialog:e,onDeleteConfirm:t,translations:n})=>{const{translate:o}=(0,c.Z)(),{confirmDeleteSubtitle:i,confirmDeleteTitle:l,confirmDeleteDismiss:r,confirmDeleteConfirm:s}=n;return(0,_.tZ)(a.Vq,{title:l,onClose:e,isOpen:!0,dialogClassName:u.Ht,closeActionLabel:o("_common_dialog_dismiss_button"),isDestructive:!0,actions:{primary:{children:s,onClick:t,id:"deletion-dialog-confirm-button"},secondary:{children:r,onClick:e,autoFocus:!0,id:"deletion-dialog-dismiss-button"}},children:i})},m=({closeConfirmDeleteDialog:e,goToSharingAccess:t,isVisible:n,itemId:s,onDeletionSuccess:u,sharingStatus:m,translations:b,vaultItemType:C,isShared:h,isSharedViaUserGroup:I,isItemInCollection:g,isLastAdmin:y})=>{const{showToast:k}=(0,a.pm)(),{translate:f}=(0,c.Z)(),{deleteVaultItems:B}=(0,o.u)(l.L);if(!n)return null;let w;return(h||m?.isShared)&&(I&&(w=r.GroupSharing),y&&(w=r.LastAdmin),g&&(w=r.CollectionSharing)),w&&t?(0,_.tZ)(d,{reason:w,translations:b,goToSharingAccess:t,closeCantDeleteDialog:e}):(0,_.tZ)(p,{closeConfirmDeleteDialog:e,onDeleteConfirm:async()=>{try{var e;(await B({ids:[s],vaultItemType:C})).tag===i.rq.Success?(k({description:null!=(e=b.deleteSuccessToast)?e:f("webapp_personal_info_edition_delete_success_toast")}),u()):k({description:f("_common_generic_error"),mood:"danger",isManualDismiss:!0})}catch(e){k({description:f("_common_generic_error"),mood:"danger",isManualDismiss:!0})}},translations:b})}},31605:(e,t,n)=>{n.d(t,{Z:()=>a});const a={alertWrapper:"alertWrapper--JLZLLWrHCo"}}}]);