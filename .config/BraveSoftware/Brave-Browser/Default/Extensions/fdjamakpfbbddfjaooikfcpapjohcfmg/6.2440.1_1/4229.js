"use strict";(self.webpackChunk_dashlane_leeloo=self.webpackChunk_dashlane_leeloo||[]).push([[4229],{82994:(e,t,i)=>{i.d(t,{s:()=>p}),i(96832);var a=i(78971),n=i(82598),s=i(33354),l=i(91871),o=i(88203);let r=function(e){return e.LastAdmin="LastAdmin",e.GroupSharing="GroupSharing",e.CollectionSharing="CollectionSharing",e.Generic="Generic",e}({});var d=i(65580),c=i(44110);const _=({reason:e,translations:t,goToSharingAccess:i,closeCantDeleteDialog:n})=>{const{translate:s}=(0,o.Z)(),l=((e,t)=>{const{groupSharingTitle:i,lastAdminTitle:a,collectionSharingTitle:n,genericErrorTitle:s}=e;switch(t){case r.LastAdmin:return a;case r.GroupSharing:return i;case r.CollectionSharing:return n;case r.Generic:return s;default:return(0,d.U)(t)}})(t,e),_=((e,t)=>{const{groupSharingSubtitle:i,lastAdminSubtitle:a,collectionSharingSubtitle:n,genericErrorSubtitle:s}=e;switch(t){case r.LastAdmin:return a;case r.GroupSharing:return i;case r.CollectionSharing:return n;case r.Generic:return s;default:return(0,d.U)(t)}})(t,e);return(0,c.tZ)(a.Vq,{isOpen:!0,onClose:n,title:null!=l?l:"",closeActionLabel:s("_common_dialog_dismiss_button"),actions:e===r.LastAdmin||r.GroupSharing||r.CollectionSharing?{primary:{children:t.lastAdminActionLabel,onClick:()=>{i(),n()}}}:void 0,children:_})};var u=i(37527);const h=({closeConfirmDeleteDialog:e,onDeleteConfirm:t,translations:i})=>{const{translate:n}=(0,o.Z)(),{confirmDeleteSubtitle:s,confirmDeleteTitle:l,confirmDeleteDismiss:r,confirmDeleteConfirm:d}=i;return(0,c.tZ)(a.Vq,{title:l,onClose:e,isOpen:!0,dialogClassName:u.Ht,closeActionLabel:n("_common_dialog_dismiss_button"),isDestructive:!0,actions:{primary:{children:d,onClick:t,id:"deletion-dialog-confirm-button"},secondary:{children:r,onClick:e,autoFocus:!0,id:"deletion-dialog-dismiss-button"}},children:s})},p=({closeConfirmDeleteDialog:e,goToSharingAccess:t,isVisible:i,itemId:d,onDeletionSuccess:u,sharingStatus:p,translations:m,vaultItemType:b,isShared:g,isSharedViaUserGroup:f,isItemInCollection:E,isLastAdmin:S})=>{const{showToast:v}=(0,a.pm)(),{translate:D}=(0,o.Z)(),{deleteVaultItems:T}=(0,n.u)(l.L);if(!i)return null;let y;return(g||p?.isShared)&&(f&&(y=r.GroupSharing),S&&(y=r.LastAdmin),E&&(y=r.CollectionSharing)),y&&t?(0,c.tZ)(_,{reason:y,translations:m,goToSharingAccess:t,closeCantDeleteDialog:e}):(0,c.tZ)(h,{closeConfirmDeleteDialog:e,onDeleteConfirm:async()=>{try{var e;(await T({ids:[d],vaultItemType:b})).tag===s.rq.Success?(v({description:null!=(e=m.deleteSuccessToast)?e:D("webapp_personal_info_edition_delete_success_toast")}),u()):v({description:D("_common_generic_error"),mood:"danger",isManualDismiss:!0})}catch(e){v({description:D("_common_generic_error"),mood:"danger",isManualDismiss:!0})}},translations:m})}},42521:(e,t,i)=>{i.d(t,{Jh:()=>o,UE:()=>s,ZP:()=>r});var a=i(96832),n=i(26849);const s=(0,n.compose)(n.not,n.isEmpty,n.trim,(0,n.defaultTo)("")),l=/.+@.+\..+/,o=e=>l.test(e.trim());class r extends a.Component{constructor(e){super(e),this.setInternalState=e=>{this.setState({internal:{...this.state.internal,...e}})},this.setUpdatedValues=e=>{const{signalEditedValues:t,onValuesUpdated:i}=this.props,a={...this.state.values,...e};this.setState({values:a},(()=>{t&&t(this.hasFormBeenEdited()),i&&i(a)}))},this.handleChange=(e,t="")=>{if(e instanceof Event&&t)throw new Error("handleChange was called with both a ChangeEvent and key.");const i=e?.target?{[e.target.dataset.name]:e.target.value}:{[t]:e};this.setUpdatedValues(i)},this.handleChanges=e=>{this.setUpdatedValues(e)},this.validateValues=e=>{if(0===Object.keys(e).length)return!0;const t=(0,n.reduce)(((t,i)=>(t[i]=e[i]?(0,n.compose)(n.not,e[i]):()=>!1,t)),{},Object.keys(this.state.values)),i=(0,n.evolve)(t,this.state.values);return this.setState({errors:i}),(0,n.all)((0,n.equals)(!1),(0,n.values)(i))},this.hasFormBeenEdited=()=>!(0,n.equals)(this.state.values,this.props.currentValues),this.getValues=()=>this.state.values;const t=Object.keys(e.currentValues).reduce(((e,t)=>(e[t]=!1,e)),{});this.state={internal:{},values:e.currentValues,errors:t}}componentDidUpdate(e){(0,n.equals)(this.props.currentValues,e.currentValues)||this.setState({values:this.props.currentValues})}}},86816:(e,t,i)=>{i.d(t,{Y:()=>S});var a=i(96832),n=i(50756),s=i(91871),l=i(39431),o=i(82598),r=i(14900),d=i(63520),c=i(15446),_=i(82994),u=i(92077),h=i(86498),p=i(88203),m=i(45272),b=i(18402),g=i.n(b),f=i(44110);const E={DELETE_CONFIRM:"webapp_personal_info_edition_delete_confirm",DELETE_DISMISS:"webapp_personal_info_edition_delete_dismiss",DELETE_SUBTITLE:"webapp_personal_info_edition_delete_subtitle"};function S(e){const{getItemTypeDescription:t,getDeleteTitle:i,getTitle:b,iconType:S,vaultItemType:v,renderForm:D}=e;return({lee:e,item:T,match:y})=>{const I=(0,a.useRef)(null),C=(0,h.V)(),{translate:A}=(0,p.Z)(),{routes:w}=(0,u.Xo)(),{updateVaultItem:N}=(0,o.u)(s.L),[V,L]=(0,a.useState)(!1),[M,P]=(0,a.useState)(!1);if((0,a.useEffect)((()=>{const e={[l.U.Address]:n.PageView.ItemAddressDetails,[l.U.Company]:n.PageView.ItemCompanyDetails,[l.U.Email]:n.PageView.ItemEmailDetails,[l.U.Identity]:n.PageView.ItemIdentityDetails,[l.U.Phone]:n.PageView.ItemPhoneDetails,[l.U.Website]:n.PageView.ItemWebsiteDetails};(0,m.Nc)(e[v])}),[]),!T)return null;const U=()=>{(0,m.Nc)(n.PageView.ItemPersonalInfoList),(0,u.uX)(w.userPersonalInfo)},Z=T?b(T,A):"",O={confirmDeleteConfirm:A(E.DELETE_CONFIRM),confirmDeleteDismiss:A(E.DELETE_DISMISS),confirmDeleteSubtitle:A(E.DELETE_SUBTITLE),confirmDeleteTitle:i(A)};return(0,f.BX)(d.zI,{isUsingNewDesign:!0,isViewingExistingItem:Boolean(y.params?.uuid),itemHasBeenEdited:V,onNavigateOut:U,onSubmit:async()=>{T.id&&Boolean(I.current?.isFormValid())&&(await(async()=>{const e=I.current?.getValues();e&&"success"!==(await N({vaultItemType:v,content:e,id:T.id})).tag&&C.showAlert(A("_common_generic_error"),r.BLW.ERROR)})(),U())},onClickDelete:()=>P(!0),ignoreCloseOnEscape:M,formId:"edit_personalinfo_panel",header:(0,f.tZ)(d.V9,{icon:(0,f.tZ)(c.ZP,{iconSize:c.Jh.headerEditPanelIcon,iconType:S}),iconBackgroundColor:g()["--dash-green-00"],title:Z,titleDescription:t(A)}),children:[D(e,T,I,(()=>L(!0))),(0,f.tZ)(_.s,{isVisible:M,itemId:T.id,closeConfirmDeleteDialog:()=>P(!1),onDeletionSuccess:U,translations:O,vaultItemType:v})]})}}},74229:(e,t,i)=>{i.r(t),i.d(t,{Connected:()=>h}),i(96832);var a=i(99852),n=i(91871),s=i(39431),l=i(7973),o=i(79862),r=i(86816),d=i(15446),c=i(18462),_=i(44110);const u=(0,r.Y)({getDeleteTitle:e=>e("webapp_personal_info_edition_delete_title_name"),getItemTypeDescription:e=>e("webapp_personal_info_edition_header_identity_description"),getTitle:e=>(0,c.kl)(e)||"",iconType:d.Tu.identity,vaultItemType:s.U.Identity,renderForm:(e,t,i,a)=>{const n=(0,c.sG)(t.birthDate),s=(0,l.Z)(n,"yyyy-MM-dd"),r={...t,birthDate:s};return(0,_.tZ)(o.P,{lee:e,currentValues:r,signalEditedValues:a,ref:i})}}),h=e=>{const{data:t}=(0,a.k)(n.L,"query",{vaultItemTypes:[s.U.Identity],ids:[`{${e.match.params.uuid}}`]});return(0,_.tZ)(u,{...e,item:t?.identitiesResult.items[0]})}},79862:(e,t,i)=>{i.d(t,{P:()=>f});var a=i(26849),n=i(26311),s=i(78971),l=i(42521),o=i(6697),r=i(67406),d=i(50506);let c=function(e){return e[e.TITLE=0]="TITLE",e[e.FIRSTNAME=1]="FIRSTNAME",e[e.MIDDLENAME=2]="MIDDLENAME",e[e.LASTNAME=3]="LASTNAME",e[e.LASTNAME2=4]="LASTNAME2",e[e.PSEUDO=5]="PSEUDO",e[e.BIRTHDATE=6]="BIRTHDATE",e[e.BIRTHPLACE=7]="BIRTHPLACE",e}({});const _=e=>e!==d.n.JAPAN,u=e=>e===d.n.NORTH_AMERICA_AND_ASIA,h=e=>e===d.n.SPANISH;var p=i(68037),m=i(44110);const b="webapp_personal_info_edition_identity_error",g="webapp_personal_info_edition_identity_birthdate_label";class f extends l.ZP{constructor(...e){super(...e),this.isFieldVisible=(e=>{const t=(0,d.S)(e),i={[c.TITLE]:_(t),[c.FIRSTNAME]:!0,[c.MIDDLENAME]:u(t),[c.LASTNAME]:!0,[c.LASTNAME2]:h(t),[c.PSEUDO]:!0,[c.BIRTHDATE]:!0,[c.BIRTHPLACE]:!0};return(e,t)=>i[e]||!!t})(this.props.currentValues.localeFormat)}isFormValid(){return this.validateValues({firstName:l.UE,lastName:l.UE})}render(){var e,t,i;const l=this.props.lee.translate,{shouldShowFrozenStateDialog:o}=this.context,d=[{label:l("webapp_personal_info_edition_identity_title_mr"),value:n.t.Mr},{label:l("webapp_personal_info_edition_identity_title_mrs"),value:n.t.Mrs},{label:l("webapp_personal_info_edition_identity_title_miss"),value:n.t.Miss},{label:l("webapp_personal_info_edition_identity_title_ms"),value:n.t.Ms},{label:l("webapp_personal_info_edition_identity_title_mx"),value:n.t.Mx},{label:l("webapp_personal_info_edition_identity_title_none_of_these"),value:n.t.NoneOfThese}],_=(0,a.uniqBy)((e=>e.label),d),u=null!=(e=_.find((({value:e})=>this.state.values.title===e)))?e:_[_.length-1];return(0,m.BX)("div",{sx:{display:"flex",flexDirection:"column",gap:"16px"},children:[(0,m.BX)(p.u,{title:l("webapp_payment_edition_content_identity_details_label"),additionalSx:{display:"flex",flexDirection:"column",gap:"8px"},children:[this.isFieldVisible(c.TITLE,null!=(t=this.state.values.title)?t:"")&&(0,m.tZ)(s.mg,{label:l("webapp_personal_info_edition_identity_title_label"),placeholder:u.label,"data-name":"title",value:u.value,onChange:e=>this.handleChange(e,"title"),disabled:!!o,children:_.map((e=>(0,m.tZ)(s.$m,{value:e.value,children:e.label},e.value)))}),this.isFieldVisible(c.FIRSTNAME,this.state.values.firstName)&&(0,m.tZ)(s.qo,{required:!0,label:l("webapp_personal_info_edition_identity_firstname_label"),placeholder:l("webapp_personal_info_edition_identity_placeholder_no_firstname"),"data-name":"firstName",onChange:this.handleChange,readOnly:!!o,value:this.state.values.firstName,error:this.state.errors.firstName,feedback:this.state.errors.firstName?{text:l(b)}:void 0}),this.isFieldVisible(c.MIDDLENAME,this.state.values.middleName)&&(0,m.tZ)(s.qo,{label:l("webapp_personal_info_edition_identity_middlename_label"),placeholder:l("webapp_personal_info_edition_identity_placeholder_no_middlename"),"data-name":"middleName",value:this.state.values.middleName,onChange:this.handleChange,readOnly:!!o}),this.isFieldVisible(c.LASTNAME,this.state.values.lastName)&&(0,m.tZ)(s.qo,{required:!0,label:l("webapp_personal_info_edition_identity_lastname_label"),placeholder:l("webapp_personal_info_edition_identity_placeholder_no_lastname"),"data-name":"lastName",value:this.state.values.lastName,onChange:this.handleChange,readOnly:!!o,error:this.state.errors.lastName,feedback:this.state.errors.lastName?{text:l(b)}:void 0}),this.isFieldVisible(c.LASTNAME2,this.state.values.lastName2)&&(0,m.tZ)(s.qo,{label:l("webapp_personal_info_edition_identity_lastname2_label"),placeholder:l("webapp_personal_info_edition_identity_placeholder_no_lastname2"),"data-name":"lastName2",value:this.state.values.lastName2,onChange:this.handleChange,readOnly:!!o}),this.isFieldVisible(c.PSEUDO,this.state.values.pseudo)&&(0,m.tZ)(s.qo,{label:l("webapp_personal_info_edition_identity_pseudo_label"),placeholder:l("webapp_personal_info_edition_identity_placeholder_no_pseudo"),"data-name":"pseudo",value:this.state.values.pseudo,onChange:this.handleChange,readOnly:!!o}),this.isFieldVisible(c.BIRTHDATE,this.state.values.birthDate)&&(0,m.tZ)(s.Nn,{value:this.state.values.birthDate,calendarButtonLabel:l(g),label:l(g),onChange:e=>{this.handleChange(e.target.value,"birthDate")},readOnly:!!o}),this.isFieldVisible(c.BIRTHPLACE,this.state.values.birthPlace)&&(0,m.tZ)(s.qo,{label:l("webapp_personal_info_edition_identity_birthplace_label"),placeholder:l("webapp_personal_info_edition_identity_placeholder_no_birthplace"),"data-name":"birthPlace",value:this.state.values.birthPlace,onChange:this.handleChange,readOnly:!!o})]}),(0,m.tZ)(r.M,{isUsingNewDesign:!0,wrapInContentCard:!0,contentCardLabel:l("webapp_payment_edition_content_identity_organization_label"),labelSx:r.e,spaceId:null!=(i=this.state.values.spaceId)?i:"",onChange:e=>this.handleChange(e,"spaceId"),disabled:!!o})]})}}f.contextType=o.CQ},26311:(e,t,i)=>{var a;i.d(t,{t:()=>a}),function(e){e.Mr="MR",e.Mrs="MRS",e.Miss="MISS",e.Ms="MS",e.Mx="MX",e.NoneOfThese="NONEOFTHESE"}(a||(a={}))}}]);