"use strict";(globalThis.webpackChunk_dashlane_leeloo=globalThis.webpackChunk_dashlane_leeloo||[]).push([[7906],{148038:(e,t,n)=>{n.d(t,{A0:()=>h,Cc:()=>L,K_:()=>g,ae:()=>o,iD:()=>r,lU:()=>c,qr:()=>w,rq:()=>l,wz:()=>d});var o,a=n(58138),i=n(696832),s=n(330504);!function(e){e.KILLED="killed"}(o||(o={}));const u=i.createContext({addLifecycleEventListener:e=>{},removeLifecycleEventListener:e=>{}}),d=e=>{const[t,n]=i.useState([]),s=i.useCallback((e=>{t.forEach((t=>{t(e)}))}),[t]),{channel:d}=e;return i.useEffect((()=>(d&&d.onDisconnect((()=>s(o.KILLED))),()=>{})),[s,d]),(0,a.jsx)(u.Provider,{value:{addLifecycleEventListener:e=>{t.push(e),n(t)},removeLifecycleEventListener:e=>{t.splice(t.findIndex((t=>e===t))),n(t)}},children:e.children})},c=(e,t)=>{const{addLifecycleEventListener:n,removeLifecycleEventListener:o}=i.useContext(u);i.useEffect((()=>(n(e),()=>{o(e)})),[e,n,o,...null!=t?t:[]])};var l,r;function h(e,t){const n=i.useRef(!0);i.useEffect((()=>()=>{n.current=!1}),[]);const[o,a]=i.useState({status:l.Loading}),s=i.useCallback((e=>{n.current&&a({data:e,status:l.Success})}),[]),u=i.useCallback((e=>{n.current&&a({error:e,status:l.Error})}),[]);return i.useEffect((()=>{a({status:l.Loading});const t=null!==(n=e.queryParam)&&void 0!==n?n:null;var n;e.query(t).then(s).catch(u)}),t),o}!function(e){e.Success="success",e.Loading="loading",e.Error="error"}(l||(l={})),function(e){e.Received="received",e.NotReceived="notReceived"}(r||(r={}));const m={status:r.NotReceived};function g(e,t){const n=i.useRef(null),[o,a]=i.useState(m),u=i.useCallback((e=>{a({status:r.Received,data:e})}),[]),d=i.useCallback((()=>{n.current&&n.current(),n.current=null}),[]);return i.useEffect((()=>{return a(m),e?(d(),n.current=e.live.on(void 0===(t=e.liveParam)?s.DEFAULT_PARAM:t,u),d):d;var t}),t),o}function w({queryConfig:e,liveConfig:t},n){const o=h(e,n),a=g(t,n);return a.status===r.NotReceived||o.status!==l.Success?o:Object.assign(Object.assign({},o),{data:a.data})}function f(e,t){switch(t.type){case"firstPageLoaded":return{status:l.Success,data:Object.assign(Object.assign({},e),{items:new Map([[t.firstPageToken,t.firstPage.batch]]),hasNextPage:!!t.firstPage.nextToken,isNextPageLoading:!1})};case"firstPageLoading":return{status:l.Loading};case"nextPageLoading":return e.status!==l.Success?e:Object.assign(Object.assign({},e),{data:Object.assign(Object.assign({},e.data),{isNextPageLoading:!0})});case"nextPageLoaded":return e.status!==l.Success?e:Object.assign(Object.assign({},e),{data:Object.assign(Object.assign({},e.data),{isNextPageLoading:!1,hasNextPage:!!t.nextPage.nextToken,items:new Map([...e.data.items,[t.nextPageToken,t.nextPage.batch]])})});case"pageChanged":return e.status!==l.Success?e:Object.assign(Object.assign({},e),{data:Object.assign(Object.assign({},e.data),{items:new Map([...e.data.items,[t.pageToken,t.pageItems]])})});case"firstPageFetchFailed":case"nextPageFetchFailed":return{status:l.Error,error:t.error}}}const L=({pageEndpoint:e,tokenEndpoint:t,tokenEndpointParam:n,batchLiveEndpoint:o},a)=>{const[s,u]=i.useReducer(f,{status:l.Loading}),d=i.useRef(void 0),c=i.useRef([]),r=i.useCallback((e=>{const t=o.on(e,(t=>{u({type:"pageChanged",pageItems:t,pageToken:e})}));c.current.push(t)}),[o]),h=i.useCallback((()=>{c.current.forEach((e=>e()))}),[]),m=i.useCallback((async()=>{const t=d.current;if(t){u({type:"nextPageLoading"});try{const n=await e(t);d.current=n.nextToken,u({type:"nextPageLoaded",nextPage:n,nextPageToken:t}),r(t)}catch(e){u({type:"nextPageFetchFailed",error:e})}}}),[e,r]),g=i.useCallback((async()=>{u({type:"firstPageLoading"}),d.current=void 0;try{const o=await t(n),a=await e(o);d.current=a.nextToken,u({type:"firstPageLoaded",firstPage:a,firstPageToken:o}),r(o)}catch(e){u({type:"firstPageFetchFailed",error:e})}}),[e,r,t,n]);return i.useEffect((()=>(g(),h)),a),s.status===l.Success?{status:l.Success,data:{hasNextPage:s.data.hasNextPage,isNextPageLoading:s.data.isNextPageLoading,items:Array.from(s.data.items).reduce(((e,[,t])=>e.concat(t)),[]),loadNextPage:()=>{m()}}}:s}},603204:(e,t,n)=>{n.d(t,{R:()=>ve});var o=n(896259),a=n(545874),i=n(166706),s=n(936282),u=n(168754),d=n(397203),c=n(625593),l=n(6538),r=n(762048),h=n(261582),m=n(495940),g=n(187581),w=n(129390),f=n(952534),L=n(380573),P=n(818995),v=n(929986),b=n(406218),x=n(611433),k=n(69401),p=n(442853),y=n(389033),E=n(866974),j=n(73346),C=n(434710),O=n(470305),R=n(565766),T=n(206210),N=n(715403),S=n(845714),F=n(238554),D=n(569029),_=n(592018),A=n(846097),I=n(970433),M=n(20281),q=n(396124),J=n(453234),K=n(455257),U=n(211777),V=n(326363),Y=n(2937),z=n(589193),B=n(730049),G=n(355102),X=n(589884),H=n(935489),Q=n(436823),W=n(215110),Z=n(355525),$=n(475440),ee=n(292630),te=n(735214),ne=n(575962),oe=n(835514),ae=n(487856),ie=n(249329),se=n(520587),ue=n(970493),de=n(397191),ce=n(650540),le=n(507104),re=n(252387),he=n(918007),me=n(947110),ge=n(606253),we=n(675874),fe=n(963856),Le=n(697268);const Pe="background",ve=(0,o.t)(Pe,[]).with({module:ie.e,on:Pe}).with({module:a.W,on:Pe}).with({module:i.H,on:Pe}).with({module:s.M,on:Pe}).with({module:f.S,on:Pe}).with({module:L.y,on:Pe}).with({module:P.m,on:Pe}).with({module:u.d,on:Pe}).with({module:r.a,on:Pe}).with({module:h.X,on:Pe}).with({module:v.V,on:Pe}).with({module:b.F,on:Pe}).with({module:x.i,on:Pe}).with({module:k.M,on:Pe}).with({module:N.c,on:Pe}).with({module:S._,on:Pe}).with({module:F.V,on:Pe}).with({module:D.I,on:Pe}).with({module:_.Y,on:Pe}).with({module:A.G,on:Pe}).with({module:m.t,on:Pe}).with({module:g.A,on:Pe}).with({module:w.k,on:Pe}).with({module:he.J,on:Pe}).with({module:T.r,on:Pe}).with({module:d.f,on:Pe}).with({module:I.L,on:Pe}).with({module:M.R,on:Pe}).with({module:q.v,on:Pe}).with({module:J.e,on:Pe}).with({module:K.Z,on:Pe}).with({module:z.g,on:Pe}).with({module:B.i,on:Pe}).with({module:c.J,on:Pe}).with({module:l.i,on:Pe}).with({module:ne.J,on:Pe}).with({module:V.D,on:Pe}).with({module:Y.j,on:Pe}).with({module:se.Yu,on:Pe}).with({module:C.Q,on:Pe}).with({module:H.L,on:Pe}).with({module:Q.o,on:Pe}).with({module:W.K,on:Pe}).with({module:Z.a,on:Pe}).with({module:ue.cV,on:Pe}).with({module:ae.B,on:Pe}).with({module:O.v,on:Pe}).with({module:$.t,on:Pe}).with({module:ee.B,on:Pe}).with({module:oe.y,on:Pe}).with({module:R.Y,on:Pe}).with({module:me.d,on:Pe}).with({module:ge.l,on:Pe}).with({module:fe.U,on:Pe}).with({module:p.G,on:Pe}).with({module:de.Dm,on:Pe}).with({module:ce.J,on:Pe}).with({module:U.z,on:Pe}).with({module:we.X,on:Pe}).with({module:y.n,on:Pe}).with({module:E.n,on:Pe}).with({module:j.c,on:Pe}).with({module:G.v,on:Pe}).with({module:Le.c,on:Pe}).with({module:te.t,on:Pe}).with({module:X.R,on:Pe}).with({module:le.T,on:Pe}).with({module:re.L,on:Pe}).define()}}]);