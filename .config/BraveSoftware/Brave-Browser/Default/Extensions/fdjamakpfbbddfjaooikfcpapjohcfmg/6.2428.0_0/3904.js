"use strict";(globalThis.webpackChunk_dashlane_leeloo=globalThis.webpackChunk_dashlane_leeloo||[]).push([[3904,3076],{188134:(e,t,a)=>{a.d(t,{t:()=>L});var r=a(696832),i=a(521877),n=a(659035),s=a(482598),l=a(287279),o=a(970433),d=a(339431),c=a(692077),u=a(45272),_=a(488203),p=a(806697),E=a(386962),m=a(514900),b=a(528835);const h=({formId:e,handleCancel:t,hasDataBeenModified:a,isSubmitting:r})=>{const{translate:i}=(0,_.Z)();return(0,b.BX)(n.kC,{sx:{padding:"24px"},as:"footer",justifyContent:"flex-end",flexWrap:"nowrap",children:[a?(0,b.tZ)(m.zxk,{type:"submit",form:e,disabled:r,children:i("webapp_panel_edition_generic_save_changes")}):null,(0,b.tZ)(m.zxk,{sx:{marginLeft:"16px"},nature:"secondary",onClick:t,type:"button",children:i("webapp_panel_edition_generic_cancel_changes")})]})},f="id-add-form",I={GENERIC_ERROR:"_common_generic_error"};function L({children:e,initialValues:t,listRoute:a,reportError:m,countryToKeys:L,header:S,type:g,requiredProperty:y="idNumber"}){const{translate:C}=(0,_.Z)(),{openDialog:A,shouldShowFrozenStateDialog:P}=(0,p.Ub)(),[w,R]=r.useState(!1),[D,U]=r.useState(!1),[Z,N]=r.useState(t.country),{createVaultItem:B}=(0,s.u)(o.L),{showToast:v}=(0,n.pm)();r.useEffect((()=>{const e={[d.U.DriversLicense]:i.PageView.ItemDriverLicenceCreate,[d.U.FiscalId]:i.PageView.ItemFiscalStatementCreate,[d.U.IdCard]:i.PageView.ItemIdCardCreate,[d.U.Passport]:i.PageView.ItemPassportCreate,[d.U.SocialSecurityId]:i.PageView.ItemSocialSecurityStatementCreate};(0,u.Nc)(e[g])}),[g]),r.useEffect((()=>{P&&A()}),[P]);const T=()=>{(0,u.Nc)(i.PageView.ItemIdList),(0,c.uX)(a)},O=()=>{v({description:C(I.GENERIC_ERROR),mood:"danger",isManualDismiss:!0})},x=r.useRef((e=>{if(null!==e){const{dirty:t,isSubmitting:a,values:r}=e;R(t),U(a),N(r.country)}}));return(0,b.BX)(b.HY,{children:[S(Z),(0,b.tZ)(E.P,{formId:f,formRef:x.current,handleSubmit:async(e,{setSubmitting:t,setFieldError:a})=>{if(!e[y])return a(y,"");try{const a=await B({vaultItemType:g,content:e});(0,l.d6)(a)?(v({description:C(L(Z).success)}),T()):(t(!1),O(),m(new Error("[ids][add] Unable to add id"),a.error?.errorMessage))}catch(e){t(!1),O(),m(e,"[ids][add] Unexpected exception while add id")}},initialValues:t,variant:"add",children:t=>e({values:t})}),(0,b.tZ)(h,{formId:f,handleCancel:()=>{T()},hasDataBeenModified:w,isSubmitting:D})]})}},308933:(e,t,a)=>{a.r(t),a.d(t,{PassportAddPanel:()=>_}),a(696832);var r=a(339431),i=a(488203),n=a(739649),s=a(188134),l=a(566219),o=a(974910),d=a(845417),c=a(528835);const u=()=>({title:"webapp_id_creation_passport_title_default",success:"webapp_id_creation_passport_alert_add_success_default"}),_=({lee:e,listRoute:t})=>{var a;const{translate:_}=(0,i.Z)(),p={idName:"",idNumber:"",expirationDate:"",issueDate:"",country:(0,l.lt)(e.carbon.currentLocation),spaceId:null!=(a=(0,n.B)(e.globalState))?a:"",issuePlace:""};return(0,c.tZ)(s.t,{initialValues:p,listRoute:t,reportError:e.reportError,countryToKeys:u,type:r.U.Passport,header:e=>(0,c.tZ)(o.h,{title:_("webapp_id_creation_passport_title_default"),country:e,type:r.U.Passport}),children:({values:e})=>(0,c.tZ)(d.g,{variant:"add",country:e.country})})}},872055:(e,t,a)=>{a.d(t,{a:()=>i});var r=a(914662);const i=new Set([r.cH.AU,r.cH.GB,r.cH.IE,r.cH.NZ])},845417:(e,t,a)=>{a.d(t,{g:()=>E});var r,i=a(696832),n=a(488203),s=a(177650),l=a(321143),o=a(806697),d=a(872055),c=a(16792),u=a(865212),_=a(528835);const p={...c.k,PLACE_OF_ISSUE_LABEL:"webapp_id_form_field_label_place_of_issue",PLACE_OF_ISSUE_PLACEHOLDER:"webapp_id_form_field_placeholder_place_of_issue"},E=i.memo((({variant:e,handleCopy:t,country:a})=>{const{translate:c}=(0,n.Z)(),{shouldShowFrozenStateDialog:E}=(0,o.Ub)(),m=i.useRef(null);return i.useEffect("add"===e?()=>{const e=setTimeout((()=>{m.current?.focus()}),s.sc);return()=>clearTimeout(e)}:()=>{},[]),(0,_.BX)(_.HY,{children:[(0,_.tZ)(u.YI,{name:"idName",label:c(p.NAME_LABEL),placeholder:c(p.NAME_PLACEHOLDER),ref:m,disabled:!!E}),(0,_.tZ)(u.G1,{name:"idNumber",label:c(p.ID_NUMBER_LABEL),placeholder:c(p.ID_NUMBER_PLACEHOLDER),handleCopy:"edit"===e?t:void 0,disabled:!!E}),(0,_.tZ)(u.Nn,{name:"issueDate",label:c(p.ISSUE_DATE_LABEL),disabled:!!E}),(0,_.tZ)(u.Nn,{name:"expirationDate",label:c(d.a.has(a)?p.EXPIRATION_DATE_LABEL_UK:p.EXPIRATION_DATE_LABEL_US),disabled:!!E}),(0,_.tZ)(u.Dz,{name:"country",label:c(p.COUNTRY_LABEL),disabled:!!E}),(0,_.tZ)(u.YI,{name:"issuePlace",label:c(p.PLACE_OF_ISSUE_LABEL),placeholder:c(p.PLACE_OF_ISSUE_PLACEHOLDER),disabled:!!E}),r||(r=(0,_.tZ)(l.c,{height:24})),(0,_.tZ)(u.A0,{name:"spaceId",disabled:!!E})]})}))}}]);