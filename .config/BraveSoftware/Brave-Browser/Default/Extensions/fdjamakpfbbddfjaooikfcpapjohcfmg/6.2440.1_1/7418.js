"use strict";(self.webpackChunk_dashlane_leeloo=self.webpackChunk_dashlane_leeloo||[]).push([[7418],{42521:(e,a,t)=>{t.d(a,{Jh:()=>r,UE:()=>s,ZP:()=>i});var l=t(96832),n=t(26849);const s=(0,n.compose)(n.not,n.isEmpty,n.trim,(0,n.defaultTo)("")),o=/.+@.+\..+/,r=e=>o.test(e.trim());class i extends l.Component{constructor(e){super(e),this.setInternalState=e=>{this.setState({internal:{...this.state.internal,...e}})},this.setUpdatedValues=e=>{const{signalEditedValues:a,onValuesUpdated:t}=this.props,l={...this.state.values,...e};this.setState({values:l},(()=>{a&&a(this.hasFormBeenEdited()),t&&t(l)}))},this.handleChange=(e,a="")=>{if(e instanceof Event&&a)throw new Error("handleChange was called with both a ChangeEvent and key.");const t=e?.target?{[e.target.dataset.name]:e.target.value}:{[a]:e};this.setUpdatedValues(t)},this.handleChanges=e=>{this.setUpdatedValues(e)},this.validateValues=e=>{if(0===Object.keys(e).length)return!0;const a=(0,n.reduce)(((a,t)=>(a[t]=e[t]?(0,n.compose)(n.not,e[t]):()=>!1,a)),{},Object.keys(this.state.values)),t=(0,n.evolve)(a,this.state.values);return this.setState({errors:t}),(0,n.all)((0,n.equals)(!1),(0,n.values)(t))},this.hasFormBeenEdited=()=>!(0,n.equals)(this.state.values,this.props.currentValues),this.getValues=()=>this.state.values;const a=Object.keys(e.currentValues).reduce(((e,a)=>(e[a]=!1,e)),{});this.state={internal:{},values:e.currentValues,errors:a}}componentDidUpdate(e){(0,n.equals)(this.props.currentValues,e.currentValues)||this.setState({values:this.props.currentValues})}}},53748:(e,a,t)=>{t.d(a,{B:()=>f});var l=t(96832),n=t(50756),s=t(14900),o=t(82598),r=t(91871),i=t(39431),u=t(92077),d=t(39649),h=t(86498),c=t(88203),p=t(45272),m=t(6697),b=t(63520),v=t(15446),g=t(18462),_=t(18402),y=t.n(_),V=t(44110);function f(e){const{renderForm:a,vaultItemType:t,iconType:_}=e;return({lee:e})=>{const{translate:f}=(0,c.Z)(),{routes:C}=(0,u.Xo)(),x=(0,h.V)(),{createVaultItem:w}=(0,o.u)(r.L),I=(0,l.useRef)(null),{openDialog:E,shouldShowFrozenStateDialog:P}=(0,m.Ub)(),[S,U]=(0,l.useState)(!1);(0,l.useEffect)((()=>{const e={[i.U.Address]:n.PageView.ItemAddressCreate,[i.U.Company]:n.PageView.ItemCompanyCreate,[i.U.Email]:n.PageView.ItemEmailCreate,[i.U.Identity]:n.PageView.ItemIdentityCreate,[i.U.Phone]:n.PageView.ItemPhoneCreate,[i.U.Website]:n.PageView.ItemWebsiteCreate};(0,p.Nc)(e[t])}),[]),(0,l.useEffect)((()=>{P&&E()}),[P]);const k=()=>{(0,p.Nc)(n.PageView.ItemPersonalInfoList),(0,u.uX)(C.userPersonalInfo)},Z=(0,d.B)(e.globalState),F=(0,V.tZ)(v.ZP,{iconSize:v.Jh.headerEditPanelIcon,iconType:_}),z=(0,g.gV)(f,t);return(0,V.tZ)(b.zI,{isUsingNewDesign:!0,isViewingExistingItem:!1,itemHasBeenEdited:S,onNavigateOut:k,onSubmit:async()=>{Boolean(I.current?.isFormValid())&&(await(async()=>{const e=I.current?.getValues();e&&"success"!==(await w({vaultItemType:t,content:e})).tag&&x.showAlert(f("_common_generic_error"),s.BLW.ERROR)})(),k())},formId:"add_personalinfo_panel",header:(0,V.tZ)(b.V9,{icon:F,iconBackgroundColor:y()["--dash-green-00"],title:z}),children:a(e,I,(()=>U(!0)),Z)})}}},7418:(e,a,t)=>{t.r(a),t.d(a,{PhoneAddPanel:()=>d}),t(96832);var l=t(44105),n=t(7325),s=t(39431),o=t(38983),r=t(53748),i=t(15446),u=t(44110);const d=(0,r.B)({iconType:i.Tu.phone,vaultItemType:s.U.Phone,renderForm:(e,a,t,s)=>{const r={localeFormat:l.c[e.globalState.locale.country]||l.c.US,phoneNumber:"",itemName:"",type:n.z.Mobile,spaceId:s};return(0,u.tZ)(o.b,{lee:e,currentValues:r,signalEditedValues:t,ref:a})}})},38983:(e,a,t)=>{t.d(a,{b:()=>m});var l=t(26849),n=t(78971),s=t(6697),o=t(42521),r=t(67406),i=t(44105),u=t(7325),d=t(94431);function h(e){const a=e.namespace("country_name_");return e=>(e=(0,d.lC)(e),{label:`${a(i.c[e])} (+${d.b0[e]})`,selectedLabel:`${e} (+${d.b0[e]})`,value:e})}var c=t(68037),p=t(44110);class m extends o.ZP{isFormValid(){return this.validateValues({phoneNumber:o.UE})}render(){var e,a;const{lee:t}=this.props,s=t.translate.namespace("webapp_personal_info_edition_phone_"),{shouldShowFrozenStateDialog:o}=this.context,m=function(e){const a=e.namespace("personal_info_");return[{label:a("phone_type_mobile"),value:u.z.Mobile},{label:a("phone_type_landline"),value:u.z.Landline},{label:a("phone_type_work_mobile"),value:u.z.WorkMobile},{label:a("phone_type_work_landline"),value:u.z.WorkLandline},{label:a("phone_type_fax"),value:u.z.Fax},{label:a("phone_type_work_fax"),value:u.z.WorkFax},{label:a("phone_type_any"),value:u.z.Any}]}(t.translate),b=null!=(e=(0,l.find)((0,l.propEq)("value",this.state.values.type),m))?e:(0,l.head)(m),v=function(e){const a=h(e);return Object.keys(d.b0).map((e=>a(i.c[e])))}(t.translate),g=h(t.translate)(this.state.values.localeFormat);return(0,p.BX)("div",{sx:{display:"flex",flexDirection:"column",gap:"16px"},children:[(0,p.BX)(c.u,{title:s("content_card_details_label"),additionalSx:{display:"flex",flexDirection:"column",gap:"8px"},children:[(0,p.BX)(n.kC,{sx:{gap:"8px"},children:[(0,p.tZ)(n.mg,{label:"Country code",placeholder:g.label,"data-name":"localeFormat",value:g.value,onChange:e=>this.handleChange(e,"localeFormat"),readOnly:!!o,sx:{minWidth:"145px"},children:v.map((e=>{var a;return(0,p.tZ)(n.$m,{value:e.value,displayValue:null!=(a=e.selectedLabel)?a:e.label,children:e.label},e.value)}))}),(0,p.tZ)(n.qo,{required:!0,label:s("number_label"),placeholder:s("placeholder_no_number"),"data-name":"phoneNumber",value:this.state.values.phoneNumber,error:this.state.errors.phoneNumber,onChange:this.handleChange,readOnly:!!o})]}),(0,p.tZ)(n.mg,{label:s("type_label"),placeholder:b.label,value:b.value,"data-name":"type",onChange:e=>this.handleChange(e,"type"),readOnly:!!o,children:m.map((e=>(0,p.tZ)(n.$m,{value:e.value,children:e.label},e.value)))})]}),(0,p.BX)(c.u,{title:s("content_card_organization_label"),additionalSx:{display:"flex",flexDirection:"column",gap:"8px"},children:[(0,p.tZ)(n.qo,{label:s("phonename_label"),placeholder:s("placeholder_no_phonename"),"data-name":"itemName",value:this.state.values.itemName,onChange:this.handleChange,readOnly:!!o}),(0,p.tZ)(r.M,{isUsingNewDesign:!0,labelSx:r.e,spaceId:null!=(a=this.state.values.spaceId)?a:"",onChange:e=>this.handleChange(e,"spaceId"),disabled:!!o})]})]})}}m.contextType=s.CQ}}]);