"use strict";(globalThis.webpackChunk_dashlane_leeloo=globalThis.webpackChunk_dashlane_leeloo||[]).push([[5559],{905559:(e,t,a)=>{a.r(t),a.d(t,{SecretAddPanelComponent:()=>Z});var n=a(696832),s=a(242714),i=a(482598),l=a(133354),c=a(970433),r=a(339431),d=a(514900),o=a(86498),u=a(488203),h=a(114943),p=a(63520),_=a(615940),b=a(619122),m=a(366098),S=a(78047),g=a(692077),I=a(45272),f=a(521877),T=a(740300),C=a(899193),w=a(773157),v=a(806697),x=a(528835);const{CONTENT:D,DOCUMENT_STORAGE:E}=_.SecretsTabs,Z=()=>{const{routes:e}=(0,g.Xo)(),t=(0,h.Y)(),[a,_]=(0,n.useState)(D),[Z,y]=(0,n.useState)(!1),[A,O]=(0,n.useState)(!1),[N,U]=(0,n.useState)(!1),{currentSpaceId:F,teamId:R}=(0,b.fV)(),P=(0,s.o)("ace_secrets_vault_attachment"),[B,k]=(0,n.useState)({id:"",limitedPermissions:!1,title:"",content:"",spaceId:null!=F?F:R?String(R):"",secured:!1,attachments:[]}),{shouldShowFrozenStateDialog:M}=(0,v.Ub)(),{createVaultItem:V}=(0,i.u)(c.L),z=(0,o.V)(),{translate:X}=(0,u.Z)();if((0,n.useEffect)((()=>{(0,I.Nc)(f.PageView.ItemSecretCreate)}),[]),t.status!==l.rq.Success||!t?.data)return null;const H=()=>(0,g.uX)(e.userSecrets),L=P?[{id:"tab-secret-detail",contentId:"content-secret-detail",title:X("webapp_secrets_edition_field_tab_title_details"),onSelect:()=>_(D)},{id:"tab-secret-attachments",contentId:"content-secret-attachments",title:X("webapp_secrets_edition_field_tab_title_attachments"),onSelect:()=>_(E)}]:void 0;return(0,x.tZ)(p.zI,{isUsingNewDesign:!0,isViewingExistingItem:!1,itemHasBeenEdited:Z,submitPending:A,onSubmit:async()=>{A||(O(!0),await(async()=>{try{var e;await V({vaultItemType:r.U.Secret,content:{title:B.title,content:B.content,spaceId:null!=(e=B.spaceId)?e:"",isSecured:B.secured,attachments:B.attachments}})}catch(e){O(!1),z.showAlert(X("_common_generic_error"),d.BLW.ERROR)}})(),H())},onNavigateOut:()=>{H()},formId:"add_secret_panel",header:(0,x.tZ)(m.h,{title:B.title?B.title:X("webapp_secrets_title_field"),tabs:L}),secondaryActions:a===E?[(0,x.tZ)(w.d,{isQuotaReached:!1,onFileUploadStarted:()=>{U(!0)},onFileUploadDone:async e=>{U(!1),e.success&&(await T.C.commitSecureFile({secureFileInfo:e.secureFileInfo}),k((t=>({...t,attachments:[...t.attachments,(0,C.w)(e.secureFileInfo)]}))),y(!0))},isShared:!1,dataType:"KWSecret",disabled:!!M},"uploadAction")]:[],children:(0,x.tZ)(S.e,{activeTab:a,isAdmin:!1,secretValues:B,handleChange:(e,t)=>{if("spaceId"===e&&t===B.spaceId)return;const a={...B,[e]:t},n=!!(a.title||a.content||a.spaceId||a.secured);n!==Z&&y(n),k(a)},handleFileInfoDetached:e=>{k((t=>({...t,attachments:t.attachments.filter((t=>t.id!==e))})))},isAttachmentUploading:N,isNewItem:!0})})}},615940:(e,t,a)=>{a.d(t,{SecretsTabs:()=>n});let n=function(e){return e[e.CONTENT=0]="CONTENT",e[e.SHARED_ACCESS=1]="SHARED_ACCESS",e[e.DOCUMENT_STORAGE=2]="DOCUMENT_STORAGE",e}({})},366098:(e,t,a)=>{a.d(t,{h:()=>c});var n,s=a(659035),i=a(63520),l=a(528835);const c=({title:e,tabs:t})=>(0,l.tZ)(i.V9,{icon:(0,l.tZ)("div",{sx:{width:"168px",height:"108px",borderStyle:"solid",borderWidth:"1px",borderRadius:"4px",borderColor:"ds.border.neutral.quiet.idle",display:"flex",justifyContent:"center",alignItems:"center"},children:n||(n=(0,l.tZ)(s.JO,{name:"ItemSecretOutlined",color:"ds.text.neutral.standard",size:"xlarge"}))}),title:e,tabs:t})},78047:(e,t,a)=>{a.d(t,{e:()=>x});var n=a(696832),s=a(659035),i=a(133354),l=a(980936),c=a(488203),r=a(555449),d=a(433988),o=a(154350),u=a(468037),h=a(167406),p=a(615940),_=a(806697),b=a(61014),m=a(521877),S=a(830894),g=a(868819),I=a(528835);const{CONTENT:f,SHARED_ACCESS:T,DOCUMENT_STORAGE:C}=p.SecretsTabs,w="webapp_secure_notes_edition_field_text_max_size_reached",v=1e4,x=({activeTab:e,isAdmin:t,isAttachmentUploading:a,isNewItem:p,secretValues:x,handleChange:D,handleFileInfoDetached:E,onModalDisplayStateChange:Z})=>{const{translate:y}=(0,c.Z)(),[A,O]=(0,n.useState)(""),{shouldShowFrozenStateDialog:N}=(0,_.Ub)(),U=(0,d.F)(),{isMPLessUser:F}=(0,o.Z)(),R=!U&&!F,{areProtectedItemsUnlocked:P,openProtectedItemsUnlocker:B}=(0,S.tY)(),k=(0,l.I)(),M=k.status===i.rq.Success&&!k.isDisabled,{id:V,limitedPermissions:z,title:X,content:H,spaceId:L,secured:q}=x;return null===N?null:(0,I.BX)(I.HY,{children:[e===f&&(0,I.BX)("div",{"aria-labelledby":"tab-secret-detail",id:"content-secret-detail",children:[(0,I.BX)(u.u,{title:y("webapp_secrets_box_title_details"),children:[(0,I.tZ)(s.qo,{"data-name":"title",label:y("webapp_secrets_title_field"),value:X,onChange:e=>D("title",e.target.value),disabled:z,readOnly:N,sx:{marginBottom:"8px"}}),(0,I.tZ)(s.Kx,{"data-name":"content",label:y("webapp_secrets_content_field"),placeholder:y("webapp_secrets_content_field_placeholder"),value:H,onBeforeInput:e=>{const t=e.currentTarget.value;t.length>v&&(O(y(w,{charLeft:v-(t.length-1)})),e.preventDefault())},onPaste:e=>{const t=e.clipboardData.getData("text/plain");e.currentTarget.value.length+t.length>v&&(O(y(w,{charLeft:v-e.currentTarget.value.length})),e.preventDefault())},onChange:e=>{A&&O(""),D("content",e.target.value)},disabled:z,readOnly:N,feedback:A?{text:A}:void 0,error:!!A})]}),M?(0,I.tZ)(u.u,{title:y("webapp_secrets_box_title_organization"),additionalSx:{marginTop:"16px"},children:(0,I.tZ)("div",{children:(0,I.tZ)(h.M,{disabled:N,isUsingNewDesign:!0,defaultSpaceId:null!=L?L:"",spaceId:null!=L?L:"",onChange:e=>D("spaceId",e)})})}):null,R?(0,I.tZ)(u.u,{title:y("webapp_secrets_box_title_preferences"),additionalSx:{marginTop:"16px"},children:(0,I.tZ)(s.XZ,{readOnly:N,label:y("webapp_secrets_preferences_mp_title"),description:y("webapp_secrets_preferences_mp_description"),checked:Boolean(q),onChange:()=>{P||p?D("secured",Boolean(!q)):((0,S.jF)(),B({action:g.P.Show,itemType:g.R.Secret,successCallback:()=>D("secured",Boolean(!q))}))}})}):null]}),e===C&&(0,I.tZ)("div",{"aria-labelledby":"tab-secret-attachments",id:"content-secret-attachments",children:(0,I.tZ)(b.P,{attachments:x.attachments,additionalProps:{itemId:V,itemType:m.ItemType.Secret,handleFileInfoDetached:e=>{E(e)},onModalDisplayStateChange:Z,isUploading:a}})}),e===T&&(0,I.tZ)("div",{"aria-labelledby":"tab-secret-shared-access",id:"content-secret-shared-access",children:(0,I.tZ)(r.u,{isAdmin:t,id:V})})]})}}}]);