(()=>{"use strict";var e,t,s,i={21715:(e,t,s)=>{s.d(t,{w:()=>ve});var i=s(51263),r=s(27938),o=s(23647),n=s(70101),a=s(72720);let l=!1,c=!1;try{l=IS_DEVTOOL_ENABLED,c=IS_STANDALONE_EXTENSION}catch{}var h=s(99743);class d{constructor(e){this._messageListeners=new Map,h.p.addListener(((t,s,r)=>{try{const o=this._onSendMessageListener(t,s,r);return"boolean"==typeof o?o:(o.then((e=>r(e))).catch((t=>{e(t,{precisions:"Exception in onMessage listener",fileName:"MessageHandler.ts",funcName:"MessageHandler.constructor",code:i.w.ERROR}),r()})),!0)}catch(t){return e(t,{precisions:"Exception in onMessage listener",fileName:"MessageHandler.ts",funcName:"MessageHandler.constructor",code:i.w.ERROR}),!1}}))}_onSendMessageListener(e,t,s){if(!e||!this._messageListeners.has(e.msg))return!1;return this._messageListeners.get(e.msg)(e,t,s)}addListener(e,t,s){if(this._messageListeners.has(t))throw new Error("MessageHandler::addListener:: a listener already exists for message "+t);this._messageListeners.set(t,s.bind(e))}}class u{constructor(){this._resources={}}setResource(e,t){this._resources[e]=t}setAllResources(e){this._resources=e}getResource(e){return e in this._resources?this._resources[e]:void 0}getAllResources(){return this._resources}}class g{constructor(e,t){this.frameId=e,this.innerMessage=t,this.msg=g.MSG}}g.MSG="ContentToContentMessage";class p{constructor(){this.msg=p.MSG}}p.MSG="classify";class f{constructor(e){this.debugMode=e,this.msg=f.MSG}}f.MSG="debug";class m{constructor(e,t){this.debugMode=e,this.deepFormOutput=t,this.msg=m.MSG}}m.MSG="allParameters";class _{constructor(e){this.lang=e,this.msg=_.MSG}}_.MSG="tabLanguage";class b{constructor(e){this.report=e,this.msg=b.MSG}}b.MSG="dispatchIframeExportReportMessage";class v{constructor(e){this.frameId=e,this.msg=v.MSG}}v.MSG="queryFrameIdResponse";class M{constructor(){this.msg=M.MSG}}M.MSG="queryAnalysisOnTopFrameIsSkippedInboundMessage";class w{constructor(e,t,s,i){this.frameId=e,this.frameIndex=t,this.name=s,this.url=i,this.msg=w.MSG}}w.MSG="ReportFrameIdAndIndexInboundMessage";class S{constructor(e,t,s){this.frameId=e,this.lastReport=t,this.forceReportEvenIfNoChange=s,this.msg=S.MSG}}S.MSG="iframeReport";class C{constructor(){this.msg=C.MSG}}C.MSG="reclassifyIframeMessage";class E{constructor(){this.msg=E.MSG}}E.MSG="getAllParameters";class x{constructor(){this.msg=x.MSG}}x.MSG="getTabLanguage";class I{constructor(e){this.formsAndFieldsContexts=e,this.msg=I.MSG}}I.MSG="ahoCorasickifyMessage";class R{constructor(e){this.isDevtoolEnabled=e,this.msg=R.MSG}}R.MSG="toggleDevtool";class L{constructor(e){this.formStructure=e,this.msg=L.MSG}}L.MSG="classificationReport";class y{constructor(e){this.report=e,this.msg=y.MSG}}y.MSG="iframeExportReportMessage";class T{constructor(){this.msg=T.MSG}}T.MSG="queryFrameId";class F{constructor(e,t,s){this.time=e,this.prose=t,this.url=s,this.msg=F.MSG}}F.MSG="timeToDMessage";class N{constructor(){this.msg=N.MSG}}N.MSG="queryAnalysisOnTopFrameIsSkippedOutboundMessage";class O{constructor(){this.msg=O.MSG}}O.MSG="initResourcesMessage";class G{constructor(e){this.log=e,this.msg=G.MSG}}G.MSG="logExceptionMessage";class A{constructor(){this.msg=A.MSG}}A.MSG="getConfigurationMessage";class P{constructor(e){this.tiresiasBackgroundOption=e,this.msg=P.MSG}}P.MSG="setConfigurationMessage";const k=(e,t,s,i)=>{var r;if(i.rateLimit&&i.rateLimit>=0&&i.rateLimit<Math.random())return;const o=i.rateLimit?`Rate limit applied: ${i.rateLimit}`:void 0,n=e instanceof Error?e.message:String(e),a=e instanceof Error?e.stack:void 0,l=null===(r=i.appendExceptionToMessage)||void 0===r||r,c=[i.message,l?n:void 0].filter((e=>void 0!==e)).join(" - "),h=c.length>150?c.slice(0,147)+"...":c,d=[i.precisions,a,o].filter((e=>void 0!==e)).join("\n--\n");t({...i,message:h,precisions:d})};class W{constructor(e){this._value=e,this._children=null,this.final=!1}get value(){return this._value}get children(){return this._children}get childCount(){return this._children?this._children.length:0}hasChild(e){if(!e)throw Error("AhoCorasickTrieNode::hasChild: invalid value");return!!this._children&&this._children.some((t=>t.value===e))}getChild(e){var t;if(!e)throw Error("AhoCorasickTrieNode::getChild: invalid value");return this._children&&null!==(t=this._children.find((t=>t.value===e)))&&void 0!==t?t:null}addChild(e){if(!e)throw Error("AhoCorasickTrieNode::addChild: invalid value");if(!e.startsWith(this.value))throw Error("AhoCorasickTrieNode::addChild: unable to add child because value does not start with parent's value");if(e.length!==this.value.length+1)throw Error("AhoCorasickTrieNode::addChild: value has wrong size");this._children||(this._children=[]);const t=new W(e);return this._children.push(t),t}find(e){if(this.value)throw Error("AhoCorasickTrieNode::find: context is not the root of the trie");let t="",s=this;for(let i=0;i<e.length;i++){t+=e[i];const r=s.getChild(t);if(!r)return null;s=r}return s}}class D{constructor(e){if(!Array.isArray(e))throw Error("AhoCorasick::constructor: argument is not an array");this._trie=new W(""),e.forEach((e=>{let t=this._trie;for(let s=0;s<e.length;s++){const i=e[s];if(t){const e=t.value+i;if(t.hasChild(e))t=t.getChild(e);else{const s=t.addChild(e);t=s}}else t=this._trie.addChild(i)}t&&(t.final=!0)}))}search(e,t=!0){const s=[];let i=[];for(let t=0;t<e.length;t++){const r=e[t];i.push(this._trie);const o=[];i.forEach((e=>{const i=e.value+r,n=e.getChild(i);n&&(o.push(n),n.final&&s.push({needle:n.value,startOffset:t-n.value.length+1,endOffset:t}))})),i=o}return s.sort(((e,t)=>e.needle.length>t.needle.length?-1:e.needle.length<t.needle.length||e.endOffset>t.endOffset?1:e.endOffset<t.endOffset?-1:0)),t?s:s.reduce(((e,t)=>{if(e.length){e.some((e=>t.startOffset<=e.endOffset&&t.endOffset>=e.startOffset))||e.push(t)}else e.push(t);return e}),[])}}class U{constructor(){this.kDISABLE=!1;this._wrapped=new D(["account","birth","change","compte","connect","connexion","cree","creation","create","date","daten","email","enregistre","enregistrer","enregistrez","enregistrement","first","forgot","identifier","identifiez","identification","inscrire","inscris","inscription","inscrivez","keep","log","oublie","passe","password","passeport","perdu","premier","register","remember","reset","search","sign","subscribe","update","user","users","username","validate"])}_search(e,t=!0){return this._wrapped.search(e,t)}searchAndSplit(e){if(this.kDISABLE)return e;return e.split(" ").reduce(((e,t)=>{const s=this._search(t,!1);if(null==s?void 0:s.length){s.sort(((e,t)=>e.startOffset-t.startOffset));let i=0;for(const r of s)i!==r.startOffset&&e.push(t.substring(i,r.startOffset)),e.push(r.needle),i=r.endOffset+1;i<t.length&&e.push(t.substring(i))}else e.push(t);return e}),[]).join(" ")}}var j=s(19523);class H{constructor(e,t){this.isEnabled=e,this.logException=t,this._devtoolsConnection={},this._tabStorage=new Map}setPandora(e){this._pandora=e}listen(){j.b.addListener((e=>{e.onMessage.addListener((t=>{try{switch(t.name){case"init":if(!this.isEnabled)return void e.postMessage({name:"disable"});e.postMessage({name:"getClassifications",data:this._tabStorage.get(t.tabId)});break;case"devtoolModelContext":if(!t.data)throw Error("devtoolModelContext message sent without data");e.postMessage({name:"devtoolModelPrediction",data:this.contextPrediction(t.data)})}}catch(e){this.logException(e,{precisions:"Exception in onMessage listener",fileName:"DevtoolManager.ts",funcName:"DevtoolManager.listen",code:i.w.ERROR})}})),e.onDisconnect.addListener((t=>{try{const t=Object.keys(this._devtoolsConnection);for(let s=0,i=t.length;s<i;s++)if(this._devtoolsConnection[t[s]]===e){delete this._devtoolsConnection[t[s]];break}}catch(e){this.logException(e,{precisions:"Exception in onDisconnect listener",fileName:"DevtoolManager.ts",funcName:"DevtoolManager.listen",code:i.w.ERROR})}}))}))}storeTabFormsStructure(e,t){this.deleteTabId(e),this._tabStorage.set(e,t)}contextPrediction(e){const t={context:e.form,fields:e.fields.map((t=>({...t,form:{humanReadable:e.form.humanReadable,buttonVerbatim:e.form.buttonVerbatim,classification:""}})))};return this._pandora.explainStructure(t)}deleteTabId(e){this._tabStorage.has(e)&&this._tabStorage.delete(e)}cleanTabStorage(){for(const e of this._tabStorage.keys())this._tabStorage.delete(e)}}var B,$=s(87279);!function(e){e.Json="JSON",e.Bson="BSON"}(B||(B={}));var z,X=s(35259),q=s.n(X),J=s(22800),V=s.n(J);!function(e){e.CANNOT_INIT_FILE="Cannot init from local directory",e.CANNOT_UPDATE_FILE="Cannot update file from distant server",e.UNKNOWN_ERROR="Unknown Error"}(z||(z={}));class Y{constructor(e){this.fileName=e}buildLocalPath(){return"/data/"+this.fileName}getFileContent(){return this.fileContent}}class K extends Y{constructor(e,t,s){super(e),this._localFileFetcher=t,this._classifierClassRef=s}loadLocally(){return new Promise(((e,t)=>{this._localFileFetcher.fetch(this.buildLocalPath(),B.Bson,(t=>{this.fileContent=new this._classifierClassRef(t),e(this.fileContent)}),(e=>{t(new Error(`${z.CANNOT_INIT_FILE}: ${e.message}`))}))}))}getRemoteUpdate(e){throw new Error("Method not implemented.")}}class Z extends K{constructor(e){super(Z.NAME,e,V())}}Z.NAME="forms_model.min.bson";class Q extends K{constructor(e){super(Q.NAME,e,q())}}Q.NAME="fields_model.min.bson";class ee extends Y{constructor(e){super(ee.NAME),this._localFetcher=e}loadLocally(){return new Promise(((e,t)=>{this._localFetcher.fetch(this.buildLocalPath(),B.Json,(t=>{this.fileContent=t,e(this.fileContent)}),(e=>{t(e)}))}))}getRemoteUpdate(e){return JSON.parse(e)}}ee.NAME="overrides.json";class te{constructor(e,t,s){var i;this._tiresiasExceptionLogger=e,this._localFileFetcher=t,this._connectors=s,this.registeredFiles={[Z.NAME]:{fileHandler:new Z(this._localFileFetcher)},[Q.NAME]:{fileHandler:new Q(this._localFileFetcher)},[ee.NAME]:{fileHandler:new ee(this._localFileFetcher)}},null===(i=this._connectors.carbonConnectorApi)||void 0===i||i.liveLoginStatus.on((({loggedIn:e})=>{e&&this._handleGrapheneRemoteFileUpdate()}))}registerFileListener(e,t){return e in this.registeredFiles&&(this.registeredFiles[e].callback=t),this}async init(){await Promise.all(Object.values(this.registeredFiles).map((async({fileHandler:e,callback:t})=>{try{const s=await e.loadLocally();t&&t(s)}catch(e){this._tiresiasExceptionLogger(e,{precisions:"Exception in FileManager init",fileName:"FileManager.ts",funcName:"FileManager.init",code:i.w.ERROR})}})))}_handleGrapheneRemoteFileUpdate(){var e;null===(e=this._connectors.grapheneClient)||void 0===e||e.overrides.queries.overrides().subscribe((e=>{if((0,$.hx)(e))return;const t=this.registeredFiles["overrides.json"].callback;t&&t((0,$.db)(e).overrides)}))}async handleRemoteFileMetaUpdate(e){const{carbonConnectorApi:t}=this._connectors;t&&await Promise.all(Object.keys(e).map((async e=>{if(!t||!(e in this.registeredFiles))return;const s=await this.registeredFiles[e].fileHandler.getRemoteUpdate(await t.getFileContent(e)),i=this.registeredFiles[e].callback;i&&i(s)})))}}var se=s(61856),ie=s(89984);class re{constructor(e){this._tabMap=new Map,se.a.addListener((t=>{try{if(t.tabId<0||t.frameId<0||t.parentFrameId<0)return;this._tabMap.has(t.tabId)||this._tabMap.set(t.tabId,new Map);const e=this._tabMap.get(t.tabId);if(e){if(e.has(t.frameId)&&e.get(t.frameId)===t.parentFrameId)return;e.set(t.frameId,t.parentFrameId)}}catch(t){e(t,{precisions:"Exception in onBeforeRequest listener",fileName:"FrameIdCollector.ts",funcName:"FrameIdCollector.constructor",code:i.w.ERROR})}}),{urls:["<all_urls>"]}),n.$.addListener((t=>{try{this._tabMap.delete(t)}catch(t){e(t,{precisions:"Exception in onRemoved listener",fileName:"FrameIdCollector.ts",funcName:"FrameIdCollector.constructor",code:i.w.ERROR})}})),ie.g.addListener((t=>{try{t.id&&this._tabMap.set(t.id,new Map)}catch(t){e(t,{precisions:"Exception in onCreated listener",fileName:"FrameIdCollector.ts",funcName:"FrameIdCollector.constructor",code:i.w.ERROR})}}))}getParentFrameId(e,t){const s=this._tabMap.get(e);return s?s.get(t):void 0}}var oe=s(96754),ne=s(26029);class ae{loadFileContent(e,t){switch(t){case B.Json:return JSON.parse(e);case B.Bson:return(0,ne.vB)(e);default:return e}}}class le extends ae{constructor(){super()}fetch(e,t,s,i){new Promise(((i,r)=>{fetch((0,oe.A)(e),{mode:"same-origin"}).then((e=>e.blob())).then((function(e){const o=new FileReader;o.addEventListener("loadend",(function(){if(s&&"function"==typeof s)try{this.result||r(new Error("The result of fetch is null")),i(this.result)}catch(e){r(e)}})),t===B.Bson?o.readAsArrayBuffer(e):o.readAsText(e)})).catch(r)})).then((e=>s(this.loadFileContent(e,t)))).catch(i)}}class ce{static build(){return new le}}class he{setFormsClassifier(e){this._formsClassifier=e}setFieldsClassifier(e){this._fieldsClassifier=e}predictStructure(e){const t=this._formsClassifier.toString(this._formsClassifier.smartPredict(e.context));return{classification:t||"other",fields:e.fields.map((e=>(e.form.classification=t,this._fieldsClassifier.toString(this._fieldsClassifier.smartPredict(e))||"other")))}}explainStructure(e){const t=this._formsClassifier.smartPredict(e.context),s=this._formsClassifier.toString(t);return{form:{classification:s||"nothing",prediction:t,explanation:this._formsClassifier.explain(e.context),context:e.context},fields:e.fields.map((e=>{const t=this._fieldsClassifier.smartPredict(e);return e.form.classification=s,{classification:this._fieldsClassifier.toString(t)||"nothing",prediction:t,explanation:this._fieldsClassifier.explain(e),context:e}}))}}}var de=s(6523),ue=s(6721);const ge="tiresiasConfigOption",pe=e=>{return t={[ge]:e},(0,ue.t)(t);var t},fe=()=>(async e=>{const t=await(0,de.U)(e);if(void 0===t[e])throw new Error("Undefined key in local storage");return t[e]})(ge),me=["https","http"],_e=!0,be=!0;class ve{constructor(e){var t;this._grapheneClient=e.grapheneClient,this.carbonConnectorApi=e.carbonConnectorApi,this.logException=this.carbonConnectorApi?(e.messageLogger,t=this.carbonConnectorApi,(e,s)=>{k(e,(e=>t.logException({exceptionType:"tiresiasException",log:e})),0,s)}):()=>{};try{this._messageHandler=new d(this.logException),this._pandora=new he,this._frameIdCollector=new re(this.logException),this._ahoCorasickWrapper=new U,this._initializeDevTool(),this._initializeUpdateableResources()}catch(e){this.logException(e,{precisions:"Exception in background initialization",fileName:"TiresiasBackground.ts",funcName:"TiresiasBackground.constructor",code:i.w.ERROR})}}_initializeUpdateableResources(){this._resourcesStorage=new u,this._localFileFetcher=ce.build(),this._fileManager=new te(this.logException,this._localFileFetcher,{carbonConnectorApi:this.carbonConnectorApi,grapheneClient:this._grapheneClient}).registerFileListener(Z.NAME,(e=>{this._pandora.setFormsClassifier(e)})).registerFileListener(Q.NAME,(e=>{this._pandora.setFieldsClassifier(e)})).registerFileListener(ee.NAME,(e=>{this._resourcesStorage.setResource("overrides",e)})),this._fileResourcesLoading=this._fileManager.init()}_initializeDevTool(){this._devtoolManager=new H(!1,this.logException),this._devtoolManager.listen(),this._registerHandlers(),l&&this._devtoolManager.setPandora(this._pandora),r.i.addListener(((e,t)=>{try{if("complete"===t.status){if(!t.url||!me.includes(new URL(t.url).protocol))return;this._devtoolManager.isEnabled&&this._devtoolManager.deleteTabId(e);const s=new p;(0,o.b)(e,s,{ignoreError:!0},(()=>{}))}}catch(e){this.logException(e,{precisions:"Exception in onUpdated listener",fileName:"TiresiasBackground.ts",funcName:"TiresiasBackground._initializeDevTool",code:i.w.ERROR})}})),this._devtoolManager.isEnabled&&n.$.addListener((e=>{try{this._devtoolManager.deleteTabId(e)}catch(e){this.logException(e,{precisions:"Exception in onRemoved listener",fileName:"TiresiasBackground.ts",funcName:"TiresiasBackground._initializeDevTool",code:i.w.ERROR})}}))}_replyConfiguration(e,t,s){return s(new m(_e,be)),!0}async _replyTabLanguage(e,t){var s;try{const e=null===(s=t.tab)||void 0===s?void 0:s.id;if(e){const t=await(0,a.e)(e);return new _(t||"und")}throw new Error("Missing tabId")}catch(e){return this.logException(e,{message:"Unable to detect page language",appendExceptionToMessage:!1,fileName:"TiresiasBackground.ts",funcName:"TiresiasBackground._replyTabLanguage",code:i.w.WARNING,rateLimit:.1}),new _("und")}}_ahoCorasickify(e,t,s){const i=["humanReadableProse","attributes","buttonVerbatim"];return e.formsAndFieldsContexts.forEach((e=>{if(e.formContext)for(const t of i)t in e.formContext&&(e.formContext[t]=this._ahoCorasickWrapper.searchAndSplit(e.formContext[t]));e.fieldsContext.forEach((e=>{if(e)for(const t of i)t in e&&(e[t]=this._ahoCorasickWrapper.searchAndSplit(e[t]))}))})),s(e.formsAndFieldsContexts),!0}_toggleDevTool(e,t,s){const i=l&&e.isDevtoolEnabled;return i||this._devtoolManager.cleanTabStorage(),this._devtoolManager.isEnabled=i,s({}),!0}_performClassification(e,t,s){return this._fileResourcesLoading.then((()=>{var i;const r=null===(i=t.tab)||void 0===i?void 0:i.id,o=e.formStructure.map((e=>this._pandora.predictStructure(e)));if(s(o),r&&this._devtoolManager.isEnabled){const t=e.formStructure.map((e=>this._pandora.explainStructure(e)));this._devtoolManager.storeTabFormsStructure(r,t)}})),!0}_dispatchIframeReport(e,t,s){var i;const r=null===(i=t.tab)||void 0===i?void 0:i.id;return r&&(0,o.b)(r,new b(e.report),{}),s({}),!0}_respondFrameId(e,t,s){var i,r;const o=new v(null!==(i=t.frameId)&&void 0!==i?i:0);if(null===(r=t.tab)||void 0===r?void 0:r.id){const e=this._frameIdCollector.getParentFrameId(t.tab.id,o.frameId);void 0!==e&&(o.parentFrameId=e)}return s(o),!0}_showTimeToD(e,t,s){return s({}),!0}_handleAnalysisSkippedRequest(e,t,s){var i;const r=null===(i=t.tab)||void 0===i?void 0:i.id;return!r||(new Promise((e=>{(0,o.b)(r,new M,{frameId:0},e)})).then((e=>s(e))),!0)}_handleContentToContentMessage(e,t,s){var i;const r=null===(i=t.tab)||void 0===i?void 0:i.id;return r&&new Promise((t=>{(0,o.b)(r,e.innerMessage,{frameId:e.frameId},t)})).then((e=>s(e))),!0}_handleInitResourcesMessage(e,t,s){return this._fileResourcesLoading.then((()=>{s(this._resourcesStorage.getAllResources())})),!0}_handleGetConfigurationMessage(e,t,s){return fe().then((e=>{s(e)})).catch((()=>{s(void 0)})),!0}_handleSetConfigurationMessage(e,t,s){return pe(e.tiresiasBackgroundOption),!0}_registerHandlers(){[{msg:E.MSG,handler:this._replyConfiguration},{msg:x.MSG,handler:this._replyTabLanguage},{msg:I.MSG,handler:this._ahoCorasickify},{msg:R.MSG,handler:this._toggleDevTool},{msg:L.MSG,handler:this._performClassification},{msg:y.MSG,handler:this._dispatchIframeReport},{msg:T.MSG,handler:this._respondFrameId},{msg:F.MSG,handler:this._showTimeToD},{msg:N.MSG,handler:this._handleAnalysisSkippedRequest},{msg:g.MSG,handler:this._handleContentToContentMessage},{msg:O.MSG,handler:this._handleInitResourcesMessage},{msg:G.MSG,handler:this._handleLogExceptionMessage},{msg:A.MSG,handler:this._handleGetConfigurationMessage},{msg:P.MSG,handler:this._handleSetConfigurationMessage}].forEach((({msg:e,handler:t})=>{this._messageHandler.addListener(this,e,t)}))}_handleLogExceptionMessage(e){var t,s,i;return this.carbonConnectorApi&&(s=this.carbonConnectorApi,i={message:null!==(t=e.log.message)&&void 0!==t?t:"LogExceptionMessage received with no message",...e.log},s.logException({exceptionType:"tiresiasException",log:i})),!1}}},15318:(e,t,s)=>{s.r(t),s.d(t,{ParsedURL:()=>i.Y});var i=s(13134)},13134:(e,t,s)=>{s.d(t,{Y:()=>p});var i=s(45975),r=s(11590),o=s(2509);const n=/^(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]\d|\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]\d|\d)){3}$/,a=e=>n.test(e),l=e=>e.startsWith("["),c=e=>e.length>1?e.slice(0,-1).join("."):"",h=e=>{const t=function(e){if(!e)return"";const t=function(e){const t=[];let s=e.split(".");for(;1!==s.length;)s=s.slice(1),t.push(s.join("."));return t}(e);if(0===t.length)return"";if(o.x.exception.has(e))return t[0];for(let e=0;e<t.length;e++){const s=t[e];if(o.x.exception.has(s))return t[e+1];if(o.x.basic.has(s))return s;const i=t[e+1];if(o.x.wildcard.has(i))return s}return""}(e),s=((e,t)=>(t&&(e=e.slice(0,-t.length-1)),e))(e,t).split("."),i=(e=>e.length>1&&"www"===e[0]?e.slice(1):e)(s);return{etld:t,mainDomain:i[i.length-1]?i[i.length-1]:"",subdomain:c(s),subdomainWithoutLeadingWww:c(i)}},d=/^[A-Za-z+\-.]+:\/\//,u=e=>d.test(e),g=e=>""!==e;class p{getRootDomain(){const e=this.appendETLD(this.rootDomainName);return this.isUnicode?(0,r.xX)(e):e}getRootDomainName(){return this.isUnicode?(0,r.xX)(this.rootDomainName):this.rootDomainName}getSubdomain(){return this.isUnicode?(0,r.xX)(this.subdomain):this.subdomain}getSubdomainWithoutLeadingWww(){return this.isUnicode?(0,r.xX)(this.subdomainWithoutLeadingWww):this.subdomainWithoutLeadingWww}getHostname(){return this.isUnicode?(0,r.xX)(this.hostname):this.hostname}getHost(){return this.isUnicode?(0,r.xX)(this.host):this.host}getETLD(){return this.isUnicode?(0,r.xX)(this.etld):this.etld}getPIIStrippedURL(){if(this.isUnicode){const e=this.piiStrippedURL.split("://");return`${e[0]}://${(0,r.xX)(e[1])}`}return this.piiStrippedURL}getSearch(){return this.isUnicode?(0,r.xX)(this.search):this.search}getPathname(){return this.pathname}isUrlValid(e={}){const{IPv4Allowed:t=!0,IPv6Allowed:s=!0,mustBeHttpOrHttps:i=!1,requireEtld:r=!1}=e;return!(!t&&a(this.hostname))&&(!(!s&&l(this.hostname))&&(!(i&&!this.hasHTTPProtocol)&&(!(r&&!g(this.etld))&&(this.hasHTTPProtocol||g(this.etld)||this.isUrlIP()))))}hasHTTPLikeProtocol(){return this.hasHTTPProtocol}getUrlWithFallbackHttpsProtocol(){return this.isUnicode?(0,r.xX)(this.userInputWithProtocol):this.userInputWithProtocol}isUrlIP(){return a(this.hostname)||l(this.hostname)}constructor(e){(0,i._)(this,"etld",void 0),(0,i._)(this,"hasHTTPProtocol",void 0),(0,i._)(this,"hostname",void 0),(0,i._)(this,"host",void 0),(0,i._)(this,"isUnicode",void 0),(0,i._)(this,"pathname",void 0),(0,i._)(this,"piiStrippedURL",void 0),(0,i._)(this,"rootDomainName",void 0),(0,i._)(this,"search",void 0),(0,i._)(this,"subdomain",void 0),(0,i._)(this,"subdomainWithoutLeadingWww",void 0),(0,i._)(this,"userInput",void 0),(0,i._)(this,"userInputWithProtocol",void 0),(0,i._)(this,"appendETLD",(e=>this.etld?`${e}.${this.etld}`:e));const t=(e=>{const t={hash:"",host:"",hostname:"",href:"",origin:"",password:"",pathname:"",port:"",protocol:"",search:"",username:"",userInput:"",userInputWithProtocol:""},s=e;if(!(e=e.trim()))return t;u(e)||(e=`https://${e}`);try{const t=new URL((e=>e.endsWith(".")?e.slice(0,-1):e)(e));return{hash:t.hash,host:t.host,hostname:t.hostname,href:t.href,origin:t.origin,password:t.password,pathname:t.pathname,port:t.port,protocol:t.protocol,search:t.search,username:t.username,userInput:s,userInputWithProtocol:e}}catch(e){return t}})(e="string"==typeof e?e:"");this.isUnicode=e!==(0,r.H9)(e),this.hostname=t.hostname,this.host=t.host,this.pathname=t.pathname,this.piiStrippedURL=(e=>{if(!e)return"";if(!["http:","https:"].includes(e.protocol))return e.href;try{return(u(e.userInput)?e.origin:e.origin.split("://")[1])+(()=>{if("/"!==e.pathname)return e.pathname;const t=e.userInput.split(e.host);return t.length>1&&t[1].startsWith("/")?e.pathname:""})()+e.hash}catch(e){return""}})(t),this.search=t.search,this.hasHTTPProtocol=(e=>e.startsWith("http://")||e.startsWith("https://"))(e);const{etld:s,mainDomain:o,subdomain:n,subdomainWithoutLeadingWww:c}=!(d=this.hostname)||(e=>e.startsWith(".")||e.endsWith("."))(d)?{etld:"",mainDomain:"",subdomain:"",subdomainWithoutLeadingWww:""}:"localhost"===d?{etld:"",mainDomain:d,subdomain:"",subdomainWithoutLeadingWww:""}:a(d)?(e=>({etld:"",mainDomain:e,subdomain:"",subdomainWithoutLeadingWww:""}))(d):l(d)?(e=>({etld:"",mainDomain:e.slice(1,-1),subdomain:"",subdomainWithoutLeadingWww:""}))(d):h(d);var d;this.etld=s,this.rootDomainName=o,this.subdomain=n,this.subdomainWithoutLeadingWww=c,this.userInput=t.userInput,this.userInputWithProtocol=t.userInputWithProtocol}}}},r={};function o(e){var t=r[e];if(void 0!==t)return t.exports;var s=r[e]={id:e,loaded:!1,exports:{}};return i[e].call(s.exports,s,s.exports,o),s.loaded=!0,s.exports}o.m=i,o.amdO={},e=[],o.O=(t,s,i,r)=>{if(!s){var n=1/0;for(h=0;h<e.length;h++){for(var[s,i,r]=e[h],a=!0,l=0;l<s.length;l++)(!1&r||n>=r)&&Object.keys(o.O).every((e=>o.O[e](s[l])))?s.splice(l--,1):(a=!1,r<n&&(n=r));if(a){e.splice(h--,1);var c=i();void 0!==c&&(t=c)}}return t}r=r||0;for(var h=e.length;h>0&&e[h-1][2]>r;h--)e[h]=e[h-1];e[h]=[s,i,r]},o.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return o.d(t,{a:t}),t},s=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__,o.t=function(e,i){if(1&i&&(e=this(e)),8&i)return e;if("object"==typeof e&&e){if(4&i&&e.__esModule)return e;if(16&i&&"function"==typeof e.then)return e}var r=Object.create(null);o.r(r);var n={};t=t||[null,s({}),s([]),s(s)];for(var a=2&i&&e;"object"==typeof a&&!~t.indexOf(a);a=s(a))Object.getOwnPropertyNames(a).forEach((t=>n[t]=()=>e[t]));return n.default=()=>e,o.d(r,n),r},o.d=(e,t)=>{for(var s in t)o.o(t,s)&&!o.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})},o.e=()=>Promise.resolve(),o.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),o.hmd=e=>((e=Object.create(e)).children||(e.children=[]),Object.defineProperty(e,"exports",{enumerable:!0,set:()=>{throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+e.id)}}),e),o.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),o.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),(()=>{var e;o.g.importScripts&&(e=o.g.location+"");var t=o.g.document;if(!e&&t&&(t.currentScript&&(e=t.currentScript.src),!e)){var s=t.getElementsByTagName("script");if(s.length)for(var i=s.length-1;i>-1&&!e;)e=s[i--].src}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),o.p=e})(),(()=>{var e={170:0};o.O.j=t=>0===e[t];var t=(t,s)=>{var i,r,[n,a,l]=s,c=0;if(n.some((t=>0!==e[t]))){for(i in a)o.o(a,i)&&(o.m[i]=a[i]);if(l)var h=l(o)}for(t&&t(s);c<n.length;c++)r=n[c],o.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return o.O(h)},s=self.webpackChunk_dashlane_amphora=self.webpackChunk_dashlane_amphora||[];s.forEach(t.bind(null,0)),s.push=t.bind(null,s.push.bind(s))})();var n=o.O(void 0,[642,633,877,495,373,139,786,280,345,363,433,431,958,587],(()=>o(82590)));n=o.O(n)})();