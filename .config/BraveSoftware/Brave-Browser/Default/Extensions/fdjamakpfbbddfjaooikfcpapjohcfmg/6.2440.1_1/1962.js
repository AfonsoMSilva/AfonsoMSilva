"use strict";(self.webpackChunk_dashlane_leeloo=self.webpackChunk_dashlane_leeloo||[]).push([[1962],{24126:(t,e,n)=>{n.r(e),n.d(e,{default:()=>W});var a=n(54793),r=n(78971),o=n(48038),i=n(96832),s=n(50941);const l=t=>{const e=i.useCallback((e=>t.client[e.name]),[t.client]),n=i.useMemo((()=>({appClient:{getModuleClient:e}})),[e]);return i.createElement(s.I.Provider,{value:n},t.children)};var c=n(92077),d=n(29004),u=n(68976),h=n(37527);function m(t,e,n){const a=t[e]||(()=>0);t[e]=()=>{a.call(t),n.call(t)}}function p(t,e){let n=null;const a=function(e){let a=!1;return()=>{a||(a=!0,window.requestAnimationFrame&&window.requestAnimationFrame((()=>{n&&t.forceUpdate(),a=!1})))}}();m(t,"componentDidMount",(()=>{n=e.subscribe(a),a()})),m(t,"componentWillUnmount",(()=>{n&&n(),n=null}))}class _ extends i.Component{getChildContext(){return{}}constructor(t){super(t),p(this,this.props.store)}render(){return i.Children.only(this.props.children)}}_.childContextTypes={};var C=n(14900),x=n(7870),g=n(44110);const Z=({children:t})=>{const[,e]=(0,r.If)();return i.useLayoutEffect((()=>{const t=window.localStorage.getItem(x.x2);e("true"===t?"dark":"light"),document.documentElement.style.setProperty("color-scheme","true"===t?"dark":"light")}),[e]),(0,g.tZ)(g.HY,{children:t})},y=t=>(0,g.tZ)(C.f6W,{theme:(0,r.It)(r.uH,C.uHP),children:(0,g.tZ)(r.SG,{children:(0,g.tZ)(Z,{children:t.children})})}),w=t=>(0,g.tZ)(y,{children:(0,g.tZ)("div",{children:i.Children.only(t.children)})}),f=t=>(0,g.tZ)(w,{children:(0,g.tZ)(_,{store:t.store,children:i.Children.only(t.children)})});var v=n(7344),N=n(43874),b=n(9673),E=n(22927),k=n(5465),S=n(41339),I=n(88203);const T=({handleConsentSet:t})=>{const[e,n]=(0,i.useState)({interactionDataConsent:!0,personalDataConsent:!0}),{translate:a}=(0,I.Z)();return(0,g.BX)(r.kC,{as:"form",sx:{margin:"0 auto",width:"544px","@media (max-width: 1280px)":{width:"424px"}},children:[(0,g.tZ)(r.X6,{as:"h1",textStyle:"ds.title.section.large",sx:{marginBottom:"16px",textWrap:"balance"},children:a("account_creation_user_consent_title")}),(0,g.tZ)(r.nv,{as:"div",sx:{p:{marginBottom:"24px"},"p:last-of-type":{marginBottom:"16px"}},children:a.markup("account_creation_user_consent_description_markup")}),(0,g.tZ)(r.XZ,{label:a("account_creation_user_consent_usage_data_label"),checked:e.interactionDataConsent,onChange:t=>{return"interactionDataConsent",e=t.currentTarget.checked,void n((t=>({...t,interactionDataConsent:e})));var e},sx:{mb:"40px"}}),(0,g.BX)(C.T5p,{gridTemplateColumns:"auto auto",gap:"8px",justifyContent:"end",fullWidth:!0,sx:{marginBottom:"40px"},children:[(0,g.tZ)(r.zx,{type:"button",intensity:"supershy",onClick:async()=>{await((0,S.Ez)("management.uninstallSelf")?chrome.management.uninstallSelf(undefined):Promise.reject(new Error("No management.uninstallSelf support")))},children:a("account_creation_user_consent_decline")}),(0,g.tZ)(r.zx,{type:"button",onClick:async()=>{await t(e)},children:a("account_creation_user_consent_agree")})]}),(0,g.tZ)(r.nv,{textStyle:"ds.body.reduced.regular",children:a.markup("account_creation_user_consent_disclaimer_markup",{},{linkTarget:"_blank"})})]})},A={MAIN_CONTAINER:{backgroundColor:"ds.container.agnostic.neutral.supershy",minHeight:"100vh",minWidth:"1010px",display:"flex"},GLOBAL_EXTENSION_CONSENT_CONTAINER:{paddingTop:"160px",display:"flex",alignItems:"start",minWidth:"640px",minHeight:"100vh",width:"640px",transition:"all 0.5s ease",transitionProperty:"min-width, width","@media (max-width: 1024px)":{minWidth:"568px",width:"568px"}}};var O;const B=({children:t})=>{const{setUserConsent:e,getUserConsent:n}={getIsConsentNeeded:async()=>!0!==(await k.C.getGlobalExtensionSettings()).personalDataConsent,setUserConsent:async t=>await k.C.setGlobalExtensionSettings(t),getUserConsent:async()=>await k.C.getGlobalExtensionSettings()},[a,r]=(0,i.useState)(!1);return(0,i.useEffect)((()=>{void 0===a&&n().then((t=>{null!==t.interactionDataConsent||null!==t.personalDataConsent?r(!1):r(!0)}))}),[n,a]),a?(0,g.BX)("div",{sx:A.MAIN_CONTAINER,children:[O||(O=(0,g.tZ)(E.i9,{})),(0,g.tZ)("div",{sx:A.GLOBAL_EXTENSION_CONSENT_CONTAINER,children:(0,g.tZ)(T,{handleConsentSet:async t=>{await e(t),r(!1)}})})]}):t};var D=n(99494);const W=t=>{const e={host:t.host,reducer:v.Z,store:t.store,translate:t.translate,routes:t.namedRoutes};return window.dispatchEvent(new Event("display-app")),(0,g.tZ)(f,{store:t.store,children:(0,g.tZ)(l,{client:t.coreClient,children:(0,g.tZ)(o.wz,{channel:t.carbonChannel,children:(0,g.tZ)(c.F0,{history:t.history,children:(0,g.tZ)(a.zt,{store:t.store,children:(0,g.tZ)(d.b,{value:{translate:t.translate},children:(0,g.tZ)(u.u,{portalId:"alert-popup-portal",children:(0,g.tZ)(r.VW,{portalId:h.ex,defaultCloseActionLabel:t.translate("_common_toast_close_label"),sectionName:t.translate("_common_toast_section_name"),itemName:t.translate("_common_toast_item_name"),children:(0,g.tZ)(c.v1,{value:e,children:(0,g.tZ)(b.G,{children:(0,g.tZ)(N.r,{moduleName:"leeloo-routes",useCaseName:t.history.location.pathname,children:(0,g.tZ)(B,{children:(0,g.tZ)(D.e,{children:t.routes})})})})})})})})})})})})})}}}]);