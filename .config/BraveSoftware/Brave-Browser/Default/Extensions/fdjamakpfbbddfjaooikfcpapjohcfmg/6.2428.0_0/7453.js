"use strict";(globalThis.webpackChunk_dashlane_leeloo=globalThis.webpackChunk_dashlane_leeloo||[]).push([[7453],{61014:(e,t,n)=>{n.d(t,{P:()=>O});var i=n(696832),r=n(514900),a=n(659035),o=n(488203),s=n(341571);const l=n(816583);var c=n(468037),d=n(210994),p=n(221119),u=n(86498),_=n(589923),m=n(671785),h=n(317086);var f=n(521877),g=n(45272),w=n(923206),y=n(837527);const I="webapp_secure_file_delete_button_title",E="webapp_secure_file_download_button_title",b={cursor:"pointer",margin:"0px 10px",padding:"5px",border:"1px solid transparent","&:hover":{border:`1px solid ${r.colors.grey05}`},borderRadius:"4px"},C={opacity:.6};var x=n(528835);const S=({attachment:e,disableActions:t,handleFileInfoDetached:n,onModalDisplayStateChange:a,parentId:s,parentType:l})=>{const{translate:c}=(0,o.Z)(),{translateWithMarkup:d}=(0,_.Y)(),p=(0,u.V)(),[h,E]=(0,i.useState)(!1),S=(0,i.useCallback)((()=>p.showAlert(d("webapp_secure_file_error_unknown"),r.BLW.ERROR)),[p,d]),{deleteFile:v}=(0,m.vN)(e.id,S,l,n),D=()=>{E(!0),a?.(!0)},k=()=>{E(!1),a?.(!1)};return(0,x.BX)(x.HY,{children:[(0,x.tZ)(r.ua7,{placement:"left",trigger:"hover",content:d(t?"webapp_secure_file_delete_button_tooltip_content_disable":"webapp_secure_file_delete_button_tooltip_content_enable"),children:(0,x.tZ)("div",{role:"button","aria-label":c(I),sx:t?(0,r.jMf)([b,C]):b,tabIndex:0,onKeyDown:e=>{13===e.keyCode&&D()},onClick:D,children:(0,x.tZ)(r.XHJ,{color:r.colors.dashGreen00,"aria-hidden":"true",title:c(I),"aria-label":c(I)})})}),(0,x.BX)(r.VqE,{isOpen:h&&!t,onClose:k,closeIconName:"CloseIcon",modalContentClassName:y.jK,children:[(0,x.BX)(r.a7O,{children:[(0,x.tZ)(r.X6q,{size:"small",sx:{margin:"16px 0px",fontWeight:"bolder"},children:d("webapp_secure_file_delete_confirm_dialog_heading")}),(0,x.tZ)(r.nvN,{sx:{margin:"8px 0px"},color:r.colors.grey00,children:d("webapp_secure_file_delete_confirm_dialog_paragraph")})]}),(0,x.tZ)(r.cNS,{primaryButtonTitle:d("webapp_secure_file_delete_confirm_dialog_action_primary_button_title"),primaryButtonOnClick:()=>{s&&(0,g.Kz)(new f.UserUpdateVaultItemAttachmentEvent({attachmentAction:f.Action.Delete,itemId:s,itemType:l})),v(),p.showAlert(c("webapp_secure_file_delete_success",{fileName:(0,w.K)(e.filename)}),r.BLW.SUCCESS),E(!1)},secondaryButtonTitle:d("webapp_secure_file_delete_confirm_dialog_action_secondary_button_title"),secondaryButtonOnClick:k,intent:"danger"})]})]})},v=({attachment:e,disableActions:t,setDisableActions:n,progress:a,parentId:s,parentType:l})=>{const{translate:c}=(0,o.Z)(),{translateWithMarkup:d}=(0,_.Y)(),{download:u}=(0,m.gF)(e,l),h=()=>{s&&(0,g.Kz)(new f.UserDownloadVaultItemAttachmentEvent({itemId:s,itemType:l})),u()};return(0,i.useEffect)((()=>{switch(a?.status){case p.wL.Downloading:n(!0);break;case p.wL.TransferComplete:case p.wL.Error:n(!1)}}),[a,n,d]),(0,x.tZ)(r.ua7,{placement:"left",trigger:"hover",content:d(t?"webapp_secure_file_download_button_tooltip_content_disable":"webapp_secure_file_download_button_tooltip_content_enable"),children:(0,x.tZ)("div",{role:"link","aria-label":c(E),sx:t?(0,r.jMf)([b,C]):b,tabIndex:0,onKeyDown:t?void 0:e=>{13===e.keyCode&&h()},onClick:t?void 0:h,children:(0,x.tZ)(r._8t,{sx:t?C:void 0,color:r.colors.dashGreen00,"aria-hidden":"true","aria-label":c(E),title:c(E)})})})},D=e=>{const t=(0,m.Ce)(e.attachment.downloadKey);return(0,x.BX)(a.kC,{alignItems:"center",justifyContent:"flex-end",children:[(0,x.tZ)(v,{progress:t,...e}),(0,x.tZ)(S,{...e})]})},k=n(816583),R={color:`${r.colors.grey00}`,minHeight:"60px",position:"relative","&:hover":{"& > *:last-child":{opacity:1}}},N={width:36,minWidth:36,height:36,borderRadius:"50%",border:"1px solid rgba(0, 0, 0, 0.1)",background:r.colors.dashGreen06},A={padding:"0px 8px",overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis",fontWeight:"bold"},T=({attachment:e})=>{return(0,x.BX)(a.kC,{alignItems:"center",flexWrap:"nowrap",children:[(0,x.tZ)(a.kC,{sx:N,alignItems:"center",justifyContent:"center",children:(0,x.tZ)(r.Ujz,{size:25,color:r.colors.midGreen00})}),(0,x.BX)("div",{sx:{display:"flex",flexDirection:"column",overflow:"hidden"},children:[(0,x.tZ)(a.nv,{sx:A,children:e.filename}),(0,x.tZ)(a.nv,{color:"ds.text.neutral.quiet",sx:{fontSize:"ds.body.helper.regular",padding:"0px 8px"},children:(t=e.localSize,k(t,{decimalPlaces:0,unitSeparator:" "}))})]})]});var t},Z=e=>{const{attachment:t,itemId:n,itemType:s}=e,{translate:l}=(0,o.Z)();return(e=>{const{showAlert:t}=(0,u.V)(),{translateWithMarkup:n}=(0,_.Y)(),a=(0,m.Ce)(e.downloadKey);(0,i.useEffect)((()=>{var i,o;const s=e=>t((0,h.b)(n(e)),r.BLW.SUBTLE,!1);if(a?.status)switch(a.status){case p.wL.Downloading:s({key:"webapp_secure_file_download_progress_downloading_markup",params:{fileName:e.filename,progress:Math.round(null!=(i=(null!=(o=100*a?.bytesReceived)?o:0)/a?.contentLength)?i:1)}});break;case p.wL.Deciphering:s({key:"webapp_secure_file_download_progress_deciphering_markup",params:{fileName:e.filename}});break;case p.wL.TransferComplete:t(n({key:"webapp_secure_file_download_progress_success_markup",params:{fileName:e.filename}}),r.BLW.SUCCESS);break;case p.wL.Error:t(n({key:"webapp_secure_file_error_unknown"}),r.BLW.ERROR)}}),[alert,e,a,n])})(t),(0,x.BX)(a.kC,{fullWidth:!0,alignItems:"center",sx:R,children:[(0,x.tZ)("div",{sx:{width:"60%"},children:(0,x.tZ)(T,{...e})}),(0,x.tZ)("div",{sx:{width:"20%"},children:l.shortDate((0,d.Z)(t.creationDatetime))}),(0,x.tZ)(D,{parentType:s,parentId:n,...e})]})},L=({children:e})=>{const{translate:t}=(0,o.Z)();return(0,x.tZ)(c.u,{title:t("webapp_secure_file_attachment_title"),children:e})},O=({attachments:e,additionalProps:t})=>{const{translate:n}=(0,o.Z)(),[c,d]=(0,i.useState)(!1),p=(0,s.I)(),u=p.max>0&&p.remaining<78643200,_={borderBottom:`1px solid ${r.colors.grey06}`,color:"ds.text.neutral.quiet",alignSelf:"center",fontSize:"12px",textTransform:"uppercase"};return(0,i.useEffect)((()=>{d(t.isUploading)}),[t.isUploading]),(0,x.tZ)(L,{children:(0,x.BX)(a.kC,{flexDirection:"column",sx:{padding:"12px 0px",flex:1,overflow:"hidden"},children:[(0,x.BX)(a.kC,{flexDirection:"column",alignItems:"center",fullWidth:!0,sx:{flex:1,overflowY:"auto",flexWrap:"nowrap"},children:[e?.length>0?(0,x.BX)(a.kC,{fullWidth:!0,alignItems:"center",sx:{backgroundColor:"ds.container.agnostic.neutral.quiet",borderRadius:"4px",padding:"0px 4px",height:"28px"},children:[(0,x.tZ)(a.nv,{sx:{..._,width:"60%"},children:n("webapp_secure_notes_addition_field_tab_attachments_table_title_name")}),(0,x.tZ)(a.nv,{sx:{..._,width:"40%"},children:n("webapp_secure_notes_addition_field_tab_attachments_table_title_creation_date")})]}):(0,x.BX)(a.kC,{justifyContent:"center",flexDirection:"column",alignItems:"center",sx:{flex:1},children:[(0,x.tZ)(r.Ujz,{size:70,color:r.colors.dashGreen04,sx:{marginBottom:"24px"}}),(0,x.tZ)(a.nv,{sx:{textAlign:"center",color:"ds.text.neutral.catchy"},children:n.markup("webapp_secure_file_empty_attachments_markup")})]}),e?e.map((e=>(0,x.tZ)(Z,{attachment:e,handleFileInfoDetached:t?.handleFileInfoDetached,disableActions:c,setDisableActions:d,onModalDisplayStateChange:t.onModalDisplayStateChange,itemId:t.itemId,itemType:t.itemType},e.id))):null]}),u?(0,x.tZ)(a.ke,{mood:"danger",title:n("webapp_secure_file_storage_quota_info",(m=p.remaining,h=p.max,{usedQuota:l(m,{decimalPlaces:0,unitSeparator:" "}),maxQuota:l(h,{decimalPlaces:0,unitSeparator:" "})})),sx:{flex:0,marginTop:"16px"}}):null]})});var m,h}},773157:(e,t,n)=>{n.d(t,{d:()=>E});var i=n(696832),r=n(659035),a=n(521877),o=n(488203),s=(n(416702),n(842403),n(798849),n(978895),n(445595),n(325676),n(221119)),l=n(514900),c=n(740300),d=n(45272),p=n(86498),u=n(589923),_=n(923206),m=n(317086);const h=15*Math.pow(1024,2),f={PROGRESS_CIPHERING:"webapp_secure_file_upload_progress_ciphering_markup"};function g(e){const[t,n]=(0,i.useState)(!1),r=(0,p.V)(),{translateWithMarkup:o}=(0,u.Y)();return{isUploading:t,upload:(t,i)=>{if(t)if(t.size>h)i?.({success:!1,error:{code:s.tA.MAX_CONTENT_LENGTH_EXCEEDED}});else{const p=(0,_.K)(t.name);r.showAlert((0,m.b)(o({key:f.PROGRESS_CIPHERING,params:{fileName:p}})),l.BLW.SUBTLE,!1),n(!0);const u=new FileReader,g=e=>{i?.(e),n(!1)};u.onloadend=async()=>async function(e,t,n,i){if(2===e.readyState){const r=e.result,o=new Uint8Array(r),l=JSON.stringify(Array.from(o));if(t.size>h)i?.({success:!1,error:{code:s.tA.MAX_CONTENT_LENGTH_EXCEEDED}});else{const e=await c.C.addSecureFile({fileName:t.name,fileType:t.type,serializedContent:l});e.success&&(0,d.Kz)(new a.UserUpdateVaultItemAttachmentEvent({attachmentAction:a.Action.Add,itemId:e.secureFileInfo.Id,itemType:n})),i?.(e)}}return null}(u,t,e,g),u.readAsArrayBuffer(t)}}}}var w=n(671785),y=n(553966),I=n(528835);const E=({onFileUploadStarted:e,onFileUploadDone:t,isQuotaReached:n,isShared:s,itemId:l,dataType:p,disabled:u=!1})=>{var _;const m=(0,w.ml)("KWIDCard"===p)&&!s,h=null!=(_=y.dataModelTypeToItemType[p])?_:function(e){throw new Error(e)}(`Unsupported Type ${p}`),{translate:f}=(0,o.Z)(),{upload:E,isUploading:b}=g(h),[C,x]=(0,i.useState)(""),{showErrorAlert:S}=(0,w.Pw)(C),v=(0,w.yK)(),D=e=>{t?.(e),e.success||S(e.error?.code)},k=async t=>{const n=await(async e=>await c.C.validateSecureFile({fileName:e.name,fileType:e.type,contentLength:e.size}))(t);n.success?(e(),x(t.name),E(t,D)):S(n?.error?.code)};return m?(0,I.BX)(r.kC,{children:[(0,I.tZ)("input",{type:"file",id:"secureFileInput",sx:{display:"none"},onChange:e=>{e?.target?.files?.length&&k(e.target.files[0]),e.target.value=""},accept:v?.join(",")}),(0,I.tZ)(r.zx,{mood:"neutral",intensity:"quiet",icon:"AttachmentOutlined",layout:"iconLeading",onClick:e=>{l&&(0,d.Kz)(new a.UserUpdateVaultItemAttachmentEvent({attachmentAction:a.Action.Add,itemId:l,itemType:h})),document.getElementById("secureFileInput")?.click(),e.preventDefault()},disabled:n||b||u,children:f("webapp_secure_notes_add_attachment_action_name")},"attach")]}):null}},317086:(e,t,n)=>{n.d(t,{b:()=>o});var i=n(659035),r=n(514900),a=n(528835);const o=e=>(0,a.BX)(i.kC,{justifyContent:"center",children:[(0,a.tZ)(r.HoD,{sx:{mr:"8px"},color:r.colors.dashGreen00,size:18}),e]})},899193:(e,t,n)=>{n.d(t,{w:()=>i});const i=e=>({id:e.Id,type:e.Type,version:1,filename:e.Filename,downloadKey:e.DownloadKey,cryptoKey:e.CryptoKey,localSize:e.LocalSize,remoteSize:e.RemoteSize,creationDatetime:e.CreationDatetime,userModificationDatetime:e.UserModificationDatetime,owner:e.Owner})},923206:(e,t,n)=>{n.d(t,{K:()=>i});const i=e=>e.length<=32?e:e.substring(0,32)},671785:(e,t,n)=>{n.d(t,{ml:()=>b,aV:()=>I,yK:()=>k,vN:()=>s,gF:()=>g,Ce:()=>c,Pw:()=>D});var i=n(221119),r=n(740300),a=n(45272),o=n(521877);function s(e,t,n,s){return{deleteFile:()=>{r.C.deleteSecureFile({id:e}).then((r=>{var l;r.success||!r.success&&r.error?.code===i.tA.FILE_NOT_FOUND?(s?.(e),(0,a.Kz)(new o.UserUpdateVaultItemAttachmentEvent({attachmentAction:o.Action.Delete,itemId:e,itemType:n}))):t(null!=(l=r.error?.code)?l:i.tA.INTERNAL_ERROR)}))}}}var l=n(148038);function c(e){const t=(0,l.qr)({queryConfig:{query:r.C.getFileDownloadProgress,queryParam:e},liveConfig:{live:r.C.liveFileDownloadProgress,liveParam:e}},[e]);return t.status===l.rq.Success?t.data:null}n(416702),n(842403),n(798849),n(978895),n(445595),n(325676);var d=n(696832),p=n(354760),u=n(589923),_=n(86498),m=n(514900);const h={UNKNOWN_ERROR:"webapp_secure_file_error_unknown"},f=(e,t)=>{try{const t=JSON.parse(e);return new Uint8Array(t).buffer}catch(e){return t(i.tA.INTERNAL_ERROR),null}};function g({id:e,filename:t,downloadKey:n,cryptoKey:s,type:l},g){const{translateWithMarkup:w}=(0,u.Y)(),y=(0,_.V)(),I=c(n),E=(0,d.useRef)(""),b=()=>y.showAlert(w(h.UNKNOWN_ERROR),m.BLW.ERROR);return(0,d.useEffect)((()=>{I?.status===i.wL.ChunkReady&&(E.current=E.current.concat(I.chunk),r.C.chunkTransferDone(n))}),[I,n]),(0,d.useEffect)((()=>{if(I?.status===i.wL.TransferComplete){const i=f(E.current,b);i&&((0,p.S)(i,t,l),E.current="",r.C.clearSecureFileState(n),(0,a.Kz)(new o.UserDownloadVaultItemAttachmentEvent({itemId:e,itemType:g})))}}),[I,t,l,n,e,g]),{download:()=>{r.C.downloadSecureFile({downloadKey:n,cryptoKey:s})}}}n(341571);var w=n(65255),y=n(377377);function I(){return(0,y.w)(w.w.SaexSecureNoteAttachmentsForrelease)}var E=n(615394);function b(e){const t=(0,y.w)(w.w.TechweekWebAttachmentsForIdsV1),n=I(),i=(0,E.rp)(["secureFiles"]),r=n&&i;return e?r&&t:r}var C=n(317086),x=n(923206);const S={PROGRESS_UPLOADING:"webapp_secure_file_upload_progress_loading_markup",PROGRESS_CIPHERING:"webapp_secure_file_upload_progress_ciphering_markup",UPLOAD_SUCCESS:"webapp_secure_file_upload_success_markup",UNKNOWN_ERROR:"webapp_secure_file_error_unknown",MAX_CONTENT_LENGTH_EXCEEDED:"webapp_secure_file_error_upload_max_length_excedeed",QUOTA_EXCEDEED:"webapp_secure_file_error_upload_quota_excedeed",INVALID_FILE_TYPE:"webapp_secure_file_error_file_type_not_allowed"},v=e=>{var t;return e&&null!=(t=S[e])?t:S.UNKNOWN_ERROR},D=e=>{const t=(0,_.V)(),{translateWithMarkup:n}=(0,u.Y)(),a=function(){const e=(0,l.qr)({queryConfig:{query:r.C.getFileUploadProgress},liveConfig:{live:r.C.liveFileUploadProgress}},[]);return e.status===l.rq.Success?e.data:null}(),o=(0,x.K)(e);return(0,d.useEffect)((()=>{var e,r;const s=e=>t.showAlert((0,C.b)(n(e)),m.BLW.SUBTLE,!1);switch(a?.status){case i.XX.Uploading:s({key:S.PROGRESS_UPLOADING,params:{fileName:o,progress:Math.round(null!=(e=(null!=(r=100*a?.bytesSent)?r:0)/a?.contentLength)?e:1)}});break;case i.XX.Ciphering:s({key:S.PROGRESS_CIPHERING,params:{fileName:o}});break;case i.XX.Done:t.showAlert(n({key:S.UPLOAD_SUCCESS,params:{fileName:o}}),m.BLW.SUCCESS)}}),[t,e,a,n]),{showErrorAlert:e=>{t.showAlert(n({key:v(null!=e?e:"")}),m.BLW.ERROR)}}};function k(){const e=(0,l.qr)({queryConfig:{query:r.C.getSecureDocumentsExtensionsList}},[]);return e.status===l.rq.Success?e.data:void 0}},341571:(e,t,n)=>{n.d(t,{I:()=>a});var i=n(148038),r=n(740300);function a(){const e=(0,i.qr)({queryConfig:{query:r.C.getSecureFilesQuota},liveConfig:{live:r.C.liveSecureFilesQuota}},[]);return e.status===i.rq.Success?e.data:{max:0,remaining:0}}},979808:(e,t,n)=>{n.d(t,{r:()=>a});var i=n(799852),r=n(261582);const a=e=>(0,i.k)(r.X,"sharedAccessForItem",{itemId:e})},555449:(e,t,n)=>{n.d(t,{u:()=>R});var i,r,a=n(696832),o=n(514900),s=n(482598),l=n(133354),c=n(762048),d=n(261582),p=n(713252),u=n(287279),_=n(488203),m=n(343194),h=n(448263),f=n(659035),g=n(232814),w=n(904967),y=n(873670),I=n(989572),E=n(58037),b=n(528835);const C=({cancelStatus:e,vaultItemId:t,setCancelStatus:n,recipientId:c})=>{const{translate:u}=(0,_.Z)(),m=e===h.V.Loading,g={type:p.IP.User,alias:c},{revokeSharedItem:w}=(0,s.u)(d.X);(0,a.useEffect)((()=>{let t;return e===h.V.Failure&&(t=window.setTimeout((()=>n(null)),2e3)),()=>{clearTimeout(t)}}),[e,n]);const y=e?()=>n(null):()=>n(h.V.Confirm);return e===h.V.Failure?(0,b.BX)("div",{sx:{color:"ds.text.danger.standard",display:"flex",alignItems:"center"},children:[i||(i=(0,b.tZ)(o.aNP,{color:"ds.text.danger.standard"}))," ",u("webapp_shared_access_cancel_failure")]}):(0,b.BX)("div",{children:[(0,b.tZ)(f.zx,{intensity:e?"quiet":"supershy",disabled:m,onClick:y,size:"small",children:u(e?"webapp_shared_access_cancel":"webapp_shared_access_cancel_invitation")}),e?(0,b.tZ)(f.zx,{mood:"danger",intensity:"catchy",sx:{ml:"16px"},disabled:m,size:"small",onClick:()=>(async()=>{n(h.V.Loading);const e=await(async()=>{try{return(await w({vaultItemId:t,recipient:g})).tag===l.rq.Success}catch(e){return!1}})();n(e?h.V.Success:h.V.Failure)})(),children:m?r||(r=(0,b.tZ)(o.HoD,{})):u("webapp_shared_access_confirm")}):null]})};var x;const S=({vaultItemId:e,onUserSelected:t,openEditPermissionsDialog:n,member:i,isAdmin:r})=>{const[o,s]=(0,a.useState)(null),l=(0,E.j)()?.login,{translate:c}=(0,_.Z)();if(o===h.V.Success)return null;const{permission:d,status:u,recipientType:m}=i,S=l===i.recipientId,v=r&&l!==i.recipientId,D="pending"===u?(0,b.tZ)(C,{recipientId:i.recipientId,vaultItemId:e,cancelStatus:o,setCancelStatus:s}):(0,b.tZ)(y.M,{disabled:!r,icon:"ActionEditOutlined",layout:"iconLeading",intensity:"supershy",onClick:()=>{t&&t(i.recipientId),n(i,d,m)},content:c("webapp_sharing_collection_access_description_tooltip"),tooltipSx:{textWrap:"wrap",maxWidth:"240px"},size:"small",children:c("webapp_shared_access_edit_permissions")});return(0,b.tZ)("li",{sx:{alignItems:"center",display:"flex",minHeight:"48px",position:"relative"},children:(0,b.tZ)(w.r,{infoAction:v?D:null,logo:i.recipientType===p.IP.Group?x||(x=(0,b.tZ)(I.Z,{})):(0,b.tZ)(g.q,{email:i.recipientName,size:36}),title:i.recipientName,permissionBadge:(0,b.tZ)(f.Ct,{mood:"admin"===d?"brand":"danger",label:c("admin"===d?"webapp_sharing_permissions_full_rights":"webapp_sharing_permissions_limited_rights")}),disabled:o===h.V.Loading,titleLogo:S?(0,b.tZ)(f.Ct,{label:c("webapp_shared_access_you_badge").toUpperCase(),layout:"labelOnly",sx:{marginLeft:"4px"}}):null})},i.recipientId)};var v=n(979808),D=n(468037),k=n(814341);const R=({id:e,isAdmin:t})=>{const{translate:n}=(0,_.Z)(),[i,r]=(0,a.useState)(!1),[f,g]=(0,a.useState)(null),[w,y]=(0,a.useState)(void 0),{data:I,status:E}=(0,v.r)(e),{updatePermissionForCollectionItem:C,removeItemFromCollections:x}=(0,s.u)(c.a),{revokeSharedItem:R,updateSharedItemPermission:N}=(0,s.u)(d.X);if(E!==l.rq.Success)return(0,b.tZ)(o.HoD,{color:"ds.container.expressive.brand.catchy.idle",size:50,sx:{alignSelf:"center",m:"20px"}});if(!I)return null;const{itemGroupId:A,users:T,groups:Z,collections:L}=I,O=e=>{f&&g({...f,step:e})},P=async()=>{if(!f)return;const{recipient:t,permission:n,recipientType:i}=f;r(!0);const a="revoke"===n?await(async(t,n)=>{try{if(n===p.IP.Collection){const n=await x({collectionIds:[t.recipientId],itemId:e});return!!(0,u.d6)(n)}return(await R({vaultItemId:e,recipient:(0,k.d)(t)})).tag===l.rq.Success}catch(e){return!1}})(t,i):await(async(t,n,i)=>{try{if(i===p.IP.Collection){const e=await C({groupId:A,collection:{collectionId:t.recipientId,permission:n}});return!!(0,u.d6)(e)}return(await N({vaultItemId:e,recipient:(0,k.d)(t),permission:n})).tag===l.rq.Success}catch(e){return!1}})(t,n,i);if(a){const e="revoke"===n?h.PermissionDialogStep.RevokeSuccess:h.PermissionDialogStep.Success;O(e)}else O(h.PermissionDialogStep.Failure);r(!1)},U=(e,t,n)=>{const i={recipient:e,recipientType:n,permission:t,originPermission:t,step:h.PermissionDialogStep.Permission,name:e.recipientName};g(i)},F=Z?.length>0,X=L?.length>0,B=T?.length>0,W=!(w&&T.find((e=>e.recipientId!==w&&e.permission===p.y3.Admin)))&&f?.recipient.recipientType===p.IP.User,q="collection"===f?.recipientType;return(0,b.BX)("div",{sx:{flex:"1",overflowY:"auto"},children:[(0,b.BX)("ul",{sx:{flex:"1"},children:[X?(0,b.tZ)(D.u,{title:n("webapp_shared_access_collections"),additionalSx:{marginBottom:"16px"},children:L.map((n=>(0,b.tZ)(S,{isAdmin:t,member:n,vaultItemId:e,openEditPermissionsDialog:U},n.recipientId)))}):null,F?(0,b.tZ)(D.u,{title:n("webapp_shared_access_groups_card_title"),additionalSx:{marginBottom:"16px"},children:Z.map((n=>(0,b.tZ)(S,{isAdmin:t,member:n,vaultItemId:e,openEditPermissionsDialog:U},n.recipientId)))}):null,B?(0,b.tZ)(D.u,{title:n("webapp_shared_access_individuals_card_title"),children:T.map((n=>(0,b.tZ)(S,{isAdmin:t,member:n,onUserSelected:e=>y(e),vaultItemId:e,openEditPermissionsDialog:U},n.recipientId)))}):null]}),f&&(0,b.tZ)(m.E,{isOpen:!0,isCollectionItemPermission:q,shouldRevokeBeDisabled:W||void 0,loading:i,onCancelRevoke:()=>{f&&g({...f,step:h.PermissionDialogStep.Permission})},onConfirmRevoke:P,onDismiss:()=>g(null),onSelectPermission:e=>{f&&g({...f,permission:e})},onValidatePermission:()=>{"revoke"===f?.permission?g({...f,step:h.PermissionDialogStep.ConfirmRevoke}):P()},permission:f.permission,recipient:f.recipient,step:f.step})]})}},221119:(e,t,n)=>{var i,r,a;n.d(t,{XX:()=>a,tA:()=>i,wL:()=>r}),function(e){e.MAX_CONTENT_LENGTH_EXCEEDED="MAX_CONTENT_LENGTH_EXCEEDED",e.QUOTA_EXCEEDED="QUOTA_EXCEEDED",e.INVALID_FILE_TYPE="INVALID_FILE_TYPE",e.INTERNAL_ERROR="INTERNAL_ERROR",e.SERVER_ERROR="SERVER_ERROR",e.FILE_NOT_FOUND="FILE_NOT_FOUND"}(i||(i={})),function(e){e.Initial="Initial",e.Downloading="Downloading",e.Deciphering="Deciphering",e.Error="Error",e.ChunkReady="ChunkReady",e.ChunkDownloaded="ChunkDownloaded",e.TransferComplete="TransferComplete"}(r||(r={})),function(e){e.None="None",e.Initial="Initial",e.Uploading="Uploading",e.Ciphering="Ciphering",e.Done="Done",e.Error="Error"}(a||(a={}))}}]);