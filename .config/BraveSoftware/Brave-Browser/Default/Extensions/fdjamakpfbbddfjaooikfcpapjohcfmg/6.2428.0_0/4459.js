"use strict";(globalThis.webpackChunk_dashlane_leeloo=globalThis.webpackChunk_dashlane_leeloo||[]).push([[4459],{568314:(e,t,i)=>{i.r(t),i.d(t,{CredentialEditPanel:()=>Be});var n,a=i(15192),s=i(799852),r=i(995445),l=i(133354),o=i(970433),d=i(339431),c=i(261582),p=i(713252),u=i(846097),_=i(569029),m=i(718108),h=i(466424),g=i(692077),b=i(37336),k=i(830894),S=i(696832),w=i(526849),x=i(914662),y=i(482598),f=i(762048),C=i(514900),v=i(396124),I=i(386342),Z=i(86498),D=i(488203),L=i(806697),A=i(73875),P=i(63520),E=i(682994),T=i(133659),U=i(762042),B=i(99822),R=i(384885),q=i(555449),V=i(810291),z=i(696397),W=i(760790),N=i(117534),X=i(659035),G=i(684985),O=i(468037),F=i(528835);const M=S.memo((({credential:e,onClose:t,openWithNewUrlField:i,onUpdateLinkedWebsitesAddedByUser:a,hasLimitedRights:s,dashlaneDefinedLinkedWebsites:r})=>{const{translate:l}=(0,D.Z)(),[o,d]=S.useState(e.linkedURLs),[c,p]=S.useState(i);return S.useEffect((()=>{const t=e.linkedURLs,i=!(t.length===o.length&&t.every(((e,t)=>o[t]===e)));p(i),a(o)}),[o]),(0,F.BX)("div",{"data-testid":"linked-websites-tab",children:[(0,F.tZ)(X.zx,{"data-testid":"back-button",layout:"iconLeading",mood:"neutral",intensity:"supershy",onClick:t,icon:n||(n=(0,F.tZ)(X.JO,{name:"ArrowLeftOutlined"})),children:l("webapp_credential_linked_websites_title")}),(0,F.tZ)(O.u,{title:l("webapp_credential_linked_websites_section_primary"),description:l("webapp_credential_linked_websites_section_primary_description"),additionalSx:{marginTop:"24px"},children:(0,F.tZ)(G.a,{linkedWebsitesList:[e.URL],areItemsLocked:s,credentialId:e.id,isEditing:!1})}),(0,F.tZ)(O.u,{title:l("webapp_credential_linked_websites_section_added_by_user"),additionalSx:{marginTop:"16px"},children:(0,F.tZ)(G.a,{linkedWebsitesList:o,areItemsLocked:s,credentialId:e.id,isListEditable:!s,isEditing:c,showUrlProtocol:!0,updateLinkedWebsitesList:d})}),r&&r.length>1?(0,F.tZ)(O.u,{title:l("webapp_credential_linked_websites_section_added_by_dashlane"),description:l("webapp_credential_linked_websites_section_added_by_dashlane_description"),additionalSx:{marginTop:"16px"},children:(0,F.tZ)(G.a,{linkedWebsitesList:r,areItemsLocked:!0,credentialId:e.id,isEditing:!1})}):null]})})),H=({onClose:e,setDisplayLinkedWebsitesDataSavedAlert:t})=>{const{translate:i}=(0,D.Z)();return(0,S.useRef)(null).current=window.setTimeout((()=>t(!1)),5e3),(0,F.tZ)(C.YcA,{children:(0,F.tZ)(C.bZj,{size:C.k3y.SMALL,severity:C.BLW.SUCCESS,closeIconName:i("_common_alert_dismiss_button"),onClose:e,children:i("_common_toast_changes_saved")})})};var j=i(717676);const K=({onCancel:e,onLeavePageWithoutSaving:t})=>{const{translate:i}=(0,D.Z)();return(0,F.tZ)(j.o,{isOpen:!0,showCloseIcon:!0,title:i("webapp_credential_linked_websites_discard_dialog_title"),onRequestClose:e,footer:(0,F.BX)(X.kC,{justifyContent:"end",gap:"8px",children:[(0,F.tZ)(C.zxk,{type:"button",nature:"secondary",onClick:e,children:i("webapp_credential_linked_websites_discard_dialog_cancel")}),(0,F.tZ)(C.zxk,{type:"button",onClick:t,children:i("webapp_credential_linked_websites_discard_dialog_discard")})]}),children:(0,F.tZ)(X.kC,{flexDirection:"column",gap:"8px",sx:{width:"576px"},children:(0,F.tZ)(C.nvN,{children:i.markup("webapp_credential_linked_websites_discard_dialog_description_markup")})})})},J=({duplicateData:e,onCancel:t,onSave:i})=>{const{translate:n}=(0,D.Z)(),a=e.length>1,s=a?n("webapp_credential_linked_websites_duplicate_prevention_dialog_title_multiple"):n("webapp_credential_linked_websites_duplicate_prevention_dialog_title_one",{url:e[0].linkedWebsite}),r=a?n("webapp_credential_linked_websites_duplicate_prevention_dialog_description_multiple"):n("webapp_credential_linked_websites_duplicate_prevention_dialog_description_one",{credentialName:e[0].credentialName}),l=n(a?"webapp_credential_linked_websites_duplicate_prevention_dialog_add_websites_multiple":"webapp_credential_linked_websites_duplicate_prevention_dialog_add_websites_one");return(0,F.tZ)(j.o,{isOpen:!0,showCloseIcon:!0,title:s,onRequestClose:t,footer:(0,F.BX)(X.kC,{justifyContent:"end",gap:"8px",children:[(0,F.tZ)(C.zxk,{type:"button",nature:"secondary",onClick:t,children:n("webapp_credential_linked_websites_duplicate_prevention_dialog_cancel")}),(0,F.tZ)(C.zxk,{type:"button",onClick:i,children:l})]}),children:(0,F.BX)("div",{children:[(0,F.tZ)("p",{children:r}),a?(0,F.tZ)("ul",{className:"duplicatesList--SwGmL5ftwe",children:e.map((e=>(0,F.tZ)("li",{className:"duplicateItem--mPX5urdfL2",children:e.linkedWebsite},e.linkedWebsite)))}):null]})})};var Y=i(740300);const $="webapp_password_history_detailed_password_view_button",Q=({credentialId:e})=>{const{translate:t}=(0,D.Z)(),{routes:i}=(0,g.Xo)(),n=i.userPasswordHistoryFilteredByCredential(e),[a,s]=(0,S.useState)(!1);return(0,S.useEffect)((()=>{Y.C.getHasPasswordHistory(e).then((e=>{e&&s(!0)}))}),[e]),a?(0,F.tZ)("div",{children:(0,F.tZ)(g.rU,{to:n,tabIndex:-1,children:(0,F.tZ)(X.zx,{mood:"neutral",intensity:"supershy",title:t($),icon:"HistoryBackupOutlined",layout:"iconLeading",children:t($)})})}):null};var ee=i(72133),te=i(924058),ie=i(168754),ne=i(671738),ae=i(139632);const se={exit:"exit--p4spwlkedE",exitActive:"exitActive--BIpaDF7MkX",exitDone:"exitDone--KzowOK4h4K",appear:"appear--OcvlWdq5He",appearActive:"appearActive--HVwCcEJzKz",appearDone:"appearDone--KgBJPzbyTA"},re=S.memo((({onPrimaryClick:e})=>{const{translate:t}=(0,D.Z)(),[i,n]=S.useState(!1);return(0,F.tZ)(ae.Z,{appear:!0,in:!i,timeout:600,classNames:se,onExited:e,children:(0,F.tZ)("div",{sx:{backgroundColor:"ds.background.default",marginBottom:"24px"},children:(0,F.tZ)(X.ke,{title:t("webapp_credential_edition_health_box_excluded_title"),description:t("webapp_credential_edition_health_box_excluded_description"),mood:"warning",size:"large",actions:[(0,F.tZ)(X.zx,{mood:"brand",intensity:"quiet",onClick:e=>{e.preventDefault(),n(!0)},size:"small",type:"button",children:t("webapp_credential_edition_health_box_include")},"primaryAction")]})})})}));var le=i(920987),oe=i(365580);const de={appear:"appear--MMCjEcRU3u",appearActive:"appearActive--LG103cUrNZ",appearDone:"appearDone--tuYaN3WTGO"},ce=S.memo((({onPrimaryClick:e,onSecondaryClick:t,isLimitedSharingPassword:i,corruptionData:n})=>{const{translate:a}=(0,D.Z)();if(!n)return null;const s=((e,t)=>{const{riskType:i}=e;switch(i){case le.gI.Compromised:return{title:t("webapp_credential_edition_health_box_compromised_title"),description:t("webapp_credential_edition_health_box_compromised_description"),secondary:t("webapp_credential_edition_health_box_view_compromised")};case le.gI.Reused:return{title:t("webapp_credential_edition_health_box_reused_title"),description:t.markup("webapp_credential_edition_health_box_reused_description_markup",{count:e.reuseCount}),secondary:t("webapp_credential_edition_health_box_view_reused")};case le.gI.Weak:return{title:t("webapp_credential_edition_health_box_weak_title"),description:t("webapp_credential_edition_health_box_weak_description"),secondary:t("webapp_credential_edition_health_box_view_weak")};default:return(0,oe.U)(i)}})(n,a),r=n.severity===le.bp.STRONG?"warning":"brand";return(0,F.tZ)(ae.Z,{in:!0,appear:!0,timeout:600,classNames:de,children:(0,F.tZ)("div",{sx:{position:"relative",backgroundColor:"ds.background.default",marginBottom:"24px"},children:(0,F.tZ)(X.ke,{title:s.title,description:s.description,mood:r,size:"large",actions:[(0,F.tZ)(X.zx,{onClick:t,intensity:"quiet",size:"small",children:s.secondary},"view_health"),(0,F.tZ)(C.ua7,{passThrough:!i,content:a("webapp_credential_edition_health_box_change_limited"),placement:"left",sx:{maxWidth:"312px",fontSize:2},children:(0,F.tZ)(X.zx,{size:"small",onClick:e,disabled:i,children:a("webapp_credential_edition_health_box_change_password")})},"change_password")]})})})})),pe=JSON.parse('{"v":"5.7.0","fr":30,"ip":0,"op":26,"w":240,"h":240,"nm":"Loading Light Theme","ddd":0,"assets":[],"layers":[{"ddd":0,"ind":1,"ty":3,"nm":"Null 4","sr":1,"ks":{"o":{"a":0,"k":0,"ix":11},"r":{"a":0,"k":0,"ix":10},"p":{"a":0,"k":[120,122,0],"ix":2},"a":{"a":0,"k":[0,0,0],"ix":1},"s":{"a":0,"k":[100,100,100],"ix":6}},"ao":0,"ip":0,"op":150,"st":0,"bm":0},{"ddd":0,"ind":2,"ty":4,"nm":"load","parent":1,"sr":1,"ks":{"o":{"a":0,"k":100,"ix":11},"r":{"a":0,"k":0,"ix":10},"p":{"a":0,"k":[0,151,0],"ix":2},"a":{"a":0,"k":[0,0,0],"ix":1},"s":{"a":0,"k":[250,250,100],"ix":6}},"ao":0,"shapes":[{"ty":"gr","it":[{"d":1,"ty":"el","s":{"a":0,"k":[88,88],"ix":2},"p":{"a":0,"k":[0,0],"ix":3},"nm":"Ellipse Path 1","mn":"ADBE Vector Shape - Ellipse","hd":false},{"ty":"st","c":{"a":0,"k":[0.05490196078,0.2078431373,0.2392156863,1],"ix":3},"o":{"a":0,"k":100,"ix":4},"w":{"a":0,"k":6,"ix":5},"lc":1,"lj":1,"ml":4,"bm":0,"nm":"Stroke 1","mn":"ADBE Vector Graphic - Stroke","hd":false},{"ty":"tr","p":{"a":0,"k":[0.5,-60.5],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Ellipse 1","np":3,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false},{"ty":"tm","s":{"a":0,"k":0,"ix":1},"e":{"a":1,"k":[{"i":{"x":[0.667],"y":[1]},"o":{"x":[0.167],"y":[0.167]},"t":0,"s":[10]},{"i":{"x":[0.833],"y":[0.833]},"o":{"x":[0.333],"y":[0]},"t":12.5,"s":[42]},{"t":25,"s":[10]}],"ix":2},"o":{"a":1,"k":[{"i":{"x":[0.833],"y":[0.833]},"o":{"x":[0.2],"y":[0]},"t":0,"s":[-19]},{"t":25,"s":[341]}],"ix":3},"m":1,"ix":2,"nm":"Trim Paths 1","mn":"ADBE Vector Filter - Trim","hd":false}],"ip":0,"op":106.197876042479,"st":0,"bm":0},{"ddd":0,"ind":3,"ty":4,"nm":"load 2","parent":1,"sr":1,"ks":{"o":{"a":0,"k":100,"ix":11},"r":{"a":0,"k":0,"ix":10},"p":{"a":0,"k":[0,151,0],"ix":2},"a":{"a":0,"k":[0,0,0],"ix":1},"s":{"a":0,"k":[250,250,100],"ix":6}},"ao":0,"shapes":[{"ty":"gr","it":[{"d":1,"ty":"el","s":{"a":0,"k":[88,88],"ix":2},"p":{"a":0,"k":[0,0],"ix":3},"nm":"Ellipse Path 1","mn":"ADBE Vector Shape - Ellipse","hd":false},{"ty":"st","c":{"a":0,"k":[0.9058823529,0.9215686275,0.9254901961,1],"ix":3},"o":{"a":0,"k":100,"ix":4},"w":{"a":0,"k":6,"ix":5},"lc":2,"lj":1,"ml":4,"bm":0,"nm":".","mn":"ADBE Vector Graphic - Stroke","hd":false},{"ty":"tr","p":{"a":0,"k":[0.5,-60.5],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Ellipse 1","np":3,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false}],"ip":0,"op":106.197876042479,"st":0,"bm":0}],"markers":[]}'),ue=({credentialId:e,isShared:t,hasLimitedPermission:i})=>{const n=(0,g.k6)(),{routes:a}=(0,g.Xo)(),{updateIsCredentialExcluded:r}=(0,te.$)(),{healthData:l}=(e=>{const{data:t}=(0,s.k)(ie.d,"credentialHealthData",{credentialId:e});return{healthData:t}})(e),[o,d]=(0,S.useState)(null);return null===l?null:l?(0,F.BX)("div",{sx:{position:"relative"},children:[o?(0,F.tZ)(ne.R,{credentialId:o,dismissCallback:()=>d(null)}):null,l.excluded?(0,F.tZ)(re,{onPrimaryClick:()=>{r(e,!1)}}):(0,F.tZ)(ce,{onPrimaryClick:t=>{t.preventDefault(),d(e)},onSecondaryClick:e=>{e.preventDefault(),n.push(a.userPasswordHealth)},isLimitedSharingPassword:t&&i,corruptionData:l.corruptionData})]}):(0,F.tZ)("div",{sx:{marginBottom:"24px"},children:(0,F.tZ)("div",{sx:{display:"flex",justifyContent:"center"},children:(0,F.tZ)(ee.Z,{height:24,width:24,animationParams:{renderer:"svg",loop:!0,autoplay:!0,animationData:pe}})})})};var _e=i(164718),me=i(285473),he=i(626555),ge=i(662667),be=i(979808);const{SHARED_ACCESS:ke,ACCOUNT_DETAILS:Se}=ge.CredentialTabs,we=({credential:e,displayTabs:t,changeTab:i})=>{const{translate:n}=(0,D.Z)(),{data:a,status:s}=(0,be.r)(e.id),r=s===l.rq.Success?a?.count:0,o=[{id:"tab-credential-detail",contentId:"content-credential-detail",title:n("webapp_credential_edition_account_details"),onSelect:()=>i(Se)},{id:"tab-credential-shared-access",contentId:"content-credential-shared-access",title:`${n("webapp_credential_edition_shared_access")} (${r})`,onSelect:()=>i(ke)}];return(0,F.tZ)(P.V9,{icon:(0,F.tZ)(he.h,{title:e.itemName,size:me.o.LARGE,domain:new _e.Y(e.URL).getRootDomain()}),title:e.itemName,tabs:t?o:void 0})};var xe=i(245636),ye=i(6538),fe=i(397855);const Ce=({rank:e,content:t,title:i})=>(0,F.BX)(C.T5p,{as:"li",gap:"16px",gridTemplateColumns:"35px 1fr",alignItems:"center",justifyContent:"flex-start",sx:{width:"100%",padding:"6px 0"},children:[(0,F.tZ)(C.dDn,{alignSelf:"flex-start",children:(0,F.tZ)(fe.m,{rank:e})}),(0,F.BX)(C.dDn,{children:[(0,F.tZ)(X.nv,{sx:{a:{color:"ds.text.brand.standard"},"a:hover":{color:"ds.text.brand.standard",textDecoration:"underline"}},color:"ds.text.neutral.catchy",textStyle:"ds.title.block.medium",children:i}),t?(0,F.tZ)(X.nv,{color:"ds.text.neutral.quiet",textStyle:"ds.body.standard.regular",children:t}):null]})]});var ve;const Ie=({credentialId:e,title:t,url:i,setHasDataBeenModified:n,onClose:a,onSubmit:s})=>{const{translate:r}=(0,D.Z)(),[o,d]=(0,S.useState)(""),c=(0,xe.v6)(o),{setupOtpCode:p}=(()=>{const{setupOtpCodeForCredential:e}=(0,y.u)(ye.i);return{setupOtpCode:async(t,i)=>{try{return await e({credentialId:t,otpUrl:i}),!0}catch{return!1}}}})(),{showToast:u}=(0,X.pm)(),_=!!o&&c.status===l.rq.Error,m=c.status!==l.rq.Success;return(0,F.BX)("div",{"data-testid":"linked-websites-tab",children:[(0,F.tZ)(X.zx,{"data-testid":"back-button",layout:"iconLeading",mood:"neutral",intensity:"supershy",size:"large",onClick:a,icon:ve||(ve=(0,F.tZ)(X.JO,{name:"ArrowLeftOutlined"})),children:(0,F.tZ)(X.nv,{textStyle:"ds.title.section.medium",color:"ds.text.neutral.catchy",children:r("webapp_credential_otp_setup_sublevel_header")})}),(0,F.BX)(O.u,{additionalSx:{marginTop:"16px"},children:[(0,F.BX)(X.kC,{as:"ol",gap:"16px",children:[(0,F.tZ)(X.X6,{as:"h3",textStyle:"ds.title.supporting.small",color:"ds.text.neutral.quiet",children:r("webapp_credential_otp_setup_title")}),(0,F.tZ)(Ce,{rank:1,content:r("webapp_credential_otp_setup_step1_description"),title:r.markup("webapp_credential_otp_setup_step1_title_markup",{title:t,url:i},{linkTarget:"_blank"})},"2fa-settings"),(0,F.tZ)(Ce,{rank:2,content:r("webapp_credential_otp_setup_step2_description"),title:r("webapp_credential_otp_setup_step2_title")},"2fa-turn-on"),(0,F.tZ)(Ce,{rank:3,content:r("webapp_credential_otp_setup_step3_description"),title:r("webapp_credential_otp_setup_step3_title")},"enter-setup-code")]}),(0,F.BX)(X.kC,{sx:{mt:"16px",backgroundColor:"ds.container.agnostic.neutral.quiet",padding:"16px",borderRadius:"8px"},gap:"8px",flexDirection:"column",children:[(0,F.tZ)(X.Kx,{error:_,feedback:_?r("webapp_credential_otp_setup_incorrect_setup_code_error"):"",label:r("webapp_credential_otp_setup_code_label"),onChange:e=>{e.preventDefault(),e.stopPropagation(),n(!0),d(e.target.value)}}),(0,F.tZ)(X.zx,{fullsize:!0,onClick:async()=>{c.status===l.rq.Success&&(await p(e,c.data.url)?(s(),u({description:r("webapp_credential_otp_code_success_toast")})):u({mood:"danger",description:r("_common_generic_error")}))},disabled:m,tooltip:r("webapp_credential_otp_setup_submit_button_disabled_tooltip"),children:r("webapp_credential_otp_setup_submit_button")})]})]}),(0,F.tZ)(X.ke,{sx:{mt:"16px"},title:r("webapp_credential_otp_code_cant_find_code_title"),description:r("webapp_credential_otp_code_cant_find_code_description")})]})},Ze=()=>{const{translate:e}=(0,D.Z)();return(0,F.tZ)("div",{sx:{position:"relative",backgroundColor:"ds.background.default",marginBottom:"24px"},children:(0,F.tZ)(X.ke,{title:e("webapp_credential_edition_frozen_limited_rights_title"),description:e("webapp_credential_edition_frozen_limited_rights_description"),mood:"warning",size:"medium"})})};var De;const{SHARED_ACCESS:Le,ACCOUNT_DETAILS:Ae,LINKED_WEBSITES:Pe,OTP_SETUP:Ee}=ge.CredentialTabs,Te=({location:e,activeSpaces:t,credential:i,credentialPreferences:n,onClose:a,protectedItemsUnlockerShown:s,dashlaneDefinedLinkedWebsites:r,areProtectedItemsUnlocked:l,openProtectedItemsUnlocker:c,isShared:m,isAdmin:h,isSharedViaUserGroup:b,isItemInCollection:k,isLastAdmin:X})=>{const{translate:G}=(0,D.Z)(),{routes:O}=(0,g.Xo)(),j=(0,Z.V)(),Y=(()=>{const{updateLinkedWebsites:e}=(0,y.u)(u.G);return async(t,i)=>{e({credentialId:t,updatedLinkedWebsitesList:i})}})(),{updateVaultItem:$}=(0,y.u)(o.L),{createCollection:ee,updateCollection:te}=(0,y.u)(v.v),{addItemsToCollections:ie,removeItemFromCollections:ne}=(0,y.u)(f.a),{updateCredentialPreferences:ae}=(0,y.u)(_.I),{shouldShowFrozenStateDialog:se}=(0,L.Ub)(),re=(0,A.l)(),le=(0,S.createRef)(),oe=()=>{var e,t,a;return{alternativeUsername:null!=(e=i.alternativeUsername)?e:"",email:i.email,itemName:i.itemName,linkedURLs:i.linkedURLs,note:i.note,otpURL:null!=(t=i.otpURL)?t:"",otpSecret:null!=(a=i.otpSecret)?a:"",password:i.password,spaceId:i.spaceId,URL:i.URL,username:i.username,onlyAutofillExactDomain:n.onlyAutofillExactDomain,requireMasterPassword:n.requireMasterPassword,useAutoLogin:n.useAutoLogin}},[de,ce]=(0,S.useState)(oe()),[pe,_e]=(0,S.useState)((()=>{var e;const t=(0,g.CN)();return W.A0[null!=(e=t.get("tab"))?e:"account-details"]})()),[me,he]=(0,S.useState)(Ae),[ge,be]=(0,S.useState)(!1),[ke,Se]=(0,S.useState)(!1),[xe,ye]=(0,S.useState)(i.linkedURLs),[fe,Ce]=(0,S.useState)(!1),[ve,Te]=(0,S.useState)(!1),[Ue,Be]=(0,S.useState)([]),[Re,qe]=(0,S.useState)(!1),[Ve,ze]=(0,S.useState)(!1),[We,Ne]=(0,S.useState)(!1),[Xe,Ge]=(0,S.useState)(!1),[Oe,Fe]=(0,S.useState)(!1),[Me,He]=(0,S.useState)(!1),{current:je}=(0,S.useRef)({confirmDeleteConfirm:G("webapp_credential_edition_delete_confirm"),confirmDeleteDismiss:G("webapp_credential_edition_delete_dismiss"),confirmDeleteSubtitle:G("webapp_credential_edition_confirm_delete_subtitle"),confirmDeleteTitle:G("webapp_credential_edition_confirm_delete_title"),lastAdminActionLabel:G("webapp_credential_edition_change_permissions"),lastAdminTitle:G("webapp_credential_edition_last_admin_title"),lastAdminSubtitle:G("webapp_credential_edition_last_admin_subtitle"),groupSharingTitle:G("webapp_credential_edition_group_sharing_title"),groupSharingSubtitle:G("webapp_credential_edition_group_sharing_subtitle"),collectionSharingTitle:G("webapp_credential_edition_collection_sharing_title"),collectionSharingSubtitle:G("webapp_credential_edition_collection_sharing_subtitle")});if((0,S.useEffect)((()=>{(0,N.SJ)(xe,i.linkedURLs)&&be(!0)}),[xe,i.linkedURLs]),(0,S.useEffect)((()=>{pe===Ae&&ce(oe())}),[pe]),(0,S.useEffect)((()=>{const{onlyAutofillExactDomain:e,requireMasterPassword:t,useAutoLogin:i,...n}=de,{onlyAutofillExactDomain:a,requireMasterPassword:s,useAutoLogin:r,...l}=oe(),o=!(0,w.equals)(de,oe());be(o),He(!(0,w.equals)(n,l))}),[de]),null===se||null===re)return null;const Ke=()=>{const e=m&&!h;return{id:i.id,forceCategorizedSpace:(0,W.UC)(i,t),isDiscontinuedUser:se,limitedPermissions:e,linkedURLs:i.linkedURLs}},Je=e=>{ge?(he(e),ze(!0)):_e(e)},Ye=()=>{ze(!1),qe(!1),Be([])},$e=()=>{_e(Ae),be(!1),Ye()},Qe=e=>{e?.preventDefault(),ge?(he(Ae),qe(!0)):$e()},et=()=>{Y(i.id,xe),Ne(!0),(0,N.Bq)(i,xe),$e()},tt=e=>!e.initiallyExisting&&!e.hasBeenDeleted,it=e=>e.initiallyExisting&&!e.hasBeenDeleted,nt=()=>{e?.state?.entity?(({routes:e,location:t})=>{t?.state?.entity?(0,R.y)(t?.state?.entity)?(0,g.uX)(e.userSharingGroupInfo(t?.state?.entity?.groupId)):(0,g.uX)(e.userSharingUserInfo(t?.state?.entity?.alias)):(0,g.uX)(e.userSharingCenter)})({routes:O,location:e}):a()},at=()=>{if(ke)return he(Ae),void ze(!0);_e(Ae)},st=ve||s,rt=re&&Ke().limitedPermissions;return(0,F.BX)(P.zI,{isUsingNewDesign:!0,isViewingExistingItem:!0,itemHasBeenEdited:ge,isSomeDialogOpen:Re||Ue.length>0||Ve||Oe||ve,onSubmit:async()=>{if(pe===Pe)return void(async()=>{const e=await(0,N.wb)(i,xe);Be(e),pe!==Pe||e.length||et()})();if(!le.current?.isFormValid())return;const e=le.current?.getVaultItemCollections();if(!ge||e){var t;Ge(!0),n&&de.requireMasterPassword&&de.requireMasterPassword!==n.requireMasterPassword&&(0,V.ih)(de.requireMasterPassword,i.id,i.URL,null!=(t=de.spaceId)?t:void 0);try{const{onlyAutofillExactDomain:t,useAutoLogin:a,requireMasterPassword:s,...r}=de,l=t!==n.onlyAutofillExactDomain||a!==n.useAutoLogin||s!==n.requireMasterPassword,o=[];Me&&o.push($({vaultItemType:d.U.Credential,content:r,id:i.id,shouldSkipSync:!!l})),l&&o.push(ae({credentialId:i.id,credentialUrl:i.URL,onlyAutofillExactDomain:t,useAutoLogin:a,requireMasterPassword:s,shouldSkipSync:e?.some((e=>e.isShared&&!it(e)))})),e&&o.push((async(e,t,i)=>{const n=[],a=[];for(const r of t){var s;it(r)||(r.isShared?tt(r)?n.push({collectionId:r.id,permission:null!=(s=r.itemPermission)?s:p.y3.Limited}):a.push(r.id):(r.vaultItems=[{id:e,type:x.dJ.KWAuthentifiant,url:i}],r.id?await te({id:r.id,collection:r,operationType:r.hasBeenDeleted?I.C.SUBSTRACT_VAULT_ITEMS:I.C.APPEND_VAULT_ITEMS}):await ee({content:r})))}n.length&&await ie({collectionPermissions:n,itemIds:[e],shouldSkipSync:a.length>0}),a.length&&await ne({collectionIds:a,itemId:e})})(i.id,e,i.URL)),await Promise.all(o)}catch(e){return j.showAlert(G("_common_generic_error"),C.BLW.ERROR),void a()}j.showAlert(G("_common_toast_changes_saved"),C.BLW.SUCCESS),a()}},secondaryActions:pe===Pe?[]:[(0,F.tZ)(Q,{credentialId:i.id},"pwhist"),(0,F.tZ)(U._,{id:i.id,isShared:m,isAdmin:h,isDiscontinuedUser:se,getSharing:B.Ei},"shareaction")],onNavigateOut:(e,t)=>{pe!==Pe?pe!==Ee?nt():at():Qe(t)},onClickDelete:()=>Te(!0),withoutDeleteButton:pe===Pe,withoutConfirmationDialog:pe===Pe,withoutCloseButton:pe===Ee,ignoreCloseOnEscape:st,formId:"edit_credential_panel",submitPending:Xe,header:(0,F.tZ)(we,{credential:i,displayTabs:m,changeTab:Je}),children:[m&&pe===Le?(0,F.tZ)("div",{"aria-labelledby":"tab-credential-shared-access",id:"content-credential-shared-access",children:(0,F.tZ)(q.u,{isAdmin:h,id:i.id})}):null,pe===Ae?(0,F.BX)("div",{sx:{flex:1,flexDirection:"column",position:"relative"},"aria-labelledby":"tab-credential-detail",id:"content-credential-detail",children:[rt?De||(De=(0,F.tZ)(Ze,{})):(0,F.tZ)(ue,{credentialId:i.id,isShared:m,hasLimitedPermission:!h}),(0,F.tZ)("div",{sx:{overflowY:"initial",overflowX:"visible"},children:(0,F.tZ)(z.S,{ref:le,activeSpaces:t,editableValues:de,setEditableValues:ce,readonlyValues:Ke(),signalEditedValues:e=>{be(e)},dashlaneDefinedLinkedWebsites:r,areProtectedItemsUnlocked:l,openProtectedItemsUnlocker:c,protectedItemsUnlockerShown:s,onClickAddNewWebsite:()=>(Ce(!0),void Je(Pe)),onClickSetup2FAToken:()=>{Je(Ee)},setHasOpenedDialogs:Fe})})]}):null,pe===Pe?(0,F.tZ)(M,{credential:i,dashlaneDefinedLinkedWebsites:r,onClose:Qe,openWithNewUrlField:fe,onUpdateLinkedWebsitesAddedByUser:ye,hasLimitedRights:m&&!h}):null,pe===Ee?(0,F.tZ)(Ie,{credentialId:i.id,title:i.itemName,url:i.URL,onClose:at,onSubmit:()=>{Se(!1),_e(Ae)},setHasDataBeenModified:Se}):null,(0,F.tZ)(E.s,{isVisible:ve,itemId:i.id,closeConfirmDeleteDialog:()=>Te(!1),goToSharingAccess:()=>{Je(Le)},onDeletionSuccess:nt,isShared:m,isSharedViaUserGroup:b,translations:je,vaultItemType:d.U.Credential,isLastAdmin:X,isItemInCollection:k}),Re?(0,F.tZ)(K,{onCancel:()=>qe(!1),onLeavePageWithoutSaving:$e}):null,Ue.length>0?(0,F.tZ)(J,{duplicateData:Ue,onCancel:()=>Be([]),onSave:et}):null,Ve?(0,F.tZ)(T.a,{onDismissClick:()=>ze(!1),onConfirmClick:()=>{_e(me),be(!1),Se(!1),Ye()}}):null,We?(0,F.tZ)(H,{onClose:()=>Ne(!1),setDisplayLinkedWebsitesDataSavedAlert:Ne}):null]})},Ue=e=>{const{credential:t}=e,i=(0,m.E)(),n=(0,k.tY)(),a=(0,h.B)([t.id]),o=(0,s.k)(u.G,"getDashlaneDefinedLinkedWebsites",{url:t.URL}),d=(0,s.k)(_.I,"getPreferencesForCredentials",{credentialIds:[t.id]}),{getPermissionForItem:g,getSharingStatusForItem:b,getIsLastAdminForItem:S}=(0,r.Y)(c.X,{getPermissionForItem:{queryParam:{itemId:t.id}},getSharingStatusForItem:{queryParam:{itemId:t.id}},getIsLastAdminForItem:{queryParam:{itemId:t.id}}},[]);if(d.status!==l.rq.Success||o.status!==l.rq.Success||g.status!==l.rq.Success||b.status!==l.rq.Success||i.status!==l.rq.Success||S.status!==l.rq.Success)return null;const{isShared:w,isSharedViaUserGroup:x}=b.data,{isLastAdmin:y}=S.data,f=!!a.length;return(0,F.tZ)(Te,{...e,...n,activeSpaces:i.data,dashlaneDefinedLinkedWebsites:o.data,credentialPreferences:d.data[0],isShared:w,isAdmin:w&&g.data.permission===p.y3.Admin,isSharedViaUserGroup:x,isItemInCollection:f,isLastAdmin:y})},Be=e=>{const{data:t,status:i}=(0,s.k)(o.L,"query",{vaultItemTypes:[d.U.Credential],ids:[`{${e.match.params.uuid}}`]}),{routes:n}=(0,g.Xo)();return i===l.rq.Loading?null:t?.credentialsResult.items.length?(0,F.tZ)(Ue,{...e,credential:t.credentialsResult.items[0]}):e.location?.state?(0,F.tZ)(a.l_,{to:(0,b.rF)(e.location?.state,n)}):(0,F.tZ)(a.l_,{to:n.userCredentials})}},682994:(e,t,i)=>{i.d(t,{s:()=>m}),i(696832);var n=i(659035),a=i(482598),s=i(133354),r=i(970433),l=i(488203);let o=function(e){return e.LastAdmin="LastAdmin",e.GroupSharing="GroupSharing",e.CollectionSharing="CollectionSharing",e.Generic="Generic",e}({});var d=i(365580),c=i(528835);const p=({reason:e,translations:t,goToSharingAccess:i,closeCantDeleteDialog:a})=>{const{translate:s}=(0,l.Z)(),r=((e,t)=>{const{groupSharingTitle:i,lastAdminTitle:n,collectionSharingTitle:a,genericErrorTitle:s}=e;switch(t){case o.LastAdmin:return n;case o.GroupSharing:return i;case o.CollectionSharing:return a;case o.Generic:return s;default:return(0,d.U)(t)}})(t,e),p=((e,t)=>{const{groupSharingSubtitle:i,lastAdminSubtitle:n,collectionSharingSubtitle:a,genericErrorSubtitle:s}=e;switch(t){case o.LastAdmin:return n;case o.GroupSharing:return i;case o.CollectionSharing:return a;case o.Generic:return s;default:return(0,d.U)(t)}})(t,e);return(0,c.tZ)(n.Vq,{isOpen:!0,onClose:a,title:null!=r?r:"",closeActionLabel:s("_common_dialog_dismiss_button"),actions:e===o.LastAdmin||o.GroupSharing||o.CollectionSharing?{primary:{children:t.lastAdminActionLabel,onClick:()=>{i(),a()}}}:void 0,children:p})};var u=i(837527);const _=({closeConfirmDeleteDialog:e,onDeleteConfirm:t,translations:i})=>{const{translate:a}=(0,l.Z)(),{confirmDeleteSubtitle:s,confirmDeleteTitle:r,confirmDeleteDismiss:o,confirmDeleteConfirm:d}=i;return(0,c.tZ)(n.Vq,{title:r,onClose:e,isOpen:!0,dialogClassName:u.Ht,closeActionLabel:a("_common_dialog_dismiss_button"),isDestructive:!0,actions:{primary:{children:d,onClick:t,id:"deletion-dialog-confirm-button"},secondary:{children:o,onClick:e,autoFocus:!0,id:"deletion-dialog-dismiss-button"}},children:s})},m=({closeConfirmDeleteDialog:e,goToSharingAccess:t,isVisible:i,itemId:d,onDeletionSuccess:u,sharingStatus:m,translations:h,vaultItemType:g,isShared:b,isSharedViaUserGroup:k,isItemInCollection:S,isLastAdmin:w})=>{const{showToast:x}=(0,n.pm)(),{translate:y}=(0,l.Z)(),{deleteVaultItems:f}=(0,a.u)(r.L);if(!i)return null;let C;return(b||m?.isShared)&&(k&&(C=o.GroupSharing),w&&(C=o.LastAdmin),S&&(C=o.CollectionSharing)),C&&t?(0,c.tZ)(p,{reason:C,translations:h,goToSharingAccess:t,closeCantDeleteDialog:e}):(0,c.tZ)(_,{closeConfirmDeleteDialog:e,onDeleteConfirm:async()=>{try{var e;(await f({ids:[d],vaultItemType:g})).tag===s.rq.Success?(x({description:null!=(e=h.deleteSuccessToast)?e:y("webapp_personal_info_edition_delete_success_toast")}),u()):x({description:y("_common_generic_error"),mood:"danger",isManualDismiss:!0})}catch(e){x({description:y("_common_generic_error"),mood:"danger",isManualDismiss:!0})}},translations:h})}},762042:(e,t,i)=>{i.d(t,{_:()=>o});var n=i(521877),a=i(488203),s=i(301639),r=i(528835);const l=({sharing:e})=>{const{translate:t}=(0,a.Z)();return(0,r.tZ)(s.Z,{tooltipPlacement:"top-start",sharing:e,text:t("webapp_sharing_invite_share"),origin:n.Origin.ItemDetailView})},o=({id:e,isShared:t,isAdmin:i,isDiscontinuedUser:n,getSharing:a})=>t&&!i||n?null:(0,r.tZ)(l,{sharing:a(e)})},979808:(e,t,i)=>{i.d(t,{r:()=>s});var n=i(799852),a=i(261582);const s=e=>(0,n.k)(a.X,"sharedAccessForItem",{itemId:e})},555449:(e,t,i)=>{i.d(t,{u:()=>L});var n,a,s=i(696832),r=i(514900),l=i(482598),o=i(133354),d=i(762048),c=i(261582),p=i(713252),u=i(287279),_=i(488203),m=i(343194),h=i(448263),g=i(659035),b=i(232814),k=i(904967),S=i(873670),w=i(989572),x=i(58037),y=i(528835);const f=({cancelStatus:e,vaultItemId:t,setCancelStatus:i,recipientId:d})=>{const{translate:u}=(0,_.Z)(),m=e===h.V.Loading,b={type:p.IP.User,alias:d},{revokeSharedItem:k}=(0,l.u)(c.X);(0,s.useEffect)((()=>{let t;return e===h.V.Failure&&(t=window.setTimeout((()=>i(null)),2e3)),()=>{clearTimeout(t)}}),[e,i]);const S=e?()=>i(null):()=>i(h.V.Confirm);return e===h.V.Failure?(0,y.BX)("div",{sx:{color:"ds.text.danger.standard",display:"flex",alignItems:"center"},children:[n||(n=(0,y.tZ)(r.aNP,{color:"ds.text.danger.standard"})),"Â ",u("webapp_shared_access_cancel_failure")]}):(0,y.BX)("div",{children:[(0,y.tZ)(g.zx,{intensity:e?"quiet":"supershy",disabled:m,onClick:S,size:"small",children:u(e?"webapp_shared_access_cancel":"webapp_shared_access_cancel_invitation")}),e?(0,y.tZ)(g.zx,{mood:"danger",intensity:"catchy",sx:{ml:"16px"},disabled:m,size:"small",onClick:()=>(async()=>{i(h.V.Loading);const e=await(async()=>{try{return(await k({vaultItemId:t,recipient:b})).tag===o.rq.Success}catch(e){return!1}})();i(e?h.V.Success:h.V.Failure)})(),children:m?a||(a=(0,y.tZ)(r.HoD,{})):u("webapp_shared_access_confirm")}):null]})};var C;const v=({vaultItemId:e,onUserSelected:t,openEditPermissionsDialog:i,member:n,isAdmin:a})=>{const[r,l]=(0,s.useState)(null),o=(0,x.j)()?.login,{translate:d}=(0,_.Z)();if(r===h.V.Success)return null;const{permission:c,status:u,recipientType:m}=n,v=o===n.recipientId,I=a&&o!==n.recipientId,Z="pending"===u?(0,y.tZ)(f,{recipientId:n.recipientId,vaultItemId:e,cancelStatus:r,setCancelStatus:l}):(0,y.tZ)(S.M,{disabled:!a,icon:"ActionEditOutlined",layout:"iconLeading",intensity:"supershy",onClick:()=>{t&&t(n.recipientId),i(n,c,m)},content:d("webapp_sharing_collection_access_description_tooltip"),tooltipSx:{textWrap:"wrap",maxWidth:"240px"},size:"small",children:d("webapp_shared_access_edit_permissions")});return(0,y.tZ)("li",{sx:{alignItems:"center",display:"flex",minHeight:"48px",position:"relative"},children:(0,y.tZ)(k.r,{infoAction:I?Z:null,logo:n.recipientType===p.IP.Group?C||(C=(0,y.tZ)(w.Z,{})):(0,y.tZ)(b.q,{email:n.recipientName,size:36}),title:n.recipientName,permissionBadge:(0,y.tZ)(g.Ct,{mood:"admin"===c?"brand":"danger",label:d("admin"===c?"webapp_sharing_permissions_full_rights":"webapp_sharing_permissions_limited_rights")}),disabled:r===h.V.Loading,titleLogo:v?(0,y.tZ)(g.Ct,{label:d("webapp_shared_access_you_badge").toUpperCase(),layout:"labelOnly",sx:{marginLeft:"4px"}}):null})},n.recipientId)};var I=i(979808),Z=i(468037),D=i(814341);const L=({id:e,isAdmin:t})=>{const{translate:i}=(0,_.Z)(),[n,a]=(0,s.useState)(!1),[g,b]=(0,s.useState)(null),[k,S]=(0,s.useState)(void 0),{data:w,status:x}=(0,I.r)(e),{updatePermissionForCollectionItem:f,removeItemFromCollections:C}=(0,l.u)(d.a),{revokeSharedItem:L,updateSharedItemPermission:A}=(0,l.u)(c.X);if(x!==o.rq.Success)return(0,y.tZ)(r.HoD,{color:"ds.container.expressive.brand.catchy.idle",size:50,sx:{alignSelf:"center",m:"20px"}});if(!w)return null;const{itemGroupId:P,users:E,groups:T,collections:U}=w,B=e=>{g&&b({...g,step:e})},R=async()=>{if(!g)return;const{recipient:t,permission:i,recipientType:n}=g;a(!0);const s="revoke"===i?await(async(t,i)=>{try{if(i===p.IP.Collection){const i=await C({collectionIds:[t.recipientId],itemId:e});return!!(0,u.d6)(i)}return(await L({vaultItemId:e,recipient:(0,D.d)(t)})).tag===o.rq.Success}catch(e){return!1}})(t,n):await(async(t,i,n)=>{try{if(n===p.IP.Collection){const e=await f({groupId:P,collection:{collectionId:t.recipientId,permission:i}});return!!(0,u.d6)(e)}return(await A({vaultItemId:e,recipient:(0,D.d)(t),permission:i})).tag===o.rq.Success}catch(e){return!1}})(t,i,n);if(s){const e="revoke"===i?h.PermissionDialogStep.RevokeSuccess:h.PermissionDialogStep.Success;B(e)}else B(h.PermissionDialogStep.Failure);a(!1)},q=(e,t,i)=>{const n={recipient:e,recipientType:i,permission:t,originPermission:t,step:h.PermissionDialogStep.Permission,name:e.recipientName};b(n)},V=T?.length>0,z=U?.length>0,W=E?.length>0,N=!(k&&E.find((e=>e.recipientId!==k&&e.permission===p.y3.Admin)))&&g?.recipient.recipientType===p.IP.User,X="collection"===g?.recipientType;return(0,y.BX)("div",{sx:{flex:"1",overflowY:"auto"},children:[(0,y.BX)("ul",{sx:{flex:"1"},children:[z?(0,y.tZ)(Z.u,{title:i("webapp_shared_access_collections"),additionalSx:{marginBottom:"16px"},children:U.map((i=>(0,y.tZ)(v,{isAdmin:t,member:i,vaultItemId:e,openEditPermissionsDialog:q},i.recipientId)))}):null,V?(0,y.tZ)(Z.u,{title:i("webapp_shared_access_groups_card_title"),additionalSx:{marginBottom:"16px"},children:T.map((i=>(0,y.tZ)(v,{isAdmin:t,member:i,vaultItemId:e,openEditPermissionsDialog:q},i.recipientId)))}):null,W?(0,y.tZ)(Z.u,{title:i("webapp_shared_access_individuals_card_title"),children:E.map((i=>(0,y.tZ)(v,{isAdmin:t,member:i,onUserSelected:e=>S(e),vaultItemId:e,openEditPermissionsDialog:q},i.recipientId)))}):null]}),g&&(0,y.tZ)(m.E,{isOpen:!0,isCollectionItemPermission:X,shouldRevokeBeDisabled:N||void 0,loading:n,onCancelRevoke:()=>{g&&b({...g,step:h.PermissionDialogStep.Permission})},onConfirmRevoke:R,onDismiss:()=>b(null),onSelectPermission:e=>{g&&b({...g,permission:e})},onValidatePermission:()=>{"revoke"===g?.permission?b({...g,step:h.PermissionDialogStep.ConfirmRevoke}):R()},permission:g.permission,recipient:g.recipient,step:g.step})]})}}}]);