(self.webpackChunk_dashlane_leeloo=self.webpackChunk_dashlane_leeloo||[]).push([[1897],{78892:(e,t,n)=>{"use strict";n.d(t,{p:()=>R});var i=n(96832),o=n(95727),a=n(32519),l=n(50756),s=n(33354),r=n(45272),d=n(18108),c=n(81701),_=n(80936),u=n(44110);const p=(0,i.createContext)({}),h=(0,i.createContext)({}),m=({children:e,vaultItem:t,isAddCollectionDisabled:n,signalEditedValues:a,setHasOpenedDialogs:m,setCollectionsToUpdate:f})=>{const{vaultItemId:b,spaceId:T}=t,S=(0,d.E)(),[g,C]=(0,i.useState)(""),[I,E]=(0,i.useState)(!1),{allCollections:O}=(0,o.bA)(),x=(0,_.I)(),N=x.status===s.rq.Success&&x.isDisabled,[v,w]=(0,i.useState)((()=>""===b?[]:O.flatMap((e=>e.vaultItems.some((e=>e.id===b))?{...e,initiallyExisting:!0,hasBeenDeleted:!1}:[])))),y=(e=>""!==e&&(S.status===s.rq.Success&&S.data.length>0?S?.data:[]).some((t=>t.teamId===e)))(T)?T:"",Z=(0,i.useMemo)((()=>v.filter((e=>!e.hasBeenDeleted))),[v]),A=(0,i.useMemo)((()=>O.filter((e=>!Z.some((t=>t.id===e.id))))),[O,Z]),D=e=>{const t=e(v);f?.(t),w(t)},R={setInput:C,setIsInputVisible:E,onSubmit:(e=g,t)=>{if((e=e.trim()).length<=0)return;const n=v.findIndex((t=>t.name===e&&(N||y===t.spaceId)));if(-1===n)D((n=>{var i;const o=[...n],a=O.find((t=>t.name===e&&(N||t.spaceId===y)));return o.push({id:null!=(i=a?.id)?i:"",name:e,spaceId:y,isShared:a?.isShared,vaultItems:[],initiallyExisting:!1,hasBeenDeleted:!1,itemPermission:t}),(0,c.p)(o)}));else{const e=v[n];e.initiallyExisting&&e.hasBeenDeleted&&D((e=>{const t=[...e];return t[n].hasBeenDeleted=!1,t}))}a?.(!0),C("")},onDelete:e=>{const t=v.findIndex((t=>t.name===e));if(-1===t)return;const n=v[t];D((e=>{const i=[...e];return n.initiallyExisting?i[t].hasBeenDeleted=!0:i.splice(t,1),i})),(0,r.Nc)(l.PageView.CollectionDelete),a?.(!0)},clearVaultItemCollections:()=>D((e=>e.flatMap((e=>e.initiallyExisting?{...e,hasBeenDeleted:!0}:[]))))};return(0,u.tZ)(p.Provider,{value:{input:g,itemSpaceId:y,isInputVisible:I,filteredCollections:A,vaultItemCollections:v,vaultItemCollectionsToDisplay:Z,setHasOpenedDialogs:m,vaultItem:t,isAddCollectionDisabled:n},children:(0,u.tZ)(h.Provider,{value:R,children:e})})},f=()=>(0,i.useContext)(p),b=()=>(0,i.useContext)(h);var T,S=n(78971),g=n(13252),C=n(88203),I=n(67678),E=n(33918),O=n(71951);const x=({id:e,hasCollections:t,setHasOpenedDialogs:n,isDisabled:o=!1})=>{var l;const{translate:s}=(0,C.Z)(),r=(0,i.useRef)(null),{isInputVisible:d,itemSpaceId:c,filteredCollections:_,input:p,vaultItem:h}=f(),{vaultItemTitle:m,isSharedWithLimitedRights:x}=h,{openDialog:N,closeDialog:v}=(0,I.R)(),{setInput:w,setIsInputVisible:y,onSubmit:Z}=b(),A=(e,t)=>{Z(t,e),v(),n?.(!1),r.current?.focus()},D=()=>{v(),n?.(!1)};return d?(0,u.tZ)(a.x5,{collections:_,id:e,input:p,inputRef:r,spaceId:c,selectionAsDropdown:!0,onSubmit:e=>{const t=_.find((t=>t.name===e&&t.spaceId===c));t?.isShared&&x?(N(l||(l=(0,u.tZ)(O.Q,{onClose:D}))),n?.(!0)):t?.isShared?(N((0,u.tZ)(E.B,{onSubmit:A,onClose:D,itemTitle:m,collectionName:t.name})),n?.(!0)):A(g.y3.Admin,e)},setInput:w,onBlur:e=>{e.currentTarget.contains(e.relatedTarget)||window.setTimeout((()=>{y(!1)}),100)}}):(0,u.tZ)(S.zx,{onClick:()=>y(!0),layout:"iconLeading",intensity:"supershy",disabled:o,mood:"neutral",icon:T||(T=(0,u.tZ)(S.JO,{name:"ActionAddOutlined"})),children:s(t?"webapp_collections_input_placeholder_add_another":"webapp_collections_input_placeholder_add_new")})},N=e=>(0,u.tZ)("div",{sx:{flex:"1",display:"flex",flexDirection:"column"},...e});var v,w=n(51728);const y=({hasMultipleCollections:e,...t})=>{const{vaultItem:n}=f(),i=(0,w.b)(n.spaceId),{translate:o}=(0,C.Z)();return(0,u.tZ)("label",{sx:{display:"flex",width:"149px",justifyContent:"flex-end",fontWeight:"600",textAlign:"right"},...t,children:(0,u.BX)("span",{sx:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:[i&&(0,u.BX)(u.HY,{children:[`${i}`,v||(v=(0,u.tZ)("br",{}))]}),o(e?"webapp_credentials_header_row_category":"webapp_credential_edition_field_category")]})})},Z=e=>(0,u.tZ)("div",{sx:{display:"flex",flexDirection:"row"},...e}),A="collectionsFieldId",D=(0,i.forwardRef)((({hasLabel:e=!0},t)=>{const{vaultItemCollections:n,vaultItemCollectionsToDisplay:o,isAddCollectionDisabled:l,setHasOpenedDialogs:s}=f(),{onDelete:r,clearVaultItemCollections:d}=b(),c=o?.length>0;return(0,i.useImperativeHandle)(t,(()=>({getVaultItemCollections:()=>n,clearVaultItemCollections:d}))),(0,u.BX)(Z,{sx:{gap:"24px",alignItems:!c&&"center"},children:[e?(0,u.tZ)(y,{hasMultipleCollections:o?.length>1,htmlFor:A,sx:{marginTop:c&&"15px"}}):null,(0,u.BX)(N,{sx:{...c&&{gap:"8px",marginTop:"10px"}},children:[(0,u.tZ)(a.zT,{sx:{marginLeft:"16px"},collectionListItems:o.map((e=>(0,u.tZ)(a.cF,{children:(0,u.tZ)(a.KH,{onDismiss:()=>r(e.name),isShared:e.isShared,children:e.name})},`collections_field_li_${e.name}`)))}),(0,u.tZ)(x,{id:A,hasCollections:c,setHasOpenedDialogs:s,isDisabled:l})]})]})})),R=(0,i.forwardRef)((({vaultItem:e,isAddCollectionDisabled:t,signalEditedValues:n,setHasOpenedDialogs:i,hasLabel:a,setCollectionsToUpdate:l},s)=>{const{isCollectionsLoading:r}=(0,o.bA)();return r?null:(0,u.tZ)(m,{vaultItem:e,signalEditedValues:n,setHasOpenedDialogs:i,isAddCollectionDisabled:t,setCollectionsToUpdate:l,children:(0,u.tZ)(D,{ref:s,hasLabel:a})})}))},20684:(e,t,n)=>{"use strict";n.d(t,{P:()=>o});var i=n(5465);const o=async e=>await i.C.clearSecureFileState(null!=e?e:"")},86541:(e,t,n)=>{"use strict";n.d(t,{SecureNoteTabs:()=>i});let i=function(e){return e[e.CONTENT=0]="CONTENT",e[e.DOCUMENT_STORAGE=1]="DOCUMENT_STORAGE",e[e.MORE_OPTIONS=2]="MORE_OPTIONS",e[e.SHARED_ACCESS=3]="SHARED_ACCESS",e}({})},32870:(e,t,n)=>{"use strict";n.d(t,{h:()=>y});var i=n(14900),o=n(96832),a=n(83849),l=n.n(a),s=n(65580);var r,d,c=n(15567),_=n.n(c),u=n(2730),p=n.n(u),h=n(44110);const m=312,f="info";class b extends o.Component{constructor(e){super(e),this.showTooltip=()=>{this.setState({isTooltipVisible:!0})},this.hideTooltip=()=>{this.setState({isTooltipVisible:!1})},this.renderIcon=()=>{const{type:e=f}=this.props;switch(e){case"info":return r||(r=(0,h.tZ)(p(),{}));case"question":return d||(d=(0,h.tZ)(_(),{}));default:(0,s.U)(e)}return null},this.state={isTooltipVisible:!1}}render(){const{iconClassNames:e=[],maxWidth:t=m,children:n}=this.props,i=this.renderIcon();return(0,h.BX)("div",{className:"container--nIJjYvifKn",onMouseEnter:this.showTooltip,onMouseLeave:this.hideTooltip,children:[(0,h.tZ)("div",{className:l()("iconContainer--Qd32ya5v0T",...e),children:i}),(0,h.BX)("div",{className:l()("tooltipContainer--Yos9HnS8si",{"tooltipDisplayed--ibyWhutbpT":this.state.isTooltipVisible}),style:{maxWidth:`${t}px`},children:[n,(0,h.tZ)("div",{className:"triangle--n9NwQgxSAc"})]})]})}}var T=n(86541),S=n(51575),g=n(88203),C=n(63520),I=n(73630);const E=({title:e,disabled:t=!1,onChange:n})=>{const{translate:i}=(0,g.Z)(),o=i("webapp_secure_notes_addition_field_placeholder_no_title");return(0,h.tZ)(I.Z,{sx:{display:"block",width:"100%"},tooltipText:e||o,children:(0,h.tZ)("input",{sx:{color:"ds.text.neutral.catchy",backgroundColor:"transparent",border:"none",fontSize:"24px",lineHeight:"30px",fontWeight:"600",textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap",width:"100%",fontFamily:"'GT Walsheim Pro', 'Helvetica', 'Arial', 'sans-serif'","&:focus":{outline:"none",border:"none"}},placeholder:o,value:e||"",disabled:t,onChange:n})})};var O;const{CONTENT:x,DOCUMENT_STORAGE:N,MORE_OPTIONS:v,SHARED_ACCESS:w}=T.SecureNoteTabs,y=({attachmentsCount:e,setActiveTab:t,backgroundColor:n,disabled:o,displayDocumentStorage:a,displaySharedAccess:l,displayMoreOptions:s,recipientsCount:r,title:d,setTitle:c})=>{const{translate:_}=(0,g.Z)(),u=[{id:"tab-note-detail",contentId:"content-note-detail",title:_("webapp_secure_notes_edition_field_tab_title_details"),onSelect:()=>t(x)}];if(l&&u.push({id:"tab-shared-access",contentId:"content-shared-access",title:`${_("webapp_secure_notes_edition_field_tab_title_shared_access")} (${r})`,onSelect:()=>t(w)}),a){const n=(0,h.tZ)(b,{children:(0,h.tZ)("p",{children:_("webapp_secure_notes_edition_field_tab_title_attachments_tooltips")})}),i=e?` (${e})`:"";u.push({id:"tab-document-storage",contentId:"content-document-storage",title:`${_("webapp_secure_notes_edition_field_tab_title_attachments")}${i}`,onSelect:()=>t(N),tabIconElement:n})}return s&&u.push({id:"tab-more-options",contentId:"content-more-options",title:_("webapp_secure_notes_edition_field_tab_title_options"),onSelect:()=>t(v)}),(0,h.tZ)(C.V9,{icon:(0,h.tZ)("div",{className:"iconWrapper--d4t5P9vl4W",children:O||(O=(0,h.tZ)(i.uHY,{size:40,color:"white"}))}),iconBackgroundColor:(0,S.Z)(n),title:(0,h.tZ)(E,{title:d,disabled:o,onChange:e=>c(e.target.value)}),tabs:u})}},64098:(e,t,n)=>{"use strict";n.d(t,{T:()=>J});var i=n(55139),o=n(77377),a=n(55449),l=n(86541),s=n(96832),r=n(78971),d=n(88203),c=n(44110);const _=({isMaxSizeReached:e,currentSize:t,maxSize:n=G})=>{const{translate:i}=(0,d.Z)(),o=e?i("webapp_secure_notes_edition_field_text_content_over_limit",{overLimit:t.toLocaleString(),maxSize:n.toLocaleString()}):`${t.toLocaleString()} /${n.toLocaleString()} ${i("webapp_secure_notes_edition_field_text_content_size")}`;return(0,c.tZ)(r.nv,{textStyle:"ds.body.helper.regular",color:e?"ds.text.danger.quiet":"ds.text.neutral.quiet",sx:{fontSize:"11px",textAlign:"left"},children:o})};var u=n(67406);const p=["BLUE","GRAY","PURPLE","PINK","RED","BROWN","GREEN","ORANGE","YELLOW"];var h=n(30894),m=n(68819),f=n(5961),b=n.n(f),T=n(61607);let S=function(e){return e.BOLD="bold",e.CODE="code",e.ITALIC="italic",e.LINK="link",e.SUBSUBTITLE="subsubtitle",e.SUBTITLE="subtitle",e.TITLE="title",e}({});const g=e=>(t,n)=>{var i;const{formatPrefix:o,cursorOffsetStart:a,cursorOffsetEnd:l}=e,s=null!=(i=e.formatSuffix)?i:"",{start:r,end:d}=n,c=t.slice(r,d),_=((e,t,n)=>{const i=!n||e.endsWith(n);return e.startsWith(t)&&i})(c,o,s),u=((e,t,n,i)=>e.start===e.end?(e.start=e.start+n,e.end=e.end+n,e):(e.end=t?e.end-n-i:e.end+n+i,e))(n,_,a,l);return _?{updatedContent:[t.slice(0,r),t.slice(r+o.length,d-s.length),t.slice(d)].join(""),updatedSelectionRange:u}:{updatedContent:[t.slice(0,r),o,c,s,t.slice(d)].join(""),updatedSelectionRange:u}},C={[S.TITLE]:{icon:(0,c.tZ)(r.JO,{name:"FormattingHeading1Outlined"}),label:"Heading",format:g({formatPrefix:"# ",cursorOffsetStart:2,cursorOffsetEnd:0})},[S.SUBTITLE]:{icon:(0,c.tZ)(r.JO,{name:"FormattingHeading2Outlined"}),label:"Subheading",format:g({formatPrefix:"## ",cursorOffsetStart:3,cursorOffsetEnd:0})},[S.SUBSUBTITLE]:{icon:(0,c.tZ)(r.JO,{name:"FormattingHeading3Outlined"}),label:"Subsubheading",format:g({formatPrefix:"### ",cursorOffsetStart:4,cursorOffsetEnd:0})},[S.BOLD]:{icon:(0,c.tZ)(r.JO,{name:"FormattingBoldOutlined"}),label:"Bold",format:g({formatPrefix:"**",formatSuffix:"**",cursorOffsetStart:2,cursorOffsetEnd:2})},[S.ITALIC]:{icon:(0,c.tZ)(r.JO,{name:"FormattingItalicOutlined"}),label:"Italic",format:g({formatPrefix:"_",formatSuffix:"_",cursorOffsetStart:1,cursorOffsetEnd:1})},[S.CODE]:{icon:(0,c.tZ)(r.JO,{name:"FormattingCodeOutlined"}),label:"Code",format:g({formatPrefix:"`",formatSuffix:"`",cursorOffsetStart:1,cursorOffsetEnd:1})},[S.LINK]:{icon:(0,c.tZ)(r.JO,{name:"LinkOutlined"}),label:"Link",format:(e,t)=>{const{start:n,end:i}=t,o=e.slice(n,i),a=((e,t,n)=>(e.start===e.end?(e.start=e.start+1,e.end=e.end+1):(e.start=e.end+3,e.end=e.end+6),e))(t);return{updatedContent:[e.slice(0,n),"[",o,"](url)",e.slice(i)].join(""),updatedSelectionRange:a}}}},I="webapp_secure_notes_content_markdown_preview",E=({fieldRef:e,content:t,isPreviewing:n,setContent:i,setIsPreviewing:o})=>{const{translate:a}=(0,d.Z)(),l=n=>()=>{var o,a;const l=C[n].format,{updatedContent:s,updatedSelectionRange:r}=l(t,{start:null!=(o=e.current?.selectionStart)?o:0,end:null!=(a=e.current?.selectionEnd)?a:0});i(s),setTimeout((()=>{e.current&&(e.current.focus(),e.current.selectionStart=r.start,e.current.selectionEnd=r.end)}),200)};return(0,c.BX)("div",{sx:{display:"flex",height:"50px",justifyContent:"space-between",alignItems:"center",boxSizing:"border-box",marginTop:"16px",backgroundColor:"ds.background.alternate",borderRadius:"8px"},children:[(0,c.tZ)("div",{sx:{gap:"4px"},children:Object.keys(C).map((e=>(0,c.tZ)(r.zx,{mood:"neutral",intensity:"supershy",layout:"iconOnly",icon:C[e].icon,onClick:l(e),disabled:n,"aria-label":C[e].label,title:C[e].label,name:C[e].label},e)))}),t?(0,c.tZ)("div",{sx:{padding:"8px 10px"},children:(0,c.tZ)(r.zx,{"aria-label":a(I),onClick:()=>o(!n),layout:"iconTrailing",intensity:"quiet",size:"small",mood:"neutral",icon:n?"ActionHideFilled":"ActionRevealFilled",children:a(I)})}):null]})};var O=n(67748),x=n(82207);const N=i.w.SupportMarkdownInSecureNotes,v="webapp_secure_notes_form_content_label",w="webapp_secure_note_edition_action_show_note_content",y="webapp_secure_note_edition_action_hide_note_content",Z="webapp_secure_note_edition_action_copy_note_content",A=({fieldRef:e,value:t,name:n,isSecured:i,placeholder:o,disabled:a,readonly:l,setContent:_})=>{const[u,p]=(0,s.useState)(!1),{translate:f}=(0,d.Z)(),S=(0,T._)(),{areProtectedItemsUnlocked:g,openProtectedItemsUnlocker:C}=(0,h.tY)(),I=Boolean(t.length),A=Boolean(S.data?.[N]),[D,R]=(0,s.useState)(""===t),L=i&&!g,B=(0,s.useCallback)(((e,t)=>new Promise(((n,i)=>{if(e||!L)return t(),n();C({action:h.P7.Show,itemType:m.R.SecureNote,successCallback:()=>(t(),n()),cancelCallback:i})}))),[L,C]),P=()=>R((e=>!e)),k=()=>{B(D,P).catch((()=>{R(!1)}))};return(0,c.tZ)("div",{sx:{display:"flex",flex:"1 1",whiteSpace:"pre-wrap",wordWrap:"break-word",cursor:"text"},children:A?(0,c.BX)("div",{sx:{display:"flex",flexDirection:"column",flexGrow:1},children:[!a&&(0,c.tZ)(E,{content:t,setContent:_,fieldRef:e,isPreviewing:u,setIsPreviewing:e=>p(e)}),u?(0,c.tZ)("div",{className:"markdown--ARo1hBXSLa",children:(0,c.tZ)(b(),{source:(0,O.z)(t),softBreak:"br"})}):(0,c.tZ)(r.Kx,{label:f(v),ref:e,name:n,className:"textarea--Ix1kh7fRYF",sx:{width:"100%",padding:"10px 0px"},placeholder:o,value:!D&&I&&i?"••••••••":t,disabled:a,readOnly:!D&&I&&i||l,onChange:e=>{_(e.target.value)},actions:[...i?[(0,c.tZ)(r.zx,{layout:"iconOnly",icon:D?"ActionHideOutlined":"ActionRevealOutlined",mood:"brand",intensity:"supershy",sx:{marginRight:"16px"},onClick:k,"aria-label":f(D?y:w),tooltip:f(D?y:w)},"secure-note-content-visibility")]:[],...I?[(0,c.tZ)(x.m,{data:t,checkProtected:()=>L,copyLabel:f(Z),itemType:m.R.SecureNote,tooltipLocation:"right"},"copy-secure-note-content")]:[]]})]}):(0,c.tZ)(r.Kx,{label:f(v),ref:e,name:n,sx:{width:"100%",padding:"10px 0px"},placeholder:o,readOnly:!D&&I&&i||l,onChange:e=>_(e.target.value),value:!D&&I&&i?"••••••••":t,actions:[...i?[(0,c.tZ)(r.zx,{layout:"iconOnly",icon:D?"ActionHideOutlined":"ActionRevealOutlined",mood:"brand",intensity:"supershy",sx:{marginRight:"16px"},onClick:k,"aria-label":f(D?y:w),tooltip:f(D?y:w)},"secure-note-content-visibility")]:[],...I?[(0,c.tZ)(x.m,{data:t,checkProtected:()=>L,copyLabel:f(Z),itemType:m.R.SecureNote,tooltipLocation:"right"},"copy-secure-note-content")]:[]]})})},D=({content:e,isSecured:t,setContent:n,limitedPermissions:i,readonly:o})=>{const{translate:a}=(0,d.Z)(),l=(0,s.useRef)(null);return(0,c.tZ)(A,{fieldRef:l,placeholder:a(o?"webapp_secure_notes_edition_disabled_label":"webapp_secure_notes_addition_field_placeholder_no_content"),isSecured:t,value:e,readonly:o||i,setContent:n})};var R=n(78892),L=n(68037),B=n(51575);var P=n(33988),k=n(54350),U=n(6697);const H={NO_CATEGORY:"webapp_secure_notes_addition_no_category",PERSONAL_SPACE:"webapp_form_field_personal_space",INFO_BOX_ATTACHMENTS:"webapp_secure_notes_infobox_has_attachments",INFO_BOX_SHARED:"webapp_secure_notes_infobox_shared",SECURITY_LABEL:"webapp_secure_notes_addition_field_tab_option_security_label",CONTENT_NOTE_DETAILS:"webapp_secure_notes_form_content_note_details",CONTENT_NOTE_DETAILS_TITLE:"webapp_secure_notes_form_content_note_details_title",CONTENT_ITEM_ORGANIZATION:"webapp_secure_notes_form_content_item_organization",CONTENT_ITEM_ORGANIZATION_FORCED_CATEGORIZATION:"webapp_credential_edition_field_force_categorized",CONTENT_ITEM_ORGANIZATION_COLOR:"webapp_secure_notes_form_content_item_organization_color",CONTENT_PREFERENCES:"webapp_secure_notes_form_content_preferences",SECURITY_TITLE:"webapp_secure_notes_addition_field_tab_option_security_title",SECURITY_DESCRIPTION:"webapp_secure_notes_addition_field_tab_option_security_description",CHANGE_SECURED_SETTING_ON:"webapp_secure_notes_edition_unlocker_on_success",CHANGE_SECURED_SETTING_OFF:"webapp_secure_notes_edition_unlocker_off_success",COLORS:{BLUE:"webapp_secure_notes_addition_field_type_option_blue",BROWN:"webapp_secure_notes_addition_field_type_option_brown",GRAY:"webapp_secure_notes_addition_field_type_option_gray",GREEN:"webapp_secure_notes_addition_field_type_option_green",ORANGE:"webapp_secure_notes_addition_field_type_option_orange",PINK:"webapp_secure_notes_addition_field_type_option_pink",PURPLE:"webapp_secure_notes_addition_field_type_option_purple",RED:"webapp_secure_notes_addition_field_type_option_red",YELLOW:"webapp_secure_notes_addition_field_type_option_yellow"}},M={title:"webapp_secure_notes_edition_unlocker_title_on",subtitle:"webapp_secure_notes_edition_unlocker_description_on"},F={title:"webapp_secure_notes_edition_unlocker_title_off",subtitle:"webapp_secure_notes_edition_unlocker_description_off"},G=1e4,z=({title:e,color:t,spaceId:n,content:i,isSecured:o,isNewItem:a,isShared:l,isAdmin:f,isDisabled:b,isDisableSecureNotesFFActive:T,hasAttachment:S,data:g,onModifyData:C,onCollectionsToUpdate:I,onSpaceIdChange:E,onTitleChange:O,onContentChange:x,onColorChange:N,onIsSubmitDisabled:v,onIsSecuredChange:w,setHasDialogsOpenedByChildren:y})=>{const[Z,A]=(0,s.useState)(!1),{translate:z}=(0,d.Z)(),{showToast:V}=(0,r.pm)(),X=(0,P.F)(),{isMPLessUser:Y}=(0,k.Z)(),W=(0,s.useRef)(null),{areProtectedItemsUnlocked:$,openProtectedItemsUnlocker:J}=(0,h.tY)(),K=W.current?.getVaultItemCollections(),{shouldShowFrozenStateDialog:j}=(0,U.Ub)(),q=!X&&!Y,Q=(ee=p.reduce(((e,t)=>(e[t]=z(H.COLORS[t]),e)),{}),te=p,ie=t,ne=(0,c.tZ)("span",{className:"icon--eBGJiUqyZ5",style:{backgroundColor:(0,B.Z)(ie)}}),te.filter((e=>ee[e])).map((e=>({icon:ne,label:`${ee[e]}`,value:e}))));var ee,te,ne,ie;const oe=e=>{w(e),V({description:z(e?H.CHANGE_SECURED_SETTING_ON:H.CHANGE_SECURED_SETTING_OFF),closeActionLabel:z("_common_dialog_dismiss_button")})},ae=Boolean(K?.some((e=>e.isShared))),le=g.limitedPermissions,se=ae||le||b||l;return(0,s.useEffect)((()=>{i.length>G&&!Z?(A(!0),v(!0)):i.length<G&&Z&&(A(!1),v(!1))}),[i.length,Z,v]),(0,c.BX)(c.HY,{children:[(l||S)&&(0,c.tZ)(r.ke,{mood:"neutral",size:"small",title:z(l?H.INFO_BOX_SHARED:H.INFO_BOX_ATTACHMENTS),sx:{margin:"10px 0px"}}),(0,c.BX)("div",{sx:{display:"flex",flexDirection:"column",gap:"16px"},children:[(0,c.BX)(L.u,{title:z(H.CONTENT_NOTE_DETAILS),children:[(0,c.tZ)(r.qo,{label:z(H.CONTENT_NOTE_DETAILS_TITLE),value:e,readOnly:b||l&&!f,onChange:e=>O(e.target.value)}),(0,c.tZ)(D,{content:i,isSecured:o,setContent:x,limitedPermissions:l&&!f,readonly:b||T}),(0,c.tZ)(_,{isMaxSizeReached:Z,currentSize:i.length})]}),(0,c.BX)(L.u,{title:z(H.CONTENT_ITEM_ORGANIZATION),additionalSx:{display:"flex",flexDirection:"column",gap:"8px"},children:[(0,c.tZ)(r.mg,{value:t,"data-name":"colorSelect",label:z(H.CONTENT_ITEM_ORGANIZATION_COLOR),onChange:N,readOnly:b,children:Q.map((e=>(0,c.tZ)(r.$m,{value:e.value,children:e.label},e.value)))}),(0,c.tZ)(r.u,{wrapTrigger:!0,content:z(H.CONTENT_ITEM_ORGANIZATION_FORCED_CATEGORIZATION,{space:n}),passThrough:!se,children:(0,c.tZ)(u.M,{spaceId:null!=n?n:"",disabled:se,onChange:e=>{n!==e&&(E(e),W.current?.clearVaultItemCollections())},defaultSpaceId:null!=n?n:"",isUsingNewDesign:!0})}),(0,c.tZ)(R.p,{hasLabel:!1,vaultItem:{spaceId:null!=n?n:"",vaultItemId:g.id,vaultItemTitle:e,isSharedWithLimitedRights:g.limitedPermissions},ref:W,signalEditedValues:C,isAddCollectionDisabled:!!j||S,setHasOpenedDialogs:y,setCollectionsToUpdate:I})]}),q?(0,c.tZ)(L.u,{title:z(H.CONTENT_PREFERENCES),children:(0,c.tZ)(r.XZ,{id:"securityToggle",label:z(H.SECURITY_TITLE),description:z(H.SECURITY_DESCRIPTION),checked:o,onChange:()=>{const e=!o;$||a?oe(e):((0,h.jF)(),J({itemType:m.R.SecureNoteSetting,options:{fieldsKeys:e?M:F,translated:!1},successCallback:()=>oe(e)}))}})}):null]})]})};var V=n(61014),X=n(50756);const{CONTENT:Y,DOCUMENT_STORAGE:W,SHARED_ACCESS:$}=l.SecureNoteTabs,J=({activeTab:e,data:t,content:n,handleFileInfoDetached:l,hasAttachment:s,isAdmin:r,isShared:d,isUploading:_,isDisabled:u,onModifyData:p,onModalDisplayStateChange:h,setHasDialogsOpenedByChildren:m,...f})=>{const b=(0,o.w)(i.w.DisableSecureNotes);return(0,c.BX)(c.HY,{children:[(0,c.tZ)("div",{"aria-labelledby":"tab-note-detail",id:"content-note-detail",children:e===Y&&(0,c.tZ)(z,{data:t,content:n,isNewItem:!1,isAdmin:r,isShared:d,isDisabled:u,isDisableSecureNotesFFActive:b,hasAttachment:s,onModifyData:p,setHasDialogsOpenedByChildren:m,...f})}),e===$&&(0,c.tZ)("div",{"aria-labelledby":"tab-shared-access",id:"content-shared-access",children:(0,c.tZ)(a.u,{isAdmin:r,id:t.id})}),e===W&&(0,c.tZ)("div",{"aria-labelledby":"tab-document-storage",id:"content-document-storage",children:(0,c.tZ)(V.P,{attachments:t.attachments,additionalProps:{itemId:t.id,itemType:X.ItemType.SecureNote,handleFileInfoDetached:e=>{l(e)},onModalDisplayStateChange:h,isUploading:_}})})]})}},85163:(e,t,n)=>{"use strict";n.d(t,{Q:()=>_});var i=n(82598),o=n(55989),a=n(13252),l=n(46525),s=n(86342),r=n(30309);const d=e=>!e.initiallyExisting&&!e.hasBeenDeleted,c=e=>e.initiallyExisting&&!e.hasBeenDeleted,_=()=>{const{createCollection:e,updateCollection:t}=(0,i.u)(l.v),{addItemsToCollections:n,removeItemFromCollections:_}=(0,i.u)(o.a);return{addNoteToCollections:async(i,o)=>{const l=[],u=[];for(const n of o){var p;c(n)||(n.isShared?d(n)?l.push({collectionId:n.id,permission:null!=(p=n.itemPermission)?p:a.y3.Limited}):u.push(n.id):(n.vaultItems=[{id:i,type:r.dJ.KWSecureNote}],n.id?await t({id:n.id,collection:n,operationType:n.hasBeenDeleted?s.C.SUBSTRACT_VAULT_ITEMS:s.C.APPEND_VAULT_ITEMS}):await e({content:n})))}l.length&&await n({collectionPermissions:l,itemIds:[i],shouldSkipSync:u.length>0}),u.length&&await _({collectionIds:u,itemId:i})}}}},2730:(e,t,n)=>{var i=n(96832);function o(e){return i.createElement("svg",e,i.createElement("g",{fill:"none",fillRule:"evenodd"},[i.createElement("path",{className:"tooltip-modern-icon-stroke",d:"M.5 8.5a8 8 0 1 1 16 0 8 8 0 0 1-16 0zm8-1v5",key:0}),i.createElement("path",{className:"tooltip-modern-icon-fill",d:"M9.5 4.5a1 1 0 1 0-2 0 1 1 0 1 0 2 0",key:1})]))}o.defaultProps={width:"17",height:"17"},e.exports=o,o.default=o},15567:(e,t,n)=>{var i=n(96832);function o(e){return i.createElement("svg",e,i.createElement("path",{d:"M6.547 7.25c0-1 1-2 2.5-2s2.5.75 2.5 2c0 1-.5 1.5-1.5 2.25s-1 1.25-1 1.75m-8.5-1.5a8.5 8.5 0 1 1 17 0 8.5 8.5 0 0 1-17 0Zm9 4a.5.5 0 1 1-1 0 .5.5 0 0 1 1 0Z",className:"tooltip-modern-icon-stroke"}))}o.defaultProps={width:"17",height:"17",viewBox:"0 0 19 19",fill:"none"},e.exports=o,o.default=o}}]);