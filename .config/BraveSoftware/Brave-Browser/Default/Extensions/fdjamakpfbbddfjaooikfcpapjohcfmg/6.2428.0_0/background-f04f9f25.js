"use strict";(globalThis.webpackChunk_dashlane_amphora=globalThis.webpackChunk_dashlane_amphora||[]).push([[691],{17825:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.assertUnreachable=void 0,t.assertUnreachable=function(e,t="Didn't expect to reach this code."){throw new Error(t)}},32663:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.asyncFilter=void 0,t.asyncFilter=async function(e,t){const r=await Promise.all(e.map(t));return e.filter(((e,t)=>r[t]))}},27627:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.asyncMapLimit=void 0;const o=r(4939);t.asyncMapLimit=(e,t,r,n=e.length)=>{const i=e.length;let a=0;const s=[];let c=0;const d=o=>n=>{if(s[o]=n,a++,i===a)return r(s);c<i-1&&(c++,t(e[c],d(c)))},u=Math.max(Math.min(i,n),1);c=u-1;for(let r=0;r<u;r++)t(e[r],d(r)).catch((e=>(0,o.logWarn)({message:e.message})))}},63311:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.debounce=void 0,t.debounce=function(e,t){let r;return function(o,...n){var i=this;clearTimeout(r),o.immediateCall?(r=null,e.apply(i,n)):r=setTimeout((function(){r=null,e.apply(i,n)}),t)}}},5851:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.decipherDatabaseRules=void 0;const o=r(56668),n=r(83570);t.decipherDatabaseRules=(e,t)=>(async(e,t)=>{const r=await(0,o.decipherDashlaneSecureData)(t,e,"",(0,n.makeGetDerivateKeyWithCacheAndQueue)());return(0,o.deflatedUtf8ToUtf16)(r)})(e,t)},82761:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.sanitizeTransactions=void 0;t.sanitizeTransactions=e=>e.filter(Boolean)},64658:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.areSetsEqual=void 0,t.areSetsEqual=function(e,t){return e===t||e.size===t.size&&Array.from(e).every((e=>t.has(e)))}},93564:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getWindowLocalStorage=void 0,t.getWindowLocalStorage=function(){return self.localStorage||null}},96186:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.inMemoryInterSessionUnsyncedSliceReducer=void 0;var o=r(75486);Object.defineProperty(t,"inMemoryInterSessionUnsyncedSliceReducer",{enumerable:!0,get:function(){return o.inMemoryInterSessionUnsyncedSliceReducer}})},16373:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.resetAllLoginNotification=t.addNewLoginNotification=t.RESET_ALL_LOGIN_NOTIFICATIONS=t.ADD_NEW_LOGIN_NOTIFICATION=void 0,t.ADD_NEW_LOGIN_NOTIFICATION="ADD_NEW_LOGIN_NOTIFICATION",t.RESET_ALL_LOGIN_NOTIFICATIONS="RESET_ALL_LOGIN_NOTIFICATIONS";t.addNewLoginNotification=e=>({type:t.ADD_NEW_LOGIN_NOTIFICATION,notification:e});t.resetAllLoginNotification=()=>({type:t.RESET_ALL_LOGIN_NOTIFICATIONS})},71907:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0});const o=r(16373);t.default=(e=[],t)=>{switch(t.type){case o.ADD_NEW_LOGIN_NOTIFICATION:return[...e,t.notification];case o.RESET_ALL_LOGIN_NOTIFICATIONS:return[];default:return e}}},75486:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.inMemoryInterSessionUnsyncedSliceReducer=void 0;const o=r(82422),n=r(71907);t.inMemoryInterSessionUnsyncedSliceReducer=(0,o.combineReducers)({loginNotification:n.default})},96637:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.TsEventBusCommandQueryBus=void 0;var o=r(42278);Object.defineProperty(t,"TsEventBusCommandQueryBus",{enumerable:!0,get:function(){return o.TsEventBusCommandQueryBus}})},42278:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.TsEventBusCommandQueryBus=void 0;const o=r(30504),n=r(30137),i=r(7036);class a extends n.CommandQueryBus{constructor(e,t,r){super(e),this.bus=r,r||(this.bus=(0,o.createEventBus)({events:t}))}registerCommand(e,t){this.bus[e].on(t)}registerQuery(e,t){this.bus[e].on(t)}registerLiveQuery(e,t){(0,i.connectLazySlot)(this.bus[e],t)}}t.TsEventBusCommandQueryBus=a},76901:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.LocalStorageEventStore=void 0;const o=r(33968),n=r(15660);class i extends o.EventStore{constructor(e){super(),this.localStorageService=e}async store(e){await this.localStorageService.getInstance().storeEventStore(e)}async retrieve(){const e=await this.localStorageService.getInstance().getEventStore();return null===e?n.defaultCarbonEventStore:{iconsUpdates:e.iconsUpdates||n.defaultCarbonEventStore.iconsUpdates}}}t.LocalStorageEventStore=i},42898:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.EventStoreConsumer=void 0;const o=r(35088);t.EventStoreConsumer=class{constructor(e,t){this.eventStore=e,this.hooks=t,this.liveConsumptionSubs={},this.lockIds={},this.startTopic=e=>{this.startLiveConsumption(e),this.consumeTopic(e)},this.lockTopic=e=>{this.stopLiveConsumption(e);const t=(0,o.v4)();return this.lockIds[e]=(this.lockIds[e]||new Set).add(t),t},this.releaseTopic=(e,t)=>{const r=this.lockIds[e];r&&r.delete(t),r&&0!==r.size||this.startTopic(e)},this.teardown=()=>{Object.keys(this.liveConsumptionSubs).forEach(this.stopLiveConsumption)},this.consumeTopic=async e=>{const t=await this.eventStore.getItems(e);for(const r of t)this.handleItem(e,r)},this.startLiveConsumption=e=>{this.liveConsumptionSubs[e]||(this.liveConsumptionSubs[e]=this.eventStore.newItems$(e).subscribe((t=>this.handleItem(e,t))))},this.stopLiveConsumption=e=>{this.liveConsumptionSubs[e]&&(this.liveConsumptionSubs[e].unsubscribe(),delete this.liveConsumptionSubs[e])},this.handleItem=async(e,t)=>{const r=this.hooks[e];r||await this.eventStore.remove(e,t.id);await r(t.event)&&await this.eventStore.remove(e,t.id)}}}},36606:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DebugConnector=void 0;const o=r(30504);t.DebugConnector={log:(0,o.slot)(),info:(0,o.slot)(),warning:(0,o.slot)(),error:(0,o.slot)()}},44261:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},92231:function(e,t,r){var o=this&&this.__createBinding||(Object.create?function(e,t,r,o){void 0===o&&(o=r);var n=Object.getOwnPropertyDescriptor(t,r);n&&!("get"in n?!t.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,o,n)}:function(e,t,r,o){void 0===o&&(o=r),e[o]=t[r]}),n=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||o(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),n(r(44261),t),n(r(36606),t)},31335:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.config=void 0;const o=r(78759),n=r(91296);t.config={commands:{},queries:{getIsBrazeContentDisabled:{selector:o.disableBrazeContentCardsSelector},getIsLoginFlowMigrationDisabled:{selector:o.disableLoginFlowMigrationSelector},getIsAutoSSOLoginDisabled:{selector:o.disableAutoSSOLoginSelector}},liveQueries:{liveIsBrazeContentDisabled:{operator:n.disableBrazeContentCardsOperator$},liveIsLoginFlowMigrationDisabled:{operator:n.disableLoginFlowMigrationOperator$},liveIsAutoSSOLoginDisabled:{operator:n.disableAutoSSOLoginOperator$}}}},19469:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.bootstrap=void 0;const o=r(31335);t.bootstrap=e=>{e.register(o.config)}},13240:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.RequestedKillSwitches=void 0,function(e){e.DisableAutofill="disableAutofill",e.BrazeContentCardsDisabled="brazeContentCardsDisabled",e.DisableLoginFlowMigration="disableLoginFlowMigration",e.DisableAutoSSOLogin="disableAutoSSOLogin"}(t.RequestedKillSwitches||(t.RequestedKillSwitches={}))},36641:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.triggerKillswitchCron=void 0;const o=r(57859),n=r(55030);let i=null;const a=60,s=60*a*1e3,c="killswitch-alarm";t.triggerKillswitchCron=function(e){(0,o.alarmsIsSupported)()?async function(e){await(0,o.alarmsGet)(c)||(0,o.alarmsCreate)(c,{delayInMinutes:1,periodInMinutes:a}),o.alarmsOnAlarm.addListener((t=>{t.name===c&&(0,n.updateKillswitchState)(e)}))}(e):function(e){i||((0,n.updateKillswitchState)(e),i=setInterval((()=>{try{(0,n.updateKillswitchState)(e)}catch{}}),s))}(e)}},61:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.bootstrap=void 0;var o=r(19469);Object.defineProperty(t,"bootstrap",{enumerable:!0,get:function(){return o.bootstrap}})},55030:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.updateKillswitchState=void 0;const o=r(10295),n=r(66677),i=r(46298),a=r(91122),s=r(13240),c=o.z.object({disableAutofill:o.z.boolean().default(!1),brazeContentCardsDisabled:o.z.boolean().default(!1),disableLoginFlowMigration:o.z.boolean().default(!1),disableAutoSSOLogin:o.z.boolean().default(!1)});t.updateKillswitchState=async e=>{const t=Object.values(s.RequestedKillSwitches),r=await(0,n.getKillSwitches)(e,t);if((0,i.isApiError)(r))throw new Error(`[Killswitch] - updateKillswitchState : ${r.message} (${r.code})`);const o=c.safeParse(r);if(!o.success)throw new Error("[Killswitch] - updateKillswitchState: unexpected server response shape");e.dispatch((0,a.killswitchStateUpdated)({disableAutofill:o.data.disableAutofill||!1,brazeContentCardsDisabled:o.data.brazeContentCardsDisabled||!1,disableLoginFlowMigration:o.data.disableLoginFlowMigration||!1,disableAutoSSOLogin:o.data.disableAutoSSOLogin||!1}))}},91296:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.disableAutoSSOLoginOperator$=t.disableLoginFlowMigrationOperator$=t.disableBrazeContentCardsOperator$=void 0;const o=r(18948),n=r(3343),i=r(78759);t.disableBrazeContentCardsOperator$=()=>(0,o.pipe)((0,n.map)(i.disableBrazeContentCardsSelector),(0,n.distinctUntilChanged)());t.disableLoginFlowMigrationOperator$=()=>(0,o.pipe)((0,n.map)(i.disableLoginFlowMigrationSelector),(0,n.distinctUntilChanged)());t.disableAutoSSOLoginOperator$=()=>(0,o.pipe)((0,n.map)(i.disableAutoSSOLoginSelector),(0,n.distinctUntilChanged)())},78759:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.disableAutoSSOLoginSelector=t.disableLoginFlowMigrationSelector=t.disableBrazeContentCardsSelector=t.killswitchSelector=void 0;const o=r(73651);t.killswitchSelector=e=>e.device.killswitch||(0,o.getEmptyKillswitchState)();t.disableBrazeContentCardsSelector=e=>(0,t.killswitchSelector)(e).brazeContentCardsDisabled||!1;t.disableLoginFlowMigrationSelector=e=>(0,t.killswitchSelector)(e).disableLoginFlowMigration||!1;t.disableAutoSSOLoginSelector=e=>(0,t.killswitchSelector)(e).disableAutoSSOLogin},23299:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.setupSubscriptions=void 0;const o=r(36641);t.setupSubscriptions=function(e,t){e.appInitialized.on((()=>{const{storeService:e}=t;(0,o.triggerKillswitchCron)(e)}))}},89855:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.isBackupCryptError=t.BackupCryptError=t.BackupCryptErrorMessages=t.BackupCryptErrorCode=void 0;const o=r(92263);var n;!function(e){e[e.TRANSACTION_CLEAR_CONTENT_EMPTY=0]="TRANSACTION_CLEAR_CONTENT_EMPTY",e[e.EMPTY_CLEAR_FULL_BACKUP_FILE_XML=1]="EMPTY_CLEAR_FULL_BACKUP_FILE_XML",e[e.CLEAR_FULL_BACKUP_FILE_XML_NOT_AN_ARRAY=2]="CLEAR_FULL_BACKUP_FILE_XML_NOT_AN_ARRAY",e[e.EMPTY_FULL_BACKUP_FILE=3]="EMPTY_FULL_BACKUP_FILE",e[e.NULL_FULL_BACKUP_FILE_MAP=4]="NULL_FULL_BACKUP_FILE_MAP",e[e.EMPTY_FULL_BACKUP_FILE_MAP=5]="EMPTY_FULL_BACKUP_FILE_MAP",e[e.EMPTY_CLEAR_FULL_BACKUP_FILE=6]="EMPTY_CLEAR_FULL_BACKUP_FILE",e[e.CLEAR_FULL_BACKUP_FILE_NOT_XML=7]="CLEAR_FULL_BACKUP_FILE_NOT_XML",e[e.FULL_BACKUP_FILE_ITEM_WITHOUT_KWTYPE=8]="FULL_BACKUP_FILE_ITEM_WITHOUT_KWTYPE",e[e.FULL_BACKUP_FILE_ITEM_WITHOUT_ID=9]="FULL_BACKUP_FILE_ITEM_WITHOUT_ID",e[e.TRANSACTION_CONTENT_NOT_XML=10]="TRANSACTION_CONTENT_NOT_XML"}(n=t.BackupCryptErrorCode||(t.BackupCryptErrorCode={})),t.BackupCryptErrorMessages={[n.TRANSACTION_CLEAR_CONTENT_EMPTY]:"Empty transaction content",[n.EMPTY_CLEAR_FULL_BACKUP_FILE_XML]:"Empty full backup file XML",[n.CLEAR_FULL_BACKUP_FILE_XML_NOT_AN_ARRAY]:"Full backup file XML not resolved as an array",[n.EMPTY_FULL_BACKUP_FILE]:"Empty full backup file",[n.NULL_FULL_BACKUP_FILE_MAP]:"Null full backup file map",[n.EMPTY_FULL_BACKUP_FILE_MAP]:"Empty full backup file map",[n.EMPTY_CLEAR_FULL_BACKUP_FILE]:"Deciphered full backup file content is empty",[n.CLEAR_FULL_BACKUP_FILE_NOT_XML]:"WRONG_PASSWORD",[n.FULL_BACKUP_FILE_ITEM_WITHOUT_KWTYPE]:"Full backup file item without kwType",[n.FULL_BACKUP_FILE_ITEM_WITHOUT_ID]:"Full backup file item without Id",[n.TRANSACTION_CONTENT_NOT_XML]:"WRONG_PASSWORD"},t.BackupCryptError={codes:n,name:"BackupCryptError",messages:t.BackupCryptErrorMessages};t.isBackupCryptError=e=>(0,o.isCarbonError)(e,t.BackupCryptError)},46e3:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.decryptFullBackupFile=void 0;const o=r(80469),n=r(89855),i=r(83638),a=r(56668),s=r(92263),c=r(61797),d=r(70252),u=r(58582),l=async(e,t)=>{try{const e=await(0,c.parseDashlaneXml)(t);if(!e)throw new s.CarbonError(n.BackupCryptError,n.BackupCryptErrorCode.EMPTY_CLEAR_FULL_BACKUP_FILE_XML);if(!Array.isArray(e))throw new s.CarbonError(n.BackupCryptError,n.BackupCryptErrorCode.CLEAR_FULL_BACKUP_FILE_XML_NOT_AN_ARRAY);return e}catch(t){throw e(u.announcements.decipherFullBackupParseFailed(t)),t}},p=(e,t,r)=>{if(null==t)return e(u.announcements.decipherFullBackupSkipped()),!1;if(""===t)throw new s.CarbonError(n.BackupCryptError,n.BackupCryptErrorCode.EMPTY_FULL_BACKUP_FILE);if(null===r)throw new s.CarbonError(n.BackupCryptError,n.BackupCryptErrorCode.NULL_FULL_BACKUP_FILE_MAP);if(t&&0===r.size)throw new s.CarbonError(n.BackupCryptError,n.BackupCryptErrorCode.EMPTY_FULL_BACKUP_FILE_MAP);return!0},S=async(e,t,r)=>{try{const t=await e.decrypt(r),o=(0,a.deflatedUtf8ToUtf16)(t);if(!o){const e=new s.CarbonError(n.BackupCryptError,n.BackupCryptErrorCode.EMPTY_CLEAR_FULL_BACKUP_FILE);throw d.sendExceptionLog({error:e}),e}if("string"==typeof o&&!o.trim().startsWith("<"))throw new s.CarbonError(n.BackupCryptError,n.BackupCryptErrorCode.CLEAR_FULL_BACKUP_FILE_NOT_XML);return o}catch(n){const i=(0,o.attemptReadCryptoPayload)(e,r);throw t(u.announcements.decipherFullBackupDecipherFailed(n,i)),n}},g=(e,t,r)=>{const{Id:o,kwType:a}=t,c=r.get(o);if(void 0===c)return e(u.announcements.decipherFullBackupItemSkipped(new Error("Transaction not in full backup list skipped"),{itemType:a,itemId:o})),null;const d=t instanceof Object?Object.keys(t):[];if(!a){const t=new s.CarbonError(n.BackupCryptError,n.BackupCryptErrorCode.FULL_BACKUP_FILE_ITEM_WITHOUT_KWTYPE);throw e(u.announcements.decipherFullBackupItemReadFailed(t.addAdditionalInfo({itemId:o,itemKeys:d}),o)),t}return o?(e(u.announcements.decipherFullBackupItemRead(a,o,c)),{type:(0,i.getTransactionTypeFromDataModelType)(a),backupDate:c,action:"BACKUP_EDIT",identifier:o,content:t}):(e(u.announcements.decipherFullBackupItemSkipped(new Error("Transaction without id skipped"),{itemType:a})),null)},m=(e,t,r)=>{const o=t.length,n=[],i=new Set;for(let a=0;a<o;++a){const o=t[a];o.Id&&i.add(o.Id);const s=g(e,o,r);s&&n.push(s)}return((e,t,r)=>{for(const o in t.keys())r.has(o)||e(u.announcements.decipherFullBackupItemSkipped(new Error("Missing full backup item content"),{itemId:o}))})(e,r,i),n};t.decryptFullBackupFile=async function(e,t,r,i){try{if(!p(t,r,i))return[];t(u.announcements.decipherFullBackupStarted());const n=await S(e,t,r),a=await l(t,n),s=(0,o.fixKwType)(a),c=m(t,s,i);return t(u.announcements.decipherFullBackupFinished(c.length)),c}catch(e){if(t(u.announcements.decipherFullBackupFailed(e)),(0,s.isCarbonError)(e,n.BackupCryptError,n.BackupCryptErrorCode.EMPTY_CLEAR_FULL_BACKUP_FILE))return[];throw e}}},63713:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.encryptSingleTransaction=t.decrypt=void 0;const o=r(16516),n=r(46e3),i=r(16859);Object.defineProperty(t,"encryptSingleTransaction",{enumerable:!0,get:function(){return i.encryptSingleTransaction}});const a=r(59700),s=r(58582),c=e=>(0,o.partition)((e=>"SETTINGS"===e.type),e),d=e=>(0,o.partition)((e=>!!e.content),e),u=e=>e.map((e=>({...e,content:null})));t.decrypt=async function(e,t,r,o,l){if(null===l)throw new Error("null transactions");const p=Number(r&&o.size);t(s.announcements.decipherStarted(p));const S=await(0,n.decryptFullBackupFile)(e,t,r,o);t(s.announcements.decipherTransactionsStarted());const[g,m]=c(l),A=await(0,i.decryptSingleTransactions)(e,t,g),[y,E]=d(m),f=(0,a.makeOpenSessionProgressService)();f.init(y.length);const T=await(0,i.decryptSingleTransactions)(e,t,y,f),v=u(E);t(s.announcements.decipherTransactionsFinished());const h=[...S,...A,...v,...T];return t(s.announcements.decipherFinished(h)),h}},59700:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.makeOpenSessionProgressService=void 0;const o=r(19697);t.makeOpenSessionProgressService=()=>{let e,t,r,n;const i=(i=!1)=>{const a=(0,o.default)();if(!a)return;const s=t/e*100;(i||Date.now()-n>=500&&s!==r)&&(r=s,n=Date.now(),a.openSessionProgressChanged({statusDescription:"percentage of work done before session opening",statusProgress:r}))};return{init(o){e=o,t=0,r=0,n=Date.now(),i(!0)},incrementJobsDone(){if(void 0===e)throw new Error("openSessionProgressService must be initialized before begin used");t++,i()},decrementJobsTodo(){e--}}}},16859:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.encryptSingleTransaction=t.decryptSingleTransactions=t.decryptSingleTransaction=t.parseTransactionContentXml=t.decryptTransactionContent=void 0;const o=r(80469),n=r(89855),i=r(92263),a=r(61797),s=r(70252),c=r(56668),d=r(58582);t.decryptTransactionContent=async(e,t,{content:r})=>{try{const t=await e.decrypt(r);return(0,c.deflatedUtf8ToUtf16)(t)}catch(n){const i=(0,o.attemptReadCryptoPayload)(e,r);throw t(d.announcements.decipherTransactionDecipherFailed(n,i)),n}};t.parseTransactionContentXml=async(e,t)=>{try{return(e=>{if(!e){const e=new i.CarbonError(n.BackupCryptError,n.BackupCryptErrorCode.TRANSACTION_CLEAR_CONTENT_EMPTY);throw s.sendExceptionLog({error:e}),e}})(t),(e=>{if("string"==typeof e&&!e.trim().startsWith("<"))throw new i.CarbonError(n.BackupCryptError,n.BackupCryptErrorCode.TRANSACTION_CONTENT_NOT_XML)})(t),await(0,a.parseDashlaneXml)(t)}catch(t){throw e(d.announcements.decipherTransactionParseFailed(t)),t}};const u=(e,t)=>Object.assign({},e,{content:t});async function l(e,r,i){try{r(d.announcements.decipherTransactionStarted(i));const n=await(0,t.decryptTransactionContent)(e,r,i),a=await(0,t.parseTransactionContentXml)(r,n),s=(0,o.fixKwType)(a),c=u(i,s);return r(d.announcements.decipherTransactionFinished(i)),c}catch(e){const{type:t}=i;if((0,n.isBackupCryptError)(e)){const{action:r,backupDate:o,identifier:n}=i;e.addAdditionalInfo({itemId:n,transactionType:t,action:r,backupDate:o})}if(r(d.announcements.decipherTransactionFailed(e,i)),"SETTINGS"===t)throw e;return null}}t.decryptSingleTransaction=l,t.decryptSingleTransactions=async function(e,t,r,o){const n=r.map((async r=>{const n=await l(e,t,r);return o&&o.incrementJobsDone(),n}));return(await Promise.all(n)).filter(Boolean)},t.encryptSingleTransaction=async function(e,t,r={}){const o=(0,c.utf16ToDeflatedUtf8)(t.content),n=await e.getInstance().encrypt(o,r);return{...t,content:n}}},80469:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.fixKwType=t.attemptReadCryptoPayload=void 0;const o=r(54218);t.attemptReadCryptoPayload=(e,t)=>{try{return e.readCryptoPayload(t)}catch(e){}return""},t.fixKwType=function e(t){return Array.isArray(t)?t.map((t=>e(t))):(0,o.default)(t)?Object.keys(t).reduce(((r,o)=>{const n=t[o];return"__type__"===o?r.kwType=n:r[o]=e(n),r}),{}):t}},17936:function(e,t,r){var o=this&&this.__createBinding||(Object.create?function(e,t,r,o){void 0===o&&(o=r);var n=Object.getOwnPropertyDescriptor(t,r);n&&!("get"in n?!t.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,o,n)}:function(e,t,r,o){void 0===o&&(o=r),e[o]=t[r]}),n=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||o(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),n(r(44317),t)},44317:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.makeDiagnosticReportMonitor=void 0;const o=r(32626),n=r(54034),i=r(92263),a=r(89855);t.makeDiagnosticReportMonitor=()=>{let e="",t="";const r="fullBackupFile";return(s,{timestamp:c})=>{switch(s.type){case"DecipherFullBackupStarted":(0,n.triggerSendTransactionDecipheringDiagnosticLog)({date:c,identifier:r,message:"[decryptFullBackupFile] - Start Decryption"});break;case"DecipherFullBackupItemRead":{const{itemId:e}=s;(0,n.triggerSendTransactionDecipheringDiagnosticLog)({date:c,identifier:r,message:`[fullBackupFileItemsContent] - ${e} succeed`,status:"succeed"})}break;case"DecipherFullBackupItemSkipped":{const{itemId:e}=s;(0,n.triggerSendTransactionDecipheringDiagnosticLog)({date:c,identifier:r,message:e?`[fullBackupFileItemsContent] - ${e} does not have backupDate => return null`:"[fullBackupFileItemsContent] - does not have id => return null",status:"failed"})}break;case"DecipherFullBackupParseFailed":{const{error:t}=s;e=(0,i.isCarbonError)(t,a.BackupCryptError,a.BackupCryptErrorCode.EMPTY_CLEAR_FULL_BACKUP_FILE_XML)?"parseXml does not failed but result nothing => reject err: WRONG_PASSWORD":(0,i.isCarbonError)(t,a.BackupCryptError,a.BackupCryptErrorCode.CLEAR_FULL_BACKUP_FILE_XML_NOT_AN_ARRAY)?"parseXml result not an Array => reject err: fullBackupFileItemsContent is not an Array":`parseXml failed => reject err: ${t}`}break;case"DecipherFullBackupDecipherFailed":{const{error:t}=s;e=(0,i.isCarbonError)(t,a.BackupCryptError,a.BackupCryptErrorCode.CLEAR_FULL_BACKUP_FILE_NOT_XML)?'decrypt result with xml string which does not start with "<" => throw new Error WRONG_PASSWORD':(0,i.isCarbonError)(t,a.BackupCryptError,a.BackupCryptErrorCode.EMPTY_CLEAR_FULL_BACKUP_FILE)?"decrypt result with empty xml => throw new Error (Decrypt FullBackupFile empty result)":"failed to decipher fullBackupFile"}break;case"DecipherFullBackupFailed":(0,n.triggerSendTransactionDecipheringDiagnosticLog)({date:c,identifier:r,message:`[decryptFullBackupFile] - ${e}: null`,status:"failed"});break;case"DecipherFullBackupFinished":(0,n.triggerSendTransactionDecipheringDiagnosticLog)({date:c,identifier:r,message:`[decryptFullBackupFile] - ${e}: null`,status:"succeed"});break;case"DecipherTransactionStarted":{const{identifier:e,action:r,backupDate:i,time:a,transactionType:d}=s;t=e,(0,n.triggerSendTransactionDecipheringDiagnosticLog)({identifier:e,action:r,backupDate:i,time:a,type:o.TransactionType[d],date:c,message:"[decryptSingleTransaction] - Start Decryption"})}break;case"DecipherTransactionDecipherFailed":{const{error:t}=s;e=(0,i.isCarbonError)(t,a.BackupCryptError,a.BackupCryptErrorCode.TRANSACTION_CONTENT_NOT_XML)?'decrypt resolve with xml string that does not start with "<"':(0,i.isCarbonError)(t,a.BackupCryptError,a.BackupCryptErrorCode.TRANSACTION_CLEAR_CONTENT_EMPTY)?"decrypt resolve empty xml content":"Decryption failed with error"}break;case"DecipherTransactionParseFailed":e="failed to parse XML content";break;case"DecipherTransactionFailed":(0,n.triggerSendTransactionDecipheringDiagnosticLog)({date:c,identifier:t,message:`[decryptSingleTransaction] - ${e}: null`,status:"failed"});break;case"DecipherTransactionFinished":(0,n.triggerSendTransactionDecipheringDiagnosticLog)({date:c,identifier:t,message:"[decryptSingleTransaction] - Success",status:"succeed"})}}}},91453:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.formatStep=void 0;const o=r(2695),n=r(17825);t.formatStep=e=>{switch(e){case o.SyncLoggerStep.Main:return"[Sync]";case o.SyncLoggerStep.Chronological:return"[Sync|Chrono]";case o.SyncLoggerStep.Latest:return"[Sync|Latest]";case o.SyncLoggerStep.Decipher:return"[Sync|Decipher]";case o.SyncLoggerStep.DecipherFullBackup:return"[Sync|Decipher|FullBackup]";case o.SyncLoggerStep.DecipherTransactions:return"[Sync|Decipher|Transactions]";case o.SyncLoggerStep.Duplicate:return"[Sync|Duplicate]";case o.SyncLoggerStep.Cipher:return"[Sync|Cipher]";case o.SyncLoggerStep.Upload:return"[Sync|Upload]";case o.SyncLoggerStep.Save:return"[Sync|Save]";case o.SyncLoggerStep.TreatProblem:return"[Sync|TreatProblem]";case o.SyncLoggerStep.TreatProblemSummary:return"[Sync|TreatProblem|Summary]";case o.SyncLoggerStep.Sharing:return"[Sync|Sharing]";case o.SyncLoggerStep.TeamAdminData:return"[Sync|TeamAdminData]";default:(0,n.assertUnreachable)(e)}}},92221:function(e,t,r){var o=this&&this.__createBinding||(Object.create?function(e,t,r,o){void 0===o&&(o=r);var n=Object.getOwnPropertyDescriptor(t,r);n&&!("get"in n?!t.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,o,n)}:function(e,t,r,o){void 0===o&&(o=r),e[o]=t[r]}),n=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||o(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),n(r(71044),t)},71369:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.logSyncVerbose=t.logSyncDebug=t.logSyncInfo=t.logSyncWarn=t.logSyncError=void 0;const o=r(95623),n=(0,o.withTag)("Sync");t.logSyncError=n(o.logError),t.logSyncWarn=n(o.logWarn),t.logSyncInfo=n(o.logInfo),t.logSyncDebug=n(o.logDebug),t.logSyncVerbose=n(o.logVerbose)},71044:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.makeSyncLoggerMonitor=void 0;const o=r(58582),n=r(2695),i=r(90635),a=r(91453),s=r(71369);t.makeSyncLoggerMonitor=()=>{let e=null;const t=e=>"object"==typeof e&&e.message||`${e}`,r=(e,t)=>`${(0,a.formatStep)(e)} ${t}`;return(a,{timestamp:c})=>{switch(a.type){case"SyncStarted":{const{syncType:t}=a;e=c,(0,s.logSyncInfo)({message:r(n.SyncLoggerStep.Main,"Start"),details:{step:n.SyncLoggerStep.Main,Type:(0,i.syncTypeForSyncLogger)(t)}})}break;case"ChronologicalSyncStarted":{const{updatesCount:t,deletesCount:o}=a;(0,s.logSyncDebug)({message:r(n.SyncLoggerStep.Chronological,"Start"),details:{step:n.SyncLoggerStep.Chronological,Timestamp:e,Update:t,Delete:o}})}break;case"LatestRequested":{const{lock:t,needsKeys:o}=a;(0,s.logSyncDebug)({message:r(n.SyncLoggerStep.Latest,"Request"),details:{step:n.SyncLoggerStep.Latest,Timestamp:e,Lock:t,SharingKeys:o}})}break;case"LatestSucceeded":{const{updatesCount:t,deletesCount:o,fullBackupSize:i}=a;(0,s.logSyncDebug)({message:r(n.SyncLoggerStep.Latest,"Success"),details:{step:n.SyncLoggerStep.Latest,Timestamp:e,Update:t,Delete:o,FullBackup:i}})}break;case"LatestFailed":{const{error:e}=a;(0,s.logSyncWarn)({message:r(n.SyncLoggerStep.Latest,"Error"),details:{step:n.SyncLoggerStep.Latest,Cause:t(e)}})}break;case"DecipherStarted":{const{fullBackupFileSize:e}=a;(0,s.logSyncVerbose)({message:r(n.SyncLoggerStep.Decipher,"Start"),details:{step:n.SyncLoggerStep.Decipher,Count:e}})}break;case"DecipherFullBackupSkipped":(0,s.logSyncVerbose)({message:r(n.SyncLoggerStep.DecipherFullBackup,"Skip"),details:{step:n.SyncLoggerStep.DecipherFullBackup}});break;case"DecipherFullBackupStarted":(0,s.logSyncVerbose)({message:r(n.SyncLoggerStep.DecipherFullBackup,"Start"),details:{step:n.SyncLoggerStep.DecipherFullBackup}});break;case"DecipherFullBackupItemRead":{const{itemType:e,itemId:t,backupDate:o}=a;(0,s.logSyncDebug)({message:r(n.SyncLoggerStep.DecipherFullBackup,"Transaction"),details:{step:n.SyncLoggerStep.DecipherFullBackup,Type:e,Id:t,Date:o}})}break;case"DecipherFullBackupItemSkipped":{const{error:e,itemType:o,itemId:i}=a;(0,s.logSyncDebug)({message:r(n.SyncLoggerStep.DecipherFullBackup,"TransactionSkipped"),details:{step:n.SyncLoggerStep.DecipherFullBackup,Type:o,Id:i,Cause:t(e)}})}break;case"DecipherFullBackupFinished":{const{itemsCount:e}=a;(0,s.logSyncVerbose)({message:r(n.SyncLoggerStep.DecipherFullBackup,"Done"),details:{step:n.SyncLoggerStep.DecipherFullBackup,Count:e}})}break;case"DecipherFullBackupFailed":{const{error:e}=a;(0,s.logSyncWarn)({message:r(n.SyncLoggerStep.DecipherFullBackup,"Error"),details:{step:n.SyncLoggerStep.DecipherFullBackup,Cause:t(e)}})}break;case"DecipherTransactionsStarted":(0,s.logSyncVerbose)({message:r(n.SyncLoggerStep.DecipherTransactions,"Start"),details:{step:n.SyncLoggerStep.DecipherTransactions}});break;case"DecipherTransactionFinished":{const{action:e,transactionType:t,identifier:o,backupDate:i}=a;(0,s.logSyncDebug)({message:r(n.SyncLoggerStep.DecipherTransactions,"Transaction"),details:{step:n.SyncLoggerStep.DecipherTransactions,Action:e,Type:t,Id:o,Date:i}})}break;case"DecipherTransactionFailed":{const{error:e,transactionType:o,identifier:i,backupDate:c}=a;(0,s.logSyncWarn)({message:r(n.SyncLoggerStep.DecipherTransactions,"Error"),details:{step:n.SyncLoggerStep.DecipherTransactions,Cause:t(e),Type:o,Id:i,Date:c}})}break;case"DecipherTransactionsFinished":(0,s.logSyncVerbose)({message:r(n.SyncLoggerStep.DecipherTransactions,"Done"),details:{step:n.SyncLoggerStep.DecipherTransactions}});break;case"DecipherFinished":{const{updatesCount:e,deletesCount:t}=a;(0,s.logSyncVerbose)({message:r(n.SyncLoggerStep.Decipher,"Done"),details:{step:n.SyncLoggerStep.Decipher,Transactions:e+t}})}break;case"TransactionDuplicated":{const{transactionType:e,identifier:t,backupDate:o}=a;(0,s.logSyncWarn)({message:r(n.SyncLoggerStep.Duplicate,"Transaction"),details:{step:n.SyncLoggerStep.Duplicate,Type:e,Id:t,Date:o}})}break;case"CipherStarted":(0,s.logSyncVerbose)({message:r(n.SyncLoggerStep.Cipher,"Start"),details:{step:n.SyncLoggerStep.Cipher}});break;case"TransactionCiphered":{const{transactionType:e,itemId:t,backupDate:o}=a;(0,s.logSyncDebug)({message:r(n.SyncLoggerStep.Cipher,"Transaction"),details:{step:n.SyncLoggerStep.Cipher,Type:e,Id:t,Date:o}})}break;case"CipherFinished":(0,s.logSyncVerbose)({message:r(n.SyncLoggerStep.Cipher,"Done"),details:{step:n.SyncLoggerStep.Cipher}});break;case"UploadRequested":{const{updatedCount:e,deletedCount:t}=a;(0,s.logSyncDebug)({message:r(n.SyncLoggerStep.Upload,"Request"),details:{step:n.SyncLoggerStep.Upload,Update:e,Delete:t}})}break;case"UploadSucceeded":{const{timestamp:e}=a;(0,s.logSyncDebug)({message:r(n.SyncLoggerStep.Upload,"Success"),details:{step:n.SyncLoggerStep.Upload,Timestamp:e}})}break;case"UploadFailed":{const{error:e}=a;(0,s.logSyncWarn)({message:r(n.SyncLoggerStep.Upload,"Error"),details:{step:n.SyncLoggerStep.Upload,Cause:t(e)}})}break;case"SaveStarted":(0,s.logSyncVerbose)({message:r(n.SyncLoggerStep.Save,"Start"),details:{step:n.SyncLoggerStep.Save}});break;case"SaveFinished":(0,s.logSyncVerbose)({message:r(n.SyncLoggerStep.Save,"Done"),details:{step:n.SyncLoggerStep.Save}});break;case"ChronologicalSyncFinished":{const{summarySize:e}=a;(0,s.logSyncDebug)({message:r(n.SyncLoggerStep.Chronological,"Done"),details:{step:n.SyncLoggerStep.Chronological,Summary:e}})}break;case"TreatProblemStarted":(0,s.logSyncDebug)({message:r(n.SyncLoggerStep.TreatProblem,"Start"),details:{step:n.SyncLoggerStep.TreatProblem}});break;case"TreatProblemSummaryStarted":{const{localItemsCount:e,remoteItemsCount:t}=a;(0,s.logSyncDebug)({message:r(n.SyncLoggerStep.TreatProblemSummary,"Start"),details:{step:n.SyncLoggerStep.TreatProblemSummary,Local:e,Remote:t}})}break;case"TreatProblemSummaryCompared":{const{result:e,cause:t,transactionType:i,identifier:c,localDate:d,remoteDate:u}=a,l=void 0!==u?{RemoteDate:u}:{},p=t?{Cause:o.TreatProblemSummaryComparedCause[t]}:{},S=d?{LocalDate:d}:{};(0,s.logSyncDebug)({message:r(n.SyncLoggerStep.TreatProblemSummary,"Comparison"),details:{step:n.SyncLoggerStep.TreatProblemSummary,Result:o.TreatProblemSummaryComparedResult[e],...p,Type:i,Id:c,...S,...l}})}break;case"TreatProblemSummaryFinished":(0,s.logSyncDebug)({message:r(n.SyncLoggerStep.TreatProblemSummary,"Done"),details:{step:n.SyncLoggerStep.TreatProblemSummary}});break;case"TreatProblemDiffComputed":{const{transactionsToDownloadCount:e,transactionsToUploadCount:t}=a;0===e&&0===t?(0,s.logSyncVerbose)({message:r(n.SyncLoggerStep.TreatProblem,"Diff UpToDate"),details:{step:n.SyncLoggerStep.TreatProblem}}):(0,s.logSyncWarn)({message:r(n.SyncLoggerStep.TreatProblem,"Diff"),details:{step:n.SyncLoggerStep.TreatProblem,Download:e,Upload:t}})}break;case"TreatProblemFinished":(0,s.logSyncDebug)({message:r(n.SyncLoggerStep.TreatProblem,"Done"),details:{step:n.SyncLoggerStep.TreatProblem}});break;case"TeamAdminDataSyncStarted":(0,s.logSyncDebug)({message:r(n.SyncLoggerStep.TeamAdminData,"Start"),details:{step:n.SyncLoggerStep.TeamAdminData}});break;case"TeamAdminDataSyncFinished":(0,s.logSyncDebug)({message:r(n.SyncLoggerStep.TeamAdminData,"Done"),details:{step:n.SyncLoggerStep.TeamAdminData}});break;case"SharingSyncStarted":(0,s.logSyncDebug)({message:r(n.SyncLoggerStep.Sharing,"Start"),details:{step:n.SyncLoggerStep.Sharing}});break;case"SharingSyncFinished":(0,s.logSyncDebug)({message:r(n.SyncLoggerStep.Sharing,"Done"),details:{step:n.SyncLoggerStep.Sharing}});break;case"SyncFinished":(0,s.logSyncInfo)({message:r(n.SyncLoggerStep.Main,"Done"),details:{step:n.SyncLoggerStep.Main}});break;case"SyncFailed":{const{error:e}=a;(0,s.logSyncError)({message:r(n.SyncLoggerStep.Main,"Failed"),details:{step:n.SyncLoggerStep.Main,Cause:t(e)}})}}}}},2695:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.SyncLoggerStep=void 0,function(e){e[e.Main=0]="Main",e[e.Chronological=1]="Chronological",e[e.Latest=2]="Latest",e[e.Decipher=3]="Decipher",e[e.DecipherFullBackup=4]="DecipherFullBackup",e[e.DecipherTransactions=5]="DecipherTransactions",e[e.Duplicate=6]="Duplicate",e[e.Cipher=7]="Cipher",e[e.Upload=8]="Upload",e[e.Save=9]="Save",e[e.TreatProblem=10]="TreatProblem",e[e.TreatProblemSummary=11]="TreatProblemSummary",e[e.Sharing=12]="Sharing",e[e.TeamAdminData=13]="TeamAdminData"}(t.SyncLoggerStep||(t.SyncLoggerStep={}))},90635:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.syncTypeForSyncLogger=void 0;const o=r(37898),n=r(17825);t.syncTypeForSyncLogger=e=>{switch(e){case o.SyncType.LIGHT_SYNC:return"Light";case o.SyncType.FULL_SYNC:return"Full";case o.SyncType.FIRST_SYNC:return"Initial";default:(0,n.assertUnreachable)(e)}}},98083:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.treatProblemSummaryFinished=t.treatProblemSummaryCompared=t.treatProblemSummaryStarted=t.transactionDuplicated=t.decipherTransactionFinished=t.decipherTransactionFailed=t.decipherTransactionParseFailed=t.decipherTransactionDecipherFailed=t.decipherTransactionStarted=t.decipherFullBackupFinished=t.decipherFullBackupFailed=t.decipherFullBackupItemReadFailed=t.decipherFullBackupItemSkipped=t.decipherFullBackupItemRead=t.decipherFullBackupDecipherFailed=t.decipherFullBackupParseFailed=t.decipherFullBackupStarted=t.decipherFullBackupSkipped=t.cipherFinished=t.transactionCiphered=t.cipherStarted=t.uploadFailed=t.uploadSucceeded=t.uploadRequested=t.syncTypeChanged=t.syncFailed=t.syncFinished=t.decipherTransactionsFinished=t.decipherTransactionsStarted=t.decipherFinished=t.decipherStarted=t.latestFailed=t.latestSucceeded=t.latestRequested=t.teamAdminDataSyncFinished=t.teamAdminDataSyncFailed=t.teamAdminDataSyncStarted=t.sharingSyncFinished=t.sharingSyncFailed=t.sharingSyncInvalidSyncData=t.sharingSyncStarted=t.treatSharingKeysFailed=t.treatProblemFinished=t.treatProblemDiffComputed=t.treatProblemFailed=t.treatProblemStarted=t.chronologicalSyncFinished=t.chronologicalSyncFailed=t.chronologicalSyncStarted=t.syncStarted=void 0,t.saveFinished=t.saveStarted=void 0;const o=r(31982),n=r(90826),i=r(1347),a=r(63002);t.syncStarted=(e,t)=>({type:"SyncStarted",trigger:e,syncType:t});t.chronologicalSyncStarted=e=>({type:"ChronologicalSyncStarted",updatesCount:(0,a.countEditionUploadChanges)(e?.changesToUpload||[]),deletesCount:(0,a.countDeletionUploadChanges)(e?.changesToUpload||[])});t.chronologicalSyncFailed=e=>({type:"ChronologicalSyncFailed",error:e});t.chronologicalSyncFinished=(e,t)=>({type:"ChronologicalSyncFinished",summarySize:(0,o.countSyncSummaryTransactions)(e),fullBackupFileSize:t});t.treatProblemStarted=()=>({type:"TreatProblemStarted"});t.treatProblemFailed=e=>({type:"TreatProblemFailed",error:e});t.treatProblemDiffComputed=(e,t)=>({type:"TreatProblemDiffComputed",transactionsToDownloadCount:e,transactionsToUploadCount:t});t.treatProblemFinished=()=>({type:"TreatProblemFinished"});t.treatSharingKeysFailed=e=>({type:"TreatSharingKeysFailed",error:e});t.sharingSyncStarted=()=>({type:"SharingSyncStarted"});t.sharingSyncInvalidSyncData=(e,t)=>({type:"SharingSyncInvalidSyncData",itemGroupId:e,errorName:t});t.sharingSyncFailed=e=>({type:"SharingSyncFailed",error:e});t.sharingSyncFinished=()=>({type:"SharingSyncFinished"});t.teamAdminDataSyncStarted=()=>({type:"TeamAdminDataSyncStarted"});t.teamAdminDataSyncFailed=e=>({type:"TeamAdminDataSyncFailed",error:e});t.teamAdminDataSyncFinished=()=>({type:"TeamAdminDataSyncFinished"});t.latestRequested=(e,t)=>({type:"LatestRequested",lock:"nolock"!==e,needsKeys:t});t.latestSucceeded=e=>({type:"LatestSucceeded",updatesCount:(0,n.countEditionTransactions)(e.transactionList),deletesCount:(0,n.countRemoveTransactions)(e.transactionList),fullBackupSize:(e.fullBackupFileList||[]).length});t.latestFailed=e=>({type:"LatestFailed",error:e});t.decipherStarted=e=>({type:"DecipherStarted",fullBackupFileSize:e});t.decipherFinished=e=>({type:"DecipherFinished",updatesCount:(0,n.countEditionTransactions)(e),deletesCount:(0,n.countRemoveTransactions)(e)});t.decipherTransactionsStarted=()=>({type:"DecipherTransactionsStarted"});t.decipherTransactionsFinished=()=>({type:"DecipherTransactionsFinished"});t.syncFinished=()=>({type:"SyncFinished"});t.syncFailed=e=>({type:"SyncFailed",error:e});t.syncTypeChanged=e=>({type:"SyncTypeChanged",syncType:e});t.uploadRequested=(e,t)=>({type:"UploadRequested",updatedCount:e,deletedCount:t});t.uploadSucceeded=(e,t,r)=>({type:"UploadSucceeded",updatedCount:e,deletedCount:t,timestamp:r});t.uploadFailed=e=>({type:"UploadFailed",error:e});t.cipherStarted=()=>({type:"CipherStarted"});t.transactionCiphered=(e,t,r)=>({type:"TransactionCiphered",transactionType:e,itemId:t,backupDate:r});t.cipherFinished=()=>({type:"CipherFinished"});t.decipherFullBackupSkipped=()=>({type:"DecipherFullBackupSkipped"});t.decipherFullBackupStarted=()=>({type:"DecipherFullBackupStarted"});t.decipherFullBackupParseFailed=e=>({type:"DecipherFullBackupParseFailed",error:e});t.decipherFullBackupDecipherFailed=(e,t)=>({type:"DecipherFullBackupDecipherFailed",error:e,cryptoPayload:t});t.decipherFullBackupItemRead=(e,t,r)=>({type:"DecipherFullBackupItemRead",itemType:e,itemId:t,backupDate:r});t.decipherFullBackupItemSkipped=(e,t)=>({type:"DecipherFullBackupItemSkipped",itemType:t?.itemType,itemId:t?.itemId,error:e});t.decipherFullBackupItemReadFailed=(e,t)=>({type:"DecipherFullBackupItemReadFailed",error:e,itemId:t});t.decipherFullBackupFailed=e=>({type:"DecipherFullBackupFailed",error:e});t.decipherFullBackupFinished=e=>({type:"DecipherFullBackupFinished",itemsCount:e});t.decipherTransactionStarted=({action:e,backupDate:t,identifier:r,time:o,type:n})=>({type:"DecipherTransactionStarted",time:o,action:e,backupDate:t,identifier:r,transactionType:n});t.decipherTransactionDecipherFailed=(e,t)=>({type:"DecipherTransactionDecipherFailed",error:e,cryptoPayload:t});t.decipherTransactionParseFailed=e=>({type:"DecipherTransactionParseFailed",error:e});t.decipherTransactionFailed=(e,{backupDate:t,identifier:r,type:o})=>({type:"DecipherTransactionFailed",error:e,transactionType:o,identifier:r,backupDate:t});t.decipherTransactionFinished=({action:e,backupDate:t,identifier:r,type:o})=>({type:"DecipherTransactionFinished",action:e,transactionType:o,identifier:r,backupDate:t});t.transactionDuplicated=(e,t,r)=>({type:"TransactionDuplicated",transactionType:e,identifier:t,backupDate:r});t.treatProblemSummaryStarted=(e,t)=>({type:"TreatProblemSummaryStarted",localItemsCount:(0,i.countPersonalDataItems)(e),remoteItemsCount:(0,o.countSyncSummaryTransactions)(t)});t.treatProblemSummaryCompared=(e,t,r,o)=>({type:"TreatProblemSummaryCompared",result:e,transactionType:t,identifier:r,...o?.cause?{cause:o.cause}:{},...o?.localDate?{localDate:o.localDate}:{},...o?.remoteDate?{remoteDate:o.remoteDate}:{}});t.treatProblemSummaryFinished=()=>({type:"TreatProblemSummaryFinished"});t.saveStarted=()=>({type:"SaveStarted"});t.saveFinished=()=>({type:"SaveFinished"})},58582:function(e,t,r){var o=this&&this.__createBinding||(Object.create?function(e,t,r,o){void 0===o&&(o=r);var n=Object.getOwnPropertyDescriptor(t,r);n&&!("get"in n?!t.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,o,n)}:function(e,t,r,o){void 0===o&&(o=r),e[o]=t[r]}),n=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||o(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),t.announcements=void 0;const i=r(98083);t.announcements=i,n(r(76921),t)},76921:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.TreatProblemSummaryComparedCause=t.TreatProblemSummaryComparedResult=void 0,function(e){e[e.UpToDate=0]="UpToDate",e[e.Upload=1]="Upload",e[e.Download=2]="Download"}(t.TreatProblemSummaryComparedResult||(t.TreatProblemSummaryComparedResult={})),function(e){e[e.OutOfDate=0]="OutOfDate",e[e.Missing=1]="Missing"}(t.TreatProblemSummaryComparedCause||(t.TreatProblemSummaryComparedCause={}))},32523:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.generateLocalDuplicates=void 0;const o=r(16516),n=r(70705),i=r(49551),a=r(78320),s=r(30144),c=r(75270),d=r(53628),u=r(21178),l=(e,t)=>{const r=n.mergingRules[t.type];if(!r||0===r.length)return!1;if(!t.content)return!1;const o=(0,d.fixPersonalDataItemFromExternalSource)(t.content,t.identifier);for(const{property:n,canonize:i}of r){let r=e[n],a=o[n];"Domain"===n&&"AUTHENTIFIANT"===t.type&&r&&a&&(r=new u.ParsedURL(e.Url).getRootDomain(),a=new u.ParsedURL(o.Url).getRootDomain());if((i?(0,s.canonizeText)(r):r)!==(i?(0,s.canonizeText)(a):a))return!0}return!1};t.generateLocalDuplicates=function(e,t,r){return(0,i.filterDataModelObjects)(t,e,["changeHistories"]).reduce(((e,t)=>{const n=(e=>{const t=(0,c.findTransaction)(e.Id,r);return!t||(0,c.isRemovalTransaction)(t)?null:l(e,t)?{duplicate:{...(0,o.clone)(e),Id:(0,a.generateItemUuid)()},duplicatedFromId:e.Id}:null})(t);return n?(e.push(n),e):e}),[])}},70705:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.mergingRules=void 0,t.mergingRules={ADDRESS:[{property:"AddressFull",canonize:!1},{property:"City",canonize:!1},{property:"ZipCode",canonize:!0}],AUTH_CATEGORY:[{property:"CategoryName",canonize:!1}],AUTHENTIFIANT:[{property:"Domain",canonize:!1},{property:"Email",canonize:!1},{property:"Login",canonize:!1},{property:"Note",canonize:!1},{property:"OtpSecret",canonize:!1},{property:"OtpUrl",canonize:!1},{property:"Password",canonize:!1},{property:"SubdomainOnly",canonize:!1},{property:"Title",canonize:!1},{property:"TrustedUrl",canonize:!1},{property:"UseFixedUrl",canonize:!1}],BANKSTATEMENT:[{property:"BankAccountIBAN",canonize:!0}],COMPANY:[{property:"Name",canonize:!1},{property:"JobTitle",canonize:!1}],DATA_CHANGE_HISTORY:[{property:"ObjectId",canonize:!0}],DRIVERLICENCE:[{property:"Number",canonize:!0}],EMAIL:[{property:"Email",canonize:!0}],FISCALSTATEMENT:[{property:"FiscalNumber",canonize:!0},{property:"TeledeclarantNumber",canonize:!0}],GENERATED_PASSWORD:[{property:"Domain",canonize:!1},{property:"GeneratedDate",canonize:!1},{property:"Password",canonize:!1}],IDCARD:[{property:"Number",canonize:!0}],IDENTITY:[{property:"FirstName",canonize:!1},{property:"LastName",canonize:!1}],PASSPORT:[{property:"Number",canonize:!0}],PAYMENTMEAN_PAYPAL:[{property:"Login",canonize:!1},{property:"Password",canonize:!1}],PAYMENTMEANS_CREDITCARD:[{property:"Bank",canonize:!0},{property:"CardNumber",canonize:!0},{property:"CardNumberLastDigits",canonize:!0},{property:"ExpireMonth",canonize:!0},{property:"ExpireYear",canonize:!0},{property:"OwnerName",canonize:!0}],PERSONALWEBSITE:[{property:"Website",canonize:!1}],PHONE:[{property:"Number",canonize:!0}],PURCHASE_CATEGORY:[{property:"CategoryName",canonize:!1}],PURCHASEBASKET:[{property:"Id",canonize:!1}],PURCHASEPAIDBASKET:[{property:"AutoTitle",canonize:!1},{property:"Comment",canonize:!1},{property:"DeliveryAddressDescription",canonize:!1},{property:"DeliveryAddressName",canonize:!1},{property:"MerchantDomain",canonize:!0},{property:"PaymentMeanDescription",canonize:!1},{property:"PaymentMeanName",canonize:!1},{property:"PurchaseDate",canonize:!0},{property:"TotalAmount",canonize:!0},{property:"UserTitle",canonize:!1}],SECURENOTE:[{property:"Title",canonize:!1},{property:"Content",canonize:!1}],SECURENOTE_CATEGORY:[{property:"CategoryName",canonize:!1}],SOCIALSECURITYSTATEMENT:[{property:"SocialSecurityNumber",canonize:!0}]}},96457:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.mergeChangeHistories=void 0;const o=r(16516);t.mergeChangeHistories=function(e,t){const r=(0,o.eqBy)((0,o.prop)("Id")),n=(0,o.ascend)((0,o.prop)("ModificationDate")),i=(0,o.unionWith)(r,e.ChangeSets,t.ChangeSets);return{...e,ChangeSets:(0,o.sort)(n,i)}}},1947:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.mergeLocalAndRemote=t.getMergeableTransactions=t.supportedTransactionTypesForMerge=t.unMergeableTransaction=void 0;const o=r(16516),n=r(96457),i=r(75270);t.unMergeableTransaction=["DEFAULT_AUTHENTIFIANT","DEFAULT_CONFIDENTIAL","DEFAULT_IDENTITY","DEFAULT_PAYMENTMEANS","DEFAULT_MISC","DEFAULT_REWARDCARD","POINTS","SETTINGS","SECURITYALERTS"],t.supportedTransactionTypesForMerge=["DATA_CHANGE_HISTORY"],t.getMergeableTransactions=function(e,r){const n=(0,o.map)((0,o.prop)("itemId"),r);return e.filter((e=>!t.unMergeableTransaction.includes(e.type))).filter((e=>"BACKUP_REMOVE"!==e.action)).filter((e=>n.includes(e.identifier))).filter((e=>t.supportedTransactionTypesForMerge.includes(e.type)))},t.mergeLocalAndRemote=function(e,t){const r=[],o=e.changeHistories.map((e=>{const o=(0,i.findTransaction)(e.Id,t),a=n.mergeChangeHistories(e,o.content);return r.push({...o,content:a}),a}));return{personalData:{...e,changeHistories:o},remoteTransactions:r}}},37744:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0});const o=r(16516),n=r(32626),i=r(95623),a=r(1347),s=r(70252),c=r(1947),d=r(63002),u=r(75270),l=r(83638),p=r(32523),S=r(58582),g=r(51064);t.default=function(e,t,r,m){const{changesToUpload:A,editConflicts:y,transactionsToDownload:E}=function(e,t,r){if(0===t.length)return{changesToUpload:e,transactionsToDownload:t,editConflicts:[]};const n=(0,o.intersection)((0,o.pluck)("identifier",t),(0,o.pluck)("itemId",e));if(0===e.filter((e=>n.includes(e.itemId))).length)return{changesToUpload:e,transactionsToDownload:t,editConflicts:[]};const i=(0,o.reject)((e=>(0,d.isRemovalUploadChange)(e)&&n.includes(e.itemId)),e),a=(0,o.reject)((e=>((0,u.isRemovalTransaction)(e)||r.has(e.identifier))&&n.includes(e.identifier)),t);return{changesToUpload:i,transactionsToDownload:a,editConflicts:(0,o.intersection)((0,o.pluck)("identifier",a),(0,o.pluck)("itemId",i))}}(t.changesToUpload,m,r);if(0===y.length)return{personalData:{...t,changesToUpload:A},remoteTransactions:[...E]};const f=`[Sync] conflict on local/remote changes, ${y.length} conflicts`;i.default.log(f),(0,s.sendExceptionLog)({error:new Error(f),code:n.ExceptionCriticality.WARNING});const{duplicateObjects:T,uploadChangesWithDuplicates:v,usableRemoteTransactions:h}=function(e,t,r,o,n){if(0===n.length)return{uploadChangesWithDuplicates:r,usableRemoteTransactions:o,duplicateObjects:[]};const i=(0,p.generateLocalDuplicates)(n,t,o),a=i.map((e=>e.duplicate)),s=a.map((e=>({action:"BACKUP_EDIT",backupDate:0,identifier:e.Id,objectType:"transaction",time:Date.now(),type:(0,l.getTransactionTypeFromDataModelType)(e.kwType),content:e})));s.forEach((({backupDate:t,identifier:r,type:o})=>{e(S.announcements.transactionDuplicated(o,r,t))}));const c=i.map((e=>e.duplicatedFromId));return{uploadChangesWithDuplicates:r.filter((e=>!c.includes(e.itemId))).concat(a.map(g.createUploadChangeForItem)),duplicateObjects:a,usableRemoteTransactions:o.filter((e=>!n.includes(e.identifier)||c.includes(e.identifier))).concat(s)}}(e,t,A,E,y),_=(0,a.saveObjects)(t,T),I=c.getMergeableTransactions(h,v);if(0===I.length)return{personalData:{..._,changesToUpload:v},remoteTransactions:[...h]};const C=c.mergeLocalAndRemote(_,I);return{personalData:{...C.personalData,changesToUpload:v},remoteTransactions:[...h,...C.remoteTransactions]}}},67805:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getSyncEventErrorName=t.getSyncEventExtent=t.createInitialSyncEvent=void 0;const o=r(21877),n=r(32626),i=r(37898),a=r(17825),s=r(92263),c=r(14656),d=r(20750);t.createInitialSyncEvent=(e,r,o)=>({extent:(0,t.getSyncEventExtent)(e),trigger:r,timestamp:o,duration:{sync:0,chronological:0,treat_problem:0,sharing:0}});t.getSyncEventExtent=e=>{switch(e){case i.SyncType.LIGHT_SYNC:return o.Extent.Light;case i.SyncType.FULL_SYNC:return o.Extent.Full;case i.SyncType.FIRST_SYNC:return o.Extent.Initial;default:(0,a.assertUnreachable)(e)}},t.getSyncEventErrorName=function(e){let t=o.ErrorName.Other;return(0,s.isCarbonError)(e)&&(e.errorType===c.HttpError?t=(({errorCode:e})=>e===c.HttpErrorCode.CLIENT_ERROR||e===c.HttpErrorCode.SERVER_ERROR||e===c.HttpErrorCode.STATUS_CODE)(e)?o.ErrorName.HttpStatus:o.ErrorName.HttpIo:e.errorType===d.WSError&&(t=o.ErrorName.ResponseContent)),e instanceof Error&&e?.message&&void 0!==n.AuthenticationCode[e.message]&&(t=o.ErrorName.Authentication),t}},41007:function(e,t,r){var o=this&&this.__createBinding||(Object.create?function(e,t,r,o){void 0===o&&(o=r);var n=Object.getOwnPropertyDescriptor(t,r);n&&!("get"in n?!t.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,o,n)}:function(e,t,r,o){void 0===o&&(o=r),e[o]=t[r]}),n=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||o(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),n(r(37729),t)},37729:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.makeEventLoggerSyncMonitor=void 0;const o=r(75439),n=r(21877);t.makeEventLoggerSyncMonitor=(e,t={sendLogOnSyncComplete:!0})=>{let r=(0,o.getEmptyState)();return{monitor:async(i,a)=>{r=(0,o.reduceState)(r,i,a);const{syncEvent:s}=r,c=t.sendLogOnSyncComplete;switch(i.type){case"SharingSyncInvalidSyncData":await e.logSync(new n.UserSyncEvent({errorStep:n.ErrorStep.Sharing,errorName:i.errorName,itemGroupId:i.itemGroupId,duration:s.duration,error:s.error,extent:s.extent,fullBackupSize:s.fullBackupSize,incomingDeleteCount:s.incomingDeleteCount,incomingUpdateCount:s.incomingUpdateCount,outgoingDeleteCount:s.outgoingDeleteCount,outgoingUpdateCount:s.outgoingUpdateCount,timestamp:s.timestamp,trigger:s.trigger,treatProblem:s.treatProblem}));break;case"SyncFinished":case"SyncFailed":c&&(await e.logSync(new n.UserSyncEvent({duration:s.duration,error:s.error,extent:s.extent,fullBackupSize:s.fullBackupSize,incomingDeleteCount:s.incomingDeleteCount,incomingUpdateCount:s.incomingUpdateCount,outgoingDeleteCount:s.outgoingDeleteCount,outgoingUpdateCount:s.outgoingUpdateCount,timestamp:s.timestamp,trigger:s.trigger,treatProblem:s.treatProblem})),e.flushEventQueue())}},getSyncEvent:()=>r.syncEvent}}},75439:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.reduceState=t.getEmptyState=void 0;const o=r(67805),n=r(21877),i=(e,t)=>({...e,syncEvent:{...e.syncEvent,...t}}),a=(e,t)=>e>0&&t>0?n.TreatProblem.UploadAndDownload:t>0?n.TreatProblem.Upload:e>0?n.TreatProblem.Download:n.TreatProblem.NotNeeded,s=e=>Date.now()-e;t.getEmptyState=()=>({syncStartTimestamp:null,chronologicalStartTimestamp:null,treatProblemStartTimestamp:null,sharingSyncStartTimestamp:null,syncEvent:null});t.reduceState=(e,t,r)=>{switch(t.type){case"SyncStarted":return((e,{trigger:t,syncType:r},{timestamp:n})=>({...e,syncStartTimestamp:n,syncEvent:(0,o.createInitialSyncEvent)(r,t,Math.floor(n/1e3))}))(e,t,r);case"ChronologicalSyncStarted":return((e,{timestamp:t})=>({...e,chronologicalStartTimestamp:t}))(e,r);case"ChronologicalSyncFinished":return((e,{fullBackupFileSize:t})=>i(e,{duration:{...e.syncEvent.duration,chronological:s(e.chronologicalStartTimestamp)},fullBackupSize:t||0}))(e,t);case"ChronologicalSyncFailed":return(e=>i(e,{duration:{...e.syncEvent.duration,chronological:s(e.chronologicalStartTimestamp)},error:{step:n.ErrorStep.Chronological,name:n.ErrorName.Other}}))(e);case"TreatProblemStarted":return((e,{timestamp:t})=>({...e,treatProblemStartTimestamp:t}))(e,r);case"TreatProblemDiffComputed":return((e,{transactionsToDownloadCount:t,transactionsToUploadCount:r})=>i(e,{treatProblem:a(t,r)}))(e,t);case"TreatProblemFinished":return(e=>i(e,{duration:{...e.syncEvent.duration,treat_problem:s(e.treatProblemStartTimestamp)}}))(e);case"TreatProblemFailed":return(e=>i(e,{duration:{...e.syncEvent.duration,treat_problem:s(e.treatProblemStartTimestamp)},error:{step:n.ErrorStep.TreatProblem,name:n.ErrorName.Other}}))(e);case"TreatSharingKeysFailed":return(e=>i(e,{error:{step:n.ErrorStep.TreatProblem,name:n.ErrorName.Other}}))(e);case"SharingSyncStarted":return((e,{timestamp:t})=>({...e,sharingSyncStartTimestamp:t}))(e,r);case"SharingSyncFinished":return(e=>i(e,{duration:{...e.syncEvent.duration,sharing:s(e.sharingSyncStartTimestamp)}}))(e);case"SharingSyncFailed":return(e=>i(e,{duration:{...e.syncEvent.duration,sharing:s(e.sharingSyncStartTimestamp)},error:{step:n.ErrorStep.Sharing,name:n.ErrorName.Other}}))(e);case"DecipherFinished":return((e,{updatesCount:t,deletesCount:r})=>{const o=e.syncEvent.incomingUpdateCount||0,n=e.syncEvent.incomingDeleteCount||0;return i(e,{incomingUpdateCount:o+t,incomingDeleteCount:n+r})})(e,t);case"UploadSucceeded":return((e,{updatedCount:t,deletedCount:r})=>{const o=e.syncEvent.outgoingUpdateCount||0,n=e.syncEvent.outgoingDeleteCount||0;return i(e,{outgoingUpdateCount:o+t,outgoingDeleteCount:n+r})})(e,t);case"SyncFinished":return(e=>i(e,{duration:{...e.syncEvent.duration,sync:s(e.syncStartTimestamp)}}))(e);case"SyncFailed":return((e,{error:t})=>i(e,{duration:{...e.syncEvent.duration,sync:s(e.syncStartTimestamp)},error:{...e.syncEvent.error,name:(0,o.getSyncEventErrorName)(t)}}))(e,t);case"SyncTypeChanged":return((e,{syncType:t})=>i(e,{extent:(0,o.getSyncEventExtent)(t)}))(e,t)}return e}},75270:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.findTransaction=t.isRemovalTransaction=t.isEditionTransaction=t.createNewTransaction=t.getTransactionXml=t.supportedForUploadKwTypeToTransactionTypeMap=t.supportedDataTypesForUpload=void 0;const o=r(16516),n=r(32626),i=r(83638),a=r(95623),s=r(70252),c=r(53),d=r(56668),u=r(61797),l=r(58582);function p(e){return t.supportedForUploadKwTypeToTransactionTypeMap[e.kwType]?(0,u.getDashlaneXml)(e):(a.default.error(`Unsupported kwType "${e.kwType}" for transformation to XML`),"")}t.supportedDataTypesForUpload=["KWAddress","KWAuthCategory","KWAuthentifiant","KWBankStatement","KWCollection","KWCompany","KWDataChangeHistory","KWDriverLicence","KWEmail","KWFiscalStatement","KWGeneratedPassword","KWIdentity","KWIDCard","KWPasskey","KWPassport","KWPaymentMean_creditCard","KWPersonalWebsite","KWPhone","KWSecret","KWSecureFileInfo","KWSecureNote","KWSecureNoteCategory","KWSecurityBreach","KWSettingsManagerApp","KWSocialSecurityStatement"],t.supportedForUploadKwTypeToTransactionTypeMap=(0,o.pick)(t.supportedDataTypesForUpload,i.DATAMODEL_TYPE_TO_TRANSACTION_TYPE),t.getTransactionXml=p,t.createNewTransaction=async function(e,r,o){try{const{itemId:n,kwType:i,content:a}=o,s=t.supportedForUploadKwTypeToTransactionTypeMap[i];if("REMOVE"===o.action){const e={type:s,action:"BACKUP_REMOVE",identifier:n,objectType:"transaction",time:(0,c.getUnixTimestamp)(),backupDate:0,content:""};return Promise.resolve(e)}const u=(0,d.utf16ToDeflatedUtf8)(p(a)),S=await e.encrypt(u),g=0,m={type:s,action:"BACKUP_EDIT",identifier:n,objectType:"transaction",time:(0,c.getUnixTimestamp)(),backupDate:g,content:S};return r(l.announcements.transactionCiphered(s,n,g)),m}catch(e){const t=new Error(`[Sync] - upload: failed to create transaction. ${e}`);return(0,s.sendExceptionLog)({error:t,code:n.ExceptionCriticality.ERROR}),null}};const S=(0,o.propEq)("identifier");t.isEditionTransaction=(0,o.propEq)("action","BACKUP_EDIT"),t.isRemovalTransaction=(0,o.propEq)("action","BACKUP_REMOVE"),t.findTransaction=(0,o.curry)(((e,t)=>(0,o.find)(S(e),t)))},83638:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.TransactionType=t.getTransactionTypeFromDataModelType=t.getDataModelTypeFromTransactionType=t.DATAMODEL_TYPE_TO_TRANSACTION_TYPE=void 0;const o=r(32626);Object.defineProperty(t,"DATAMODEL_TYPE_TO_TRANSACTION_TYPE",{enumerable:!0,get:function(){return o.DATAMODEL_TYPE_TO_TRANSACTION_TYPE}}),Object.defineProperty(t,"getDataModelTypeFromTransactionType",{enumerable:!0,get:function(){return o.getDataModelTypeFromTransactionType}}),Object.defineProperty(t,"getTransactionTypeFromDataModelType",{enumerable:!0,get:function(){return o.getTransactionTypeFromDataModelType}}),Object.defineProperty(t,"TransactionType",{enumerable:!0,get:function(){return o.TransactionType}})},90826:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.countRemoveTransactions=t.countEditionTransactions=void 0;const r=(e,t)=>e.reduce(((e,r)=>r.identifier&&r.action===t?e+1:e),0);t.countEditionTransactions=e=>r(e,"BACKUP_EDIT");t.countRemoveTransactions=e=>r(e,"BACKUP_REMOVE")},58217:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getMissingIdentifiers=void 0;const o=r(32626),n=r(16516),i=r(84977),a=r(58582),s=r(51064);t.getMissingIdentifiers=function(e,t,r){e(a.announcements.treatProblemSummaryStarted(t,r));const c=o.transactionTypes.reduce(((c,d)=>{return u=c,l=function(e,t,r,c){const d=o.TRANSACTION_TYPE_TO_DATAMODEL_TYPE[t];if(!d||!i.default[d])return{missingLocally:[],missingRemotely:[]};const u=i.default[d];if(!r[u])return{missingLocally:[],missingRemotely:[]};const l=c.transactions[t]||{},p=new Set(r.changesToUpload.filter((({kwType:e})=>e===d)).map((({itemId:e})=>e))),S=r[u].filter((({Id:e})=>!p.has(e))),g=Object.keys(l).filter((e=>!p.has(e))),m=(0,n.difference)(g,(0,n.pluck)("Id",S));m.forEach((r=>{e(a.announcements.treatProblemSummaryCompared(a.TreatProblemSummaryComparedResult.Download,t,r,{cause:a.TreatProblemSummaryComparedCause.Missing,remoteDate:l[r]}))}));const A=a.announcements.treatProblemSummaryCompared;return S.reduce(((r,{Id:o,LastBackupTime:n})=>{const i=l[o],c=1e3*n;if(!i||i/1e3<n){const n=i?{remoteDate:i}:{};e(A(a.TreatProblemSummaryComparedResult.Upload,t,o,{cause:i?a.TreatProblemSummaryComparedCause.OutOfDate:a.TreatProblemSummaryComparedCause.Missing,localDate:c,...n}));const u=(0,s.createUploadChange)({action:"EDIT",kwType:d,itemId:o});return{missingLocally:r.missingLocally,missingRemotely:[...r.missingRemotely,u]}}return i/1e3>n?(e(A(a.TreatProblemSummaryComparedResult.Download,t,o,{cause:a.TreatProblemSummaryComparedCause.OutOfDate,localDate:c,remoteDate:i})),{missingLocally:[...r.missingLocally,o],missingRemotely:r.missingRemotely}):(e(A(a.TreatProblemSummaryComparedResult.UpToDate,t,o,{localDate:c})),r)}),{missingLocally:m,missingRemotely:[]})}(e,d,t,r),{missingLocally:[...u.missingLocally,...l.missingLocally],missingRemotely:[...u.missingRemotely,...l.missingRemotely]};var u,l}),{missingLocally:[],missingRemotely:[]});return e(a.announcements.treatProblemSummaryFinished()),c}},63002:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getUploadChangesWithoutSettings=t.isSettingUploadChange=t.countDeletionUploadChanges=t.countEditionUploadChanges=t.findUploadChange=t.isRemovalUploadChange=t.isEditionUploadChange=void 0;const o=r(16516),n=(0,o.propEq)("itemId");t.isEditionUploadChange=(0,o.propEq)("action","EDIT"),t.isRemovalUploadChange=(0,o.propEq)("action","REMOVE"),t.findUploadChange=(0,o.curry)(((e,t)=>(0,o.find)(n(e),t)));t.countEditionUploadChanges=e=>e.filter((e=>(0,t.isEditionUploadChange)(e))).length;t.countDeletionUploadChanges=e=>e.filter((e=>(0,t.isRemovalUploadChange)(e))).length,t.isSettingUploadChange=(0,o.propEq)("kwType","KWSettingsManagerApp");t.getUploadChangesWithoutSettings=e=>(0,o.reject)(t.isSettingUploadChange,e)},39048:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.UploadChangeStatus=void 0,function(e){e.ReadyForNextSync="ReadyForNextSync",e.ScheduledForSync="ScheduledForSync"}(t.UploadChangeStatus||(t.UploadChangeStatus={}))},62210:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.markChangeAsReadyForNextSync=t.markChangeAsScheduled=t.filterOutUploadedChanges=void 0;const o=r(39048);t.filterOutUploadedChanges=(e,t)=>e.filter((({itemId:e,status:r})=>!t.includes(e)||r!==o.UploadChangeStatus.ScheduledForSync));const n=e=>t=>({...t,status:e});t.markChangeAsScheduled=n(o.UploadChangeStatus.ScheduledForSync),t.markChangeAsReadyForNextSync=n(o.UploadChangeStatus.ReadyForNextSync)},51064:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.createUploadChangeForDeletion=t.createUploadChangeForItem=t.createUploadChange=void 0;const o=r(39048);t.createUploadChange=({itemId:e,kwType:t,action:r="EDIT",status:n=o.UploadChangeStatus.ReadyForNextSync})=>({itemId:e,kwType:t,action:r,status:n});t.createUploadChangeForItem=e=>(0,t.createUploadChange)((e=>({itemId:e.Id,kwType:e.kwType}))(e));t.createUploadChangeForDeletion=e=>r=>(0,t.createUploadChange)({itemId:r,kwType:e,action:"REMOVE"})},26632:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.isUploadNeeded=t.upload=t.gatherContentsToUpload=void 0;const o=r(16516),n=r(63002),i=r(75270),a=r(90826),s=r(84977),c=r(58582),d=Object.keys(i.supportedForUploadKwTypeToTransactionTypeMap),u=(0,o.flip)(o.contains)(d),l=(0,o.compose)(o.uniq,(0,o.filter)((0,o.propSatisfies)(u,"kwType")),(0,o.filter)((0,o.propSatisfies)(Boolean,"itemId")),(0,o.defaultTo)([]));function p(e,t){return l(e.changesToUpload).map((r=>{const{action:i,kwType:a,itemId:c}=r,d=s.default[a];if((0,n.isRemovalUploadChange)(r))return{action:i,kwType:a,itemId:c,content:null};if("KWSettingsManagerApp"===r.kwType&&"SETTINGS_userId"===c)return{action:i,kwType:a,itemId:c,content:t};const u=(0,o.find)((0,o.propEq)("Id",c),e[d]);return u?{action:i,kwType:a,itemId:c,content:u}:null})).filter(o.identity)}t.gatherContentsToUpload=p;const S=async(e,t,r)=>{t(c.announcements.cipherStarted());const o=r.map((r=>(0,i.createNewTransaction)(e,t,r))),n=await Promise.all(o);return t(c.announcements.cipherFinished()),n.filter(Boolean)};t.upload=async function(e){const{announce:t,cryptoCenterService:r,personalData:o,personalSettings:n}=e,i=p(o,n),s=await S(r,t,i);if(0===s.length)return{uploadedTransactionsId:[]};try{const r=(0,a.countEditionTransactions)(s),o=(0,a.countRemoveTransactions)(s);t(c.announcements.uploadRequested(r,o));const n=await e.ws.backup.upload({login:e.login,uki:e.uki,lock:e.lock,transactions:s,privateKey:e.privateKey,publicKey:e.publicKey}),i=s.reduce(((e,t)=>(t.identifier&&e.push(t.identifier),e)),[]);return t(c.announcements.uploadSucceeded(r,o,n.timestamp)),{uploadedTransactionsId:i,lastSyncTimestamp:Number(n.timestamp),summary:n.summary}}catch(e){throw t(c.announcements.uploadFailed(e)),e}},t.isUploadNeeded=function(e){const t=(0,o.propOr)([],"changesToUpload",e);return 0!==t.length&&l(t).length>0}},31982:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.countSyncSummaryTransactions=void 0,t.countSyncSummaryTransactions=function(e){return e?Object.keys(e.transactions).reduce(((t,r)=>t+(Object.keys(e.transactions[r])||[]).length),0):0}},25963:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getLastSuccessfulSyncTimestamp=t.sync=t.MAX_SYNC_TIMESTAMP=t.MIN_SYNC_TIMESTAMP=void 0;const o=r(16516),n=r(37898),i=r(36081),a=r(26632),s=r(37744),c=r(95623),d=r(62844),u=r(58582),l=r(35668),p=r(63002),S=r(45291),g=r(70252),m=r(92263),A=(e,t)=>{const r=new Set,o=e&&e.items||[];for(const e of o)e&&"object"==typeof e&&e.id&&r.add(e.id);for(const e of t.items)e&&"object"==typeof e&&e.itemId&&r.add(e.itemId);return r};function y(e,t){const r=Number(t);return""===t||(0,o.isNil)(t)||isNaN(r)?e:r}t.MIN_SYNC_TIMESTAMP=999999999999,t.MAX_SYNC_TIMESTAMP=2070753783e3,t.sync=async function(e){const{announce:r,storeService:E}=e;let f;try{const T=E.getState();!function(e){switch(e.syncType){case n.SyncType.FIRST_SYNC:{if(0!==e.lastSyncTimestamp)throw new Error("Sync Error: lastSyncTimestamp should be 0 on First Sync");const t=(0,p.getUploadChangesWithoutSettings)(e.personalData?.changesToUpload??[]);if(t?.length)throw new Error("Sync Error: should not have changes to upload on First Sync");break}case n.SyncType.LIGHT_SYNC:case n.SyncType.FULL_SYNC:if(null===e.lastSyncTimestamp||e.lastSyncTimestamp<t.MIN_SYNC_TIMESTAMP||e.lastSyncTimestamp>t.MAX_SYNC_TIMESTAMP){const t=new Error("Sync Error: non valid lastSyncTimestamp"),r=m.CarbonError.fromAnyError(t).addContextInfo("SYNC","verifySyncArgs").addAdditionalInfo({libError:`lastSyncTimestamp: ${e.lastSyncTimestamp}`});throw(0,g.sendExceptionLog)({error:r}),t}break;default:{const t=new Error("Sync Error: unexpected syncType"),r=m.CarbonError.fromAnyError(t).addContextInfo("SYNC","verifySyncArgs").addAdditionalInfo({libError:`syncType: ${e.syncType}`});throw(0,g.sendExceptionLog)({error:r}),t}}}(e);const v=e.personalData||E.getPersonalData(),{isUploadEnabled:h}=E.getSyncStatus();c.Debugger.log(`[Sync] User allowed to Upload: ${h}`),h&&(0,a.isUploadNeeded)(v)&&(c.Debugger.log("[Sync] Found local data to upload"),e.syncType=n.SyncType.FULL_SYNC,r(u.announcements.syncTypeChanged(e.syncType))),E.dispatch((0,S.scheduleChangesForSync)()),f=await(0,i.latest)(e);const _=()=>({...(0,o.dissoc)("lock",f),syncType:e.syncType,isUploadEnabled:f.isUploadEnabled,lastSyncTimestamp:y(e.lastSyncTimestamp,f.lastSyncTimestamp),uploadedTransactions:[],summary:f.summary});if((0,d.changeMPinProgressSelector)(T))return await(0,l.unlock)(e,f.lock),_();if(e.syncType!==n.SyncType.FULL_SYNC||!f.isUploadEnabled)return f.isUploadEnabled&&await(0,l.unlock)(e,f.lock),_();const I=A(f.sharing2,E.getSharingData()),{personalData:C,remoteTransactions:D}=(0,s.default)(r,v,I,f.clearTransactions),O=(0,o.isNil)(e.pushKeysToServer)?null:{publicKey:e.pushKeysToServer.public,privateKey:e.pushKeysToServer.private},P={login:e.login,uki:e.uki,lock:f.lock,ws:e.ws,cryptoCenterService:e.dataEncryptorService.getInstance(),personalData:C,personalSettings:E.getPersonalSettings(),...O,announce:r},R=await(0,a.upload)(P);return 0===R.uploadedTransactionsId.length&&(0,l.unlock)(e,f.lock),E.dispatch((0,S.clearUploadedChanges)(R.uploadedTransactionsId)),{...(0,o.dissoc)("lock",f),clearTransactions:D,syncType:e.syncType,isUploadEnabled:f.isUploadEnabled,uploadedTransactions:R.uploadedTransactionsId,lastSyncTimestamp:y(e.lastSyncTimestamp,R.lastSyncTimestamp),summary:R.summary||f.summary}}catch(t){throw f&&await(0,l.unlock)(e,f.lock),t&&t.message,t}finally{E.dispatch((0,S.unscheduleRemainingChanges)())}},t.getLastSuccessfulSyncTimestamp=y},36081:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.buildFullBackupFileMap=t.buildLatestArgs=t.latest=void 0;const o=r(35088),n=r(16516),i=r(32626),a=r(63713),s=r(95623),c=r(37898),d=r(58582),u=r(35668),l=r(92263),p=r(70252);function S(e){const{lastSyncTimestamp:t,login:r,needsKeys:n,storeService:i,syncType:a,transactionIds:s,uki:d}=e,u=s&&s.length,S={lock:a===c.SyncType.FULL_SYNC||u?(0,o.v4)():"nolock",login:r,needsKeys:n,sharing2:!0,teamAdminGroups:!0,timestamp:t,version:i.getPlatform().info.appVersion,uki:d};switch(s&&(S.transactions=s),a){case c.SyncType.FIRST_SYNC:if(0!==S.timestamp)throw new Error("timestamp should be null for FIRST_SYNC");break;case c.SyncType.LIGHT_SYNC:case c.SyncType.FULL_SYNC:if(isNaN(S.timestamp))S.timestamp=0;else if(null===S.timestamp||S.timestamp<999999999999||S.timestamp>2070753783e3){const e=new Error("non valid lastSyncTimestamp"),t=l.CarbonError.fromAnyError(e).addContextInfo("SYNC","buildLatestArgs").addAdditionalInfo({libError:`lastSyncTimestamp: ${S.timestamp}`});throw(0,p.sendExceptionLog)({error:t}),e}break;default:{const e=new Error("unexpected syncType"),t=l.CarbonError.fromAnyError(e).addContextInfo("SYNC","buildLatestArgs").addAdditionalInfo({libError:`syncType: ${a}`});throw(0,p.sendExceptionLog)({error:t}),e}}return S}function g(e){const t=new Map;return e&&e.forEach((e=>{t.set(e.identifier,e.backupDate)})),t}t.latest=async function(e){const t=S(e),{announce:r}=e;let o;try{const{lock:n,needsKeys:a}=t;if(r(d.announcements.latestRequested(n,a)),o=await e.ws.backup.latest(t),"message"===o.objectType)throw"Incorrect authentification"===o.content?new Error(i.AuthenticationCode[i.AuthenticationCode.INVALID_UKI]):"Temporarily disabled"===o.content?new Error("Sync service unavailable"):new Error(i.AuthenticationCode[i.AuthenticationCode.UNKNOWN_SYNC_ERROR]);if(void 0!==o.objectType)throw new Error("unexpected objectType");if(!o.transactionList)throw s.default.log("Backup sync failed"),new Error("Backup sync failed");if(!function(e){if(e.find((e=>!e.backupDate||e.backupDate<999999999999||e.backupDate>2070753783e3)))return!1;return!0}(o.transactionList))throw new Error("wrongly formatted backupDate")}catch(e){throw r(d.announcements.latestFailed(e)),e}r(d.announcements.latestSucceeded(o));const c=g(o.fullBackupFileList);try{const i=await a.decrypt(e.dataEncryptorService.getInstance(),r,o.fullBackupFile,c,o.transactionList);return{clearTransactions:i,sharing2:o.sharing2,lastSyncTimestamp:o.timestamp,lock:t.lock,keys:o.keys,isUploadEnabled:(0,n.defaultTo)(!1,o.uploadEnabled),summary:o.summary,fullBackupFileSize:c.size}}catch(r){throw(0,u.unlock)(e,t.lock),r}},t.buildLatestArgs=S,t.buildFullBackupFileMap=g},37898:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.SyncType=void 0,function(e){e[e.FIRST_SYNC=0]="FIRST_SYNC",e[e.LIGHT_SYNC=1]="LIGHT_SYNC",e[e.FULL_SYNC=2]="FULL_SYNC"}(t.SyncType||(t.SyncType={}))},35668:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.unlock=void 0;const o=r(95623);t.unlock=async function(e,t){if(!function(e){return e&&"nolock"!==e}(t))return;const{login:r,ws:n,uki:i}=e;try{await n.backup.unlock({login:r,uki:i,lock:t})}catch(e){(0,o.logWarn)({tag:"Sync",message:`Unlock failed: ${e}`})}}},59890:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.binaryFindLastIndex=t.binaryFindIndex=t.binaryContains=void 0;const o=r(16516);t.binaryContains=(0,o.curry)((function e(t,r){const o=t.length;if(0===o)return!1;const n=Math.floor(o/2),i=t[n];if(i===r)return!0;if(i<r){return e(t.slice(n+1,o),r)}return e(t.slice(0,n),r)})),t.binaryFindIndex=function e(t,r,o){const n=t.length;if(0===n)return-1;const i=o?Math.min(o,n-1):Math.floor(n/2);if(r(t[i])){const o=e(t.slice(0,i),r);return-1===o?i:o}{const o=e(t.slice(i+1,n),r);return-1===o?-1:i+o+1}},t.binaryFindLastIndex=function e(t,r,o){const n=t.length;if(0===n)return-1;const i=o?Math.min(o,n-1):Math.floor(n/2);if(r(t[i])){const o=e(t.slice(i+1,n),r);return-1===o?i:i+o+1}return e(t.slice(0,i),r)}},72365:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.makeDataEncryptorService=t.setObfuscatingKey=void 0;const o=r(56668);t.setObfuscatingKey=function(e){return e.setInstance({raw:[214,238,100,106,146,140,114].concat([110,232,72,104,108,100,204]).map((e=>e/2)).map((e=>String.fromCharCode(e))).join("")},""),e},t.makeDataEncryptorService=function(e){let t=null;return{setInstance:(r,n,i)=>{t=(0,o.makeCryptoCenterService)(r,n,e,i)},getInstance:()=>{if(!t)throw new Error("makeDataEncryptorService: you must call setInstance(password,serverKey) before getting the instance");return t},close:()=>{t=null},hasBeenSet:()=>Boolean(t)}}},56584:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.convertDashlaneSecureDataKWC3ToTransportableData=void 0;const o=r(16038);t.convertDashlaneSecureDataKWC3ToTransportableData=e=>{const t=e.salt,r=(0,o.utf8ToBase64Buffer)(e.version),n=e.encryptedData;return(0,o.concatBuffers)(t,r,n)}},16038:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.convertBufferToHex=t.deflateBuffer=t.removeQtCompressionHeader=t.addQtCompressHeader=t.isBase64Encoded=t.getSubDataByteArray=t.concatBuffers=t.ab2str=t.str2ab=t.base64ToBigInteger=t.pemToSpki=t.spkitoPem=t.pkcs8toPem=t.CrlfToLF=t.pemTopkcs8=t.base64BufferToText=t.utf8ToBase64=t.base64ToUtf8=t.utf8ToBase64Buffer=t.base64BufferToUtf8=t.arrayBufferToText=t.uint8ArrayToText=t.utf8ChunkDecode=t.utf8ChunkEncode=t.base64ToBuffer=t.bufferToBase64=t.applyXorOnBuffers=void 0;const o=r(93513),n=r(63969),i=r(63290),a=r(97224),s=r(10001),c=r(93347),d=r(30543),u=16383,l=Math.pow(10,6),p="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",S=new Uint8Array(256);for(let e=0;e<p.length;e++)S[p.charCodeAt(e)]=e;function g(e){const t=e.length,r=[];for(let o=0;o<t;o+=3)r.push(p[e[o]>>2]),r.push(p[(3&e[o])<<4|e[o+1]>>4]),r.push(p[(15&e[o+1])<<2|e[o+2]>>6]),r.push(p[63&e[o+2]]);return r.join("")}function m(e,t=l){const r=new Uint8Array(e),o=r.length,n=t%3,i=0===n?t:t+(3-n),a=Math.ceil(o/i);let s="",c=-1;for(;c++<a;){const e=c*i,t=c===a-1?o:(c+1)*i,n=g(r.slice(e,t));s=s.concat(n)}return o%3==2?s.substring(0,s.length-1)+"=":o%3==1?s.substring(0,s.length-2)+"==":s}function A(e){let t=.75*e.length;const r=e.length;let o,n,i,a,s,c=0;e.endsWith("=")&&(t--,"="===e[e.length-2]&&t--);const d=new ArrayBuffer(t),u=new Uint8Array(d);for(o=0;o<r;o+=4)n=S[e.charCodeAt(o)],i=S[e.charCodeAt(o+1)],a=S[e.charCodeAt(o+2)],s=S[e.charCodeAt(o+3)],u[c++]=n<<2|i>>4,u[c++]=(15&i)<<4|a>>2,u[c++]=(3&a)<<6|63&s;return d}function y(e,t=l){const r=e.length;if(0===r)return"";let o="",n=0,i=Math.min(n+t,r);for(;i<=r;){const a=e.charCodeAt(i-1);if(a>=55296&&a<=56319){if(i++,i>r)throw new Error("Invalid string provided to utf8ChunkEncode");continue}const s=e.slice(n,i),c=d.encode(s);if(o=o.concat(c),i===r)break;n=i,i=Math.min(n+t,r)}return o}function E(e){return e>>6==2}function f(e,t=l){const r=e.length;if(0===r)return"";let o="",n=0,i=Math.min(n+t,r);for(;i<=r;){const s=e.charCodeAt(i-1);if((E(a=s)||function(e){return e>>5==6||e>>4==14||e>>3==30}(a))&&i<r){if(E(e.charCodeAt(i))){i++;continue}}const c=e.slice(n,i),u=d.decode(c);if(o=o.concat(u),i===r)break;n=i,i=Math.min(n+t,r)}var a;return o}function T(e){const t=new Uint16Array(e),r=t.length;let o="",n=u;for(let e=0;e<r;e+=n)e+n>r&&(n=r-e),o+=String.fromCharCode.apply(null,t.subarray(e,e+n));return o}function v(e){return T(new Uint8Array(e))}t.applyXorOnBuffers=function(e,t){if(e.byteLength!==t.byteLength)throw new Error("xorBuffer: buffers are not same length");const r=new Uint8Array(e),o=new Uint8Array(t),n=e.byteLength,i=new Uint8Array(n);for(let e=0;e<n;e++)i[e]=r[e]^o[e];return i.buffer},t.bufferToBase64=m,t.base64ToBuffer=A,t.utf8ChunkEncode=y,t.utf8ChunkDecode=f,t.uint8ArrayToText=T,t.arrayBufferToText=v,t.base64BufferToUtf8=function(e){const t=m(e);return f(o.decode(t))},t.utf8ToBase64Buffer=function(e){const t=y(e);return A(o.encode(t))},t.base64ToUtf8=function(e){return f(o.decode(e))},t.utf8ToBase64=function(e){const t=y(e);return o.encode(t)},t.base64BufferToText=function(e){const t=m(e);return o.decode(t)},t.pemTopkcs8=function(e){const t=n.privateKeyFromPem(e),r=n.privateKeyToAsn1(t),o=n.wrapRsaPrivateKey(r);return h(s.toDer(o).getBytes())};function h(e){const t=new ArrayBuffer(e.length),r=new Uint8Array(t);for(let t=0;t<e.length;++t)r[t]=e.charCodeAt(t);return t}function _(...e){const t=e.reduce(((e,t)=>e+t.byteLength),0),r=new Uint8Array(t);return e.reduce(((e,t)=>(r.set(new Uint8Array(t),e),e+t.byteLength)),0),r.buffer}t.CrlfToLF=e=>e.replace(/(?:\\[r]|[\r\n]+)+/g,"\n"),t.pkcs8toPem=function(e){const r=new i.ByteBuffer(e),o=s.fromDer(r),a=n.privateKeyFromAsn1(o),c=n.privateKeyToPem(a);return(0,t.CrlfToLF)(c)},t.spkitoPem=function(e){const r=new i.ByteBuffer(e),o=s.fromDer(r),a=n.publicKeyFromAsn1(o),c=n.publicKeyToRSAPublicKeyPem(a);return(0,t.CrlfToLF)(c)},t.pemToSpki=function(e){const t=n.publicKeyFromPem(e),r=n.publicKeyToAsn1(t);return h(s.toDer(r).getBytes())},t.base64ToBigInteger=function(e){const t=(e+"===".slice((e.length+3)%4)).replace(/\-/g,"+").replace(/_/g,"/"),r=i.decode64(t);return new a.BigInteger(i.bytesToHex(r),16)},t.str2ab=h,t.ab2str=v,t.concatBuffers=_,t.getSubDataByteArray=function(e,t,r){return e.slice(t,r)},t.isBase64Encoded=function(e){return e&&/^([A-Za-z0-9+/]{4})*([A-Za-z0-9+/]{4}|[A-Za-z0-9+/]{3}=|[A-Za-z0-9+/]{2}==)$/.test(e)},t.addQtCompressHeader=function(e){var t;return _((t=e.byteLength,new Uint8Array([(4278190080&t)>>24,(16711680&t)>>16,(65280&t)>>8,255&t]).buffer),e)},t.removeQtCompressionHeader=function(e){return e.slice(4)},t.deflateBuffer=function(e){return c.deflate(new Uint8Array(e),{level:7}).buffer},t.convertBufferToHex=function(e){return Array.prototype.map.call(new Uint8Array(e),(e=>("00"+e.toString(16)).slice(-2))).join("")}},55623:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getRandomValues=void 0;const o=r(97588),n=r(81106);t.getRandomValues=function(e){const t=(0,n.getWebCrypto)();return t?t.getRandomValues(new Uint8Array(e)):(0,o.generateRandomValues)(e)}},3678:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.jwkToSpki=t.evpBytesToKey=void 0;const o=r(63969),n=r(10001),i=r(46445),a=r(16038);t.evpBytesToKey=async function(e){const{derivedKey:t,salt:r,keyLength:o,ivLength:n}=e,s=(0,a.concatBuffers)(t,r.slice(0,8)),c=await(0,i.computeHashSha1)(s),d=await(0,i.computeHashSha1)((0,a.concatBuffers)(c,s)),u=await(0,i.computeHashSha1)((0,a.concatBuffers)(d,s)),l=(0,a.concatBuffers)(c,d,u);return Promise.resolve(l.slice(o,o+n))};t.jwkToSpki=e=>{const{modulus:t,exponent:r}=e,i=o.setRsaPublicKey((0,a.base64ToBigInteger)(t),(0,a.base64ToBigInteger)(r)),s=o.publicKeyToAsn1(i),c=n.toDer(s).getBytes();return(0,a.str2ab)(c)}},64910:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getNoDerivationCryptoConfig=void 0;const o=r(65675),n=r(91301);t.getNoDerivationCryptoConfig=function(){return(0,o.parsePayload)(n.CRYPTO_NODERIVATION_HMAC64).cryptoConfig}},81106:(e,t)=>{function r(){return self.crypto||null}Object.defineProperty(t,"__esModule",{value:!0}),t.getWebCryptoSubtle=t.getWebCrypto=void 0,t.getWebCrypto=r,t.getWebCryptoSubtle=function(){const e=r();return e?e.subtle?e.subtle:e.webkitSubtle?e.webkitSubtle:null:null}},33769:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.generateLocalkeyAndSetupEncryptorService=t.getEncryptionKeyBuffer=void 0;const o=r(64910),n=r(16038),i=r(69530),a=r(16356),s=r(25576);t.getEncryptionKeyBuffer=function(e,t,r){if(r.skipDerivation){if(e.byteLength<64)throw new Error(`createEncryptionKey: password should be at least 64 bytes long but is: ${e.byteLength}`);return(0,n.applyXorOnBuffers)(e,t)}return(0,n.concatBuffers)(t,e)},t.generateLocalkeyAndSetupEncryptorService=async function(e,t,r,c){const d=await(0,i.generate64BytesKey)(),u=(0,n.base64BufferToText)(d),l=(0,o.getNoDerivationCryptoConfig)();e.setInstance({raw:u},"",l),t.dispatch((0,a.updateLocalKey)(u)),c===s.PersistData.PERSIST_DATA_YES&&await r.getInstance().user.persistLocalKey(u)}},83570:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.makeGetDerivateKeyWithCacheAndQueue=void 0;const o=r(65675),n=r(16038),i=r(86723),a=r(46445);t.makeGetDerivateKeyWithCacheAndQueue=function(){const e=new Map,t=new Map;function r(t){return e.get(t)}function s(r,o){const n=t.get(r);n&&n.forEach((({resolve:e})=>e(o))),t.set(r,[]),e.set(r,o)}function c(r,o,n,a){return new Promise(((c,d)=>{const u=t.get(r)||[];u.push({resolve:c,reject:d}),t.set(r,u);const l=e.get(r);if(l)s(r,l);else if(1===u.length){({pbkdf2:i.deriveKeyWithPBKDF2,argon2d:i.deriveKeyWithArgon2d})[a.method](o,n,a).then((e=>{s(r,e)})).catch((o=>{!function(r,o){const n=t.get(r);n&&n.forEach((({reject:e})=>e(o))),t.set(r,[]),e.delete(r)}(r,o)}))}}))}return(e,t,i)=>function(e,t,r,i,s){return function(e,t,r){if((0,o.isNoDerivation)(r))return Promise.resolve((0,n.arrayBufferToText)(e));const i=(0,o.isPbkdf2Derivation)(r)?r.iterations:r.t_cost;return new Promise(((o,s)=>{(0,a.computeHashSha256)((0,n.str2ab)(`${(0,n.arrayBufferToText)(e)}_${(0,n.arrayBufferToText)(t)}_${r.method}_${i}`)).then((e=>(0,n.arrayBufferToText)(e))).then(o,s)}))}(r,i,s).then((o=>{const n=e(o);return n||t(o,r,i,s)}))}(r,c,e,t,i)}},56984:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.verify=t.sign=t.decrypt=t.encrypt=t.generateRsaOaepKeyPair=t.DefaultAsymmetricOptions=t.HashAlgorithm=t.RSASA_PKCS1=t.RSA_OAEP=void 0;const o=r(16038);t.RSA_OAEP="RSA-OAEP",t.RSASA_PKCS1="RSASSA-PKCS1-v1_5";const n=new Uint8Array([1,0,1]);var i;!function(e){e.SHA_1="SHA-1",e.SHA_256="SHA-256"}(i=t.HashAlgorithm||(t.HashAlgorithm={})),t.DefaultAsymmetricOptions={hashAlgorithm:i.SHA_256};const a=e=>({name:t.RSASA_PKCS1,hash:{name:e}}),s=e=>({name:t.RSA_OAEP,hash:{name:e}});t.generateRsaOaepKeyPair=async(e=i.SHA_256)=>{const r=await self.crypto.subtle.generateKey({name:t.RSA_OAEP,modulusLength:2048,publicExponent:n,hash:{name:e}},!0,["encrypt","decrypt"]),{publicKey:a,privateKey:s}=await async function({privateKey:e,publicKey:t}){return{privateKey:await self.crypto.subtle.exportKey("pkcs8",e),publicKey:await self.crypto.subtle.exportKey("spki",t)}}({...r});return function({publicKey:e,privateKey:t}){return{publicKey:(0,o.spkitoPem)(e),privateKey:(0,o.pkcs8toPem)(t)}}({publicKey:a,privateKey:s})},t.encrypt=async function({publicKey:e,data:r,options:o=t.DefaultAsymmetricOptions}){const n=await self.crypto.subtle.importKey("spki",e,s(o.hashAlgorithm),!1,["encrypt"]);return await self.crypto.subtle.encrypt(s(o.hashAlgorithm),n,r)},t.decrypt=async function({privateKey:e,data:r,options:o=t.DefaultAsymmetricOptions}){const n=await self.crypto.subtle.importKey("pkcs8",e,s(o.hashAlgorithm),!1,["decrypt"]);return await self.crypto.subtle.decrypt(s(o.hashAlgorithm),n,r)},t.sign=async function({privateKey:e,data:r,options:o=t.DefaultAsymmetricOptions}){const n=await self.crypto.subtle.importKey("pkcs8",e,a(o.hashAlgorithm),!1,["sign"]);return await self.crypto.subtle.sign(a(o.hashAlgorithm),n,r)},t.verify=async function({publicKey:e,signature:r,data:o,options:n=t.DefaultAsymmetricOptions}){const i=await self.crypto.subtle.importKey("spki",e,a(n.hashAlgorithm),!1,["verify"]);return await self.crypto.subtle.verify(a(n.hashAlgorithm),i,r,o)}},73626:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.deriveKeyWithArgon2d=void 0;const o=r(72609),n=r(95623),i=r(70252),a=r(35558);t.deriveKeyWithArgon2d=async(e,t,r)=>{try{if(null===e||null===t||null===r)throw new Error("deriveKeyWithArgon2d parameters are null");if(!o.env.isBrowserEnvironment()&&!o.env.isWorkerEnvironment())throw new Error("Environment is not supported");return(async(e,t,r)=>{const o={argon2d:a.ArgonType.Argon2d,argon2i:a.ArgonType.Argon2i},{hash:n}=await(0,a.hash)({pass:new Uint8Array(e),salt:new Uint8Array(t),time:r.t_cost,mem:r.m_cost,hashLen:32,parallelism:r.parallelism,type:o[r.method]});return n})(e,t,r)}catch(e){const t=new Error(`[Derivation] - deriveKeyWithArgon2d: ${e}`);throw n.Debugger.error(t),(0,i.sendExceptionLog)({error:t}),e}}},86723:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.deriveKeyWithArgon2d=t.deriveKeyWithPBKDF2=void 0;var o=r(33713);Object.defineProperty(t,"deriveKeyWithPBKDF2",{enumerable:!0,get:function(){return o.deriveKeyWithPBKDF2}});var n=r(73626);Object.defineProperty(t,"deriveKeyWithArgon2d",{enumerable:!0,get:function(){return n.deriveKeyWithArgon2d}})},33713:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.deriveKeyWithPBKDF2=void 0;const o=r(81106),n=r(97588),i=r(975),a=r(95623),s=r(4673),c={sha1:"SHA-1",sha256:"SHA-256"};t.deriveKeyWithPBKDF2=async(e,t,r)=>{if(null===e||null===t||null===r)throw new Error("deriveKeyWithPBKDF2 parameters are null");const d=(0,s.getPlugins)().pbkdf2Plugin;if(d)return new Promise((o=>{o(d.deriveKey(new Uint8Array(e),new Uint8Array(t),r.iterations,r.hashMethod?c[r.hashMethod]:"SHA-256",32).buffer)}));const u=(0,o.getWebCryptoSubtle)();if(!u)return(0,n.deriveKeyPolyfill)(e,t,r);try{const o=await u.importKey("raw",e,"PBKDF2",!1,["deriveKey"]);return await u.deriveKey({name:"PBKDF2",salt:t,iterations:r.iterations,hash:{name:r.hashMethod?c[r.hashMethod]:"SHA-256"}},o,{name:i.AES_CBC,length:256},!0,["encrypt","decrypt"]).then((e=>u.exportKey("raw",e)))}catch(o){return(o=>{const i=new Error(`[Derivation] - deriveKeyWithPBKDF2: ${o}`);return a.Debugger.error(i),(0,n.deriveKeyPolyfill)(e,t,r)})(o)}}},46445:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.hashAndSplitKey=t.computeHashMD5=t.computeHashSha512=t.computeHashSha256=t.computeHashSha1=void 0;const o=r(30960),n=r(16038);async function i({hashAlgorithm:e,data:t}){return await self.crypto.subtle.digest({name:e},t)}async function a(e){return await i({hashAlgorithm:"SHA-512",data:e})}t.computeHashSha1=async function(e){return await i({hashAlgorithm:"SHA-1",data:e})},t.computeHashSha256=async function(e){return await i({hashAlgorithm:"SHA-256",data:e})},t.computeHashSha512=a;t.computeHashMD5=e=>{const t=o.create();return t.update(e),t.digest().toHex()},t.hashAndSplitKey=async function(e){const t=await a(e),r=t.byteLength,o=(0,n.getSubDataByteArray)(new Uint8Array(t),0,r/2),i=(0,n.getSubDataByteArray)(new Uint8Array(t),r/2,r);return{aes:o.buffer,hmac:i.buffer}}},69530:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.verifyHashHmacSHA256=t.signHashHmacSHA256=t.decryptAES256=t.encryptAES256=t.importKeyAES256=t.generate64BytesKey=t.generateAESKey=void 0;const o=r(16038),n="AES-CBC",i=256,a={name:"HMAC",hash:{name:"SHA-256"}};async function s(){const e=await self.crypto.subtle.generateKey({name:n,length:i},!0,["encrypt","decrypt"]);return await self.crypto.subtle.exportKey("raw",e)}async function c(e){return await self.crypto.subtle.importKey("raw",e,n,!1,["encrypt","decrypt"])}async function d(e){return await self.crypto.subtle.importKey("raw",e,{name:"HMAC",hash:{name:"SHA-256"}},!0,["sign","verify"])}t.generateAESKey=s,t.generate64BytesKey=async function(){const e=await s(),t=await s();return(0,o.concatBuffers)(e,t)},t.importKeyAES256=c,t.encryptAES256=async function({key:e,iv:t,clearData:r}){const o=await c(e);return await self.crypto.subtle.encrypt({name:n,iv:t},o,r)},t.decryptAES256=async function({key:e,iv:t,encryptedData:r}){const o=await c(e);return await self.crypto.subtle.decrypt({name:n,iv:t},o,r)},t.signHashHmacSHA256=async function({key:e,data:t}){const r=await d(e);return await self.crypto.subtle.sign(a,r,t)},t.verifyHashHmacSHA256=async function({key:e,signature:t,data:r}){const o=await d(e);return await self.crypto.subtle.verify(a,o,t,r)}},975:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.AES_KEY_SIZE=t.AES_CBC=void 0,t.AES_CBC="AES-CBC",t.AES_KEY_SIZE=32},97588:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.verifyRsa=t.signRSA=t.decryptRSA=t.encryptRSA=t.generateRsaKeyPair=t.deriveKeyPolyfill=t.verifyHashHmacSHA256=t.signHashHmacSHA256=t.decryptAES256=t.encryptAES256=t.generateAESKey=t.computeHashSha512=t.computeHashSha256=t.computeHashSha1=t.generateRandomValues=t.arrayBufferToBuffer=void 0;const o=r(61384),n=r(16038),i=r(95623),a=r(56984),s=r(975),c=r(63969),d=r(59018),u=r(58654),l=r(63290),p=r(11087),S=r(85469),g=r(33803),m=r(15313).Buffer;function A(e){const t=new m(e.byteLength),r=new Uint8Array(e);for(let e=0;e<t.length;++e)t[e]=r[e];return t}t.arrayBufferToBuffer=A,t.generateRandomValues=function(e){const t=d.getBytesSync(e);return(0,n.str2ab)(t)};t.computeHashSha1=e=>new Promise(((t,r)=>{try{const r=(0,n.base64BufferToText)(e),o=p.sha1.create();return o.update(r),t((0,n.str2ab)(o.digest().data))}catch(e){return i.Debugger.log("Error while using Webcrypto  Polyfill - [computeHashSha1]",e),r(e)}}));t.computeHashSha256=e=>new Promise(((t,r)=>{try{const r=(0,n.base64BufferToText)(e),o=p.sha256.create();return o.update(r),t((0,n.str2ab)(o.digest().data))}catch(e){return i.Debugger.log("Error while using Webcrypto  Polyfill - [computeHashSha256]",e),r(e)}}));t.computeHashSha512=e=>new Promise(((t,r)=>{try{const r=(0,n.base64BufferToText)(e),o=p.sha512.create();return o.update(r),t((0,n.str2ab)(o.digest().data))}catch(e){return i.Debugger.log("Error while using Webcrypto  Polyfill - [computeHashSha512]",e),r(e)}}));t.generateAESKey=()=>new Promise(((e,t)=>{try{d.getBytes(s.AES_KEY_SIZE,(function(r,o){return r?t(r):e((0,n.str2ab)(o))}))}catch(e){return i.Debugger.log("Error while using Webcrypto  Polyfill - [generateAESKey]",e),t(e)}}));t.encryptAES256=(e,t,r)=>new Promise(((o,a)=>{try{const i=new l.ByteBuffer(e),a=new l.ByteBuffer(t),c=new l.ByteBuffer(r),d=u.createCipher(s.AES_CBC,i);d.start({iv:a}),d.update(c),d.finish();const p=d.output.data;return o((0,n.str2ab)(p))}catch(e){return i.Debugger.log("Error while using Webcrypto  Polyfill - [encryptAES256]",e),a(e)}}));t.decryptAES256=(e,t,r)=>new Promise(((o,a)=>{try{const i=new l.ByteBuffer(e),a=new l.ByteBuffer(t),c=new l.ByteBuffer(r),d=u.createDecipher(s.AES_CBC,i);d.start({iv:a}),d.update(c),d.finish();const p=d.output.data;return o((0,n.str2ab)(p))}catch(e){return i.Debugger.log("Error while using Webcrypto  Polyfill - [decryptAES256]",e),a(e)}}));t.signHashHmacSHA256=(e,t)=>new Promise(((r,o)=>{try{const o=(0,n.base64BufferToText)(t),i=(0,n.base64BufferToText)(e),a=S.create();return a.start("sha256",i),a.update(o),r((0,n.str2ab)(a.digest().data))}catch(e){return i.Debugger.log("Error while using Webcrypto  Polyfill - [signHashHmacSHA256]",e),o(e)}}));t.verifyHashHmacSHA256=(e,r)=>{try{return(0,t.signHashHmacSHA256)(e,r).then((e=>e==e))}catch(e){return i.Debugger.log("Error while using Webcrypto  Polyfill - [verifyHashHmacSHA256]",e),Promise.reject(e)}};t.deriveKeyPolyfill=(e,t,r)=>new Promise(((n,a)=>{try{const i=(0,o.getWorkerPath)("pbkdf2PolyfillWorker");if(void 0===i){const o=A(e),i=A(t);return void g.pbkdf2(o,i,r.iterations,32,r.hashMethod,((e,t)=>{e?a(e):n(t.buffer)}))}(0,o.getWorker)(i).then((i=>{i.onmessage=function(e){n(e.data),(0,o.freeWorker)(i)},i.onerror=function(e){a(new Error(`[WebCryptoPolyfill] - deriveKeyPolyfill: ${e.message}`)),(0,o.freeWorker)(i)},i.postMessage([e,t,r.iterations,32,r.hashMethod])}))}catch(e){return i.Debugger.log("Error while using Webcrypto  Polyfill - [deriveKeyFrom]",e),void a(e)}}));t.generateRsaKeyPair=()=>new Promise(((e,t)=>{try{const r=(0,o.getWorkerPath)("WebCryptoPolyfill");c.rsa.generateKeyPair({bits:2048,workers:-1,workerScript:r},(function(r,o){if(r)return t(r);const i={publicKey:(0,n.CrlfToLF)(c.publicKeyToRSAPublicKeyPem(o.publicKey)),privateKey:(0,n.CrlfToLF)(c.privateKeyToPem(o.privateKey))};return e(i)}))}catch(e){return i.Debugger.log("Error while using Webcrypto  Polyfill - [generateRsaKeyPair]",e),t(e)}}));t.encryptRSA=(e,t)=>new Promise(((r,o)=>{try{const o=(0,n.spkitoPem)(e),i=c.publicKeyFromPem(o),s=(0,n.base64BufferToText)(t),d=i.encrypt(s,a.RSA_OAEP,{md:p.sha256.create()});return r((0,n.str2ab)(d))}catch(e){return i.Debugger.log("Error while using Webcrypto  Polyfill - [encryptRSA]",e),o(e)}}));t.decryptRSA=(e,t,r=a.HashAlgorithm.SHA_256)=>new Promise(((o,s)=>{try{const i=(0,n.pkcs8toPem)(e),s=c.privateKeyFromPem(i),d=(0,n.base64BufferToText)(t),u=s.decrypt(d,a.RSA_OAEP,{md:r===a.HashAlgorithm.SHA_256?p.sha256.create():p.sha1.create()});return o((0,n.str2ab)(u))}catch(e){return i.Debugger.log("Error while using Webcrypto  Polyfill - [decryptRSA]",e),s(e)}}));t.signRSA=(e,t)=>new Promise(((r,o)=>{try{const o=(0,n.pkcs8toPem)(e),i=c.privateKeyFromPem(o),a=(0,n.base64BufferToText)(t),s=p.sha256.create();s.update(a);const d=i.sign(s);return r((0,n.str2ab)(d))}catch(e){return i.Debugger.log("Error while using Webcrypto  Polyfill - [signRSA]",e),o(e)}}));t.verifyRsa=(e,t,r)=>new Promise(((o,a)=>{try{const i=(0,n.spkitoPem)(e),a=c.publicKeyFromPem(i),s=(0,n.base64BufferToText)(r),d=(0,n.base64BufferToText)(t),u=p.sha256.create();u.update(s);return o(a.verify(u.digest().bytes(),d))}catch(e){return i.Debugger.log("Error while using Webcrypto  Polyfill - [verifyRsa]",e),a(e)}}))},36513:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.makeAsymmetricEncryption=t.makeSymmetricEncryption=t.makeCryptoService=void 0;const o=r(93347),n=r(56668),i=r(32626),a=r(61797),s=r(69530),c=r(27993),d=r(56984),u=r(16038),l=r(3678),p=r(46445),S=r(63985);t.makeCryptoService=()=>({symmetricEncryption:(0,t.makeSymmetricEncryption)(),asymmetricEncryption:(0,t.makeAsymmetricEncryption)()});async function g(e,t){const r=(0,u.base64ToBuffer)(t),o=(0,u.base64ToBuffer)(e),n=await(0,p.hashAndSplitKey)(o),i=(0,c.parseDashlaneKw5SecureData)(new Uint8Array(r)),a=(0,u.concatBuffers)(i.iv,i.secured),d=await(0,s.signHashHmacSHA256)({key:n.hmac,data:a});if((0,u.bufferToBase64)(d)!==(0,u.bufferToBase64)(i.hash))throw new Error("Sharing - Data has been tampered with");return(0,s.decryptAES256)({key:n.aes,iv:i.iv,encryptedData:i.secured})}t.makeSymmetricEncryption=()=>({generateNewAESKey:()=>(0,s.generateAESKey)().then(u.bufferToBase64),encryptAES256:async(e,t)=>{const r=(0,u.base64ToBuffer)(t),o=(0,u.base64ToBuffer)(e),n=await(0,p.hashAndSplitKey)(o),i=(0,c.generateIV)();return(0,s.encryptAES256)({key:n.aes,iv:i,clearData:r}).then((async e=>{const t=(0,u.concatBuffers)(i,e),o=await(0,s.signHashHmacSHA256)({key:n.hmac,data:t}),a=(0,c.makeKWC5DashlaneSecureData)(r,e,i,o),d=(0,c.convertKw5ToTransportableData)(a);return(0,u.bufferToBase64)(d)}))},encryptSharingItem:async(e,r)=>{const n=(0,t.makeSymmetricEncryption)(),i=(0,a.getDashlaneXml)(r),s=(0,u.utf8ToBase64)(i),c=(0,u.base64ToBuffer)(s),d=o.deflate(new Uint8Array(c)).buffer,l=(0,u.addQtCompressHeader)(d),p=(0,u.bufferToBase64)(l);return n.encryptAES256(e,p)},decryptAES256:async(e,t)=>{const r=await g(e,t);let o="";try{o=(0,u.base64BufferToUtf8)(r)}catch{o=(0,u.bufferToBase64)(r)}return o},decryptSharingItem:async(e,t)=>{const r=await g(e,t);try{const e=new Uint8Array(r),t=(0,u.uint8ArrayToText)(e);return JSON.parse(t)}catch{const e=(0,n.deflatedUtf8ToUtf16)(r),{__type__:t,...o}=await(0,a.parseDashlaneXml)(e),s={...o,kwType:o.kwType||t};return(0,i.isCredential)(s)?(0,S.fixCredentialTypesFromTransaction)(s):(0,i.isNote)(s)?(0,S.fixNoteTypesFromTransaction)(s):s}},signHmacSHA256:(e,t)=>{const r=(0,u.base64ToBuffer)(t),o=(0,u.base64ToBuffer)(e);return(0,s.signHashHmacSHA256)({key:o,data:r}).then((e=>(0,u.bufferToBase64)(e)))},verifyHmacSHA256:(e,t,r)=>{const o=(0,u.base64ToBuffer)(r),n=(0,u.base64ToBuffer)(e),i=(0,u.base64ToBuffer)(t);return(0,s.verifyHashHmacSHA256)({key:n,signature:i,data:o})}});t.makeAsymmetricEncryption=(e=d.DefaultAsymmetricOptions)=>({generateRsaKeyPair:()=>(0,d.generateRsaOaepKeyPair)(e.hashAlgorithm),encrypt:(t,r)=>{const o=(0,u.base64ToBuffer)(r),n=(0,u.pemToSpki)(t);return(0,d.encrypt)({publicKey:n,data:o,options:e}).then(u.bufferToBase64)},decrypt:(t,r)=>{const o=(0,u.base64ToBuffer)(r),n=(0,u.pemTopkcs8)(t);return(0,d.decrypt)({privateKey:n,data:o,options:e}).then(u.bufferToBase64)},sign:(t,r)=>{const o=(0,u.pemTopkcs8)(t),n=(0,u.base64ToBuffer)(r);return(0,d.sign)({privateKey:o,data:n,options:e}).then(u.bufferToBase64)},verify:(t,r,o)=>{const n=(0,u.pemToSpki)(t),i=(0,u.base64ToBuffer)(o),a=(0,u.base64ToBuffer)(r);return(0,d.verify)({publicKey:n,signature:a,data:i,options:e})},verifyJwk:(t,r,o)=>{const n=(0,l.jwkToSpki)(t),i=(0,u.base64ToBuffer)(r),a=(0,u.base64ToBuffer)(o);return(0,d.verify)({publicKey:n,signature:i,data:a,options:e})}})},1860:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.makeKeyBasedCrypto=t.makeKeyDataEncryptorService=t.DATA_TAMPERED_ERROR=void 0;const o=r(95623),n=r(70252),i=r(16038),a=r(46445),s=r(27993),c=r(69530);t.DATA_TAMPERED_ERROR="KeyBasedCrypto - Data has been tampered with",t.makeKeyDataEncryptorService=function(){let e=null;return{setInstance:r=>{e=(0,t.makeKeyBasedCrypto)(r)},getInstance:()=>{if(!e)throw new Error("makeKeyDataEncryptorService: you must call setInstance(password,serverKey) before getting the instance");return e},close:()=>{e=null},hasBeenSet:()=>Boolean(e)}};t.makeKeyBasedCrypto=e=>{const r=function(e){return e.raw&&(0,i.isBase64Encoded)(e.raw)?(0,i.base64ToBuffer)(e.raw):e.raw?(0,i.str2ab)(e.raw):e.buffer}(e);return{isKey:()=>{throw new Error("makeKeyBasedCrypto:isKey not implemented")},encrypt:e=>Promise.resolve().then((()=>(0,a.hashAndSplitKey)(r).then((t=>{const r=(0,s.generateIV)();return(0,c.encryptAES256)({key:t.aes,iv:r,clearData:e}).then((o=>{const n=(0,i.concatBuffers)(r,o);return(0,c.signHashHmacSHA256)({key:t.hmac,data:n}).then((t=>{const n=(0,s.makeKWC5DashlaneSecureData)(e,o,r,t),a=(0,s.convertKw5ToTransportableData)(n);return(0,i.bufferToBase64)(a)}))}))})))).catch((e=>(function(e,t){const r=new Error(`${e}: ${t}`);throw(0,n.sendExceptionLog)({error:r}),o.Debugger.log(r),r}("[makeKeyBasedCrypto] - Error while encrypting data.",e),null))),decrypt:e=>Promise.resolve().then((()=>{const o=(0,i.base64ToBuffer)(e);return(0,a.hashAndSplitKey)(r).then((e=>{const r=(0,s.parseDashlaneKw5SecureData)(new Uint8Array(o)),n=(0,i.concatBuffers)(r.iv,r.secured);return(0,c.signHashHmacSHA256)({key:e.hmac,data:n}).then((o=>{if((0,i.bufferToBase64)(o)!==(0,i.bufferToBase64)(r.hash))throw new Error(t.DATA_TAMPERED_ERROR);return(0,c.decryptAES256)({key:e.aes,iv:r.iv,encryptedData:r.secured})}))}))})),prepareCrypto:()=>Promise.resolve(),readCryptoPayload:e=>{const t=(0,i.base64ToBuffer)(e);return(0,s.parseDashlaneKw5SecureData)(new Uint8Array(t)).version}}}},91301:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CRYPTO_NODERIVATION_HMAC64=void 0,t.CRYPTO_NODERIVATION_HMAC64="$1$noderivation$aes256$cbchmac64$16$"},56668:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.prepareCrypto=t.deflatedUtf8ToUtf16=t.utf16ToDeflatedUtf8=t.inflateUtf16=t.deflateUtf16=t.cipherDashlaneSecureData=t.decipherDashlaneSecureData=t.makeCryptoCenterService=t.PBKDF2_DEFAULT_PAYLOAD=t.ARGON2_DEFAULT_PAYLOAD=void 0;const o=r(93347),n=r(62802),i=r(16038),a=r(3678),s=r(65675);Object.defineProperty(t,"ARGON2_DEFAULT_PAYLOAD",{enumerable:!0,get:function(){return s.ARGON2_DEFAULT_PAYLOAD}}),Object.defineProperty(t,"PBKDF2_DEFAULT_PAYLOAD",{enumerable:!0,get:function(){return s.PBKDF2_DEFAULT_PAYLOAD}});const c=r(69530),d=r(46445),u=r(55623),l=r(56584),p=r(83570),S=r(95623),g=r(16356),m=r(27517);function A(e,t,r){const o=t+r;return(0,s.isCryptoConfigKWC3)(e.derivation)?(0,i.str2ab)(o):(0,i.utf8ToBase64Buffer)(o)}t.makeCryptoCenterService=function(e,r,o,n){const a=(0,p.makeGetDerivateKeyWithCacheAndQueue)(),c=e.raw,d=(0,i.str2ab)(r+c);return{isKey:(e,t)=>e+t===r+c,decrypt:(e,o={})=>(0,t.decipherDashlaneSecureData)(e,c,r,a,o),encrypt:(e,i={})=>{const{cryptoConfig:s}=i,d=s||n,u={...i,cryptoConfig:d};return(0,t.cipherDashlaneSecureData)(c,r,e,o,a,u)},prepareCrypto:()=>h(o,d,a,n),readCryptoPayload:e=>(0,s.readCryptoPayload)(e)}};t.decipherDashlaneSecureData=async(e,t,r,o,n={})=>{const{forceKeyKWC5:a,forceSalt:d}=n,u=(0,i.base64ToBuffer)(e),l=(0,s.parseCipheredData)(new Uint8Array(u)),p=l.cryptoConfig;let S,g;if(((0,s.isDashlaneSecureDataFlexible)(l)||(0,s.isDashlaneSecureDataKWC3)(l))&&(S=d||l.salt),(0,s.isDashlaneSecureDataKWC5)(l)&&a)g=a;else if((0,s.isNoDerivation)(p.derivation))g=(0,i.str2ab)(t);else{const e=A(p,r,t);g=await o(e,S,p.derivation)}const m=await async function(e,t,r){return"evpByteToKey"===e.cryptoConfig.ciphering.options.ivGeneration.method?y(e.cryptoConfig,t,r):(0,s.isDashlaneSecureDataFlexible)(e)||(0,s.isDashlaneSecureDataKWC5)(e)?e.iv:void 0}(l,S,g),{signatureKey:T,cipheringKey:v}=await E(l.cryptoConfig,g);return await f(l,T,m),await(0,c.decryptAES256)({key:v,iv:m,encryptedData:l.cipheredContent})};const y=async(e,t,r)=>{const o={derivedKey:r,salt:t,keyLength:32,ivLength:e.ciphering.options.ivLength};return(0,a.evpBytesToKey)(o)},E=async(e,t)=>{if("skip"===e.signature.method)return{signatureKey:new ArrayBuffer(0),cipheringKey:t};const r="hmac64"===e.signature.method?t:await(0,d.computeHashSha512)(t);if(64!==r.byteLength)throw new Error(`[cryptoCenter][prepareKeys] - cryptoKey's length must be 64B but is ${r.byteLength}B`);return{cipheringKey:(0,i.getSubDataByteArray)(new Uint8Array(r),0,r.byteLength/2).buffer,signatureKey:(0,i.getSubDataByteArray)(new Uint8Array(r),r.byteLength/2,r.byteLength).buffer}},f=(e,t,r)=>{if("skip"===e.cryptoConfig.signature.method)return Promise.resolve();const o=(0,i.concatBuffers)(r,e.cipheredContent),n=e;return(0,c.signHashHmacSHA256)({key:t,data:o}).then((e=>{if((0,i.bufferToBase64)(e)!==(0,i.bufferToBase64)(n.hash))throw new Error("[decipherFlexibleMarker] Data are corrupted: HMAC signature cannot be verified")}))};t.cipherDashlaneSecureData=async(e,t,r,o,n,a={})=>{const{cryptoConfig:d,forceSalt:l,forceIv:p}=a,S=d||(0,s.getCryptoConfig)(o);let g,m;if((0,s.isNoDerivation)(S.derivation))g=(0,i.str2ab)(e);else{m=l||_(o,S.derivation);const r=A(S,t,e);g=await n(r,m,S.derivation)}const f=p||await async function(e,t,r){const o=e.ciphering.options.ivGeneration.method;if("evpByteToKey"===o)return y(e,t,r);return(0,u.getRandomValues)(e.ciphering.options.ivLength)}(S,m,g),{signatureKey:h,cipheringKey:I}=await E(S,g),C=await(0,c.encryptAES256)({key:I,iv:f,clearData:r}),D=await T(C,S,h,f);return v(m,f,D,C,S)};t.deflateUtf16=e=>o.deflate(e,{level:7});t.inflateUtf16=e=>{const t=new Uint8Array(e);return o.inflate(t,{to:"string"})};t.utf16ToDeflatedUtf8=(e,t={})=>{const{skipDeflate:r,skipUtf8Encoding:o}=t,n=o?e:(0,i.utf8ChunkEncode)(e),a=(0,i.str2ab)(n);return r?a:(0,i.addQtCompressHeader)((0,i.deflateBuffer)(a))};t.deflatedUtf8ToUtf16=(e,t={})=>{const{skipUtf8Decoding:r,skipInflate:a,unescapeXml:s}=t,c=new Uint8Array(e),d=a?c:(e=>{const t=(0,i.removeQtCompressionHeader)(e),r=Math.pow(2,14)-1,a=new o.Inflate({chunkSize:r});if(a.push(t,n.Z_FINISH),a.err)throw new Error(`[Crypto] - postTreatData: unable to uncompress data - ${a.msg} (code ${a.err})`);return a.result})(c);let u=(0,i.uint8ArrayToText)(d);if(s&&(u=decodeURI(u)),!r)try{u=(0,i.utf8ChunkDecode)(u)}catch(e){S.Debugger.log("Cannot utf8.decode "+e)}return u};const T=(e,t,r,o)=>{if("skip"===t.signature.method)return Promise.resolve().then((()=>new ArrayBuffer(0)));const n=(0,i.concatBuffers)(o,e);return(0,c.signHashHmacSHA256)({key:r,data:n})},v=(e,t,r,o,n)=>{if((0,s.isCryptoConfigKWC3)(n.derivation)){const t=(0,l.convertDashlaneSecureDataKWC3ToTransportableData)({encryptedData:o,salt:e,version:"KWC3"});return(0,i.bufferToBase64)(t)}const a={salt:e,iv:t,hash:r,cipheredContent:o,cryptoConfig:n},c=(0,s.convertDashlaneSecureDataFlexibleToTransportableData)(a);return(0,i.bufferToBase64)(c)};async function h(e,t,r,o){const n=o??(0,s.getCryptoConfig)(e),i=n.derivation;if("noderivation"===i.method)return;const a=_(e,n.derivation);await r(t,a,i)}function _(e,t){return(0,s.isCryptoConfigKWC3)(t)?function(e){if(e.getUserSession().cryptoKwc3FixedSalt)return(0,i.base64ToBuffer)(e.getUserSession().cryptoKwc3FixedSalt);const t=(0,u.getRandomValues)(32),r=(0,i.bufferToBase64)(t);return e.dispatch((0,g.updateCryptoKwc3FixedSalt)(r)),t}(e):function(e){if(e.getPersonalSettings().CryptoFixedSalt)return(0,i.base64ToBuffer)(e.getPersonalSettings().CryptoFixedSalt);const t=(0,u.getRandomValues)(16),r={CryptoFixedSalt:(0,i.bufferToBase64)(t)};return e.dispatch((0,m.editPersonalSettings)(r)),t}(e)}t.prepareCrypto=h},27993:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.makeKWC5DashlaneSecureData=t.generateIV=t.parseDashlaneKw5SecureData=t.convertKw5ToTransportableData=void 0;const o=r(55623),n=r(16038);t.convertKw5ToTransportableData=e=>{let t=new ArrayBuffer(32);if("KWC5"!==e.version)throw new Error("Version must be KWC5");if(null===e.hash)throw new Error("hmacSha2 from DashlaneSecureData is null");if(null===e.iv)throw new Error("iv from DashlaneSecureData is null");e.iv&&(t=(0,n.concatBuffers)(e.iv,(0,o.getRandomValues)(16)));const r=(0,n.utf8ToBase64Buffer)(e.version);return(0,n.concatBuffers)(t,r,e.hash,e.secured)};t.parseDashlaneKw5SecureData=e=>{if(e.byteLength<36)throw new Error(`Data length should be at least 36 long but was ${e.byteLength}`);let t=0;const r=(0,n.getSubDataByteArray)(e,t,16).buffer;t+=32;const o=(0,n.getSubDataByteArray)(e,t,t+4),i=(0,n.uint8ArrayToText)(o);if("KWC5"!==i)throw new Error("Version must be KWC5");t+=4;const a=(0,n.getSubDataByteArray)(e,t,t+32).buffer;t+=32;return{iv:r,version:i,hash:a,secured:(0,n.getSubDataByteArray)(e,t,e.byteLength).buffer}};t.generateIV=()=>(0,o.getRandomValues)(16);t.makeKWC5DashlaneSecureData=(e,t,r,o)=>({version:"KWC5",clearData:e,secured:t,iv:r,hash:o})},65675:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PBKDF2_DEFAULT_PAYLOAD=t.ARGON2_DEFAULT_PAYLOAD=t.KWC3_DEFAULT_PAYLOAD=t.getUserCryptoPayload=t.getCryptoUserPayload=t.getCryptoConfig=t.makeFlexibleMarkerCryptoConfig=t.makeFlexibleMarkerPbkdf2Config=t.makeFlexibleMarkerArgon2dConfig=t.makeKWC3CryptoConfig=t.convertDashlaneSecureDataFlexibleToTransportableData=t.makeFlexibleMarkerPayloadBuffer=t.makeFlexibleMarkerPayloadString=t.makeFlexibleCryptoConfig=t.readCryptoPayload=t.parseCipheredData=t.getFlexibleSecureData=t.getLegacySecureData=t.getLegacyMarker=t.getLegacyCryptoConfig=t.parsePayload=t.getSignatureConfig=t.getCipheringConfiguration=t.getDerivationConfiguration=t.getPbkdf2DerivationConfig=t.getArgon2DerivationConfig=t.extractNextPayloadComponent=t.isDashlaneSecureDataFlexible=t.isDashlaneSecureDataKWC5=t.isDashlaneSecureDataKWC3=t.DashlaneCipherVersion=t.isSupportedAESMode=t.isSupportedDerivationMethod=t.isCryptoConfigKWC3=t.isNoDerivation=t.isArgon2Derivation=t.isPbkdf2Derivation=void 0;const o=r(16516),n=r(50415),i=r(16038);function a(e){return"pbkdf2"===e.method}function s(e){return"noderivation"===e.method||"skip"===e.method}function c(e){return Boolean(["argon2d","pbkdf2","noderivation","skip"].find((t=>t===e)))}function d(e){return Boolean(["cbchmac","cbchmac64","cbc","gcm"].find((t=>t===e)))}t.isPbkdf2Derivation=a,t.isArgon2Derivation=function(e){return"argon2d"===e.method},t.isNoDerivation=s,t.isCryptoConfigKWC3=function(e){return a(e)&&10204===e.iterations&&"sha1"===e.hashMethod},t.isSupportedDerivationMethod=c,t.isSupportedAESMode=d,t.DashlaneCipherVersion=(0,n.Enum)("KWC3","KWC5");t.isDashlaneSecureDataKWC3=e=>e.marker===t.DashlaneCipherVersion.KWC3;t.isDashlaneSecureDataKWC5=e=>e.marker===t.DashlaneCipherVersion.KWC5;t.isDashlaneSecureDataFlexible=e=>void 0!==e.iv;t.extractNextPayloadComponent=e=>{if(null===e)return"";let t=e;t.startsWith("$")&&(t=t.substring(1,e.length));return t.substring(0,t.indexOf("$"))};t.getArgon2DerivationConfig=e=>{let r=0;const o={};if(o.saltLength=Number((0,t.extractNextPayloadComponent)(e.substring(r,e.length))),r+=o.saltLength.toString().length+1,o.t_cost=Number((0,t.extractNextPayloadComponent)(e.substring(r,e.length))),r+=o.t_cost.toString().length+1,o.m_cost=Number((0,t.extractNextPayloadComponent)(e.substring(r,e.length))),r+=o.m_cost.toString().length+1,o.parallelism=Number((0,t.extractNextPayloadComponent)(e.substring(r,e.length))),r+=o.parallelism.toString().length+1,isNaN(o.saltLength)||0===o.saltLength||isNaN(o.t_cost)||0===o.t_cost||isNaN(o.m_cost)||0===o.m_cost||isNaN(o.parallelism)||0===o.parallelism)throw new Error("Wrong parameters in payload");return o};t.getPbkdf2DerivationConfig=e=>{let r=0;const o={};if(o.saltLength=Number((0,t.extractNextPayloadComponent)(e.substring(r,e.length))),r+=o.saltLength.toString().length+1,o.iterations=Number((0,t.extractNextPayloadComponent)(e.substring(r,e.length))),r+=o.iterations.toString().length+1,o.hashMethod=String((0,t.extractNextPayloadComponent)(e.substring(r,e.length))),r+=o.hashMethod.length+1,isNaN(o.saltLength)||isNaN(o.iterations))throw new Error("Wrong parameters in payload");return o};t.getDerivationConfiguration=e=>{let r=0,o={};const n=String((0,t.extractNextPayloadComponent)(e.substring(r,e.length)));if(!c(n))throw new Error("Derivation method not supported");if(o.method=n,"noderivation"===n||"skip"===n)return o;if(r+=o.method.length+1,"argon2d"===o.method){const n=(0,t.getArgon2DerivationConfig)(e.substring(r,e.length));o={...o,...n}}if("pbkdf2"===o.method){const n=(0,t.getPbkdf2DerivationConfig)(e.substring(r,e.length));o={...o,...n}}return o};t.getCipheringConfiguration=e=>{const r={options:{}};let o=0;if(r.method=String((0,t.extractNextPayloadComponent)(e.substring(o,e.length))),o+=r.method.length+1,"aes256"!==r.method)throw new Error(`[getCipheringConfiguration]: Wrong ciphering method expected "aes256" but get ${r.method}`);{const n=String((0,t.extractNextPayloadComponent)(e.substring(o,e.length)));if(!d(n))throw new Error("[getCipheringConfiguration]: unsupported AES mode");if(r.options.mode=n,o+=r.options.mode.length+1,r.options.ivLength=Number((0,t.extractNextPayloadComponent)(e.substring(o,e.length))),isNaN(r.options.ivLength)||0===r.options.ivLength)throw new Error("[getCipheringConfiguration]: Wrong parameters in payload")}return r};t.getSignatureConfig=e=>{const t={method:"skip"};return"cbchmac"===e&&(t.method="hmac"),"cbchmac64"===e&&(t.method="hmac64"),t};t.parsePayload=e=>{if(null===e)throw new Error("parsePayload: No payload to parse");if(e.startsWith("$")){let r=0;const n=Number((0,t.extractNextPayloadComponent)(e.substring(r,e.length)));if(1!==n)throw new Error(`parsePayload: version should be 1 but is ${n}`);r+=n.toString().length+1;const i=(0,t.getDerivationConfiguration)(e.substring(r,e.length)),a=(0,o.reduce)(((e,t)=>e+(`${t}`.length+1)));r=a(r,(0,o.values)(i));const s=(0,t.getCipheringConfiguration)(e.substring(r,e.length));r+=String(s.method).length+1,r=a(r,(0,o.values)(s.options));const c={method:"data"};return{cryptoConfig:{derivation:i,signature:(0,t.getSignatureConfig)(s.options.mode),ciphering:{method:s.method,options:{...s.options,ivGeneration:c}}},payloadLength:r+1}}throw new Error("parsePayload: Unable to parse payload")};t.getLegacyCryptoConfig=e=>{if("KWC3"===e)return{derivation:{method:"pbkdf2",saltLength:32,iterations:10204,hashMethod:"sha1"},signature:{method:"skip"},ciphering:{method:"aes256",options:{mode:"cbc",ivLength:16,ivGeneration:{method:"evpByteToKey"}}}};if("KWC5"===e)return{derivation:{method:"skip"},signature:{method:"hmac"},ciphering:{method:"aes256",options:{mode:"cbchmac",ivLength:16,ivGeneration:{method:"data"}}}};throw new Error("Wrong marker")};t.getLegacyMarker=e=>{const r=(0,i.getSubDataByteArray)(e,32,36),o=(0,i.uint8ArrayToText)(r);return o===t.DashlaneCipherVersion.KWC3||o===t.DashlaneCipherVersion.KWC5?o:null};t.getLegacySecureData=(e,r)=>{if(e===t.DashlaneCipherVersion.KWC3){return{marker:e,salt:(0,i.getSubDataByteArray)(r,0,32).buffer,cipheredContent:(0,i.getSubDataByteArray)(r,36,r.byteLength).buffer,cryptoConfig:(0,t.getLegacyCryptoConfig)(e)}}if(e===t.DashlaneCipherVersion.KWC5){const o=16,n=32;return{marker:e,iv:(0,i.getSubDataByteArray)(r,0,o).buffer,hash:(0,i.getSubDataByteArray)(r,36,36+n).buffer,cipheredContent:(0,i.getSubDataByteArray)(r,36+n,r.byteLength).buffer,cryptoConfig:(0,t.getLegacyCryptoConfig)(e)}}throw new Error("Wrong marker")};t.getFlexibleSecureData=e=>{const r=(0,i.uint8ArrayToText)(e),{cryptoConfig:o,payloadLength:n}=(0,t.parsePayload)(r);let a=n;const c=s(o.derivation)?0:o.derivation.saltLength,d=o.ciphering.options.ivLength,u=(0,i.getSubDataByteArray)(e,a,a+c).buffer;a+=c;const l=(0,i.getSubDataByteArray)(e,a,a+d).buffer;a+=d;const p=(0,i.getSubDataByteArray)(e,a,a+32).buffer;a+=32;return{salt:u,iv:l,hash:p,cipheredContent:(0,i.getSubDataByteArray)(e,a,e.length).buffer,cryptoConfig:o}};t.parseCipheredData=e=>{const r=(0,t.getLegacyMarker)(e);if(r)return(0,t.getLegacySecureData)(r,e);if("$"===(0,i.uint8ArrayToText)((0,i.getSubDataByteArray)(e,0,1)))return(0,t.getFlexibleSecureData)(e);throw new Error("Unable to parse ciphered data")};t.readCryptoPayload=e=>{const r=(0,i.base64ToBuffer)(e),o=new Uint8Array(r),n=(0,t.getLegacyMarker)(o);if(n)return n;const a=(0,i.uint8ArrayToText)(o),{payloadLength:s}=(0,t.parsePayload)(a);return a.substr(0,s)};t.makeFlexibleCryptoConfig=e=>e.cryptoConfig;t.makeFlexibleMarkerPayloadString=e=>{let t="$1";const r=(0,o.reduce)(((e,t)=>"string"==typeof t||"number"==typeof t?e+`$${String(t)}`:e));t=r(t,(0,o.values)(e.derivation)),t=r(t,[e.ciphering.method]);return t=r(t,(0,o.values)((0,o.omit)(["ivGeneration"],e.ciphering.options))),t+="$",t};t.makeFlexibleMarkerPayloadBuffer=e=>{const r=(0,t.makeFlexibleMarkerPayloadString)(e);return(0,i.str2ab)(r)};function u(){return{derivation:{method:"pbkdf2",saltLength:32,iterations:10204,hashMethod:"sha1"},signature:{method:"skip"},ciphering:{method:"aes256",options:{mode:"cbc",ivLength:16,ivGeneration:{method:"evpByteToKey"}}}}}function l(){return{method:"argon2d",saltLength:16,t_cost:3,m_cost:32768,parallelism:2}}function p(){return{method:"pbkdf2",saltLength:16,iterations:2e5,hashMethod:"sha256"}}function S(e){return{derivation:"argon2d"===e?{method:"argon2d",saltLength:16,t_cost:3,m_cost:32768,parallelism:2}:{method:"pbkdf2",saltLength:16,iterations:2e5,hashMethod:"sha256"},signature:{method:"hmac"},ciphering:{method:"aes256",options:{mode:"cbchmac",ivLength:16,ivGeneration:{method:"data"}}}}}function g(e){return e.getPersonalSettings().CryptoUserPayload||t.ARGON2_DEFAULT_PAYLOAD}t.convertDashlaneSecureDataFlexibleToTransportableData=e=>{const{cipheredContent:r,cryptoConfig:o,hash:n,iv:a,salt:c}=e,d=(0,t.makeFlexibleMarkerPayloadBuffer)(o);return s(o.derivation)?(0,i.concatBuffers)(d,a,n,r):(0,i.concatBuffers)(d,c,a,n,r)},t.makeKWC3CryptoConfig=u,t.makeFlexibleMarkerArgon2dConfig=l,t.makeFlexibleMarkerPbkdf2Config=p,t.makeFlexibleMarkerCryptoConfig=S,t.getCryptoConfig=function(e){const r=g(e);return(0,o.isNil)(r)?S("argon2d"):"KWC3"===r?{derivation:{method:"pbkdf2",saltLength:32,iterations:10204,hashMethod:"sha1"},signature:{method:"skip"},ciphering:{method:"aes256",options:{mode:"cbc",ivLength:16,ivGeneration:{method:"evpByteToKey"}}}}:(0,t.parsePayload)(r).cryptoConfig},t.getCryptoUserPayload=g;t.getUserCryptoPayload=e=>{if("pbkdf2_kwc3"===e)return{CryptoUserPayload:t.KWC3_DEFAULT_PAYLOAD};const r="argon2"===e?"argon2d":"pbkdf2";return{CryptoUserPayload:(0,o.compose)(i.base64BufferToUtf8,t.makeFlexibleMarkerPayloadBuffer,S)(r)}},t.KWC3_DEFAULT_PAYLOAD="KWC3",t.ARGON2_DEFAULT_PAYLOAD="$1$argon2d$16$3$32768$2$aes256$cbchmac$16$",t.PBKDF2_DEFAULT_PAYLOAD="$1$pbkdf2$16$200000$sha256$aes256$cbchmac$16$"},15215:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.makeCanonicalRequest=void 0;const o=r(16516);t.makeCanonicalRequest=e=>{const t=e=>e.toLowerCase(),r=n(e.headers),i=e.headersToSign?o.pick(o.map(t,o.values(e.headersToSign)),o.mapObjIndexed(t,r)):r,u=a(e.uri),l=s(e.query),p=c(i),S=d(i);return{canonicalRequest:[e.method,u,l,p,S,e.hashedPayload].join("\n"),signedHeaders:S}};const n=e=>o.pipe(o.toPairs,o.map((([e,t])=>[e.toLowerCase(),t])),u)(e),i=e=>e.replace(/[^A-Za-z0-9_.~\-]/g,(e=>"%"+e.charCodeAt(0).toString(16).toUpperCase())),a=e=>(e=>e.split("/").map((e=>i(e))).join("/"))(e),s=e=>o.pipe((e=>o.toPairs(e)),o.sortBy((e=>e[0])),o.map((([e,t])=>((e,t)=>{const r=i(e),n=Array.isArray(t)?t:[t];return o.pipe(o.map((e=>i(e))),o.map((e=>[r,e])),o.sortBy(o.reduce(o.concat,"")))(n)})(e,t))),o.unnest,o.map((([e,t])=>`${e}=${t}`)),o.join("&"))(e),c=e=>o.pipe((e=>o.toPairs(e)),o.sortBy((e=>e[0].toLowerCase())),o.map((([e,t])=>((e,t)=>e.toLowerCase()+":"+t.trim().replace(/\s+/g," ")+"\n")(e,t))),o.join(""))(e),d=e=>o.pipe(o.keys,o.map((e=>e.toLowerCase())),o.sortBy(o.identity),o.join(";"))(e),u=e=>{const t={};for(let r=0;r<e.length;++r)t[e[r][0]]=e[r][1];return t}},51907:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getApiCredentials=void 0;const o=r(56915),n=r(17825),i=r(45956);t.getApiCredentials=function(e,t){if(t.authenticationType===i.ApiAuthType.None)return{type:t.authenticationType};const r={appKeys:(0,o.appKeysSelector)(e)};switch(t.authenticationType){case i.ApiAuthType.App:return{type:i.ApiAuthType.App,...r};case i.ApiAuthType.UserDevice:return{type:i.ApiAuthType.UserDevice,...r,login:t.login,deviceKeys:(0,o.deviceKeysSelector)(e)};case i.ApiAuthType.Session:return{type:i.ApiAuthType.Session,...r,login:t.login,sessionKeys:(0,o.sessionKeysSelector)(e),deviceId:(0,o.getDeviceIdSelector)(e,t.login)};case i.ApiAuthType.TeamDevice:return{type:i.ApiAuthType.TeamDevice,...r,teamUuid:t.teamUuid,deviceKeys:(0,o.deviceKeysSelector)(e)};default:(0,n.assertUnreachable)(t.authenticationType)}}},90338:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.prepareApiEndpoint=void 0;const o=r(45956),n=r(55730);t.prepareApiEndpoint=function(e){const{authenticationType:t,endpoint:r,group:i,method:a,version:s,accept:c,responseType:d}=e,u=`/${o.ApiVersion[s]}/${i}/${r}`;return(0,n.getMakeApiRequest)(u,t,a,d??"json",c)}},27054:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.makeSafeDeviceName=t.makeSafeLanguage=t.makeSafeCountry=void 0;const r="ZZ";t.makeSafeCountry=function(e){return!e||e.length<2||e.length>5?r:e};const o="und";t.makeSafeLanguage=function(e){return!e||e.length<2||e.length>5?o:e};const n="Device";t.makeSafeDeviceName=function(e){return e||n}},2978:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getCode=void 0;const o=r(45956);t.getCode=(e,t)=>{const r=t.indexOf(e);return r<0?o.UnknownError:t[r]}},84101:function(e,t,r){var o=this&&this.__createBinding||(Object.create?function(e,t,r,o){void 0===o&&(o=r);var n=Object.getOwnPropertyDescriptor(t,r);n&&!("get"in n?!t.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,o,n)}:function(e,t,r,o){void 0===o&&(o=r),e[o]=t[r]}),n=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||o(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),n(r(27054),t),n(r(85188),t),n(r(2978),t)},85188:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.isExtraDeviceTokenValid=t.isEmailTokenValid=void 0,t.isEmailTokenValid=function(e){return/^\d{6}$/.test(e)},t.isExtraDeviceTokenValid=function(e){return/^[A-Za-z0-9+/]{64}$/.test(e)}},46298:function(e,t,r){var o=this&&this.__createBinding||(Object.create?function(e,t,r,o){void 0===o&&(o=r);var n=Object.getOwnPropertyDescriptor(t,r);n&&!("get"in n?!t.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,o,n)}:function(e,t,r,o){void 0===o&&(o=r),e[o]=t[r]}),n=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||o(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),t.UnknownError=t.isApiErrorOfType=t.isApiError=void 0;var i=r(45956);Object.defineProperty(t,"isApiError",{enumerable:!0,get:function(){return i.isApiError}}),Object.defineProperty(t,"isApiErrorOfType",{enumerable:!0,get:function(){return i.isApiErrorOfType}}),Object.defineProperty(t,"UnknownError",{enumerable:!0,get:function(){return i.UnknownError}}),n(r(91503),t),n(r(84101),t)},55730:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getApiClientAgentHeader=t.validateStatus=t.makeApiResponse=t.getMethodParams=t.getAuthParams=t.getMakeApiRequest=void 0;const o=r(53),n=r(17825),i=r(86056),a=r(14656),s=r(56915),c=r(45956),d=r(78577),u=r(51907),l=r(48749),p=r(45800);function S(e,{login:t,teamUuid:r}){switch(e){case c.ApiAuthType.App:case c.ApiAuthType.None:return{authenticationType:e};case c.ApiAuthType.UserDevice:case c.ApiAuthType.Session:return{authenticationType:e,login:t};case c.ApiAuthType.TeamDevice:return{authenticationType:e,teamUuid:r};default:(0,n.assertUnreachable)(e)}}function g(e,t){switch(e){case c.ApiRequestMethod.GET:return{method:e};case c.ApiRequestMethod.POST:return{method:e,payload:t};default:(0,n.assertUnreachable)(e)}}function m(e){const t=function({errors:e}){if(Array.isArray(e)&&e.length>0)return e[0];return null}(e);return t||function(e){return{code:"success",data:e.data?null:e,...e.data}}(e)}t.getMakeApiRequest=function(e,r,y,E,f){return async(T,v)=>{const h={login:"",teamUuid:"",payload:{},...v||{}},_=g(y,h.payload),I=S(r,{login:h.login,teamUuid:h.teamUuid}),C=(0,u.getApiCredentials)(T.getState(),I),D={Accept:f??"application/json","Content-Type":"application/json; charset=UTF-8","dashlane-client-agent":A((0,i.getPlatformInfo)())},O={...D,Host:new URL(l.config.DASHLANE_API_HOST_WITH_SCHEME).hostname},P=await async function(e,t,r,i,a){if(r.type===c.ApiAuthType.None)return{};const u=(0,s.dashlaneServerDeltaTimestampSelector)(e.getState())||0,l=Math.round((0,o.getUnixTimestamp)()-u),p=function(e){switch(e.method){case c.ApiRequestMethod.GET:return"";case c.ApiRequestMethod.POST:return JSON.stringify(e.payload);default:(0,n.assertUnreachable)(e)}}(a),{method:S}=a,g={pathname:t,method:S,rawBody:p,headers:i},m=await(0,d.signRequest)({request:g,timestamp:l,credentials:r});return{Authorization:m}}(T,e,C,O,_),R={...D,...P,...(0,p.getCloudflareHeaders)()},N=`${l.config.DASHLANE_API_HOST_WITH_SCHEME}${e}`,{data:L}=await function(e,r,o,i){const s={headers:o,validateStatus:t.validateStatus,responseType:i};switch(e.method){case c.ApiRequestMethod.GET:return(0,a.get)(r,s);case c.ApiRequestMethod.POST:return(0,a.post)(r,e.payload,s);default:(0,n.assertUnreachable)(e)}}(_,N,R,E);return m(L)}},t.getAuthParams=S,t.getMethodParams=g,t.makeApiResponse=m;function A(e){return JSON.stringify({platform:e.platformName||"unknown",version:e.appVersion||"unknown",osversion:e.osVersion||"unknown",language:e.lang||"unknown"})}t.validateStatus=e=>e>=100&&e<=500,t.getApiClientAgentHeader=A},41075:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getAndEvaluateForUser=void 0;const o=r(45956),n=r(90338),i={group:o.ApiEndpointGroups.abtesting,version:o.ApiVersion.v1,method:o.ApiRequestMethod.POST,authenticationType:o.ApiAuthType.UserDevice,endpoint:"GetAndEvaluateForUser"},a=(0,n.prepareApiEndpoint)(i);t.getAndEvaluateForUser=async function(e,t,r){return a(e,{login:t,payload:r})}},61394:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.deactivateAccountRecoveryKey=void 0;const o=r(45956),n=r(90338),i={group:o.ApiEndpointGroups.accountRecovery,version:o.ApiVersion.v1,method:o.ApiRequestMethod.POST,authenticationType:o.ApiAuthType.UserDevice,endpoint:"Deactivate"},a=(0,n.prepareApiEndpoint)(i);t.deactivateAccountRecoveryKey=function(e,t,r){return a(e,{login:t,payload:r})}},14651:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.accountInfo=void 0;const o=r(90338),n=r(45956),i={group:n.ApiEndpointGroups.account,version:n.ApiVersion.v1,method:n.ApiRequestMethod.POST,authenticationType:n.ApiAuthType.UserDevice,endpoint:"AccountInfo"},a=(0,o.prepareApiEndpoint)(i);t.accountInfo=async function(e,t){return a(e,{login:t,payload:{}})}},45468:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.createUserWithSSO=void 0;const o=r(90338),n=r(45956),i={authenticationType:n.ApiAuthType.App,endpoint:"CreateUserWithSSO",group:n.ApiEndpointGroups.account,method:n.ApiRequestMethod.POST,version:n.ApiVersion.v1},a=(0,o.prepareApiEndpoint)(i);t.createUserWithSSO=async function(e,t){return a(e,{payload:t})}},55710:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.createUser=void 0;const o=r(90338),n=r(45956),i={group:n.ApiEndpointGroups.account,version:n.ApiVersion.v1,method:n.ApiRequestMethod.POST,authenticationType:n.ApiAuthType.App,endpoint:"CreateUser"},a=(0,o.prepareApiEndpoint)(i);t.createUser=async function(e,t){return a(e,{payload:t})}},25011:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getPremiumStatus=void 0;const o=r(90338),n=r(45956),i={group:n.ApiEndpointGroups.premium,version:n.ApiVersion.v1,method:n.ApiRequestMethod.POST,authenticationType:n.ApiAuthType.UserDevice,endpoint:"GetPremiumStatus"},a=(0,o.prepareApiEndpoint)(i);t.getPremiumStatus=function(e,t){return a(e,{login:t,payload:{}})}},31375:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getSubscriptionInformation=void 0;const o=r(90338),n=r(45956),i={group:n.ApiEndpointGroups.premium,version:n.ApiVersion.v1,method:n.ApiRequestMethod.POST,authenticationType:n.ApiAuthType.UserDevice,endpoint:"GetSubscriptionInfo"},a=(0,o.prepareApiEndpoint)(i);t.getSubscriptionInformation=function(e,t){return a(e,{login:t,payload:{}})}},97421:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.requestAccountCreation=t.AccountExistsStatus=void 0;const o=r(90338),n=r(45956);!function(e){e.AccountExists="yes",e.AccountDoesntExist="no",e.AccountDoesntExistInvalid="no_invalid",e.AccountDoesntExistUnlikely="no_unlikely"}(t.AccountExistsStatus||(t.AccountExistsStatus={}));const i={group:n.ApiEndpointGroups.account,version:n.ApiVersion.v1,method:n.ApiRequestMethod.POST,authenticationType:n.ApiAuthType.App,endpoint:"RequestAccountCreation"},a=(0,o.prepareApiEndpoint)(i);t.requestAccountCreation=function(e,t){return a(e,{payload:t})}},63339:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.updateContactInfo=void 0;const o=r(90338),n=r(45956),i={group:n.ApiEndpointGroups.account,version:n.ApiVersion.v1,method:n.ApiRequestMethod.POST,authenticationType:n.ApiAuthType.UserDevice,endpoint:"UpdateContactInfo"},a=(0,o.prepareApiEndpoint)(i);t.updateContactInfo=async function(e,t,r){return a(e,{login:t,payload:r})}},34957:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ExistingSecureRemembermeSession=t.MismatchedSessionSecurity=t.SessionNotFound=t.AuthenticatorNotAvailableOnDevice=t.AuthenticationTypeNotSupported=t.AuthenticatorNotRegistered=t.AssertionRejected=t.AttestationRejected=t.ChallengeVerificationFailed=t.ChallengeExpired=t.ChallengeNotFound=t.InvalidAuthentication=t.TwofaEmailTokenNotEnabled=t.UserHasNoActiveAuthenticator=t.FailedToContactAuthenticatorDevice=t.VerificationMethodDisabled=t.VerificationFailed=t.TeamGenericError=t.SSOBlocked=t.UserNotFound=t.U2fBadRequest=t.InvalidOTPBlocked=t.InvalidOTPAlreadyUsed=t.DeviceNotFound=t.DeviceDeactivated=void 0,t.DeviceDeactivated="device_deactivated",t.DeviceNotFound="device_not_found",t.InvalidOTPAlreadyUsed="invalid_otp_already_used",t.InvalidOTPBlocked="invalid_otp_blocked",t.U2fBadRequest="u2f_bad_request",t.UserNotFound="user_not_found",t.SSOBlocked="SSO_BLOCKED",t.TeamGenericError="TEAM_GENERIC_ERROR",t.VerificationFailed="verification_failed",t.VerificationMethodDisabled="verification_method_disabled",t.FailedToContactAuthenticatorDevice="FAILED_TO_CONTACT_AUTHENTICATOR_DEVICE",t.UserHasNoActiveAuthenticator="USER_HAS_NO_ACTIVE_AUTHENTICATOR",t.TwofaEmailTokenNotEnabled="TWOFA_EMAIL_TOKEN_NOT_ENABLED",t.InvalidAuthentication="invalid_authentication",t.ChallengeNotFound="CHALLENGE_NOT_FOUND",t.ChallengeExpired="CHALLENGE_EXPIRED",t.ChallengeVerificationFailed="CHALLENGE_VERIFICATION_FAILED",t.AttestationRejected="ATTESTATION_REJECTED",t.AssertionRejected="ASSERTION_REJECTED",t.AuthenticatorNotRegistered="AUTHENTICATOR_NOT_REGISTERED",t.AuthenticationTypeNotSupported="AUTHENTICATION_TYPE_NOT_SUPPORTED",t.AuthenticatorNotAvailableOnDevice="AUTHENTICATOR_NOT_AVAILABLE_ON_DEVICE",t.SessionNotFound="SESSION_NOT_FOUND",t.MismatchedSessionSecurity="MISMATCHED_SESSION_SECURITY",t.ExistingSecureRemembermeSession="EXISTING_SECURE_REMEMBERME_SESSION"},8124:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.completeDeviceRegistrationWithAuthTicket=void 0;const o=r(45956),n=r(90338),i={group:o.ApiEndpointGroups.authentication,version:o.ApiVersion.v1,method:o.ApiRequestMethod.POST,authenticationType:o.ApiAuthType.App,endpoint:"CompleteDeviceRegistrationWithAuthTicket"},a=(0,n.prepareApiEndpoint)(i);t.completeDeviceRegistrationWithAuthTicket=async function(e,t){return a(e,{payload:t})}},67747:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.completeExtraDeviceRegistrationWithToken=void 0;const o=r(45956),n=r(90338),i={group:o.ApiEndpointGroups.authentication,version:o.ApiVersion.v1,method:o.ApiRequestMethod.POST,authenticationType:o.ApiAuthType.App,endpoint:"CompleteExtraDeviceRegistrationWithToken"},a=(0,n.prepareApiEndpoint)(i);t.completeExtraDeviceRegistrationWithToken=async function(e,t){return a(e,{payload:t})}},62712:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.completeLoginWithAuthTicket=void 0;const o=r(45956),n=r(90338),i={authenticationType:o.ApiAuthType.App,endpoint:"CompleteLoginWithAuthTicket",group:o.ApiEndpointGroups.authentication,method:o.ApiRequestMethod.POST,version:o.ApiVersion.v1},a=(0,n.prepareApiEndpoint)(i);t.completeLoginWithAuthTicket=async function(e,t){return a(e,{payload:t})}},13271:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.completeRememberMeOpenSession=void 0;const o=r(45956),n=r(90338),i={group:o.ApiEndpointGroups.authentication,version:o.ApiVersion.v1,method:o.ApiRequestMethod.POST,authenticationType:o.ApiAuthType.Session,endpoint:"CompleteRememberMeOpenSession"},a=(0,n.prepareApiEndpoint)(i);t.completeRememberMeOpenSession=async function(e,t,r){return a(e,{login:t,payload:r})}},51837:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.completeRememberMeRegistration=void 0;const o=r(45956),n=r(90338),i={group:o.ApiEndpointGroups.authentication,version:o.ApiVersion.v1,method:o.ApiRequestMethod.POST,authenticationType:o.ApiAuthType.UserDevice,endpoint:"CompleteRememberMeRegistration"},a=(0,n.prepareApiEndpoint)(i);t.completeRememberMeRegistration=async function(e,t,r){return a(e,{login:t,payload:r})}},34569:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.completeTotpActivation=void 0;const o=r(45956),n=r(90338),i={authenticationType:o.ApiAuthType.UserDevice,endpoint:"CompleteTOTPActivation",group:o.ApiEndpointGroups.authentication,method:o.ApiRequestMethod.POST,version:o.ApiVersion.v1},a=(0,n.prepareApiEndpoint)(i);t.completeTotpActivation=async function(e,t,r){return a(e,{login:t,payload:r})}},61054:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.completeWebAuthnAuthenticatorRegistration=void 0;const o=r(45956),n=r(90338),i={group:o.ApiEndpointGroups.authentication,version:o.ApiVersion.v1,method:o.ApiRequestMethod.POST,authenticationType:o.ApiAuthType.UserDevice,endpoint:"CompleteWebAuthnAuthenticatorRegistration"},a=(0,n.prepareApiEndpoint)(i);t.completeWebAuthnAuthenticatorRegistration=async function(e,t,r){return a(e,{login:t,payload:r})}},8111:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.deactivateRememberMe=void 0;const o=r(45956),n=r(90338),i={group:o.ApiEndpointGroups.authentication,version:o.ApiVersion.v1,method:o.ApiRequestMethod.POST,authenticationType:o.ApiAuthType.UserDevice,endpoint:"DeactivateRememberMe"},a=(0,n.prepareApiEndpoint)(i);t.deactivateRememberMe=async function(e,t,r){return a(e,{login:t,payload:r})}},39446:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.deactivateTotpVerification=void 0;const o=r(45956),n=r(90338),i={authenticationType:o.ApiAuthType.UserDevice,endpoint:"DeactivateTOTP",group:o.ApiEndpointGroups.authentication,method:o.ApiRequestMethod.POST,version:o.ApiVersion.v1},a=(0,n.prepareApiEndpoint)(i);t.deactivateTotpVerification=async function(e,t,r){return a(e,{login:t,payload:r})}},36602:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.deactivateWebAuthnAuthenticator=void 0;const o=r(45956),n=r(90338),i={group:o.ApiEndpointGroups.authentication,version:o.ApiVersion.v1,method:o.ApiRequestMethod.POST,authenticationType:o.ApiAuthType.UserDevice,endpoint:"DeactivateWebAuthnAuthenticator"},a=(0,n.prepareApiEndpoint)(i);t.deactivateWebAuthnAuthenticator=async function(e,t,r){return a(e,{login:t,payload:r})}},15152:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getAuthenticationMethodsForDevice=void 0;const o=r(45956),n=r(90338),i={group:o.ApiEndpointGroups.authentication,version:o.ApiVersion.v1,method:o.ApiRequestMethod.POST,authenticationType:o.ApiAuthType.App,endpoint:"GetAuthenticationMethodsForDevice"},a=(0,n.prepareApiEndpoint)(i);t.getAuthenticationMethodsForDevice=async function(e,t){return a(e,{payload:t})}},13328:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getAuthenticationMethodsForLogin=void 0;const o=r(45956),n=r(90338),i={group:o.ApiEndpointGroups.authentication,version:o.ApiVersion.v1,method:o.ApiRequestMethod.POST,authenticationType:o.ApiAuthType.App,endpoint:"GetAuthenticationMethodsForLogin"},a=(0,n.prepareApiEndpoint)(i);t.getAuthenticationMethodsForLogin=async function(e,t){return a(e,{payload:t})}},32924:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getAuthenticationTokenForCardUpdate=void 0;const o=r(90338),n=r(45956),i={group:n.ApiEndpointGroups.authentication,version:n.ApiVersion.v1,method:n.ApiRequestMethod.POST,authenticationType:n.ApiAuthType.UserDevice,endpoint:"CreateTokenExtAuth"},a=(0,o.prepareApiEndpoint)(i);t.getAuthenticationTokenForCardUpdate=function(e,t){return a(e,{login:t,payload:{}})}},60132:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getAvailableWebAuthnAuthenticators=void 0;const o=r(45956),n=r(90338),i={group:o.ApiEndpointGroups.authentication,version:o.ApiVersion.v1,method:o.ApiRequestMethod.POST,authenticationType:o.ApiAuthType.Session,endpoint:"GetAvailableWebAuthnAuthenticators"},a=(0,n.prepareApiEndpoint)(i);t.getAvailableWebAuthnAuthenticators=async function(e,t){return a(e,{login:t,payload:{}})}},12407:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getMasterPasswordCipheringKey=void 0;const o=r(90338),n=r(45956),i={group:n.ApiEndpointGroups.authentication,version:n.ApiVersion.v1,method:n.ApiRequestMethod.POST,authenticationType:n.ApiAuthType.Session,endpoint:"GetMasterPasswordCipheringKey"},a=(0,o.prepareApiEndpoint)(i);t.getMasterPasswordCipheringKey=async function(e,t){return a(e,{login:t,payload:{}})}},56736:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getTokens=void 0;const o=r(90338),n=r(45956),i={group:n.ApiEndpointGroups.authentication,version:n.ApiVersion.v1,method:n.ApiRequestMethod.GET,authenticationType:n.ApiAuthType.App,endpoint:"GetTokens"},a=(0,o.prepareApiEndpoint)(i);t.getTokens=async function(e){return a(e)}},80585:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getTwoFactorAuthenticationStatus=void 0;const o=r(90338),n=r(45956),i={group:n.ApiEndpointGroups.authentication,version:n.ApiVersion.v1,method:n.ApiRequestMethod.POST,authenticationType:n.ApiAuthType.UserDevice,endpoint:"Get2FAStatus"},a=(0,o.prepareApiEndpoint)(i);t.getTwoFactorAuthenticationStatus=function(e,t){return a(e,{login:t,payload:{}})}},6862:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getU2FDevices=void 0;const o=r(45956),n=r(90338),i={authenticationType:o.ApiAuthType.UserDevice,endpoint:"GetU2FDevices",group:o.ApiEndpointGroups.authentication,method:o.ApiRequestMethod.POST,version:o.ApiVersion.v1},a=(0,n.prepareApiEndpoint)(i);t.getU2FDevices=async function(e,t){return a(e,{login:t,payload:{}})}},48974:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getUnauthorizedProfiles=void 0;const o=r(45956),n=r(90338),i={group:o.ApiEndpointGroups.authentication,version:o.ApiVersion.v1,method:o.ApiRequestMethod.POST,authenticationType:o.ApiAuthType.App,endpoint:"GetUnauthorizedProfiles"},a=(0,n.prepareApiEndpoint)(i);t.getUnauthorizedProfiles=async function(e,t){return a(e,{payload:t})}},97343:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getUserSSOInfo=void 0;const o=r(45956),n=r(90338),i={group:o.ApiEndpointGroups.authentication,version:o.ApiVersion.v1,method:o.ApiRequestMethod.POST,authenticationType:o.ApiAuthType.TeamDevice,endpoint:"GetUserSSOInfo"},a=(0,n.prepareApiEndpoint)(i);t.getUserSSOInfo=async function(e,t){const{login:r,teamUuid:o,userServiceProviderKey:n}=t;return a(e,{login:r,teamUuid:o,payload:{login:r,userServiceProviderKey:n}})}},99850:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getWebAuthnAuthenticators=void 0;const o=r(45956),n=r(90338),i={group:o.ApiEndpointGroups.authentication,version:o.ApiVersion.v1,method:o.ApiRequestMethod.POST,authenticationType:o.ApiAuthType.UserDevice,endpoint:"GetWebAuthnAuthenticators"},a=(0,n.prepareApiEndpoint)(i);t.getWebAuthnAuthenticators=async function(e,t){return a(e,{login:t,payload:{}})}},43339:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.initRememberMasterPassword=void 0;const o=r(90338),n=r(45956),i={group:n.ApiEndpointGroups.authentication,version:n.ApiVersion.v1,method:n.ApiRequestMethod.POST,authenticationType:n.ApiAuthType.UserDevice,endpoint:"InitRememberMasterPassword"},a=(0,o.prepareApiEndpoint)(i);t.initRememberMasterPassword=async function(e,t,r){return a(e,{login:t,payload:r})}},71336:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.performDashlaneAuthenticatorVerification=t.verificationTimeoutError=void 0;const o=r(59821),n=r(45956),i=r(90338);t.verificationTimeoutError={code:o.VerificationTimeout,message:"The authentication request has timed out",type:o.BusinessError};const a={authenticationType:n.ApiAuthType.App,endpoint:"PerformDashlaneAuthenticatorVerification",group:n.ApiEndpointGroups.authentication,method:n.ApiRequestMethod.POST,version:n.ApiVersion.v1},s=(0,i.prepareApiEndpoint)(a);t.performDashlaneAuthenticatorVerification=async function(e,t){return s(e,{payload:t})}},87992:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.performDuoPushVerification=void 0;const o=r(45956),n=r(90338),i={authenticationType:o.ApiAuthType.App,endpoint:"PerformDuoPushVerification",group:o.ApiEndpointGroups.authentication,method:o.ApiRequestMethod.POST,version:o.ApiVersion.v1},a=(0,n.prepareApiEndpoint)(i);t.performDuoPushVerification=async function(e,t){return a(e,{payload:t})}},4685:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.performEmailTokenVerification=void 0;const o=r(45956),n=r(90338),i={authenticationType:o.ApiAuthType.App,endpoint:"PerformEmailTokenVerification",group:o.ApiEndpointGroups.authentication,method:o.ApiRequestMethod.POST,version:o.ApiVersion.v1},a=(0,n.prepareApiEndpoint)(i);t.performEmailTokenVerification=async function(e,t){return a(e,{payload:t})}},78876:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.performSsoVerification=void 0;const o=r(45956),n=r(90338),i={authenticationType:o.ApiAuthType.App,endpoint:"PerformSsoVerification",group:o.ApiEndpointGroups.authentication,method:o.ApiRequestMethod.POST,version:o.ApiVersion.v1},a=(0,n.prepareApiEndpoint)(i);t.performSsoVerification=async function(e,t){return a(e,{payload:t})}},96425:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.performTotpVerification=void 0;const o=r(45956),n=r(90338),i={authenticationType:o.ApiAuthType.App,endpoint:"PerformTotpVerification",group:o.ApiEndpointGroups.authentication,method:o.ApiRequestMethod.POST,version:o.ApiVersion.v1},a=(0,n.prepareApiEndpoint)(i);t.performTotpVerification=async function(e,t){return a(e,{payload:t})}},99289:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.performU2FVerification=void 0;const o=r(45956),n=r(90338),i={authenticationType:o.ApiAuthType.App,endpoint:"PerformU2FVerification",group:o.ApiEndpointGroups.authentication,method:o.ApiRequestMethod.POST,version:o.ApiVersion.v1},a=(0,n.prepareApiEndpoint)(i);t.performU2FVerification=async function(e,t){return a(e,{payload:t})}},10954:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.requestEmailTokenVerification=void 0;const o=r(45956),n=r(90338),i={group:o.ApiEndpointGroups.authentication,version:o.ApiVersion.v1,method:o.ApiRequestMethod.POST,authenticationType:o.ApiAuthType.App,endpoint:"RequestEmailTokenVerification"},a=(0,n.prepareApiEndpoint)(i);t.requestEmailTokenVerification=async function(e,t){return a(e,{payload:t})}},1371:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.requestExtraDeviceRegistration=void 0;const o=r(45956),n=r(90338),i={group:o.ApiEndpointGroups.authentication,version:o.ApiVersion.v1,method:o.ApiRequestMethod.POST,authenticationType:o.ApiAuthType.UserDevice,endpoint:"RequestExtraDeviceRegistration"},a=(0,n.prepareApiEndpoint)(i);t.requestExtraDeviceRegistration=async function(e,t){return a(e,{login:t,payload:{tokenType:"shortLived"}})}},51296:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.requestTOTPActivation=void 0;const o=r(45956),n=r(90338),i={authenticationType:o.ApiAuthType.UserDevice,endpoint:"RequestTOTPActivation",group:o.ApiEndpointGroups.authentication,method:o.ApiRequestMethod.POST,version:o.ApiVersion.v1},a=(0,n.prepareApiEndpoint)(i);t.requestTOTPActivation=async function(e,t,r){return a(e,{login:t,payload:r})}},48253:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.removeU2FAuthenticator=void 0;const o=r(90338),n=r(45956),i={group:n.ApiEndpointGroups.authentication,version:n.ApiVersion.v1,method:n.ApiRequestMethod.POST,authenticationType:n.ApiAuthType.UserDevice,endpoint:"DeactivateU2FDevice"},a=(0,o.prepareApiEndpoint)(i);t.removeU2FAuthenticator=async function(e,t,r){return a(e,{login:t,payload:r})}},48730:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.requestWebauthnOpenSession=void 0;const o=r(45956),n=r(90338),i={group:o.ApiEndpointGroups.authentication,version:o.ApiVersion.v1,method:o.ApiRequestMethod.POST,authenticationType:o.ApiAuthType.Session,endpoint:"RequestWebauthnOpenSession"},a=(0,n.prepareApiEndpoint)(i);t.requestWebauthnOpenSession=async function(e,t){return a(e,{login:t,payload:{}})}},24925:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.requestWebauthnRegistration=void 0;const o=r(45956),n=r(90338),i={group:o.ApiEndpointGroups.authentication,version:o.ApiVersion.v1,method:o.ApiRequestMethod.POST,authenticationType:o.ApiAuthType.UserDevice,endpoint:"RequestWebauthnRegistration"},a=(0,n.prepareApiEndpoint)(i);t.requestWebauthnRegistration=async function(e,t){return a(e,{login:t,payload:{}})}},75714:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.addPrivateBreach=void 0;const o=r(45956),n=r(90338),i={group:o.ApiEndpointGroups.dataleakQA,version:o.ApiVersion.v1,method:o.ApiRequestMethod.POST,authenticationType:o.ApiAuthType.App,endpoint:"AddTestLeak"},a=(0,n.prepareApiEndpoint)(i);t.addPrivateBreach=async function(e,t){return a(e,{payload:{...t}})}},77074:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.createOrUpdateDarkWebBreach=void 0;const o=r(45956),n=r(90338),i={group:o.ApiEndpointGroups.dataleakQA,version:o.ApiVersion.v1,method:o.ApiRequestMethod.POST,authenticationType:o.ApiAuthType.App,endpoint:"SetTestDataBreach"},a=(0,n.prepareApiEndpoint)(i);t.createOrUpdateDarkWebBreach=async function(e,t){return a(e,{payload:{...t}})}},72579:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.createPublicBreach=void 0;const o=r(45956),n=r(90338),i={group:o.ApiEndpointGroups.breachesQA,version:o.ApiVersion.v1,method:o.ApiRequestMethod.POST,authenticationType:o.ApiAuthType.App,endpoint:"CreateTestBreach"},a=(0,n.prepareApiEndpoint)(i);t.createPublicBreach=async function(e,t){return a(e,{payload:t})}},82512:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getDarkWebInsightReport=void 0;const o=r(45956),n=r(90338),i={group:o.ApiEndpointGroups.teams,version:o.ApiVersion.v1,method:o.ApiRequestMethod.POST,authenticationType:o.ApiAuthType.UserDevice,endpoint:"GetDarkWebInsightsReportDetails"},a=(0,n.prepareApiEndpoint)(i);t.getDarkWebInsightReport=async function(e,t,r){return a(e,{login:t,payload:r})}},19667:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getDarkWebInsightsSummaryRequest=void 0;const o=r(45956),n=r(90338),i={group:o.ApiEndpointGroups.teams,version:o.ApiVersion.v1,method:o.ApiRequestMethod.POST,authenticationType:o.ApiAuthType.UserDevice,endpoint:"GetDarkWebInsightsSummary"},a=(0,n.prepareApiEndpoint)(i);t.getDarkWebInsightsSummaryRequest=async function(e,t){return a(e,{login:t,payload:{}})}},91063:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.deactivateDevices=t.CLIENT_STILL_OVERFLOWING=t.PAIRING_GROUPS_NOT_FOUND=t.CLIENT_DEVICES_NOT_FOUND=void 0;const o=r(45956),n=r(90338);t.CLIENT_DEVICES_NOT_FOUND="CLIENT_DEVICES_NOT_FOUND",t.PAIRING_GROUPS_NOT_FOUND="PAIRING_GROUPS_NOT_FOUND",t.CLIENT_STILL_OVERFLOWING="CLIENT_STILL_OVERFLOWING";const i={group:o.ApiEndpointGroups.devices,version:o.ApiVersion.v1,method:o.ApiRequestMethod.POST,authenticationType:o.ApiAuthType.UserDevice,endpoint:"DeactivateDevices"},a=(0,n.prepareApiEndpoint)(i);t.deactivateDevices=async function(e,t,r){return a(e,{login:t,payload:r})}},18625:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.listDevices=void 0;const o=r(45956),n=r(90338),i={group:o.ApiEndpointGroups.devices,version:o.ApiVersion.v1,method:o.ApiRequestMethod.POST,authenticationType:o.ApiAuthType.UserDevice,endpoint:"ListDevices"},a=(0,n.prepareApiEndpoint)(i);t.listDevices=async function(e,t){return a(e,{login:t,payload:{}})}},59821:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.InvalidTeamDeviceLogin=t.BasicConfigNotFound=t.DeactivatedTeamDevice=t.DeviceKeyNotFound=t.DeviceAccountMappingAlreadyExists=t.B2bSsoUserNotFound=t.NoFreeSlot=t.NotProposedNeitherAccepted=t.InvalidSsoToken=t.InvalidUser=t.DomainNotValidForTeam=t.TotpActiveOrNotSeeded=t.ConfigurationNotFound=t.TeamDeviceEncryptedConfigNotFound=t.InvalidTOTPStatus=t.VerificationMethodInvalid=t.InvalidAuthTicket=t.WrongPublicKey=t.VerificationTimeout=t.VerificationRequiresRequest=t.VerificationFailedTooManyTimes=t.UpdateOfVerificationMethodNotSupported=t.UnexpectedError=t.UnchangedPrivateKey=t.TwofaSettingSameAsCurrent=t.TwofaServerKeyProvidedIncorrectly=t.TwofaServerKeyNotProvided=t.TeamDoesNotExist=t.TemporaryDisabled=t.NoMpEncryptionKey=t.NotAdmin=t.NoSharingKeys=t.NothingToUpdate=t.NoExternalToken=t.MissingSettingsTransaction=t.InvalidSessionAccessKey=t.InvalidKey=t.InsufficientTier=t.ExternalTokenSignatureNotAvailableForPartner=t.Current2faSettingCannotBeChangedAtUpload=t.ConflictingUpload=t.AccountBlockedContactSupport=t.ServerError=t.RateLimitError=t.InvalidRequestError=t.InjectedError=t.BusinessError=void 0,t.BusinessError="business_error",t.InjectedError="injected_error",t.InvalidRequestError="invalid_request_error",t.RateLimitError="rate_limit_error",t.ServerError="server_error",t.AccountBlockedContactSupport="account_blocked_contact_support",t.ConflictingUpload="conflicting_upload",t.Current2faSettingCannotBeChangedAtUpload="current_2fa_setting_cannot_be_changed_at_upload",t.ExternalTokenSignatureNotAvailableForPartner="external_token_signature_not_available_for_partner",t.InsufficientTier="INSUFFICIENT_TIER",t.InvalidKey="invalid_key",t.InvalidSessionAccessKey="invalid_session_access_key",t.MissingSettingsTransaction="MISSING_SETTINGS_TRANSACTION",t.NoExternalToken="no_external_token",t.NothingToUpdate="NOTHING_TO_UPDATE",t.NoSharingKeys="NO_SHARING_KEYS",t.NotAdmin="NOT_ADMIN",t.NoMpEncryptionKey="no_mp_encryption_key",t.TemporaryDisabled="temporary_disabled",t.TeamDoesNotExist="TEAM_DOES_NOT_EXIST",t.TwofaServerKeyNotProvided="2fa_server_key_not_provided",t.TwofaServerKeyProvidedIncorrectly="2fa_server_key_provided_incorrectly",t.TwofaSettingSameAsCurrent="2fa_setting_same_as_current",t.UnchangedPrivateKey="UNCHANGED_PRIVATE_KEY",t.UnexpectedError="unexpected_error",t.UpdateOfVerificationMethodNotSupported="UPDATE_OF_VERIFICATION_METHOD_NOT_SUPPORTED",t.VerificationFailedTooManyTimes="verification_failed_too_many_times",t.VerificationRequiresRequest="verification_requires_request",t.VerificationTimeout="verification_timeout",t.WrongPublicKey="WRONG_PUBLIC_KEY",t.InvalidAuthTicket="invalid_auth_ticket",t.VerificationMethodInvalid="verification_method_invalid",t.InvalidTOTPStatus="invalid_totp_status",t.TeamDeviceEncryptedConfigNotFound="TEAM_DEVICE_CONFIGURATION_NOT_FOUND",t.ConfigurationNotFound="TEAM_DEVICE_CONFIGURATION_NOT_FOUND",t.TotpActiveOrNotSeeded="totp_active_or_not_seeded",t.DomainNotValidForTeam="DOMAIN_NOT_VALID_FOR_TEAM",t.InvalidUser="invalid_user",t.InvalidSsoToken="invalid_sso_token",t.NotProposedNeitherAccepted="not_proposed_neither_accepted",t.NoFreeSlot="no_free_slot",t.B2bSsoUserNotFound="B2B_SSO_USER_NOT_FOUND",t.DeviceAccountMappingAlreadyExists="DEVICE_ACCOUNT_MAPPING_ALREADY_EXISTS",t.DeviceKeyNotFound="DEVICE_KEY_NOT_FOUND",t.DeactivatedTeamDevice="DEACTIVATED_TEAM_DEVICE",t.BasicConfigNotFound="BASIC_CONFIGURATION_NOT_FOUND",t.InvalidTeamDeviceLogin="INVALID_TEAM_DEVICE_LOGIN"},4933:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.removeFamilyMemberErrors=t.leaveFamilyErrors=t.joinFamilyErrors=t.UserMustCancelPremiumPlusRenewalToDowngradeToFamily=t.UserNotMemberOfFamily=t.CannotRemoveFamilyAdmin=t.UserMustBeFamilyAdmin=t.FamilyHasBeenDiscontinued=t.UserSubscriptionIsUpForRenewal=t.JoinFamilyTokenNotFound=t.AlreadyJoinedThisFamily=t.CannotJoinMultipleFamilies=t.FamilyFull=t.BadLogin=void 0,t.BadLogin="BAD_LOGIN",t.FamilyFull="FAMILY_FULL",t.CannotJoinMultipleFamilies="CANNOT_JOIN_MULTIPLE_FAMILIES",t.AlreadyJoinedThisFamily="ALREADY_JOINED_THIS_FAMILY",t.JoinFamilyTokenNotFound="JOIN_FAMILY_TOKEN_NOT_FOUND",t.UserSubscriptionIsUpForRenewal="USER_SUBSCRIPTION_IS_UP_FOR_RENEWAL",t.FamilyHasBeenDiscontinued="FAMILY_HAS_BEEN_DISCONTINUED",t.UserMustBeFamilyAdmin="USER_MUST_BE_FAMILY_ADMIN",t.CannotRemoveFamilyAdmin="CANNOT_REMOVE_FAMILY_ADMIN",t.UserNotMemberOfFamily="USER_NOT_MEMBER_OF_FAMILY",t.UserMustCancelPremiumPlusRenewalToDowngradeToFamily="USER_MUST_CANCEL_PREMIUM_PLUS_RENEWAL_TO_DOWNGRADE_TO_FAMILY",t.joinFamilyErrors=[t.BadLogin,t.FamilyFull,t.CannotJoinMultipleFamilies,t.AlreadyJoinedThisFamily,t.JoinFamilyTokenNotFound,t.UserSubscriptionIsUpForRenewal,t.FamilyHasBeenDiscontinued,t.UserMustCancelPremiumPlusRenewalToDowngradeToFamily],t.leaveFamilyErrors=[t.CannotRemoveFamilyAdmin,t.UserNotMemberOfFamily],t.removeFamilyMemberErrors=[t.UserMustBeFamilyAdmin,t.CannotRemoveFamilyAdmin,t.UserNotMemberOfFamily]},53e3:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getFamilyDetails=void 0;const o=r(90338),n=r(45956),i={group:n.ApiEndpointGroups.familyplan,version:n.ApiVersion.v1,method:n.ApiRequestMethod.POST,authenticationType:n.ApiAuthType.UserDevice,endpoint:"GetFamilyDetails"},a=(0,o.prepareApiEndpoint)(i);t.getFamilyDetails=async function(e,t){return a(e,{login:t,payload:{}})}},11560:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.joinFamily=t.FamilyStopRenewalPlatforms=t.FamilyStopRenewalStates=void 0;const o=r(90338),n=r(45956);t.FamilyStopRenewalStates=Object.freeze({STOPPED:"stopped",NOT_STOPPED:"not_stopped"}),t.FamilyStopRenewalPlatforms=Object.freeze({IOS_APP_STORE:"ios",MAC_STORE:"mac",PLAY_STORE:"playstore",PAYPAL:"paypal",STRIPE:"stripe",PROCESSOUT:"processout"});const i={group:n.ApiEndpointGroups.familyplan,version:n.ApiVersion.v1,method:n.ApiRequestMethod.POST,authenticationType:n.ApiAuthType.App,endpoint:"JoinFamily"},a=(0,o.prepareApiEndpoint)(i);t.joinFamily=async function(e,t){return a(e,{payload:t})}},86661:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.leaveFamily=void 0;const o=r(90338),n=r(45956),i={group:n.ApiEndpointGroups.familyplan,version:n.ApiVersion.v1,method:n.ApiRequestMethod.POST,authenticationType:n.ApiAuthType.UserDevice,endpoint:"LeaveFamily"},a=(0,o.prepareApiEndpoint)(i);t.leaveFamily=async function(e,t){return a(e,{login:t,payload:{}})}},15244:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.removeFamilyMember=void 0;const o=r(90338),n=r(45956),i={group:n.ApiEndpointGroups.familyplan,version:n.ApiVersion.v1,method:n.ApiRequestMethod.POST,authenticationType:n.ApiAuthType.UserDevice,endpoint:"RemoveFamilyMember"},a=(0,o.prepareApiEndpoint)(i);t.removeFamilyMember=async function(e,t,r){return a(e,{login:t,payload:r})}},29591:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.resetFamilyJoinToken=void 0;const o=r(90338),n=r(45956),i={group:n.ApiEndpointGroups.familyplan,version:n.ApiVersion.v1,method:n.ApiRequestMethod.POST,authenticationType:n.ApiAuthType.UserDevice,endpoint:"ResetJoinToken"},a=(0,o.prepareApiEndpoint)(i);t.resetFamilyJoinToken=async function(e,t){return a(e,{login:t,payload:{}})}},47521:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getFeatureFlip=void 0;const o=r(90338),n=r(45956),i={group:n.ApiEndpointGroups.features,version:n.ApiVersion.v1,method:n.ApiRequestMethod.POST,authenticationType:n.ApiAuthType.UserDevice,endpoint:"GetAndEvaluateForUser"},a=(0,o.prepareApiEndpoint)(i);t.getFeatureFlip=function(e,t,r){return a(e,{login:t,payload:{features:[r]}})}},64272:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.isGetFilesMetaSuccess=t.getFilesMeta=t.endpoint=void 0;const o=r(90338),n=r(45956);t.endpoint="GetFileMetaV2";const i={group:n.ApiEndpointGroups.file,version:n.ApiVersion.v1,method:n.ApiRequestMethod.POST,authenticationType:n.ApiAuthType.UserDevice,endpoint:t.endpoint},a=(0,o.prepareApiEndpoint)(i);t.getFilesMeta=(e,t,r)=>a(e,{login:t,payload:r});t.isGetFilesMetaSuccess=e=>"success"===e.code},91503:function(e,t,r){var o=this&&this.__createBinding||(Object.create?function(e,t,r,o){void 0===o&&(o=r);var n=Object.getOwnPropertyDescriptor(t,r);n&&!("get"in n?!t.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,o,n)}:function(e,t,r,o){void 0===o&&(o=r),e[o]=t[r]}),n=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||o(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),n(r(59821),t),n(r(97421),t),n(r(55710),t),n(r(63339),t),n(r(45468),t),n(r(91063),t),n(r(18625),t),n(r(11560),t),n(r(53e3),t),n(r(15244),t),n(r(29591),t),n(r(86661),t),n(r(34957),t),n(r(8124),t),n(r(67747),t),n(r(62712),t),n(r(13271),t),n(r(51837),t),n(r(61054),t),n(r(39446),t),n(r(8111),t),n(r(36602),t),n(r(13328),t),n(r(15152),t),n(r(60132),t),n(r(12407),t),n(r(56736),t),n(r(80585),t),n(r(6862),t),n(r(99850),t),n(r(48974),t),n(r(43339),t),n(r(87992),t),n(r(4685),t),n(r(78876),t),n(r(96425),t),n(r(99289),t),n(r(71336),t),n(r(1371),t),n(r(10954),t),n(r(48253),t),n(r(51296),t),n(r(24925),t),n(r(48730),t),n(r(3278),t),n(r(71633),t),n(r(19336),t),n(r(13445),t),n(r(49481),t),n(r(86680),t),n(r(18959),t),n(r(36420),t),n(r(32042),t),n(r(42216),t),n(r(54268),t),n(r(56026),t),n(r(81926),t),n(r(28974),t),n(r(46583),t),n(r(43775),t),n(r(9161),t),n(r(34252),t),n(r(92006),t),n(r(80474),t),n(r(10554),t),n(r(41780),t),n(r(25094),t),n(r(3330),t),n(r(80359),t),n(r(74895),t)},66677:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getKillSwitches=void 0;const o=r(90338),n=r(45956),i={group:n.ApiEndpointGroups.killswitch,version:n.ApiVersion.v1,method:n.ApiRequestMethod.POST,authenticationType:n.ApiAuthType.App,endpoint:"GetKillSwitches"},a=(0,o.prepareApiEndpoint)(i);t.getKillSwitches=async function(e,t){return a(e,{payload:{requestedKillswitches:t}})}},3330:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.requestPairing=void 0;const o=r(90338),n=r(45956),i={group:n.ApiEndpointGroups.pairing,version:n.ApiVersion.v1,method:n.ApiRequestMethod.POST,authenticationType:n.ApiAuthType.UserDevice,endpoint:"RequestPairing"},a=(0,o.prepareApiEndpoint)(i);t.requestPairing=async function(e,t){return a(e,{login:t,payload:{}})}},48008:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getCustomerInvoice=void 0;const o=r(90338),n=r(45956),i={group:n.ApiEndpointGroups.payments,version:n.ApiVersion.v1,method:n.ApiRequestMethod.POST,authenticationType:n.ApiAuthType.UserDevice,endpoint:"GetCustomerInvoice",accept:"application/pdf",responseType:"arraybuffer"},a=(0,o.prepareApiEndpoint)(i);t.getCustomerInvoice=async function(e,t,r){return a(e,{login:t,payload:r})}},36273:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.listInvoices=void 0;const o=r(90338),n=r(45956),i={group:n.ApiEndpointGroups.payments,version:n.ApiVersion.v1,method:n.ApiRequestMethod.POST,authenticationType:n.ApiAuthType.UserDevice,endpoint:"ListInvoices"},a=(0,o.prepareApiEndpoint)(i);t.listInvoices=async function(e,t){return a(e,{login:t,payload:{}})}},48523:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.grantFullRefundAndCancelSubscription=void 0;const o=r(90338),n=r(45956),i={group:n.ApiEndpointGroups.payments,version:n.ApiVersion.v1,method:n.ApiRequestMethod.POST,authenticationType:n.ApiAuthType.UserDevice,endpoint:"GrantFullRefundAndCancelSubscription"},a=(0,o.prepareApiEndpoint)(i);t.grantFullRefundAndCancelSubscription=async function(e,t,r){return a(e,{login:t,payload:r})}},80359:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getHashes=void 0;const o=r(90338),n=r(45956),i={group:n.ApiEndpointGroups.pwleak,version:n.ApiVersion.v1,method:n.ApiRequestMethod.POST,authenticationType:n.ApiAuthType.App,endpoint:"GetHashes"},a=(0,o.prepareApiEndpoint)(i);t.getHashes=async function(e,t){return a(e,{payload:t})}},3278:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.confirmMasterPasswordChangeDone=void 0;const o=r(45956),n=r(90338),i={authenticationType:o.ApiAuthType.UserDevice,endpoint:"ConfirmMasterPasswordChangeDone",group:o.ApiEndpointGroups.sync,method:o.ApiRequestMethod.POST,version:o.ApiVersion.v1},a=(0,n.prepareApiEndpoint)(i);t.confirmMasterPasswordChangeDone=async function(e,t,r){return a(e,{login:t,payload:r})}},71633:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getDataForMasterPasswordChange=void 0;const o=r(45956),n=r(90338),i={authenticationType:o.ApiAuthType.UserDevice,endpoint:"GetDataForMasterPasswordChange",group:o.ApiEndpointGroups.sync,method:o.ApiRequestMethod.POST,version:o.ApiVersion.v1},a=(0,n.prepareApiEndpoint)(i);t.getDataForMasterPasswordChange=async function(e,t,r){return a(e,{login:t,payload:r})}},19336:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getLatestContent=void 0;const o=r(45956),n=r(90338),i={group:o.ApiEndpointGroups.sync,version:o.ApiVersion.v1,method:o.ApiRequestMethod.POST,authenticationType:o.ApiAuthType.UserDevice,endpoint:"GetLatestContent"},a=(0,n.prepareApiEndpoint)(i);t.getLatestContent=async function(e,t,r){return a(e,{login:t,payload:r})}},69214:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.uploadDataForCryptoChange=void 0;const o=r(90338),n=r(45956),i={authenticationType:n.ApiAuthType.UserDevice,endpoint:"UploadDataForCryptoUpdate",group:n.ApiEndpointGroups.sync,method:n.ApiRequestMethod.POST,version:n.ApiVersion.v1},a=(0,o.prepareApiEndpoint)(i);t.uploadDataForCryptoChange=async function(e,t,r){return await a(e,{login:t,payload:r})}},13445:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.uploadDataForMasterPasswordChange=void 0;const o=r(45956),n=r(90338),i={authenticationType:o.ApiAuthType.UserDevice,endpoint:"UploadDataForMasterPasswordChange",group:o.ApiEndpointGroups.sync,method:o.ApiRequestMethod.POST,version:o.ApiVersion.v1},a=(0,n.prepareApiEndpoint)(i);t.uploadDataForMasterPasswordChange=async function(e,t,r){return a(e,{login:t,payload:r})}},49481:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.lastADSyncDate=t.lastADSyncDateErrors=void 0;const o=r(90338),n=r(45956);t.lastADSyncDateErrors=["NOT_ADMIN","INSUFFICIENT_TIER"];const i={group:n.ApiEndpointGroups.teams,version:n.ApiVersion.v1,method:n.ApiRequestMethod.POST,authenticationType:n.ApiAuthType.UserDevice,endpoint:"LastADSyncDate"},a=(0,o.prepareApiEndpoint)(i);t.lastADSyncDate=function(e,t){return a(e,{login:t,payload:{}})}},18959:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getAuditLogsQueryResults=void 0;const o=r(90338),n=r(45956),i={group:n.ApiEndpointGroups.teams,version:n.ApiVersion.v1,method:n.ApiRequestMethod.POST,authenticationType:n.ApiAuthType.UserDevice,endpoint:"GetAuditLogQueryResults"},a=(0,o.prepareApiEndpoint)(i);t.getAuditLogsQueryResults=function(e,t,r){return a(e,{login:t,payload:r})}},86680:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.startAuditLogsQuery=void 0;const o=r(90338),n=r(45956),i={group:n.ApiEndpointGroups.teams,version:n.ApiVersion.v1,method:n.ApiRequestMethod.POST,authenticationType:n.ApiAuthType.UserDevice,endpoint:"StartAuditLogsQuery"},a=(0,o.prepareApiEndpoint)(i);t.startAuditLogsQuery=function(e,t,r){return a(e,{login:t,payload:r})}},21712:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.computePlanPricingRequest=void 0;const o=r(45956),n=r(90338),i={group:o.ApiEndpointGroups.teams,version:o.ApiVersion.v1,method:o.ApiRequestMethod.POST,authenticationType:o.ApiAuthType.UserDevice,endpoint:"ComputePlanPricing"},a=(0,n.prepareApiEndpoint)(i);t.computePlanPricingRequest=async function(e,t,r){const o={seats:r};return await a(e,{login:t,payload:o})}},81926:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.listTeamDevicesErrors=t.getTeamDeviceErrors=t.createTeamDeviceAccountErrors=t.deactivateTeamDeviceErrors=t.registerTeamDeviceErrors=void 0;const o=r(59821),n=r(45956);t.registerTeamDeviceErrors=[o.NotAdmin,n.UnknownError],t.deactivateTeamDeviceErrors=[o.NotAdmin,n.UnknownError,o.DeviceKeyNotFound,o.DeactivatedTeamDevice],t.createTeamDeviceAccountErrors=[o.NotAdmin,o.DeviceAccountMappingAlreadyExists,o.InvalidTeamDeviceLogin],t.getTeamDeviceErrors=[o.NotAdmin,n.UnknownError],t.listTeamDevicesErrors=[o.NotAdmin,n.UnknownError]},28974:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.createTeamDeviceAccount=void 0;const o=r(90338),n=r(45956),i={group:n.ApiEndpointGroups.teams,version:n.ApiVersion.v1,method:n.ApiRequestMethod.POST,authenticationType:n.ApiAuthType.UserDevice,endpoint:"CreateTeamDeviceAccount"},a=(0,o.prepareApiEndpoint)(i);t.createTeamDeviceAccount=(e,t,r)=>a(e,{login:t,payload:r})},43775:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.deactivateTeamDevice=void 0;const o=r(90338),n=r(45956),i={group:n.ApiEndpointGroups.teams,version:n.ApiVersion.v1,method:n.ApiRequestMethod.POST,authenticationType:n.ApiAuthType.UserDevice,endpoint:"DeactivateTeamDevice"},a=(0,o.prepareApiEndpoint)(i);t.deactivateTeamDevice=function(e,t,r){return a(e,{login:t,payload:r})}},9161:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getTeamDevice=void 0;const o=r(90338),n=r(45956),i={group:n.ApiEndpointGroups.teams,version:n.ApiVersion.v1,method:n.ApiRequestMethod.POST,authenticationType:n.ApiAuthType.UserDevice,endpoint:"GetTeamDevice"},a=(0,o.prepareApiEndpoint)(i);t.getTeamDevice=async function(e,t,r){return await a(e,{login:t,payload:r})}},34252:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.listTeamDevices=void 0;const o=r(90338),n=r(45956),i={group:n.ApiEndpointGroups.teams,version:n.ApiVersion.v1,method:n.ApiRequestMethod.POST,authenticationType:n.ApiAuthType.UserDevice,endpoint:"ListTeamDevices"},a=(0,o.prepareApiEndpoint)(i);t.listTeamDevices=async(e,t)=>await a(e,{login:t,payload:{}})},46583:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.registerTeamDevice=void 0;const o=r(90338),n=r(45956),i={group:n.ApiEndpointGroups.teams,version:n.ApiVersion.v1,method:n.ApiRequestMethod.POST,authenticationType:n.ApiAuthType.UserDevice,endpoint:"RegisterTeamDevice"},a=(0,o.prepareApiEndpoint)(i);t.registerTeamDevice=function(e,t,r){return a(e,{login:t,payload:r})}},36420:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.completeDomainRegistrationErrors=t.completeDomainRegistration=void 0;const o=r(90338),n=r(45956),i={group:n.ApiEndpointGroups.teams,version:n.ApiVersion.v1,method:n.ApiRequestMethod.POST,authenticationType:n.ApiAuthType.UserDevice,endpoint:"CompleteDomainsRegistration"},a=(0,o.prepareApiEndpoint)(i);t.completeDomainRegistration=async function(e,t){return a(e,{login:t,payload:{}})},t.completeDomainRegistrationErrors=["NOT_ADMIN"]},32042:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.deactivateDomain=t.deactivateDomainErrors=void 0;const o=r(90338),n=r(45956);t.deactivateDomainErrors=["NOT_ADMIN","DOMAIN_NOT_FOUND","DOMAIN_NOT_VALID_FOR_TEAM","DOMAIN_CANNOT_BE_DEACTIVATED","DOMAIN_DELETION_FAILED"];const i={group:n.ApiEndpointGroups.teams,version:n.ApiVersion.v1,method:n.ApiRequestMethod.POST,authenticationType:n.ApiAuthType.UserDevice,endpoint:"DeactivateDomain"},a=(0,o.prepareApiEndpoint)(i);t.deactivateDomain=async function(e,t,r){return a(e,{login:t,payload:r})}},42216:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.listDomains=t.listDomainErrors=void 0;const o=r(90338),n=r(45956);t.listDomainErrors=["NOT_ADMIN"];const i={group:n.ApiEndpointGroups.teams,version:n.ApiVersion.v1,method:n.ApiRequestMethod.POST,authenticationType:n.ApiAuthType.UserDevice,endpoint:"ListDomains"},a=(0,o.prepareApiEndpoint)(i);t.listDomains=async function(e,t){return a(e,{login:t,payload:{}})}},54268:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.requestDomainRegistration=t.requestDomainRegistrationErrors=void 0;const o=r(90338),n=r(45956);t.requestDomainRegistrationErrors=["TEAM_DOES_NOT_EXIST","DOMAIN_ALREADY_EXISTS","NOT_ADMIN","INVALID_PUBLIC_DOMAIN","DOMAIN_NOT_VALID_FOR_TEAM","DOMAIN_CANNOT_CONTAIN_UPPERCASE_LETTERS"];const i={group:n.ApiEndpointGroups.teams,version:n.ApiVersion.v1,method:n.ApiRequestMethod.POST,authenticationType:n.ApiAuthType.UserDevice,endpoint:"RequestDomainRegistration"},a=(0,o.prepareApiEndpoint)(i);t.requestDomainRegistration=function(e,t,r){return a(e,{login:t,payload:r})}},93934:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.changeInviteLinkTeamKey=void 0;const o=r(90338),n=r(45956),i={group:n.ApiEndpointGroups.teams,version:n.ApiVersion.v1,method:n.ApiRequestMethod.POST,authenticationType:n.ApiAuthType.UserDevice,endpoint:"ChangeTeamKey"},a=(0,o.prepareApiEndpoint)(i);t.changeInviteLinkTeamKey=(e,t)=>a(e,{login:t,payload:{}})},5928:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getInviteLinkErrors=void 0;const o=r(32626);t.getInviteLinkErrors=[o.InviteLinkResponseErrorCode.NotAdmin,o.InviteLinkResponseErrorCode.InviteLinkNotFound,o.InviteLinkResponseErrorCode.TeamKeyNotFound,o.InviteLinkResponseErrorCode.UserInviteLinkNotFound]},32811:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.createInviteLink=void 0;const o=r(90338),n=r(45956),i={group:n.ApiEndpointGroups.teams,version:n.ApiVersion.v1,method:n.ApiRequestMethod.POST,authenticationType:n.ApiAuthType.UserDevice,endpoint:"CreateTeamSignUpPage"},a=(0,o.prepareApiEndpoint)(i);t.createInviteLink=(e,t,r)=>a(e,{login:t,payload:r})},44609:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getInviteLinkForAdmin=void 0;const o=r(90338),n=r(45956),i={group:n.ApiEndpointGroups.teams,version:n.ApiVersion.v1,method:n.ApiRequestMethod.POST,authenticationType:n.ApiAuthType.UserDevice,endpoint:"GetTeamSignUpPageForAdmin"},a=(0,o.prepareApiEndpoint)(i);t.getInviteLinkForAdmin=(e,t)=>a(e,{login:t,payload:{}})},6563:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getInviteLink=void 0;const o=r(90338),n=r(45956),i={group:n.ApiEndpointGroups.teams,version:n.ApiVersion.v1,method:n.ApiRequestMethod.POST,authenticationType:n.ApiAuthType.App,endpoint:"GetTeamSignUpPage"},a=(0,o.prepareApiEndpoint)(i);t.getInviteLink=(e,t)=>a(e,{payload:t})},41780:function(e,t,r){var o=this&&this.__createBinding||(Object.create?function(e,t,r,o){void 0===o&&(o=r);var n=Object.getOwnPropertyDescriptor(t,r);n&&!("get"in n?!t.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,o,n)}:function(e,t,r,o){void 0===o&&(o=r),e[o]=t[r]}),n=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||o(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),n(r(5928),t),n(r(93934),t),n(r(32811),t),n(r(6563),t),n(r(44609),t),n(r(92020),t),n(r(25731),t)},25731:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.requestInviteLinkToken=void 0;const o=r(90338),n=r(45956),i={group:n.ApiEndpointGroups.teams,version:n.ApiVersion.v1,method:n.ApiRequestMethod.POST,authenticationType:n.ApiAuthType.App,endpoint:"RequestTeamInviteToken"},a=(0,o.prepareApiEndpoint)(i);t.requestInviteLinkToken=(e,t)=>a(e,{payload:t})},92020:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.toggleInviteLink=void 0;const o=r(90338),n=r(45956),i={group:n.ApiEndpointGroups.teams,version:n.ApiVersion.v1,method:n.ApiRequestMethod.POST,authenticationType:n.ApiAuthType.UserDevice,endpoint:"ToggleTeamSignUpPage"},a=(0,o.prepareApiEndpoint)(i);t.toggleInviteLink=(e,t,r)=>a(e,{login:t,payload:r})},74528:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getRecoveryCodesAsTeamCaptain=t.GetRecoveryCodesAsTeamCaptainInternalErrorCode=t.GetRecoveryCodesAsTeamCaptainNotAdminErrorCode=void 0;const o=r(90338),n=r(45956);t.GetRecoveryCodesAsTeamCaptainNotAdminErrorCode="not_billing_admin",t.GetRecoveryCodesAsTeamCaptainInternalErrorCode="internal_error";const i={group:n.ApiEndpointGroups.teams,version:n.ApiVersion.v1,method:n.ApiRequestMethod.POST,authenticationType:n.ApiAuthType.UserDevice,endpoint:"GetRecoveryCodesAsTeamCaptain"},a=(0,o.prepareApiEndpoint)(i);t.getRecoveryCodesAsTeamCaptain=function(e,t,r){return a(e,{login:t,payload:r})}},95375:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getTeamMembers=void 0;const o=r(90338),n=r(45956),i={group:n.ApiEndpointGroups.teams,version:n.ApiVersion.v1,method:n.ApiRequestMethod.POST,authenticationType:n.ApiAuthType.UserDevice,endpoint:"GetTeamMembers"},a=(0,o.prepareApiEndpoint)(i);t.getTeamMembers=function(e,t,r){return a(e,{login:t,payload:r})}},92006:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.updateTeamDeviceEncryptedConfigErrors=t.getTeamDeviceEncryptedConfigErrors=void 0;const o=r(59821),n=r(45956);t.getTeamDeviceEncryptedConfigErrors=[o.TeamDeviceEncryptedConfigNotFound,o.NotAdmin],t.updateTeamDeviceEncryptedConfigErrors=[o.NotAdmin,n.UnknownError,o.DeviceAccountMappingAlreadyExists,o.DeviceKeyNotFound]},80474:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getTeamDeviceEncryptedConfig=void 0;const o=r(90338),n=r(45956),i={group:n.ApiEndpointGroups.teams,version:n.ApiVersion.v1,method:n.ApiRequestMethod.POST,authenticationType:n.ApiAuthType.UserDevice,endpoint:"GetTeamDeviceEncryptedConfiguration"},a=(0,o.prepareApiEndpoint)(i);t.getTeamDeviceEncryptedConfig=(e,t,r)=>a(e,{login:t,payload:r})},10554:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.updateTeamDeviceEncryptedConfig=void 0;const o=r(90338),n=r(45956),i={group:n.ApiEndpointGroups.teams,version:n.ApiVersion.v1,method:n.ApiRequestMethod.POST,authenticationType:n.ApiAuthType.UserDevice,endpoint:"UpdateTeamDeviceEncryptedConfiguration"},a=(0,o.prepareApiEndpoint)(i);t.updateTeamDeviceEncryptedConfig=(e,t,r)=>a(e,{login:t,payload:r})},56026:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.teamStatus=void 0;const o=r(90338),n=r(45956),i={group:n.ApiEndpointGroups.teams,version:n.ApiVersion.v1,method:n.ApiRequestMethod.POST,authenticationType:n.ApiAuthType.UserDevice,endpoint:"TeamStatus"},a=(0,o.prepareApiEndpoint)(i);t.teamStatus=function(e,t){return a(e,{login:t,payload:{}})}},25094:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getRemoteTime=void 0;const o=r(90338),n=r(45956),i={group:n.ApiEndpointGroups.time,version:n.ApiVersion.v1,method:n.ApiRequestMethod.POST,authenticationType:n.ApiAuthType.None,endpoint:"GetRemoteTime"},a=(0,o.prepareApiEndpoint)(i);t.getRemoteTime=async function(e,t){return a(e,{payload:t??{}})}},74895:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.generateCredential=t.GetVpnCredentialBusinessErrors=void 0;const o=r(90338),n=r(45956);t.GetVpnCredentialBusinessErrors={USER_DOESNT_HAVE_VPN_CAPABILITY:"USER_DOESNT_HAVE_VPN_CAPABILITY",USER_ALREADY_HAS_AN_ACCOUNT:"USER_ALREADY_HAS_AN_ACCOUNT",USER_ALREADY_HAS_AN_ACCOUNT_FOR_PROVIDER:"USER_ALREADY_HAS_AN_ACCOUNT_FOR_PROVIDER",USER_ALREADY_HAVE_ACTIVE_VPN_SUBSCRIPTION:"USER_ALREADY_HAVE_ACTIVE_VPN_SUBSCRIPTION"};const i={group:n.ApiEndpointGroups.vpn,version:n.ApiVersion.v1,method:n.ApiRequestMethod.POST,authenticationType:n.ApiAuthType.UserDevice,endpoint:"GetCredentials"},a=(0,o.prepareApiEndpoint)(i);t.generateCredential=async(e,t,r)=>await a(e,{login:t,payload:r})},78577:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.signRequest=t.allowedUnsignedHeaders=t.allowedUnsignedProxyHeaders=t.allowedUnsignedClientHeaders=t.signatureAlgorithm=void 0;const o=r(16516),n=r(46445),i=r(16038),a=r(69530),s=r(53),c=r(45956),d=r(15215),u=r(17825);t.signatureAlgorithm="DL1-HMAC-SHA256",t.allowedUnsignedClientHeaders=["origin","content-length","content-encoding","authorization","user-agent","accept-encoding"],t.allowedUnsignedProxyHeaders=["x-forwarded-for","x-forwarded-proto","x-forwarded-port","x-amzn-trace-id"],t.allowedUnsignedHeaders=[...t.allowedUnsignedClientHeaders,...t.allowedUnsignedProxyHeaders];function l(e){const{appKeys:t}=e,r=["AppAccessKey="+t.accessKey];switch(e.type){case c.ApiAuthType.App:return r;case c.ApiAuthType.UserDevice:{const{login:t,deviceKeys:o}=e;return[`Login=${t}`,...r,`DeviceAccessKey=${o.accessKey}`]}case c.ApiAuthType.Session:{const{deviceId:t,login:o,sessionKeys:n}=e;return[`Login=${o}`,...r,`SessionAccessKey=${n.accessKey}`,`DeviceAccessKey=${t}`]}case c.ApiAuthType.TeamDevice:{const{teamUuid:t,deviceKeys:o}=e;return[`TeamUuid=${t}`,...r,`DeviceAccessKey=${o.accessKey}`]}default:(0,u.assertUnreachable)(e)}}t.signRequest=async e=>{const{request:r,credentials:p,headersToSign:S,timestamp:g=(0,s.getUnixTimestamp)()}=e,{method:m,pathname:A,headers:y,query:E={},rawBody:f}=r,T=e=>Promise.resolve(e),v=(0,o.compose)(i.str2ab,i.utf8ChunkEncode),h=(0,o.composeP)((0,o.compose)(T,i.convertBufferToHex),n.computeHashSha256,(0,o.compose)(T,v)),_=await h(f),{canonicalRequest:I,signedHeaders:C}=(0,d.makeCanonicalRequest)({method:m,uri:A,headers:y,query:E,hashedPayload:_,headersToSign:S}),D=await h(I),O=[t.signatureAlgorithm,g,D].join("\n"),P=function(e){const{appKeys:t}=e;switch(e.type){case c.ApiAuthType.App:return t.secretKey;case c.ApiAuthType.UserDevice:{const{deviceKeys:r}=e;return`${t.secretKey}\n${r.secretKey}`}case c.ApiAuthType.Session:{const{sessionKeys:r}=e;return`${t.secretKey}\n${r.secretKey}`}case c.ApiAuthType.TeamDevice:{const{deviceKeys:r}=e;return`${t.secretKey}\n${r.secretKey}`}default:(0,u.assertUnreachable)(e)}}(p),R=v(O),N=await(0,a.signHashHmacSHA256)({key:(0,i.str2ab)(P),data:R}),L=(0,i.convertBufferToHex)(N);return t.signatureAlgorithm+" "+[...l(p),`Timestamp=${g}`,`SignedHeaders=${C}`,`Signature=${L}`].join(",")}},45956:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.isApiErrorOfType=t.isApiError=t.UnknownError=t.ApiEndpointGroups=t.ApiVersion=t.ApiRequestMethod=t.ApiAuthType=void 0,t.ApiAuthType={App:"App",UserDevice:"UserDevice",None:"None",Session:"Session",TeamDevice:"TeamDevice"},t.ApiRequestMethod={GET:"GET",POST:"POST"},function(e){e[e.v1=0]="v1"}(t.ApiVersion||(t.ApiVersion={})),function(e){e.abtesting="abtesting",e.account="account",e.accountRecovery="accountrecovery",e.authentication="authentication",e.breachesQA="breaches-qa",e.dataleak="dataleak",e.dataleakQA="dataleak-qa",e.darkwebinsights="darkwebinsights",e.devices="devices",e.familyplan="familyplan",e.features="features",e.file="file",e.killswitch="killswitch",e.pairing="pairing",e.premium="premium",e.pwleak="pwleak",e.sync="sync",e.teams="teams",e.time="time",e.payments="payments",e.vpn="vpn"}(t.ApiEndpointGroups||(t.ApiEndpointGroups={})),t.UnknownError="UNKNOWN_ERROR",t.isApiError=function(e){return"object"==typeof e&&"success"!==e.code},t.isApiErrorOfType=function(e,t){return"object"==typeof t&&t.type===e}},90190:(e,t)=>{var r;Object.defineProperty(t,"__esModule",{value:!0}),t.UnknownError=t.UnknownErrorMessages=t.UnknownErrorCode=void 0,function(e){e[e.UNKNOWN_ERROR=0]="UNKNOWN_ERROR"}(r=t.UnknownErrorCode||(t.UnknownErrorCode={})),t.UnknownErrorMessages={[r.UNKNOWN_ERROR]:"Unknown error"},t.UnknownError={codes:r,name:"UnknownError",messages:t.UnknownErrorMessages}},92263:function(e,t,r){var o=this&&this.__createBinding||(Object.create?function(e,t,r,o){void 0===o&&(o=r);var n=Object.getOwnPropertyDescriptor(t,r);n&&!("get"in n?!t.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,o,n)}:function(e,t,r,o){void 0===o&&(o=r),e[o]=t[r]}),n=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||o(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),t.isCarbonError=t.CarbonError=void 0;const i=r(90190);class a extends Error{constructor(e,t){super(e.messages[t]),this.errorType=e,this.errorCode=t,this.additionalInfo={},Object.setPrototypeOf(this,a.prototype),this.name="CarbonError",Error.captureStackTrace&&Error.captureStackTrace(this,a)}errorTypeName(){return this.errorType.name}stringErrorCode(){const{errorType:{codes:e,name:t},errorCode:r}=this;return`${t}#${e[r]}`}addAdditionalInfo(e){return this.additionalInfo={...this.additionalInfo,...e},this}getAdditionalInfo(){return this.additionalInfo}addContextInfo(e,t){const{errorCode:r,errorType:o}=this;return this.message=`[${e}] - ${t}: ${o.messages[r]}`,this}toString(){return`CarbonError: ${this.message} (code ${this.stringErrorCode()})`}static fromAnyError(e,t,r){if(s(e))return e;const o=new a(t||i.UnknownError,void 0===r?i.UnknownErrorCode.UNKNOWN_ERROR:r);return s(o,i.UnknownError,i.UnknownErrorCode.UNKNOWN_ERROR)&&(o.message=e.message||`${e}`),e.stack&&(o.stack=e.stack),o}}function s(e,t,r){return e instanceof Error&&"CarbonError"===e.name&&(void 0===t||t===e.errorType)&&(void 0===r||r===e.errorCode)}t.CarbonError=a,t.isCarbonError=s,n(r(35706),t)},35706:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},45800:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getCloudflareHeaders=t.setCloudflareHeaders=void 0;let r={};t.setCloudflareHeaders=(e,t)=>{if(Object.isFrozen(r))throw new Error("Trying to set Cloudflare headers after initialization");e&&t&&(r={"CF-Access-Client-Id":e,"CF-Access-Client-Secret":t},Object.freeze(r))};t.getCloudflareHeaders=()=>Object.isFrozen(r)?r:{}},39266:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.isHttpError=t.HttpError=t.HttpErrorMessages=t.HttpErrorCode=void 0;const o=r(92263);var n;!function(e){e[e.CLIENT_ERROR=0]="CLIENT_ERROR",e[e.SERVER_ERROR=1]="SERVER_ERROR",e[e.STATUS_CODE=2]="STATUS_CODE",e[e.CONNECTION_ABORTED=3]="CONNECTION_ABORTED",e[e.CONNECTION_TIMED_OUT=4]="CONNECTION_TIMED_OUT",e[e.NETWORK_ERROR=5]="NETWORK_ERROR",e[e.NO_RESPONSE=6]="NO_RESPONSE",e[e.SETUP_FAILED=7]="SETUP_FAILED"}(n=t.HttpErrorCode||(t.HttpErrorCode={})),t.HttpErrorMessages={[n.CLIENT_ERROR]:"Http response with client error status",[n.SERVER_ERROR]:"Http response with server error status",[n.STATUS_CODE]:"Http response with non-succesful status",[n.CONNECTION_ABORTED]:"Connection aborted",[n.CONNECTION_TIMED_OUT]:"Connection timed out",[n.NETWORK_ERROR]:"Network error",[n.NO_RESPONSE]:"No response to Http request",[n.SETUP_FAILED]:"Failed to setup Http request"},t.HttpError={codes:n,name:"HttpError",messages:t.HttpErrorMessages};t.isHttpError=(e,r)=>(0,o.isCarbonError)(e,t.HttpError,r)},62628:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.get=void 0;const o=r(55539);t.get=function(e,t={}){return(0,o.httpGetUsingFetch)(e,t)}},55539:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.httpGetUsingFetch=void 0;const o=r(87248);t.httpGetUsingFetch=async function(e,t={}){const r=(0,o.setTimeoutAbort)();try{const n={credentials:"omit",signal:r},i=t.headers?{...n,headers:t.headers}:n,a=await fetch(e,i);if((t.validateStatus&&!t.validateStatus(a.status))??!a.ok){const t=new o.FetchError(`HTTP ${a.status} - ${e}`);throw t.response=a,t}const s=await(0,o.getResponseBody)(a,t.responseType);return{headers:a.headers,data:s,status:a.status,statusText:a.statusText}}catch(e){throw(0,o.getCarbonHttpError)(e,r)}}},87248:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getCarbonHttpError=t.FetchError=t.setTimeoutAbort=t.getResponseBody=t.HttpStatusCode=void 0;const o=r(17825),n=r(92263),i=r(39266);!function(e){e[e.GATEWAY_TIMEOUT=504]="GATEWAY_TIMEOUT"}(t.HttpStatusCode||(t.HttpStatusCode={})),t.getResponseBody=async function(e,t="json"){switch(t){case"json":return e.json();case"text":return e.text();case"arraybuffer":return e.arrayBuffer();default:(0,o.assertUnreachable)(t)}},t.setTimeoutAbort=function(e=6e4){const t=new AbortController;return setTimeout((()=>t.abort()),e),t.signal};class a extends Error{constructor(e){super(e),this.response=void 0}}t.FetchError=a;t.getCarbonHttpError=(e,t)=>{let r=null;if(function(e){return e instanceof a}(e)&&e.response){const{response:t}=e,{status:o}=t;r=o>=400&&o<500?new n.CarbonError(i.HttpError,i.HttpErrorCode.CLIENT_ERROR):o>=500?new n.CarbonError(i.HttpError,i.HttpErrorCode.SERVER_ERROR):new n.CarbonError(i.HttpError,i.HttpErrorCode.STATUS_CODE),r.addAdditionalInfo({response:t})}else r="AbortError"===e.name&&t.aborted?new n.CarbonError(i.HttpError,i.HttpErrorCode.CONNECTION_TIMED_OUT):"AbortError"===e.name?new n.CarbonError(i.HttpError,i.HttpErrorCode.CONNECTION_ABORTED):self?.navigator?.onLine?new n.CarbonError(i.HttpError,i.HttpErrorCode.SETUP_FAILED):new n.CarbonError(i.HttpError,i.HttpErrorCode.NETWORK_ERROR);return r.addAdditionalInfo({libError:e.message}),r}},14656:function(e,t,r){var o=this&&this.__createBinding||(Object.create?function(e,t,r,o){void 0===o&&(o=r);var n=Object.getOwnPropertyDescriptor(t,r);n&&!("get"in n?!t.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,o,n)}:function(e,t,r,o){void 0===o&&(o=r),e[o]=t[r]}),n=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||o(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),t.post=t.get=void 0;var i=r(62628);Object.defineProperty(t,"get",{enumerable:!0,get:function(){return i.get}});var a=r(68109);Object.defineProperty(t,"post",{enumerable:!0,get:function(){return a.post}}),n(r(39266),t)},68109:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.post=void 0;const o=r(80057);t.post=function(e,t,r={}){return(0,o.httpPostUsingFetch)(e,t,r)}},80057:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.httpPostUsingFetch=void 0;const o=r(87248);t.httpPostUsingFetch=async function(e,t,r={}){const n=(0,o.setTimeoutAbort)();try{const i=r.headers||{},a=function(e,t="application/json"){const r=t.trim().toLowerCase();if(r.startsWith("application/json"))return JSON.stringify(e);if(r.startsWith("application/x-www-form-urlencoded"))return new URLSearchParams(function(e){if("string"==typeof e)return e;return Object.keys(e).reduce(((t,r)=>{const o=e[r];return void 0===o||(t[r]="string"==typeof o?o:JSON.stringify(o)),t}),{})}(e));if(r.startsWith("multipart/form-data")){const t=new FormData;for(const[r,o]of Object.entries(e))t.append(r,o);return t}if((r.startsWith("text/plain")||r.startsWith("application/x-jsonlines"))&&"string"==typeof e)return e;throw new Error("Unsupported Content-Type for HTTP POST")}(t,i["Content-Type"]),s={method:"POST",headers:i,body:a,credentials:"omit",signal:n},c=await fetch(e,s);if((r.validateStatus&&!r.validateStatus(c.status))??!c.ok){const t=new o.FetchError(`HTTP ${c.status} - ${e}`);throw t.response=c,t}const d=await(0,o.getResponseBody)(c,r.responseType);return{headers:c.headers,data:d,status:c.status,statusText:c.statusText}}catch(e){throw(0,o.getCarbonHttpError)(e,n)}}},89021:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getBatch=void 0;const o=r(78912),n=r(59890);t.getBatch=function(e,t,r){const i="zero"===t.startCursor.type?0:(0,n.binaryFindIndex)(r,(r=>(0,o.isAfterTokenStart)(e,t,!1,r)));if(-1===i)return[];const a=r.slice(i),s="infinite"===t.endCursor.type?a.length:(0,n.binaryFindIndex)(a,(r=>(0,o.isAfterTokenEnd)(e,t,!1,r)),t.initialBatchSize),c=-1===s?a.length:s;return a.slice(0,c)}},20553:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getBatch=t.generatePrevToken=t.generateNextToken=t.generateFirstToken=void 0;var o=r(93669);Object.defineProperty(t,"generateFirstToken",{enumerable:!0,get:function(){return o.generateFirstToken}}),Object.defineProperty(t,"generateNextToken",{enumerable:!0,get:function(){return o.generateNextToken}}),Object.defineProperty(t,"generatePrevToken",{enumerable:!0,get:function(){return o.generatePrevToken}});var n=r(89021);Object.defineProperty(t,"getBatch",{enumerable:!0,get:function(){return n.getBatch}})},78912:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.isBeforeTokenStart=t.isAfterTokenEnd=t.isBeforeTokenEnd=t.isAfterTokenStart=void 0;const o=r(16516),n=r(35893);function i(e,t){return e>t}function a(e,t){return e<t}function s(e,t){return(0,o.compose)(n.normalizeStringMapper,e[t])}const c=(0,o.curry)((function(e,t,{0:r,1:o}){const{direction:c,field:d}=r,u=s(e,d);return(e=>"ascend"===e?i:a)(c)(u(t),(0,n.normalizeStringMapper)(o))})),d=(0,o.curry)((function(e,t,{0:r,1:o}){const{direction:n,field:c}=r,d=s(e,c);return(e=>"ascend"===e?a:i)(n)(d(t),o)})),u=(0,o.curry)((function(e,t,{0:r,1:o}){const{field:n}=r;return s(e,n)(t)===o}));function l(e){return void 0!==e&&[!0,!1].includes(e)}function p(e){return{direction:"ascend",field:e}}const S=(e,t)=>(r,n,i,a)=>{const{sortCriteria:s,uniqField:S}=n.sortToken,g="start"===t?n.startCursor:n.endCursor;if("zero"===g.type)return"after"===e;if("infinite"===g.type)return"before"===e;const m=u(r,a),A=((e,t)=>r=>r.reduce(((r,o)=>l(r)?r:function(e,t,r){return!!e(r)||!!t(r)&&void 0}(e,t,o)),void 0))("before"===e?d(r,a):c(r,a),m),y=A((0,o.zip)(s,g.sortValues));if(l(y))return y;const E=A([{0:p(S),1:g.uniqValue}]);return l(E)?E:!i};t.isAfterTokenStart=S("after","start"),t.isBeforeTokenEnd=S("before","end"),t.isAfterTokenEnd=S("after","end"),t.isBeforeTokenStart=S("before","start")},33627:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.sameBatch=void 0;const o=r(16516);t.sameBatch=function(e,t){return e.length===t.length&&e.every(((e,r)=>(0,o.equals)(t[r],e)))}},93669:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.generateFirstToken=t.generatePrevToken=t.generateNextToken=t.zeroCursor=t.infiniteCursor=void 0;const o=r(16516),n=r(35893),i=r(59890),a=r(78912);function s(e,t,r){return r.sortCriteria.map((r=>{const{field:i}=r;return(0,o.compose)(n.normalizeStringMapper,e[i])(t)}))}function c(e,r,o,n,i){const a=n+o-1;if(a>=i.length-1)return t.infiniteCursor;const c=i[a];return{type:"positional",sortValues:s(e,c,r),uniqValue:String(e[r.uniqField](c))}}function d(e,r,o){const{initialBatchSize:n,startCursor:c,sortToken:d}=r;if("zero"===c.type)throw new Error("Cannot generate cursor before zero start cursor.");const u=(0,i.binaryFindLastIndex)(o,(t=>(0,a.isBeforeTokenStart)(e,r,!0,t)));if(-1===u)return t.zeroCursor;const l=function(e,r,o,n,i){const a=n-o+1;if(a<0)return t.zeroCursor;const c=i[a];return{type:"positional",sortValues:s(e,c,r),uniqValue:String(e[r.uniqField](c))}}(e,d,n,u,o);return l}t.infiniteCursor={type:"infinite"},t.zeroCursor={type:"zero"},t.generateNextToken=function(e,r,o){if("infinite"===r.endCursor.type)return;const n=function(e,r,o){const{initialBatchSize:n,endCursor:s,sortToken:d}=r;if("infinite"===s.type)throw new Error("Cannot generate cursor after infinite end cursor.");const u=(0,i.binaryFindIndex)(o,(t=>(0,a.isAfterTokenEnd)(e,r,!1,t)));return-1===u?t.infiniteCursor:c(e,d,n,u,o)}(e,r,o);return{...r,startCursor:r.endCursor,endCursor:n}},t.generatePrevToken=function(e,t,r){if("zero"===t.startCursor.type)return;const o=d(e,t,r);return{...t,startCursor:o,endCursor:t.startCursor}},t.generateFirstToken=function(e,r,o,n){const{sortToken:i,filterToken:a}=r,s=c(e,i,o,0,n);return{sortToken:i,filterToken:a,initialBatchSize:o,startCursor:t.zeroCursor,endCursor:s}}},4673:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getPlugins=t.setPlugins=void 0;let r={};t.setPlugins=function(e){r=e},t.getPlugins=function(){return r}},60946:function(e,t,r){var o=this&&this.__createBinding||(Object.create?function(e,t,r,o){void 0===o&&(o=r);var n=Object.getOwnPropertyDescriptor(t,r);n&&!("get"in n?!t.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,o,n)}:function(e,t,r,o){void 0===o&&(o=r),e[o]=t[r]}),n=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||o(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),n(r(74211),t),n(r(20378),t)},20378:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.setupProbe=void 0;const o=r(16516),n=r(95623),i=(e,t)=>r=>(0,o.forEach)(((e,t)=>r=>{try{e(r,t)}catch(e){(0,n.logWarn)({message:`Monitor raised an error on announcement ${r.type}`,tag:"Probe",details:{error:e}})}})(r,t),e);t.setupProbe=(...e)=>(...t)=>{const r={timestamp:Date.now()};(0,o.forEach)(i(t,r),e)}},74211:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},59865:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.filterData=void 0;const o=r(16516),n=r(2974),i=r(17825);t.filterData=function(e,t,r,a){return r.filterCriteria.reduce(((r,a)=>{const s=function(e,t,r){const{value:a}=r,s=(0,n.normalizeStringMapper)(a),c=t=>(0,o.compose)(n.normalizeStringMapper,e[t]);switch(r.type){case"equals":return e=>c(r.field)(e)===s;case"differs":return e=>c(r.field)(e)!==s;case"matches":return e=>t(s,e);case"in":return e=>{const t=c(r.field)(e);return s.indexOf(t)>-1};case"contains":return e=>{const t=c(r.field)(e);if(!Array.isArray(t))throw new Error("[Query] - filter: expected an array");return t.includes(s)};default:(0,i.assertUnreachable)(r)}}(e,t,a);return r.filter(s)}),a)}},35893:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.normalizeStringMapper=t.queryData=t.sortData=t.filterData=t.stringifyToken=t.parseToken=t.optimizeBatchSelector=t.createOptimizedSortTokenSelector=t.createOptimizedFilterTokenSelector=void 0;var o=r(23736);Object.defineProperty(t,"createOptimizedFilterTokenSelector",{enumerable:!0,get:function(){return o.createOptimizedFilterTokenSelector}}),Object.defineProperty(t,"createOptimizedSortTokenSelector",{enumerable:!0,get:function(){return o.createOptimizedSortTokenSelector}}),Object.defineProperty(t,"optimizeBatchSelector",{enumerable:!0,get:function(){return o.optimizeBatchSelector}});var n=r(54410);Object.defineProperty(t,"parseToken",{enumerable:!0,get:function(){return n.parseToken}}),Object.defineProperty(t,"stringifyToken",{enumerable:!0,get:function(){return n.stringifyToken}});var i=r(59865);Object.defineProperty(t,"filterData",{enumerable:!0,get:function(){return i.filterData}});var a=r(32541);Object.defineProperty(t,"sortData",{enumerable:!0,get:function(){return a.sortData}});var s=r(7994);Object.defineProperty(t,"queryData",{enumerable:!0,get:function(){return s.queryData}});var c=r(2974);Object.defineProperty(t,"normalizeStringMapper",{enumerable:!0,get:function(){return c.normalizeStringMapper}})},2974:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.normalizeStringMapper=void 0;const o=r(16516),n=r(97601),i=(0,o.compose)(n.normalizeString,o.toLower);t.normalizeStringMapper=e=>"string"==typeof e?i(e):Array.isArray(e)?e.map(t.normalizeStringMapper):e},7994:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.queryData=void 0;const o=r(59865),n=r(32541);t.queryData=function(e,t,r,i,a){const s=(0,o.filterData)(e,t,i,a);return(0,n.sortData)(e,r,s)}},23736:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.optimizeBatchSelector=t.createOptimizedFilterTokenSelector=t.createOptimizedSortTokenSelector=void 0;const o=r(16516),n=r(32034);t.createOptimizedSortTokenSelector=(0,n.createSelectorCreator)(n.defaultMemoize,((e,t)=>e.uniqField===t.uniqField&&e.sortCriteria.length===t.sortCriteria.length&&e.sortCriteria.every(((e,r)=>Object.keys(e).every((o=>e[o]===t.sortCriteria[r][o]))))));t.createOptimizedFilterTokenSelector=(0,n.createSelectorCreator)(n.defaultMemoize,((e,t)=>e.filterCriteria.length===t.filterCriteria.length&&e.filterCriteria.every(((e,r)=>Object.keys(e).every((o=>e[o]===t.filterCriteria[r][o]))))));const i=(0,n.createSelectorCreator)(n.defaultMemoize,((e,t)=>e.length===t.length&&e.every(((e,r)=>t[r]===e))));t.optimizeBatchSelector=e=>i(e,o.identity)},32541:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.sortData=void 0;const o=r(2974),n=r(16516);function i(e,t){const{direction:r}=t,i=function(e,t){const{field:r}=t;return(0,n.compose)(o.normalizeStringMapper,e[r])}(e,t);return function(e){return"ascend"===e?n.ascend:n.descend}(r)(i)}t.sortData=function(e,t,r){const o=(0,n.compose)(String,e[t.uniqField]),a=[...t.sortCriteria.map((t=>i(e,t))),(0,n.ascend)(o)];return(0,n.sortWith)(a)(r)}},54410:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.stringifyToken=t.parseToken=void 0;const o=r(16038),n=r(93513);t.parseToken=function(e){const t=n.decode(e),r=(0,o.utf8ChunkDecode)(t);return JSON.parse(r)},t.stringifyToken=function(e){if(void 0===e)return"";const t=JSON.stringify(e),r=(0,o.utf8ChunkEncode)(t);return n.encode(r)}},74752:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.makeAutoLoginService=t.loadMPFromStorageToStore=t.shouldTrigger=t.createMasterPasswordCipheringKey=t.AUTOLOGIN_EXPIRATION_DATE=void 0;const o=r(72609),n=r(69530),i=r(16038),a=r(16356),s=r(53),c=r(70252),d=r(95623),u=r(56915),l=r(46298),p=r(16593),S=r(61740),g=r(98226),m=r(93564);t.AUTOLOGIN_EXPIRATION_DATE=1209600;t.createMasterPasswordCipheringKey=()=>(0,n.generateAESKey)();const A=()=>{try{const e=(()=>{const e=(0,m.getWindowLocalStorage)();return o.env.isBrowserEnvironment()&&e?parseInt(e["QA.EXTENSION-1474.expirationTimeSeconds"],10):void 0})();if(Number.isSafeInteger(e)&&e<t.AUTOLOGIN_EXPIRATION_DATE)return e}catch(e){(0,d.logError)(e)}return t.AUTOLOGIN_EXPIRATION_DATE};t.shouldTrigger=async(e,t,r)=>{try{if(t.setInstance(r),e.isAuthenticated())return!1;if(!await(0,S.hasSessionKeysInStorage)(t))return!1;await(0,S.loadSessionKeysToStore)(e,t);const o=(0,u.sessionKeysSelector)(e.getState());return!!(0,S.areSessionKeysValid)(o)&&t.getInstance().doesMasterPasswordExist()}catch(e){if(e.message!==S.RememberMeErrorCode.EMPTY_SESSION_KEYS){const t=new Error(`[Autologin] - shouldTrigger: ${e}`);(0,c.sendExceptionLog)({error:t}),(0,d.logError)(e)}return!1}};t.loadMPFromStorageToStore=async(e,t,r,o)=>{const n=await(0,l.getMasterPasswordCipheringKey)(e,o);if((0,l.isApiError)(n))throw new Error(n.message);t.setInstance({raw:n.rememberMasterPasswordCipheringKey},"");const i=await r.getInstance().getMasterPassword();e.dispatch((0,a.updateMasterPassword)(i))};t.makeAutoLoginService=e=>({initialize:()=>(async e=>{try{const{storeService:r,localStorageService:o}=e;if(!r.isAuthenticated())throw new Error(S.RememberMeErrorCode.USER_NOT_AUTHENTICATED);const n=r.getState(),c=(0,u.deviceKeysSelector)(n),d=(0,u.ukiSelector)(n),m=(0,u.sessionKeysSelector)(n),y=(0,p.userLoginSelector)(n);if(!c||!d)throw new Error(S.RememberMeErrorCode.EMPTY_DEVICE_KEYS);if((0,S.areSessionKeysValid)(m))return;const E=await(0,t.createMasterPasswordCipheringKey)(),f=(0,i.bufferToBase64)(E),T=await(0,l.initRememberMasterPassword)(r,y,{rememberMasterPasswordCipheringKey:f});if((0,l.isApiError)(T))throw new Error(T.code);const v=(0,s.getUnixTimestamp)()+A(),h={accessKey:T.sessionAccessKey,secretKey:T.sessionSecretKey,expirationTimeSeconds:v};r.dispatch((0,a.loadSessionKeys)(h)),await o.getInstance().storeAuthenticationKeys(h),e.autoLoginEncryptorService.setInstance({raw:null,buffer:E},"");const _=(0,p.masterPasswordSelector)(n);await o.getInstance().storeMasterPassword(_),await(0,S.persistLocalAccountRememberMeType)(r,"autologin"),r.dispatch((0,g.setRememberMeTypeAction)("autologin"))}catch(e){const t=new Error(`[Autologin] - initialize: ${e}`);(0,c.sendExceptionLog)({error:t}),(0,d.logError)(t)}})(e),process:r=>(async(e,r)=>{try{const{storeService:o,autoLoginEncryptorService:n,localStorageService:i}=e;if(!await(0,t.shouldTrigger)(o,i,r))return;return await(0,t.loadMPFromStorageToStore)(o,n,i,r)}catch(e){const t=new Error(`[Autologin] - processAutoLogin: ${e}`);(0,c.sendExceptionLog)({error:t}),(0,d.logError)(t)}})(e,r),shouldTrigger:r=>(0,t.shouldTrigger)(e.storeService,e.localStorageService,r)})},93990:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.makeWebAuthnAuthenticationService=t.shouldTrigger=void 0;const o=r(16038),n=r(95623),i=r(69530),a=r(56915),s=r(46298),c=r(16593),d=r(16356),u=r(70252),l=r(64910),p=r(61740),S=r(98226);t.shouldTrigger=async(e,t,r)=>{try{if(t.setInstance(r),(0,c.isAuthenticatedSelector)(e.getState()))return!1;if(!await(0,p.hasSessionKeysInStorage)(t))return!1;await(0,p.loadSessionKeysToStore)(e,t);const o=(0,a.sessionKeysSelector)(e.getState());return!!(0,p.areSessionKeysValid)(o)&&t.getInstance().doesMasterPasswordExist()}catch(e){if(e.message!==p.RememberMeErrorCode.EMPTY_SESSION_KEYS){const t=new Error(`[WebAuthnAuthentication] - shouldTrigger: ${e}`);(0,u.sendExceptionLog)({error:t}),(0,n.logError)(t)}return!1}};t.makeWebAuthnAuthenticationService=e=>({initialize:t=>(async(e,t)=>{try{const{storeService:r,localStorageService:n,webAuthnAuthenticationEncryptorService:a}=e,u=r.getState(),g=(0,c.userLoginSelector)(u),m=await(0,i.generate64BytesKey)(),A=(0,o.bufferToBase64)(m),y=atob(A),E=await(0,s.completeRememberMeRegistration)(r,g,{masterPasswordEncryptionKey:A,authenticator:t});if((0,s.isApiError)(E))throw new Error(E.code);const f={accessKey:E.sessionAccessKey,secretKey:E.sessionSecretKey,expirationTimeSeconds:E.sessionExpirationDateUnix};r.dispatch((0,d.loadSessionKeys)(f)),await n.getInstance().storeAuthenticationKeys(f);const T="",v=(0,l.getNoDerivationCryptoConfig)();a.setInstance({raw:y},T,v);const h=(0,c.masterPasswordSelector)(u);return await n.getInstance().storeWebAuthnMasterPassword(h),await(0,p.persistLocalAccountRememberMeType)(r,"webauthn"),r.dispatch((0,S.setRememberMeTypeAction)("webauthn")),!0}catch(e){const t=new Error(`[WebAuthnAuthentication] - initialize: ${e}`);return(0,u.sendExceptionLog)({error:t}),(0,n.logError)(t),!1}})(e,t),process:(t,r)=>(async(e,t,r)=>{try{const{storeService:o,webAuthnAuthenticationEncryptorService:n,localStorageService:i}=e,a=await(0,s.completeRememberMeOpenSession)(o,t,{authenticator:r});if((0,s.isApiError)(a))throw new Error(a.message);const c="",u=(0,l.getNoDerivationCryptoConfig)(),p=a.masterPasswordEncryptionKey,S=atob(p);n.setInstance({raw:S},c,u);const g=await i.getInstance().getWebAuthnMasterPassword();o.dispatch((0,d.updateMasterPassword)(g))}catch(e){const t=new Error(`[WebAuthnAuthentication] - processWebAuthnAuthentication: ${e}`);(0,u.sendExceptionLog)({error:t}),(0,n.logError)(t)}})(e,t,r),shouldTrigger:r=>(0,t.shouldTrigger)(e.storeService,e.localStorageService,r),deactivate:t=>(async(e,t)=>{const{storeService:r,localStorageService:o}=e,n=(0,a.deviceKeysSelector)(r.getState());if(!n)return!1;const i=await(0,s.deactivateRememberMe)(r,t,{deviceAccessKey:n.accessKey});return!(0,s.isApiError)(i)&&(await o.getInstance().cleanAuthenticationKey(),await(0,p.persistLocalAccountRememberMeType)(r,"disabled"),r.dispatch((0,S.setRememberMeTypeAction)("disabled")),!0)})(e,t)})},61740:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.areSessionKeysValid=t.loadSessionKeysToStore=t.hasSessionKeysInStorage=t.shouldAskMasterPassword=t.cleanRememberMeStorageData=t.getLocalAccountRememberMeType=t.persistLocalAccountRememberMeType=t.RememberMeErrorCode=void 0;const o=r(2246),n=r(63739),i=r(25576),a=r(1860),s=r(16356),c=r(53),d=r(16593),u=r(46298),l=r(56915),p=r(92263),S=r(70252),g=r(95623);var m;!function(e){e.USER_NOT_AUTHENTICATED="USER_NOT_AUTHENTICATED",e.EMPTY_DEVICE_KEYS="EMPTY_DEVICE_KEYS",e.EMPTY_SESSION_KEYS="EMPTY_SESSION_KEYS"}(m=t.RememberMeErrorCode||(t.RememberMeErrorCode={}));t.persistLocalAccountRememberMeType=async(e,t)=>{const{login:r,persistData:n}=e.getAccountInfo();n===i.PersistData.PERSIST_DATA_YES&&await(0,o.storeUserPublicSetting)(r,"rememberMeType",t)};t.getLocalAccountRememberMeType=e=>(0,o.getUserPublicSetting)(e,"rememberMeType");t.cleanRememberMeStorageData=async(e,r)=>{const o=(0,d.userLoginSelector)(e.getState()),i=[(0,n.removeData)(r,o,"authenticationKeys"),(0,n.removeData)(r,o,"registry"),(0,t.persistLocalAccountRememberMeType)(e,"disabled")];if("disabled"!==(0,l.rememberMeTypeSelector)(e.getState())){const t=new Promise((t=>{(async(e,t)=>{const r=(0,l.deviceKeysSelector)(e.getState());r&&await(0,u.deactivateRememberMe)(e,t,{deviceAccessKey:r.accessKey})})(e,o).then(t).catch((e=>{const r=p.CarbonError.fromAnyError(e).addContextInfo("RememberMe","cleanRememberMeStorageData");(0,g.logError)({message:"Error when deactivating remember me server side"}),(0,S.sendExceptionLog)({error:r}),t()}))}));i.push(t)}await Promise.all(i)};t.shouldAskMasterPassword=e=>{const r=(0,t.getLocalAccountRememberMeType)(e);if(!["autologin","webauthn"].includes(r))return!1;const n=(0,o.getUserPublicSetting)(e,"lastMasterPasswordOpenSessionTimestamp")||void 0;if(!n)return;return Date.now()-n>12096e5};t.hasSessionKeysInStorage=async e=>await e.getInstance().doesAuthenticationKeysExist();t.loadSessionKeysToStore=async(e,r)=>{try{if(!(0,t.hasSessionKeysInStorage)(r))throw new Error(m.EMPTY_SESSION_KEYS);const o=await r.getInstance().getAuthenticationKeys();e.dispatch((0,s.loadSessionKeys)(o))}catch(e){throw e.message.indexOf(a.DATA_TAMPERED_ERROR)>-1&&r.getInstance().cleanAuthenticationKey(),e}};t.areSessionKeysValid=e=>e?.expirationTimeSeconds>(0,c.getUnixTimestamp)()},31937:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.restoreLastAuthenticatedUser=void 0;const o=r(95623),n=r(88610),i=r(70252),a=r(9344),s=r(52968),c=r(35924),d=r(78759);t.restoreLastAuthenticatedUser=async function(e,t){try{const{applicationModulesAccess:r,storeService:o}=e,i=t.find((e=>e.isLastSuccessfulLogin));if(!i||i.hasLoginOtp)return;const u=o.getState();if(u.userSession.ssoSettings.ssoUser)return;const l=i.login,p=u.authentication.localUsers;if(void 0!==p[l]&&p[l].ssoActivatedUser){return void((0,d.disableAutoSSOLoginSelector)(u)||(e.storeService.dispatch((0,c.updateLoginStepInfoLogin)(l)),"sso"===i.rememberMeType&&r.createClients().authenticationFlow.commands.initiateAutologinWithSSO({login:l??""})))}if("webauthn"===i.rememberMeType)return void function({storeService:e}){try{document.featurePolicy.features().includes("publickey-credentials-get")&&e.dispatch((0,a.reactivationStatusUpdated)(s.ReactivationStatus.WEBAUTHN))}catch(t){e.dispatch((0,a.reactivationStatusUpdated)(s.ReactivationStatus.CLASSIC))}}(e);const S=await e.autoLoginService.shouldTrigger(l),g=(0,n.makeLoginController)(e);if(!S)return void g.openSession(l);await e.autoLoginService.process(l);const m=e.storeService.getUserSession().masterPassword;if(!m)return;await g.openSessionWithMasterPassword(l,m,{triggeredByRememberMeType:"autologin",loginType:"Autologin"})}catch(e){const t=`[index] - restoreLastAuthenticatedUser: ${e}`,r=new Error(t);(0,o.logError)({message:t,details:{error:r}}),(0,i.sendExceptionLog)({error:r})}}},98416:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.makeLocalStorageService=void 0;const o=r(63739);t.makeLocalStorageService=e=>{let t=null;return{setInstance:r=>{t=(0,o.makeUserLocalDataService)(e,r)},getInstance:()=>{if(!t)throw new Error("makeLocalStorageService: You must call setInstance(login: string) before getting the instance");return t}}}},63739:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.makeUserLocalDataService=t.deleteAllLocalUserData=t.isDataStored=t.removeData=t.getStorageDebugKey=t.getStorageKey=t.STORAGE_VERSION=t.StoredUserDataTypeEnum=void 0;const o=r(32626),n=r(95623),i=r(41265),a=r(16038),s=r(16593),c=r(19695),d=r(56668),u=r(93513);t.StoredUserDataTypeEnum=["abTests","authentication","authenticationKeys","eventStore","health","healthWasComputed","icons","localDataBackupLastLoginSuccessful","localDataBackupTmp","localKey","localSettings","notificationsStatus","personalData","personalSettings","recoveryData","recoveryLocalKey","recoverySessionCredential","registry","remoteFileContent","remoteFileMeta","sharingData","sharingSync","teamAdminData","userActivity","vaultReport","analyticsIds"],t.STORAGE_VERSION="v1";t.getStorageKey=(e,r,o=t.STORAGE_VERSION)=>`${e}.${r}.${o}`;t.getStorageDebugKey=(e,r,o=t.STORAGE_VERSION)=>(0,t.getStorageKey)(e,r,o)+".clear";const l=(e,t)=>`${e}.${t}`,p=async(e,t,r)=>{const o=await e.getLocalStorage().readItem(r);if("string"!=typeof o||0===o.length)throw new Error(`value ${t} undefined`);return o},S=async(e,r,i,s)=>{const c=r.getLocalStorage(),S=(0,t.getStorageKey)(i,s);if(await c.itemExists(S))return(async(e,t,r,o)=>{const n=await p(t,r,o),i=await e.getInstance().decrypt(n),a=(0,d.inflateUtf16)(i);return JSON.parse(a)})(e,r,s,S);const g=l(i,s);if(await c.itemExists(g))return(async(e,t,r,i)=>{const s=await p(t,r,i),c=await e.getInstance().decrypt(s),l=(0,d.deflatedUtf8ToUtf16)(c,{skipUtf8Decoding:!0});if(0===l.length)throw new Error(o.AuthenticationCode[o.AuthenticationCode.WRONG_PASSWORD]);const S=u.decode(l);try{const e=(0,a.utf8ChunkDecode)(S);return JSON.parse(e)}catch(e){return n.default.log(e),S}})(e,r,s,g);const m=new Error("value "+s+" undefined");throw n.default.error(m),m},g=async(e,r,o,a,s)=>{try{const n=e.getLocalStorage(),c=(0,t.getStorageKey)(r,a);if(await n.writeItem(c,o),(0,i.isInternalTestUser)(r)&&s){const o=(0,t.getStorageDebugKey)(r,a);await e.getLocalStorage().writeItem(o,s)}}catch(e){const t=new Error(`[storeData] failed for dataType: ${a} with error: ${e}`);throw n.default.error(t),t}},m=async(e,t,r,o,n)=>{const i=JSON.stringify(o),a=(0,d.deflateUtf16)(i),s=await e.getInstance().encrypt(a);await g(t,r,s,n,o)};t.removeData=async(e,r,o)=>{const n=(0,t.getStorageKey)(r,o),a=l(r,o),s=(0,t.getStorageDebugKey)(r,o),c=((e,t)=>l(e,t)+".clear")(r,o),d=e.getLocalStorage(),u=[d.removeItem(n),d.removeItem(a),...(0,i.isInternalTestUser)(r)?[d.removeItem(s),d.removeItem(c)]:[]];await Promise.all(u)};t.isDataStored=async(e,r,o)=>{const n=e.getLocalStorage(),i=(0,t.getStorageKey)(r,o);if(await n.itemExists(i))return!0;const a=l(r,o);return await n.itemExists(a)},t.deleteAllLocalUserData=async function(e,r,n){const i=n.trim();await Promise.all([...t.StoredUserDataTypeEnum,...o.FileNamesList].map((async r=>{await(0,t.removeData)(e,i,r)}))),await async function(e,t){await e.commands.mitigationDeleteGrapheneUserData({login:t})}(r.createClients()["carbon-legacy"],n)};t.makeUserLocalDataService=(e,r)=>{const i=()=>{const{storeService:t,masterPasswordEncryptorService:r,localDataEncryptorService:o}=e;return(0,s.isLocalKeyActivatedSelector)(t.getState())?o:r};return{storePersonalData:t=>m(i(),e.storageService,r,t,"personalData"),getPersonalData:()=>(n.default.log("Load Personal Data"),S(i(),e.storageService,r,"personalData")),doesPersonalDataExist:()=>(n.default.log("Check Personal Data existence"),(0,t.isDataStored)(e.storageService,r,"personalData")),storeLocalSettings:t=>m(i(),e.storageService,r,t,"localSettings"),getLocalSettings:()=>(n.default.log("Load Local Settings"),S(i(),e.storageService,r,"localSettings")),storePersonalSettings:t=>m(i(),e.storageService,r,t,"personalSettings"),getPersonalSettings:()=>(n.default.log("Load Personal Settings"),S(i(),e.storageService,r,"personalSettings")),storeNotificationsStatus:t=>m(i(),e.storageService,r,t,"notificationsStatus"),doesNotificationStatusExist:()=>(n.default.log("Check Notification Status existence"),(0,t.isDataStored)(e.storageService,r,"notificationsStatus")),getNotificationStatus:()=>(n.default.log("Load Notifications Status"),S(i(),e.storageService,r,"notificationsStatus")),storeSharingData:t=>m(i(),e.storageService,r,t,"sharingData"),getSharingData:()=>(n.default.log("Load Sharing Data"),S(i(),e.storageService,r,"sharingData")),storeSharingSync:t=>m(i(),e.storageService,r,t,"sharingSync"),getSharingSync:()=>(n.default.log("Load Sharing Sync"),S(i(),e.storageService,r,"sharingSync")),doesSharingSyncExist:()=>(0,t.isDataStored)(e.storageService,r,"sharingSync"),storeTeamAdminData:t=>m(i(),e.storageService,r,t,"teamAdminData"),getTeamAdminData:()=>(n.default.log("Load Team Admin Data"),S(i(),e.storageService,r,"teamAdminData")),storeAuthenticationKeys:t=>m(e.authorizationKeysEncryptorService,e.storageService,r,t,"authenticationKeys"),getAuthenticationKeys:()=>(n.default.log("Load Authentication Keys"),S(e.authorizationKeysEncryptorService,e.storageService,r,"authenticationKeys").then((e=>e))),doesAuthenticationKeysExist:()=>(n.default.log("Check Authentication Keys existence"),(0,t.isDataStored)(e.storageService,r,"authenticationKeys")),cleanAuthenticationKey:()=>(0,t.removeData)(e.storageService,r,"authenticationKeys"),storeAuthenticationData:t=>m(i(),e.storageService,r,t,"authentication"),getAuthenticationData:()=>S(i(),e.storageService,r,"authentication"),hasAuthenticationData:()=>(0,t.isDataStored)(e.storageService,r,"authentication"),doesMasterPasswordExist:()=>(n.default.log("Check Master Password Keys existence"),(0,t.isDataStored)(e.storageService,r,"registry")),getMasterPassword:()=>(n.default.log("Load Master Password via Auto login"),S(e.autoLoginEncryptorService,e.storageService,r,"registry")),storeMasterPassword:t=>(n.default.log("Store Master Password via Auto login"),m(e.autoLoginEncryptorService,e.storageService,r,t,"registry")),getWebAuthnMasterPassword:()=>(n.default.log("Load Master Password via WebAuthn login"),S(e.webAuthnAuthenticationEncryptorService,e.storageService,r,"registry")),storeWebAuthnMasterPassword:t=>(n.default.log("Store Master Password via WebAuthn login"),m(e.webAuthnAuthenticationEncryptorService,e.storageService,r,t,"registry")),getLocalKey:()=>S(e.masterPasswordEncryptorService,e.storageService,r,"localKey"),doesLocalKeyExist:()=>(0,t.isDataStored)(e.storageService,r,"localKey"),storeLocalKey:t=>m(e.masterPasswordEncryptorService,e.storageService,r,t,"localKey"),doesLocalDataExist:()=>Promise.all(["localSettings","personalData","personalSettings"].map((o=>(0,t.isDataStored)(e.storageService,r,o)))).then((e=>e.every((e=>e)))),storeUserABTests:t=>m(i(),e.storageService,r,t,"abTests"),getUserABTests:()=>(n.default.log("Load User AB Tests"),S(i(),e.storageService,r,"abTests")),storeIcons:async t=>{const o=(0,c.iconsToStorage)(t);return m(i(),e.storageService,r,o,"icons")},getIcons:async()=>{if(!await(0,t.isDataStored)(e.storageService,r,"icons"))return null;const o=await S(i(),e.storageService,r,"icons");return(0,c.iconsFromStorage)(o)},doesUserActivityExist:()=>(0,t.isDataStored)(e.storageService,r,"userActivity"),storeUserActivity:()=>m(i(),e.storageService,r,{},"userActivity"),getUserActivity:()=>S(i(),e.storageService,r,"userActivity"),doesVaultReportExist:()=>(0,t.isDataStored)(e.storageService,r,"vaultReport"),storeVaultReport:t=>m(i(),e.storageService,r,t,"vaultReport"),getVaultReport:()=>S(i(),e.storageService,r,"vaultReport"),storeEventStore:t=>m(i(),e.storageService,r,t,"eventStore"),getEventStore:async()=>await(0,t.isDataStored)(e.storageService,r,"eventStore")?S(i(),e.storageService,r,"eventStore"):null,storeRecoveryLocalKey:async t=>{const o=e.storageService;return g(o,r,t,"recoveryLocalKey")},getRecoveryLocalKey:async()=>{const o=(0,t.getStorageKey)(r,"recoveryLocalKey");return await p(e.storageService,"recoveryLocalKey",o)},storeRecoverySessionCredential:t=>m(i(),e.storageService,r,t,"recoverySessionCredential"),getRecoverySessionCredential:async()=>S(i(),e.storageService,r,"recoverySessionCredential"),doesRecoverySessionCredentialExist:async()=>(0,t.isDataStored)(e.storageService,r,"recoverySessionCredential"),cleanRecoverySetupData:async()=>{const o=e.storageService;return await(0,t.removeData)(o,r,"recoverySessionCredential"),await(0,t.removeData)(o,r,"recoveryLocalKey")},doesRecoveryLocalKeyExist:async()=>(0,t.isDataStored)(e.storageService,r,"recoveryLocalKey"),cleanRecoveryData:async()=>{const o=e.storageService;return await(0,t.removeData)(o,r,"recoveryData")},storeRecoveryData:async t=>{const o=e.storageService;return await g(o,r,t,"recoveryData")},getRecoveryData:async()=>{const o=(0,t.getStorageKey)(r,"recoveryData");return await p(e.storageService,"recoveryData",o)},doesRecoveryDataExist:()=>(0,t.isDataStored)(e.storageService,r,"recoveryData"),storeAnalyticsIds:t=>m(i(),e.storageService,r,t,"analyticsIds"),getAnalyticsIds:()=>((0,n.log)({message:"Load Analytics IDs"}),S(i(),e.storageService,r,"analyticsIds")),doesAnalyticsIdsExist:()=>((0,n.log)({message:"Check Analytics IDs existence"}),(0,t.isDataStored)(e.storageService,r,"analyticsIds")),storeRemoteFileContent:(t,o)=>m(i(),e.storageService,r,o,t),storeRemoteFileMeta:t=>m(i(),e.storageService,r,t,"remoteFileMeta"),getRemoteFileMeta:()=>S(i(),e.storageService,r,"remoteFileMeta"),getRemoteFileContent:t=>S(i(),e.storageService,r,t),cleanAllRemoteFiles:async()=>{const n=e.storageService;await(0,t.removeData)(n,r,"remoteFileMeta");for(const e of o.FileNamesList)await(0,t.removeData)(n,r,e)},cleanSingleFileStorage:async o=>{const n=e.storageService;await(0,t.removeData)(n,r,o);const a=await S(i(),e.storageService,r,"remoteFileMeta");return delete a[o],m(i(),e.storageService,r,a,"remoteFileMeta")},isRemoteFileMetaDataExist:()=>(0,t.isDataStored)(e.storageService,r,"remoteFileMeta"),isRemoteFileContentExist:o=>(0,t.isDataStored)(e.storageService,r,o)}}},18539:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.makeStorageService=t.CarbonLocalStorage=void 0;const o=r(95623);t.CarbonLocalStorage=class{constructor(e){this._storage=e}itemExists(e){return this._storage.itemExists(e)}readItem(e){return this._storage.readItem(e)}async writeItem(e,t){const r=await this.backupItem(e);try{await this._storage.writeItem(e,t),r&&await r.clean()}catch(e){o.Debugger.error("CarbonLocalStorage:writeItem error:",e),r?(o.Debugger.error("CarbonLocalStorage couldn't save data, reverting to backup version"),await r.restoreAndClean()):o.Debugger.error("CarbonLocalStorage couldn't save data and no backup version to restore")}}removeItem(e){return this._storage.removeItem(e)}async getSuitableBackupKey(e){const t=t=>e+"."+t;let r=1;for(;await this._storage.itemExists(t(r));)r++;return t(r)}async backupItem(e){if(!await this._storage.itemExists(e))return null;const t=await this.getSuitableBackupKey(e),r=await this._storage.readItem(e);await this._storage.writeItem(t,r);const o=this._storage;async function n(){return await o.removeItem(t)}return{clean:n,restoreAndClean:async function(){const r=await o.readItem(t);return await o.writeItem(e,r),await n()}}}};t.makeStorageService=()=>{let e=null;return{setInstance:t=>{e=t},getLocalStorage:()=>{if(!e)throw new Error("makeStorageService: You must call setInstance(instance: AsyncStorage) before getting the instance");return e}}}},97601:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.normalizeString=void 0;t.normalizeString=e=>e.normalize("NFD").replace(/[\u0300-\u036f]/g,"").toLowerCase()},45570:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getStyxApiCredentials=void 0;const o=r(45956),n=r(39261);t.getStyxApiCredentials=function(e,t){if(t.authenticationType!==o.ApiAuthType.App)return{type:o.ApiAuthType.None};const r={appKeys:(0,n.styxKeysSelector)(e)};return{type:o.ApiAuthType.App,...r}}},76330:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getApiClientAgentHeader=t.getMakeStyxApiRequest=t.getEventsPayload=void 0;const o=r(56915),n=r(55730),i=r(45956),a=r(53),s=r(48749),c=r(14656),d=r(17825),u=r(45570),l=r(41265),p=r(78577),S=r(32626);function g(e){return JSON.stringify({platform:e.platformName,version:e.appVersion})}t.getEventsPayload=function(e){return e.map((e=>JSON.stringify(e))).join("\n")},t.getMakeStyxApiRequest=function(e,t,r){return async(m,A)=>{const y={login:"",teamUuid:"",payload:"",...A||{}},E=(0,n.getMethodParams)(r,y.payload),f=(0,n.getAuthParams)(t,{login:y.login,teamUuid:y.teamUuid}),T="POST"===E.method?E.payload:"",v=(0,o.dashlaneServerDeltaTimestampSelector)(m.getState())||0,h=Math.round((0,a.getUnixTimestamp)()-v),_=(0,u.getStyxApiCredentials)(m.getState(),f),I=(0,o.platformInfoSelector)(m.getState()),C={"Content-Type":"application/x-jsonlines","X-TIMESTAMP":h.toString()},D={"dashlane-client-agent":g(I)},O=function(e){const t=e.getAccountInfo().login,r=t&&(0,l.isInternalTestUser)(t),o=e.getPlatformInfo(),{buildType:n}=o,i=n===S.ApplicationBuildType.DEV||n===S.ApplicationBuildType.QA;return r||i}(m);O&&(C["X-DL-TEST"]="true");const P=Object.keys(D),R=await async function(e,t,r,n,s,c){if(r.type===i.ApiAuthType.None)return{};const d=(0,o.dashlaneServerDeltaTimestampSelector)(e.getState())||0,u=Math.round((0,a.getUnixTimestamp)()-d),l={pathname:t,method:"POST",rawBody:c,headers:n};return{Authorization:await(0,p.signRequest)({request:l,timestamp:u,credentials:r,headersToSign:s})}}(m,e,_,{...D,...C},P,T),N={...D,...R,...C},L=`${s.config.DASHLANE_STYX_HOST_WITH_SCHEME}${e}`,{data:b}=await function(e,t,r){const o={headers:r,validateStatus:n.validateStatus};switch(e.method){case i.ApiRequestMethod.GET:return(0,c.get)(t,o);case i.ApiRequestMethod.POST:return(0,c.post)(t,e.payload,o);default:(0,d.assertUnreachable)(e)}}(E,L,N);return b}},t.getApiClientAgentHeader=g},72636:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.SendTokenStatus=t.makeWSAuthentication=void 0;const o=r(66646),n=7,i="authentication";t.makeWSAuthentication=()=>({registerUki:e=>function(e){return(0,o._makeRequest)(i,n,"registeruki",e,{responseType:"text"}).then((e=>{if(function(e){if("string"!=typeof e){const t=JSON.stringify(e);throw new Error(`unsupported_response - ${t}`)}}(e),"ERROR"===e)throw new Error("Error: Failed to register the UKI");return e}))}(e),validity:e=>function(e){return(0,o._makeRequest)(i,n,"validity",e,{responseType:"text"})}(e)}),function(e){e[e.ERROR=0]="ERROR",e[e.SUCCESS=1]="SUCCESS",e[e.OTP_NEEDED=2]="OTP_NEEDED",e[e.UNKNOWN_USER=3]="UNKNOWN_USER"}(t.SendTokenStatus||(t.SendTokenStatus={}))},32239:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.makeWSBackup=void 0;const o=r(66646),n="backup";t.makeWSBackup=()=>({latest:e=>i(e),upload:e=>a(e),unlock:e=>s(e),erase:e=>c(e)});const i=e=>(0,o._makeRequest)(n,12,"latest",Object.assign({},e,{sharingTimestamp:0})),a=e=>(0,o._makeRequest)(n,12,"upload",e),s=e=>(0,o._makeRequest)(n,12,"unlock",e),c=e=>(0,o._makeRequest)(n,12,"erase",e)},33633:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.makeWSBreaches=void 0;const o=r(66646);t.makeWSBreaches=()=>({get:e=>(0,o._makeRequest)("breaches",1,"get",e)})},5692:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.makeWSContactInfo=void 0;const o=r(66646),n=1,i="contactinfos";t.makeWSContactInfo=()=>({getContactInfo:e=>function(e){return(0,o._makeRequest)(i,n,"get",{login:e.login,uki:e.uki})}(e)})},69376:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.makeWSCountry=void 0;const o=r(66646),n=1,i="country";t.makeWSCountry=()=>({getCurrentCountry:(e={})=>function(e){return(0,o._makeRequest)(i,n,"get",e).then((e=>e.content))}(e)})},32868:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.makeWSDataLeaks=void 0;const o=r(28445),n=r(92263),i=r(20750),a=r(48749),s=r(45800),c="dataleak",d=1;function u(e){return p(c,d,"status",e)}function l(e){return p(c,d,"leaks",e)}async function p(e,t,r,c){const d=`${a.config.DASHLANE_WS_HOST_WITH_SCHEME}/${t}/${e}/${r}`,u={headers:{...(0,s.getCloudflareHeaders)()}},{data:l}=await(0,o.postDataToUrl)(d,c,u);return function(e,t){if(429===t.code||t.error&&-32600===t.error.code){throw new n.CarbonError(i.WSError,i.WSErrorCode.THROTTLED).addAdditionalInfo({webService:e})}return t}(d,l)}t.makeWSDataLeaks=()=>({status:u,leaks:l})},35595:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.makeWSDevices=void 0;const o=r(66646),n="devices";t.makeWSDevices=()=>({list:e=>i(e),deactivate:e=>a(e),changeName:e=>s(e)});const i=e=>(0,o._makeRequest)(n,1,"list",{login:e.login,uki:e.uki}).then((e=>e.content)),a=e=>(0,o._makeRequest)(n,1,"deactivate",{login:e.login,uki:e.uki,deviceId:e.deviceId}),s=e=>(0,o._makeRequest)(n,1,"changename",{login:e.login,uki:e.uki,deviceId:e.deviceId,updatedName:e.updatedDeviceName})},20750:(e,t)=>{var r;Object.defineProperty(t,"__esModule",{value:!0}),t.WSError=t.WSErrorMessages=t.WSErrorCode=void 0,function(e){e[e.THROTTLED=0]="THROTTLED",e[e.REQUEST_FAILED=1]="REQUEST_FAILED"}(r=t.WSErrorCode||(t.WSErrorCode={})),t.WSErrorMessages={[r.THROTTLED]:"THROTTLED",[r.REQUEST_FAILED]:"WebService responded with error code in payload"},t.WSError={codes:r,name:"WSError",messages:t.WSErrorMessages}},56776:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.makeWSIconCrawler=void 0;const o=r(66646);t.makeWSIconCrawler=()=>({getIcons:n});const n=async e=>(0,o._makeRequest)("iconcrawler",2,"getIcons",{domainsInfo:e})},1577:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.NewCardToken=void 0;const o=r(66646);t.NewCardToken=function(e,t){return(0,o._makeRequest)(t.name,t.version,"getNewCardToken",{login:e.login,uki:e.uki,teamId:e.teamId??null})}},87327:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.makeWSPremium=void 0;const o=r(66646),n="premium",i=3;t.makeWSPremium=()=>({status:e=>function(e){return(0,o._makeRequest)(n,i,"status",{login:e.login,uki:e.uki,billingInformation:e.billingInformation,spaces:e.spaces,autoRenewal:e.autoRenewal,familyInformation:e.familyInformation,previousPlan:e.previousPlan,needsAutoRenewalFailed:e.needsAutoRenewalFailed,teamInformation:!1,capabilities:!0}).then((e=>{if(!e.success)throw new Error("failed fetching premium status");return e.hasOwnProperty("billingInformation")&&(e.billingInformation=function(e){if(!e)return;return{cardExpirationYear:Number(e.card_exp_year),cardExpirationMonth:Number(e.card_exp_month),cardLast4Digits:Number(e.card_last4),cardType:e.card_type}}(e.billingInformation)),e}))}(e),setAutoRenewal:e=>function(e){return(0,o._makeRequest)(n,i,"setAutoRenewal",{login:e.login,uki:e.uki,enabled:e.enabled})}(e),updateCardToken:e=>function(e){return(0,o._makeRequest)(n,i,"updateCardToken",{login:e.login,uki:e.uki,tokenId:e.tokenId,stripeAccount:e.stripeAccount})}(e),getABTestingVersionDetails:e=>function(e){return(0,o._makeRequest)(n,i,"getABTestingVersionDetails",e)}(e),getSubscriptionCode:e=>function({login:e,uki:t}){return(0,o._makeRequest)(n,i,"getSubscriptionCode",{login:e,uki:t})}(e)})},55898:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.makeWSQA=void 0;const o=r(66646),n=1,i="qa";t.makeWSQA=()=>({tokens:e=>function(e){return(0,o._makeRequest)(i,n,"tokens",e)}(e)})},56692:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.makeWSRecovery=void 0;const o=r(66646),n=1,i="recovery";t.makeWSRecovery=()=>({getSetupRequisites:e=>async function(e){return(0,o._makeRequest)(i,n,"getSetupRequisites",e)}(e),setRecoveryClientKeys:e=>async function(e){return(0,o._makeRequest)(i,n,"setRecoveryClientKeys",e)}(e),request:e=>async function(e){return(0,o._makeRequest)(i,n,"request",e)}(e),getPendingRequests:e=>async function(e){const{content:t}=await(0,o._makeRequest)(i,n,"getPendingRequests",e);return t}(e),acceptRequest:e=>async function(e){return(0,o._makeRequest)(i,n,"accept",e)}(e),refuseRequest:e=>async function(e){return(0,o._makeRequest)(i,n,"refuse",e)}(e),cancelRequest:e=>async function(e){return(0,o._makeRequest)(i,n,"cancel",e)}(e)})},90732:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.makeWSSecureFile=void 0;const o=r(66646),n=1,i="securefile";function a(e){return(0,o._makeRequest)(i,n,"getDownloadLink",e)}function s(e){return(0,o._makeRequest)(i,n,"delete",e)}function c(e){return(0,o._makeRequest)(i,n,"getUploadLink",e)}function d(e){return(0,o._makeRequest)(i,n,"commit",e)}t.makeWSSecureFile=()=>({getDownloadLink:a,getUploadLink:c,commit:d,delete:s})},66696:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.setTeamSettings=t.getTeamSettings=t.makeWSSettings=void 0;const o=r(66646),n=1,i="teamPlans";function a(e){return(0,o._makeRequest)(i,n,"status",e)}function s(e){return(0,o._makeRequest)(i,n,"editSettings",e)}t.makeWSSettings=()=>({getTeamSettings:e=>a(e),setTeamSettings:e=>s(e)}),t.getTeamSettings=a,t.setTeamSettings=s},64528:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.makeSharingWS=t.get=void 0;const o=r(66646),n=2,i="sharing";function a(e,t,r){const a={login:e,uki:t,action:JSON.stringify(r)};return(0,o._makeRequest)(i,n,"get",a).then((({content:e})=>e))}t.get=a;t.makeSharingWS=()=>({get:(e,t,r)=>a(e,t,r)})},98892:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.makeItemWS=void 0;const o=r(66646),n=2,i="sharing",a="performItemGroupAction";t.makeItemWS=()=>({updateItem:(e,t,r)=>function(e,t,r){const s={login:e,uki:t,action:JSON.stringify(r)};return(0,o._makeRequest)(i,n,a,s).then((e=>{const t=e.content,r=t.itemErrors;if(r&&r.length>0)throw new Error(r[0].message);return t}))}(e,t,r)})},63698:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.makeItemGroupWS=void 0;const o=r(66646),n=2,i="sharing",a="performItemGroupAction";function s(e,t,r){const s={login:e,uki:t,action:JSON.stringify(r)};return(0,o._makeRequest)(i,n,a,s).then((e=>{const t=e.content,r=t.itemGroupErrors;if(r&&r.length>0)throw new Error(r[0].message);const{itemGroups:o,items:n}=t;return{itemGroups:o,items:n}}))}t.makeItemGroupWS=()=>({createSpecialItemGroup:(e,t,r)=>s(e,t,r).then((({itemGroups:e})=>e&&e[0])),createItemGroup:s,deleteGroup:(e,t,r)=>s(e,t,r),addItems:(e,t,r)=>s(e,t,r),updateItem:(e,t,r)=>s(e,t,r),removeItems:(e,t,r)=>s(e,t,r),acceptItemGroup:s,refuseItemGroup:s,inviteItemGroupMembers:s,revokeItemGroupMembers:s,updateItemGroupMembers:s})},52931:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.makeUserGroupWS=void 0;const o=r(66646),n=1,i="userGroup",a="performUserGroupAction";function s(e,t,r){const s={login:e,uki:t,action:JSON.stringify(r)};return(0,o._makeRequest)(i,n,a,s).then((e=>{const{itemGroups:t,items:r,userGroupErrors:o,userGroups:n}=e.content;if(o&&o.length>0)throw new Error(o[0].message);return{itemGroups:t,items:r,userGroups:n}}))}t.makeUserGroupWS=()=>({create:(e,t,r)=>s(e,t,r),delete:(e,t,r)=>s(e,t,r),rename:(e,t,r)=>s(e,t,r),invite:(e,t,r)=>s(e,t,r),revoke:(e,t,r)=>s(e,t,r),update:(e,t,r)=>s(e,t,r),accept:(e,t,r)=>s(e,t,r),refuse:(e,t,r)=>s(e,t,r)})},12832:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CheckChangePasswordStatus=t.makeWSStrongAuth=void 0;const o=r(66646),n=r(95623),i=3,a="strongauth";var s;t.makeWSStrongAuth=()=>({checkChangeMasterPassword:e=>function({login:e,otp:t,deviceId:r}){return(0,o._makeRequest)(a,i,"getServerKey",{login:e,otp:t,deviceID:r,isMxAware:!0}).then((e=>{if(n.default.log("checkChangeMasterPassword: "+(e?JSON.stringify(e):"response null")),!e||!e.message)throw new Error("Unknown response from server");if(void 0===s[e.message])throw new Error(`unknown_message - ${JSON.stringify(e)}`);return{status:s[e.message],content:e.content}}))}(e)}),function(e){e[e.Unauthorized=0]="Unauthorized",e[e.OK=1]="OK"}(s=t.CheckChangePasswordStatus||(t.CheckChangePasswordStatus={}))},42883:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.makeWSTeamPlans=void 0;const o=r(66646),n=1,i="teamPlans";t.makeWSTeamPlans=()=>({findUserGroups:e=>function(e){return(0,o._makeRequest)(i,n,"findUserGroups",e)}(e),proposeMembers:e=>function(e){return(0,o._makeRequest)(i,n,"proposeMembers",e)}(e),acceptTeam:e=>function(e){return(0,o._makeRequest)(i,n,"acceptTeam",e)}(e),addTeamAdmin:e=>function(e){return(0,o._makeRequest)(i,n,"addTeamCaptain",e)}(e),removeTeamAdmin:e=>function(e){return(0,o._makeRequest)(i,n,"removeTeamCaptain",e)}(e),registerFreeTrial:e=>function(e){return(0,o._makeRequest)(i,n,"registerFreeTrial",e)}(e),confirmFreeTrial:e=>function(e){return(0,o._makeRequest)(i,n,"confirmFreeTrial",e)}(e),getDirectorySyncRequest:e=>function(e){return(0,o._makeRequest)(i,n,"getDirectorySyncRequest",e)}(e),updateDirectorySyncRequestStatus:e=>function(e){return(0,o._makeRequest)(i,n,"updateDirectorySyncRequestStatus",e)}(e),spaceDeleted:e=>function(e){return(0,o._makeRequest)(i,n,"spaceDeleted",e)}(e)})},85870:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.create=t.makeWSUserActivity=void 0;const o=r(66646),n="useractivity",i=2;async function a(e){return await(0,o._makeRequest)(n,i,"create",e)}t.makeWSUserActivity=()=>({create:a}),t.create=a},50141:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.makeWSUserAlias=void 0;const o=r(66646),n=1,i="userAlias";t.makeWSUserAlias=()=>({findUsersByAliases:e=>function(e){return(0,o._makeRequest)(i,n,"findUsers",{login:e.login,uki:e.uki,aliases:e.aliases}).then((e=>e.content))}(e)})},32607:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.isWSResponseSuccess=void 0,t.isWSResponseSuccess=function(e){return 200===e.code}},89016:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.makeWSService=void 0;const o=r(72636),n=r(5692),i=r(69376),a=r(32868),s=r(35595),c=r(87327),d=r(56692),u=r(12832),l=r(42883),p=r(50141),S=r(66696),g=r(63698),m=r(55898),A=r(64528),y=r(32239),E=r(33633),f=r(52931),T=r(85870),v=r(56776),h=r(90732);t.makeWSService=()=>({authentication:(0,o.makeWSAuthentication)(),backup:(0,y.makeWSBackup)(),breaches:(0,E.makeWSBreaches)(),contactInfo:(0,n.makeWSContactInfo)(),country:(0,i.makeWSCountry)(),dataleaks:(0,a.makeWSDataLeaks)(),devices:(0,s.makeWSDevices)(),iconCrawler:(0,v.makeWSIconCrawler)(),itemGroup:(0,g.makeItemGroupWS)(),premium:(0,c.makeWSPremium)(),recovery:(0,d.makeWSRecovery)(),settings:(0,S.makeWSSettings)(),strongAuth:(0,u.makeWSStrongAuth)(),teamPlans:(0,l.makeWSTeamPlans)(),userAlias:(0,p.makeWSUserAlias)(),sharing:(0,A.makeSharingWS)(),userGroup:(0,f.makeUserGroupWS)(),qa:(0,m.makeWSQA)(),userActivity:(0,T.makeWSUserActivity)(),secureFile:(0,h.makeWSSecureFile)()})},66646:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t._makeRequest=t.WsError=void 0;const o=r(28445),n=r(92263),i=r(45800),a=r(20750),s=r(48749);!function(e){e[e.THROTTLED=-999]="THROTTLED"}(t.WsError||(t.WsError={})),t._makeRequest=function(e,t,r,c,d){const u=`${s.config.DASHLANE_WS_HOST_WITH_SCHEME}/${t}/${e}/${r}`,l={...d,headers:{...(0,i.getCloudflareHeaders)()}};return(0,o.postDataToUrl)(u,c,l).then((e=>{const t="string"==typeof e?e:e.data;return function(e,t){if("string"==typeof t)return t;if(429===t.code||t.error&&-32600===t.error.code){throw new n.CarbonError(a.WSError,a.WSErrorCode.THROTTLED).addAdditionalInfo({webService:e})}const r="code"in t&&200!==t.code||"success"in t&&!t.success||"error"in t&&t.error;if(r){throw new n.CarbonError(a.WSError,a.WSErrorCode.REQUEST_FAILED).addAdditionalInfo({webService:e,message:t.message,webServiceSubMessage:t.content?.message||t.content?.error||t.content,code:t.code})}return t}(u,t)}))}},61384:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.freeWorker=t.getWorker=t.getWorkerPath=t.setWorkerPath=t.setWorkersPath=void 0;const o=r(72609);let n={};t.setWorkersPath=function(e){n=e},t.setWorkerPath=function(e,t){n[e]=t},t.getWorkerPath=function(e){return n[e]};const i=[],a=[];function s(e){const t=new Worker(e);return i.push(t),t}t.getWorker=function(e){return new Promise((t=>{if(i.length<function(){const e=o.navigator.getNavigator();return e&&e.hardwareConcurrency?e.hardwareConcurrency:4}()){t(s(e))}else a.push({resolve:t,path:e})}))},t.freeWorker=function(e){const t=i.indexOf(e);if(t<0)console.error("freeWorker: trying to terminate a worker that does not exist");else if(e.terminate(),i.splice(t,1),a.length>0){const{resolve:e,path:t}=a.shift();e(s(t))}}},81885:(e,t)=>{var r;Object.defineProperty(t,"__esModule",{value:!0}),t.KWXMLError=t.KWXMLErrorMessages=t.KWXMLErrorCode=void 0,function(e){e[e.PARSING_FAILED=0]="PARSING_FAILED"}(r=t.KWXMLErrorCode||(t.KWXMLErrorCode={})),t.KWXMLErrorMessages={[r.PARSING_FAILED]:"Failed to parse Dashlane XML"},t.KWXMLError={codes:r,name:"KWXMLError",messages:t.KWXMLErrorMessages}},61797:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.findAllKWXMLElementsOfType=t.removeNamespace=t.getDashlaneXml=t.parseDashlaneXml=void 0;const o=r(16516),n=r(50616),i=r(92263),a=r(81885),s=r(54218),c=r(51104),d=r(63985);function u(e){const t={KWAuthentifiant:d.fixCredentialTypesFromStore,KWSecureNote:d.fixNoteTypesFromStore,KWSecurityBreach:d.fixBreachTypesFromStore,KWSettingsManagerApp:c.fixPersonalSettingTypes.fromStore};let r=(0,o.compose)((0,o.reject)(o.isNil),(0,o.omit)((0,o.defaultTo)([],{KWAuthentifiant:["domainIcon"],KWSettingsManagerApp:["kwType","LastBackupTime","Id"]}[e.kwType])))(function(e,t){function r(t){return(0,s.default)(t)?Object.keys(t).reduce(((n,i)=>{const a=e[i]||i,c=t[i];return Array.isArray(c)?n[a]=c.map((0,o.unary)(r)):(0,s.default)(c)?n[a]=r(c):n[a]=c,n}),{}):t}return r(t)}({kwType:"__type__"},e));return t[e.kwType]&&(r=t[e.kwType](r)),r}function l(e){if(e.includes(":")){const t=e.indexOf(":");return e.substring(t+1,e.length)}return e}t.parseDashlaneXml=async function(e){try{return await new Promise(((t,r)=>{(0,n.parseXml)(((e,o)=>e?r(e):t(o)),e,{fixType:!1})}))}catch(e){throw new i.CarbonError(a.KWXMLError,a.KWXMLErrorCode.PARSING_FAILED).addAdditionalInfo({libError:`${e}`})}},t.getDashlaneXml=function(e){const t=Array.isArray(e)?(0,o.map)(u,e):u(e);return(0,n.toXml)(t,{pretty:!1,allowEmpty:!0})},t.removeNamespace=l,t.findAllKWXMLElementsOfType=function e(t,r,o=[]){if(l(t.__type__)===r&&o.push(t),t.__children__&&t.__children__.length>0)for(let i=0;i<t.__children__.length;i++){const a=t.__children__[i];(0,n.isKWXMLElement)(a)&&e(a,r,o)}return o}},46430:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.config=void 0;const o=r(73106),n=r(81080),i=r(30523),a=r(15876),s=r(63093),c=r(36172);t.config={commands:{abortDeviceLimitFlow:{handler:c.abortDeviceLimitFlow},loginViaSSO:{handler:o.loginViaSSO},unlinkPreviousDevice:{handler:i.unlinkPreviousDevice},unlinkMultipleDevices:{handler:a.unlinkMultipleDevices}},queries:{getLoginDeviceLimitFlow:{selector:n.viewedLoginDeviceLimitFlowSelector}},liveQueries:{liveLoginDeviceLimitFlow:{operator:s.loginDeviceLimitFlowView$}}}},20938:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.unlinkMultipleDevicesErrorReached=t.multipleDevicesLimitStillReached=t.oneDeviceLimitStillReached=t.sessionOpenedAfterDeviceLimitRemoval=t.refreshDeviceLimitStatusFailed=t.deviceLimitRemoved=t.deviceLimitStatusUpdated=t.unlinkingSucceeded=t.unlinkingFailed=t.unlinkingMultipleDevicesRequested=t.unlinkPreviousDeviceRequested=t.multipleDevicesLimitReached=t.oneDeviceLimitReached=t.UNLINK_MULTIPLE_DEVICES_ERROR=t.UNLINKING_SUCCEEDED=t.UNLINKING_FAILED=t.UNLINK_MULTIPLE_DEVICES_REQUESTED=t.UNLINK_PREVIOUS_DEVICE_REQUESTED=t.SESSION_OPENED_AFTER_DEVICE_LIMIT_REMOVAL=t.REFRESH_DEVICE_LIMIT_STATUS_FAILED=t.MULTIPLE_DEVICES_LIMIT_STILL_REACHED=t.MULTIPLE_DEVICES_LIMIT_REACHED=t.ONE_DEVICE_LIMIT_STILL_REACHED=t.ONE_DEVICE_LIMIT_REACHED=t.DEVICE_LIMIT_STATUS_UPDATED=t.DEVICE_LIMIT_REMOVED=void 0,t.DEVICE_LIMIT_REMOVED="DEVICE_LIMIT_REMOVED",t.DEVICE_LIMIT_STATUS_UPDATED="DEVICE_LIMIT_STATUS_UPDATED",t.ONE_DEVICE_LIMIT_REACHED="ONE_DEVICE_LIMIT_REACHED",t.ONE_DEVICE_LIMIT_STILL_REACHED="ONE_DEVICE_LIMIT_STILL_REACHED",t.MULTIPLE_DEVICES_LIMIT_REACHED="MULTIPLE_DEVICES_LIMIT_REACHED",t.MULTIPLE_DEVICES_LIMIT_STILL_REACHED="MULTIPLE_DEVICES_LIMIT_STILL_REACHED",t.REFRESH_DEVICE_LIMIT_STATUS_FAILED="REFRESH_DEVICE_LIMIT_STATUS_FAILED",t.SESSION_OPENED_AFTER_DEVICE_LIMIT_REMOVAL="SESSION_OPENED_AFTER_DEVICE_LIMIT_REMOVAL",t.UNLINK_PREVIOUS_DEVICE_REQUESTED="UNLINK_PREVIOUS_DEVICE_REQUESTED",t.UNLINK_MULTIPLE_DEVICES_REQUESTED="UNLINK_MULTIPLE_DEVICES_REQUESTED",t.UNLINKING_FAILED="UNLINKING_FAILED",t.UNLINKING_SUCCEEDED="UNLINKING_SUCCEEDED",t.UNLINK_MULTIPLE_DEVICES_ERROR="UNLINK_MULTIPLE_DEVICES_ERROR";t.oneDeviceLimitReached=e=>({type:t.ONE_DEVICE_LIMIT_REACHED,deviceLimitStatus:e.deviceLimitStatus,login:e.login,subscriptionCode:e.subscriptionCode});t.multipleDevicesLimitReached=e=>({type:t.MULTIPLE_DEVICES_LIMIT_REACHED,deviceLimitStatus:e.deviceLimitStatus,login:e.login,subscriptionCode:e.subscriptionCode});t.unlinkPreviousDeviceRequested=()=>({type:t.UNLINK_PREVIOUS_DEVICE_REQUESTED});t.unlinkingMultipleDevicesRequested=()=>({type:t.UNLINK_MULTIPLE_DEVICES_REQUESTED});t.unlinkingFailed=()=>({type:t.UNLINKING_FAILED});t.unlinkingSucceeded=()=>({type:t.UNLINKING_SUCCEEDED});t.deviceLimitStatusUpdated=()=>({type:t.DEVICE_LIMIT_STATUS_UPDATED});t.deviceLimitRemoved=()=>({type:t.DEVICE_LIMIT_REMOVED});t.refreshDeviceLimitStatusFailed=()=>({type:t.REFRESH_DEVICE_LIMIT_STATUS_FAILED});t.sessionOpenedAfterDeviceLimitRemoval=()=>({type:t.SESSION_OPENED_AFTER_DEVICE_LIMIT_REMOVAL});t.oneDeviceLimitStillReached=e=>({type:t.ONE_DEVICE_LIMIT_STILL_REACHED,updatedDeviceLimitStatus:e.updatedDeviceLimitStatus});t.multipleDevicesLimitStillReached=e=>({type:t.MULTIPLE_DEVICES_LIMIT_STILL_REACHED,updatedDeviceLimitStatus:e.updatedDeviceLimitStatus});t.unlinkMultipleDevicesErrorReached=e=>({type:t.UNLINK_MULTIPLE_DEVICES_ERROR,retryPayload:e.retryPayload})},15868:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getEmptyLoginDeviceLimitFlowState=void 0;const o=r(20938),n=r(10984),i=r(17825),a=r(32626),s=(e,t)=>t.type===o.ONE_DEVICE_LIMIT_REACHED?(0,n.atOneDeviceLimitReachedStage)({login:t.login,subscriptionCode:t.subscriptionCode,deviceLimitStatus:t.deviceLimitStatus}):t.type===o.MULTIPLE_DEVICES_LIMIT_REACHED?(0,n.atMultipleDevicesLimitReachedStage)({login:t.login,subscriptionCode:t.subscriptionCode,deviceLimitStatus:t.deviceLimitStatus}):e,c=(e,t)=>{switch(t.type){case o.UNLINK_PREVIOUS_DEVICE_REQUESTED:return(0,n.atUnlinkingAndOpeningSessionStage)(e);case o.DEVICE_LIMIT_STATUS_UPDATED:return(0,n.atRefreshingDeviceLimitStatusStage)(e)}return e},d=(e,t)=>{switch(t.type){case o.UNLINK_MULTIPLE_DEVICES_REQUESTED:return(0,n.atUnlinkingAndOpeningSessionStage)(e);case o.DEVICE_LIMIT_STATUS_UPDATED:return(0,n.atRefreshingDeviceLimitStatusStage)(e)}return e},u=(e,t)=>{switch(t.type){case o.UNLINK_MULTIPLE_DEVICES_ERROR:return(0,n.atUnlinkMultipleDevicesErrorStage)({...e,retryPayload:t.retryPayload});case o.UNLINK_MULTIPLE_DEVICES_REQUESTED:return(0,n.atUnlinkingAndOpeningSessionStage)(e);case o.UNLINKING_SUCCEEDED:return(0,n.atDeviceLimitDoneStage)(e)}return e},l=e=>{const{deviceLimitStatus:t}=e;switch(t._tag){case"limitedToOneDevice":return(0,n.atOneDeviceLimitReachedStage)({...e,deviceLimitStatus:t});case"limitedToMultipleDevices":return(0,n.atMultipleDevicesLimitReachedStage)({...e,deviceLimitStatus:t});default:(0,i.assertUnreachable)(t)}},p=(e,t)=>{switch(t.type){case o.ONE_DEVICE_LIMIT_STILL_REACHED:return(0,n.atOneDeviceLimitReachedStage)({...e,deviceLimitStatus:t.updatedDeviceLimitStatus});case o.MULTIPLE_DEVICES_LIMIT_STILL_REACHED:return(0,n.atMultipleDevicesLimitReachedStage)({...e,deviceLimitStatus:t.updatedDeviceLimitStatus});case o.REFRESH_DEVICE_LIMIT_STATUS_FAILED:return l(e);case o.DEVICE_LIMIT_REMOVED:return(0,n.atOpeningSessionAfterDeviceLimitRemovalStage)(e)}return e},S=(e,t)=>{switch(t.type){case o.UNLINKING_SUCCEEDED:return(0,n.atDeviceLimitDoneStage)(e);case o.UNLINKING_FAILED:return l(e);case o.UNLINK_MULTIPLE_DEVICES_ERROR:return(0,n.atUnlinkMultipleDevicesErrorStage)({...e,retryPayload:t.retryPayload})}return e};function g(){return{flow:null}}t.default=(e={flow:null},t)=>{if(null===e.flow)return{flow:s(null,t)};switch(e.flow.name){case a.LoginDeviceLimitFlowStage.OneDeviceLimitReached:return{flow:c(e.flow,t)};case a.LoginDeviceLimitFlowStage.UnlinkingMultipleDevicesError:return{flow:u(e.flow,t)};case a.LoginDeviceLimitFlowStage.MultipleDevicesLimitReached:return{flow:d(e.flow,t)};case a.LoginDeviceLimitFlowStage.RefreshingDeviceLimitStatus:return{flow:p(e.flow,t)};case a.LoginDeviceLimitFlowStage.UnlinkingAndOpeningSession:return{flow:S(e.flow,t)};case a.LoginDeviceLimitFlowStage.OpeningSessionAfterDeviceLimitRemoval:case a.LoginDeviceLimitFlowStage.DeviceLimitDone:return e;default:return(0,i.assertUnreachable)(e.flow)}},t.getEmptyLoginDeviceLimitFlowState=g},36172:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.abortDeviceLimitFlow=void 0;const o=r(32626),n=r(20698),i=r(70252);t.abortDeviceLimitFlow=async function(e){const{sessionService:t}=e;try{return await t.getInstance().user.closeSession(),{success:!0}}catch(e){const t=(0,n.augmentDeviceLimitError)(e,"abortDeviceLimitFlow");return(0,i.sendExceptionLog)({error:t}),{success:!1,error:{code:o.AbortDeviceLimitFlowError.UnexpectedError}}}}},31859:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getPairingGroupDevices=t.findMyPairingGroup=t.isDevicePartOfPairingGroup=t.isDesktopPlatform=void 0;const o=r(32626);t.isDesktopPlatform=e=>e===o.Platform.DesktopLegacyWindows||e===o.Platform.DesktopLegacyMacOS||e===o.Platform.DesktopUWP;t.isDevicePartOfPairingGroup=(e,t)=>t.devices.includes(e.deviceId);t.findMyPairingGroup=(e,t)=>e.find((e=>e.pairingGroupUUID===t));t.getPairingGroupDevices=(e,t)=>t.filter((({deviceId:t})=>e.devices.includes(t)))},32573:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.makeDeviceInfoService=void 0;const o=r(16516),n=r(46298),i=r(32626),a={[i.Platform.Android]:"server_android",[i.Platform.CarbonTests]:"server_carbon_tests",[i.Platform.CarbonUnknown]:"server_carbon_unknown",[i.Platform.DesktopLegacyMacOS]:"server_macosx",[i.Platform.DesktopLegacyWindows]:"server_win",[i.Platform.DesktopUWP]:"desktop_win",[i.Platform.IPad]:"server_ipad",[i.Platform.IPhone]:"server_iphone",[i.Platform.IPod]:"server_ipod",[i.Platform.StandaloneExtension]:"server_standalone",[i.Platform.TeamAdminConsole]:"server_tac",[i.Platform.WebApp]:"server_leeloo",[i.Platform.WebAppDev]:"server_leeloo_dev"},s=(0,o.invertObj)(a),c=e=>{return{deviceId:e.deviceId,deviceName:e.deviceName,devicePlatform:(t=e.devicePlatform,s[t]),lastActivityDate:e.lastActivityDateUnix,isBucketOwner:e.isBucketOwner,temporary:e.temporary};var t},d=e=>({pairingGroupUUID:e.pairingGroupUUID,devices:e.devices,isBucketOwner:e.isBucketOwner});t.makeDeviceInfoService=e=>({getDevicesInfo:t=>(async(e,t)=>{const r=await n.listDevices(e,t);if(n.isApiError(r))throw new Error(`Failed to get devices: ${r.message}`);return{devices:r.devices.map(c),pairingGroups:r.pairingGroups.map(d)}})(e,t)})},89961:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.toPlatformView=void 0;const o=r(32626),n={[o.Platform.Android]:o.PlatformView.Android,[o.Platform.CarbonTests]:o.PlatformView.Other,[o.Platform.CarbonUnknown]:o.PlatformView.Other,[o.Platform.DesktopLegacyMacOS]:o.PlatformView.DesktopMacOS,[o.Platform.DesktopLegacyWindows]:o.PlatformView.DesktopWindows,[o.Platform.DesktopUWP]:o.PlatformView.DesktopWindows,[o.Platform.IPad]:o.PlatformView.IPad,[o.Platform.IPhone]:o.PlatformView.IPhone,[o.Platform.IPod]:o.PlatformView.IPod,[o.Platform.StandaloneExtension]:o.PlatformView.StandaloneExtension,[o.Platform.TeamAdminConsole]:o.PlatformView.TeamAdminConsole,[o.Platform.WebApp]:o.PlatformView.WebApp,[o.Platform.WebAppDev]:o.PlatformView.WebApp};t.toPlatformView=e=>n[e]},49154:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DeviceLimitCapabilityEventBus=void 0;t.DeviceLimitCapabilityEventBus=class{constructor(e,t){this.services=e,this.connector=t}register(e){const t=[];return Object.keys(e).forEach((r=>{const{handler:o}=e[r],n=this.connector[r].on((()=>o(this.services)));t.push(n)})),()=>{t.forEach((e=>e()))}}}},27331:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getDeviceLimitFlowEventsManager=t.DeviceLimitFlowEventsManager=void 0;const o=r(35088),n=r(63093),i=r(3343);class a{constructor(e){this.registrations=[];e.getState$().pipe((0,n.loginDeviceLimitFlow$)(),(0,i.pairwise)()).subscribe(this.onTransition.bind(this))}addEventListener(e,t){const r=(0,o.v4)();return this.registrations.push({id:r,event:e,listener:t}),r}removeTransitionEventListener(e){this.registrations=this.registrations.filter((t=>t.id!==e))}onTransition([e,t]){this.registrations.forEach((({event:r,listener:o})=>{("exit"===r.type&&r.from===e?.name||"entry"===r.type&&r.to===t?.name)&&o(r)}))}}let s;t.DeviceLimitFlowEventsManager=a;t.getDeviceLimitFlowEventsManager=e=>(s||(s=new a(e)),s)},10984:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.atUnlinkMultipleDevicesErrorStage=t.atDeviceLimitDoneStage=t.atRefreshingDeviceLimitStatusStage=t.atOpeningSessionAfterDeviceLimitRemovalStage=t.atUnlinkingAndOpeningSessionStage=t.atMultipleDevicesLimitReachedStage=t.atOneDeviceLimitReachedStage=void 0;const o=r(32626);t.atOneDeviceLimitReachedStage=e=>({...e,name:o.LoginDeviceLimitFlowStage.OneDeviceLimitReached});t.atMultipleDevicesLimitReachedStage=e=>({...e,name:o.LoginDeviceLimitFlowStage.MultipleDevicesLimitReached});t.atUnlinkingAndOpeningSessionStage=e=>({...e,name:o.LoginDeviceLimitFlowStage.UnlinkingAndOpeningSession});t.atOpeningSessionAfterDeviceLimitRemovalStage=e=>({...e,name:o.LoginDeviceLimitFlowStage.OpeningSessionAfterDeviceLimitRemoval});t.atRefreshingDeviceLimitStatusStage=e=>({...e,name:o.LoginDeviceLimitFlowStage.RefreshingDeviceLimitStatus});t.atDeviceLimitDoneStage=e=>({...e,name:o.LoginDeviceLimitFlowStage.DeviceLimitDone});t.atUnlinkMultipleDevicesErrorStage=e=>({...e,deviceLimitStatus:e.deviceLimitStatus,name:o.LoginDeviceLimitFlowStage.UnlinkingMultipleDevicesError})},63093:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.loginDeviceLimitFlowView$=t.loginDeviceLimitFlow$=void 0;const o=r(18948),n=r(3343),i=r(81080);t.loginDeviceLimitFlow$=()=>(0,o.pipe)((0,n.map)(i.loginDeviceLimitFlowSelector),(0,n.distinctUntilChanged)(((e,t)=>e?.name===t?.name)));t.loginDeviceLimitFlowView$=()=>(0,o.pipe)((0,n.map)(i.viewedLoginDeviceLimitFlowSelector),(0,n.distinctUntilChanged)(((e,t)=>e?.name===t?.name)))},81080:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.viewedLoginDeviceLimitFlowSelector=t.loginDeviceLimitFlowSelector=void 0;const o=r(46802);t.loginDeviceLimitFlowSelector=e=>e.userSession.loginDeviceLimitFlow.flow;t.viewedLoginDeviceLimitFlowSelector=e=>{const r=(0,t.loginDeviceLimitFlowSelector)(e);return r?(0,o.toLoginDeviceLimitFlowView)(r):null}},46802:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.toLoginDeviceLimitFlowView=t.toMultipleDevicesLimitErrorStageView=t.toMultipleDevicesLimitReachedStageView=void 0;const o=r(32626),n=r(35520),i=r(88068),a=r(17825);t.toMultipleDevicesLimitReachedStageView=e=>({name:o.LoginDeviceLimitFlowStage.MultipleDevicesLimitReached,login:e.login,devicesToDeactivate:e.deviceLimitStatus.devices.map(i.toDeviceToDeactivateInfoView),subscriptionCode:e.subscriptionCode});t.toMultipleDevicesLimitErrorStageView=e=>({name:o.LoginDeviceLimitFlowStage.UnlinkingMultipleDevicesError,login:e.login,retryPayload:e.retryPayload,subscriptionCode:e.subscriptionCode});t.toLoginDeviceLimitFlowView=e=>{switch(e.name){case o.LoginDeviceLimitFlowStage.OneDeviceLimitReached:return s=e,{name:o.LoginDeviceLimitFlowStage.OneDeviceLimitReached,login:s.login,previousDevice:(0,n.toPreviousDeviceInfo)(s.deviceLimitStatus.bucketOwner),subscriptionCode:s.subscriptionCode};case o.LoginDeviceLimitFlowStage.MultipleDevicesLimitReached:return(0,t.toMultipleDevicesLimitReachedStageView)(e);case o.LoginDeviceLimitFlowStage.UnlinkingAndOpeningSession:case o.LoginDeviceLimitFlowStage.DeviceLimitDone:case o.LoginDeviceLimitFlowStage.RefreshingDeviceLimitStatus:case o.LoginDeviceLimitFlowStage.OpeningSessionAfterDeviceLimitRemoval:return r=e.name,i=e.login,{name:r,login:i};case o.LoginDeviceLimitFlowStage.UnlinkingMultipleDevicesError:return(0,t.toMultipleDevicesLimitErrorStageView)(e);default:return(0,a.assertUnreachable)(e)}var r,i,s}},85822:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.startDeviceLimitFlow=t.getDeviceLimitStatus=t.attemptGetDeviceLimitStatus=void 0;const o=r(16593),n=r(15718),i=r(82652),a=r(22589),s=r(32573),c=r(36077),d=r(20938),u=r(90622),l=r(56915),p=r(38981),S=r(92263),g=r(14656);t.attemptGetDeviceLimitStatus=async e=>{try{return await Promise.race([(0,t.getDeviceLimitStatus)(e),new Promise((e=>setTimeout((()=>e((0,c.noDeviceLimit)())),3e3)))])}catch(e){return(e=>{if(!(0,S.isCarbonError)(e,g.HttpError,g.HttpErrorCode.NETWORK_ERROR)&&!(0,S.isCarbonError)(e,g.HttpError,g.HttpErrorCode.CONNECTION_ABORTED)&&!(0,S.isCarbonError)(e,g.HttpError,g.HttpErrorCode.CONNECTION_TIMED_OUT))throw e;return(0,c.noDeviceLimit)()})(e)}};t.getDeviceLimitStatus=async e=>{const{storeService:t}=e,r=t.getState();if((0,p.isSSOUserSelector)(r))return(0,c.noDeviceLimit)();const d=(0,n.pairingIdSelector)(r),S=(0,o.premiumStatusSelector)(r),g=(0,o.userLoginSelector)(r),m=(0,s.makeDeviceInfoService)(t),A=await m.getDevicesInfo(g),y=(0,l.getDeviceIdSelector)(r,g),E=(0,u.deviceKeysSelector)(t.getState()),f=(0,i.isOneDeviceLimitApplicable)(d,A,y,S);if("limitedToOneDevice"===f._tag)return(0,c.limitedToOneDevice)(f.bucketOwner);const T=(0,a.isMultipleDevicesLimitApplicable)(A,S,E);return"limitedToMultipleDevices"===T._tag?(0,c.limitedToMultipleDevices)(T.devices):(0,c.noDeviceLimit)()};t.startDeviceLimitFlow=async(e,t)=>{const{sessionService:r,storeService:n}=e,i=n.getState(),a=(0,o.userLoginSelector)(i),s=r.getInstance().user,c=await s.fetchSubscriptionCode();if("limitedToOneDevice"===t._tag){const e=(0,d.oneDeviceLimitReached)({deviceLimitStatus:t,subscriptionCode:c,login:a});n.dispatch(e)}else if("limitedToMultipleDevices"===t._tag){const e=(0,d.multipleDevicesLimitReached)({deviceLimitStatus:t,subscriptionCode:c,login:a});n.dispatch(e)}}},36077:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.noDeviceLimit=t.limitedToMultipleDevices=t.limitedToOneDevice=void 0;t.limitedToOneDevice=e=>({_tag:"limitedToOneDevice",bucketOwner:e});t.limitedToMultipleDevices=e=>({_tag:"limitedToMultipleDevices",devices:e});t.noDeviceLimit=()=>({_tag:"noDeviceLimit"})},75903:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.refreshDeviceLimitStatus=void 0;const o=r(70252),n=r(88610),i=r(20698),a=r(20938),s=r(85822);t.refreshDeviceLimitStatus=async e=>{const{sessionService:t,storeService:r}=e;try{const c=t.getInstance().user;await c.refreshSessionData();const d=await(0,s.getDeviceLimitStatus)(e);if("noDeviceLimit"===d._tag)r.dispatch((0,a.deviceLimitRemoved)()),await(async e=>{const{sessionService:t,storeService:r}=e;try{await(0,n.sessionDidOpen)(e),r.dispatch((0,a.sessionOpenedAfterDeviceLimitRemoval)())}catch(r){(0,i.notifyDeviceLimitError)(e,r);const n=(0,i.augmentDeviceLimitError)(r,"openSessionAfterDeviceLimitRemoval");(0,o.sendExceptionLog)({error:n}),t.close()}})(e);else if("limitedToOneDevice"===d._tag){const e=(0,a.oneDeviceLimitStillReached)({updatedDeviceLimitStatus:d});r.dispatch(e)}else if("limitedToMultipleDevices"===d._tag){const e=(0,a.multipleDevicesLimitStillReached)({updatedDeviceLimitStatus:d});r.dispatch(e)}}catch(e){r.dispatch((0,a.refreshDeviceLimitStatusFailed)());const t=(0,i.augmentDeviceLimitError)(e,"refreshDeviceLimitStatus");(0,o.sendExceptionLog)({error:t})}}},20698:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.augmentDeviceLimitError=t.notifyDeviceLimitError=void 0;const o=r(32626),n=r(16373),i=e=>"object"==typeof e&&e instanceof Error,a=e=>i(e)?e.message:"No valid error reported";t.notifyDeviceLimitError=async function(e,t){const{storeService:r}=e,i=(0,n.addNewLoginNotification)({type:o.LoginNotificationType.UNKNOWN_ERROR,message:a(t)});r.dispatch(i)},t.augmentDeviceLimitError=function(e,t){const r=`[DeviceLimit] - ${t}: ${a(e)}`,o=new Error(r);return i(e)&&(o.stack=e.stack),o}},22589:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.isMultipleDevicesLimitApplicable=void 0;const o=r(87314),n=(e,t)=>t.lastActivityDate-e.lastActivityDate;t.isMultipleDevicesLimitApplicable=(e,t,r)=>{if((t?.capabilities?.devicesLimit?.info?.limit||0)<=1)return(0,o.notLimitedToMultipleDevices)();const{nonPairedDevices:i,pairingGroups:a}=(({pairingGroups:e,devices:t})=>{const r=t.filter((t=>!e.find((e=>e.devices.includes(t.deviceId)))&&t),[]);return{pairingGroups:e,nonPairedDevices:r}})(e);if(t.capabilities.devicesLimit.info.limit<i.length+a.length){const t=(({pairingGroups:e,devices:t,nonPairedDevices:r,deviceKeys:o})=>{const i=[...t].sort(n),a=[];for(const r of e){let e;e=r.devices.includes(o?.accessKey)?{...t.find((e=>e.deviceId===o?.accessKey)),isCurrentDevice:!0}:i.find((e=>r.devices.includes(e.deviceId))),a.push({...e,deviceId:r.pairingGroupUUID,isPairingGroup:!0})}const s=r.map((e=>e.deviceId===o?.accessKey?{...e,isCurrentDevice:!0}:e));return[...a,...s].sort(n)})({devices:e.devices,nonPairedDevices:i,pairingGroups:a,deviceKeys:r});return(0,o.limitedToMultipleDevices)(t)}return(0,o.notLimitedToMultipleDevices)()}},87314:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.limitedToMultipleDevices=t.notLimitedToMultipleDevices=void 0;t.notLimitedToMultipleDevices=()=>({_tag:"notLimitedToMultipleDevices"});t.limitedToMultipleDevices=e=>({_tag:"limitedToMultipleDevices",devices:e})},88068:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.toDeviceToDeactivateInfoView=void 0;const o=r(32626),n=r(89961);t.toDeviceToDeactivateInfoView=e=>({...e,platform:e.devicePlatform?(0,n.toPlatformView)(e.devicePlatform):o.PlatformView.Other})},82652:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getMonoBucketOwner=t.isOneDeviceLimitApplicable=void 0;const o=r(16516),n=r(31859),i=r(44179);function a(e){const{devices:t,pairingGroups:r}=e;let i=null,a=t.find((e=>e.isBucketOwner))??null;if(!a&&(i=r.find((e=>e.isBucketOwner))??null,i)){const e=(0,n.getPairingGroupDevices)(i,t),r=(e,t)=>e.lastActivityDate-t.lastActivityDate;e.sort(r);const s=e=>Boolean(e.devicePlatform&&(0,n.isDesktopPlatform)(e.devicePlatform)),c=(0,o.partition)(s,e);a=(0,o.unnest)(c)[0]||null}return{bucketOwner:a,bucketOwnerPairingGroup:i}}t.isOneDeviceLimitApplicable=function(e,t,r,o){const{bucketOwner:s,bucketOwnerPairingGroup:c}=a(t),{pairingGroups:d}=t;if(!Boolean(1===o?.capabilities?.devicesLimit?.info?.limit))return(0,i.notLimitedToOneDevice)();const u=!(!c||!e)&&c.pairingGroupUUID===e,l=(0,n.findMyPairingGroup)(d,e??""),p=!(!s||!l)&&(0,n.isDevicePartOfPairingGroup)(s,l);return!s||s.deviceId===r||u||p?(0,i.notLimitedToOneDevice)():(0,i.limitedToOneDevice)(s)},t.getMonoBucketOwner=a},44179:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.notLimitedToOneDevice=t.limitedToOneDevice=void 0;t.limitedToOneDevice=e=>({_tag:"limitedToOneDevice",bucketOwner:e});t.notLimitedToOneDevice=()=>({_tag:"notLimitedToOneDevice"})},35520:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.toPreviousDeviceInfo=void 0;const o=r(32626),n=r(89961);t.toPreviousDeviceInfo=({deviceName:e,devicePlatform:t,lastActivityDate:r})=>({name:e??"",platform:t?(0,n.toPlatformView)(t):o.PlatformView.Other,lastActive:r})},57634:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.setupDeviceLimitEventBus=void 0;const o=r(75903),n=r(20938),i=r(32626),a={deviceLimitCapabilityUpdated:{handler:e=>{const t=(0,n.deviceLimitStatusUpdated)();e.storeService.dispatch(t),(0,o.refreshDeviceLimitStatus)(e)}}},s={type:"entry",to:i.LoginDeviceLimitFlowStage.OneDeviceLimitReached},c={type:"exit",from:i.LoginDeviceLimitFlowStage.OneDeviceLimitReached},d={type:"entry",to:i.LoginDeviceLimitFlowStage.MultipleDevicesLimitReached},u={type:"exit",from:i.LoginDeviceLimitFlowStage.MultipleDevicesLimitReached};t.setupDeviceLimitEventBus=(e,t)=>{let r;const o=()=>r=e.register(a),n=()=>r();t.addEventListener(s,o),t.addEventListener(c,n),t.addEventListener(d,o),t.addEventListener(u,n)}},15876:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.unlinkMultipleDevices=void 0;const o=r(32626),n=r(16593),i=r(46298),a=r(22589),s=r(88610),c=r(16373),d=r(32573),u=r(20938),l=r(20698),p=r(70252),S=r(90622);t.unlinkMultipleDevices=async(e,t)=>{const{storeService:r,sessionService:g}=e,m=r.getState(),A=(0,n.userLoginSelector)(m);r.dispatch((0,u.unlinkingMultipleDevicesRequested)());const y=await(async(e,t,r)=>{const{storeService:o}=e,n=e=>{const t=(0,u.unlinkMultipleDevicesErrorReached)({retryPayload:r});return o.dispatch(t),{success:!1,error:{code:e.code}}};try{const e=await(0,i.deactivateDevices)(o,t,r);if((0,i.isApiError)(e)&&e.code!==i.CLIENT_DEVICES_NOT_FOUND&&e.code!==i.PAIRING_GROUPS_NOT_FOUND)return n(e)}catch(e){return n(e)}})(e,A,t);if(y)return y;const E=await(async(e,t)=>{const{storeService:r}=e,i=r.getState(),s=(0,n.premiumStatusSelector)(i),l=(0,d.makeDeviceInfoService)(r),p=await l.getDevicesInfo(t),g=(0,S.deviceKeysSelector)(r.getState()),m=(0,a.isMultipleDevicesLimitApplicable)(p,s,g);if("limitedToMultipleDevices"===m._tag){r.dispatch((0,u.deviceLimitStatusUpdated)());const e=(0,c.addNewLoginNotification)({type:o.LoginNotificationType.UNKNOWN_ERROR,message:`${o.USER_STILL_OVERFLOWING}`});r.dispatch(e);const t=(0,u.multipleDevicesLimitStillReached)({updatedDeviceLimitStatus:{_tag:"limitedToMultipleDevices",devices:m.devices}});return r.dispatch(t),{success:!1,error:{code:o.USER_STILL_OVERFLOWING}}}return!1})(e,A);if(E)return E;try{return await(0,s.sessionDidOpen)(e),r.dispatch((0,u.unlinkingSucceeded)()),{success:!0}}catch(t){return g.close(),(0,l.notifyDeviceLimitError)(e,t),r.dispatch((0,u.unlinkingFailed)()),(0,p.sendExceptionLog)({error:(0,l.augmentDeviceLimitError)(t,"unlinkMultipleDevices")}),{success:!1,error:{code:o.UNEXPECTED_ERROR}}}}},30523:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.unlinkPreviousDevice=void 0;const o=r(88610),n=r(20938),i=r(20698),a=r(70252),s=r(32626);t.unlinkPreviousDevice=async function(e){const{storeService:t}=e;try{return t.dispatch((0,n.unlinkPreviousDeviceRequested)()),await(0,o.sessionDidOpen)(e),t.dispatch((0,n.unlinkingSucceeded)()),{success:!0}}catch(r){t.dispatch((0,n.unlinkingFailed)()),(0,i.notifyDeviceLimitError)(e,r);const o=(0,i.augmentDeviceLimitError)(r,"unlinkPreviousDevice");return(0,a.sendExceptionLog)({error:o}),{success:!1,error:{code:s.UnlinkPreviousDeviceError.UnexpectedError}}}}},88610:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DifferentLoginAuthorized=t.sessionDidOpen=t.openSessionWithMasterPassword=t.updateSessionUponLoginAction=t.makeLoginController=void 0;const o=r(21877),n=r(32626),i=r(58639),a=r(70414),s=r(28287),c=r(89160),d=r(58639),u=r(16356),l=r(86797),p=r(59489),S=r(2246),g=r(25576),m=r(5464),A=r(76089),y=r(28445),E=r(64910),f=r(33769),T=r(19399),v=r(56915),h=r(62844),_=r(52653),I=r(75226),C=r(71938),D=r(63739),O=r(658),P=r(15606),R=r(16593),N=r(38981),L=r(29303),b=r(27885),U=r(61740),M=r(7624),w=r(69763),B=r(15718),k=r(85822),G=r(61259),F=r(35924),K=r(46298),V=r(98226),H=r(25421),z=r(18948),j=r(45051),W=r(63229);async function x(e,t,r,o){const{storeService:i,sessionService:a,applicationModulesAccess:s}=e,c=await(0,z.firstValueFrom)(s.createClients().session.queries.selectedOpenedSession());if(!(0,j.isSuccess)(c))throw new Error(n.AuthenticationCode[n.AuthenticationCode.UNKNOWN_ERROR]);if(c.data)throw new Error(n.AuthenticationCode[n.AuthenticationCode.SESSION_ALREADY_OPENED]);if(""===t)throw new Error(n.AuthenticationCode[n.AuthenticationCode.EMPTY_LOGIN]);if(!(0,y.isValidLogin)(t))throw new Error(n.AuthenticationCode[n.AuthenticationCode.INVALID_LOGIN]);if(i.dispatch((0,F.updateLoginStepInfoLogin)(t)),""===r)throw new Error(n.AuthenticationCode[n.AuthenticationCode.EMPTY_MASTER_PASSWORD]);let d=se.FORBIDDEN;if(o&&void 0!==o.authorizeDifferentLogin&&(d=o.authorizeDifferentLogin),i.getUserLogin()&&i.getUserLogin()!==t&&(i.isAuthenticated()&&await a.close(),d===se.FORBIDDEN))throw new Error(n.AuthenticationCode[n.AuthenticationCode.DIFFERENT_LOGIN_PROVIDED_WITH_TOKEN_OR_OTP]);i.hasSessionId()&&i.getUserLogin()===t&&r&&i.dispatch((0,u.updateMasterPassword)(r));const l=o&&o.serverKey;if(l&&i.dispatch((0,u.updateServerKey)(l)),i.getUserLogin()!==t||void 0===r){const e=(0,N.ssoSettingsSelector)(i.getState());await a.close(),a.setInstance(t,r),e.ssoToken&&i.dispatch((0,M.storeSSOSettings)(e))}}async function Y(e,t,r,o,i,s,c){try{const{storeService:u,sessionService:l}=e,p=(0,y.normalizeEmail)(t);await x(e,p,r),await ae(o);if(await l.getInstance().user.accountExistsLocally())throw new Error("Unexpected local account presence during OTP1 step");if(await a.registerDeviceWithToken(u,i,(0,g.makeOTP)(o),c??!1,t,s)!==n.AuthenticationCode.ASK_MASTER_PASSWORD)throw new Error("unexpected status from device registration");return r?q(e,p,r,{isDataPersisted:i}):(d.triggerAskMasterPassword(p),n.LoginResultEnum.MasterPasswordMissing)}catch(t){throw oe(t)&&(0,O.sendOTPForNewDeviceErrorLog)(e,c),d.triggerOpenSessionFailed(t),t}}async function q(e,t,r,o,i){const s=o?.loginType??"MasterPassword";try{const{storeService:d,sessionService:l,masterPasswordEncryptorService:S,localDataEncryptorService:m,remoteDataEncryptorService:A,localStorageService:T,storageService:h,applicationModulesAccess:_}=e;if("CreatedPasswordlessAccount"===s||"DeviceToDevice"===s)d.dispatch((0,p.storeAccountAuthenticationType)("invisibleMasterPassword"));else{const e=d.getState(),r=(0,v.getDeviceAccessKeySelector)(e,t);let o;try{const e=await(0,K.getAuthenticationMethodsForLogin)(d,{login:t,deviceAccessKey:r,methods:g.localSupportedAuthenticationMethod});if((0,K.isApiError)(e))return await c.handleGetAuthenticationMethodsForLoginError(h,_,e,t);o=e.accountType}catch(e){o="masterPassword"}d.dispatch((0,p.storeAccountAuthenticationType)(o))}let I=o&&o.isDataPersisted;i?.(`isDataPersisted? ${I}`),void 0===I&&(I=d.getAccountInfo().persistData);const C=o&&o.serverKey;i?.(`serverKey null, undefined, or empty? ${!C}`);const D=Boolean(o&&o.rememberMasterPassword);i?.(`rememberMasterPassword? ${D}`);const P=Boolean(o?.shouldRememberMeForSSO);t=(0,y.normalizeEmail)(t),i?.("updateSessionUponLoginAction START"),await x(e,t,r,{authorizeDifferentLogin:se.AUTHORIZED,serverKey:C}),i?.("updateSessionUponLoginAction SUCCESS");const N=await l.getInstance().user.accountExistsLocally();if(i?.(`accountExistLocally? ${N}`),N){const t=T.getInstance(),r=await t.doesLocalKeyExist();if(i?.(`doesLocalKeyExist? ${r}`),r)try{const e=await t.getLocalKey();e.length<64&&(i?.("localKeyMigrationRequired? true"),d.dispatch((0,u.updateIsLocalKeyMigrationRequired)(!0)));const r="";i?.("set localDataEncryptorService START");const o=(0,E.getNoDerivationCryptoConfig)();m.setInstance({raw:e},r,o),i?.("set localDataEncryptorService SUCCESS"),i?.("updateLocalKey START"),d.dispatch((0,u.updateLocalKey)(e)),i?.("updateLocalKey SUCCESS")}catch(t){throw(0,O.sendMasterPasswordLoginErrorLog)(e,!1),new Error(n.AuthenticationCode[n.AuthenticationCode.WRONG_PASSWORD])}i?.("loadLocalData START"),await c.loadLocalData(l,d,S),i?.("loadLocalData SUCCESS")}else{const e=d.getState(),t=(0,R.isRemoteKeyActivatedSelector)(e)&&A?A:S;i?.("validateMasterPassword START"),await a.validateMasterPassword(d,t),i?.("validateMasterPassword SUCCESS")}if(i?.("rememberMasterPasswordUpdated START"),o?.rememberMasterPassword&&d.dispatch((0,u.rememberMasterPasswordUpdated)(D)),i?.("rememberMasterPasswordUpdated SUCCESS"),P)d.dispatch((0,u.shouldRememberMeForSSOUpdated)(P));else{const t=await(0,z.firstValueFrom)(e.applicationModulesAccess.createClients().authenticationFlow.queries.getSsoUserSettings());(0,j.isSuccess)(t)&&(t.data.rememberMeForSSOPreference||await(0,W.disableAutologin)(e))}return c.cacheIsSso(d.getAccountInfo().login,"SSO"===s),N?(i?.("initLocalSession START"),(0,O.sendLoginSuccessEventLog)({services:e,isInitial:!1,loginType:s}),await async function(e,t){const{sessionService:r,storeService:o,localDataEncryptorService:i}=e,a=r.getInstance().user,s=o.getState();(0,R.isLocalKeyMigrationRequiredSelector)(s)&&(await(0,f.generateLocalkeyAndSetupEncryptorService)(i,o,r,g.PersistData.PERSIST_DATA_YES),await a.persistAllData());await a.refreshSessionData(),t?.requiredPermissions&&await $(o,r,t.requiredPermissions);const c=await(0,k.attemptGetDeviceLimitStatus)(e);if("noDeviceLimit"!==c._tag)return await(0,k.startDeviceLimitFlow)(e,c),n.LoginResultEnum.DeviceLimitFlow;return te(e,t)}(e,o)):(i?.("initInitialSession START"),"SSO"===s&&(0,O.sendLoginSuccessEventLog)({services:e,isInitial:!0,loginType:o?.loginType}),await ee(e,I,o))}catch(t){throw t.message&&t.message===n.AuthenticationCode[n.AuthenticationCode.WRONG_PASSWORD]&&(0,O.sendMasterPasswordLoginErrorLog)(e,!0),d.triggerOpenSessionFailed(t),t}}t.makeLoginController=e=>({openSession:(t,r)=>async function(e,t,r){const{storeService:i,sessionService:a,wsService:s,storageService:c,applicationModulesAccess:u}=e;t=(0,y.normalizeEmail)(t);try{const p=r&&r.password;await x(e,t,p,{authorizeDifferentLogin:se.AUTHORIZED});let S=await a.getInstance().user.accountExistsLocally();const m=await ie(i,c,u,s,S);if("invisibleMasterPassword"===(0,H.accountAuthenticationTypeSelector)(i.getState()))return d.triggerOpenSessionMasterPasswordLess(),n.LoginResultEnum.MasterPasswordLess;switch(m){case n.AuthenticationCode.SSO_LOGIN_BYPASS:return(0,O.sendAskSSOAuthenticationEventLog)(e,o.VerificationMode.None),d.triggerOpenSessionSsoRedirectionToIdpRequired((0,G.triggerServiceProviderUrlRedirect)(i.getState(),t),(0,N.ssoProviderInfoSelector)(i.getState()).isNitroProvider),n.LoginResultEnum.SSOLogin;case n.AuthenticationCode.ASK_MASTER_PASSWORD:if(!S)throw new Error("checkLogin should never return ASK_MASTER_PASSWORD for remote accounts");return p?q(e,t,p):((0,O.sendAskAuthenticationEventLog)(e,o.VerificationMode.None),i.dispatch((0,F.updateLoginStepInfoStep)(n.LoginStep.Password)),d.triggerAskMasterPassword(t),n.LoginResultEnum.MasterPasswordMissing);case n.AuthenticationCode.ASK_OTP:return(0,O.sendAskAuthenticationEventLog)(e,o.VerificationMode.Otp2),i.dispatch((0,F.updateLoginStepInfoStep)(n.LoginStep.OTP2)),d.triggerOpenSessionOTPSent({hasU2F:!1}),n.LoginResultEnum.OTPMissing;case n.AuthenticationCode.ASK_OTP_FOR_NEW_DEVICE:const{otpType:r}=i.getAccountInfo();return(0,O.sendAskAuthenticationEventLog)(e,r===l.OtpType.OTP_NEW_DEVICE?o.VerificationMode.Otp1:o.VerificationMode.Otp2),i.dispatch((0,F.updateLoginStepInfoStep)(n.LoginStep.OTP1)),d.triggerOpenSessionOTPForNewDeviceRequired(),n.LoginResultEnum.OTPMissing;case n.AuthenticationCode.ASK_TOKEN:if(S=await a.getInstance().user.accountExistsLocally(),S)throw new Error("Unexpected local account presence during email token step");return await(0,K.requestEmailTokenVerification)(i,{login:t}),(0,O.sendAskAuthenticationEventLog)(e,o.VerificationMode.EmailToken),i.dispatch((0,F.updateLoginStepInfoStep)(n.LoginStep.OTPToken)),d.triggerOpenSessionTokenSent({isResendAction:!1,login:t}),n.LoginResultEnum.TokenMissing;case n.AuthenticationCode.USE_LOCAL_UKI:if((0,v.ukiSelector)(i.getState()))return ee(e,g.PersistData.PERSIST_DATA_YES);throw new Error(n.AuthenticationCode[n.AuthenticationCode.UNKNOWN_UKI]);case n.AuthenticationCode.ASK_DASHLANE_AUTHENTICATOR:if(S=await a.getInstance().user.accountExistsLocally(),S)throw new Error("Unexpected local account presence during dashlane authenticator step");return(0,O.sendAskAuthenticationEventLog)(e,o.VerificationMode.AuthenticatorApp),i.dispatch((0,F.updateLoginStepInfoStep)(n.LoginStep.DashlaneAuthenticator)),d.triggerOpenSessionDashlaneAuthenticator(),n.LoginResultEnum.DashlaneAuthenticatorApprovalMissing;default:throw new Error(n.AuthenticationCode[n.AuthenticationCode.UNKNOWN_ERROR])}}catch(e){if(d.getAuthenticationCodeFromError(e)===n.AuthenticationCode.USER_DOESNT_EXIST){let r;try{r=await(0,K.requestAccountCreation)(i,{login:t})}catch{}if(void 0!==r&&!(0,K.isApiError)(r)&&r.ssoServiceProviderUrl){const e=new Error(n.AuthenticationCode[n.AuthenticationCode.USER_DOESNT_EXIST_SSO]);d.triggerOpenSessionFailed(e)}else d.triggerOpenSessionFailed(e)}else d.triggerOpenSessionFailed(e);throw e}}(e,t,r),openSessionWithToken:(t,r,o,i,s)=>async function(e,t,r,o,i,s){try{const{storeService:c,sessionService:u}=e;t=(0,y.normalizeEmail)(t),await x(e,t,r),await function(e){if(!e)throw new Error(n.AuthenticationCode[n.AuthenticationCode.EMPTY_TOKEN]);if(6!==e.length)throw new Error(n.AuthenticationCode[n.AuthenticationCode.TOKEN_NOT_VALID])}(o);if(await u.getInstance().user.accountExistsLocally())throw new Error(n.AuthenticationCode[n.AuthenticationCode.TOKEN_PROVIDED_FOR_LOCAL_SESSION]);if(await a.registerDeviceWithToken(c,i,(0,g.makeEmailToken)(o),!1,t,s)!==n.AuthenticationCode.ASK_MASTER_PASSWORD)throw new Error("unexpected status from verifyOtpOrToken");return r?q(e,t,r,{isDataPersisted:i,loginType:"MasterPassword"}):(d.triggerAskMasterPassword(t),n.LoginResultEnum.MasterPasswordMissing)}catch(t){throw oe(t)&&(0,O.sendEmailTokenErrorLog)(e),d.triggerOpenSessionFailed(t),t}}(e,t,r,o,i,s),openSessionWithDashlaneAuthenticator:(t,r,o,i)=>async function(e,t,r,o,i){try{const{storeService:s,sessionService:c}=e;t=(0,y.normalizeEmail)(t),await x(e,t,r);if(await c.getInstance().user.accountExistsLocally())throw new Error(n.AuthenticationCode[n.AuthenticationCode.DASHLANE_AUTHENTICATOR_ASKED_FOR_LOCAL_SESSION]);const u=await a.registerDeviceWithDashlaneAuthenticator(s,o,i);if(u===n.AuthenticationCode.DASHLANE_AUTHENTICATOR_LOGIN_CANCELLED)return(0,O.sendDashlaneAuthenticatorErrorLog)(e),n.LoginResultEnum.DashlaneAuthenticatorApprovalCancelled;if(u!==n.AuthenticationCode.ASK_MASTER_PASSWORD)throw new Error("unexpected status from verifyDashlaneAuthenticatorPush");return r?q(e,t,r,{isDataPersisted:o,loginType:"MasterPassword"}):(d.triggerAskMasterPassword(t),n.LoginResultEnum.MasterPasswordMissing)}catch(t){ne(t)&&(0,O.sendDashlaneAuthenticatorErrorLog)(e),d.triggerOpenSessionFailed(t)}}(e,t,r,o,i),cancelDashlaneAuthenticatorRegistration:()=>(a.cancelRegistrationWithDashlaneAuthenticator(),Promise.resolve()),openSessionWithOTP:(t,r,o,i,a)=>async function(e,t,r,o,i,a){const{storageService:p,storeService:S,sessionService:m,applicationModulesAccess:A}=e;try{t=(0,y.normalizeEmail)(t),await x(e,t,r),await ae(o);if(!await m.getInstance().user.accountExistsLocally())return Y(e,t,r,o,i,void 0,a);if(S.dispatch((0,u.updateisUsingBackupCode)(a)),S.getAccountInfo().otpType!==l.OtpType.OTP_LOGIN)throw new Error(n.AuthenticationCode[n.AuthenticationCode.OTP_PROVIDED_FOR_LOCAL_NON_OTP_SESSION]);const E=await(0,s.convertTokenToAuthTicket)(S,(0,g.makeOTP)(o));if(!1===E.success){const{error:{code:e,message:t}}=E;if(e===n.AuthenticationCode.BUSINESS_ERROR)throw new Error(t);throw new Error(n.AuthenticationCode[e])}const f=E.authTicket;if(await c.completeLogin(S,p,A,f,a??!1)!==n.AuthenticationCode.ASK_MASTER_PASSWORD)throw new Error("unexpected status from verifyOtpOrToken");return r?q(e,t,r,{isDataPersisted:i}):(d.triggerAskMasterPassword(t),n.LoginResultEnum.MasterPasswordMissing)}catch(t){if(re(t)){const e=await(0,I.getLocalAccounts)(S,p);d.sendLocalAccounts(e)}throw oe(t)&&(0,O.sendOTPErrorLog)(e,a),d.triggerOpenSessionFailed(t),t}}(e,t,r,o,i,a),openSessionWithOTPForNewDevice:(t,r,o,n,i,a)=>Y(e,t,r,o,n,i,a),openSessionWithMasterPassword:(t,r,o)=>q(e,t,r,o),openSessionResendToken:t=>async function(e,t){await a.askServerToSendToken(e,t),d.triggerOpenSessionTokenSent({isResendAction:!0,login:t})}(e.storeService,t),loadAccountCreationInfos:(t,r,o,n,i,a)=>async function(e,t,r,o,n,i,a){const s=(0,T.secureDeviceName)(o);await x(e,t,r),e.storeService.dispatch((0,_.deviceRegistered)((0,_.makeDeviceRegistrationKeys)(n.accessKey,n.secretKey),a,t)),e.storeService.dispatch((0,A.registerDeviceName)(s)),e.storeService.dispatch((0,A.registerLastSync)(i))}(e,t,r,o,n,i,a)}),t.updateSessionUponLoginAction=x,t.openSessionWithMasterPassword=q;const $=async(e,t,r)=>{const o=(0,b.hasTACAccessInCurrentSpace)(e);if(n.possibleAdminPermissions.includes(r)&&!o)throw e.isAuthenticated()&&await t.close(),new Error(n.AuthenticationCode[n.AuthenticationCode.USER_UNAUTHORIZED])},Q=async(e,t)=>{const r=e.getState(),o=(0,B.pairingIdSelector)(r);d.triggerSessionOpened(e,t,o)},X=(e,t)=>{const{login:r,persistData:o,sessionStartTime:n}=e.getAccountInfo();o===g.PersistData.PERSIST_DATA_YES&&((0,S.storeUserPublicSetting)(r,"lastSuccessfulLoginTime",n),void 0!==t?.triggeredByRememberMeType&&"disabled"!==t?.triggeredByRememberMeType||(0,S.storeUserPublicSetting)(r,"lastMasterPasswordOpenSessionTimestamp",n))},J=async e=>{await e.accountExistsLocally()?await e.attemptSync(o.Trigger.Login):await e.sync(o.Trigger.InitialLogin)},Z=async e=>{const{sessionService:t,storeService:r}=e,o=t.getInstance().user,i=r.getState(),a=(0,L.recoveryInProgressSelector)(i);if(void 0!==(0,N.ssoMigrationInfoSelector)(i).migration||a)return!0;const s=!await o.accountExistsLocally(),c=(0,h.changeMPinProgressSelector)(i);if(s||c){try{await J(o)}catch(e){throw new Error(n.AuthenticationCode[n.AuthenticationCode.UNKNOWN_SYNC_ERROR])}return!0}return!1};async function ee(e,t,r){const{localDataEncryptorService:o,sessionService:i,storageService:a,storeService:s,applicationModulesAccess:d}=e,{login:u,otpType:l}=s.getAccountInfo();await(0,D.deleteAllLocalUserData)(a,d,u),await(0,f.generateLocalkeyAndSetupEncryptorService)(o,s,i,t),t===g.PersistData.PERSIST_DATA_YES&&(c.cacheOtpStatus(s.getAccountInfo().login,l),await(0,w.persistLocalUsersAuthenticationData)(a,s));const p=i.getInstance().user;await p.refreshSessionData(),r?.requiredPermissions&&await $(s,i,r.requiredPermissions);const S=await(0,k.getDeviceLimitStatus)(e);return"noDeviceLimit"!==S._tag?(await(0,k.startDeviceLimitFlow)(e,S),n.LoginResultEnum.DeviceLimitFlow):te(e,r)}async function te(e,t){try{const{autoLoginService:r,eventBusService:o,sessionService:a,storeService:s,storageService:c,wsService:d}=e,l=a.getInstance().user,S=s.getState(),g=(0,R.userLoginSelector)(S);s.dispatch((0,p.confirmUserAuthentication)()),X(s,t);const A=await Z(e);if(await(0,m.getAndTriggerRefreshAccountInfo)(s,a,d),Q(s,c),!1===A)try{await J(l)}catch(e){throw new Error(n.AuthenticationCode[n.AuthenticationCode.UNKNOWN_SYNC_ERROR])}const y=await(0,I.getLocalAccounts)(s,c);(0,i.sendLocalAccounts)(y);const E="webauthn"!==(0,U.getLocalAccountRememberMeType)(g);s.getUserSession().rememberMasterPassword&&E&&r.initialize(),s.getUserSession().shouldRememberMeForSSO&&E&&(await(0,U.persistLocalAccountRememberMeType)(s,"sso"),s.dispatch((0,V.setRememberMeTypeAction)("sso"))),o.sessionOpened({login:g}),"autologin"!==t?.triggeredByRememberMeType&&s.dispatch((0,u.updateLastMasterPasswordCheck)());const f=(0,R.nodePremiumStatusSelector)(S);return f&&"in_team"===f.b2bStatus?.statusCode&&l.startPeriodic2FAInfoRefresh(),await(0,C.refreshTwoFactorAuthenticationInfoService)(s,d),s.dispatch((0,u.updateSessionDidOpen)(!0)),n.LoginResultEnum.LoggedIn}catch(t){const{storeService:r}=e;throw r.dispatch((0,p.userAuthenticationFailed)()),r.dispatch((0,u.updateSessionDidOpen)(!1)),t}}t.sessionDidOpen=te;const re=e=>e&&"object"==typeof e&&e.message===n.AuthenticationCode[n.AuthenticationCode.DEVICE_NOT_REGISTERED],oe=e=>e?.message&&P.TokenOrOTPErrorCode.includes(e.message),ne=e=>e?.message&&P.DashlaneAuthenticatorErrorCode.includes(e.message),ie=async(e,t,r,o,n)=>{if(n)try{return await c.checkLogin(e,t,r)}catch(e){if(!re(e))throw e}const i=(0,v.ukiSelector)(e.getState());return i?a.checkLoginWithUki(e,o,i):a.requestDeviceRegistration(e)};function ae(e){if(!e||0===e.length)throw new Error(n.AuthenticationCode[n.AuthenticationCode.EMPTY_OTP])}var se;!function(e){e[e.AUTHORIZED=0]="AUTHORIZED",e[e.FORBIDDEN=1]="FORBIDDEN"}(se=t.DifferentLoginAuthorized||(t.DifferentLoginAuthorized={}))},73106:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.loginViaSSO=void 0;const o=r(36272),n=r(32626),i=r(751),a=r(56915),s=r(50058),c=r(16373),d=r(28445),u=r(88610),l=r(19399),p=r(64910),S=r(33769),g=r(16038),m=r(56668),A=r(46298),y=r(16356),E=r(70414),f=r(25576),T=r(16593),v=r(38981),h=r(17387),_=r(62712),I=r(61259),C=r(19083),D=r(28287),O=r(86797),P=r(7624),R=r(658),N=r(90235),L=r(70252),b=r(95623);t.loginViaSSO=async function(e,t){const{sessionService:r,storeService:a}=e,{ssoServiceProviderKey:s,exist:u,ssoToken:p,consents:S,currentAuths:g=n.SsoMigrationServerMethod.SSO,expectedAuths:m=n.SsoMigrationServerMethod.SSO,inStore:A,anonymousUserId:y}=t;try{const E=(0,d.normalizeEmail)(t.login),f=e.storeService.getUserLogin();if(f&&E!==f){const e=new Error("SSO Login flow with previous login attempt data is prohibited!");throw e._type=n.LoginViaSsoCode.SSO_LOGIN_CORRUPT,e}const T=(0,l.secureDeviceName)(t.deviceName),v={...t,login:E,deviceName:T};if(!(s&&E||A))return a.dispatch((0,c.addNewLoginNotification)({type:n.LoginNotificationType.SSO_SETUP_ERROR})),(0,I.makeReturnErrorObject)(n.LoginViaSsoCode.EMPTY_LOGIN);if(!u){const t={ssoServiceProviderKey:s,login:E,deviceName:T,ssoToken:p,consents:S,anonymousUserId:y};return await(0,i.createSSOAccount)(e,t)}if(!(0,I.isSupportedTransitionFlow)(g,m))return a.dispatch((0,c.addNewLoginNotification)({type:n.LoginNotificationType.SSO_SETUP_ERROR})),(0,I.makeReturnErrorObject)(n.LoginViaSsoCode.UNSUPPORTED_TRANSITION);if(g===n.SsoMigrationServerMethod.MP&&m===n.SsoMigrationServerMethod.SSO)return await U(e,v);if(g===n.SsoMigrationServerMethod.SSO&&m===n.SsoMigrationServerMethod.MP){const e={ssoUser:!0,migration:o.AuthenticationFlowContracts.SSOMigrationType.SSO_TO_MP};a.dispatch((0,P.storeSSOSettings)(e)),v.requiredPermissions=null}r.setInstance(E,void 0);return await r.getInstance().user.accountExistsLocally()?await M(e,v):await w(e,v)}catch(t){return function({services:e,error:t}){return(0,L.sendExceptionLog)({error:t}),b.default.log(t.message,t),(0,R.sendSsoLoginErrorLog)(e),e.storeService.dispatch((0,c.addNewLoginNotification)({type:n.LoginNotificationType.UNKNOWN_ERROR,message:t.message})),(0,I.makeReturnErrorObject)("_type"in t&&t._type||n.LoginViaSsoCode.UNKNOWN_ERROR,t.message)}({services:e,error:t})}};const U=async(e,t)=>{const{storeService:r}=e;let{ssoServiceProviderKey:i,ssoToken:a}=t;const{login:s}=t,{isAuthenticated:d,otpType:l}=r.getAccountInfo();if(t.inStore){const e=(0,v.ssoSettingsSelector)(r.getState());if(i=e.ssoServiceProviderKey,a=e.ssoToken,!i||!a)return r.dispatch((0,c.addNewLoginNotification)({type:n.LoginNotificationType.SSO_SETUP_ERROR})),(0,I.makeReturnErrorObject)(n.LoginViaSsoCode.SSO_VERIFICATION_FAILED)}if(!d){const t={ssoUser:!0,serviceProviderUrl:"",ssoServiceProviderKey:i,ssoToken:a,migration:o.AuthenticationFlowContracts.SSOMigrationType.MP_TO_SSO};r.dispatch((0,P.storeSSOSettings)(t));return(0,u.makeLoginController)(e).openSession(s),r.dispatch((0,c.addNewLoginNotification)({type:n.LoginNotificationType.RELOGIN_NEEDED})),(0,I.makeReturnErrorObject)(n.LoginViaSsoCode.INNACTIVE_SESSION)}if(l===O.OtpType.NO_OTP){const{success:e}=await(0,D.convertTokenToAuthTicket)(r,(0,h.makeSsoToken)(a));if(!e)return r.dispatch((0,c.addNewLoginNotification)({type:n.LoginNotificationType.SSO_SETUP_ERROR})),(0,I.makeReturnErrorObject)(n.LoginViaSsoCode.SSO_VERIFICATION_FAILED)}const p={newPassword:i,flow:n.ChangeMPFlowPath.MP_TO_SSO},S=await(0,C.changeMasterPassword)(e,p);return!1===S.success?(r.dispatch((0,c.addNewLoginNotification)({type:n.LoginNotificationType.UNKNOWN_ERROR,message:S.error.code})),S):(r.dispatch((0,P.resetSSOSettings)()),await(0,N.markNotificationAsUnseen)(e,n.NotificationName.MpToSsoMigrationDoneDialog),(0,I.successResponse)())},M=async(e,{login:t,ssoServiceProviderKey:r,ssoToken:o,requiredPermissions:i,shouldRememberMeForSSO:s})=>{const{storeService:d}=e,l=(0,a.getDeviceIdSelector)(d.getState(),t);if(null===l)throw new Error(n.AuthenticationCode[n.AuthenticationCode.DEVICE_NOT_REGISTERED]);const E=await(0,D.convertTokenToAuthTicket)(d,(0,h.makeSsoToken)(o));if(!1===E.success){const{error:{message:e}}=E;return d.dispatch((0,c.addNewLoginNotification)({type:n.LoginNotificationType.SSO_SETUP_ERROR})),(0,I.makeReturnErrorObject)(n.LoginViaSsoCode.SSO_VERIFICATION_FAILED,e)}const T=E.authTicket,v=await(0,_.completeLoginWithAuthTicket)(d,{login:t,deviceAccessKey:l,authTicket:T});if((0,A.isApiError)(v))return(0,I.formatAPIError)(v);const{masterPasswordEncryptorService:C,remoteDataEncryptorService:O}=e,{ssoServerKey:P,remoteKeys:R}=v,N=(0,g.base64ToBuffer)(P),L=R.filter((e=>"sso"===e.type))[0];let b;try{const e=(0,g.base64ToBuffer)(r),t=(0,S.getEncryptionKeyBuffer)(e,N,{skipDerivation:!0});b=(0,g.arrayBufferToText)(t);const o=(0,p.getNoDerivationCryptoConfig)();C.setInstance({raw:b},"",o);const n=await C.getInstance().decrypt(L.key),i=(0,m.deflatedUtf8ToUtf16)(n,{skipUtf8Decoding:!0,skipInflate:!0});O.setInstance({raw:i},"",o),d.dispatch((0,y.updateRemoteKey)(i))}catch(e){return{success:!1,error:{code:n.LoginViaSsoCode.WRONG_PASSWORD}}}const U=f.PersistData.PERSIST_DATA_YES;return await(0,u.openSessionWithMasterPassword)(e,t,b,{isDataPersisted:U,serverKey:"",requiredPermissions:i,loginType:"SSO",shouldRememberMeForSSO:s}),(0,I.successResponse)()},w=async(e,t)=>{const{storeService:r,masterPasswordEncryptorService:o,remoteDataEncryptorService:n}=e,{deviceName:i,ssoToken:a,login:c,ssoServiceProviderKey:d,requiredPermissions:l,shouldRememberMeForSSO:p}=t;r.dispatch((0,s.updateLocalUserInfo)(c,{ssoActivatedUser:!0}));const S=f.PersistData.PERSIST_DATA_YES,g={masterPasswordEncryptorService:o,remoteDataEncryptorService:n,ssoServiceProviderKey:d};await(0,E.registerDeviceWithToken)(r,S,(0,h.makeSsoToken)(a),!1,c,i,g);const m=e.storeService.getState(),A=(0,T.masterPasswordSelector)(m);return await(0,u.openSessionWithMasterPassword)(e,c,A,{isDataPersisted:S,serverKey:"",requiredPermissions:l,loginType:"SSO",shouldRememberMeForSSO:p}),(0,I.successResponse)()}},61259:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.triggerServiceProviderUrlRedirect=t.successResponse=t.makeReturnErrorObject=t.formatAPIError=t.isSupportedTransitionFlow=void 0;const o=r(32626),n=r(46298),i=r(81228),a=r(38981);t.isSupportedTransitionFlow=(e,t)=>e===o.SsoMigrationServerMethod.SSO?t===o.SsoMigrationServerMethod.SSO||t===o.SsoMigrationServerMethod.MP:e===o.SsoMigrationServerMethod.MP&&t===o.SsoMigrationServerMethod.SSO;t.formatAPIError=e=>{switch(e.code){case n.B2bSsoUserNotFound:case n.InvalidSsoToken:case n.DeviceNotFound:case n.InvalidAuthTicket:return(0,t.makeReturnErrorObject)(o.LoginViaSsoCode.SSO_VERIFICATION_FAILED,e.message);default:return(0,t.makeReturnErrorObject)(o.LoginViaSsoCode.UNKNOWN_ERROR,e.message)}};t.makeReturnErrorObject=(e,t)=>({success:!1,error:{code:e,message:t}});t.successResponse=(e=o.LoginViaSsoCode.SUCCESS)=>({success:!0,code:e}),t.triggerServiceProviderUrlRedirect=function(e,t){const r=`${(0,a.serviceProviderUrlSelector)(e)}?username=${t}`;return(0,i.emitServiceProviderUrl)(r),r}},30322:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.bootstrap=void 0;const o=r(46430),n=r(57634),i=r(49154),a=r(27331);t.bootstrap=(e,t,r)=>{if(e.register(o.config),r.connectors.deviceLimit){const e=new i.DeviceLimitCapabilityEventBus(t,r.connectors.deviceLimit),o=(0,a.getDeviceLimitFlowEventsManager)(t.storeService);(0,n.setupDeviceLimitEventBus)(e,o)}}},658:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.sendMasterPasswordLoginErrorLog=t.sendSsoLoginErrorLog=t.sendBiometricLoginErrorLog=t.sendDashlaneAuthenticatorErrorLog=t.sendOTPErrorLog=t.sendOTPForNewDeviceErrorLog=t.sendEmailTokenErrorLog=t.sendLoginSuccessEventLog=t.sendAskSSOAuthenticationEventLog=t.sendAskBiometricAuthenticationEventLog=t.sendAskAuthenticationEventLog=void 0;const o=r(21877),n=r(17825),i=r(66102),a=r(86797),s=(e,t,r)=>{switch(e){case a.OtpType.NO_OTP:return t?r?o.VerificationMode.AuthenticatorApp:o.VerificationMode.EmailToken:o.VerificationMode.None;case a.OtpType.OTP_NEW_DEVICE:return o.VerificationMode.Otp1;case a.OtpType.OTP_LOGIN:return o.VerificationMode.Otp2;default:return o.VerificationMode.None}},c=async(e,t,r)=>{await(0,i.logEvent)(t,{event:new o.UserAskAuthenticationEvent({mode:e,reason:o.Reason.Login,verificationMode:r})})};t.sendAskAuthenticationEventLog=c.bind(null,o.Mode.MasterPassword),t.sendAskBiometricAuthenticationEventLog=c.bind(null,o.Mode.Biometric),t.sendAskSSOAuthenticationEventLog=c.bind(null,o.Mode.Sso);t.sendLoginSuccessEventLog=async({services:e,isInitial:t,loginType:r})=>{switch(r){case"SSO":await(async(e,t)=>{await(0,i.logEvent)(e,{event:new o.UserLoginEvent({mode:o.Mode.Sso,status:o.Status.Success,isFirstLogin:t,isBackupCode:!1,verificationMode:o.VerificationMode.None})})})(e,t);break;case"Biometric":await(async e=>{await(0,i.logEvent)(e,{event:new o.UserLoginEvent({mode:o.Mode.Biometric,status:o.Status.Success,isFirstLogin:!1,isBackupCode:!1,verificationMode:o.VerificationMode.None})})})(e);break;case"MasterPassword":await(async(e,t)=>{const{otpType:r}=e.storeService.getAccountInfo(),{isUsingBackupCode:n,isUsingDashlaneAuthenticator:a}=e.storeService.getUserSession(),c=s(r,t,a);await(0,i.logEvent)(e,{event:new o.UserLoginEvent({mode:o.Mode.MasterPassword,status:o.Status.Success,isFirstLogin:t,isBackupCode:n,verificationMode:c})})})(e,t);break;case"DeviceToDevice":await(async(e,t)=>{const{otpType:r}=e.storeService.getAccountInfo(),{isUsingBackupCode:n,isUsingDashlaneAuthenticator:a}=e.storeService.getUserSession(),c=s(r,t,a);await(0,i.logEvent)(e,{event:new o.UserLoginEvent({mode:o.Mode.DeviceTransfer,status:o.Status.Success,isFirstLogin:t,isBackupCode:n,verificationMode:c})})})(e,t);break;case"Autologin":case"ARK":case"CreatedPasswordlessAccount":return;default:(0,n.assertUnreachable)(r)}};t.sendEmailTokenErrorLog=async e=>{await(0,i.logEvent)(e,{event:new o.UserLoginEvent({mode:o.Mode.MasterPassword,status:o.Status.ErrorWrongOtp,isFirstLogin:!0,isBackupCode:!1,verificationMode:o.VerificationMode.EmailToken})})};t.sendOTPForNewDeviceErrorLog=async(e,t)=>{const{otpType:r}=e.storeService.getAccountInfo();await(0,i.logEvent)(e,{event:new o.UserLoginEvent({mode:o.Mode.MasterPassword,status:o.Status.ErrorWrongOtp,isFirstLogin:!0,isBackupCode:t,verificationMode:r===a.OtpType.OTP_LOGIN?o.VerificationMode.Otp2:o.VerificationMode.Otp1})})};t.sendOTPErrorLog=async(e,t)=>{await(0,i.logEvent)(e,{event:new o.UserLoginEvent({mode:o.Mode.MasterPassword,status:o.Status.ErrorWrongOtp,isFirstLogin:!1,isBackupCode:t,verificationMode:o.VerificationMode.Otp2})})};t.sendDashlaneAuthenticatorErrorLog=async e=>{await(0,i.logEvent)(e,{event:new o.UserLoginEvent({mode:o.Mode.MasterPassword,status:o.Status.ErrorWrongOtp,isFirstLogin:!0,isBackupCode:!1,verificationMode:o.VerificationMode.AuthenticatorApp})})};t.sendBiometricLoginErrorLog=async e=>{await(0,i.logEvent)(e,{event:new o.UserLoginEvent({mode:o.Mode.Biometric,status:o.Status.ErrorUnknown,isFirstLogin:!1,isBackupCode:!1,verificationMode:o.VerificationMode.None})})};t.sendSsoLoginErrorLog=async e=>{await(0,i.logEvent)(e,{event:new o.UserLoginEvent({mode:o.Mode.Sso,status:o.Status.ErrorInvalidSso,isBackupCode:!1,verificationMode:o.VerificationMode.None})})};t.sendMasterPasswordLoginErrorLog=async(e,t)=>{const{otpType:r}=e.storeService.getAccountInfo(),{isUsingBackupCode:n,isUsingDashlaneAuthenticator:a}=e.storeService.getUserSession(),c=s(r,t,a);await(0,i.logEvent)(e,{event:new o.UserLoginEvent({mode:o.Mode.MasterPassword,status:o.Status.ErrorWrongPassword,isFirstLogin:t,isBackupCode:n,verificationMode:c})})}},69718:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.addLoginNotification=void 0;const o=r(16373);t.addLoginNotification=async function(e,t){const{storeService:r}=e;r.dispatch((0,o.addNewLoginNotification)(t))}},40588:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.bootstrap=void 0;var o=r(30322);Object.defineProperty(t,"bootstrap",{enumerable:!0,get:function(){return o.bootstrap}})},24579:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.setupSubscriptions=void 0;const o=r(58639),n=r(1965),i=r(90622),a=r(9344),s=r(31937),c=r(18216),d=r(56915);t.setupSubscriptions=function(e,t){e.appInitialized.on((async e=>{const r=(0,d.localAccountsInitializedSelector)(t.storeService.getState());if(e.initMode===c.InitMode.FirstInit){const{storageService:e,storeService:r,applicationModulesAccess:c}=t;await(0,n.deviceRemoteDeletion)(r,e,c);const d=await(0,i.getLocalAccounts)(r,e);await(0,s.restoreLastAuthenticatedUser)(t,d),(0,o.sendLocalAccounts)(d),t.storeService.dispatch((0,a.localAccountsListUpdated)(d))}else if(!r){const{storageService:e,storeService:r}=t,n=await(0,i.getLocalAccounts)(r,e);(0,o.sendLocalAccounts)(n),t.storeService.dispatch((0,a.localAccountsListUpdated)(n))}}))}},15606:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DashlaneAuthenticatorErrorCode=t.TokenOrOTPErrorCode=void 0;const o=r(32626);t.TokenOrOTPErrorCode=[o.AuthenticationCode.TOKEN_EXPIRED,o.AuthenticationCode.TOKEN_NOT_VALID,o.AuthenticationCode.TOKEN_TOO_MANY_ATTEMPTS,o.AuthenticationCode.EMPTY_TOKEN,o.AuthenticationCode.OTP_ALREADY_USED,o.AuthenticationCode.OTP_NOT_VALID,o.AuthenticationCode.OTP_TOO_MANY_ATTEMPTS,o.AuthenticationCode.EMPTY_OTP,o.AuthenticationCode.BACKUP_CODE_NOT_VALID],t.DashlaneAuthenticatorErrorCode=[o.AuthenticationCode.DASHLANE_AUTHENTICATOR_LOGIN_CANCELLED,o.AuthenticationCode.DASHLANE_AUTHENTICATOR_PUSH_NOTIFICATION_DENIED,o.AuthenticationCode.FAILED_TO_CONTACT_AUTHENTICATOR_DEVICE]},13465:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.config=void 0;const o=r(90822),n=r(96205),i=r(85316),a=r(69718);t.config={commands:{addLoginNotification:{handler:a.addLoginNotification},clearAllStoredLoginNotification:{handler:n.clearAllStoredLoginNotification}},queries:{getLoginNotifications:{selector:o.loginNotificationListSelector}},liveQueries:{liveLoginNotifications:{operator:i.loginNotificationList$}}}},97046:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.bootstrap=void 0;const o=r(13465);t.bootstrap=e=>{e.register(o.config)}},39952:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.bootstrap=void 0;var o=r(97046);Object.defineProperty(t,"bootstrap",{enumerable:!0,get:function(){return o.bootstrap}})},85316:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.loginNotificationList$=void 0;const o=r(18948),n=r(3343),i=r(90822);t.loginNotificationList$=()=>(0,o.pipe)((0,n.map)(i.loginNotificationListSelector),(0,n.distinctUntilChanged)())},90822:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.loginNotificationListSelector=void 0;t.loginNotificationListSelector=e=>e.inMemoryInterSessionUnsynced.loginNotification},96205:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.clearAllStoredLoginNotification=void 0;const o=r(16373);t.clearAllStoredLoginNotification=async e=>(e.storeService.dispatch((0,o.resetAllLoginNotification)()),{success:!0})},90014:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.config=void 0;const o=r(16088),n=r(85493),i=r(93069),a=r(6737);t.config={commands:{updateLoginStepInfo:{handler:i.updateLoginStepInfoHandler},resetLoginStepInfo:{handler:a.resetLoginStepInfoHandler}},queries:{getLoginStepInfo:{selector:o.loginStepInfoSelector}},liveQueries:{liveLoginStepInfo:{operator:n.liveLoginStepInfo$}}}},35924:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.resetLoginStepInfo=t.updateLoginStepInfoStep=t.updateLoginStepInfoLogin=t.RESET_LOGIN_STEP_INFO=t.UPDATE_LOGIN_STEP_INFO_STEP=t.UPDATE_LOGIN_STEP_INFO_LOGIN=void 0,t.UPDATE_LOGIN_STEP_INFO_LOGIN="UPDATE_LOGIN_STEP_INFO_LOGIN",t.UPDATE_LOGIN_STEP_INFO_STEP="UPDATE_LOGIN_STEP_INFO_STEP",t.RESET_LOGIN_STEP_INFO="RESET_LOGIN_STEP_INFO";t.updateLoginStepInfoLogin=e=>({type:t.UPDATE_LOGIN_STEP_INFO_LOGIN,login:e});t.updateLoginStepInfoStep=e=>({type:t.UPDATE_LOGIN_STEP_INFO_STEP,step:e});t.resetLoginStepInfo=()=>({type:t.RESET_LOGIN_STEP_INFO})},16088:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.loginStepInfoSelector=void 0;t.loginStepInfoSelector=e=>{const t=e.userSession.localSettings.loginStepInfo;return t?.step?t:null}},24413:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.bootstrap=void 0;const o=r(90014);t.bootstrap=e=>{e.register(o.config)}},6737:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.resetLoginStepInfoHandler=void 0;const o=r(35924);t.resetLoginStepInfoHandler=e=>(e.storeService.dispatch((0,o.resetLoginStepInfo)()),e.sessionService.getInstance().user.persistLocalSettings(),Promise.resolve())},93069:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.updateLoginStepInfoHandler=void 0;const o=r(35924);t.updateLoginStepInfoHandler=(e,t)=>(void 0!==t.login&&e.storeService.dispatch((0,o.updateLoginStepInfoLogin)(t.login)),void 0!==t.step&&e.storeService.dispatch((0,o.updateLoginStepInfoStep)(t.step)),e.sessionService.getInstance().user.persistLocalSettings(),Promise.resolve())},37824:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.bootstrap=void 0;var o=r(24413);Object.defineProperty(t,"bootstrap",{enumerable:!0,get:function(){return o.bootstrap}})},85493:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.liveLoginStepInfo$=void 0;const o=r(18948),n=r(3343),i=r(16088);t.liveLoginStepInfo$=()=>(0,o.pipe)((0,n.map)(i.loginStepInfoSelector),(0,n.distinctUntilChanged)())},82413:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Debugger=void 0;const o=r(4939),n=r(4407),i=([e,...t])=>{let r="",o=[];"string"==typeof e?r=e:o=[e],o=[...o,...t];const n=(e=>e.reduce(((e,t)=>{const r=Object.keys(e).length;return{...e,[r]:t}}),{}))(o);return{message:r,details:n}};const a=function(){const e=e=>(...t)=>{const r={...i(t),level:e};(0,o.log)(r)};return{log:e(n.LogLevel.Debug),info:e(n.LogLevel.Info),warn:e(n.LogLevel.Warn),error:e(n.LogLevel.Error)}}();t.Debugger=a,t.default=a},4939:function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.redirectConsoleLogs=t.logVerbose=t.logDebug=t.logInfo=t.logWarn=t.logError=t.log=void 0;const o=r(16516),n=r(48749),i=r(43051),a=r(4407),s=r(82569),c=r(17825),d=r(32588);let u=null;const l=e=>t=>{const{level:r=a.LogLevel.Error}=t,o=(e=>{switch(e){case a.LogLevel.Error:return console.error;case a.LogLevel.Warn:return console.warn;case a.LogLevel.Info:return console.info;case a.LogLevel.Verbose:return console.log;case a.LogLevel.Debug:return console.debug;default:return(0,c.assertUnreachable)(e)}})(r),n=e(t);o.call(this,n)},p=(0,s.formatLogEntry)(s.formatLogEntryDetail),S=(e,t)=>r=>o=>t(o[e])&&r(o),g=S("tag",((e=[])=>{const t=n.config.LOG_TAGS||[],r="string"==typeof t?[t]:[...t],o="string"==typeof e?[e]:[...e];return!r.length||r.some((e=>o.includes(e)))})),m=S("level",(e=>e>=n.config.LOG_LEVEL)),A=(0,o.pipe)((e=>t=>(u||l(e))(t)),m,g)(p);A({message:"~~~ Logs activated ~~~",level:a.LogLevel.Info,tag:[d.LOGS_LOG_TAG,d.DEBUGGER_LOG_TAG]}),t.log=A,t.logError=(0,i.withErrorLevel)(A),t.logWarn=(0,i.withWarnLevel)(A),t.logInfo=(0,i.withInfoLevel)(A),t.logDebug=(0,i.withDebugLevel)(A),t.logVerbose=(0,i.withVerboseLevel)(A);t.redirectConsoleLogs=e=>(u=e,()=>{u=null})},43051:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.withVerboseLevel=t.withDebugLevel=t.withInfoLevel=t.withWarnLevel=t.withErrorLevel=t.withTag=t.withLevel=void 0;const o=r(4407),n=(e,t)=>r=>o=>r({[e]:t,...o});t.withLevel=e=>n("level",e);t.withTag=e=>n("tag",e),t.withErrorLevel=(0,t.withLevel)(o.LogLevel.Error),t.withWarnLevel=(0,t.withLevel)(o.LogLevel.Warn),t.withInfoLevel=(0,t.withLevel)(o.LogLevel.Info),t.withDebugLevel=(0,t.withLevel)(o.LogLevel.Debug),t.withVerboseLevel=(0,t.withLevel)(o.LogLevel.Verbose)},82569:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.formatLogEntryDetail=t.formatLogEntry=void 0;const o=r(92263),n=r(4407),i=":",a=" ",s="|";function c(e){const{stack:t}=e;let r=`${e}`;if(t&&"string"==typeof t){t.substr(0,t.indexOf("\n"))===r&&(r="")}return`${r}${r?`\n${t}`:t}`}const d={[n.LogLevel.Error]:"(e)",[n.LogLevel.Warn]:"(w)",[n.LogLevel.Info]:"(i)",[n.LogLevel.Debug]:"(d)",[n.LogLevel.Verbose]:"(v)"};t.formatLogEntry=e=>t=>{const{details:r={},level:o=n.LogLevel.Debug,message:c,tag:u=[]}=t,l=function(e){const t=Array.isArray(e)?e:[e];return t.length?` [${t.join(s)}]`:""}(u),p=d[o],S=Boolean(c),g=S?` ${c}`:"",m=function(e,t,r){return Object.keys(t).reduce(((o,n)=>!Number.isInteger(parseInt(n,10))&&r?`${o}${a}${n}${i}${e(t[n])}`:`${o}${a}${e(t[n])}`),"")}(e,r,S);return`${p}${l}${g}${m}`};t.formatLogEntryDetail=e=>(0,o.isCarbonError)(e)?function(e){const t=JSON.stringify(e.getAdditionalInfo()),r=t?`\n${t}`:"";return`${c(e)}${r}`}(e):e instanceof Error?c(e):"object"==typeof e?JSON.stringify(e):String(e)},95623:function(e,t,r){var o=this&&this.__createBinding||(Object.create?function(e,t,r,o){void 0===o&&(o=r);var n=Object.getOwnPropertyDescriptor(t,r);n&&!("get"in n?!t.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,o,n)}:function(e,t,r,o){void 0===o&&(o=r),e[o]=t[r]}),n=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||o(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),t.withWarnLevel=t.withVerboseLevel=t.withTag=t.withLevel=t.withInfoLevel=t.withErrorLevel=t.withDebugLevel=t.Silent=t.LogLevel=t.redirectConsoleLogs=t.logWarn=t.logVerbose=t.logInfo=t.logError=t.logDebug=t.log=void 0;const i=r(82413);t.default=i.Debugger;var a=r(4939);Object.defineProperty(t,"log",{enumerable:!0,get:function(){return a.log}}),Object.defineProperty(t,"logDebug",{enumerable:!0,get:function(){return a.logDebug}}),Object.defineProperty(t,"logError",{enumerable:!0,get:function(){return a.logError}}),Object.defineProperty(t,"logInfo",{enumerable:!0,get:function(){return a.logInfo}}),Object.defineProperty(t,"logVerbose",{enumerable:!0,get:function(){return a.logVerbose}}),Object.defineProperty(t,"logWarn",{enumerable:!0,get:function(){return a.logWarn}}),Object.defineProperty(t,"redirectConsoleLogs",{enumerable:!0,get:function(){return a.redirectConsoleLogs}}),n(r(82413),t);var s=r(4407);Object.defineProperty(t,"LogLevel",{enumerable:!0,get:function(){return s.LogLevel}}),Object.defineProperty(t,"Silent",{enumerable:!0,get:function(){return s.Silent}});var c=r(43051);Object.defineProperty(t,"withDebugLevel",{enumerable:!0,get:function(){return c.withDebugLevel}}),Object.defineProperty(t,"withErrorLevel",{enumerable:!0,get:function(){return c.withErrorLevel}}),Object.defineProperty(t,"withInfoLevel",{enumerable:!0,get:function(){return c.withInfoLevel}}),Object.defineProperty(t,"withLevel",{enumerable:!0,get:function(){return c.withLevel}}),Object.defineProperty(t,"withTag",{enumerable:!0,get:function(){return c.withTag}}),Object.defineProperty(t,"withVerboseLevel",{enumerable:!0,get:function(){return c.withVerboseLevel}}),Object.defineProperty(t,"withWarnLevel",{enumerable:!0,get:function(){return c.withWarnLevel}})},4407:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Silent=t.LogLevel=void 0,function(e){e[e.Verbose=0]="Verbose",e[e.Debug=10]="Debug",e[e.Info=20]="Info",e[e.Warn=30]="Warn",e[e.Error=40]="Error"}(t.LogLevel||(t.LogLevel={})),t.Silent=100},59398:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.config=void 0;const o=r(66102);t.config={commands:{logEvent:{handler:o.logEvent},logPageView:{handler:o.logPageView}},queries:{},liveQueries:{}}},38912:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.updateEventLoggerVirtualStoreState=t.UPDATE_EVENT_LOGGER_STATE=t.createEventLoggerVirtualStore=t.CREATE_EVENT_LOGGER_VIRTUAL_STORE=void 0,t.CREATE_EVENT_LOGGER_VIRTUAL_STORE="CREATE_EVENT_LOGGER_VIRTUAL_STORE";t.createEventLoggerVirtualStore=({storeName:e,initialState:r})=>({type:t.CREATE_EVENT_LOGGER_VIRTUAL_STORE,storeName:e,initialState:r}),t.UPDATE_EVENT_LOGGER_STATE="UPDATE_EVENT_LOGGER_STATE";t.updateEventLoggerVirtualStoreState=({storeName:e,updater:r})=>({type:t.UPDATE_EVENT_LOGGER_STATE,storeName:e,updater:r})},52895:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.bootstrap=void 0;const o=r(59398);t.bootstrap=(e,t)=>{e.register(o.config),t.eventLoggerService.initRepository()}},87911:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.decryptEvents=t.encryptEvents=void 0;const o=r(72365),n=r(91301),i=r(65675),a=r(56668);t.encryptEvents=async function(e,t,r){const s=JSON.stringify(t),c=(0,a.deflateUtf16)(s);return await async function({storeService:e,encryptionKey:t,data:r}){const a=(0,o.makeDataEncryptorService)(e),{cryptoConfig:s}=(0,i.parsePayload)(n.CRYPTO_NODERIVATION_HMAC64);a.setInstance({raw:t},"",s);const c=await a.getInstance().encrypt(r);return a.close(),c}({storeService:e,encryptionKey:r,data:c})},t.decryptEvents=async function(e,t,r){const n=await async function({storeService:e,encryptedData:t,encryptionKey:r}){const n=(0,o.makeDataEncryptorService)(e);n.setInstance({raw:r},"");const i=await n.getInstance().decrypt(t);return n.close(),i}({storeService:e,encryptedData:t,encryptionKey:r}),i=(0,a.inflateUtf16)(n);return JSON.parse(i)}},26415:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.chunkArray=t.getOsContext=t.getOsVersion=t.getOsType=t.getBrowserContext=t.getAppContext=t.applicationBuildTypeToHermesBuildType=t.platformStringToAppPlatform=t.createLogger=void 0;const o=r(21877),n=r(32626),i=r(72609),a=r(48749),s=r(17825);t.createLogger=e=>{const{eventLoggerService:t}=e,r=t.getRepository();return{logger:r.createLogger(),logRepository:r}};t.platformStringToAppPlatform=e=>{switch(e){case"server_standalone":case"server_carbon_unknown":case"server_carbon_tests":return o.Platform.Saex;case"server_leeloo_dev":case"server_leeloo":case"server_tac":return o.Platform.Web;default:(0,s.assertUnreachable)(e,`Hermes Web SDK: Unsupported platform "${e}" detected. This platform is not supported by the Hermes Web SDK or Styx API.`)}};t.applicationBuildTypeToHermesBuildType=e=>{switch(e){case n.ApplicationBuildType.DEV:return o.BuildType.Dev;case n.ApplicationBuildType.QA:return o.BuildType.Qa;case n.ApplicationBuildType.NIGHTLY:return o.BuildType.Nightly;default:return o.BuildType.Production}};t.getAppContext=e=>{const r=e.getPlatformInfo(),{buildType:o}=r;return{platform:(0,t.platformStringToAppPlatform)(r.platformName),version:(n=r.appVersion,i=a.config.MANIFEST_VERSION,i?n+"-mv"+i:n),build_type:(0,t.applicationBuildTypeToHermesBuildType)(o)};var n,i};t.getBrowserContext=()=>({name:i.browser.getBrowserName(),version:i.browser.getBrowserVersion(),user_agent:i.navigator.getNavigator().userAgent});t.getOsType=e=>{let t=o.OsType.Other;const r=e.os.toLowerCase().replace(/[ -/]+/g,"_");return Object.values(o.OsType).map((e=>e.toString())).includes(r)&&(t=r),t};t.getOsVersion=e=>{const t="Mac OS"===e.os?e.osVersion.replace("OS_X_","").replace(/_/g,"."):e.osVersion,r=/([0-9]{1,3}(?:\.[0-9]{0,4}){0,2})/.exec(t);return r&&r.length>=2?r[1]:"0"};t.getOsContext=e=>{const r=e.getPlatformInfo();return{type:(0,t.getOsType)(r),version:(0,t.getOsVersion)(r),locale:r.lang}},t.chunkArray=function e(t,r){return t.length<=r?[t]:[t.slice(0,r),...e(t.slice(r),r)]}},74412:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.makeEventLoggerService=t.bootstrap=void 0;const o=r(21877),n=r(48749),i=r(26415),a=r(2246),s=r(87564),c=r(10460),d=r(78671),u=r(99921);var l=r(52895);Object.defineProperty(t,"bootstrap",{enumerable:!0,get:function(){return l.bootstrap}});t.makeEventLoggerService=e=>{let t=null;const r=()=>{if(!t)throw new Error("makeEventLoggerService: You must call initRepository() before getting the repository instance");const r=e.storeService.getUserSession();return(r.analyticsIds?.userAnalyticsId||r.analyticsIds?.deviceAnalyticsId)&&t.setTrackingInfo(r.analyticsIds.userAnalyticsId,r.analyticsIds.deviceAnalyticsId),t};return{initRepository:()=>{const r=e.storeService,s=(0,i.getAppContext)(r),c=(0,i.getOsContext)(r),d=(0,i.getBrowserContext)(),l=(0,a.getCommonAppSetting)("installationId"),p=new u.EventLoggerStoreFactory(r);t=new o.LogRepository(s,c,d,l,void 0,!1,p);const S=r.getUserSession();(S.analyticsIds?.userAnalyticsId||S.analyticsIds?.deviceAnalyticsId)&&t.setTrackingInfo(S.analyticsIds.userAnalyticsId,S.analyticsIds.deviceAnalyticsId),3===n.config.MANIFEST_VERSION&&t.setServiceWorkerStartTime((new Date).toISOString())},getRepository:r,logEvent:async o=>{const{interactionDataConsent:n}=await(0,d.getGlobalExtensionSettings)(e);if(!(!1!==n))return;return r().createLogger().logEvent(o),(0,c.storeEventsInQueue)(e,t)},logSync:async o=>{const{interactionDataConsent:n}=await(0,d.getGlobalExtensionSettings)(e);if(!(!1!==n))return;return r().createLogger().logEvent(o),(0,c.storeEventsInQueue)(e,t)},flushEventQueue:()=>(0,s.sendEventQueueToStyx)(e)}}},4296:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.immediatelySendEvents=t.queueEvents=t.queueLogRepositoryEvents=void 0;const o=r(32626),n=r(87564),i=r(10460);async function a(e,t){const r=t.logStorage.containsPriorityEvent();try{if(await(0,i.storeEventsInQueue)(e,t),r){return await(0,n.sendEventQueueToStyx)(e)}return{success:!0,result:o.StyxApiResult.NoBatchesSent}}catch(e){return{success:!1,result:o.StyxApiResult.NoBatchesSent}}}async function s(e,t){try{return await(0,n.immediatelySendEventsToStyx)(e,t)}catch(e){return{success:!1,result:o.StyxApiResult.NoBatchesSent}}}t.queueLogRepositoryEvents=async function(e,t){const{buildType:r}=e.storeService.getPlatformInfo();return r===o.ApplicationBuildType.QA?s(e,t):a(e,t)},t.queueEvents=a,t.immediatelySendEvents=s},19764:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.eventLoggerReducer=void 0;const o=r(38912);t.eventLoggerReducer=(e={},t)=>{switch(t.type){case o.CREATE_EVENT_LOGGER_VIRTUAL_STORE:return{[t.storeName]:t.initialState};case o.UPDATE_EVENT_LOGGER_STATE:return{[t.storeName]:t.updater(e[t.storeName])};default:return e}}},39261:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.styxKeysSelector=void 0;t.styxKeysSelector=e=>e.userSession.sdkAuthentication.styxKeys},87564:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.immediatelySendEventsToStyx=t.sendEventQueueToStyx=void 0;const o=r(32626),n=r(2246),i=r(45956),a=r(76330),s=r(87911),c=r(26415),d=r(10460),u=450;let l=!1;async function p(e,t,r){let o=[];if(!t||0===t.length)return o;const n=(0,a.getMakeStyxApiRequest)(r,i.ApiAuthType.App,i.ApiRequestMethod.POST),s=(0,c.chunkArray)(t,u);try{for(const t of s){if(!(await n(e,{payload:(0,a.getEventsPayload)(t)})).success)break;o=o.concat(t.map((({id:e})=>e)))}}catch{return o}return o}t.sendEventQueueToStyx=async function(e){if(!0===l)return{success:!0,result:o.StyxApiResult.NoBatchesSent};l=!0;const{storageService:t,storeService:r}=e,i=t.getLocalStorage(),a=(0,n.getCommonAppSetting)("eventLoggerQueueKey");if(!await i.itemExists(d.EVENT_QUEUE_STORAGE_KEY))return l=!1,{success:!0,result:o.StyxApiResult.NoBatchesSent};const c=await i.readItem(d.EVENT_QUEUE_STORAGE_KEY);if(!c)return l=!1,{success:!0,result:o.StyxApiResult.NoBatchesSent};if("string"!=typeof c)throw new Error("value of EventLogger.eventQueue is expected to be a string");const u=await(0,s.decryptEvents)(r,c,a),S=u.filter((e=>"anonymous"===e.category)),g=u.filter((e=>"user"===e.category)),m=await p(r,S,"/v1/event/anonymous"),A=await p(r,g,"/v1/event/user"),y=await i.readItem(d.EVENT_QUEUE_STORAGE_KEY);if("string"!=typeof y)throw new Error("value of EventLogger.eventQueue is expected to be a string");const E=(await(0,s.decryptEvents)(r,y,a)).filter((({id:e})=>!(m.includes(e)||A.includes(e)))),f=await(0,s.encryptEvents)(r,E,a);await i.writeItem(d.EVENT_QUEUE_STORAGE_KEY,f);const T=m.length>0||A.length>0,v=0===f.length;let h=o.StyxApiResult.NoBatchesSent;return v?h=o.StyxApiResult.AllBatchesSent:T&&(h=o.StyxApiResult.SomeBatchesSent),l=!1,{success:!0,result:h}},t.immediatelySendEventsToStyx=async function(e,t){const{storeService:r}=e,n=t.logStorage.copy();t.logStorage.removeEvents(n.map((e=>e.id)));const i=n.filter((e=>"anonymous"===e.category)),a=n.filter((e=>"user"===e.category)),s=await p(r,i,"/v1/event/anonymous"),c=await p(r,a,"/v1/event/user"),d=s.length>0||c.length>0,u=s.length+c.length===n.length;let l=o.StyxApiResult.NoBatchesSent;return u?l=o.StyxApiResult.AllBatchesSent:d&&(l=o.StyxApiResult.SomeBatchesSent),{success:!0,result:l}}},66102:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.logToggleAnalyticsEvent=t.logPageView=t.logEvent=void 0;const o=r(21877),n=r(32626),i=r(78671),a=r(26415),s=r(4296),c=r(10460);t.logEvent=async function(e,t){const{interactionDataConsent:r}=await(0,i.getGlobalExtensionSettings)(e);if(!(!1!==r))return{result:n.StyxApiResult.NoBatchesSent,success:!1};const{logger:o,logRepository:c}=(0,a.createLogger)(e);return o.logEvent(t.event),(0,s.queueLogRepositoryEvents)(e,c)},t.logPageView=async function(e,t){const{interactionDataConsent:r}=await(0,i.getGlobalExtensionSettings)(e);if(!(!1!==r))return{result:n.StyxApiResult.NoBatchesSent,success:!1};const{logger:o,logRepository:c}=(0,a.createLogger)(e);return o.logView(t.pageView,t.browseComponent),(0,s.queueLogRepositoryEvents)(e,c)},t.logToggleAnalyticsEvent=async function(e){const{interactionDataConsent:t}=await(0,i.getGlobalExtensionSettings)(e),{logger:r,logRepository:n}=(0,a.createLogger)(e),d=!1!==t;if(d||(0,c.clearEventQueue)(e,n),r.logEvent(new o.UserToggleAnalyticsEvent({isAnalyticsEnabled:d})),!t)try{return(0,s.immediatelySendEvents)(e,n)}catch{return(0,s.queueLogRepositoryEvents)(e,n)}return(0,s.queueLogRepositoryEvents)(e,n)}},10460:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.clearEventQueue=t.storeEventsInQueue=t.EVENT_QUEUE_STORAGE_KEY=void 0;const o=r(2246),n=r(87911);t.EVENT_QUEUE_STORAGE_KEY="EventLogger.eventQueue",t.storeEventsInQueue=async function(e,r){const{storageService:i,storeService:a}=e,s=i.getLocalStorage(),c=(0,o.getCommonAppSetting)("eventLoggerQueueKey"),d=r.logStorage.copy();let u=[];const l=[];if(await s.itemExists(t.EVENT_QUEUE_STORAGE_KEY)){const e=await s.readItem(t.EVENT_QUEUE_STORAGE_KEY);if("string"!=typeof e)throw new Error("value of EventLogger.eventQueue is expected to be a string");e&&(u=await(0,n.decryptEvents)(a,e,c))}u=u.concat(d),u.map((e=>l.filter((t=>t.id===e.id)).length>0?null:l.push(e)));const p=await(0,n.encryptEvents)(a,l,c);await s.writeItem(t.EVENT_QUEUE_STORAGE_KEY,p);const S=d.map((e=>e.id));r.logStorage.removeEvents(S)},t.clearEventQueue=async function(e,r){const{storageService:i,storeService:a}=e,s=i.getLocalStorage(),c=(0,o.getCommonAppSetting)("eventLoggerQueueKey"),d=await(0,n.encryptEvents)(a,[],c);await s.writeItem(t.EVENT_QUEUE_STORAGE_KEY,d);const u=r.logStorage.copy().map((e=>e.id));r.logStorage.removeEvents(u)}},99921:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.EventLoggerStoreFactory=void 0;const o=r(38912);t.EventLoggerStoreFactory=class{constructor(e){this.storeService=e}createStore(e,t){const{storeService:r}=this;return r.dispatch((0,o.createEventLoggerVirtualStore)({storeName:e,initialState:t.initialState})),this.makeStore(e)}getStore(e){if(!this.hasStore(e))throw new Error(`Store ${e} was not found`);return this.makeStore(e)}hasStore(e){const{storeService:t}=this;return e in t.getState().device.eventLogger}makeStore(e){const{storeService:t}=this;return{getState:()=>t.getState().device.eventLogger[e],updateState:r=>t.dispatch((0,o.updateEventLoggerVirtualStoreState)({storeName:e,updater:r}))}}}},33341:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.config=void 0;const o=r(14414);t.config={commands:{logException:{handler:o.logException}},liveQueries:{},queries:{}}},55101:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.bootstrap=void 0;const o=r(33341);t.bootstrap=e=>{e.register(o.config)}},70252:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.sendTypedExceptionLog=t.sendExceptionLog=t.setAllowedToSendExceptionLog=t.bootstrap=void 0;const o=r(74450),n=r(12126),i=r(95623);var a=r(55101);Object.defineProperty(t,"bootstrap",{enumerable:!0,get:function(){return a.bootstrap}});let s=!0;t.setAllowedToSendExceptionLog=e=>s=e,t.sendExceptionLog=async function(e){if(s)try{await(0,o.default)((0,n.default)("carbonException",e))}catch(e){i.Debugger.error(`[Exception] - sendExceptionLog: ${e.message||e}`)}},t.sendTypedExceptionLog=async function(e,t){if(s)try{await(0,o.default)((0,n.default)(e,t))}catch(e){i.Debugger.error(`[Exception] - sendTypedExceptionLog: ${e.message||e}`)}}},12126:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.anonymousSessionId=void 0;const o=r(35088),n=r(32626),i=r(86056),a=r(92263),s=r(48749);function c(e){const r=function(e){const t={...e,codeName:s.config.CODE_NAME,manifestVersion:s.config.MANIFEST_VERSION};return JSON.stringify(t)}(e.additionalInfo);return{action:"logOnline",code:e.code===n.ExceptionCriticality.WARNING?n.ExceptionCriticality.WARNING:n.ExceptionCriticality.ERROR,message:e.message||"",exceptiontype:e.type,functionName:e.funcName,file:e.fileName,legacy:Boolean(e.legacy),line:e.line,stack:e.precisions,sessionId:t.anonymousSessionId,additionalInfo:r,errorCount:1,featureFlips:[],initialUseCaseModule:e.initialUseCaseModule??"carbon",initialUseCaseName:e.initialUseCaseName,useCaseStacktrace:e.useCaseStacktrace??[]}}function d(e,t){const r=t;if(r.error){const t=r.error.precisions&&"string"==typeof r.error.precisions?`${r.error.message}\n${r.error.precisions}`:r.error.message,o=(0,a.isCarbonError)(r.error)?r.error.getAdditionalInfo():{};return c({type:e,message:t,code:r.code||r.error.errorLevel,precisions:r.error.stack,additionalInfo:o,initialUseCaseModule:"carbon",initialUseCaseName:""})}return c(Object.assign({type:e},t))}t.anonymousSessionId=(0,o.v4)(),t.default=function(e,t){return{...(r=(0,i.getPlatformInfo)(),{type:r.platformName,version:r.appVersion,osVersion:r.osVersion,browser:r.browser,browserVersion:r.browserVersion,os:r.os}),...d(e,t)};var r}},74450:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.EXCEPTION_LOG_ENDPOINT=void 0;const o=r(28445),n=r(95623);t.EXCEPTION_LOG_ENDPOINT="https://kck3hlb9.dashlane.com/1/softwarelog/create";const i=10;t.default=function(e){return function(e,t,r){const o=e.message||e.functionName||e.file||"UNKNOWN_EXCEPTION";if(a[o]=a[o]||0,a[o]++,a[o]>t)return Promise.resolve();return r()}(e,i,(()=>(0,o.postDataToUrl)(t.EXCEPTION_LOG_ENDPOINT,e).then((()=>{})).catch((e=>n.default.log(e)))))};const a={}},14414:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.logException=void 0;const o=r(70252);t.logException=async function(e,t){return await(0,o.sendTypedExceptionLog)(t.exceptionType,t.log),{success:!0}}},32588:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.EXCEPTION_LOG_TAG=t.DEBUGGER_LOG_TAG=t.LOGS_LOG_TAG=void 0,t.LOGS_LOG_TAG="Logs",t.DEBUGGER_LOG_TAG="Debugger",t.EXCEPTION_LOG_TAG="Exception"},88393:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.config=void 0;const o=r(24375),n=r(55111),i=r(90235),a=r(26972),s=r(56857);t.config={commands:{markNotificationAsInteracted:{handler:o.markNotificationAsInteracted},markNotificationAsSeen:{handler:n.markNotificationAsSeen},markNotificationAsUnseen:{handler:i.markNotificationAsUnseen}},queries:{getNotificationStatus:{selector:s.notificationsStatusSelector}},liveQueries:{liveNotificationStatus:{operator:a.notificationsStatus$}}}},42122:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.bootstrap=void 0;const o=r(88393);t.bootstrap=e=>{e.register(o.config)}},70530:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.bootstrap=void 0;var o=r(42122);Object.defineProperty(t,"bootstrap",{enumerable:!0,get:function(){return o.bootstrap}})},24375:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.markNotificationAsInteracted=void 0;const o=r(34287),n=r(56857);t.markNotificationAsInteracted=async(e,t)=>{const{storeService:r,localStorageService:i}=e;r.dispatch((0,o.markAsInteracted)(t));const a=(0,n.notificationsStatusSelector)(r.getState());i.getInstance().storeNotificationsStatus(a)}},55111:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.markNotificationAsSeen=void 0;const o=r(34287),n=r(56857);t.markNotificationAsSeen=async(e,t)=>{const{storeService:r,localStorageService:i}=e;r.dispatch((0,o.markAsSeen)(t));const a=(0,n.notificationsStatusSelector)(r.getState());i.getInstance().storeNotificationsStatus(a)}},90235:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.markNotificationAsUnseen=void 0;const o=r(34287),n=r(56857);t.markNotificationAsUnseen=async(e,t)=>{const{storeService:r,localStorageService:i}=e;r.dispatch((0,o.markAsUnseen)(t));const a=(0,n.notificationsStatusSelector)(r.getState());i.getInstance().storeNotificationsStatus(a)}},62952:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.config=void 0;const o=r(57470),n=r(45709),i=r(91880);t.config={commands:{generatePassword:{handler:o.generatePasswordHandler},generateAndSavePassword:{handler:o.generateAndSavePasswordHandler},savePasswordGenerationSettings:{handler:n.savePasswordGenerationSettingsHandler}},queries:{getPasswordGenerationSettings:{selector:i.passwordGenerationSettingsSelector}},liveQueries:{}}},64811:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.bootstrap=void 0;const o=r(62952);t.bootstrap=e=>{e.register(o.config)}},57470:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.generateAndSavePasswordHandler=t.generatePasswordHandler=void 0;const o=r(47975),n=r(95623),i=r(70252),a=r(5464);t.generatePasswordHandler=async function(e,t){try{const r=(0,a.makeSessionController)(e).generatePassword(t.settings);return{success:!0,password:r,strength:await(0,o.evaluatePasswordStrength)(r)}}catch(e){return(0,n.logError)(e),(0,i.sendExceptionLog)({error:e}),{success:!1}}},t.generateAndSavePasswordHandler=async function(e,t){try{const r=(0,a.makeSessionController)(e).generateAndSavePassword(t.url);return{success:!0,password:r,strength:await(0,o.evaluatePasswordStrength)(r)}}catch(e){return(0,n.logError)(e),(0,i.sendExceptionLog)({error:e}),{success:!1}}}},45709:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.savePasswordGenerationSettingsHandler=void 0;const o=r(21877),n=r(95623),i=r(70252),a=r(44908),s=r(29954),c=r(23136);t.savePasswordGenerationSettingsHandler=async function(e,t){try{const n=(0,a.fixIncoherentSettings)(t),i={GeneratorDefaultSize:(r=n).length,GeneratorDefaultAvoidAmbiguousChars:r.avoidAmbiguous,GeneratorDefaultDigits:r.digits,GeneratorDefaultLetters:r.letters,GeneratorDefaultSymbols:r.symbols};(0,s.updatePersonalSettings)(e.storeService,e.sessionService,i),(0,c.getDebounceSync)(e.storeService,e.sessionService)({immediateCall:!0},o.Trigger.SettingsChange)}catch(e){(0,n.logError)(e),(0,i.sendExceptionLog)({error:e})}var r}},91880:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.passwordGenerationSettingsSelector=void 0;const o=r(16593),n=r(44908);t.passwordGenerationSettingsSelector=function(e){const t=(0,o.personalSettingsSelector)(e);return(0,n.getDefaultPasswordGenerationSettings)(t)}},76860:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.checkPasswordLeaked=void 0,t.checkPasswordLeaked=async function(e,t){const{password:r}=t,{applicationModulesAccess:o}=e,{commands:{temporaryCheckMasterPassword:n}}=o.createClients().masterPasswordSecurity;await n({password:r})}},14064:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.checkPasswordWeak=void 0,t.checkPasswordWeak=async function(e,t){const{password:r}=t,{applicationModulesAccess:o}=e,{commands:{temporaryCheckMasterPasswordWeak:n}}=o.createClients().masterPasswordSecurity;await n({password:r})}},84264:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.shouldTriggerMasterPasswordWeakCheck=t.shouldTriggerMasterPasswordLeakCheck=void 0;const o=r(16593);t.shouldTriggerMasterPasswordLeakCheck=function(e){return(0,o.isAuthenticatedSelector)(e)},t.shouldTriggerMasterPasswordWeakCheck=async function(e){return!!(0,o.isAuthenticatedSelector)(e)}},43057:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.setupSubscriptions=void 0;const o=r(20478);t.setupSubscriptions=async function(e,t){e.sessionOpened.on((()=>(0,o.triggerMasterPasswordLeakCheck)(t)))}},20478:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.triggerMasterPasswordLeakCheck=void 0;const o=r(76860),n=r(16593),i=r(38981),a=r(84264),s=r(14064);t.triggerMasterPasswordLeakCheck=async function(e){const t=e.storeService.getState();if((0,i.isSSOUserSelector)(t))return;const r=(0,n.masterPasswordSelector)(t);(0,o.checkPasswordLeaked)(e,{password:r}),await(0,a.shouldTriggerMasterPasswordWeakCheck)(t)&&(0,s.checkPasswordWeak)(e,{password:r})}},34161:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.config=void 0;const o=r(30467),n=r(53264),i=r(18693),a=r(97475),s=r(50893);t.config={commands:{cancelAutoRenew:{handler:i.cancelAutoRenew},downloadCustomerInvoice:{handler:n.downloadCustomerInvoice},fetchInvoiceList:{handler:a.fetchInvoiceList},requestRefund:{handler:s.requestRefund}},queries:{getInvoicesCount:{selector:o.allInvoicesLengthSelector},getInvoiceList:{selector:o.viewedQueriedInvoicesSelector},getInvoiceListYears:{selector:o.invoiceListYearsSelector}},liveQueries:{}}},78025:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.bootstrap=void 0;const o=r(34161);t.bootstrap=e=>{e.register(o.config)}},18693:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.cancelAutoRenew=void 0;const o=r(70252);t.cancelAutoRenew=async function(e){const{sessionService:t,storeService:r}=e;if(!r.isAuthenticated())return{success:!1};try{return await t.getInstance().payment.cancelPremiumSubscription(),{success:!0}}catch(e){const t=`[SessionController] - cancelPremiumSubscription: ${e}`,r=new Error(t);return(0,o.sendExceptionLog)({error:r}),{success:!1,error:{code:t}}}}},53264:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.downloadCustomerInvoice=void 0;const o=r(46298),n=r(48008);t.downloadCustomerInvoice=async function(e,t){const{storeService:r}=e,i=r.getUserLogin(),a=await(0,n.getCustomerInvoice)(r,i,t);return(0,o.isApiError)(a)?{success:!1}:{success:!0,data:JSON.stringify({data:Array.apply(null,new Uint8Array(a.data))})}}},97475:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.fetchInvoiceList=void 0;const o=r(46298),n=r(36273),i=r(95944);t.fetchInvoiceList=async function(e){const{storeService:t}=e,r=t.getUserLogin();if(!t.isAuthenticated())return{success:!1};try{const e=await(0,n.listInvoices)(t,r);return(0,o.isApiError)(e)?{success:!1}:(t.dispatch((0,i.receivedInvoiceList)(e.invoices)),{success:!0})}catch(e){return{success:!1}}}},50893:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.requestRefund=void 0;const o=r(46298),n=r(48523),i=r(5464);t.requestRefund=async function(e,t){const{sessionService:r,storeService:a,wsService:s}=e,c=a.getUserLogin();if(!a.isAuthenticated())return{success:!1};try{const e=await(0,n.grantFullRefundAndCancelSubscription)(a,c,t);return(0,o.isApiError)(e)?{success:!1}:(t&&!t.dryRun&&(0,i.refeshAccountInfo)(a,r,s),{success:!0})}catch(e){return{success:!1}}}},7753:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.bootstrap=void 0;var o=r(78025);Object.defineProperty(t,"bootstrap",{enumerable:!0,get:function(){return o.bootstrap}})},98584:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getInvoiceMappers=void 0;const o=r(77672);t.getInvoiceMappers=()=>({amountPaid:e=>e.amountPaid,invoiceId:e=>e.invoiceId,planName:e=>(e=>"advanced"===e.planFeature?"ADVANCED":"essentials"===e.planFeature?"ESSENTIALS":["family_created","family_renewed"].includes(e.eventType)?"FAMILY":"sync"===e.planFeature?"PREMIUM":"OTHER")(e),startDate:e=>e.startDate,startYear:e=>(e=>(0,o.fromUnixTime)(e.startDate).getFullYear().toString())(e)})},73938:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.config=void 0;const o=r(28903),n=r(81846),i=r(84547),a=r(64331);t.config={commands:{unlockProtectedItems:{handler:o.unlockProtectedItems},disableCredentialProtection:{handler:i.disableCredentialProtectionHandler}},queries:{vaultLockDate:{selector:n.vaultLockDateSelector}},liveQueries:{liveVaultLockDate:{operator:a.vaultLockDate$}}}},28903:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.unlockProtectedItems=void 0;const o=r(32626),n=r(28287);t.unlockProtectedItems=async function(e,t){const{storeService:r,masterPasswordEncryptorService:i}=e;return await(0,n.validateMasterPassword)(r,i,t)?{status:o.UnlockProtectedItemsStatus.SUCCESS}:{status:o.UnlockProtectedItemsStatus.ERROR,error:{code:o.unlockProtectedItemsWrongPasswordError}}}},64710:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.bootstrap=void 0;const o=r(73938);t.bootstrap=e=>{e.register(o.config)}},84547:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.disableCredentialProtectionHandler=void 0;const o=r(32626),n=r(18344);t.disableCredentialProtectionHandler=async function(e,{credentialId:t}){const{storeService:r,sessionService:i,eventLoggerService:a,applicationModulesAccess:s}=e;try{return await(0,n.disableCredentialProtection)({storeService:r,sessionService:i,eventLoggerService:a,applicationModulesAccess:s},t),{status:o.DisableCredentialProtectionStatus.SUCCESS}}catch(e){return{status:o.DisableCredentialProtectionStatus.ERROR}}}},18344:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.disableCredentialProtection=void 0;const o=r(19736),n=r(88779),i=({update:{autoprotected:e}})=>({AutoProtected:e});t.disableCredentialProtection=async function({storeService:e,sessionService:t,eventLoggerService:r,applicationModulesAccess:a},s){const c=e.getState();if(!(0,o.credentialSelector)(c,s))throw new Error("Credential does not exist, cant update");(0,n.updateCredential)({storeService:e,sessionService:t,eventLoggerService:r,applicationModulesAccess:a},{id:s,update:{autoprotected:!1}},i)}},88530:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.bootstrap=void 0;var o=r(64710);Object.defineProperty(t,"bootstrap",{enumerable:!0,get:function(){return o.bootstrap}})},64331:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.vaultLockDate$=void 0;const o=r(18948),n=r(81846),i=r(3343);t.vaultLockDate$=()=>(0,o.pipe)((0,i.map)(n.vaultLockDateSelector))},81846:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.vaultLockDateSelector=t.gracePeriodSelector=void 0;const o=r(38981),n=r(16593);t.gracePeriodSelector=e=>/^kw_test_auto_fmpc_.*/.test((0,n.userLoginSelector)(e))?5e3:3e5;t.vaultLockDateSelector=e=>(0,o.isSSOUserSelector)(e)?null:(0,n.lastMasterPasswordCheckSelector)(e)+(0,t.gracePeriodSelector)(e)},20054:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.config=void 0;const o=r(85423),n=r(97810),i=r(43591),a=r(16593),s=r(18191);t.config={commands:{activateAccountRecovery:{handler:n.activateAccountRecovery},setupMasterPasswordForRecovery:{handler:i.setupMasterPasswordForRecovery},deactivateAccountRecovery:{handler:n.deactivateAccountRecovery},registerDeviceForRecovery:{handler:i.registerDeviceForRecovery},startAccountRecovery:{handler:i.startAccountRecovery},sendRecoveryRequest:{handler:i.sendRecoveryRequest},cancelRecoveryRequest:{handler:i.cancelRecoveryRequest},checkRecoveryRequestStatus:{handler:i.checkRecoveryRequestStatus},recoverUserData:{handler:i.recoverUserData},checkDoesLocalRecoveryKeyExist:{handler:i.checkDoesLocalRecoveryKeyExist},isRecoveryRequestPending:{handler:n.isRecoveryRequestPending}},queries:{getRecoveryOptInSetting:{selector:a.accountRecoveryOptInSelector},getShouldShowFeatureActivationModal:{selector:o.shouldShowFeatureActivationModalSelector},getAccountRecoveryRequestCount:{selector:o.accountRecoveryRequestsCountSelector}},liveQueries:{liveAccountRecoveryRequestCount:{operator:s.accountRecoveryRequestsCount$}}}},15444:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.makeRecoveryController=void 0;const o=r(36513),n=r(95623),i=r(70252),a=r(34376),s=r(43927);function c(e,t,r){return(0,i.sendExceptionLog)({error:t}),n.Debugger.log(e,t),{error:{message:t.message,action:r}}}t.makeRecoveryController=(e,t)=>({getMasterPasswordResetDemandList:r=>function(e,t,r,o){const n=o.teamId;return t.recovery.getPendingRequests({login:r.login,uki:r.uki,teamId:n}).then((t=>{const o=e.getTeamAdminData(),i=Object.assign({},o),a=t.filter((e=>e.login!==r.login));return i.teams[n]&&(i.teams[n].notifications={accountRecoveryRequests:a},(0,s.updateTeamAdminData)(e,i)),{demands:a}})).catch((e=>({demands:[],error:c("Master Password Reset: Error while getPendingRequests",e,o).error})))}(e,t,(0,a.getCurrentUserInfo)(e),r),acceptMasterPasswordResetDemand:r=>function(e,t,r){const n=(0,o.makeAsymmetricEncryption)();return n.decrypt(t.privateKey,r.recoveryKey).then((e=>n.encrypt(r.userPublicKey,e))).then((o=>e.recovery.acceptRequest({login:t.login,uki:t.uki,sourceLogin:r.login,payload:o}))).then((()=>({}))).catch((e=>c("Master Password Reset: Error while acceptRequest",e,r)))}(t,(0,a.getCurrentUserInfo)(e),r),declineMasterPasswordResetDemand:r=>function(e,t,r){return e.recovery.refuseRequest({login:t.login,uki:t.uki,sourceLogin:r.login}).then((()=>({}))).catch((e=>c("Master Password Reset: Error while refuseRequest",e,r)))}(t,(0,a.getCurrentUserInfo)(e),r)})},63395:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.bootstrap=void 0;const o=r(20054);t.bootstrap=e=>{e.register(o.config)}},76569:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.bootstrap=void 0;var o=r(63395);Object.defineProperty(t,"bootstrap",{enumerable:!0,get:function(){return o.bootstrap}})},18191:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.accountRecoveryRequestsCount$=void 0;const o=r(18948),n=r(3343),i=r(85423);t.accountRecoveryRequestsCount$=function(){return(0,o.pipe)((0,n.map)((e=>(0,i.accountRecoveryRequestsCountSelector)(e))),(0,n.distinctUntilChanged)())}},85423:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.accountRecoveryRequestsCountSelector=t.selectTeamAdminData=t.recoveryHashFromPremiumStatusSelector=t.recoveryHashFromPersonalSettingsSelector=t.shouldShowFeatureActivationModalSelector=void 0;const o=r(26634),n=r(38981),i=r(16593),a=r(27885),s=r(32034);t.shouldShowFeatureActivationModalSelector=(0,s.createSelector)([n.isSSOUserSelector,o.isRecoveryEnabledSelector,e=>"boolean"==typeof e.userSession.personalSettings.RecoveryOptIn,e=>e.userSession.session.isFirstSessionAfterAccountCreation],((e,t,r,o)=>!e&&t&&!r&&!o));t.recoveryHashFromPersonalSettingsSelector=e=>(0,i.personalSettingsSelector)(e).RecoveryHash||"";t.recoveryHashFromPremiumStatusSelector=e=>(0,i.premiumStatusSelector)(e).recoveryHash||"";t.selectTeamAdminData=e=>e.userSession.teamAdminData??{teams:{}};t.accountRecoveryRequestsCountSelector=e=>{const r=(0,a.getCurrentTeamId)(e.userSession.spaceData);if(!r)return 0;const{teams:o}=(0,t.selectTeamAdminData)(e);return Number(o[r]?.notifications?.accountRecoveryRequests?.length??0)}},43591:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.recoverUserData=t.checkDoesLocalRecoveryKeyExist=t.cancelRecoveryRequest=t.checkRecoveryRequestStatus=t.sendRecoveryRequest=t.setupMasterPasswordForRecovery=t.registerDeviceForRecovery=t.startAccountRecovery=void 0;const o=r(32626),n=r(70252),i=r(70414),a=r(25576),s=r(87855),c=r(36513),d=r(46298),u=r(29303),l=r(16593),p=r(16356),S=r(58639),g=r(95363),m=r(88610),A=r(47820);function y(e){return"u2f"===e.type?{type:"u2f",challenges:e.challenges??[]}:e}t.startAccountRecovery=async function(e,t){const{storeService:r}=e,{login:n}=t,i=await(0,d.getAuthenticationMethodsForDevice)(r,{login:n,methods:a.remoteSupportedAuthenticationMethod});if((0,d.isApiError)(i))return{success:!1,error:{code:o.RecoveryApiErrorType.StartAccountRecoveryFailed,message:`Start account recovery failed: ${i.message}`}};const s=i.verifications.map(y);return r.dispatch((0,g.saveRecoverySessionData)({verificationMethod:s})),{success:!0,verification:s}},t.registerDeviceForRecovery=async function(e,t){try{const{token:r,login:n}=t,{storeService:c,wsService:l}=e,p=c.getState(),S=c.getPlatformInfo().platformName,m=!0,A=await(0,d.getAuthenticationMethodsForDevice)(c,{login:n,methods:a.remoteSupportedAuthenticationMethod});if((0,d.isApiError)(A))return{success:!1,error:{code:o.RecoveryApiErrorType.RegisterDeviceFailed,message:"Recovery Device request registration failed"}};const y=(0,u.recoveryIsOtpSelector)(p),E=await(0,s.ensureDeviceId)(),f=(0,i.generateUki)(E),T={uki:f,login:n,platform:S,temporary:a.PersistData.PERSIST_DATA_NO,recovery:m},v=y?{otp:r}:{token:r};if("SUCCESS"!==await l.authentication.registerUki({...T,...v}))return{success:!1,error:{code:o.RecoveryApiErrorType.RegisterDeviceFailed,message:"Recovery Device registration failed"}};c.dispatch((0,g.saveRecoverySessionData)({recoveryUki:f}))}catch(e){return(0,n.sendExceptionLog)({error:e}),{success:!1,error:{code:o.RecoveryApiErrorType.RegisterDeviceFailed,message:e.message}}}return{success:!0}},t.setupMasterPasswordForRecovery=async function(e,t){let r="[Account Recovery PI] - Setup Master Password For Recovery ";const i=e=>{r+=`- ${e} \n`};try{const{storeService:a,localStorageService:s}=e,{masterPassword:d}=t,l=a.getState();i("recoveryUki select START");const S=(0,u.recoveryUkiSelector)(l);if(!S){const e={code:o.RecoveryApiErrorType.SetupMasterPasswordForRecoveryFailed,message:"recoveryUki does not exist"};return i(`setupMasterPasswordForRecovery failed with error: ${e.code} ${e.message}`),(0,n.sendExceptionLog)({message:r,funcName:"setupMasterPasswordForRecovery"}),{success:!1,error:e}}i("recoveryUki select SUCCESS"),i("dispatch updateMasterPassword START"),a.dispatch((0,p.updateMasterPassword)(d)),i("dispatch updateMasterPassword SUCCESS"),i("makeCyptoService START");const m=(0,c.makeCryptoService)();i("makeCyptoService SUCCESS"),i("generateRsaKeyPair START");const{publicKey:y,privateKey:E}=await m.asymmetricEncryption.generateRsaKeyPair();i("generateRsaKeyPair SUCCESS"),i("dispatch saveRecoverySessionData START"),a.dispatch((0,g.saveRecoverySessionData)({publicKey:y})),i("dispatch saveRecoverySessionData SUCCESS"),i("encryptUkiAndPrivateKey START");const f=await(0,A.encryptUkiAndPrivateKey)(S,E,d,a);return i("encryptUkiAndPrivateKey SUCCESS"),i("storeRecoveryData START"),await s.getInstance().storeRecoveryData(f),i("storeRecoveryData SUCCESS"),{success:!0}}catch(e){return i(`setupMasterPasswordForRecovery failed with error: ${e}`),(0,n.sendExceptionLog)({message:r,funcName:"setupMasterPasswordForRecovery",precisions:e.stack}),{success:!1,error:{code:o.RecoveryApiErrorType.SetupMasterPasswordForRecoveryFailed,message:e.message}}}},t.sendRecoveryRequest=async function(e){try{const{storeService:t,wsService:r}=e;return await(0,A.sendRecoveryRequestToAdmin)(t,r),{success:!0}}catch(e){return(0,n.sendExceptionLog)({error:e}),{success:!1,error:{code:o.RecoveryApiErrorType.RecoveryRequestFailed,message:e.message}}}},t.checkRecoveryRequestStatus=async function(e,t){try{const{storeService:r,localStorageService:n,wsService:i}=e,{masterPassword:a}=t,s=r.getState(),c=(0,l.userLoginSelector)(s);if(!c)return{success:!1,error:{code:o.RecoveryApiErrorType.CheckRecoveryStatusFailed,message:"Missing login"}};r.dispatch((0,p.updateMasterPassword)(a));const d=await(0,A.retrieveRecoveryUkiFromStorage)(r,n,a),{content:{status:u,payload:S,recoveryServerKey:m}}=await i.recovery.request({login:c,uki:d});return S&&m&&r.dispatch((0,g.saveRecoverySessionData)({userServerProtectedSymmetricalKey:S,recoveryServerKeyBase64:m})),{success:!0,response:{status:u}}}catch(e){return{success:!1,error:{code:o.RecoveryApiErrorType.CheckRecoveryStatusFailed,message:e.message}}}},t.cancelRecoveryRequest=async function(e){try{const{storeService:t,localStorageService:r,wsService:o}=e,n=t.getState(),i=(0,l.userLoginSelector)(n),a=(0,l.masterPasswordSelector)(n),s=await(0,A.retrieveRecoveryUkiFromStorage)(t,r,a);return await o.recovery.cancelRequest({login:i,uki:s}),await r.getInstance().cleanRecoveryData(),{success:!0}}catch(e){return{success:!1,error:{code:o.RecoveryApiErrorType.CancelRecoveryRequestFailed,message:e.message}}}},t.checkDoesLocalRecoveryKeyExist=async function(e){try{const{localStorageService:t}=e,r=t.getInstance();return{success:!0,doesExist:await r.doesRecoveryLocalKeyExist()}}catch(e){return{success:!1,error:{code:o.RecoveryApiErrorType.CheckLocalRecoveryKeyFailed,message:e.message}}}},t.recoverUserData=async function(e,t){const{localStorageService:r,storeService:i,sessionService:s}=e,d=i.getState(),p=r.getInstance(),y=await(0,A.validateInitialData)(d,p);let E="[Account Recovery PI] - Recover User Data ";const f=e=>{E+=`- ${e} \n`};if(!y.success)return y;const{masterPassword:T}=t;try{f("Extract PrKey START");const t=await(0,A.extractPrivateKeyFromRecoveryData)(e,T,f);f("Extract PrKey SUCCESS");const{userServerProtectedSymmetricalKey:r}=(0,u.recoveryDataSelector)(d),s=await(0,c.makeAsymmetricEncryption)();f("Decrypt user protected key START");const S=await s.decrypt(t,r);f("Decrypt user protected key SUCCESS"),f("Decrypt server protected key START");const y=await(0,A.extractRecoveryKey)(i,S,f);f("Decrypt server protected key SUCCESS"),f("Extract local Key START");const v=await(0,A.extractLocalKey)(e,y,f);f("Extract local Key SUCCESS"),await(0,A.prepareLocalDataEncryptorService)(e,v),f("Get recovery credentials START");const h=await p.getRecoverySessionCredential();f("Get recovery credentials SUCCESS");const{masterPassword:_}=JSON.parse(atob(h)),I=(0,l.userLoginSelector)(d),C=a.PersistData.PERSIST_DATA_YES;i.dispatch((0,g.saveRecoverySessionData)({recoveryInProgress:!0})),f("Open session START");const D=await(0,m.openSessionWithMasterPassword)(e,I,_,{isDataPersisted:C,serverKey:(0,l.serverKeySelector)(d)},f);if(f("Open session SUCCESS"),D!==o.LoginResultEnum.LoggedIn)return f("Open session SUCCESS but user not logged in"),(0,n.sendExceptionLog)({message:E,funcName:"recoverUserData"}),(0,A.recoveryFlowError)(o.RecoveryApiErrorType.RecoverUserDataFailed,`Unable to login with ${D}`);i.dispatch((0,g.saveRecoverySessionData)({recoveryInProgress:!1,currentPassword:_}))}catch(e){return f(`Recovery failed with error: ${e}`),(0,n.sendExceptionLog)({message:E,funcName:"recoverUserData",precisions:e.stack}),i.dispatch((0,g.resetRecoverySessionData)()),await s.close(),(0,S.triggerOpenSessionFailed)(new Error(S.AuthenticationCode[S.AuthenticationCode.WRONG_PASSWORD])),(0,A.recoveryFlowError)(o.RecoveryApiErrorType.RecoverUserDataFailed,"Unable to decipher data")}return{success:!0}}},47820:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.storeSessionCredentialForRecovery=t.prepareLocalDataEncryptorService=t.extractLocalKey=t.extractRecoveryKey=t.extractPrivateKeyFromRecoveryData=t.validateInitialData=t.recoveryFlowError=t.retrieveRecoveryUkiFromStorage=t.triggerCleanOrSetupAccountRecovery=t.isARFeatureActivatedForUser=t.isARAvailableForUser=t.sendRecoveryRequestToAdmin=t.encryptUkiAndPrivateKey=t.resetAdminProtectedSymmetricalKeys=t.sendAdminProtectedSymmetricalKeys=t.getAdminProtectedSymmetricalKeys=t.encryptRecoveryData=t.getRecoveryKey=t.getSetupRequisitesData=void 0;const o=r(32626),n=r(90622),i=r(56668),a=r(72365),s=r(16038),c=r(69530),d=r(64910),u=r(36513),l=r(65675),p=r(70252),S=r(16593),g=r(38981),m=r(95363),A=r(16356),y=r(29303),E=r(25576),f=r(26634),T=r(97810),v=r(85423);function h(e){const t=e.getState(),r=(0,S.activeSpacesSelector)(t)[0],o=r?.teamId;if(!o)throw new Error("[getSetupRequisitesData] - user should be part of a team to activate Account Recovery");const i=Number(o),a=(0,S.userLoginSelector)(t),s=(0,n.ukiSelector)(t);if(!a||!s)throw new Error("[getSetupRequisitesData] - missing login or uki");return{teamId:i,login:a,uki:s}}async function _({storeService:e,encryptionKey:t,data:r}){const o=(0,a.makeDataEncryptorService)(e),n=(0,l.getCryptoConfig)(e);o.setInstance({raw:t},"",n);const i=await o.getInstance().encrypt(r);return o.close(),i}async function I({storeService:e,encryptedData:t,encryptionKey:r}){const o=(0,a.makeDataEncryptorService)(e),{cryptoConfig:n}=(0,l.parsePayload)(l.ARGON2_DEFAULT_PAYLOAD);o.setInstance({raw:r},"",n);const i=await o.getInstance().decrypt(t,{logging:!0});return o.close(),i}function C(e){const t=(0,g.isSSOUserSelector)(e),r=(0,f.isRecoveryEnabledSelector)(e);return!t&&r}function D(e){const t=C(e),r=(0,S.accountRecoveryOptInSelector)(e);return t&&r}t.getSetupRequisitesData=async function(e,t){try{const{teamId:r,login:o,uki:n}=h(e),{content:i}=await t.recovery.getSetupRequisites({login:o,uki:n,teamId:r});return i}catch(e){throw new Error(`[getSetupRequisitesData] - getSetupRequisites failed with error ${e}`)}},t.getRecoveryKey=async function(e){const t=e.getState();let r,o=(0,S.recoveryKeySelector)(t);return o?r=(0,s.base64ToBuffer)(o):(r=await(0,c.generateAESKey)(),o=(0,s.bufferToBase64)(r)),{recoveryKeyBufferClear:r,recoveryKeyBase64Clear:o,recoveryKeyRawClear:atob(o)}},t.encryptRecoveryData=_,t.getAdminProtectedSymmetricalKeys=async function(e,t){const r=(0,u.makeAsymmetricEncryption)(),o=[];for(const n of e){const{login:e,publicKey:i}=n,a=await r.encrypt(i,t);o.push({login:e,key:a})}return o},t.sendAdminProtectedSymmetricalKeys=async function(e,t,r){try{const o=JSON.stringify(r),{teamId:n,login:i,uki:a}=h(e);return void await t.recovery.setRecoveryClientKeys({login:i,uki:a,recoveryClientKeys:o,teamId:n})}catch(e){throw new Error(`[sendAdminProtectedSymmetricalKeys] - setRecoveryClientKeys failed with error ${e}`)}},t.resetAdminProtectedSymmetricalKeys=async function(e,t){try{const{teamId:r,login:o,uki:n}=h(e),i=JSON.stringify([]);return void await t.recovery.setRecoveryClientKeys({login:o,uki:n,recoveryClientKeys:i,teamId:r})}catch(e){throw new Error(`[resetAdminProtectedSymmetricalKeys] - setRecoveryClientKeys failed with error ${e}`)}},t.encryptUkiAndPrivateKey=async function(e,t,r,o){const n=JSON.stringify({recoveryUki:e,privateKey:t}),a=(0,i.deflateUtf16)(n);return await _({storeService:o,encryptionKey:r,data:a})},t.sendRecoveryRequestToAdmin=async function(e,t){try{const r=e.getState(),o=(0,S.userLoginSelector)(r),{recoveryUki:n,publicKey:i}=(0,y.recoveryDataSelector)(r);if(!o||!n||!i)throw new Error("Missing recoveryUki or publicKey");return void await t.recovery.request({login:o,uki:n,publicKey:i})}catch(e){throw new Error(`[sendAccountRecoveryRequest] - failed with error ${e}`)}},t.isARAvailableForUser=C,t.isARFeatureActivatedForUser=D,t.triggerCleanOrSetupAccountRecovery=async function(e){const{storeService:t,localStorageService:r,wsService:o}=e,n=t.getState();if((0,y.recoveryInProgressSelector)(n))return;await r.getInstance().cleanRecoveryData();if(await async function(e,t){const r=e.getState();if(!D(r))return Promise.resolve(!1);const{persistData:o}=e.getAccountInfo();if(o===E.PersistData.PERSIST_DATA_NO)return Promise.resolve(!1);const n=!!(0,S.recoveryKeySelector)(r),i=!!await t.getInstance().doesRecoveryLocalKeyExist();if(n&&i)return(0,v.recoveryHashFromPersonalSettingsSelector)(r)!==(0,v.recoveryHashFromPremiumStatusSelector)(r);return!0}(t,r))return void await(0,T.setupAccountRecoveryForDevice)(t,r,o);await async function(e,t){const r=D(e.getState()),o=t.getInstance(),n=!!await o.doesRecoveryLocalKeyExist(),i=!!await o.doesRecoverySessionCredentialExist();return!r&&(n||i)}(t,r)&&await r.getInstance().cleanRecoverySetupData()},t.retrieveRecoveryUkiFromStorage=async function(e,t,r){try{const o=await t.getInstance().getRecoveryData(),n=await I({storeService:e,encryptedData:o,encryptionKey:r}),a=(0,i.inflateUtf16)(n),{recoveryUki:s}=JSON.parse(a);return s}catch(e){const t=`retrieveRecoveryUkiFromStorage failed with error ${e.message}`;throw new Error(t)}};t.recoveryFlowError=(e,t)=>{const r=new Error(`[AccountRecovery]: ${e} ${t}`);return(0,p.sendExceptionLog)({error:r}),{success:!1,error:{code:e,message:t}}},t.validateInitialData=async function(e,r){if(!await r.doesRecoveryLocalKeyExist()||!await r.doesRecoveryDataExist()||!await r.doesRecoverySessionCredentialExist())return(0,t.recoveryFlowError)(o.RecoveryApiErrorType.RecoverUserDataFailed,"Missing local data");const{userServerProtectedSymmetricalKey:n,recoveryServerKeyBase64:i}=(0,y.recoveryDataSelector)(e);return n&&i?{success:!0}:(0,t.recoveryFlowError)(o.RecoveryApiErrorType.RecoveryRequestFailed,"missing payload")},t.extractPrivateKeyFromRecoveryData=async function(e,t,r){const{localStorageService:o,storeService:n}=e,a=o.getInstance();r("extractPrivateKeyFromRecoveryData - getRecoveryData");const c=await a.getRecoveryData(),d=n.getPlatformInfo();r(`[extra] platform: ${d.platformName}`),r(`[extra] browser: ${d.browser} @ ${d.browserVersion}`);const u=(0,s.base64ToBuffer)(c),p=(0,l.parseCipheredData)(new Uint8Array(u));r(`[extra] cryptoConfig derivation: ${JSON.stringify(p.cryptoConfig)}`),r("extractPrivateKeyFromRecoveryData - decryptRecoveryData");const S=await I({storeService:n,encryptedData:c,encryptionKey:t});r("extractPrivateKeyFromRecoveryData - inflateUtf16 data");const g=(0,i.inflateUtf16)(S);r("extractPrivateKeyFromRecoveryData - parse JSON data");const{recoveryUki:A,privateKey:y}=JSON.parse(g);return n.dispatch((0,m.saveRecoverySessionData)({recoveryUki:A})),y},t.extractRecoveryKey=async function(e,t,r){const o=e.getState(),{recoveryServerKeyBase64:n}=(0,y.recoveryDataSelector)(o);if(!n)throw new Error("Missing payload");const i=atob(n),a=e.getPlatformInfo();r(`[extra] platform: ${a.platformName}`),r(`[extra] browser: ${a.browser} @ ${a.browserVersion}`);const c=(0,s.base64ToBuffer)(t),d=(0,l.parseCipheredData)(new Uint8Array(c));r(`[extra] cryptoConfig derivation: ${JSON.stringify(d.cryptoConfig)}`),r("extractRecoveryKey - decryptRecoveryData");const u=await I({storeService:e,encryptedData:t,encryptionKey:i});return r("extractRecoveryKey - arrayBufferToText"),(0,s.arrayBufferToText)(u)},t.extractLocalKey=async function(e,t,r){const{storeService:o,localStorageService:n}=e,a=n.getInstance();r("extractLocalKey - getRecoveryLocalKey");const c=await a.getRecoveryLocalKey(),d=e.storeService.getPlatformInfo();r(`[extra] platform: ${d.platformName}`),r(`[extra] browser: ${d.browser} @ ${d.browserVersion}`);const u=(0,s.base64ToBuffer)(c),p=(0,l.parseCipheredData)(new Uint8Array(u));r(`[extra] cryptoConfig derivation: ${JSON.stringify(p.cryptoConfig)}`),r("extractLocalKey - decryptRecoveryData");const S=await I({storeService:o,encryptedData:c,encryptionKey:t});return r("extractLocalKey - inflateUtf16 localKey"),(0,i.inflateUtf16)(S)},t.prepareLocalDataEncryptorService=async function(e,t){const{localDataEncryptorService:r,storeService:o}=e,n=e.storeService.getUserSession().serverKey,i=(0,d.getNoDerivationCryptoConfig)();r.setInstance({raw:t},n,i),await r.getInstance().prepareCrypto(),o.dispatch((0,A.updateLocalKey)(t))},t.storeSessionCredentialForRecovery=async function(e,t){const r=e.getState(),o=(0,S.masterPasswordSelector)(r);if(D(r)&&o){const e={masterPassword:o,recoveryKey:null},r=btoa(JSON.stringify(e));await t.getInstance().storeRecoverySessionCredential(r)}}},97810:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.isRecoveryRequestPending=t.deactivateAccountRecovery=t.setupAccountRecoveryForDevice=t.activateAccountRecovery=void 0;const o=r(32626),n=r(56668),i=r(47820),a=r(5464),s=r(16593),c=r(27517);async function d(e,t,r){const{hash:o,recipients:a,recoveryServerKey:s}=await(0,i.getSetupRequisitesData)(e,r),{recoveryKeyBufferClear:d,recoveryKeyBase64Clear:u,recoveryKeyRawClear:l}=await(0,i.getRecoveryKey)(e),p=t.getInstance(),S=await p.getLocalKey(),g=(0,n.deflateUtf16)(S),m=await(0,i.encryptRecoveryData)({storeService:e,encryptionKey:l,data:g});t.getInstance().storeRecoveryLocalKey(m);const A=atob(s),y=await(0,i.encryptRecoveryData)({storeService:e,encryptionKey:A,data:d}),E=await(0,i.getAdminProtectedSymmetricalKeys)(a,y);await(0,i.sendAdminProtectedSymmetricalKeys)(e,r,E);const f={RecoveryHash:o,RecoveryKey:u};e.dispatch((0,c.editPersonalSettings)(f)),await(0,i.storeSessionCredentialForRecovery)(e,t)}t.activateAccountRecovery=async function(e){const{sessionService:t,storeService:r,localStorageService:n,wsService:u}=e,l=r.getState();if(!(0,i.isARAvailableForUser)(l))return{success:!1,error:{code:o.RecoveryApiErrorType.AccountRecoveryNotAvailableError}};(0,s.accountRecoveryOptInSelector)(l)||r.dispatch((0,c.editPersonalSettings)({RecoveryOptIn:!0}));try{await d(r,n,u),await t.getInstance().user.persistPersonalSettings(),await(0,a.sessionForceSync)(t)}catch(e){return{success:!1,error:{code:o.RecoveryApiErrorType.RecoverySetupFailed,message:e.message}}}return{success:!0}},t.setupAccountRecoveryForDevice=d,t.deactivateAccountRecovery=async function(e){const{sessionService:t,storeService:r,localStorageService:n,wsService:a}=e,s=r.getState();if(!(0,i.isARAvailableForUser)(s))return{success:!1,error:{code:o.RecoveryApiErrorType.AccountRecoveryNotAvailableError}};const d={RecoveryKey:"",RecoveryHash:"",RecoveryOptIn:!1};try{r.dispatch((0,c.editPersonalSettings)(d)),await t.getInstance().user.persistPersonalSettings(),await n.getInstance().cleanRecoverySetupData(),await(0,i.resetAdminProtectedSymmetricalKeys)(r,a)}catch(e){return{success:!1,error:{code:o.RecoveryApiErrorType.RecoveryDeactivationFailed,message:e.message}}}return{success:!0}},t.isRecoveryRequestPending=async function(e){try{return{success:!0,response:await e.localStorageService.getInstance().doesRecoveryDataExist()}}catch(e){return{success:!1,error:{code:o.RecoveryApiErrorType.IsRecoveryRequestPendingFailed,message:e}}}}},63678:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.setupSubscriptions=void 0;const o=r(47820);t.setupSubscriptions=function(e,t){e.sessionOpened.on((()=>(0,o.triggerCleanOrSetupAccountRecovery)(t))),e.syncSuccess.on((()=>(0,o.triggerCleanOrSetupAccountRecovery)(t)))}},47390:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.config=void 0;const o=r(66961),n=r(89122),i=r(96405);t.config={commands:{decipherRemoteFile:{handler:o.decipherRemoteFileHandler}},queries:{getFileContent:{selector:i.fileContentStrSelector}},liveQueries:{liveFileMeta:{operator:n.fileMetaUpdate$}}}},64438:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.bootstrap=void 0;const o=r(47390);t.bootstrap=e=>{e.register(o.config)}},1110:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.FILE_SETTINGS=t.REMOTE_FILE_KEY_PROD=t.REMOTE_FILE_KEY_DEV=void 0,t.REMOTE_FILE_KEY_DEV="-----BEGIN PUBLIC KEY-----\nMIICIjANBgkqhkiG9w0BAQEFAAOCAg8AMIICCgKCAgEAzOFwZBlj8livLhzIN8xm\ny/c+gn9FpUNOEIPoiN7kcAlj+oIlWqW5TgRZLqvyA0WxhTcG7icTpC+UwBXvENdV\n3nTzmuB8W6ZnRTjrtAlSxqp0Yfr2eQEGZFTlfBFUneqq4RZ6e/B3nIRHG1sEkVhd\noBbenPWou+WHqaqnah0AZVfxx4bJq1wor1LpH7gxELthvsThBelQz4Lmns4hCjzq\nRCDjQ1PG9HpDwwRHyi9xJYWoLR6C3rHZ1mmldg7TS41cCWkKsPDiIrIzEN+94dGG\nqSAx4kti0ltRcjLcBuJhQ3FHaAU7ksSubEg+l0W8PWAKjNbhUpFXduqXjxZ9nhuS\n2sxETZoadgU6YDEyqk3W7c+dhpTioMZEsJXpBVdC2jbblPHBRXBTmdOdb7xlBrGQ\nzoyPpS0PcI9oa8o9na9J8DSqnEbLwXdOlv4TUoxrswD6nmnR31/W+C4PSC8yEUEx\nESiG6IfAakFICxVESBp1VZA7NUbT6JkrhQaz//AVuGAyMoDuXorRGQPit+9DgF2l\neSr0zLzO2MVfMXXKBnueZmjNLvYy2Q2e8QX1jsuvwFhDBt1QmfisdiGSPC7jp0rO\nXdu5eCQuHVYeApipVKry58So783jimUa+mpA0/NUyiYaON7zndtZlQv/y+dqvseT\na2iA73nMVy4y9F95mwdG8ykCAwEAAQ==\n-----END PUBLIC KEY-----",t.REMOTE_FILE_KEY_PROD="-----BEGIN PUBLIC KEY-----\nMIICIjANBgkqhkiG9w0BAQEFAAOCAg8AMIICCgKCAgEAvlEdqD2jCU30/OembiWY\nJKxrjiZuRgweXtV2e7yF1T5XyHkqDZ31a9W0rLWrVRbjr1qDdwU94L1iW/8RrUPK\n2ue+2XH/8e8EH44Y9HYBeIUTciBKU6dqyqflaxY/wm3VO5af303ba564BVzv/31S\nJiHa7QkeVqjY/Za1rv1ZOIwsYBC/SPIK+ofU7qSi6eY8PNe8bje0CFPcwfWRRkNB\nZLQwUwIED1w7playTR8boX5iju+TagAjKSphkj6u+fIkYPdFQgFjSTGu8OwTAerC\nxqAWDSVy7fMxLdrDNrdwMTuQvlUIWiK+1CRHm1r6AXGywqCmrndw6q1LvFcwOgI1\n2brPOx1BdDabUwau26lICDgPqA67Sk7GLTCv3hA2bHvJhK7E0c260u96hRwjDk/L\n8tspQAYGzosyIMTmN29fEtBMlPwClZPqSVa7I7b3Csx4lhRkXI76WxAOmxf5dNQI\n2O6dlrxumdfpM8O6ye3iq51D7ZNNegelee/BIrZEcJZzymvkrDDZHJs6oFQ7bERd\np+nJlr4xoiFd9BPCus6z994/8j7lNTvLanNwsdUYRP/tQJZqlhZ7vY+KpyXn+RGw\nMYFeWXuH3cG05NwryH6676tcOrkboxbxMCMBUMvZK1CWS57noH/iztYivKNyItxf\ni8uoqgc+vDOPPsdujlsgOkcCAwEAAQ==\n-----END PUBLIC KEY-----",t.FILE_SETTINGS={"phishing_urls_test.json":{isLoadedWhileLoggedOut:!0}}},66961:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.decipherRemoteFileHandler=void 0;const o=r(10174),n=r(16593);t.decipherRemoteFileHandler=async({storeService:e},t)=>({decipheredFile:await(0,o.decipherRemoteFileUpdate)(t.cipheredFileContent,t.fileMetaData,(0,n.sharingKeysSelector)(e.getState()).privateKey)})},97890:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.downloadRemoteFileHandler=t.fetchFile=void 0;const o=r(32626),n=r(46298),i=r(64272),a=r(10174),s=r(85845),c=r(87993),d=r(19601),u=r(16593),l=r(55539),p=r(23201),S=r(21877),g=r(76905);async function m(e){try{return(await(0,l.httpGetUsingFetch)(e,{responseType:"arraybuffer"})).data}catch(e){throw new d.RemoteFileError(S.RemoteFileUpdateError.DownloadError,e.message)}}async function A(e,t){const r=await(0,i.getFilesMeta)(e,(0,u.userLoginSelector)(e.getState()),t);if((0,n.isApiError)(r))throw new d.RemoteFileError(S.RemoteFileUpdateError.ServerError,r.message);if((0,i.isGetFilesMetaSuccess)(r)){const{fileInfos:e}=r;if(!function(e){for(const t of o.FileNamesList)if(!(t in e))return!1;return!0}(e))throw new Error("Missing keys in the GetFileMeta response");return e}}function y(e,t,r){const{storeService:o,eventBusService:n}=e;o.dispatch((0,s.updateFileContentAction)({[r.name]:r})),o.dispatch((0,s.updateFileMetaAction)({[r.name]:t})),n.remoteFileChanged(r.name)}async function E(e,[t,r]){const{storeService:n,eventLoggerService:i}=e;if(!function(e){switch(e.status){case o.UPDATE_AVAILABLE_HTTP_STATUS:return!0;case o.NO_CURRENT_UPDATE_HTTP_STATUS:case o.FILE_NOT_FOUND_HTTP_STATUS:case o.SERVER_ERROR_HTTP_STATUS:default:return!1}}(r))return{fileName:t,isUpdated:!1,fileMetaData:r};try{const o=await async function(e,t,r){const o=await m(t.url);if(!t.key)return new g.DownloadedFile(e,o);const n=await(0,a.decipherRemoteFileUpdate)(o,t,(0,u.sharingKeysSelector)(r.getState()).privateKey);return new g.DownloadedFile(e,n)}(t,r,n);y(e,r.revision,o)}catch(e){return(0,d.assertRemoteFileError)(i,e),{fileName:t,isUpdated:!1,fileMetaData:r}}return{fileName:t,isUpdated:!0,fileMetaData:r}}t.fetchFile=m;t.downloadRemoteFileHandler=async(e,t)=>{const{storeService:r}=e,o=await async function(e,t){const r=await(0,c.retrieveFileMetaDataFromCipheredLocalStorage)(e);return Object.entries(t).reduce(((e,[t,o])=>(null!==r&&t in r.files?e.files[t]=o.revision??r.files[t]:e.files[t]=0,e)),{files:{}})}(e,t);try{const t=await A(r,o);if(t&&0!==Object.keys(t).length){const a=await(n=t,i=e,Promise.all(Object.entries(n).map((e=>E(i,e))))),u=await async function(e,t){const{eventLoggerService:r}=e;return await Promise.all(t.filter((({isUpdated:e})=>e)).map((async({fileName:t})=>{try{return await(0,c.writeFileInLocalStorage)(e,t),(0,p.logReceiveRemoteFileSuccess)(r),[t,!0]}catch(e){return(0,d.assertRemoteFileError)(r,e),[t,!1]}})))}(e,a),l=u.filter((([e,t])=>!t)).map((([e,t])=>e));r.dispatch((0,s.deleteFileMetaAction)(l)),await function(e,t,r){const o=e.localStorageService.getInstance();return Promise.all(t.filter((({isUpdated:e})=>!e)).map((async({fileName:t})=>{if(!o.isRemoteFileContentExist(t))return;const n=await(0,c.readFileFromLocalStorage)(e,t);null!==n&&y(e,r[t],n)})))}(e,a,o.files),await(0,c.persistFileMetaInCipheredLocalStorage)(e)}}catch(t){(0,d.assertRemoteFileError)(e.eventLoggerService,t)}var n,i}},16179:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.loadFilesAtInit=t.loadFileContentAtInit=void 0;const o=r(1110),n=r(87993),i=r(19601),a=r(85845);async function s(e,t){const r=await(0,n.readFileFromLocalStorage)(e,t);return null!==r&&(e.storeService.dispatch((0,a.updateFileContentAction)({[t]:r})),!0)}t.loadFileContentAtInit=s,t.loadFilesAtInit=function(e){Object.keys(o.FILE_SETTINGS).forEach((async t=>{if(o.FILE_SETTINGS[t].isLoadedWhileLoggedOut)try{await s(e,t)&&e.eventBusService.remoteFileChanged(t)}catch(t){(0,i.assertRemoteFileError)(e.eventLoggerService,t)}}))}},76905:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DownloadedFile=void 0;const o=r(16038);class n{constructor(e,t){this._buf=t,this.name=e}static fromBase64Str(e,t){return new n(e,(0,o.base64ToBuffer)(t))}toBlob(){return new Blob([this._buf])}toString(){return(0,o.ab2str)(this._buf)}toBase64String(){return(0,o.bufferToBase64)(this._buf)}}t.DownloadedFile=n},10174:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.decipherRemoteFileUpdate=t.decipherFileIntoBlob=t.verifyRemoteFileSignature=t.decipherDecryptionKey=t.computePublicKeyForSignature=void 0;const o=r(56668),n=r(83570),i=r(16038),a=r(56984),s=r(36513),c=r(1110),d=r(19601),u=r(21877),l=r(93513),p="https://static.dashlane.com/runtime-resources/ci/";async function S(e,t){const r=(0,s.makeAsymmetricEncryption)({hashAlgorithm:a.HashAlgorithm.SHA_1});try{return l.decode(await r.decrypt(t,e))}catch(e){throw new d.RemoteFileError(u.RemoteFileUpdateError.DecipherError,"Invalid encryption on deciphering key")}}async function g(e,{signature:r,url:o},n){const i=(0,t.computePublicKeyForSignature)(o);return await e.verify(i,r,n)}async function m(e,t){try{return(0,i.str2ab)((0,o.deflatedUtf8ToUtf16)(await(0,o.decipherDashlaneSecureData)(e,t,"",(0,n.makeGetDerivateKeyWithCacheAndQueue)()),{skipInflate:!0}))}catch(e){throw new d.RemoteFileError(u.RemoteFileUpdateError.DecipherError,"Invalid encryption on file")}}t.computePublicKeyForSignature=e=>{if((e=>e.startsWith(p+"prod/"))(e))return c.REMOTE_FILE_KEY_PROD;if((e=>e.startsWith(p+"dev/"))(e))return c.REMOTE_FILE_KEY_DEV;throw new d.RemoteFileError(u.RemoteFileUpdateError.DecipherError,"The file URL is not matching production or dev environnement")},t.decipherDecryptionKey=S,t.verifyRemoteFileSignature=g,t.decipherFileIntoBlob=m,t.decipherRemoteFileUpdate=async function(e,t,r){const o=(0,i.bufferToBase64)(e),n=await S(t.key,r),c=(0,s.makeAsymmetricEncryption)({hashAlgorithm:a.HashAlgorithm.SHA_256});if(!await g(c,t,o))throw new d.RemoteFileError(u.RemoteFileUpdateError.DecipherError,"Invalid signature detected on file");return await m(o,n)}},91313:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.bootstrap=void 0;var o=r(64438);Object.defineProperty(t,"bootstrap",{enumerable:!0,get:function(){return o.bootstrap}})},89122:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.fileMetaUpdate$=void 0;const o=r(18948),n=r(3343),i=r(96405);t.fileMetaUpdate$=()=>(0,o.pipe)((0,n.map)(i.fileMetaUpdateSelector),(0,n.distinctUntilChanged)())},23201:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.logReceiveRemoteFileError=t.logReceiveRemoteFileSuccess=void 0;const o=r(21877),n=(e,t,r=undefined)=>{e.logEvent(new o.UserReceiveRemoteFileUpdateEvent({flowStep:t,remoteFileUpdateError:r,packageSource:o.PackageSource.Carbon}))};t.logReceiveRemoteFileSuccess=e=>n(e,o.FlowStep.Complete);t.logReceiveRemoteFileError=(e,t)=>n(e,o.FlowStep.Error,t)},87993:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.writeFileInLocalStorage=t.readFileFromLocalStorage=t.retrieveFileContentFromNonCipheredLocalStorage=t.retrieveFileContentFromCipheredLocalStorage=t.retrieveFileMetaDataFromCipheredLocalStorage=t.persistSingleFileInNonCipheredLocalStorage=t.persistSingleFileContentInCipheredLocalStorage=t.persistFileMetaInCipheredLocalStorage=void 0;const o=r(25576),n=r(96405),i=r(1110),a=r(19601),s=r(21877),c=r(76905),d=e=>{if(!e)throw new a.RemoteFileError(s.RemoteFileUpdateError.LocalStorageError,"LocalStorageService is not initalized")};async function u({localStorageService:e,storeService:t},r){const{persistData:i,isAuthenticated:c}=t.getAccountInfo(),u=e.getInstance();if(!c||i===o.PersistData.PERSIST_DATA_NO)return;d(u);const l=await(0,n.fileSelector)(t.getState(),r);try{await u.storeRemoteFileContent(r,l.toBase64String())}catch(e){throw new a.RemoteFileError(s.RemoteFileUpdateError.LocalStorageError,`Cannot persist ${r} content in local storage`)}}async function l({storeService:e,storageService:t},r){const{persistData:i,isAuthenticated:c}=e.getAccountInfo();if(!c||i===o.PersistData.PERSIST_DATA_NO)return;const u=t.getLocalStorage();d(u);const l=await(0,n.fileSelector)(e.getState(),r);try{await u.writeItem(r,l.toBase64String())}catch(e){throw new a.RemoteFileError(s.RemoteFileUpdateError.LocalStorageError,`Cannot persist ${r} content in local storage`)}}async function p(e,t){const r=e.getInstance();d(r);return await r.isRemoteFileContentExist(t)?c.DownloadedFile.fromBase64Str(t,await r.getRemoteFileContent(t)):Promise.resolve(null)}async function S(e,t){const r=e.getLocalStorage();d(r);return await r.itemExists(t)?c.DownloadedFile.fromBase64Str(t,await r.readItem(t)):Promise.resolve(null)}t.persistFileMetaInCipheredLocalStorage=async function({localStorageService:e,storeService:t}){e.getInstance();const{persistData:r,isAuthenticated:i}=t.getAccountInfo();if(!i||r===o.PersistData.PERSIST_DATA_NO)return;d(e);const c=e.getInstance();try{await c.storeRemoteFileMeta((0,n.fileMetaUpdateSelector)(t.getState()))}catch{throw new a.RemoteFileError(s.RemoteFileUpdateError.LocalStorageError,"Cannot persist file metadata in local storage")}},t.persistSingleFileContentInCipheredLocalStorage=u,t.persistSingleFileInNonCipheredLocalStorage=l,t.retrieveFileMetaDataFromCipheredLocalStorage=async function({localStorageService:e}){const t=e.getInstance();return d(t),await t.isRemoteFileMetaDataExist()?await t.getRemoteFileMeta():Promise.resolve(null)},t.retrieveFileContentFromCipheredLocalStorage=p,t.retrieveFileContentFromNonCipheredLocalStorage=S,t.readFileFromLocalStorage=function(e,t){return i.FILE_SETTINGS[t].isLoadedWhileLoggedOut?S(e.storageService,t):p(e.localStorageService,t)},t.writeFileInLocalStorage=function(e,t){return i.FILE_SETTINGS[t].isLoadedWhileLoggedOut?l(e,t):u(e,t)}},19601:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.assertRemoteFileError=t.RemoteFileError=void 0;const o=r(23201),n=r(70252);class i extends Error{constructor(e,t){super(t),this.name=e,this.name=e}}t.RemoteFileError=i,i.errorInstance="REMOTE_FILE_ERROR",t.assertRemoteFileError=function(e,t){!function(e){return e instanceof i}(t)?(0,n.sendExceptionLog)({error:t}):(0,o.logReceiveRemoteFileError)(e,t.name)}},96405:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.fileContentStrSelector=t.fileSelector=t.fileMetaUpdateSelector=void 0;const r=e=>e.device.remoteFile;t.fileMetaUpdateSelector=e=>r(e).fileMetaData;t.fileSelector=(e,t)=>r(e).fileContentState[t];t.fileContentStrSelector=(e,r)=>(0,t.fileSelector)(e,r).toString()},98202:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.setupSubscriptions=void 0;const o=r(36428),n=r(18216),i=r(16593);t.setupSubscriptions=function(e,t){e.sessionOpened.on((()=>(0,o.triggerDownloadRemoteFileUpdate)(t,!0))),e.sessionClosed.on((()=>(0,o.triggerDownloadRemoteFileUpdate)(t,!1))),e.coreServicesReady.on((e=>{e.initMode===n.InitMode.Resume&&((0,i.isAuthenticatedSelector)(t.storeService.getState())?(0,o.triggerDownloadRemoteFileUpdate)(t,!0):(0,o.triggerLoadFileAtInit)(t))})),e.appInitialized.on((()=>{(0,o.triggerLoadFileAtInit)(t)}))}},36428:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.triggerDownloadRemoteFileUpdate=t.triggerLoadFileAtInit=void 0;const o=r(57859),n=r(97890),i=r(1110),a=r(16179),s=30,c=60*s*1e3,d="carbon-rfu-alarm";function u(e){return(0,n.downloadRemoteFileHandler)(e,i.FILE_SETTINGS)}t.triggerLoadFileAtInit=function(e){return(0,a.loadFilesAtInit)(e)};let l=!1;let p=null;t.triggerDownloadRemoteFileUpdate=function(e,t){if(p&&function(e){clearInterval(e)}(p),t){if((0,o.alarmsIsSupported)())return void async function(e){const t=await(0,o.alarmsGet)(d);l||(o.alarmsOnAlarm.addListener((t=>{t.name===d&&u(e)})),l=!0),t||(0,o.alarmsCreate)(d,{delayInMinutes:1,periodInMinutes:s})}(e);p=function(e){return u(e),setInterval((()=>{u(e)}),c)}(e)}}},25661:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.bootstrap=void 0;const o=r(17338),n=r(21587),i=r(64369),a=r(93820),s=r(90622),c=r(74219),d=r(15209),u=r(21583),l=r(99293),p=r(55861),S=r(74412),g=r(70252),m=r(49409),A=r(50329),y=r(44389),E=r(16359),f=r(40588),T=r(37824),v=r(61),h=r(39952),_=r(70530),I=r(64811),C=r(88530),D=r(76569),O=r(76592),P=r(17387),R=r(33719),N=r(49183),L=r(14581),b=r(51168),U=r(7753),M=r(53156),w=r(16667),B=r(91313),k=r(25560),G=[n.bootstrap,s.bootstrap,c.bootstrap,d.bootstrap,u.bootstrap,l.bootstrap,p.bootstrap,S.bootstrap,g.bootstrap,i.bootstrap,m.bootstrap,A.bootstrap,y.bootstrap,E.bootstrap,v.bootstrap,f.bootstrap,h.bootstrap,_.bootstrap,C.bootstrap,D.bootstrap,O.bootstrap,P.bootstrap,R.bootstrap,N.bootstrap,L.bootstrap,b.bootstrap,I.bootstrap,a.bootstrap,w.vpnApiBootstrap,U.bootstrap,M.bootstrap,T.bootstrap,B.bootstrap,k.bootstrap];t.bootstrap=(e,t,r)=>{const n=(0,o.getCoreServices)(e);G.forEach((e=>{e(t,n,r)}))}},74318:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.fetchCurrentLocation=t.initCarbon=t.setPlatform=void 0;const o=r(16516),n=r(32626),i=r(30504),a=r(4798),s=r(75391),c=r(44242),d=r(20849),u=r(44273),l=r(30855),p=r(87855),S=r(86056),g=r(95623),m=r(17338),A=r(61384),y=r(12995),E=r(70252),f=r(4673),T=r(47975),v=r(73011),h=r(96637),_=r(25661),I=r(2646),C=r(18539),D=r(18216),O=r(28486),P=r(88322),R=r(48749),N=r(59301);t.setPlatform=(e,t,r)=>{if(r===D.InitMode.FirstInit){e.getInstance(m.CarbonServicesTypeEnum.StoreService).getStore().dispatch((0,y.savePlatformInfo)(t))}(0,S.setPlatformInfo)(t)},t.initCarbon=async function(e){const r=Object.values(R.DashlaneAPISchemesNames);if((0,R.setConfig)((0,o.omit)(r,e?.config??{})),(0,I.setPublicPath)(e.publicPath),!e.storageLayer)throw new Error("Missing Storage layer prevents Carbon initialization");const S=(0,m.carbonServices)({storageLayer:new C.CarbonLocalStorage(e.storageLayer),sessionStorage:e.sessionStorage,createClients:e.createClients}),{storeService:y,storageService:E,applicationModulesAccess:L}=(0,m.getCoreServices)(S);await(0,N.initWebServicesConfig)(e,L),await y.completeRehydration(),(0,P.loadAnonymousApplicationId)(E,y);const b=function(e){const t=e.getState(),r=(0,O.appSessionIdSelector)(t)?D.InitMode.Resume:D.InitMode.FirstInit;return(0,g.logVerbose)({message:`Inferred init mode : ${r}`}),r}(y);(0,t.setPlatform)(S,e.platformInfo,b);const U=await(0,v.setupEventBus)(S);await U.coreServicesReady({initMode:b}),(0,T.loadFrequencyLists)(),e.workers&&(0,A.setWorkersPath)(e.workers),e.plugins&&(0,f.setPlugins)(e.plugins);try{await(0,p.initAuthenticatedCarbonApplication)(e,S,b)}catch(e){throw g.Debugger.error(e,"error while initializing SDK"),e}const{debug:M,e2e:w}=e.connectors;let{leeloo:B,maverick:k,extension:G,diagnostic:F,api:K}=e.connectors;B=B||(0,i.createEventBus)({events:n.CarbonLeelooConnector}),k=k||(0,i.createEventBus)({events:n.CarbonMaverickConnector}),G=G||(0,i.createEventBus)({events:n.ExtensionCarbonConnector}),F=F||(0,i.createEventBus)({events:n.CarbonDiagnosticConnector}),K=K||(0,i.createEventBus)({events:n.CarbonApiConnector}),M&&(0,d.subscribeToDebugEvents)(M),w&&(0,l.subscribeToE2EEvents)(w,S),(0,a.subscribeToExtensionEvents)(G,S),(0,s.subscribeToLeelooEvents)(B,S),(0,c.subscribeToMaverickEvents)(k,S),(0,u.subscribeToDiagnosticEvents)(F);const V=new h.TsEventBusCommandQueryBus(S,n.CarbonApiConnector,K);return(0,_.bootstrap)(S,V,e?.infrastructure),U.appInitialized({initMode:b,abTestForcedVersion:e.abTestForcedVersion}),S},t.fetchCurrentLocation=function(e,t){return e.country.getCurrentCountry().then((e=>{t.dispatch((0,y.saveCurrentLocation)(e))})).catch((e=>{const t=new Error(`[Sdk/Default] - fetchCurrentLocation: ${e}`);(0,E.sendExceptionLog)({error:t,code:n.ExceptionCriticality.WARNING})}))}},59301:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.initWebServicesConfig=void 0;const o=r(18948),n=r(45051),i=r(45800),a=r(48749),s="https://api--(.*).api-experimental.dashlane.com";function c(e){const t=new RegExp(s,"g"),r=e.matchAll(t).next();if(!r.done)return`https://ws1--${r.value[1]}.api-experimental.dashlane.com`}t.initWebServicesConfig=async function(e,t){const r=await(0,o.firstValueFrom)(t.createClients().webServices.queries.settingsForStaging().pipe((0,o.timeout)(1e3)),{defaultValue:(0,n.failure)(void 0)}),s=(0,n.isSuccess)(r)&&(0,n.getSuccess)(r).api;s?.override?((0,i.setCloudflareHeaders)(s.cloudflareAccessKeyOverride,s.cloudflareSecretKeyOverride),(0,a.setConfig)({DASHLANE_API_HOST_WITH_SCHEME:s.baseUrlOverride,DASHLANE_WS_HOST_WITH_SCHEME:c(s.baseUrlOverride)})):(e.keys.cloudflareAccess&&e.keys.cloudflareSecret&&(0,i.setCloudflareHeaders)(e.keys.cloudflareAccess,e.keys.cloudflareSecret),(0,a.setConfig)({DASHLANE_API_HOST_WITH_SCHEME:e.config.DASHLANE_API_HOST_WITH_SCHEME,DASHLANE_WS_HOST_WITH_SCHEME:e.config.DASHLANE_WS_HOST_WITH_SCHEME??c(e.config.DASHLANE_API_HOST_WITH_SCHEME??"")}))}},73011:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.setupEventBus=void 0;const o=r(17338),n=r(52346),i=r(99293),a=r(24579),s=r(10672),c=r(17387),d=r(33719),u=r(51168),l=r(43057),p=r(63678),S=r(23299),g=r(33045),m=r(63549),A=r(3149),y=r(98202),E=r(46564),f=r(83060);t.setupEventBus=async function(e){const t=(0,o.getCoreServices)(e),r=t.eventBusService,T=[n.setupSubscriptions,p.setupSubscriptions,g.setupSubscriptions,m.setupSubscriptions,i.setupSubscriptions,S.setupSubscriptions,a.setupSubscriptions,l.setupSubscriptions,s.setupSubscriptions,c.setupSubscriptions,u.setupSubscriptions,d.setupSubscriptions,A.setupUserSettingsLogSubscriptions,y.setupSubscriptions,E.setupSubscriptions,f.setupSubscriptions].map((e=>e(r,t)));return await Promise.all(T),r}},10672:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.setupSubscriptions=void 0;const o=r(74318),n=r(18216),i=r(58639);t.setupSubscriptions=function(e,t){e.appInitialized.on((async e=>{const{wsService:r,storeService:a}=t;e.initMode===n.InitMode.FirstInit&&(await(0,o.fetchCurrentLocation)(r,a),(0,i.sendLocationInfo)(a.getPlatform().location))}))}},18216:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.InitMode=void 0,function(e){e.FirstInit="FirstInit",e.Resume="Resume"}(t.InitMode||(t.InitMode={}))},63340:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.makeApplicationModulesAccess=void 0,t.makeApplicationModulesAccess=function(e){return{createClients:()=>e()}}},82568:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.makeApplicationModulesAccess=void 0;var o=r(63340);Object.defineProperty(t,"makeApplicationModulesAccess",{enumerable:!0,get:function(){return o.makeApplicationModulesAccess}})},17338:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getCoreServices=t.carbonServices=t.CarbonServicesTypeEnum=void 0;const o=r(80722),n=r(72365),i=r(98416),a=r(18539),s=r(77627),c=r(89016),d=r(1860),u=r(74752),l=r(93990),p=r(73297),S=r(74412),g=r(82568);var m;!function(e){e.StoreService="StoreService",e.StorageService="StorageService",e.SessionService="SessionService",e.MasterPasswordEncryptorService="MasterPasswordEncryptorService",e.LocalDataEncryptorService="LocalDataEncryptorService",e.RemoteDataEncryptorService="RemoteDataEncryptorService",e.AuthorizationKeysEncryptorService="AuthorizationKeysEncryptorService",e.LocalStorageService="LocalStorageService",e.WSService="WSService",e.AutoLoginService="AutoLoginService",e.WebAuthnAuthenticationService="WebAuthnAuthenticationService",e.EventBusService="EventBusService",e.EventLoggerService="EventLoggerService",e.TeamDeviceEncryptedConfigEncryptorService="TeamDeviceEncryptedConfigEncryptorService",e.ApplicationModulesAccess="ApplicationModulesAccess"}(m=t.CarbonServicesTypeEnum||(t.CarbonServicesTypeEnum={}));t.carbonServices=e=>{const t=(0,o.makeStoreService)({sessionStorage:e.sessionStorage,store:void 0}),r=(0,p.makeEventBusService)(),A=e.masterPasswordEncryptorService?e.masterPasswordEncryptorService():(0,n.makeDataEncryptorService)(t),y=e.localDataEncryptorService?e.localDataEncryptorService():(0,n.makeDataEncryptorService)(t),E=e.remoteDataEncryptorService?e.remoteDataEncryptorService():(0,n.makeDataEncryptorService)(t),f=e.teamDeviceEncryptedConfigEncryptorService?e.teamDeviceEncryptedConfigEncryptorService():(0,n.makeDataEncryptorService)(t),T=(0,d.makeKeyDataEncryptorService)(),v=(0,n.makeDataEncryptorService)(t),h=Object.assign({},(0,c.makeWSService)(),e.wsService?e.wsService(t):{}),_=(0,a.makeStorageService)();_.setInstance(e.storageLayer);const I=e.authorizationKeysEncryptorService?e.authorizationKeysEncryptorService():(0,d.makeKeyDataEncryptorService)();(0,n.setObfuscatingKey)(I);const C=(0,i.makeLocalStorageService)({masterPasswordEncryptorService:A,localDataEncryptorService:y,authorizationKeysEncryptorService:I,autoLoginEncryptorService:T,webAuthnAuthenticationEncryptorService:v,storageService:_,storeService:t}),D=(0,S.makeEventLoggerService)({storeService:t,storageService:_}),O=(0,g.makeApplicationModulesAccess)(e.createClients),P=(0,s.makeSessionService)({applicationModulesAccess:O,masterPasswordEncryptorService:A,localDataEncryptorService:y,remoteDataEncryptorService:E,storeService:t,localStorageService:C,storageService:_,wsService:h,eventBusService:r,eventLoggerService:D,teamDeviceEncryptedConfigEncryptorService:f}),R=(0,u.makeAutoLoginService)({autoLoginEncryptorService:T,localStorageService:C,wsService:h,authorizationKeysEncryptorService:I,storeService:t}),N=(0,l.makeWebAuthnAuthenticationService)({webAuthnAuthenticationEncryptorService:v,storeService:t,localStorageService:C,authorizationKeysEncryptorService:I});return{services:[{type:m.WSService,instance:h},{type:m.StoreService,instance:t},{type:m.StorageService,instance:_},{type:m.LocalStorageService,instance:C},{type:m.SessionService,instance:P},{type:m.AuthorizationKeysEncryptorService,instance:I},{type:m.AutoLoginService,instance:R},{type:m.WebAuthnAuthenticationService,instance:N},{type:m.EventBusService,instance:r},{type:m.MasterPasswordEncryptorService,instance:A},{type:m.RemoteDataEncryptorService,instance:E},{type:m.LocalDataEncryptorService,instance:y},{type:m.EventLoggerService,instance:D},{type:m.TeamDeviceEncryptedConfigEncryptorService,instance:f},{type:m.ApplicationModulesAccess,instance:O}],getInstance:function(e){const t=this.services.find((t=>t.type===e));if(void 0===t)throw new Error("Service "+e+" not defined");return t.instance}}};t.getCoreServices=e=>({storeService:e.getInstance(m.StoreService),remoteDataEncryptorService:e.getInstance(m.RemoteDataEncryptorService),masterPasswordEncryptorService:e.getInstance(m.MasterPasswordEncryptorService),localDataEncryptorService:e.getInstance(m.LocalDataEncryptorService),authorizationKeysEncryptorService:e.getInstance(m.AuthorizationKeysEncryptorService),localStorageService:e.getInstance(m.LocalStorageService),storageService:e.getInstance(m.StorageService),sessionService:e.getInstance(m.SessionService),wsService:e.getInstance(m.WSService),autoLoginService:e.getInstance(m.AutoLoginService),webAuthnAuthenticationService:e.getInstance(m.WebAuthnAuthenticationService),eventBusService:e.getInstance(m.EventBusService),eventLoggerService:e.getInstance(m.EventLoggerService),teamDeviceEncryptedConfigEncryptorService:e.getInstance(m.TeamDeviceEncryptedConfigEncryptorService),applicationModulesAccess:e.getInstance(m.ApplicationModulesAccess)})},34066:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.config=void 0;const o=r(16593),n=r(38981),i=r(25421),a=r(6e3),s=r(81228),c=r(28287),d=r(10447),u=r(38328),l=r(17095),p=r(18203),S=r(94275),g=r(18380);t.config={commands:{validateToken:{handler:c.validateToken},validateMasterPassword:{handler:c.validateMasterPasswordHandler},resetProtectedItemAutofillTimer:{handler:c.resetProtectedItemAutofillTimerHandler},forceSync:{handler:d.forceSyncHandler},updatePremiumChurningDismissDate:{handler:u.updatePremiumChurningDismissDateHandler},setCredentialSearchOrder:{handler:l.setCredentialSearchOrderHandler},refreshSubscriptionInformation:{handler:p.refreshSubscriptionInformationHandler},updateAccountRecoveryKeyPersonalSettings:{handler:S.updateAccountRecoveryKeyPersonalSettingsHandler}},queries:{getActiveSpaces:{selector:o.activeSpacesSelector},getMasterPasswordAndServerKey:{selector:o.masterPasswordAndServerKeySelector},getSyncInfo:{selector:o.syncSelector},getIsSyncInProgress:{selector:o.syncIsInProgressSelector},getPremiumStatus:{selector:o.premiumStatusSelector},getNodePremiumStatus:{selector:o.nodePremiumStatusSelector},getSubscriptionInformation:{selector:o.subscriptionInformationSelector},getIsSSOUser:{selector:n.isSSOUserSelector},getSSOMigrationInfo:{selector:n.ssoMigrationInfoSelector},getSSOProviderInfo:{selector:n.ssoProviderInfoSelector},getUserLogin:{selector:o.userLoginSelector},getPublicUserId:{selector:o.publicUserIdSelector},getAnalyticsInstallationId:{selector:o.analyticsInstallationIdSelector},getUserLoginStatus:{selector:a.loginStatusSelector},getLoginStatus:{selector:a.loginStatusSelector},getWebOnboardingMode:{selector:o.webOnboardingModeSelector},getIsPaymentFailureChurningDismissed:{selector:o.isPaymentFailureChurningDismissedSelector},getCredentialSearchOrder:{selector:o.getCredentialSearchOrderSelector},getDidOpen:{selector:o.didOpenSelector},getPlatformName:{selector:o.platformNameSelector},getAccountAuthenticationType:{selector:i.accountAuthenticationTypeSelector},getSessionInfo:{selector:o.sessionInfoSelector},getUserCryptoSettings:{selector:o.userCryptoSettingsSelector}},liveQueries:{liveSyncInfo:{operator:s.syncInfo$},liveIsSyncInProgress:{operator:s.syncInProgress$},liveLoginStatus:{operator:a.getLoginStatus$},livePremiumStatus:{operator:s.premiumStatus$},liveSubscriptionInformation:{operator:s.subscriptionInformation$},liveServiceProviderUrl:{subject:s.getServiceProviderUrl$},liveWebOnboardingMode:{operator:s.webOnboardingMode$},liveDidOpen:{operator:s.didOpen$},liveIsSSOUser:{operator:g.isSSOUser$},liveSSOMigrationInfo:{operator:g.ssoMigrationInfo$},liveSessionInfo:{operator:s.sessionInfo$}}}},18380:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ssoMigrationInfo$=t.isSSOUser$=void 0;const o=r(38981),n=r(18948);t.isSSOUser$=()=>(0,n.pipe)((0,n.map)(o.isSSOUserSelector));t.ssoMigrationInfo$=()=>(0,n.pipe)((0,n.map)(o.ssoMigrationInfoSelector))},75199:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.refreshCredentialsDedupView=void 0;const o=r(32626),n=r(81200),i=r(47521),a=r(46298),s=r(67331),c=r(70252);t.refreshCredentialsDedupView=async function(e,t){try{const r="web_extension_credentialsDedupView",d=await(0,i.getFeatureFlip)(e,t,r);return(0,a.isApiError)(d)?((0,c.sendExceptionLog)({error:new Error("Failed to get credentialsDedupView value"),code:o.ExceptionCriticality.WARNING}),e.dispatch((0,s.credentialsDedupViewUpdated)((0,n.getDefaultCredentialsDedupView)()))):e.dispatch((0,s.credentialsDedupViewUpdated)({credentialsDedupView:d.enabledFeatures[0]===r}))}catch(t){return(0,c.sendExceptionLog)({error:new Error(`Failed to refreshCredentialsDedupView: ${t.message}`),code:o.ExceptionCriticality.WARNING}),e.dispatch((0,s.credentialsDedupViewUpdated)((0,n.getDefaultCredentialsDedupView)()))}}},54034:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.triggerSendTransactionDecipheringDiagnosticLog=void 0;const o=r(44273),n=r(95623);t.triggerSendTransactionDecipheringDiagnosticLog=function(e){n.default.log("SendDecipheringLog"),(0,o.default)().decipheringDiagnosticLogEvent(e)}},89160:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getUsersSSOInfo=t.loadLocalData=t.completeLogin=t.handleGetAuthenticationMethodsForLoginError=t.cacheIsSso=t.cacheOtpStatus=t.handleDeletedProfiles=t.getLocalProfiles=t.checkLogin=void 0;const o=r(32626),n=r(36272),i=r(2246),a=r(25576),s=r(59489),c=r(86797),d=r(7624),u=r(16356),l=r(56915),p=r(90622),S=r(46298),g=r(17825),m=r(14656),A=r(92263),y=r(1965),E=r(16593);async function f(e,t){return function(e){return e.reduce(((e,t)=>(t.login&&t.deviceAccessKey?e.profiles.push(t):e.ghostProfiles.push(t),e)),{profiles:[],ghostProfiles:[]})}((await(0,p.getLocalAccounts)(e,t)).map((e=>e.login)).map((t=>({login:t,deviceAccessKey:(0,l.getDeviceAccessKeySelector)(e.getState(),t)}))))}async function T(e,t,r){const{profilesToDelete:o}=r;if((o||[]).length>0)return;const n=o.map((e=>e.login));await(0,y.wipeOutLocalAccounts)(e,t,n)}function v(e,t){(0,i.storeUserPublicSetting)(e,"otp2",t===c.OtpType.OTP_LOGIN)}function h(e,t){(0,i.storeUserPublicSetting)(e,"ssoInfos",t)}async function _(e,t,r,n){if(!(0,S.isApiErrorOfType)(S.BusinessError,r))throw new Error(`Failed to getAuthenticationMethodsForLogin (${r.code})`);const i=r.code;switch(i){case S.DeviceDeactivated:throw await(0,y.wipeOutLocalAccounts)(e,t,[n]),new Error(o.AuthenticationCode[o.AuthenticationCode.DEVICE_NOT_REGISTERED]);case S.UserNotFound:case"SSO_BLOCKED":case"invalid_authentication":throw new Error(o.AuthenticationCode[o.AuthenticationCode.TEAM_GENERIC_ERROR]);default:(0,g.assertUnreachable)(i)}}t.checkLogin=async function(e,r,n){const u=e.getState(),p=(0,E.userLoginSelector)(u);let g,y,I;try{const{profiles:t}=await f(e,r),o=(0,l.getDeviceAccessKeySelector)(u,p);if(!o)throw new Error("Unexpectedly missing deviceAccessKey during login");const i=await(0,S.getAuthenticationMethodsForLogin)(e,{login:p,deviceAccessKey:o,methods:a.localSupportedAuthenticationMethod,profiles:t});if((0,S.isApiError)(i))return _(r,n,i,p);T(r,n,i),g=i.verifications,y=i.accountType,e.dispatch((0,s.storeAccountAuthenticationType)(y))}catch(e){if(!(0,A.isCarbonError)(e,m.HttpError))throw e;g=function(e){const t=function(e){const t=(0,i.getUserPublicSetting)(e,"otp2");return t?c.OtpType.OTP_LOGIN:null}(e),r=function(e){const t=(0,i.getUserPublicSetting)(e,"ssoInfos");return t}(e),o=new Array;t===c.OtpType.OTP_LOGIN&&o.push({type:"totp"});r&&o.push({type:"sso",ssoInfo:{serviceProviderUrl:""}});return o}(p)}const C=g.find((e=>"sso"===e.type));return I=C?.ssoInfo.serviceProviderUrl&&"mp_user_to_sso_member"!==C?.ssoInfo.migration?o.AuthenticationCode.SSO_LOGIN_BYPASS:function(e,t=[]){const r=t.find((e=>"sso"===e.type));h(e,!!r);const n=function(e){const t=e.some((e=>"totp"===e.type));if(t)return c.OtpType.OTP_LOGIN;const r=e.filter((e=>"sso"!==e.type));if(r.length>0)throw new Error("Unsupported 2FA method requested");return null}(t);if(v(e,n),n===c.OtpType.OTP_LOGIN)return o.AuthenticationCode.ASK_OTP;if(r&&"mp_user_to_sso_member"!==r.ssoInfo.migration)return o.AuthenticationCode.SSO_LOGIN_BYPASS;return o.AuthenticationCode.ASK_MASTER_PASSWORD}(p,g),h(p,!!C),function(e,r,n,i){switch(e){case o.AuthenticationCode.SSO_LOGIN_BYPASS:if(!n?.serviceProviderUrl)throw new Error("[LocalAuthentication] - Unable to use SSO verification. Missing SSO information.");r.dispatch((0,d.storeSSOSettings)({ssoUser:!0,...(0,t.getUsersSSOInfo)(n)}));break;case o.AuthenticationCode.ASK_OTP:r.dispatch((0,s.enableOtp)(c.OtpType.OTP_LOGIN))}e!==o.AuthenticationCode.SSO_LOGIN_BYPASS&&r.dispatch((0,d.storeSSOSettings)({ssoUser:!1,...(0,t.getUsersSSOInfo)(n)}));r.dispatch((0,s.storeAccountAuthenticationType)(i))}(I,e,C?C.ssoInfo:void 0,y),I},t.getLocalProfiles=f,t.handleDeletedProfiles=T,t.cacheOtpStatus=v,t.cacheIsSso=h,t.handleGetAuthenticationMethodsForLoginError=_,t.completeLogin=async function(e,t,r,n,i){const a=e.getUserLogin(),s={login:a,deviceAccessKey:(0,l.getDeviceAccessKeySelector)(e.getState(),a),authTicket:n},c=await(0,S.completeLoginWithAuthTicket)(e,s);if((0,S.isApiError)(c))return async function(e,t,r,n){if(!(0,S.isApiErrorOfType)(S.BusinessError,r))throw new Error(`Failed to complete login (${r.code})`);const i=r.code;switch(i){case"DEVICE_NOT_FOUND":case"DEACTIVATED_DEVICE":throw await(0,y.wipeOutLocalAccounts)(e,t,[n]),new Error(o.AuthenticationCode[o.AuthenticationCode.DEVICE_NOT_REGISTERED]);case S.InvalidAuthTicket:throw new Error(o.AuthenticationCode[o.AuthenticationCode.TOKEN_NOT_VALID]);default:(0,g.assertUnreachable)(i)}}(t,r,c,a);const{serverKey:d}=c;if(!d)throw new Error(o.AuthenticationCode[o.AuthenticationCode.SERVER_KEY_MISSING]);return e.dispatch((0,u.updateisUsingDashlaneAuthenticator)(i)),e.dispatch((0,u.updateServerKey)(d)),o.AuthenticationCode.ASK_MASTER_PASSWORD},t.loadLocalData=async function(e,t,r){return r.getInstance().prepareCrypto(),await e.getInstance().user.loadSessionData(),t.dispatch((0,s.localDataLoaded)()),o.AuthenticationCode.LOGGEDIN};t.getUsersSSOInfo=e=>{if(!e)return{serviceProviderUrl:""};const t=(e=>{if(e.migration)switch(e.migration){case"mp_user_to_sso_member":return n.AuthenticationFlowContracts.SSOMigrationType.MP_TO_SSO;case"sso_member_to_admin":case"sso_member_to_mp_user":return n.AuthenticationFlowContracts.SSOMigrationType.SSO_TO_MP}})(e);return{serviceProviderUrl:e.serviceProviderUrl?e.serviceProviderUrl:"",...void 0!==t?{migration:t}:{},isNitroProvider:e.isNitroProvider}}},6e3:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getLoginStatus$=t.loginStatusSelector=void 0;const o=r(32034),n=r(16516),i=r(18948),a=r(3343),s=r(27754),c=r(38981),d=(0,o.createSelector)(s.sessionIdSelector,(e=>e.userSession.account.isAuthenticated),((e,t)=>e&&t));t.loginStatusSelector=(0,o.createSelector)(d,(e=>e.userSession.account),c.ssoMigrationInfoSelector,((e,t,r)=>{if(!e)return{login:null,loggedIn:!1,needsSSOMigration:!1};const{isAuthenticated:o,login:n}=t;return{loggedIn:o,login:n,needsSSOMigration:void 0!==r}}));t.getLoginStatus$=()=>(0,i.pipe)((0,a.map)(t.loginStatusSelector),(0,a.distinctUntilChanged)(n.equals))},38865:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.updateWebOnboardingMode=void 0;const o=r(76089),n=r(58639);t.updateWebOnboardingMode=function(e,t,r){if(!e.isAuthenticated())throw new Error("No session set");e.dispatch(o.webOnboardingModeUpdated(r));const i=e.getLocalSettings().webOnboardingMode;n.sendWebOnboardingModeUpdate(i),t.getInstance().user.persistLocalSettings()}},36960:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.makeDashlaneApiPairingService=void 0;const o=r(46298),n=r(95623);t.makeDashlaneApiPairingService=e=>({requestPairing:t=>(async(e,t)=>{try{const r=await o.requestPairing(e,t);if(o.isApiError(r))throw r;return r.pairingId?{pairingId:r.pairingId}:void 0}catch(e){return void(0,n.logError)({message:`Pairing request failed: ${e}`})}})(e,t)})},15718:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.pairingIdSelector=t.isPairingEnabledSelector=void 0;t.isPairingEnabledSelector=e=>Boolean(e.userSession.session.pairingId);t.pairingIdSelector=e=>e.userSession.session.pairingId},10824:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.requestPairing=void 0;const o=r(15718),n=r(2246),i=r(16356),a=r(36960);t.requestPairing=async(e,t)=>{const r=e.getState();if((0,o.pairingIdSelector)(r))return;if(!(0,n.getSyncAppSetting)("syncWithLocalClients"))return;const s=(0,a.makeDashlaneApiPairingService)(e),c=await s.requestPairing(t),d=c?.pairingId;d&&e.dispatch((0,i.pairingSucceeded)(d))}},35507:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.transformNodePremiumStatus=t.getFreshPremiumStatus=t.refreshSubscriptionInformation=t.refreshPremiumStatus=void 0;const o=r(16516),n=r(32626),i=r(95623),a=r(70252),s=r(48313),c=r(66833),d=r(25576),u=r(25011),l=r(31375),p=r(76089),S=r(46298);async function g(e,t){const r=e.getLocalSettings().subscriptionInformation;try{const r=await(0,l.getSubscriptionInformation)(e,t);if((0,S.isApiError)(r))throw new Error(`${r.message} (code: ${r.code})`);return e.dispatch((0,p.localSettingsSubscriptionInformationStatusUpdated)(r)),r}catch(e){const t=new Error(`[PremiumController] - refreshUserSubscriptionStatus: ${e}`);if(i.default.error(t),(0,a.sendExceptionLog)({error:t}),r)return r;throw e}}t.refreshPremiumStatus=async function(e,t,r,o){const n=e.getLocalSettings().premiumStatus,d=e.getLocalSettings().nodePremiumStatus,l=!d?.currentTimestampUnix||Date.now()-d.currentTimestampUnix>1e4;if(d&&!l)return n;try{const[n,i]=await Promise.all([y(t,r,o),(0,u.getPremiumStatus)(e,r).then((e=>{if((0,S.isApiError)(e))throw new Error(`${e.message} (code: ${e.code})`);return e})),g(e,r)]),a=n?.spaces||[],d=_(i),l={...n,planName:n?.planName?.toLowerCase()??null};return e.dispatch((0,s.premiumStatusUpdated)(l)),e.dispatch((0,p.localSettingsNodePremiumStatusUpdated)(d)),(0,c.refreshSpaceData)(e,a),n}catch(e){const t=new Error(`[PremiumController] - refreshPremiumStatus: ${e}`);if(i.default.error(t),(0,a.sendExceptionLog)({error:t}),n)return n;throw e}},t.refreshSubscriptionInformation=g;const m=e=>{if(!e.capabilities||!e.capabilities.length)return;return e.capabilities.reduce(((e,t)=>{const{capability:r,...o}=t;return e[r]=o,e}),{})},A=e=>e.familyMembership?e.familyMembership[0]:void 0;function y(e,t,r){return e.premium.status({login:t,uki:r,billingInformation:!0,spaces:!0,autoRenewal:!0,familyInformation:!0,previousPlan:!0,needsAutoRenewalFailed:!0}).then((e=>{const t=(0,o.pick)(["statusCode","billingInformation","planName","planType","planFeature","endDate","spaces","autoRenewal","previousPlan","autoRenewalFailed","autoRenewInfo","recoveryHash"],e);return t.capabilities=m(e),e.hasOwnProperty("familyMembership")&&(t.familyMembership=A(e)),t}))}t.getFreshPremiumStatus=y;const E=e=>{if(e.capabilities?.length)return e.capabilities.reduce(((e,t)=>{const{capability:r,...o}=t;return e[r]=o,e}),{})},f=e=>{switch(e.b2cStatus.statusCode){case d.B2CStatusCode.Subscribed:return e.b2cStatus.planName.includes("grace")?n.PremiumStatusCode.GRACE_PERIOD:e.b2cStatus.isTrial?n.PremiumStatusCode.NEW_USER:e.b2cStatus.autoRenewal?n.PremiumStatusCode.PREMIUM_CANCELLED:n.PremiumStatusCode.PREMIUM;case d.B2CStatusCode.Legacy:return n.PremiumStatusCode.OLD_ACCOUNT;case d.B2CStatusCode.Free:default:return n.PremiumStatusCode.NO_PREMIUM}};function T(e){return e.map((e=>({login:e})))}function v(e){const t=[];return e.currentTeam&&t.push({associatedEmail:e.currentTeam.associatedEmail,billingAdmins:T(e.currentTeam.teamMembership.billingAdmins),color:e.currentTeam.teamInfo.color,companyName:e.currentTeam.teamInfo.name,info:{...e.currentTeam.teamInfo},invitationDate:e.currentTeam.invitationDateUnix,isBillingAdmin:e.currentTeam.teamMembership.isBillingAdmin,isSSOUser:e.currentTeam.teamMembership.isSSOUser,isTeamAdmin:e.currentTeam.teamMembership.isTeamAdmin,isGroupManager:e.currentTeam.teamMembership.isGroupManager,joinDate:e.currentTeam.joinDateUnix,letter:e.currentTeam.teamInfo.letter,membersNumber:e.currentTeam.teamInfo.membersNumber,planType:e.currentTeam.teamInfo.planType,revokeDate:null,shouldDelete:!1,status:n.SpaceStatus.Accepted,teamAdmins:T(e.currentTeam.teamMembership.teamAdmins),teamId:e.currentTeam.teamId.toString(),teamName:e.currentTeam.teamName,tier:e.currentTeam.planFeature}),e.pastTeams&&e.pastTeams.forEach((e=>{t.push({associatedEmail:e.associatedEmail,billingAdmins:T(e.teamMembership.billingAdmins),color:e.teamInfo.color,companyName:e.teamName,info:{...e.teamInfo},invitationDate:e.invitationDateUnix,isBillingAdmin:e.teamMembership.isBillingAdmin,isSSOUser:e.teamMembership.isSSOUser,isTeamAdmin:e.teamMembership.isTeamAdmin,isGroupManager:e.teamMembership.isGroupManager,joinDate:e.joinDateUnix,letter:e.teamInfo.letter,membersNumber:e.teamInfo.membersNumber,planType:e.teamInfo.planType,revokeDate:e.revokeDateUnix,shouldDelete:e.shouldDelete,status:e.status,teamAdmins:T(e.teamMembership.teamAdmins),teamId:e.teamId.toString(),teamName:e.teamName,tier:e.planFeature})})),t}function h(e){return{...e,teamMembership:{...e.teamMembership,billingAdmins:T(e.teamMembership.billingAdmins),teamAdmins:T(e.teamMembership.teamAdmins)}}}function _(e){const t=e.b2bStatus?.currentTeam?{currentTeam:(r=e.b2bStatus.currentTeam,{...r,teamMembership:{...r.teamMembership,billingAdmins:r.teamMembership.billingAdmins.map((e=>({login:e}))),teamAdmins:r.teamMembership.teamAdmins.map((e=>({login:e})))}})}:{};var r;const o=e.b2bStatus?.pastTeams?{pastTeams:e.b2bStatus.pastTeams.map(h)}:{};return{...e.b2cStatus,planName:e.b2cStatus?.planName?.toLowerCase()??null,currentTimestampUnix:Date.now(),isTrial:e.b2cStatus.isTrial,statusCode:f(e),spaces:e.b2bStatus?v(e.b2bStatus):[],b2bStatus:{statusCode:e.b2bStatus?.statusCode,hasPaid:e.b2bStatus?.hasPaid,...t,...o},capabilities:E(e)}}t.transformNodePremiumStatus=_},70414:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getUsersSSOInfo=t.validateMasterPassword=t.registerDevice=t.registerDeviceWithToken=t.registerDeviceWithDashlaneAuthenticator=t.cancelRegistrationWithDashlaneAuthenticator=t.generateUki=t.askServerToSendToken=t.checkLoginWithUki=t.requestDeviceRegistration=t.SendTokenStatus=void 0;const o=r(35088),n=r(16516),i=r(32626),a=r(36272),s=r(25576),c=r(95623),d=r(76089),u=r(86797),l=r(59489),p=r(25963),S=r(63713),g=r(48313),m=r(16038),A=r(64910),y=r(33769),E=r(56668),f=r(16356),T=r(72609),v=r(7624),h=r(43739);var _=r(72636);Object.defineProperty(t,"SendTokenStatus",{enumerable:!0,get:function(){return _.SendTokenStatus}});const I=r(17825),C=r(19399),D=r(28287),O=r(16593),P=r(46298),R=r(70252),N=r(92263);let L,b;t.requestDeviceRegistration=async function(e){const r=e.getAccountInfo().login,o=await(0,P.getAuthenticationMethodsForDevice)(e,{login:r,methods:s.remoteSupportedAuthenticationMethod});if((0,P.isApiError)(o))return function(e){if(!(0,P.isApiErrorOfType)(P.BusinessError,e))throw new Error(`Failed to getAuthenticationMethodsForDevice (${e.code})`);const t=e.code;switch(t){case P.UserNotFound:throw new Error(i.AuthenticationCode[i.AuthenticationCode.USER_DOESNT_EXIST]);case P.SSOBlocked:throw new Error(i.AuthenticationCode[i.AuthenticationCode.SSO_BLOCKED]);case P.TeamGenericError:case"expired_version":throw new Error(i.AuthenticationCode[i.AuthenticationCode.TEAM_GENERIC_ERROR]);case"DEACTIVATED_USER":throw new Error("Unsupported DEACTIVATED_USER");default:(0,I.assertUnreachable)(t)}}(o);const{verifications:n,accountType:a}=o;if(!n)throw new Error("[requestDeviceRegistration] - No verification in API response.");let c;const d=n.find((e=>"sso"===e.type));return c=d?.ssoInfo.serviceProviderUrl&&"mp_user_to_sso_member"!==d?.ssoInfo.migration?i.AuthenticationCode.SSO_LOGIN_BYPASS:function(e=[]){if(e.some((({type:e})=>"email_token"===e)))return i.AuthenticationCode.ASK_TOKEN;if(e.some((({type:e})=>"totp"===e)))return i.AuthenticationCode.ASK_OTP_FOR_NEW_DEVICE;if(e.some((({type:e})=>"dashlane_authenticator"===e)))return i.AuthenticationCode.ASK_DASHLANE_AUTHENTICATOR;throw new Error("[requestDeviceRegistration - getVerificationType] - Verification not supported!")}(n),function(e,r,o,n){if(e===i.AuthenticationCode.SSO_LOGIN_BYPASS){if(!o?.serviceProviderUrl)throw new Error("[requestDeviceRegistration - processVerification] - Unable to use SSO verification. Missing SSO information.");r.dispatch((0,v.storeSSOSettings)({ssoUser:!0,...(0,t.getUsersSSOInfo)(o)}))}e!==i.AuthenticationCode.SSO_LOGIN_BYPASS&&r.dispatch((0,v.storeSSOSettings)({ssoUser:!1,...(0,t.getUsersSSOInfo)(o)}));r.dispatch((0,l.storeAccountAuthenticationType)(n))}(c,e,d?d.ssoInfo:void 0,a),c},t.checkLoginWithUki=async function(e,t,r){const o=e.getAccountInfo().login;if(!await async function(e,t,r){const o=await e.authentication.validity({login:t,uki:r});return"UKI VALID"===o}(t,o,r))throw new Error(i.AuthenticationCode[i.AuthenticationCode.INVALID_UKI]);return e.dispatch((0,l.confirmUserAuthentication)()),Promise.resolve(i.AuthenticationCode.USE_LOCAL_UKI)},t.askServerToSendToken=async function(e,t){const r=await(0,P.requestEmailTokenVerification)(e,{login:t});if((0,P.isApiError)(r))throw c.default.log(`Server failed to send a token with response: ${r.message}`),new Error(i.AuthenticationCode[i.AuthenticationCode.SEND_TOKEN_FAILED])};const U=(e,t)=>{t?e.dispatch((0,l.enableOtp)(u.OtpType.OTP_LOGIN)):e.dispatch((0,l.enableOtp)(u.OtpType.OTP_NEW_DEVICE))};t.generateUki=function(e){return`${e}-${(0,o.v4)()}`};const M=async(e,t,r,o,n,i)=>{const a=i||T.device.getDefaultDeviceName(),c=e.getPlatformInfo(),d=(0,C.secureDeviceName)(a);if("server_carbon_unknown"===c.platformName)throw new Error("Unexpected uninitialized platform info");const u={deviceName:d,appVersion:c.appVersion,platform:c.platformName,osCountry:(0,P.makeSafeCountry)(e.getLocation().country||c.country),osLanguage:(0,P.makeSafeLanguage)(c.lang),temporary:r!==s.PersistData.PERSIST_DATA_YES};switch(t.type){case"extraDeviceToken":return{...await(0,P.completeExtraDeviceRegistrationWithToken)(e,{device:u,login:n,verification:{token:(0,s.extractExtraDeviceToken)(t)}}),ssoServerKey:null};case"emailToken":case"otp":case"sso":return(0,P.completeDeviceRegistrationWithAuthTicket)(e,{device:u,login:n,authTicket:o});default:(0,I.assertUnreachable)(t)}},w=(e,t,r,o)=>{const n=o||T.device.getDefaultDeviceName(),i=e.getPlatformInfo(),a=e.getAccountInfo().login,c=(0,C.secureDeviceName)(n);if("server_carbon_unknown"===i.platformName)throw new Error("Unexpected unitiliazed platform info");const d={deviceName:c,appVersion:i.appVersion,platform:i.platformName,osCountry:(0,P.makeSafeCountry)(e.getLocation().country||i.country),osLanguage:(0,P.makeSafeLanguage)(i.lang),temporary:t!==s.PersistData.PERSIST_DATA_YES};return(0,P.completeDeviceRegistrationWithAuthTicket)(e,{device:d,login:a,authTicket:r})},B=async(e,t)=>{const r=await(0,D.dashlaneAuthenticatorGetAuthTicket)(e,t);if(!1===r.success){const{error:{code:e,message:t}}=r;if(e===i.AuthenticationCode.BUSINESS_ERROR)throw new Error(t);throw new Error(i.AuthenticationCode[e])}return L?.(s.CancelDashlaneAuthenticatorRegistration.COMPLETED),r.authTicket};t.cancelRegistrationWithDashlaneAuthenticator=function(){b?.(s.CancelDashlaneAuthenticatorRegistration.CANCELLED)},t.registerDeviceWithDashlaneAuthenticator=async function(e,t,r,o){const n=new Promise(((e,t)=>{L=e,b=t}));let a;try{a=(await Promise.all([B(e,o),n]))[0]}catch(e){if(e===s.CancelDashlaneAuthenticatorRegistration.CANCELLED)return i.AuthenticationCode.DASHLANE_AUTHENTICATOR_LOGIN_CANCELLED;throw e}finally{b=void 0,L=void 0}if(a){const n=await w(e,t,a,o);(0,P.isApiError)(n)&&function(e){if(!(0,P.isApiErrorOfType)(P.BusinessError,e))throw new Error(`Failed to complete device registration (${e.code})`);const t=e.code;if(t===P.InvalidAuthTicket)throw new Error(i.AuthenticationCode[i.AuthenticationCode.DASHLANE_AUTHENTICATOR_PUSH_NOTIFICATION_DENIED]);(0,I.assertUnreachable)(t)}(n),e.dispatch((0,f.updateisUsingDashlaneAuthenticator)(!0)),e.dispatch((0,f.updateisUsingBackupCode)(!1));const{deviceAccessKey:s,deviceSecretKey:c,settings:d,serverKey:u,deviceAnalyticsId:l,userAnalyticsId:p,publicUserId:S}=n;return G(e,{login:r,deviceAccessKey:s,deviceSecretKey:c,settings:d,serverKey:u,deviceAnalyticsId:l,userAnalyticsId:p,publicUserId:S,isDataPersisted:t}),i.AuthenticationCode.ASK_MASTER_PASSWORD}throw new Error("Authentication Ticket is missing")};const k=async(e,t)=>{const r=await(0,D.convertTokenToAuthTicket)(e,t);if(!1===r.success){const{error:{code:e,message:t}}=r;if(e===i.AuthenticationCode.BUSINESS_ERROR)throw new Error(t);throw new Error(i.AuthenticationCode[e])}return r.authTicket};async function G(e,t){const{deviceAccessKey:r,deviceSecretKey:o,settings:n,serverKey:i,deviceAnalyticsId:a,userAnalyticsId:s,publicUserId:c,isDataPersisted:u,deviceName:l,login:p}=t;if(e.dispatch((0,h.deviceRegistered)((0,h.makeDeviceRegistrationKeys)(r,o),u,p)),i&&e.dispatch((0,f.updateServerKey)(i)),e.dispatch((0,f.updateSettingsForMPValidation)(n)),a&&e.dispatch((0,f.updateDeviceAnalyticsId)(a)),s&&e.dispatch((0,f.updateUserAnalyticsId)(s)),c&&e.dispatch((0,f.updatePublicUserId)(c)),l){const t=(0,C.secureDeviceName)(l);e.dispatch(d.registerDeviceName(t))}e.dispatch((0,h.deviceRegistered)((0,h.makeDeviceRegistrationKeys)(r,o),u,p))}t.registerDeviceWithToken=async function(e,t,r,o,a,s,c){const d=await k(e,r),u=await M(e,r,t,d,a,s);if((0,P.isApiError)(u))return function(e,t){if(!(0,P.isApiErrorOfType)(P.BusinessError,e))throw new Error(`Failed to complete device registration (${e.code})`);const r=e.code;switch(r){case P.UserNotFound:throw new Error(i.AuthenticationCode[i.AuthenticationCode.INVALID_LOGIN]);case P.VerificationFailed:case P.InvalidAuthTicket:if("otp"===t.type)throw new Error(i.AuthenticationCode[i.AuthenticationCode.OTP_NOT_VALID]);throw new Error(i.AuthenticationCode[i.AuthenticationCode.TOKEN_NOT_VALID]);case P.VerificationMethodDisabled:throw new Error(i.AuthenticationCode[i.AuthenticationCode.REGISTER_DEVICE_FAILED]);case"TEMPORARY_DEVICE_FORBIDDEN":throw new Error(i.AuthenticationCode[i.AuthenticationCode.TEAM_GENERIC_ERROR]);default:(0,I.assertUnreachable)(r)}}(u,r);const{deviceAccessKey:l,deviceSecretKey:p,settings:S,serverKey:g,ssoServerKey:T,remoteKeys:v,deviceAnalyticsId:h,userAnalyticsId:_,publicUserId:C}=u;if(T){const{masterPasswordEncryptorService:t,remoteDataEncryptorService:r,ssoServiceProviderKey:o}=c;if(!v||(0,n.isEmpty)(v))throw new Error("registerDevice failed with error: ssoServerKey or remoteKeys is missing");const i=(0,m.base64ToBuffer)(T),a=v.filter((e=>"sso"===e.type))[0];try{const n=(0,m.base64ToBuffer)(o),s=(0,y.getEncryptionKeyBuffer)(n,i,{skipDerivation:!0}),c=(0,m.arrayBufferToText)(s),d="",u=(0,A.getNoDerivationCryptoConfig)();e.dispatch((0,f.updateMasterPassword)(c)),t.setInstance({raw:c},d,u);const l=await t.getInstance().decrypt(a.key),p=(0,E.deflatedUtf8ToUtf16)(l,{skipUtf8Decoding:!0,skipInflate:!0});r.setInstance({raw:p},d,u),e.dispatch((0,f.updateRemoteKey)(p))}catch(e){throw new Error(`registerDevice failed deciphering remoteKey with error: ${e}`)}}return e.dispatch((0,f.updateisUsingDashlaneAuthenticator)(!1)),e.dispatch((0,f.updateisUsingBackupCode)(o)),"otp"===r?.type&&U(e,g),G(e,{deviceAccessKey:l,deviceSecretKey:p,settings:S,serverKey:g,deviceAnalyticsId:h,userAnalyticsId:_,publicUserId:C,isDataPersisted:t,login:a}),i.AuthenticationCode.ASK_MASTER_PASSWORD},t.registerDevice=G,t.validateMasterPassword=async function(e,t){try{const r=e.getState(),o=(0,O.masterPasswordValidationDataSelector)(r),n=e=>{},[a]=await S.decrypt(t.getInstance(),n,null,new Map,[o]);return e.dispatch((0,g.applyTransactions)([a])),e.dispatch(d.registerLastSync(p.MIN_SYNC_TIMESTAMP)),i.AuthenticationCode.LOGGEDIN}catch(e){const t=N.CarbonError.fromAnyError(e).addContextInfo("REMOTE LOGIN","validateMasterPassword");throw(0,R.sendExceptionLog)({error:t}),new Error(i.AuthenticationCode[i.AuthenticationCode.WRONG_PASSWORD])}};t.getUsersSSOInfo=e=>{if(!e)return{serviceProviderUrl:""};const t=(e=>{if(e.migration)switch(e.migration){case"mp_user_to_sso_member":return a.AuthenticationFlowContracts.SSOMigrationType.MP_TO_SSO;case"sso_member_to_admin":case"sso_member_to_mp_user":return a.AuthenticationFlowContracts.SSOMigrationType.SSO_TO_MP}})(e);return{serviceProviderUrl:e.serviceProviderUrl?e.serviceProviderUrl:"",...void 0!==t?{migration:t}:{},isNitroProvider:e.isNitroProvider}}},58639:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.sendFeatures=t.sendWebOnboardingModeUpdate=t.sendTeamAdminDataUpdate=t.changeDeviceNameResult=t.deactivateDeviceResult=t.updatePaymentCardTokenResult=t.reportDataUpdate=t.sendLocationInfo=t.sendLocalAccounts=t.triggerSessionSyncStatus=t.triggerSessionOpened=t.triggerOpenSessionFailed=t.getAuthenticationCodeFromError=t.triggerServerSidePairingStatusChanged=t.triggerLoginStatusChanged=t.triggerOpenSessionMasterPasswordLess=t.triggerOpenSessionSsoRedirectionToIdpRequired=t.triggerOpenSessionExtraDeviceTokenRequired=t.triggerOpenSessionDashlaneAuthenticator=t.triggerOpenSessionTokenSent=t.triggerAskMasterPassword=t.triggerOpenSessionOTPForNewDeviceRequired=t.triggerOpenSessionOTPSent=t.SessionResumingCode=t.AuthenticationCode=void 0;const o=r(32626);Object.defineProperty(t,"AuthenticationCode",{enumerable:!0,get:function(){return o.AuthenticationCode}});const n=r(21726),i=r(19697),a=r(70252),s=r(95623),c=r(92263),d=r(14656),u=r(90622),l=r(25576);Object.defineProperty(t,"SessionResumingCode",{enumerable:!0,get:function(){return l.SessionResumingCode}});const p=r(38981),S=r(27885);function g(e){s.default.log(`Session status updated for ${e.login}`);const t=(0,n.default)();t&&t.loginStatusChanged(e);const r=(0,i.default)();r&&r.loginStatusChanged(e)}function m(e){if(i.default){const t=(0,i.default)();t&&t.serverSidePairingStatusChanged(e)}}function A(e){let t=e&&e.message&&void 0!==o.AuthenticationCode[e.message]?o.AuthenticationCode[e.message]:o.AuthenticationCode.UNKNOWN_ERROR;return t===o.AuthenticationCode.UNKNOWN_ERROR&&((0,c.isCarbonError)(e,d.HttpError,d.HttpErrorCode.NETWORK_ERROR)&&(t=o.AuthenticationCode.NETWORK_ERROR),e?.message?.includes("TOKEN_NOT_VALID")&&(t=o.AuthenticationCode.TOKEN_NOT_VALID)),t}function y(e){switch(e){case o.AuthenticationCode.INVALID_LOGIN:case o.AuthenticationCode.EMPTY_LOGIN:case o.AuthenticationCode.EMPTY_MASTER_PASSWORD:case o.AuthenticationCode.EMPTY_TOKEN:case o.AuthenticationCode.EMPTY_OTP:case o.AuthenticationCode.NETWORK_ERROR:case o.AuthenticationCode.USER_DOESNT_EXIST:case o.AuthenticationCode.OTP_NOT_VALID:case o.AuthenticationCode.TOKEN_NOT_VALID:case o.AuthenticationCode.TOKEN_TOO_MANY_ATTEMPTS:case o.AuthenticationCode.WRONG_PASSWORD:return o.ExceptionCriticality.WARNING;default:return o.ExceptionCriticality.ERROR}}function E(e){return Promise.resolve({localAccounts:e}).then((e=>{s.default.log("send localAccountsListUpdated to leeloo");const t=(0,n.default)();t&&t.localAccountsListUpdated(e);const r=(0,i.default)();r&&r.localAccountsListUpdated(e)}))}function f(e){const t=e.getSpaceData(),r=(0,S.getNodePremiumStatusSpaceData)(e),{spaces:o}=r,n=o.reduce(((e,t)=>{const{isTeamAdmin:r,isBillingAdmin:o,isGroupManager:n}=t.details;return{isTeamAdmin:r||e.isTeamAdmin,isBillingAdmin:o||e.isBillingAdmin,isGroupManager:Boolean(n)||e.isGroupManager}}),{isTeamAdmin:!1,isBillingAdmin:!1,isGroupManager:!1}),a=(0,i.default)();a&&a.spaceDataUpdated({...t,rights:n})}function T(e){const t=(0,n.default)();t&&t.webOnboardingModeUpdated(e);const r=(0,i.default)();r&&r.webOnboardingModeUpdated(e)}t.triggerOpenSessionOTPSent=function(e){s.default.log("Ask for OTP");const t=(0,n.default)();t&&t.openSessionOTPSent(e);const r=(0,i.default)();r&&r.openSessionOTPSent(e)},t.triggerOpenSessionOTPForNewDeviceRequired=function(){const e=(0,n.default)();e&&e.openSessionOTPForNewDeviceRequired();const t=(0,i.default)();t&&t.openSessionOTPForNewDeviceRequired()},t.triggerAskMasterPassword=function(e){s.default.log("Ask for master password");const t=(0,n.default)();t&&t.openSessionAskMasterPassword({login:e});const r=(0,i.default)();r&&r.openSessionAskMasterPassword({login:e})},t.triggerOpenSessionTokenSent=function(e){s.default.log("Ask for new device e-mail token");const t=(0,n.default)();t&&t.openSessionTokenSent(e);const r=(0,i.default)();r&&r.openSessionTokenSent(e)},t.triggerOpenSessionDashlaneAuthenticator=function(){(0,s.logDebug)({message:"Ask for new device dashlane authenticator push notification"});const e=(0,n.default)();e&&e.openSessionDashlaneAuthenticator();const t=(0,i.default)();t&&t.openSessionDashlaneAuthenticator()},t.triggerOpenSessionExtraDeviceTokenRequired=function(){const e=(0,n.default)();e&&e.openSessionExtraDeviceTokenRequired();const t=(0,i.default)();t&&t.openSessionExtraDeviceTokenRequired()},t.triggerOpenSessionSsoRedirectionToIdpRequired=function(e,t){const r=(0,n.default)();r&&r.openSessionSsoRedirectionToIdpRequired({serviceProviderRedirectUrl:e,isNitroProvider:t});const o=(0,i.default)();o&&o.openSessionSsoRedirectionToIdpRequired({serviceProviderRedirectUrl:e,isNitroProvider:t})},t.triggerOpenSessionMasterPasswordLess=function(){const e=(0,n.default)();e&&e.openSessionMasterPasswordLess();const t=(0,i.default)();t&&t.openSessionMasterPasswordLess()},t.triggerLoginStatusChanged=g,t.triggerServerSidePairingStatusChanged=m,t.getAuthenticationCodeFromError=A,t.triggerOpenSessionFailed=function(e){s.default.log("Failed to open Session"),s.default.log(`error: ${e}`);const t=A(e),r=t===o.AuthenticationCode.UNKNOWN_ERROR?e&&e.message&&"string"==typeof e.message?e.message:"89645128":"",c=new Error(`[SessionCommunication] - triggerOpenSessionFailed: ${e}`);c.stack=e.stack,s.default.error(c),(0,a.sendExceptionLog)({error:c,code:y(t)});const d={errorCode:o.AuthenticationCode[t],additionalErrorInfo:r,displayErrorCode:!0},u=(0,n.default)();u&&u.openSessionFailed(d);const l=(0,i.default)();l&&l.openSessionFailed(d)},t.triggerSessionOpened=function(e,t,r){const n=void 0!==(0,p.ssoMigrationInfoSelector)(e.getState()).migration;if(g({loggedIn:!0,login:e.getAccountInfo().login,needsSSOMigration:n}),f(e),T(e.getLocalSettings().webOnboardingMode),(0,u.getLocalAccounts)(e,t).then((e=>{E(e)})),void 0!==r){m({serverSidePairingStatus:r?o.ServerSidePairingStatus.PAIRED:o.ServerSidePairingStatus.UNPAIRED})}},t.triggerSessionSyncStatus=function(e){const t=(0,n.default)();t&&t.sessionSyncStatus(e);const r=(0,i.default)();r&&r.sessionSyncStatus(e)},t.sendLocalAccounts=E,t.sendLocationInfo=function(e){const t=(0,i.default)();t&&t.currentLocationUpdated(e)},t.reportDataUpdate=f,t.updatePaymentCardTokenResult=function(e){const t=(0,i.default)();t&&t.updatePaymentCardTokenResult(e)},t.deactivateDeviceResult=function(e){const t=(0,n.default)();t&&t.deactivateDeviceResult(e);const r=(0,i.default)();r&&r.deactivateDeviceResult(e)},t.changeDeviceNameResult=function(e){const t=(0,n.default)();t&&t.changeDeviceNameResult(e);const r=(0,i.default)();r&&r.changeDeviceNameResult(e)},t.sendTeamAdminDataUpdate=function(e){const t=(0,i.default)();t&&t.teamAdminDataUpdated(e)},t.sendWebOnboardingModeUpdate=T,t.sendFeatures=function(e){const t=(0,n.default)();t&&t.accountFeaturesChanged(e);const r=(0,i.default)();r&&r.accountFeaturesChanged(e)}},5464:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.refeshAccountInfo=t.AutofillProtectionStatus=t.askWebsiteInfo=t.saveGeneratedPassword=t.generatePassword=t.getPasswordGenerationSettings=t.generateAndSavePassword=t.resumeSession=t.sessionForceSync=t.getAndTriggerRefreshAccountInfo=t.makeSessionController=void 0;const o=r(21877),n=r(50415),i=r(95623),a=r(58639),s=r(95648),c=r(70252),d=r(44908),u=r(35507),l=r(29954),p=r(9486),S=r(19399),g=r(56915),m=r(16593),A=r(28287),y=r(34376),E=r(27885),f=r(22021);t.makeSessionController=e=>({askWebsiteInfo:t=>R(e.storeService,t),cancelPremiumSubscription:()=>async function(e,t,r){if(!e.isAuthenticated())return{success:!1};try{return await t.getInstance().payment.cancelPremiumSubscription(),h(e,t,r).catch((e=>{})),{success:!0}}catch(e){const t=e.message,r=new Error(`[SessionController] - cancelPremiumSubscription: ${e}`);return i.default.log(r),c.sendExceptionLog({error:r}),{success:!1,reason:t}}}(e.storeService,e.sessionService,e.wsService),changeDeviceName:(t,r)=>function(e,t,r,o){if(e.isAuthenticated()){const e=(0,S.secureDeviceName)(o);return t.getInstance().device.changeDeviceName(r,e).catch((e=>{const t=new Error(`[SessionController] - changeDeviceName: ${e}`);i.default.log(t),c.sendExceptionLog({error:t})}))}return Promise.resolve(null)}(e.storeService,e.sessionService,t,r),closeSession:()=>{return t=e.sessionService,i.default.log("SessionController/closeSession called"),t.close();var t},lockSession:()=>e.sessionService.lock(),deactivateDevice:t=>function(e,t,r){if(e.isAuthenticated())return t.getInstance().device.deactivateDevice(r).catch((e=>{const t=new Error(`[SessionController] - deactivateDevice: ${e}`);i.default.log(t),c.sendExceptionLog({error:t})}));return Promise.resolve(null)}(e.storeService,e.sessionService,t),generateAndSavePassword:t=>C(e.storeService,e.sessionService,t),generatePassword:t=>O(e.storeService,t),getAccountInfo:()=>function(e){const t=e.getState(),r=(0,f.subscriptionCodeSelector)(t),o=(0,m.premiumStatusSelector)(t);return Promise.resolve({premiumStatus:o,subscriptionCode:r})}(e.storeService),getAndTriggerRefreshAccountInfo:()=>v(e.storeService,e.sessionService,e.wsService),getPasswordGenerationSettings:()=>D(e.storeService),getCurrentUserInfo:()=>(0,y.getCurrentUserInfo)(e.storeService),getDevicesList:()=>function(e,t){if(e.isAuthenticated())return t.getInstance().device.fetchDevicesList().catch((e=>(i.default.log("Error while fetching Devices list",e),[])));return Promise.resolve([])}(e.storeService,e.sessionService),getInvoices:()=>function(e,t){if(e.isAuthenticated())return t.getInstance().payment.fetchInvoices().catch((e=>{const t=new Error(`[SessionController] - getInvoices: ${e}`);return i.default.log(t),c.sendExceptionLog({error:t}),null}));return Promise.resolve(null)}(e.storeService,e.sessionService),getPersonalSettings:()=>{return t=e.storeService,Promise.resolve(t.getPersonalSettings());var t},getUki:()=>{return t=e.storeService,{uki:(0,g.ukiSelector)(t.getState())};var t},isSaveCredentialDisabled:t=>(0,l.isSaveCredentialDisabledOnDomain)(e.storeService,t),signalSaveCredentialDisabled:t=>(0,l.signalSaveCredentialDisabled)(e.storeService,e.sessionService,t),resumeSession:()=>I(e.storeService,e.storageService,e.sessionService,e.wsService),saveGeneratedPassword:(t,r)=>P(e.storeService,e.sessionService,t,r),sessionForceSync:(t=o.Trigger.Manual)=>_(e.sessionService,t),updateCardToken:(t,r)=>async function(e,t,r,o,n){try{if(!e.isAuthenticated())return;const{payment:i}=t.getInstance(),s=await i.updatePaymentCard(o,n);a.updatePaymentCardTokenResult(s),h(e,t,r).catch((e=>{}))}catch(e){const t=e.message,r=new Error(`[SessionController] - updateCardToken: ${e}`);i.default.log(r),c.sendExceptionLog({error:r}),a.updatePaymentCardTokenResult({success:!1,reason:t})}}(e.storeService,e.sessionService,e.wsService,t,r),validateMasterPassword:t=>(0,A.validateMasterPassword)(e.storeService,e.masterPasswordEncryptorService,t)});const T={premiumStatus:{statusCode:null},subscriptionCode:null};async function v(e,t,r){if(!e.isAuthenticated())return T;try{const o=await h(e,t,r);return o.accountInfo}catch(t){i.default.error("Error during getRefreshedAccountInfo",t);const r=(0,m.premiumStatusSelector)(e.getState()),o=r?{premiumStatus:r}:{};return{...T,...o}}}async function h(e,t,r){const{user:o}=t.getInstance(),n=(0,u.refreshPremiumStatus)(e,r,e.getUserLogin(),(0,g.ukiSelector)(e.getState())).then((()=>({premiumStatus:e.getLocalSettings().premiumStatus,nodePremiumStatusSpaceData:(0,E.getNodePremiumStatusSpaceData)(e)}))),a=o.fetchSubscriptionCode();try{await o.fetchAccountInfo()}catch(e){(0,i.logError)(e),c.sendExceptionLog({error:e})}const[s,d]=await Promise.all([n,a]),{premiumStatus:l,nodePremiumStatusSpaceData:p}=s;if(!l)throw new Error("premium info should exist");return{accountInfo:{premiumStatus:l,subscriptionCode:d},nodePremiumStatusSpaceData:p}}async function _(e,t=o.Trigger.Manual){await e.getInstance().user.attemptSync(t)}function I(e,t,r,o){return(0,p.triggerABTestingChanged)(e.getABTesting()),a.sendLocationInfo(e.getPlatform().location),e.isAuthenticated()?v(e,r,o).then((()=>(a.triggerSessionOpened(e,t),!0))):Promise.resolve(null)}function C(e,t,r){return d.generateAndSavePassword(e,t,r)}function D(e){return d.getDefaultPasswordGenerationSettings(e.getPersonalSettings())}function O(e,t){return d.generatePassword(e.getPersonalSettings(),t)}function P(e,t,r,o){return d.saveGeneratedPassword(e,t,r,o)}function R(e,t){return(0,s.getWebsiteInfo)(e,t)}t.getAndTriggerRefreshAccountInfo=v,t.sessionForceSync=_,t.resumeSession=I,t.generateAndSavePassword=C,t.getPasswordGenerationSettings=D,t.generatePassword=O,t.saveGeneratedPassword=P,t.askWebsiteInfo=R,t.AutofillProtectionStatus=(0,n.Enum)("UNPROTECTED","LOCKED","UNLOCKED"),t.refeshAccountInfo=function(e,t,r){h(e,t,r).catch((e=>{}))}},66833:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getFreshSpaceData=t.updateCurrentSpaceWith=t.updateSpaceData=t.refreshSpaceData=void 0;const o=r(36738),n=r(58639);function i(e,t){const r={spaces:t};e.dispatch((0,o.spaceDataUpdated)(r)),(0,n.reportDataUpdate)(e)}function a(e){return(e||[]).map((e=>({teamId:e.teamId,details:e})))}t.refreshSpaceData=function(e,t){const r=a(t);return i(e,r),Promise.resolve(r)},t.updateSpaceData=i,t.updateCurrentSpaceWith=function(e,t){const r=e.getSpaceData().spaces.map((e=>"accepted"===e.details.status?t(e):e));i(e,r)},t.getFreshSpaceData=a},16661:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.clearIconsCache=t.IconsCacheLoaded=t.iconsRefreshed=t.iconsUpdated=t.ICONS_CACHE_EMPTY=t.ICONS_CACHE_LOADED=t.ICONS_REFRESHED=t.ICONS_UPDATED=void 0,t.ICONS_UPDATED="ICONS_UPDATED",t.ICONS_REFRESHED="ICONS_REFRESHED",t.ICONS_CACHE_LOADED="ICONS_CACHE_LOADED",t.ICONS_CACHE_EMPTY="ICONS_CACHE_EMPTY";t.iconsUpdated=e=>({type:t.ICONS_UPDATED,data:e});t.iconsRefreshed=e=>({type:t.ICONS_REFRESHED,data:e});t.IconsCacheLoaded=e=>({type:t.ICONS_CACHE_LOADED,data:e});t.clearIconsCache=()=>({type:t.ICONS_CACHE_EMPTY})},19695:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.iconsFromStorage=t.iconsToStorage=void 0;t.iconsToStorage=e=>({...e,domains:Array.from(e.domains.entries())});t.iconsFromStorage=e=>({...e,domains:new Map(e.domains)})},58174:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getEmptyIconByDomains=void 0;const o=r(16661),n=r(53),i=r(46445);function a(e,t){const r=t.filter((e=>!!e.domain));if(!r.length)return e;const o=new Map;let n=!1;for(const t of r){const{domain:r,...a}=t,s=(0,i.computeHashMD5)(r);e.get(s)||(n=!0,o.set(s,a))}return n?new Map([...e,...o]):e}function s(){return{domains:new Map,lastUpdateTimeSeconds:0}}t.getEmptyIconByDomains=s,t.default=(e=s(),t)=>{switch(t.type){case o.ICONS_UPDATED:{const r=a(e.domains,t.data);return e.domains!==r?{...e,domains:r}:e}case o.ICONS_REFRESHED:return{...e,domains:a(e.domains,t.data),lastUpdateTimeSeconds:(0,n.getUnixTimestamp)()};case o.ICONS_CACHE_LOADED:return t.data;case o.ICONS_CACHE_EMPTY:return s();default:return e}}},43416:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.loadedStoredUserABTests=t.refreshedUserABTests=t.SENT_AB_TEST_USAGE_LOG=t.STORED_USER_AB_TEST_LOADED=t.USER_AB_TESTS_UPDATED=void 0,t.USER_AB_TESTS_UPDATED="USER_AB_TEST_UPDATED",t.STORED_USER_AB_TEST_LOADED="STORED_USER_AB_TEST_LOADED",t.SENT_AB_TEST_USAGE_LOG="SENT_AB_TEST_USAGE_LOG";t.refreshedUserABTests=e=>({type:t.USER_AB_TESTS_UPDATED,lastUpdateTimestamp:Date.now(),tests:e});t.loadedStoredUserABTests=e=>({type:t.STORED_USER_AB_TEST_LOADED,userABTests:e})},1678:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getEmptyTests=void 0;const o=r(43416);function n(){return{lastUpdateTimestamp:null,tests:{}}}t.getEmptyTests=n,t.default=(e={lastUpdateTimestamp:null,tests:{}},t)=>{switch(t.type){case o.USER_AB_TESTS_UPDATED:return{...e,tests:t.tests,lastUpdateTimestamp:t.lastUpdateTimestamp};case o.STORED_USER_AB_TEST_LOADED:return{...e,...t.userABTests};default:return e}}},62627:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.userABTestVariantSelector=t.userABTestSelector=t.userABTestsSelector=void 0;t.userABTestsSelector=e=>e.userSession.abTests;t.userABTestSelector=(e,r)=>(0,t.userABTestsSelector)(e).tests[r];t.userABTestVariantSelector=(e,r)=>{const o=(0,t.userABTestSelector)(e,r);return o?o.variant:void 0}},18862:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.accountContactInfoRefreshed=t.saveAccountContactInfo=t.ACCOUNT_CONTACT_INFO_REFRESHED=t.SAVE_ACCOUNT_CONTACT_INFO=void 0,t.SAVE_ACCOUNT_CONTACT_INFO="SAVE_ACCOUNT_CONTACT_INFO",t.ACCOUNT_CONTACT_INFO_REFRESHED="ACCOUNT_CONTACT_INFO_REFRESHED";t.saveAccountContactInfo=e=>({type:t.SAVE_ACCOUNT_CONTACT_INFO,accountContactInfo:e});t.accountContactInfoRefreshed=e=>({type:t.ACCOUNT_CONTACT_INFO_REFRESHED,accountContactInfo:e})},39727:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0});const o=r(18862);t.default=(e={},t)=>{switch(t.type){case o.SAVE_ACCOUNT_CONTACT_INFO:case o.ACCOUNT_CONTACT_INFO_REFRESHED:return{...e,...t.accountContactInfo};default:return e}}},43461:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.accountCreationStarted=t.saveAccountKeys=t.saveAccountSettings=t.ACCOUNT_CREATION_STARTED=t.SAVE_ACCOUNT_KEYS=t.SAVE_ACCOUNT_SETTINGS=void 0,t.SAVE_ACCOUNT_SETTINGS="SAVE_ACCOUNT_SETTINGS",t.SAVE_ACCOUNT_KEYS="SAVE_ACCOUNT_KEYS",t.ACCOUNT_CREATION_STARTED="ACCOUNT_CREATION_STARTED",t.saveAccountSettings=function(e){return{type:t.SAVE_ACCOUNT_SETTINGS,settings:e}},t.saveAccountKeys=function(e){return{type:t.SAVE_ACCOUNT_KEYS,accountKey:e}},t.accountCreationStarted=function(e){return{type:t.ACCOUNT_CREATION_STARTED,isSSO:e.isSSO}}},12659:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getEmptyAccountCreation=void 0;const o=r(43461),n=r(95648);function i(){return{settings:{personalSettings:(0,n.getEmptyPersonalSettings)(),promise:null},accountKey:{promise:null},isSSO:!1}}t.default=(e=i(),t)=>{switch(t.type){case o.SAVE_ACCOUNT_SETTINGS:return{...e,settings:{...t.settings,personalSettings:(0,n.getUpdatedPersonalSettings)(e.settings.personalSettings,t.settings.personalSettings)}};case o.SAVE_ACCOUNT_KEYS:return{...e,accountKey:t.accountKey};case o.ACCOUNT_CREATION_STARTED:return{...i(),isSSO:t.isSSO};default:return e}},t.getEmptyAccountCreation=i},12706:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.isSSOAccountCreationSelector=void 0;t.isSSOAccountCreationSelector=e=>e.userSession.accountCreation.isSSO},59489:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.storeAccountAuthenticationType=t.setPasswordLeaked=t.saveSubscriptionCode=t.localDataLoaded=t.userAuthenticationFailed=t.confirmUserAuthentication=t.enableOtp=t.SET_ACCOUNT_TYPE=t.USER_AUTHENTICATION_FAILED=t.SET_PASSWORD_LEAKED=t.SAVE_SUBSCRIPTION_CODE=t.LOCAL_DATA_LOADED=t.CONFIRM_USER_AUTHENTICATION=t.ENABLE_OTP=void 0;const o=r(25576);t.ENABLE_OTP="ENABLE_OTP",t.CONFIRM_USER_AUTHENTICATION="CONFIRM_USER_AUTHENTICATION",t.LOCAL_DATA_LOADED="LOCAL_DATA_LOADED",t.SAVE_SUBSCRIPTION_CODE="SAVE_SUBSCRIPTION_CODE",t.SET_PASSWORD_LEAKED="SET_PASSWORD_LEAKED",t.USER_AUTHENTICATION_FAILED="USER_AUTHENTICATION_FAILED",t.SET_ACCOUNT_TYPE="SET_ACCOUNT_TYPE";t.enableOtp=e=>({type:t.ENABLE_OTP,otpType:e});t.confirmUserAuthentication=()=>({type:t.CONFIRM_USER_AUTHENTICATION,sessionStartTime:Date.now()});t.userAuthenticationFailed=()=>({type:t.USER_AUTHENTICATION_FAILED});t.localDataLoaded=()=>({type:t.LOCAL_DATA_LOADED,persistData:o.PersistData.PERSIST_DATA_YES});t.saveSubscriptionCode=e=>({type:t.SAVE_SUBSCRIPTION_CODE,code:e});t.setPasswordLeaked=e=>({type:t.SET_PASSWORD_LEAKED,isPasswordLeaked:e});t.storeAccountAuthenticationType=e=>({type:t.SET_ACCOUNT_TYPE,accountAuthenticationType:e})},86797:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getEmptyAccount=t.OtpType=void 0;const o=r(48313),n=r(43739),i=r(59489);var a;function s(){return{login:null,isAuthenticated:!1,sessionStartTime:null,persistData:null,otpType:a.NO_OTP,subscriptionCode:null,isPasswordLeaked:!1,accountAuthenticationType:"masterPassword"}}!function(e){e[e.NO_OTP=0]="NO_OTP",e[e.OTP_NEW_DEVICE=1]="OTP_NEW_DEVICE",e[e.OTP_LOGIN=2]="OTP_LOGIN"}(a=t.OtpType||(t.OtpType={})),t.getEmptyAccount=s,t.default=(e=s(),t)=>{switch(t.type){case o.OPEN_SESSION:return{...e,login:t.login};case n.DEVICE_REGISTERED:case i.LOCAL_DATA_LOADED:return{...e,persistData:t.persistData};case i.CONFIRM_USER_AUTHENTICATION:return{...e,isAuthenticated:!0,sessionStartTime:t.sessionStartTime};case i.USER_AUTHENTICATION_FAILED:return{...e,isAuthenticated:!1,sessionStartTime:null};case i.ENABLE_OTP:return{...e,otpType:t.otpType};case i.SAVE_SUBSCRIPTION_CODE:return{...e,subscriptionCode:t.code};case i.SET_PASSWORD_LEAKED:return{...e,isPasswordLeaked:t.isPasswordLeaked};case i.SET_ACCOUNT_TYPE:return{...e,accountAuthenticationType:t.accountAuthenticationType};default:return e}}},25421:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.accountAuthenticationTypeSelector=void 0;t.accountAuthenticationTypeSelector=e=>e.userSession.account.accountAuthenticationType},48313:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.applyTransactions=t.premiumStatusUpdated=t.localSettingsUpdated=t.closeSession=t.openSession=t.saveGeneratedPassword=t.savePersonalDataItems=t.savePersonalDataItem=t.SAVE_PERSONAL_ITEMS=t.SAVE_PERSONAL_ITEM=t.SAVE_GENERATED_PASSWORD=t.PREMIUM_STATUS_UPDATED=t.LOCAL_SETTINGS_UPDATED=t.REMOVE_PERSONAL_ITEM_FROM_TRANSACTION=t.ADD_PERSONAL_ITEM_FROM_TRANSACTION=t.CHANGES_FROM_TRANSACTIONS=t.CLOSE_SESSION=t.OPEN_SESSION=void 0;const o=r(84977),n=r(27517);t.OPEN_SESSION="OPEN_SESSION",t.CLOSE_SESSION="CLOSE_SESSION",t.CHANGES_FROM_TRANSACTIONS="CHANGES_FROM_TRANSACTIONS",t.ADD_PERSONAL_ITEM_FROM_TRANSACTION="ADD_PERSONAL_ITEM_FROM_TRANSACTION",t.REMOVE_PERSONAL_ITEM_FROM_TRANSACTION="REMOVE_PERSONAL_ITEM_FROM_TRANSACTION",t.LOCAL_SETTINGS_UPDATED="LOAD_STORED_LOCAL_SETTINGS",t.PREMIUM_STATUS_UPDATED="PREMIUM_STATUS_UPDATED",t.SAVE_GENERATED_PASSWORD="SAVE_GENERATED_PASSWORD",t.SAVE_PERSONAL_ITEM="SAVE_PERSONAL_ITEM",t.SAVE_PERSONAL_ITEMS="SAVE_PERSONAL_ITEMS",t.savePersonalDataItem=function(e,r,n){return{type:t.SAVE_PERSONAL_ITEM,dataType:o.default[r],dataModelObject:e,changeHistory:n}},t.savePersonalDataItems=function(e,r,n){return{type:t.SAVE_PERSONAL_ITEMS,dataType:o.default[r],dataModelObjects:e,changeHistory:n}},t.saveGeneratedPassword=function(e){return{type:t.SAVE_GENERATED_PASSWORD,generatedPassword:e}};t.openSession=e=>({type:t.OPEN_SESSION,login:e});t.closeSession=()=>({type:t.CLOSE_SESSION});t.localSettingsUpdated=e=>({type:t.LOCAL_SETTINGS_UPDATED,data:Object.assign({},e)});t.premiumStatusUpdated=e=>({type:t.PREMIUM_STATUS_UPDATED,premiumStatus:e});t.applyTransactions=e=>{const r=e.map((e=>{let r;return r="SETTINGS"===e.type?n.PersonalSettingsActionType.EditFromTransaction:"BACKUP_REMOVE"===e.action?t.REMOVE_PERSONAL_ITEM_FROM_TRANSACTION:t.ADD_PERSONAL_ITEM_FROM_TRANSACTION,"BACKUP_EDIT"===e.action&&e.content&&(e.content.LastBackupTime=Math.floor(e.backupDate/1e3)),{type:r,itemId:e.identifier,content:e.content}}));return{type:t.CHANGES_FROM_TRANSACTIONS,actions:r}}},42282:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.resetAuthTicketInfo=t.updateAuthTicketInfo=void 0;const o=r(4190);t.updateAuthTicketInfo=e=>({type:o.ADD_AUTH_TICKET_DATA,data:e});t.resetAuthTicketInfo=()=>({type:o.RESET_AUTH_TICKET_DATA})},78663:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getEmptyAuthTicketInfo=void 0;const o=r(4190);t.getEmptyAuthTicketInfo=()=>({login:null,date:0,authTicket:null}),t.default=(e=(0,t.getEmptyAuthTicketInfo)(),r)=>{switch(r.type){case o.ADD_AUTH_TICKET_DATA:return{...e,...r.data};case o.RESET_AUTH_TICKET_DATA:return{...e,...(0,t.getEmptyAuthTicketInfo)()};default:return e}}},4190:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.RESET_AUTH_TICKET_DATA=t.ADD_AUTH_TICKET_DATA=void 0,t.ADD_AUTH_TICKET_DATA="ADD_AUTH_TICKET_DATA",t.RESET_AUTH_TICKET_DATA="RESET_AUTH_TICKET_DATA"},28417:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.blacklistedUserSessionKeys=void 0,t.blacklistedUserSessionKeys=["iconsCache","personalData","teamAdminData","sharingSync","sharingData"]},87838:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.updateBreachRefreshTimestamp=t.UPDATE_BREACHES_REFRESH_TIMESTAMP=void 0,t.UPDATE_BREACHES_REFRESH_TIMESTAMP="UPDATE_BREACHES_REFRESH_TIMESTAMP";t.updateBreachRefreshTimestamp=e=>({type:t.UPDATE_BREACHES_REFRESH_TIMESTAMP,lastBreachRefreshTimestamp:e})},99800:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.breachRefreshMetaDataReducer=t.getEmptyBreachRefreshMetadata=void 0;const o=r(87838);t.getEmptyBreachRefreshMetadata=()=>({lastBreachRefreshTimestamp:0});t.breachRefreshMetaDataReducer=(e=(0,t.getEmptyBreachRefreshMetadata)(),r)=>r.type===o.UPDATE_BREACHES_REFRESH_TIMESTAMP?{lastBreachRefreshTimestamp:r.lastBreachRefreshTimestamp}:e},16194:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.changeMPDone=t.changeMPStart=t.SET_CHANGE_MP_DONE=t.SET_CHANGE_MP_START=void 0,t.SET_CHANGE_MP_START="SET_CHANGE_MP_START",t.SET_CHANGE_MP_DONE="SET_CHANGE_MP_DONE";t.changeMPStart=()=>({type:t.SET_CHANGE_MP_START});t.changeMPDone=()=>({type:t.SET_CHANGE_MP_DONE})},66403:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getEmptyChangeMPData=void 0;const o=r(16194);function n(){return{changeMPinProgress:!1}}t.getEmptyChangeMPData=n,t.default=(e={changeMPinProgress:!1},t)=>{switch(t.type){case o.SET_CHANGE_MP_START:return{...e,changeMPinProgress:!0};case o.SET_CHANGE_MP_DONE:return{...e,changeMPinProgress:!1};default:return e}}},66417:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.credentialOTPUpdatedAction=t.CREDENTIAL_OTP_UPDATED=void 0,t.CREDENTIAL_OTP_UPDATED="CREDENTIAL_OTP_UPDATED";t.credentialOTPUpdatedAction=(e,r)=>({type:t.CREDENTIAL_OTP_UPDATED,credentialId:e,otp:r})},11406:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.credentialOTPUpdatedAction=t.credentialOTPs=void 0;var o=r(27547);Object.defineProperty(t,"credentialOTPs",{enumerable:!0,get:function(){return o.credentialOTPs}});var n=r(66417);Object.defineProperty(t,"credentialOTPUpdatedAction",{enumerable:!0,get:function(){return n.credentialOTPUpdatedAction}})},27547:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.credentialOTPs=void 0,t.credentialOTPs=function(e={},t){return"CREDENTIAL_OTP_UPDATED"===t.type?{...e,[t.credentialId]:t.otp}:e}},67331:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.credentialsDedupViewUpdated=void 0;const o=r(28142);t.credentialsDedupViewUpdated=e=>({type:o.CREDENTIAL_DEDUP_VIEW_UPDATED,credentialsDedupView:e})},81200:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.credentialsDedupViewReducer=t.getDefaultCredentialsDedupView=void 0;const o=r(28142);function n(){return{credentialsDedupView:!1}}t.getDefaultCredentialsDedupView=n,t.credentialsDedupViewReducer=function(e={credentialsDedupView:!1},t){return t.type===o.CREDENTIAL_DEDUP_VIEW_UPDATED?{...e,...t.credentialsDedupView}:e}},28142:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CREDENTIAL_DEDUP_VIEW_UPDATED=void 0,t.CREDENTIAL_DEDUP_VIEW_UPDATED="CREDENTIAL_DEDUP_VIEW_UPDATED"},19478:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.teamDirectorySyncNotInProgress=t.teamDirectorySyncInProgress=t.TEAM_DIRECTORY_SYNC_NOT_IN_PROGRESS=t.TEAM_DIRECTORY_SYNC_IN_PROGRESS=void 0,t.TEAM_DIRECTORY_SYNC_IN_PROGRESS="TEAM_DIRECTORY_SYNC_IN_PROGRESS",t.TEAM_DIRECTORY_SYNC_NOT_IN_PROGRESS="TEAM_DIRECTORY_SYNC_NOT_IN_PROGRESS";t.teamDirectorySyncInProgress=e=>({type:t.TEAM_DIRECTORY_SYNC_IN_PROGRESS,teamId:e});t.teamDirectorySyncNotInProgress=e=>({type:t.TEAM_DIRECTORY_SYNC_NOT_IN_PROGRESS,teamId:e})},48005:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.isTeamDirectorySyncInProgress=t.getEmptyState=void 0;const o=r(19478);function n(){return{syncsInProgress:{}}}t.getEmptyState=n,t.isTeamDirectorySyncInProgress=function(e,t){return e.syncsInProgress[t]},t.default=(e={syncsInProgress:{}},t)=>{switch(t.type){case o.TEAM_DIRECTORY_SYNC_IN_PROGRESS:const{teamId:r}=t;return{...e,syncsInProgress:{...e.syncsInProgress,[r]:!0}};case o.TEAM_DIRECTORY_SYNC_NOT_IN_PROGRESS:const{teamId:n}=t;return{...e,syncsInProgress:{...e.syncsInProgress,[n]:!1}};default:return e}}},85845:(e,t)=>{var r;Object.defineProperty(t,"__esModule",{value:!0}),t.deleteFileMetaAction=t.updateFileContentAction=t.updateFileMetaAction=t.FileActionsType=void 0,function(e){e.UpdateFileMeta="UPDATE_FILE_META",e.UpdateFileContent="UPDATE_FILE_CONTENT",e.DeleteFileMeta="DELETE_FILE_META"}(r=t.FileActionsType||(t.FileActionsType={}));t.updateFileMetaAction=e=>({type:r.UpdateFileMeta,filesMeta:e});t.updateFileContentAction=e=>({type:r.UpdateFileContent,filesContent:e});t.deleteFileMetaAction=e=>({type:r.DeleteFileMeta,fileNames:e})},75417:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.remoteFileReducer=t.defaultRemoteFileState=void 0;const o=r(85845);function n(e,t){const r={...e};for(const e of t)e in r&&delete r[e];return r}t.defaultRemoteFileState=()=>({fileMetaData:{},fileContentState:{}});t.remoteFileReducer=(e=(0,t.defaultRemoteFileState)(),r)=>{switch(r?.type){case o.FileActionsType.UpdateFileMeta:return((e,t)=>({...e,fileMetaData:{...e.fileMetaData,files:{...e.fileMetaData.files,...t.filesMeta}}}))(e,r);case o.FileActionsType.UpdateFileContent:return((e,t)=>({...e,fileContentState:{...e.fileContentState,...t.filesContent}}))(e,r);case o.FileActionsType.DeleteFileMeta:return((e,t)=>({...e,fileMetaData:{files:n(e.fileMetaData.files,t.fileNames)}}))(e,r)}return e}},6093:(e,t)=>{function r(e){return"boolean"==typeof e?e:"string"==typeof e?"true"===e.toLowerCase()||"yes"===e.toLowerCase():Boolean(e)}function o(e,t){return"boolean"===t?e?"true":"false":"yes-no"===t?e?"YES":"NO":null}function n(e){return"object"==typeof e?e:JSON.parse(e)}function i(e){return JSON.stringify(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.fixProperties=t.fixPropertiesTypes=t.ObjectToJson=t.jsonToObject=t.booleanToString=t.stringToBoolean=void 0,t.stringToBoolean=r,t.booleanToString=o,t.jsonToObject=n,t.ObjectToJson=i,t.fixPropertiesTypes=function(e,t,o,i,a){const s={};return e.filter((e=>!!a[e])).forEach((e=>{s[e]=r(a[e])})),t.filter((e=>!!a[e])).forEach((e=>{s[e]=Number(a[e])})),o.filter((e=>!!a[e])).forEach((e=>{s[e]=n(a[e])})),i.filter((e=>a.hasOwnProperty(e))).forEach((e=>{const t=a[e];s[e]=null===t?"":String(t)})),Object.assign({},a,s)},t.fixProperties={fromStore:function(e,t,r,n){const a={};return Object.keys(e).filter((e=>!!n[e])).forEach((t=>{a[t]=o(n[t],e[t])})),Object.keys(t).filter((e=>!!n[e])).forEach((e=>{a[e]=n[e]&&n[e].toString()})),Object.keys(r).filter((e=>!!n[e])).forEach((e=>{a[e]=i(n[e])})),Object.assign({},n,a)},fromTransaction:function(e,t,o,i){const a={};return Object.keys(e).filter((e=>!!i[e])).forEach((e=>{a[e]=r(i[e])})),Object.keys(t).filter((e=>!!i[e])).forEach((e=>{a[e]=Number(i[e])})),Object.keys(o).filter((e=>!!i[e])).forEach((e=>{a[e]=n(i[e])})),Object.assign({},i,a)}}},76089:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.credentialSearchOrderUpdated=t.premiumChurningDismissDateUpdated=t.webOnboardingModeUpdated=t.localSettingsSubscriptionInformationStatusUpdated=t.localSettingsNodePremiumStatusUpdated=t.localSettingsPremiumStatusUpdated=t.registerDeviceName=t.registerLastSync=t.loadStoredLocalSettings=t.CREDENTIAL_SEARCH_ORDER_UPDATED=t.PREMIUM_CHURNING_DISMISS_DATE_UPDATED=t.WEB_ONBOARDING_MODE_RESET=t.WEB_ONBOARDING_MODE_UPDATED=t.SUBSCRIPTION_INFORMATION_UPDATED=t.NODE_PREMIUM_STATUS_UPDATED=t.PREMIUM_STATUS_UPDATED=t.REGISTER_DEVICE_NAME=t.REGISTER_LAST_SYNC=t.LOAD_STORED_LOCAL_SETTINGS=void 0,t.LOAD_STORED_LOCAL_SETTINGS="LOCAL_SETTINGS/LOAD_STORED_LOCAL_SETTINGS",t.REGISTER_LAST_SYNC="LOCAL_SETTINGS/REGISTER_LAST_SYNC",t.REGISTER_DEVICE_NAME="LOCAL_SETTINGS/REGISTER_DEVICE_NAME",t.PREMIUM_STATUS_UPDATED="LOCAL_SETTINGS/PREMIUM_STATUS_UPDATED",t.NODE_PREMIUM_STATUS_UPDATED="LOCAL_SETTINGS/NODE_PREMIUM_STATUS_UPDATED",t.SUBSCRIPTION_INFORMATION_UPDATED="LOCAL_SETTINGS/SUBSCRIPTION_INFORMATION_UPDATED",t.WEB_ONBOARDING_MODE_UPDATED="LOCAL_SETTINGS/WEB_ONBOARDING_MODE_UPDATED",t.WEB_ONBOARDING_MODE_RESET="LOCAL_SETTINGS/WEB_ONBOARDING_MODE_RESET",t.PREMIUM_CHURNING_DISMISS_DATE_UPDATED="PREMIUM_CHURNING_DISMISS_DATE_UPDATED",t.CREDENTIAL_SEARCH_ORDER_UPDATED="CREDENTIAL_SEARCH_ORDER_UPDATED";t.loadStoredLocalSettings=e=>({type:t.LOAD_STORED_LOCAL_SETTINGS,data:Object.assign({},e)});t.registerLastSync=e=>({type:t.REGISTER_LAST_SYNC,lastSync:e});t.registerDeviceName=e=>({type:t.REGISTER_DEVICE_NAME,deviceName:e});t.localSettingsPremiumStatusUpdated=e=>({type:t.PREMIUM_STATUS_UPDATED,premiumStatus:e});t.localSettingsNodePremiumStatusUpdated=e=>({type:t.NODE_PREMIUM_STATUS_UPDATED,nodePremiumStatus:e});t.localSettingsSubscriptionInformationStatusUpdated=e=>({type:t.SUBSCRIPTION_INFORMATION_UPDATED,subscriptionInformation:e});t.webOnboardingModeUpdated=e=>({type:t.WEB_ONBOARDING_MODE_UPDATED,webOnboardingMode:e});t.premiumChurningDismissDateUpdated=e=>({type:t.PREMIUM_CHURNING_DISMISS_DATE_UPDATED,premiumChurningDismissDate:e});t.credentialSearchOrderUpdated=e=>({type:t.CREDENTIAL_SEARCH_ORDER_UPDATED,credentialSearchOrder:e})},73472:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getEmptyLocalSettings=t.getEmptyOnboardingMode=t.getEmptyLoginStepInfo=void 0;const o=r(16516),n=r(32626),i=r(35924),a=r(76089),s=r(65210),c=r(43739);function d(){return{step:null,login:"",validated:!1}}t.getEmptyLoginStepInfo=d;const u=(e,t)=>[n.LoginStep.Password,n.LoginStep.OTPToken].includes(t)?t:e.step,l=(e,t)=>t===n.LoginStep.OTPToken?Boolean(e.login):![n.LoginStep.OTP1,n.LoginStep.OTP2].includes(t)&&e.validated,p=(e,t)=>Object.entries(t).every((([t,r])=>e?.[t]===r));t.default=(e=S(),t)=>{switch(t.type){case a.LOAD_STORED_LOCAL_SETTINGS:{const r=S();return{...r,...e,...t.data,webOnboardingMode:{...r.webOnboardingMode,...e.webOnboardingMode,...t.data.webOnboardingMode,completedSteps:{...r.webOnboardingMode.completedSteps,...e.webOnboardingMode.completedSteps,...t.data.webOnboardingMode.completedSteps}}}}case c.DEVICE_REGISTERED:return"uki"===t.registrationType.type?{...e,uki:t.registrationType.uki}:e;case a.REGISTER_LAST_SYNC:return Object.assign({},e,{lastSync:t.lastSync});case a.REGISTER_DEVICE_NAME:return Object.assign({},e,{deviceName:t.deviceName});case a.PREMIUM_STATUS_UPDATED:return Object.assign({},e,{premiumStatus:t.premiumStatus});case a.NODE_PREMIUM_STATUS_UPDATED:return Object.assign({},e,{nodePremiumStatus:t.nodePremiumStatus});case a.SUBSCRIPTION_INFORMATION_UPDATED:return Object.assign({},e,{subscriptionInformation:t.subscriptionInformation});case a.WEB_ONBOARDING_MODE_UPDATED:{const r=(0,o.mergeDeepRight)(S(),e);return(0,o.mergeDeepRight)(r,{webOnboardingMode:t.webOnboardingMode})}case a.PREMIUM_CHURNING_DISMISS_DATE_UPDATED:return Object.assign({},e,{premiumChurningDismissDate:t.premiumChurningDismissDate});case a.CREDENTIAL_SEARCH_ORDER_UPDATED:return Object.assign({},e,{credentialSearchOrder:t.credentialSearchOrder});case s.USER_MESSAGE_ADDED:return Object.assign({},e,{userMessages:[...e.userMessages,t.userMessage]});case s.USER_MESSAGES_DISMISSED:return Object.assign({},e,{userMessages:e.userMessages.some((e=>p(e,t.predicate)))?e.userMessages.map((e=>p(e,t.predicate)?{...e,dismissedAt:Date.now()}:e)):[...e.userMessages,{...t.predicate,dismissedAt:Date.now()}]});case i.UPDATE_LOGIN_STEP_INFO_LOGIN:return Object.assign({},e,{loginStepInfo:{...e.loginStepInfo,login:t.login}});case i.UPDATE_LOGIN_STEP_INFO_STEP:return Object.assign({},e,{loginStepInfo:{...e.loginStepInfo,step:u(e.loginStepInfo,t.step),validated:l(e.loginStepInfo,t.step)}});case i.RESET_LOGIN_STEP_INFO:return Object.assign({},e,{loginStepInfo:{step:null,login:"",validated:!1}});default:return e}};function S(){return{uki:null,lastSync:0,premiumStatus:null,nodePremiumStatus:null,subscriptionInformation:null,deviceName:null,webOnboardingMode:(0,t.getEmptyOnboardingMode)(),premiumChurningDismissDate:null,credentialSearchOrder:null,userMessages:[],loginStepInfo:{step:null,login:"",validated:!1}}}t.getEmptyOnboardingMode=()=>({flowCredentialInApp:!1,flowLoginCredentialOnWeb:!1,flowLoginCredentialOnWebSite:null,flowSaveCredentialOnWeb:!1,flowImportPasswords:!1,flowAddMobileOnWeb:!1,flowTryAutofillOnWeb:!1,leelooStep:null,popoverStep:null,completedSteps:{saveCredentialInApp:!1,loginCredentialOnWeb:!1,saveCredentialOnWeb:!1,importPasswordsShown:!1,onboardingHubShown:!1,addMobileOnWeb:!1,tryAutofillOnWeb:!1}}),t.getEmptyLocalSettings=S},73299:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.deviceNameSelector=void 0;t.deviceNameSelector=e=>e.userSession.localSettings.deviceName},34287:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.loadNotificationsStatus=t.markAsInteracted=t.markAsUnseen=t.markAsSeen=t.LOAD_NOTIFICATIONS_STATE=t.MARK_AS_INTERACTED=t.MARK_AS_UNSEEN=t.MARK_AS_SEEN=void 0,t.MARK_AS_SEEN="MarkAsSeen",t.MARK_AS_UNSEEN="MarkAsUnseen",t.MARK_AS_INTERACTED="MarkAsInteracted",t.LOAD_NOTIFICATIONS_STATE="LoadNotificationsState";t.markAsSeen=e=>({type:t.MARK_AS_SEEN,notification:e});t.markAsUnseen=e=>({type:t.MARK_AS_UNSEEN,notification:e});t.markAsInteracted=e=>({type:t.MARK_AS_INTERACTED,notification:e});t.loadNotificationsStatus=e=>({type:t.LOAD_NOTIFICATIONS_STATE,state:e})},98496:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getEmptyNotificationsState=void 0;const o=r(32626),n=r(34287),i={paymentFailureChurned:o.NotificationStatus.Unseen,paymentFailureChurning:o.NotificationStatus.Unseen,switchToMlAnalysisEngine:o.NotificationStatus.Unseen,dWMb2bAutoEnrollTooltip:o.NotificationStatus.Unseen,tacGetTheExtensionBanner:o.NotificationStatus.Unseen,tacEnableAccountRecoveryBanner:o.NotificationStatus.Unseen,tacOnlyOneAdminBanner:o.NotificationStatus.Unseen,tacDarkWebInsightsNewBadge:o.NotificationStatus.Unseen,passwordHistoryBanner:o.NotificationStatus.Unseen,sharingCenterDisabledBanner:o.NotificationStatus.Unseen,accountRecoveryAvailableAdminTooltip:o.NotificationStatus.Unseen,accountRecoveryAvailableEmployeeDialog:o.NotificationStatus.Unseen,activateInviteLink:o.NotificationStatus.Unseen,mpToSsoMigrationDoneDialog:o.NotificationStatus.Seen};function a(){return i}t.getEmptyNotificationsState=a,t.default=(e=a(),t)=>{switch(t.type){case n.MARK_AS_INTERACTED:return{...e,[t.notification]:o.NotificationStatus.Interacted};case n.MARK_AS_SEEN:return{...e,[t.notification]:o.NotificationStatus.Seen};case n.MARK_AS_UNSEEN:return{...e,[t.notification]:o.NotificationStatus.Unseen};case n.LOAD_NOTIFICATIONS_STATE:return{...e,...t.state};default:return e}}},26972:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.notificationsStatus$=void 0;const o=r(18948),n=r(3343),i=r(56857);t.notificationsStatus$=function(){const e=i.notificationsStatusSelector;return(0,o.pipe)((0,n.map)(e),(0,n.distinctUntilChanged)())}},56857:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.notificationsStatusSelector=void 0;t.notificationsStatusSelector=e=>e.userSession.notificationsStatus},95944:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.receivedInvoiceList=t.RECEIVED_INVOICE_LIST=void 0,t.RECEIVED_INVOICE_LIST="RECEIVED_USER_LIST";t.receivedInvoiceList=e=>({type:t.RECEIVED_INVOICE_LIST,invoicesList:e})},70325:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getEmptyPaymentsState=void 0;const o=r(95944);function n(){return{invoicesList:[]}}t.getEmptyPaymentsState=n,t.default=(e={invoicesList:[]},t)=>t.type===o.RECEIVED_INVOICE_LIST?{...e,invoicesList:t.invoicesList}:e},30467:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.viewedQueriedInvoicesSelector=t.searchGetters=t.invoiceMappersSelector=t.invoiceListYearsSelector=t.allInvoicesLengthSelector=t.allInvoicesSelector=void 0;const o=r(77672),n=r(24589),i=r(64455),a=r(82234),s=r(98584);t.allInvoicesSelector=e=>e.userSession.paymentsState.invoicesList;t.allInvoicesLengthSelector=e=>e.userSession.paymentsState.invoicesList.length;t.invoiceListYearsSelector=e=>{const t=e.userSession.paymentsState.invoicesList;if(t.length){const e=t.map((e=>(0,o.fromUnixTime)(e.startDate).getFullYear().toString()));return[...new Set(e)]}return[]};t.invoiceMappersSelector=e=>(0,s.getInvoiceMappers)(),t.searchGetters=[(0,a.stringProp)("amountPaid"),(0,a.stringProp)("planName"),(0,a.stringProp)("startDate"),(0,a.stringProp)("invoiceId"),(0,a.stringProp)("startYear")];const c=(0,i.match)(t.searchGetters),d=(0,n.getQuerySelector)(t.allInvoicesSelector,(()=>c),t.invoiceMappersSelector);t.viewedQueriedInvoicesSelector=(e,t)=>d(e,t)},45291:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.updateBreachesUpdaterStatus=t.teamSpaceContentControlApplied=t.storeChangesToUpload=t.breachesUpdated=t.updateLastBackupTime=t.removePersonalItem=t.saveNoteCategory=t.saveGeneratedPassword=t.savePaymentCard=t.unscheduleRemainingChanges=t.clearUploadedChanges=t.scheduleChangesForSync=t.loadStoredPersonalData=t.UNSCHEDULE_REMAINING_CHANGES=t.CLEAR_UPLOADED_CHANGES=t.SCHEDULE_CHANGES_FOR_SYNC=t.UPDATE_BREACHES_UPDATER_STATUS=t.TEAMSPACE_CONTENT_CONTROLLED=t.STORE_CHANGES_TO_UPLOAD=t.BREACHES_UPDATED=t.UPDATE_LAST_BACKUP_TIME=t.REMOVE_PERSONAL_ITEM=t.SAVE_PAYMENT_CARD=t.SAVE_NOTE_CATEGORY=t.SAVE_PERSONAL_ITEMS=t.SAVE_PERSONAL_ITEM=t.SAVE_GENERATED_PASSWORD=t.LOAD_STORED_PERSONAL_DATA=void 0,t.LOAD_STORED_PERSONAL_DATA="PERSONAL_DATA/LOAD_STORED_PERSONAL_DATA",t.SAVE_GENERATED_PASSWORD="PERSONAL_DATA/SAVE_GENERATED_PASSWORD",t.SAVE_PERSONAL_ITEM="PERSONAL_DATA/SAVE_PERSONAL_ITEM",t.SAVE_PERSONAL_ITEMS="PERSONAL_DATA/SAVE_PERSONAL_ITEMS",t.SAVE_NOTE_CATEGORY="SAVE_NOTE_CATEGORY",t.SAVE_PAYMENT_CARD="SAVE_PAYMENT_CARD",t.REMOVE_PERSONAL_ITEM="REMOVE_PERSONAL_ITEM",t.UPDATE_LAST_BACKUP_TIME="UPDATE_LAST_BACKUP_TIME",t.BREACHES_UPDATED="BREACHES_UPDATED",t.STORE_CHANGES_TO_UPLOAD="STORE_CHANGES_TO_UPLOAD",t.TEAMSPACE_CONTENT_CONTROLLED="TEAMSPACE_CONTENT_CONTROLLED",t.UPDATE_BREACHES_UPDATER_STATUS="UPDATE_BREACHES_UPDATER_STATUS",t.SCHEDULE_CHANGES_FOR_SYNC="SCHEDULE_CHANGES_FOR_SYNC",t.CLEAR_UPLOADED_CHANGES="CLEAR_UPLOADED_CHANGES",t.UNSCHEDULE_REMAINING_CHANGES="UNSCHEDULE_REMAINING_CHANGES";t.loadStoredPersonalData=e=>({type:t.LOAD_STORED_PERSONAL_DATA,data:Object.assign({},e)});t.scheduleChangesForSync=()=>({type:t.SCHEDULE_CHANGES_FOR_SYNC});t.clearUploadedChanges=e=>({type:t.CLEAR_UPLOADED_CHANGES,uploadedItemIds:e});t.unscheduleRemainingChanges=()=>({type:t.UNSCHEDULE_REMAINING_CHANGES}),t.savePaymentCard=function(e){return{type:t.SAVE_PAYMENT_CARD,paymentCard:e}},t.saveGeneratedPassword=function(e){return{type:t.SAVE_GENERATED_PASSWORD,generatedPassword:e}},t.saveNoteCategory=function(e){return{type:t.SAVE_NOTE_CATEGORY,noteCategory:e}},t.removePersonalItem=function(e,r,o){return{type:t.REMOVE_PERSONAL_ITEM,kwType:e,itemId:r,changeHistory:o}},t.updateLastBackupTime=function(e,r){return{type:t.UPDATE_LAST_BACKUP_TIME,transactions:e,backupTimeSec:r}},t.breachesUpdated=function(e,r,o){return{type:t.BREACHES_UPDATED,changes:e,revision:r,dataLeaksRefreshDate:o}},t.storeChangesToUpload=function(e){return{type:t.STORE_CHANGES_TO_UPLOAD,changesToUpload:e}},t.teamSpaceContentControlApplied=function(e,r,o){return{type:t.TEAMSPACE_CONTENT_CONTROLLED,updates:e,deletions:r,changeHistories:o}};t.updateBreachesUpdaterStatus=e=>({type:t.UPDATE_BREACHES_UPDATER_STATUS,breachesUpdaterStatus:e})},84977:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PERSONAL_DATA_COLLECTIONS_KEYS=t.DATAMODELOBJECT_TYPE_TO_STORE_KEY=void 0,t.DATAMODELOBJECT_TYPE_TO_STORE_KEY={KWAddress:"addresses",KWAuthCategory:"credentialCategories",KWAuthentifiant:"credentials",KWBankStatement:"bankAccounts",KWCollection:"collections",KWCompany:"companies",KWDataChangeHistory:"changeHistories",KWDriverLicence:"driverLicenses",KWEmail:"emails",KWFiscalStatement:"fiscalIds",KWGeneratedPassword:"generatedPasswords",KWIDCard:"idCards",KWIdentity:"identities",KWPasskey:"passkeys",KWPassport:"passports",KWPaymentMean_creditCard:"paymentCards",KWPaymentMean_paypal:"paypalAccounts",KWPersonalWebsite:"personalWebsites",KWPhone:"phones",KWSecureNote:"notes",KWSecureNoteCategory:"noteCategories",KWSecurityBreach:"securityBreaches",KWSocialSecurityStatement:"socialSecurityIds",KWSecureFileInfo:"secureFileInfo",KWSecret:"secrets"},t.default=t.DATAMODELOBJECT_TYPE_TO_STORE_KEY,t.PERSONAL_DATA_COLLECTIONS_KEYS=Object.keys(t.DATAMODELOBJECT_TYPE_TO_STORE_KEY).map((e=>t.DATAMODELOBJECT_TYPE_TO_STORE_KEY[e]))},1347:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.countPersonalDataItems=t.getEmptyBreachesMetadata=t.getLegacyEmptyBreaches=t.saveChangesToUpload=t.breachesUpdated=t.updateCredential=t.updateCredentials=t.updateLastBackupTime=t.saveObjects=t.saveNoteCategory=t.saveGeneratedPassword=t.savePersonalDataItems=t.savePersonalDataItem=t.savePaymentCard=t.removePersonalItem=t.teamSpaceContentControlApplied=t.savePersonalSettings=t.removePersonalItemFromTransaction=t.addPersonalItemFromTransaction=t.getEmptyPersonalDataState=void 0;const o=r(16516),n=r(32626),i=r(84977),a=r(53628),s=r(45291),c=r(77163),d=r(27517),u=r(51064),l=r(62210);function p(){return{addresses:[],bankAccounts:[],changesToUpload:[],changeHistories:[],collections:[],companies:[],credentialCategories:[],credentials:[],driverLicenses:[],emails:[],fiscalIds:[],generatedPasswords:[],idCards:[],identities:[],noteCategories:[],notes:[],passkeys:[],passports:[],paymentCards:[],paypalAccounts:[],personalWebsites:[],phones:[],secrets:[],securityBreaches:[],securityBreachesMetadata:(0,t.getEmptyBreachesMetadata)(),socialSecurityIds:[],breachesUpdaterStatus:n.BreachesUpdaterStatus.UNKNOWN,secureFileInfo:[]}}t.default=(e=p(),t,r)=>{switch(t.type){case s.LOAD_STORED_PERSONAL_DATA:return{...e,...(0,a.fixPersistedPersonalData)(t.data)};case s.REMOVE_PERSONAL_ITEM:return f(e,t);case s.SAVE_PAYMENT_CARD:return T(e,t);case s.SAVE_PERSONAL_ITEM:return v(e,t,r);case s.SAVE_PERSONAL_ITEMS:return h(e,t,r);case s.SAVE_GENERATED_PASSWORD:return _(e,t,r);case s.SAVE_NOTE_CATEGORY:return I(e,t);case s.CLEAR_UPLOADED_CHANGES:return m(e,t);case s.SCHEDULE_CHANGES_FOR_SYNC:return g(e,t);case s.UNSCHEDULE_REMAINING_CHANGES:return A(e,t);case d.PersonalSettingsActionType.Edit:return y(e);case s.UPDATE_LAST_BACKUP_TIME:return C(e,t);case s.BREACHES_UPDATED:return O(e,t);case s.STORE_CHANGES_TO_UPLOAD:return P(e,t);case s.TEAMSPACE_CONTENT_CONTROLLED:return E(e,t);case s.UPDATE_BREACHES_UPDATER_STATUS:return{...e,breachesUpdaterStatus:t.breachesUpdaterStatus};default:return e}},t.getEmptyPersonalDataState=p;const S=(e,t)=>!e||!t||!i.default.hasOwnProperty(t.kwType);t.addPersonalItemFromTransaction=function(e,t){if(S(t.itemId,t.content))return e;const r=i.default[t.content.kwType],o=(0,a.fixPersonalDataItemFromExternalSource)(t.content,t.itemId);return{...e,[r]:R(e[r],o)}},t.removePersonalItemFromTransaction=function(e,t){return t.itemId?t.content?U(e,[t.itemId],t.content.kwType):U(e,[t.itemId]):e};const g=(e,t)=>({...e,changesToUpload:e.changesToUpload.map(l.markChangeAsScheduled)}),m=(e,t)=>({...e,changesToUpload:(0,l.filterOutUploadedChanges)(e.changesToUpload,t.uploadedItemIds)}),A=(e,t)=>({...e,changesToUpload:e.changesToUpload.map(l.markChangeAsReadyForNextSync)});function y(e){if(e.changesToUpload.find((e=>"KWSettingsManagerApp"===e.kwType)))return e;const t=(0,u.createUploadChange)({itemId:"SETTINGS_userId",kwType:"KWSettingsManagerApp",action:"EDIT"});return{...e,changesToUpload:[...e.changesToUpload,t]}}function E(e,t){const{updates:r,deletions:o,changeHistories:n}=t,a=r.reduce(((e,t)=>{const{kwType:r}=t,o=i.default[r];return o?{...e,[o]:R(e[o]||[],t)}:e}),e),s=r.map(u.createUploadChangeForItem),c=Object.keys(o).reduce(((e,t)=>U(e,o[t],t)),a),d=Object.keys(o).reduce(((e,t)=>e.concat(o[t].map((0,u.createUploadChangeForDeletion)(t)))),[]),l=N(e.changeHistories,n),p=[...s,...d,...n.map(u.createUploadChangeForItem)];return{...c,changesToUpload:L(e.changesToUpload,p),changeHistories:l}}function f(e,t){const{changeHistory:r,kwType:o,itemId:n}=t,i=U(e,[n],o),a=[(0,u.createUploadChangeForDeletion)(o)(n),...r?[(0,u.createUploadChangeForItem)(r)]:[]],s=r?{changeHistories:R(e.changeHistories,r)}:{};return{...i,changesToUpload:L(i.changesToUpload,a),...s}}function T(e,{paymentCard:t}){return{...e,changesToUpload:L(e.changesToUpload,(0,u.createUploadChangeForItem)(t)),paymentCards:R(e.paymentCards,t)}}function v(e,{dataType:t,dataModelObject:r,changeHistory:o},n){const i=(0,c.associateTeamSpaceId)(r,n.spaces,e.credentials),a=o?{changeHistories:R(e.changeHistories,o)}:{},s=o?[(0,u.createUploadChangeForItem)(o)]:[],d=[(0,u.createUploadChangeForItem)(r),...s];return{...e,changesToUpload:L(e.changesToUpload,d),[t]:R(e[t],i),...a}}function h(e,{dataType:t,dataModelObjects:r,changeHistory:o},n){const i=r.map((t=>(0,c.associateTeamSpaceId)(t,n.spaces,e.credentials))),a=[...r.map(u.createUploadChangeForItem),...o.map(u.createUploadChangeForItem)];return{...e,changesToUpload:L(e.changesToUpload,a),[t]:N(e[t],i),changeHistories:N(e.changeHistories,o)}}function _(e,{generatedPassword:t},r){const o=(0,c.associateTeamSpaceId)(t,r.spaces,e.credentials);return{...e,changesToUpload:L(e.changesToUpload,(0,u.createUploadChangeForItem)(t)),generatedPasswords:R(e.generatedPasswords,o)}}function I(e,{noteCategory:t}){return{...e,changesToUpload:L(e.changesToUpload,(0,u.createUploadChangeForItem)(t)),noteCategories:R(e.noteCategories,t)}}function C(e,{transactions:t,backupTimeSec:r}){return Object.keys(e).reduce(((o,n)=>(Array.isArray(e[n])&&(o[n]=function(e,t,r){const o=e.filter((e=>t.includes(e.Id))).map((e=>Object.assign(e,{LastBackupTime:r})));return e.filter((e=>!t.includes(e.Id))).concat(o)}(e[n],t,r)),o)),e)}function D(e,t){const{credentials:r}=e,o=R(r,t);return{...e,credentials:o}}function O(e,t){const{changes:{updates:r,deletions:o}}=t,i=n.DataModelType.KWSecurityBreach,a=U(e,o,i),s=r.map(u.createUploadChangeForItem),c=o.map((0,u.createUploadChangeForDeletion)(i)),d=L(a.changesToUpload,[...s,...c]),l=N(a.securityBreaches,r),p=void 0!==t.dataLeaksRefreshDate?t.dataLeaksRefreshDate:a.securityBreachesMetadata.latestDataLeaksBreachesUpdate;return{...a,securityBreaches:l,securityBreachesMetadata:{latestPublicBreachesRevision:t.revision,latestDataLeaksBreachesUpdate:p},changesToUpload:d}}function P(e,{changesToUpload:t}){return{...e,changesToUpload:L(e.changesToUpload,t)}}function R(e,t){const r=function(e,t){return e.filter((e=>e.Id!==t))}(e,t.Id);return r.concat(t)}function N(e,t){return[...b(e,t.map((e=>e.Id))),...t]}function L(e,t){const r=(t=Array.isArray(t)?t:[t]).concat(e||[]);return(0,o.uniqBy)((0,o.prop)("itemId"),r)}function b(e,t){return e.filter((e=>!t.includes(e.Id)))}function U(e,t,r){if(r&&i.default[r]){const o=i.default[r];return{...e,[o]:e[o]&&b(e[o],t)}}return i.PERSONAL_DATA_COLLECTIONS_KEYS.reduce(((r,o)=>{if(!(o in e))return r;const n=b(e[o],t);return{...r,[o]:n}}),e)}t.savePersonalSettings=y,t.teamSpaceContentControlApplied=E,t.removePersonalItem=f,t.savePaymentCard=T,t.savePersonalDataItem=v,t.savePersonalDataItems=h,t.saveGeneratedPassword=_,t.saveNoteCategory=I,t.saveObjects=function(e,t){return(0,o.reduce)(((e,t)=>{const r=i.default[t.kwType];return r&&(e[r]=e[r].concat(t)),e}),{...e},t)},t.updateLastBackupTime=C,t.updateCredentials=function(e,t){return t.reduce(((e,t)=>D(e,t)),e)},t.updateCredential=D,t.breachesUpdated=O,t.saveChangesToUpload=P;t.getLegacyEmptyBreaches=()=>({revision:0,breaches:[]});t.getEmptyBreachesMetadata=()=>({latestPublicBreachesRevision:0,latestDataLeaksBreachesUpdate:0});t.countPersonalDataItems=e=>Object.keys(i.default).reduce(((t,r)=>t+e[i.default[r]].length),0)},30641:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0});const o=r(16516),n=r(32626),i=r(49901);t.default=function(e){const t=(0,o.isNil)(e.LocaleFormat)?n.Country.UNIVERSAL:e.LocaleFormat,r=(0,o.isNil)(e.SpaceId)?i.PERSONAL_SPACE_ID:e.SpaceId;return{...e,LocaleFormat:t,SpaceId:r}}},63985:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.fixPasskeyTypesFromTransaction=t.fixBreachTypesFromStore=t.fixBreachTypesFromTransaction=t.fixCommonPropertiesTypes=t.fixGeneratedPasswordsTypes=t.fixCredentialTypesFromStore=t.fixNoteTypesFromStore=t.fixAttachmentProperties=t.fixNoteTypesFromTransaction=t.fixAllStringObject=t.fixLinkedServicesTypes=t.fixDomainIconTypes=t.fixTrustedUrlTypes=t.fixCredentialTypesFromTransaction=void 0;const o=r(6093),n=["CreationDatetime","LastBackupTime","UserModificationDatetime"],i=["Id","SpaceId"];function a(e){return(0,o.fixPropertiesTypes)([],[],[],["TrustedUrl","TrustedUrlExpire"],e)}function s(e){const{urls:t,...r}=(0,o.fixPropertiesTypes)([],[],[],["backgroundColor","mainColor"],e);return{...r,urls:"object"==typeof t&&null!==t?u(t):{}}}function c(e){const t=Array.isArray(e.associated_domains)?e.associated_domains.map(d):[];return{...e,associated_domains:t}}function d(e){return(0,o.fixPropertiesTypes)([],[],[],["domain","source"],e)}function u(e){const t=Object.keys(e);return(0,o.fixPropertiesTypes)([],[],[],t,e)}function l(e){return(0,o.fixPropertiesTypes)([],["version","localSize","remoteSize","creationDatetime","userModificationDatetime"],[],["id","type","filename","downloadKey","cryptoKey","owner"],e)}t.fixCredentialTypesFromTransaction=function(e){const t=["LastUse","ModificationDatetime","NumberUse","Strength"].concat(n),r=["Alias","Category","ConnectionOptions","Email","Login","Note","OtpSecret","OtpUrl","Password","Port","SID","SecondaryLogin","Server","Title","Url","UserSelectedUrl"].concat(i),{TrustedUrlGroup:d,Attachments:u,LinkedServices:p,domainIcon:S,...g}=(0,o.fixPropertiesTypes)(["AutoLogin","AutoProtected","Checked","SharedObject","SubdomainOnly","UseFixedUrl","limitedPermissions"],t,["Attachments","LinkedServices"],r,e),m=Array.isArray(u)?{Attachments:u.map(l)}:{},A="object"==typeof S&&null!==S?{domainIcon:s(S)}:{};return{...g,...m,...p?{LinkedServices:c(p)}:{},...A,TrustedUrlGroup:d&&d.length>0?d.map(a):[]}},t.fixTrustedUrlTypes=a,t.fixDomainIconTypes=s,t.fixLinkedServicesTypes=c,t.fixAllStringObject=u,t.fixNoteTypesFromTransaction=function(e){const t=["CreationDate","UpdateDate"].concat(n),r=["Title","Content","Category"].concat(i),{Attachments:a,Type:s,...c}=(0,o.fixPropertiesTypes)(["Secured"],t,["Attachments"],r,e);return{...c,...Array.isArray(a)?{Attachments:a.map(l)}:{},Type:s||"GRAY"}},t.fixAttachmentProperties=l,t.fixNoteTypesFromStore=function(e){const t={};return["Attachments"].filter((t=>!!e[t])).forEach((r=>{t[r]=JSON.stringify(e[r])})),Object.assign({},e,t)},t.fixCredentialTypesFromStore=function(e){const t={};return["Attachments","LinkedServices"].filter((t=>!!e[t])).forEach((r=>{t[r]=JSON.stringify(e[r])})),Object.assign({},e,t)},t.fixGeneratedPasswordsTypes=function(e){const t=["GeneratedDate"].concat(n);return(0,o.fixPropertiesTypes)([],t,[],[],e)},t.fixCommonPropertiesTypes=function(e){return(0,o.fixPropertiesTypes)([],n,[],[],e)},t.fixBreachTypesFromTransaction=function(e){const t=[...n,"ContentRevision"],r=[...i,"BreachId","Status"],a=(0,o.fixPropertiesTypes)([],t,["Content","LeakedPasswords"],r,e);return Array.isArray(a.LeakedPasswords)||(a.LeakedPasswords=[]),a},t.fixBreachTypesFromStore=function(e){const t={};return["Content","LeakedPasswords"].filter((t=>!!e[t])).forEach((r=>{t[r]=JSON.stringify(e[r])})),Array.isArray(e.LeakedPasswords)||(t.LeakedPasswords=JSON.stringify([])),{...e,...t}},t.fixPasskeyTypesFromTransaction=function(e){const t=[...n,"Counter","KeyAlgorithm"],r=[...i,"CredentialId","RpId","RpName","UserDisplayName","UserHandle"];return(0,o.fixPropertiesTypes)([],t,["PrivateKey"],r,e)}},53628:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.fixPersistedPersonalData=t.fixPersonalDataItemFromExternalSource=void 0;const o=r(16516),n=r(32626),i=r(63985),a=r(30641),s=r(86715),c=[{key:"credentials",isData:n.isCredential,fixData:e=>(0,i.fixCredentialTypesFromTransaction)(e),addDefaultValues:e=>(0,a.default)(e)},{key:"notes",isData:n.isNote,fixData:e=>(0,i.fixNoteTypesFromTransaction)(e),addDefaultValues:e=>(0,a.default)(e)},{key:"generatedPasswords",isData:n.isGeneratedPassword,fixData:e=>(0,i.fixGeneratedPasswordsTypes)(e),addDefaultValues:e=>e},{key:"securityBreaches",isData:s.isBreach,fixData:e=>(0,i.fixBreachTypesFromTransaction)(e),addDefaultValues:e=>e},{key:"passkeys",isData:n.isPasskey,fixData:e=>(0,i.fixPasskeyTypesFromTransaction)(e),addDefaultValues:e=>e}];t.fixPersonalDataItemFromExternalSource=function(e,t){const r=function(e,t){return t?{...e,Id:t}:e}(e,t),o=c.find((e=>e.isData(r)));return o?u(o,r):(0,i.fixCommonPropertiesTypes)(r)};const d=["breaches","versionedBreaches"];function u(e,t){return e.addDefaultValues(e.fixData(t))}t.fixPersistedPersonalData=function(e){const t={};c.forEach((r=>{const o=e[r.key];if(!o)return;const n=o.map((e=>u(r,e)));t[r.key]=n}));const r=(t.credentials??[]).filter((e=>!!e.Id));return{...(0,o.omit)(d,e),...t,credentials:r}}},27517:(e,t)=>{var r;Object.defineProperty(t,"__esModule",{value:!0}),t.editPersonalSettings=t.loadStoredPersonalSettings=t.PersonalSettingsActionType=t.TOGGLE_DASHLANE_ON_SITE=t.TOGGLE_DASHLANE_ON_PAGE=void 0,t.TOGGLE_DASHLANE_ON_PAGE="TOGGLE_DASHLANE_ON_PAGE",t.TOGGLE_DASHLANE_ON_SITE="TOGGLE_DASHLANE_ON_SITE",function(e){e.Edit="EDIT_PERSONAL_SETTINGS",e.EditFromTransaction="EDIT_PERSONAL_SETTINGS_FROM_TRANSACTION",e.LoadFromStorage="LOAD_PERSONAL_SETTINGS_FROM_STORAGE"}(r=t.PersonalSettingsActionType||(t.PersonalSettingsActionType={}));t.loadStoredPersonalSettings=e=>({type:r.LoadFromStorage,data:Object.assign({},e)});t.editPersonalSettings=e=>({type:r.Edit,content:Object.assign({},e)})},51104:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.fixPersonalSettingTypes=void 0;const o=r(16516),n=r(6093),i={GeneratorDefaultAvoidAmbiguousChars:"boolean",GeneratorDefaultDigits:"boolean",GeneratorDefaultLetters:"boolean",GeneratorDefaultMixedCase:"boolean",GeneratorDefaultPronounceable:"boolean",GeneratorDefaultSymbols:"boolean",RecoveryOptIn:"boolean",ProtectPasswords:"boolean",ProtectPayments:"boolean",ProtectIDs:"boolean",RichIcons:"boolean",SecuredDataShowScreenshots:"yes-no",SecuredDataShowPassword:"yes-no",SecuredDataShowIDs:"yes-no",SecuredDataShowCreditcard:"yes-no",SecuredDataAutofillCreditcard:"yes-no",SyncBackup:"yes-no",SyncBackupPurchase:"yes-no",SyncBackupPersonaldata:"yes-no",SyncBackupPasswords:"yes-no",SyncBackupCreditCardsNumber:"yes-no",SyncBackupCreditCardsCCV:"yes-no"},a={GeneratorDefaultSize:"number",accountCreationDatetime:"number"},s={SpaceAnonIds:"json",AutofillSettings:"json"},c=(0,o.curry)(n.fixProperties.fromTransaction)(i,a,s),d=(0,o.curry)(n.fixProperties.fromStore)(i,a,s);t.fixPersonalSettingTypes={fromTransaction:c,fromStore:d}},95648:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getWebsiteInfo=t.getUpdatedPersonalSettings=t.getEmptyPersonalSettings=t.makeBasePersonalSettings=void 0;const o=r(16516),n=r(21178),i=r(27517),a=r(51104),s=r(16593);function c(){return{AccountRecoveryKey:null,AccountRecoveryKeyId:null,DisabledDomainsList:[],DisabledUrlsList:[],DisabledDomainsAutologinList:[],DisabledUrlsAutologinList:[],SyncBackupCreditCardsCCV:null,SyncBackupCreditCardsNumber:null,SyncBackupPasswords:null,SyncBackupPersonaldata:null,SyncBackupPurchase:null,SecuredDataAutofillCreditcard:!0,SecuredDataShowCreditcard:!0,SecuredDataShowIDs:!0,SecuredDataShowPassword:!1,SecuredDataShowScreenshots:!0,ProtectPasswords:!1,ProtectPayments:!0,RichIcons:!0,ProtectIDs:!1,CryptoUserPayload:null,...(0,t.makeBasePersonalSettings)()}}t.makeBasePersonalSettings=()=>({RealLogin:null,SecurityEmail:null,accountCreationDatetime:null,Format:null,Language:null,AnonymousUserId:null,UsagelogToken:null,SyncBackup:null,AutofillSettings:{isAutofillDisabled:!1,isAutologinDisabled:!1,disabledSourceTypes:[],disabledDomains:[],isFollowUpNotificationEnabled:!0},SecuredDataAutofillCreditcard:!0,SecuredDataShowCreditcard:!0,SecuredDataShowIDs:!0,SecuredDataShowPassword:!1,SecuredDataShowScreenshots:!0,ProtectPasswords:!1,ProtectPayments:!0,ProtectIDs:!1,RichIcons:!0,kwType:"KWSettingsManagerApp",Id:"SETTINGS_userId",LastBackupTime:null}),t.getEmptyPersonalSettings=c,t.default=(e=c(),t)=>{switch(t.type){case i.PersonalSettingsActionType.LoadFromStorage:return(0,o.mergeDeepRight)(e,a.fixPersonalSettingTypes.fromTransaction(t.data));case i.PersonalSettingsActionType.EditFromTransaction:return(0,o.mergeDeepRight)(e,a.fixPersonalSettingTypes.fromTransaction(t.content));case i.PersonalSettingsActionType.Edit:return(0,o.mergeDeepRight)(e,t.content);default:return e}},t.getUpdatedPersonalSettings=function(e,t){const r=c(),o=Object.keys(r);for(const e of o)t[e]||void 0===t[e]||(t[e]=r[e]);return{...e,...t}},t.getWebsiteInfo=function(e,t){const r=new n.ParsedURL(t).getRootDomain(),i=e.getPersonalSettings(),a=(0,s.spaceDisabledDomainsListSelector)(e.getState());return{disabledAutofillOnDomain:(0,o.contains)(r,i.DisabledDomainsList),disabledAutofillOnPage:(0,o.contains)(t,i.DisabledUrlsList),disabledAutologinOnDomain:(0,o.contains)(r,[...i.DisabledDomainsAutologinList,...a]),disabledAutologinOnPage:(0,o.contains)(t,i.DisabledUrlsAutologinList),disabledFromSpaces:!1}}},12995:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.loadedAnonymousComputerId=t.saveCurrentLocation=t.savePlatformInfo=t.LOAD_ANONYMOUS_APPLICATION_ID=t.SAVE_CURRENT_LOCATION=t.SAVE_PLATFORM_INFO=void 0,t.SAVE_PLATFORM_INFO="SAVE_PLATFORM_INFO",t.SAVE_CURRENT_LOCATION="SAVE_CURRENT_LOCATION",t.LOAD_ANONYMOUS_APPLICATION_ID="LOAD_ANONYMOUS_APPLICATION_ID";t.savePlatformInfo=e=>({type:t.SAVE_PLATFORM_INFO,info:e});t.saveCurrentLocation=e=>({type:t.SAVE_CURRENT_LOCATION,location:e});t.loadedAnonymousComputerId=e=>({type:t.LOAD_ANONYMOUS_APPLICATION_ID,anonymousApplicationId:e})},9149:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getEmptyPlatform=t.defaultPlatformInfo=void 0;const o=r(32626),n=r(12995);t.default=(e=a(),r)=>{switch(r.type){case n.SAVE_PLATFORM_INFO:return{...e,info:(i=r.info,s=t.defaultPlatformInfo,{anonymousApplicationId:i.anonymousApplicationId||s.anonymousApplicationId,platformName:i.platformName||s.platformName,appVersion:i.appVersion||s.appVersion,browser:i.browser||s.browser,browserVersion:i.browserVersion||s.browserVersion,country:i.country||s.country,os:i.os||s.os,osCountry:i.osCountry||s.osCountry,osVersion:i.osVersion||s.osVersion,lang:i.lang||s.lang,manifestVersion:i.manifestVersion||s.manifestVersion,buildType:i.buildType??o.ApplicationBuildType.PRODUCTION})};case n.SAVE_CURRENT_LOCATION:return{...e,location:r.location};case n.LOAD_ANONYMOUS_APPLICATION_ID:return{...e,info:{...e.info,anonymousApplicationId:r.anonymousApplicationId}};default:return e}var i,s};const i={country:null,isEu:!0};function a(){return{info:t.defaultPlatformInfo,location:i}}t.defaultPlatformInfo={anonymousApplicationId:"unknown_anonymous_application_id",platformName:"server_carbon_unknown",appVersion:"unknown_version",browser:"browser_carbon_unknown",browserVersion:"unknown_browser_version",country:"country_carbon_unknown",os:"os_carbon_unknown",osCountry:"os_country_carbon_unknown",osVersion:"unknown_os_version",lang:"lang_carbon_unknown",buildType:o.ApplicationBuildType.PRODUCTION},t.getEmptyPlatform=a},95363:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.resetRecoverySessionData=t.saveRecoverySessionData=t.RESET_RECOVERY_SESSION_DATA=t.SAVE_RECOVERY_SESSION_DATA=void 0,t.SAVE_RECOVERY_SESSION_DATA="SAVE_RECOVERY_SESSION_DATA",t.RESET_RECOVERY_SESSION_DATA="RESET_RECOVERY_SESSION_DATA";t.saveRecoverySessionData=e=>({type:t.SAVE_RECOVERY_SESSION_DATA,data:e});t.resetRecoverySessionData=()=>({type:t.RESET_RECOVERY_SESSION_DATA})},13250:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getEmptyRecoveryState=void 0;const o=r(95363);t.getEmptyRecoveryState=()=>({recoveryUki:null,publicKey:null,userServerProtectedSymmetricalKey:null,recoveryServerKeyBase64:null,recoveryInProgress:!1,currentPassword:null,verificationMethod:null}),t.default=(e=(0,t.getEmptyRecoveryState)(),r)=>{switch(r.type){case o.SAVE_RECOVERY_SESSION_DATA:return{...e,...r.data};case o.RESET_RECOVERY_SESSION_DATA:return(0,t.getEmptyRecoveryState)();default:return e}}},4572:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.userSessionReducer=t.userSessionRootReducer=void 0;const o=r(82422),n=r(16516),i=r(1678),a=r(70325),s=r(86797),c=r(12659),d=r(78663),u=r(11406),l=r(66403),p=r(48005),S=r(73472),g=r(76089),m=r(1347),A=r(95648),y=r(44899),E=r(4511),f=r(79619),T=r(58174),v=r(36738),h=r(4551),_=r(84827),I=r(63703),C=r(69795),D=r(97632),O=r(13250),P=r(39727),R=r(15868),N=r(19546),L=r(51554),b=r(48313),U=r(45291),M=r(98496),w=r(29737),B=r(38271),k=r(24827),G=r(36784),F=r(13042),K=r(81200),V=r(99800),H=r(27517);t.userSessionRootReducer=(e,t)=>{switch(t.type){case b.CLOSE_SESSION:return;case b.CHANGES_FROM_TRANSACTIONS:return z(e,t);case b.LOCAL_SETTINGS_UPDATED:const r=t.data;return Object.assign({},e,{localSettings:(0,S.default)(e.localSettings,(0,g.loadStoredLocalSettings)(r)),spaceData:(0,f.default)(e.spaceData,(0,v.spacesUpdated)(r.premiumStatus.spaces))});case b.PREMIUM_STATUS_UPDATED:const o=t.premiumStatus;return Object.assign({},e,{localSettings:(0,S.default)(e.localSettings,(0,g.localSettingsPremiumStatusUpdated)(o)),spaceData:(0,f.default)(e.spaceData,(0,v.spacesUpdated)(o.spaces))});default:return e}};const z=(e,t)=>t.actions.reduce(((e,t)=>{switch(t.type){case H.PersonalSettingsActionType.EditFromTransaction:return{...e,personalSettings:(0,A.default)(e.personalSettings,t)};case b.REMOVE_PERSONAL_ITEM_FROM_TRANSACTION:return{...e,personalData:(0,m.removePersonalItemFromTransaction)(e.personalData,t)};case b.ADD_PERSONAL_ITEM_FROM_TRANSACTION:return{...e,personalData:(0,m.addPersonalItemFromTransaction)(e.personalData,t)}}return e}),e),j=(e,t)=>{switch(t.type){case b.SAVE_GENERATED_PASSWORD:return Object.assign({},e,{personalData:(0,m.default)(e.personalData,{...t,type:U.SAVE_GENERATED_PASSWORD},{spaces:e.localSettings.premiumStatus?.spaces??[]})});case b.SAVE_PERSONAL_ITEM:return Object.assign({},e,{personalData:(0,m.default)(e.personalData,{...t,type:U.SAVE_PERSONAL_ITEM},{spaces:e.localSettings.premiumStatus?.spaces??[]})});case b.SAVE_PERSONAL_ITEMS:return Object.assign({},e,{personalData:(0,m.default)(e.personalData,{...t,type:U.SAVE_PERSONAL_ITEMS},{spaces:e.localSettings.premiumStatus?.spaces??[]})});default:return e}};t.userSessionReducer=(e,r)=>{const g=(0,o.combineReducers)({abTests:i.default,account:s.default,accountContactInfo:P.default,accountCreation:c.default,authTicketInfo:d.default,credentialOTPs:u.credentialOTPs,changeMPData:l.default,directorySync:p.default,iconsCache:T.default,localSettings:S.default,loginDeviceLimitFlow:R.default,notificationsStatus:M.default,paymentsState:a.default,personalData:m.default,personalSettings:A.default,sdkAuthentication:w.default,recoveryData:O.default,session:B.default,sharingData:y.default,sharingSync:_.default,spaceData:f.default,ssoSettings:I.default,sync:h.default,teamAdminData:E.default,twoFactorAuthenticationEnableFlow:N.twoFactorAuthenticationEnableFlow,twoFactorAuthenticationDisableFlow:L.twoFactorAuthenticationDisableFlow,userActivity:C.default,vaultReport:D.default,vpnData:k.VPNReducers,importPersonalData:G.ImportDataStateReducer,secureFileStorageState:F.SecureFileStorageReducer,credentialsDedupViewState:K.credentialsDedupViewReducer,breachRefreshMetaData:V.breachRefreshMetaDataReducer}),v=(0,n.partialRight)(g,[r]),b=(0,n.partialRight)(j,[r]);return(0,n.pipe)(t.userSessionRootReducer,b,v)(e,r)}},33007:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.loadAnonymousPartnerId=t.loadSdkAuthentication=t.saveStyxKeys=t.saveAppKeys=t.saveDashlaneServerDeltaTimestamp=t.LOAD_ANONYMOUS_PARTNER_ID=t.LOAD_CLIENT_AUTHENTICATION_DATA=t.SAVE_DASHLANE_SERVER_DELTA_TIMESTAMP=t.SAVE_STYX_KEYS=t.SAVE_APP_KEYS=void 0;const o=r(53);t.SAVE_APP_KEYS="SAVE_APP_KEYS",t.SAVE_STYX_KEYS="SAVE_STYX_KEYS",t.SAVE_DASHLANE_SERVER_DELTA_TIMESTAMP="SAVE_DASHLANE_SERVER_DELTA_TIMESTAMP",t.LOAD_CLIENT_AUTHENTICATION_DATA="LOAD_CLIENT_AUTHENTICATION_DATA",t.LOAD_ANONYMOUS_PARTNER_ID="LOAD_ANONYMOUS_PARTNER_ID";t.saveDashlaneServerDeltaTimestamp=e=>({type:t.SAVE_DASHLANE_SERVER_DELTA_TIMESTAMP,dashlaneServerDeltaTimestamp:Math.round((0,o.getUnixTimestamp)()-e)});t.saveAppKeys=e=>({type:t.SAVE_APP_KEYS,appKeys:e});t.saveStyxKeys=e=>({type:t.SAVE_STYX_KEYS,styxKeys:e});t.loadSdkAuthentication=e=>({type:t.LOAD_CLIENT_AUTHENTICATION_DATA,data:e});t.loadAnonymousPartnerId=e=>({type:t.LOAD_ANONYMOUS_PARTNER_ID,anonymousPartnerId:e})},29737:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getEmptySdkAuthentication=void 0;const o=r(33007);function n(){return{anonymousPartnerId:null,appKeys:null,dashlaneServerDeltaTimestamp:null,styxKeys:null}}t.getEmptySdkAuthentication=n,t.default=(e={anonymousPartnerId:null,appKeys:null,dashlaneServerDeltaTimestamp:null,styxKeys:null},t)=>{switch(t.type){case o.SAVE_APP_KEYS:return{...e,appKeys:t.appKeys};case o.SAVE_STYX_KEYS:return{...e,styxKeys:t.styxKeys};case o.SAVE_DASHLANE_SERVER_DELTA_TIMESTAMP:return{...e,dashlaneServerDeltaTimestamp:t.dashlaneServerDeltaTimestamp};case o.LOAD_CLIENT_AUTHENTICATION_DATA:return{...e,...t.data};case o.LOAD_ANONYMOUS_PARTNER_ID:return{...e,...t};default:return e}}},76556:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.secureFileStartCipheringAction=t.secureFileUploadErrorAction=t.secureFileUploadChunkAction=t.secureFileUploadClearAction=t.secureFileUploadDoneAction=t.secureFileStartUploadAction=t.secureFileChunkTransferDoneAction=t.secureFileChunkReadyAction=t.secureFileStartDecipheringAction=t.secureFileDownloadErrorAction=t.secureFileDownloadChunkAction=t.secureFileStartDownloadAction=t.secureFileClearAction=t.secureFileSetStorageInfoAction=t.SECURE_FILE_START_CIPHERING=t.SECURE_FILE_UPLOAD_CHUNK=t.SECURE_FILE_UPLOAD_ERROR=t.SECURE_FILE_UPLOAD_CLEAR=t.SECURE_FILE_UPLOAD_DONE=t.SECURE_FILE_START_UPLOAD=t.SECURE_FILE_START_DECIPHERING=t.SECURE_FILE_DOWNLOAD_CHUNK=t.SECURE_FILE_DOWNLOAD_ERROR=t.SECURE_FILE_CHUNK_TRANSFER_DONE=t.SECURE_FILE_CHUNK_READY=t.SECURE_FILE_START_DOWNLOAD=t.SECURE_FILE_CLEAR=t.SECURE_FILE_SET_STORAGE_INFO=void 0,t.SECURE_FILE_SET_STORAGE_INFO="SECURE_FILE_SET_STORAGE_INFO",t.SECURE_FILE_CLEAR="SECURE_FILE_CLEAR",t.SECURE_FILE_START_DOWNLOAD="SECURE_FILE_START_DOWNLOAD",t.SECURE_FILE_CHUNK_READY="SECURE_FILE_CHUNK_READY",t.SECURE_FILE_CHUNK_TRANSFER_DONE="SECURE_FILE_CHUNK_TRANSFER_DONE",t.SECURE_FILE_DOWNLOAD_ERROR="SECURE_FILE_DOWNLOAD_ERROR",t.SECURE_FILE_DOWNLOAD_CHUNK="SECURE_FILE_DOWNLOAD_CHUNK",t.SECURE_FILE_START_DECIPHERING="SECURE_FILE_START_DECIPHERING",t.SECURE_FILE_START_UPLOAD="SECURE_FILE_START_UPLOAD",t.SECURE_FILE_UPLOAD_DONE="SECURE_FILE_UPLOAD_DONE",t.SECURE_FILE_UPLOAD_CLEAR="SECURE_FILE_UPLOAD_CLEAR",t.SECURE_FILE_UPLOAD_ERROR="SECURE_FILE_UPLOAD_ERROR",t.SECURE_FILE_UPLOAD_CHUNK="SECURE_FILE_UPLOAD_CHUNK",t.SECURE_FILE_START_CIPHERING="SECURE_FILE_START_CIPHERING";t.secureFileSetStorageInfoAction=e=>({type:t.SECURE_FILE_SET_STORAGE_INFO,quota:e});t.secureFileClearAction=e=>({type:t.SECURE_FILE_CLEAR,downloadKey:e});t.secureFileStartDownloadAction=(e,r)=>({type:t.SECURE_FILE_START_DOWNLOAD,downloadKey:e,contentLength:r});t.secureFileDownloadChunkAction=(e,r)=>({type:t.SECURE_FILE_DOWNLOAD_CHUNK,bytesReceived:r,downloadKey:e});t.secureFileDownloadErrorAction=e=>({type:t.SECURE_FILE_DOWNLOAD_ERROR,downloadKey:e});t.secureFileStartDecipheringAction=e=>({type:t.SECURE_FILE_START_DECIPHERING,downloadKey:e});t.secureFileChunkReadyAction=(e,r)=>({type:t.SECURE_FILE_CHUNK_READY,downloadKey:e,chunks:r});t.secureFileChunkTransferDoneAction=e=>({type:t.SECURE_FILE_CHUNK_TRANSFER_DONE,downloadKey:e});t.secureFileStartUploadAction=e=>({type:t.SECURE_FILE_START_UPLOAD,contentLength:e});t.secureFileUploadDoneAction=()=>({type:t.SECURE_FILE_UPLOAD_DONE});t.secureFileUploadClearAction=()=>({type:t.SECURE_FILE_UPLOAD_CLEAR});t.secureFileUploadChunkAction=e=>({type:t.SECURE_FILE_UPLOAD_CHUNK,bytesSent:e});t.secureFileUploadErrorAction=()=>({type:t.SECURE_FILE_UPLOAD_ERROR});t.secureFileStartCipheringAction=()=>({type:t.SECURE_FILE_START_CIPHERING})},20810:function(e,t,r){var o=this&&this.__createBinding||(Object.create?function(e,t,r,o){void 0===o&&(o=r);var n=Object.getOwnPropertyDescriptor(t,r);n&&!("get"in n?!t.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,o,n)}:function(e,t,r,o){void 0===o&&(o=r),e[o]=t[r]}),n=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||o(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),n(r(10691),t),n(r(76556),t)},13042:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getEmptySecureFileStorageState=t.SecureFileStorageReducer=void 0;const o=r(32626),n=r(20810),i=r(76556),a=(e,t,r)=>({...e,downloads:{...{[t]:{...r}}}}),s={downloads:{},upload:{status:o.FileUploadStatus.None,bytesSent:0,contentLength:0},quota:{max:0,remaining:0}};t.SecureFileStorageReducer=(e=s,t)=>{switch(t.type){case i.SECURE_FILE_SET_STORAGE_INFO:return{...e,quota:t.quota};case n.SECURE_FILE_CLEAR:{const r=(t.downloadKey?e.downloads[t.downloadKey]:void 0)?{...e.downloads,[t.downloadKey]:void 0}:s.downloads;return{...e,downloads:r,upload:s.upload}}case i.SECURE_FILE_START_DOWNLOAD:return a(e,t.downloadKey,{status:o.FileDownloadStatus.Initial,contentLength:t.contentLength,bytesReceived:0});case i.SECURE_FILE_DOWNLOAD_CHUNK:{const r=e.downloads[t.downloadKey];if(!r)return e;const n=r.status===o.FileDownloadStatus.Downloading?r.bytesReceived:0,i=r.status===o.FileDownloadStatus.Downloading||r.status===o.FileDownloadStatus.Initial?r.contentLength:0;return a(e,t.downloadKey,{status:o.FileDownloadStatus.Downloading,bytesReceived:n+t.bytesReceived,contentLength:i})}case i.SECURE_FILE_START_DECIPHERING:return e.downloads[t.downloadKey]?a(e,t.downloadKey,{status:o.FileDownloadStatus.Deciphering}):e;case i.SECURE_FILE_DOWNLOAD_ERROR:return a(e,t.downloadKey,{status:o.FileDownloadStatus.Error});case n.SECURE_FILE_CHUNK_READY:{const r=e.downloads[t.downloadKey];if(!r)return e;const{chunks:n,currentChunkIndex:i}=r?.status===o.FileDownloadStatus.ChunkReady?{chunks:r.chunks,currentChunkIndex:r.currentChunkIndex+1}:{chunks:t.chunks,currentChunkIndex:0};return a(e,t.downloadKey,i===n.length?{status:o.FileDownloadStatus.TransferComplete}:{status:o.FileDownloadStatus.ChunkReady,currentChunkIndex:i,chunks:n})}case n.SECURE_FILE_CHUNK_TRANSFER_DONE:{const r=e.downloads[t.downloadKey];if(!r)return e;const n=r?.status===o.FileDownloadStatus.ChunkReady?r.chunks:void 0;return a(e,t.downloadKey,{status:o.FileDownloadStatus.ChunkDownloaded,chunks:n})}case i.SECURE_FILE_START_UPLOAD:return{...e,upload:{...e.upload,status:o.FileUploadStatus.Initial,contentLength:t.contentLength,bytesSent:0}};case i.SECURE_FILE_UPLOAD_CHUNK:{const r=e.upload;if(0===r.contentLength)return e;const n=r.bytesSent+t.bytesSent;return{...e,upload:{...e.upload,status:o.FileUploadStatus.Uploading,bytesSent:n<r.contentLength?n:r.bytesSent}}}case i.SECURE_FILE_START_CIPHERING:return{...e,upload:{...e.upload,status:o.FileUploadStatus.Ciphering}};case i.SECURE_FILE_UPLOAD_ERROR:return{...e,upload:{...e.upload,status:o.FileUploadStatus.Error}};case i.SECURE_FILE_UPLOAD_DONE:return 0===e.upload.contentLength?e:{...e,upload:{bytesSent:0,contentLength:0,status:o.FileUploadStatus.Done}};case n.SECURE_FILE_UPLOAD_CLEAR:return{...e,upload:{bytesSent:0,contentLength:0,status:o.FileUploadStatus.None}};default:return e}};t.getEmptySecureFileStorageState=()=>s},10691:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},16356:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.updateIsFirstSessionAfterAccountCreation=t.updateisUsingBackupCode=t.updateisUsingDashlaneAuthenticator=t.updateSessionDidOpen=t.pairingSucceeded=t.updatePublicUserId=t.updateDeviceAnalyticsId=t.updateUserAnalyticsId=t.updateAnalyticsIds=t.loadAnalyticsIds=t.updateRemoteKey=t.updateIsLocalKeyMigrationRequired=t.updateLocalKey=t.updateSettingsForMPValidation=t.updateCryptoKwc3FixedSalt=t.updateLastMasterPasswordCheck=t.updateMasterPassword=t.updateServerKey=t.loadSessionKeys=t.updateKeyPair=t.shouldRememberMeForSSOUpdated=t.rememberMasterPasswordUpdated=t.UPDATE_IS_FIRST_SESSION_AFTER_ACCOUNT_CREATION=t.UPDATE_IS_USING_BACKUP_CODE=t.UPDATE_IS_USING_AUTHENTICATOR=t.UPDATE_SESSION_DID_OPEN=t.PAIRING_SUCCEEDED=t.LOAD_ANALYTICS_IDS=t.UPDATE_PUBLIC_USER_ID=t.UPDATE_DEVICE_ANALYTICS_ID=t.UPDATE_USER_ANALYTICS_ID=t.UPDATE_ANALYTICS_IDS=t.UPDATE_IS_LOCAL_KEY_MIGRATION_REQUIRED=t.UPDATE_REMOTE_KEY=t.UPDATE_LOCAL_KEY=t.UPDATE_SETTINGS_FOR_MP_VALIDATION=t.USE_NEW_AUTH_API=t.LOAD_SESSION_KEYS=t.UPDATE_CRYPTO_KWC3_FIXED_SALT=t.UPDATE_LAST_MASTER_PASSWORD_CHECK=t.UPDATE_SERVER_KEY=t.UPDATE_MASTER_PASSWORD=t.UPDATE_KEY_PAIR=t.REMEMBER_ME_FOR_SSO_UPDATED=t.REMEMBER_MASTER_PASSWORD_UPDATED=void 0,t.REMEMBER_MASTER_PASSWORD_UPDATED="REMEMBER_MASTER_PASSWORD_UPDATED",t.REMEMBER_ME_FOR_SSO_UPDATED="REMEMBER_ME_FOR_SSO_UPDATED",t.UPDATE_KEY_PAIR="UPDATE_KEY_PAIR",t.UPDATE_MASTER_PASSWORD="UPDATE_MASTER_PASSWORD",t.UPDATE_SERVER_KEY="UPDATE_SERVER_KEY",t.UPDATE_LAST_MASTER_PASSWORD_CHECK="UPDATE_LAST_MASTER_PASSWORD_CHECK",t.UPDATE_CRYPTO_KWC3_FIXED_SALT="UPDATE_CRYPTO_KWC3_FIXED_SALT",t.LOAD_SESSION_KEYS="LOAD_SESSION_KEYS",t.USE_NEW_AUTH_API="USE_NEW_AUTH_API",t.UPDATE_SETTINGS_FOR_MP_VALIDATION="UPDATE_SETTINGS_FOR_MP_VALIDATION",t.UPDATE_LOCAL_KEY="UPDATE_LOCAL_KEY",t.UPDATE_REMOTE_KEY="UPDATE_REMOTE_KEY",t.UPDATE_IS_LOCAL_KEY_MIGRATION_REQUIRED="UPDATE_IS_LOCAL_KEY_MIGRATION_REQUIRED",t.UPDATE_ANALYTICS_IDS="UPDATE_ANALYTICS_IDS",t.UPDATE_USER_ANALYTICS_ID="UPDATE_USER_ANALYTICS_ID",t.UPDATE_DEVICE_ANALYTICS_ID="UPDATE_DEVICE_ANALYTICS_ID",t.UPDATE_PUBLIC_USER_ID="UPDATE_PUBLIC_USER_ID",t.LOAD_ANALYTICS_IDS="LOAD_ANALYTICS_IDS",t.PAIRING_SUCCEEDED="PAIRING_SUCCEEDED",t.UPDATE_SESSION_DID_OPEN="UPDATE_SESSION_DID_OPEN",t.UPDATE_IS_USING_AUTHENTICATOR="UPDATE_IS_USING_AUTHENTICATOR",t.UPDATE_IS_USING_BACKUP_CODE="UPDATE_IS_USING_BACKUP_CODE",t.UPDATE_IS_FIRST_SESSION_AFTER_ACCOUNT_CREATION="UPDATE_IS_FIRST_SESSION_AFTER_ACCOUNT_CREATION";t.rememberMasterPasswordUpdated=e=>({type:t.REMEMBER_MASTER_PASSWORD_UPDATED,rememberMasterPassword:e});t.shouldRememberMeForSSOUpdated=e=>({type:t.REMEMBER_ME_FOR_SSO_UPDATED,shouldRememberMeForSSO:e});t.updateKeyPair=e=>({type:t.UPDATE_KEY_PAIR,keyPair:e});t.loadSessionKeys=e=>({type:t.LOAD_SESSION_KEYS,sessionKeys:e});t.updateServerKey=e=>({type:t.UPDATE_SERVER_KEY,serverKey:e||""});t.updateMasterPassword=e=>({type:t.UPDATE_MASTER_PASSWORD,masterPassword:e});t.updateLastMasterPasswordCheck=()=>({type:t.UPDATE_LAST_MASTER_PASSWORD_CHECK});t.updateCryptoKwc3FixedSalt=e=>({type:t.UPDATE_CRYPTO_KWC3_FIXED_SALT,cryptoKwc3FixedSalt:e});t.updateSettingsForMPValidation=e=>({type:t.UPDATE_SETTINGS_FOR_MP_VALIDATION,settings:e});t.updateLocalKey=e=>({type:t.UPDATE_LOCAL_KEY,localKey:e});t.updateIsLocalKeyMigrationRequired=e=>({type:t.UPDATE_IS_LOCAL_KEY_MIGRATION_REQUIRED,isLocalKeyMigrationRequired:e});t.updateRemoteKey=e=>({type:t.UPDATE_REMOTE_KEY,remoteKey:e});t.loadAnalyticsIds=e=>({type:t.LOAD_ANALYTICS_IDS,userAnalyticsId:e.userAnalyticsId,deviceAnalyticsId:e.deviceAnalyticsId});t.updateAnalyticsIds=(e,r)=>({type:t.UPDATE_ANALYTICS_IDS,userAnalyticsId:e,deviceAnalyticsId:r});t.updateUserAnalyticsId=e=>({type:t.UPDATE_USER_ANALYTICS_ID,userAnalyticsId:e});t.updateDeviceAnalyticsId=e=>({type:t.UPDATE_DEVICE_ANALYTICS_ID,deviceAnalyticsId:e});t.updatePublicUserId=e=>({type:t.UPDATE_PUBLIC_USER_ID,publicUserId:e});t.pairingSucceeded=e=>({type:t.PAIRING_SUCCEEDED,pairingId:e});t.updateSessionDidOpen=e=>({type:t.UPDATE_SESSION_DID_OPEN,didOpen:e});t.updateisUsingDashlaneAuthenticator=e=>({type:t.UPDATE_IS_USING_AUTHENTICATOR,withAuthenticator:e});t.updateisUsingBackupCode=e=>({type:t.UPDATE_IS_USING_BACKUP_CODE,withBackupCode:e});t.updateIsFirstSessionAfterAccountCreation=()=>({type:t.UPDATE_IS_FIRST_SESSION_AFTER_ACCOUNT_CREATION})},38271:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0});const o=r(96997),n=r(48313),i=r(16356),a=r(59489);t.default=(e={sessionId:null,rememberMasterPassword:null,shouldRememberMeForSSO:null,masterPassword:null,remoteKey:null,localKey:null,lastMasterPasswordCheck:0,serverKey:"",keyPair:null,cryptoKwc3FixedSalt:null,sessionKeys:null,settingsForMPValidation:null,isLocalKeyMigrationRequired:!1,analyticsIds:{userAnalyticsId:"",deviceAnalyticsId:""},publicUserId:"",pairingId:null,didOpen:!1,isUsingDashlaneAuthenticator:!1,isUsingBackupCode:!1,isFirstSessionAfterAccountCreation:!1},t)=>{switch(t.type){case n.OPEN_SESSION:return{...e,sessionId:(0,o.default)()};case i.UPDATE_KEY_PAIR:return{...e,keyPair:t.keyPair};case i.REMEMBER_MASTER_PASSWORD_UPDATED:return{...e,rememberMasterPassword:t.rememberMasterPassword};case i.REMEMBER_ME_FOR_SSO_UPDATED:return{...e,shouldRememberMeForSSO:t.shouldRememberMeForSSO};case i.UPDATE_MASTER_PASSWORD:return{...e,masterPassword:t.masterPassword};case i.LOAD_SESSION_KEYS:return{...e,sessionKeys:t.sessionKeys};case i.UPDATE_SERVER_KEY:return{...e,serverKey:t.serverKey};case i.UPDATE_LAST_MASTER_PASSWORD_CHECK:return{...e,lastMasterPasswordCheck:Date.now()};case i.UPDATE_CRYPTO_KWC3_FIXED_SALT:return{...e,cryptoKwc3FixedSalt:t.cryptoKwc3FixedSalt};case a.CONFIRM_USER_AUTHENTICATION:return{...e,settingsForMPValidation:null};case i.UPDATE_SETTINGS_FOR_MP_VALIDATION:return{...e,settingsForMPValidation:t.settings};case i.UPDATE_LOCAL_KEY:return e.localKey!==t.localKey?{...e,localKey:t.localKey}:e;case i.UPDATE_REMOTE_KEY:return e.remoteKey!==t.remoteKey?{...e,remoteKey:t.remoteKey}:e;case i.UPDATE_IS_LOCAL_KEY_MIGRATION_REQUIRED:return{...e,isLocalKeyMigrationRequired:t.isLocalKeyMigrationRequired};case i.LOAD_ANALYTICS_IDS:case i.UPDATE_ANALYTICS_IDS:return{...e,analyticsIds:{userAnalyticsId:t.userAnalyticsId,deviceAnalyticsId:t.deviceAnalyticsId}};case i.UPDATE_USER_ANALYTICS_ID:return{...e,analyticsIds:{...e.analyticsIds,userAnalyticsId:t.userAnalyticsId}};case i.UPDATE_DEVICE_ANALYTICS_ID:return{...e,analyticsIds:{...e.analyticsIds,deviceAnalyticsId:t.deviceAnalyticsId}};case i.UPDATE_PUBLIC_USER_ID:return{...e,publicUserId:t.publicUserId};case i.PAIRING_SUCCEEDED:return{...e,pairingId:t.pairingId};case i.UPDATE_SESSION_DID_OPEN:return{...e,didOpen:t.didOpen};case i.UPDATE_IS_USING_AUTHENTICATOR:return{...e,isUsingDashlaneAuthenticator:t.withAuthenticator};case i.UPDATE_IS_USING_BACKUP_CODE:return{...e,isUsingBackupCode:t.withBackupCode};case i.UPDATE_IS_FIRST_SESSION_AFTER_ACCOUNT_CREATION:return{...e,isFirstSessionAfterAccountCreation:!0};default:return e}}},34433:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.userGroupsUpdated=t.sharingDataUpdated=t.USER_GROUPS_UPDATED=t.SHARING_DATA_ITEMS_UPDATED=void 0,t.SHARING_DATA_ITEMS_UPDATED="SHARING_DATA_ITEMS_UPDATED",t.USER_GROUPS_UPDATED="USER_GROUPS_UPDATED";t.sharingDataUpdated=e=>({type:t.SHARING_DATA_ITEMS_UPDATED,sharingData:e});t.userGroupsUpdated=e=>({type:t.USER_GROUPS_UPDATED,userGroups:e})},44899:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getEmptyState=void 0;const o=r(34433);function n(){return{items:[],itemGroups:[],userGroups:[]}}t.default=(e={items:[],itemGroups:[],userGroups:[]},t)=>{switch(t.type){case o.SHARING_DATA_ITEMS_UPDATED:const{sharingData:r}=t;return{...r};case o.USER_GROUPS_UPDATED:const{userGroups:n}=t;return{...e,userGroups:n};default:return e}},t.getEmptyState=n},84827:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getEmptySharingSyncState=t.setAllPendingAction=t.SET_ALL_PENDING=t.updateAllPendingAction=t.UPDATE_ALL_PENDING=void 0,t.UPDATE_ALL_PENDING="UPDATE_ALL_PENDING";t.updateAllPendingAction=(e,r)=>({type:t.UPDATE_ALL_PENDING,pendingItemGroups:e,pendingUserGroups:r}),t.SET_ALL_PENDING="SET_ALL_PENDING";function r(){return{pendingItemGroups:[],pendingUserGroups:[]}}function o(e,t,r){const o=t.map((e=>e[r])),n=e.map((e=>e[r])),i=e.filter((e=>o.includes(e[r])));return[...t.filter((e=>!(e=>n.includes(e[r]))(e))),...i.map((e=>{const o=t.find((t=>t[r]===e[r]));return o||e}))]}t.setAllPendingAction=(e,r)=>({type:t.SET_ALL_PENDING,pendingItemGroups:e,pendingUserGroups:r}),t.default=(e={pendingItemGroups:[],pendingUserGroups:[]},r)=>{switch(r.type){case t.UPDATE_ALL_PENDING:{const{pendingUserGroups:t,pendingItemGroups:n}=r,i=o(e.pendingItemGroups,n,"itemGroupId");return{pendingUserGroups:o(e.pendingUserGroups,t,"groupId"),pendingItemGroups:i}}case t.SET_ALL_PENDING:{const{pendingUserGroups:e,pendingItemGroups:t}=r;return{pendingItemGroups:t,pendingUserGroups:e}}default:return e}},t.getEmptySharingSyncState=r},36738:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.spaceDataUpdated=t.spacesUpdated=t.SPACE_DATA_UPDATED=t.SPACES_UPDATED=void 0,t.SPACES_UPDATED="SPACES_UPDATED",t.SPACE_DATA_UPDATED="SPACE_DATA_UPDATED";t.spacesUpdated=e=>({type:t.SPACES_UPDATED,spaces:e});t.spaceDataUpdated=e=>({type:t.SPACE_DATA_UPDATED,spaceData:e})},79619:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getEmptySpaceDataState=void 0;const o=r(36738);function n(){return{spaces:[]}}t.default=(e={spaces:[]},t)=>{switch(t.type){case o.SPACES_UPDATED:const r=t;return{...e,spaces:(r.spaces||[]).map((e=>({teamId:e.teamId,details:e})))};case o.SPACE_DATA_UPDATED:return{...t.spaceData};default:return e}},t.getEmptySpaceDataState=n},7624:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.resetSSOSettings=t.storeSSOSettings=void 0;const o=r(63703);t.storeSSOSettings=e=>({type:o.SET_SSO_SETTINGS,data:e});t.resetSSOSettings=()=>({type:o.SET_SSO_SETTINGS,data:(0,o.getEmptySSOSettings)()})},63703:(e,t)=>{function r(){return{ssoUser:!1,serviceProviderUrl:"",ssoServiceProviderKey:"",migration:void 0,ssoToken:""}}Object.defineProperty(t,"__esModule",{value:!0}),t.getEmptySSOSettings=t.SET_SSO_SETTINGS=void 0,t.SET_SSO_SETTINGS="SET_SSO_SETTINGS",t.default=(e=r(),o)=>o.type===t.SET_SSO_SETTINGS?Object.assign({},e,{...o.data}):e,t.getEmptySSOSettings=r},82262:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.syncFailure=t.syncSuccess=t.syncStarted=t.SYNC_FAILURE=t.SYNC_SUCCESS=t.SYNC_STARTED=void 0,t.SYNC_STARTED="SYNC_STARTED",t.SYNC_SUCCESS="SYNC_SUCCESS",t.SYNC_FAILURE="SYNC_FAILURE";t.syncStarted=()=>({type:t.SYNC_STARTED,isInProgress:!0,startTime:Date.now()});t.syncSuccess=e=>({type:t.SYNC_SUCCESS,isInProgress:!1,isUploadEnabled:e});t.syncFailure=()=>({type:t.SYNC_FAILURE,isInProgress:!1})},4551:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getEmptySyncState=void 0;const o=r(32626),n=r(82262);function i(){return{isUploadEnabled:!1,syncIntervalTimeMs:3e5,status:o.SyncStatuses.READY}}t.getEmptySyncState=i,t.default=(e=i(),t)=>{switch(t.type){case n.SYNC_STARTED:return{...e,startTime:t.startTime,status:o.SyncStatuses.IN_PROGRESS};case n.SYNC_FAILURE:return{...e,status:o.SyncStatuses.FAILURE};case n.SYNC_SUCCESS:return{...e,status:o.SyncStatuses.SUCCESS,isUploadEnabled:t.isUploadEnabled};default:return e}}},1370:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.specialItemGroupUpdated=t.userGroupAdminItemCreated=t.teamAdminDataUpdated=t.userGroupsDeleted=t.userGroupsCreated=t.userGroupsUpdated=t.SPECIAL_ITEM_GROUP_UPDATED=t.GROUP_ADMIN_ITEM_CREATED=t.TEAM_ADMIN_DATA_UPDATED=t.TEAM_ADMIN_USER_GROUPS_DELETED=t.TEAM_ADMIN_USER_GROUPS_CREATED=t.TEAM_ADMIN_USER_GROUPS_UPDATED=void 0,t.TEAM_ADMIN_USER_GROUPS_UPDATED="TEAM_ADMIN_USER_GROUPS_UPDATED",t.TEAM_ADMIN_USER_GROUPS_CREATED="TEAM_ADMIN_USER_GROUPS_CREATED",t.TEAM_ADMIN_USER_GROUPS_DELETED="TEAM_ADMIN_USER_GROUPS_DELETED",t.TEAM_ADMIN_DATA_UPDATED="TEAM_ADMIN_DATA_UPDATED",t.GROUP_ADMIN_ITEM_CREATED="GROUP_ADMIN_ITEM_CREATED",t.SPECIAL_ITEM_GROUP_UPDATED="SPECIAL_ITEM_GROUP_UPDATED";t.userGroupsUpdated=(e,r)=>({type:t.TEAM_ADMIN_USER_GROUPS_UPDATED,teamId:e,userGroups:r});t.userGroupsCreated=(e,r)=>({type:t.TEAM_ADMIN_USER_GROUPS_CREATED,teamId:e,userGroups:r});t.userGroupsDeleted=(e,r)=>({type:t.TEAM_ADMIN_USER_GROUPS_DELETED,teamId:e,userGroups:r});t.teamAdminDataUpdated=e=>({type:t.TEAM_ADMIN_DATA_UPDATED,teamAdminData:e});t.userGroupAdminItemCreated=(e,r)=>({type:t.GROUP_ADMIN_ITEM_CREATED,teamId:e,userGroupAdminItem:r});t.specialItemGroupUpdated=(e,r)=>({type:t.SPECIAL_ITEM_GROUP_UPDATED,teamId:e,specialItemGroup:r})},4511:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getEmptyState=void 0;const o=r(1370);function n(e,t){const r={};return Object.keys(e).forEach((t=>{r[t]=e[t]})),Object.keys(t).forEach((e=>{r[e]=Object.assign({},r[e],t[e])})),r}function i(){return{teams:{}}}t.default=(e={teams:{}},t)=>{switch(t.type){case o.TEAM_ADMIN_DATA_UPDATED:const{teamAdminData:a}=t;return{teams:n(e.teams,a.teams)};case o.TEAM_ADMIN_USER_GROUPS_UPDATED:const s=t;return{teams:n(e.teams,{[s.teamId]:{teamId:s.teamId,userGroups:s.userGroups}})};case o.TEAM_ADMIN_USER_GROUPS_CREATED:const c=t,d=e.teams[c.teamId]?e.teams[c.teamId].userGroups:[];return{teams:n(e.teams,{[c.teamId]:{teamId:c.teamId,userGroups:d.concat(c.userGroups)}})};case o.TEAM_ADMIN_USER_GROUPS_DELETED:const u=t,l=u.userGroups.map((e=>e.groupId)),p=e.teams[u.teamId]?e.teams[u.teamId].userGroups:[];return{teams:n(e.teams,{[u.teamId]:{teamId:u.teamId,userGroups:p.filter((e=>!l.includes(e.groupId)))}})};case o.GROUP_ADMIN_ITEM_CREATED:const S=t,g=(r=e.teams,i=S.teamId,r[i]&&r[i].userGroupAdminItems||[]);return{teams:n(e.teams,{[S.teamId]:{teamId:S.teamId,userGroupAdminItems:g.concat([S.userGroupAdminItem])}})};case o.SPECIAL_ITEM_GROUP_UPDATED:const m=t;return{teams:n(e.teams,{[m.teamId]:{teamId:m.teamId,specialItemGroup:t.specialItemGroup}})};default:return e}var r,i},t.getEmptyState=i},40051:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.userActivityLastSentAtUpdated=void 0;const o=r(39958);t.userActivityLastSentAtUpdated=e=>({type:o.LAST_SENT_AT_UPDATED,lastSentAt:e})},69795:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getEmptyUserActivityState=void 0;const o=r(39958);function n(){return{lastSentAt:void 0}}t.default=(e=n(),t)=>t.type===o.LAST_SENT_AT_UPDATED?{...e,lastSentAt:t.lastSentAt}:e,t.getEmptyUserActivityState=n},39958:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.LAST_SENT_AT_UPDATED=void 0,t.LAST_SENT_AT_UPDATED="LAST_SENT_AT_UPDATED"},72881:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.vaultReportLastSentAtUpdated=void 0;const o=r(94846);t.vaultReportLastSentAtUpdated=e=>({type:o.LAST_SENT_AT_UPDATED,lastSentAt:e})},97632:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getEmptyVaultReportState=void 0;const o=r(94846);function n(){return{lastSentAt:void 0}}t.default=(e=n(),t)=>t.type===o.LAST_SENT_AT_UPDATED?{...e,lastSentAt:t.lastSentAt}:e,t.getEmptyVaultReportState=n},94846:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.LAST_SENT_AT_UPDATED=void 0,t.LAST_SENT_AT_UPDATED="LAST_SENT_AT_UPDATED"},39610:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.bootstrap=void 0;const o=r(34066);t.bootstrap=e=>{e.register(o.config)}},10447:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.forceSyncHandler=void 0;const o=r(21877);t.forceSyncHandler=async function({sessionService:e}){await e.getInstance().user.attemptSync(o.Trigger.Manual)}},18203:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.refreshSubscriptionInformationHandler=void 0;const o=r(35507);t.refreshSubscriptionInformationHandler=async e=>(0,o.refreshSubscriptionInformation)(e.storeService,e.storeService.getAccountInfo().login)},17095:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.setCredentialSearchOrderHandler=void 0;const o=r(76089);t.setCredentialSearchOrderHandler=(e,t)=>(e.storeService.dispatch((0,o.credentialSearchOrderUpdated)(t.order)),e.sessionService.getInstance().user.persistLocalSettings(),Promise.resolve())},94275:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.updateAccountRecoveryKeyPersonalSettingsHandler=void 0;const o=r(27517);t.updateAccountRecoveryKeyPersonalSettingsHandler=(e,t)=>(e.storeService.dispatch((0,o.editPersonalSettings)(t)),Promise.resolve())},17387:function(e,t,r){var o=this&&this.__createBinding||(Object.create?function(e,t,r,o){void 0===o&&(o=r);var n=Object.getOwnPropertyDescriptor(t,r);n&&!("get"in n?!t.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,o,n)}:function(e,t,r,o){void 0===o&&(o=r),e[o]=t[r]}),n=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||o(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),t.bootstrap=t.setupSubscriptions=void 0,n(r(25576),t);var i=r(87881);Object.defineProperty(t,"setupSubscriptions",{enumerable:!0,get:function(){return i.setupSubscriptions}});var a=r(39610);Object.defineProperty(t,"bootstrap",{enumerable:!0,get:function(){return a.bootstrap}})},81228:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.sessionInfo$=t.getServiceProviderUrl$=t.emitServiceProviderUrl=t.webOnboardingMode$=t.subscriptionInformation$=t.premiumStatus$=t.syncInProgress$=t.syncInfo$=t.didOpen$=void 0;const o=r(18948),n=r(3343),i=r(16593);t.didOpen$=()=>(0,o.pipe)((0,n.map)(i.didOpenSelector),(0,n.distinctUntilChanged)());t.syncInfo$=()=>(0,o.pipe)((0,n.map)(i.syncSelector),(0,n.distinctUntilChanged)());t.syncInProgress$=()=>(0,o.pipe)((0,n.map)(i.syncIsInProgressSelector),(0,n.distinctUntilChanged)());t.premiumStatus$=()=>(0,o.pipe)((0,n.map)(i.premiumStatusSelector),(0,n.distinctUntilChanged)());t.subscriptionInformation$=()=>(0,o.pipe)((0,n.map)(i.subscriptionInformationSelector),(0,n.distinctUntilChanged)());t.webOnboardingMode$=()=>(0,o.pipe)((0,n.map)(i.webOnboardingModeSelector),(0,n.distinctUntilChanged)());const a=new o.Subject;t.emitServiceProviderUrl=e=>a.next(e);t.getServiceProviderUrl$=()=>a;t.sessionInfo$=()=>(0,o.pipe)((0,n.map)(i.sessionInfoSelector),(0,n.distinctUntilChanged)())},38328:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.updatePremiumChurningDismissDateHandler=t.SendTokenStatus=void 0;var o=r(72636);Object.defineProperty(t,"SendTokenStatus",{enumerable:!0,get:function(){return o.SendTokenStatus}});const n=r(76089);t.updatePremiumChurningDismissDateHandler=e=>{const t=new Date;return e.storeService.dispatch((0,n.premiumChurningDismissDateUpdated)(t.getTime())),e.sessionService.getInstance().user.persistLocalSettings(),Promise.resolve()}},28287:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.resetProtectedItemAutofillTimerHandler=t.validateMasterPasswordHandler=t.validateMasterPassword=t.validateToken=t.convertTokenToAuthTicket=t.dashlaneAuthenticatorGetAuthTicket=t.handlePerformValidationError=t.SendTokenStatus=void 0;const o=r(32626),n=r(46298);var i=r(72636);Object.defineProperty(t,"SendTokenStatus",{enumerable:!0,get:function(){return i.SendTokenStatus}});const a=r(17825),s=r(42282),c=r(16356),d=r(87248),u=(e,t)=>({success:!1,error:{code:e,message:t}});function l(e,t,r){if(!(0,n.isApiErrorOfType)(n.BusinessError,e))return u(o.AuthenticationCode.REGISTER_DEVICE_FAILED);const i=e.code;switch(i){case n.VerificationFailed:return u(t?o.AuthenticationCode.OTP_NOT_VALID:r?o.AuthenticationCode.DASHLANE_AUTHENTICATOR_PUSH_NOTIFICATION_DENIED:o.AuthenticationCode.TOKEN_NOT_VALID);case n.InvalidOTPBlocked:return u(o.AuthenticationCode.OTP_TOO_MANY_ATTEMPTS);case n.InvalidOTPAlreadyUsed:return u(o.AuthenticationCode.OTP_ALREADY_USED);case n.AccountBlockedContactSupport:return u(o.AuthenticationCode.TOKEN_ACCOUNT_LOCKED);case n.VerificationTimeout:return u(o.AuthenticationCode.TOKEN_EXPIRED);case n.VerificationRequiresRequest:return u(o.AuthenticationCode.TOKEN_TOO_MANY_ATTEMPTS);case n.VerificationMethodDisabled:return u(o.AuthenticationCode.REGISTER_DEVICE_FAILED);case n.InvalidSsoToken:case n.B2bSsoUserNotFound:return u(o.AuthenticationCode.SSO_VERIFICATION_FAILED);case n.UserHasNoActiveAuthenticator:return u(o.AuthenticationCode.NO_ACTIVE_AUTHENTICATOR);case n.FailedToContactAuthenticatorDevice:return u(o.AuthenticationCode.FAILED_TO_CONTACT_AUTHENTICATOR_DEVICE);default:return u(o.AuthenticationCode.BUSINESS_ERROR,`Unexpected business_error: ${i}`)}}t.handlePerformValidationError=l;t.dashlaneAuthenticatorGetAuthTicket=async(e,t)=>{const{login:r}=e.getAccountInfo();e.dispatch((0,s.resetAuthTicketInfo)());try{const o=await(0,n.performDashlaneAuthenticatorVerification)(e,{login:r,deviceName:t});if((0,n.isApiError)(o))return l(o,!1,!0);const i=o.authTicket;return e.dispatch((0,s.updateAuthTicketInfo)({login:r,authTicket:i,date:Date.now()})),{success:!0,authTicket:i}}catch(e){if(e.getAdditionalInfo()?.response?.status===d.HttpStatusCode.GATEWAY_TIMEOUT)return l(n.verificationTimeoutError,!1,!0);throw e}};t.convertTokenToAuthTicket=async(e,t)=>{const{login:r}=e.getAccountInfo();let i,c;switch(e.dispatch((0,s.resetAuthTicketInfo)()),t.type){case"emailToken":if(!(0,n.isEmailTokenValid)(t.value))return u(o.AuthenticationCode.TOKEN_NOT_VALID);if(c=await(0,n.performEmailTokenVerification)(e,{login:r,token:t.value}),(0,n.isApiError)(c))return l(c);i=c.authTicket;break;case"extraDeviceToken":return(0,n.isExtraDeviceTokenValid)(t.value)?{success:!0,authTicket:void 0}:u(o.AuthenticationCode.TOKEN_NOT_VALID);case"sso":if(!t.value)return u(o.AuthenticationCode.TOKEN_NOT_VALID);if(c=await(0,n.performSsoVerification)(e,{login:r,ssoToken:t.value}),(0,n.isApiError)(c))return l(c);i=c.authTicket;break;case"otp":if(!t.value)return u(o.AuthenticationCode.TOKEN_NOT_VALID);if(c=await(0,n.performTotpVerification)(e,{login:r,otp:t.value}),(0,n.isApiError)(c))return l(c,!0);i=c.authTicket;break;default:(0,a.assertUnreachable)(t)}return e.dispatch((0,s.updateAuthTicketInfo)({login:r,authTicket:i,date:Date.now()})),{success:!0,authTicket:i}};t.validateToken=async(e,r)=>{const{storeService:o}=e;return(0,t.convertTokenToAuthTicket)(o,r)};t.validateMasterPassword=async(e,t,r)=>{const o=t.getInstance().isKey(e.getUserSession().serverKey,r);return o&&e.dispatch((0,c.updateLastMasterPasswordCheck)()),o};t.validateMasterPasswordHandler=async(e,r)=>{const{storeService:o,masterPasswordEncryptorService:n}=e;return await(0,t.validateMasterPassword)(o,n,r)};t.resetProtectedItemAutofillTimerHandler=e=>(e.storeService.dispatch((0,c.updateLastMasterPasswordCheck)()),Promise.resolve())},29303:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.recoveryIsOtpSelector=t.recoveryInProgressSelector=t.recoveryDataSelector=t.recoveryUkiSelector=void 0;t.recoveryUkiSelector=e=>e.userSession.recoveryData.recoveryUki;t.recoveryDataSelector=e=>e.userSession.recoveryData;t.recoveryInProgressSelector=e=>e.userSession.recoveryData.recoveryInProgress;t.recoveryIsOtpSelector=e=>{const t=e.userSession.recoveryData.verificationMethod[0]?.type??"";return["totp","duo_push","u2f"].includes(t)}},16593:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.userCryptoSettingsSelector=t.sessionInfoSelector=t.sessionEncryptorKeysSelector=t.getCredentialSearchOrderSelector=t.analyticsInstallationIdSelector=t.isPaymentFailureChurningDismissedSelector=t.lastMasterPasswordCheckSelector=t.didOpenSelector=t.publicUserIdSelector=t.analyticsIdsSelector=t.applicationBuildTypeSelector=t.platformNameSelector=t.appVersionSelector=t.isAuthenticatedSelector=t.richIconsSettingSelector=t.protectPasswordsSettingSelector=t.personalSettingsSelector=t.authTicketInfoSelector=t.sharingKeysSelector=t.sharingSyncSelector=t.recoveryKeySelector=t.accountRecoveryOptInSelector=t.userCryptoFixedSalt=t.userDefaultCryptoSelector=t.anonymousUserIdSelector=t.isLocalKeyMigrationRequiredSelector=t.remoteKeySelector=t.isRemoteKeyActivatedSelector=t.serverKeySelector=t.spaceDisabledDomainsListSelector=t.localKeySelector=t.isLocalKeyActivatedSelector=t.webOnboardingModeSelector=t.masterPasswordValidationDataSelector=t.spacesSelector=t.userLoginSelector=t.masterPasswordSelector=t.masterPasswordAndServerKeySelector=t.userIdSelector=t.activeSpacesSelector=t.subscriptionInformationSelector=t.nodePremiumStatusSelector=t.premiumStatusSelector=t.syncIsInProgressSelector=t.syncSelector=void 0;const o=r(32034),n=r(32626),i=r(56915),a=r(2246),s=r(41265);t.syncSelector=e=>e.userSession.sync;t.syncIsInProgressSelector=e=>e.userSession.sync.status===n.SyncStatuses.IN_PROGRESS;t.premiumStatusSelector=e=>e.userSession.localSettings.premiumStatus;t.nodePremiumStatusSelector=e=>e.userSession.localSettings.nodePremiumStatus;t.subscriptionInformationSelector=e=>e.userSession.localSettings.subscriptionInformation;t.activeSpacesSelector=e=>{const r=(0,t.premiumStatusSelector)(e);return(r&&r.spaces||[]).filter((e=>"accepted"===e.status))};t.userIdSelector=e=>e.userSession.account.login;t.masterPasswordAndServerKeySelector=e=>{const{userSession:t}=e,{masterPassword:r,serverKey:o}=t.session;return{password:r,serverKey:o}};t.masterPasswordSelector=e=>e.userSession.session.masterPassword;t.userLoginSelector=e=>e.userSession.account.login;t.spacesSelector=e=>e.userSession.spaceData.spaces;t.masterPasswordValidationDataSelector=e=>e.userSession.session.settingsForMPValidation;t.webOnboardingModeSelector=e=>e.userSession.localSettings.webOnboardingMode;t.isLocalKeyActivatedSelector=e=>Boolean(e.userSession.session.localKey);t.localKeySelector=e=>e.userSession.session.localKey;t.spaceDisabledDomainsListSelector=(0,o.createSelector)(t.spacesSelector,(e=>e.reduce(((e,t)=>{let r=[];return t&&t.details&&t.details.info&&t.details.info.autologinDomainDisabledArray&&(r=t.details.info.autologinDomainDisabledArray),[...e,...r]}),[])));t.serverKeySelector=e=>e.userSession.session.serverKey;t.isRemoteKeyActivatedSelector=e=>Boolean(e.userSession.session.remoteKey);t.remoteKeySelector=e=>e.userSession.session.remoteKey;t.isLocalKeyMigrationRequiredSelector=e=>e.userSession.session.isLocalKeyMigrationRequired;t.anonymousUserIdSelector=e=>e.userSession.personalSettings.AnonymousUserId;t.userDefaultCryptoSelector=e=>e.userSession.personalSettings.CryptoUserPayload;t.userCryptoFixedSalt=e=>e.userSession.personalSettings.CryptoFixedSalt;t.accountRecoveryOptInSelector=e=>e.userSession.personalSettings.RecoveryOptIn||!1;t.recoveryKeySelector=e=>e.userSession.personalSettings.RecoveryKey;t.sharingSyncSelector=e=>e.userSession.sharingSync;t.sharingKeysSelector=e=>e.userSession.session.keyPair;t.authTicketInfoSelector=e=>e.userSession.authTicketInfo;t.personalSettingsSelector=e=>e.userSession.personalSettings;t.protectPasswordsSettingSelector=e=>{const{ProtectPasswords:t}=e.userSession.personalSettings;return t};t.richIconsSettingSelector=e=>{const t=e.userSession.spaceData.spaces.find((e=>"accepted"===e.details.status));if(t){const e=t.details?.info?.richIconsEnabled;if(!e)return!1}const{RichIcons:r}=e.userSession.personalSettings;return r};t.isAuthenticatedSelector=e=>e.userSession.account.isAuthenticated;t.appVersionSelector=e=>(0,i.platformInfoSelector)(e).appVersion;t.platformNameSelector=e=>(0,i.platformInfoSelector)(e).platformName;t.applicationBuildTypeSelector=e=>(0,i.platformInfoSelector)(e).buildType;t.analyticsIdsSelector=e=>e.userSession.session.analyticsIds;t.publicUserIdSelector=e=>e.userSession.session.publicUserId;t.didOpenSelector=e=>e.userSession.session.didOpen;t.lastMasterPasswordCheckSelector=e=>e.userSession.session.lastMasterPasswordCheck;t.isPaymentFailureChurningDismissedSelector=e=>{return t=e.userSession.localSettings.premiumChurningDismissDate,Date.now()-t>864e5;var t};t.analyticsInstallationIdSelector=(0,o.createSelector)(t.userLoginSelector,t.isAuthenticatedSelector,t.applicationBuildTypeSelector,((e,t,r)=>{const o=e&&(0,s.isInternalTestUser)(e)&&t;return r===n.ApplicationBuildType.DEV||r===n.ApplicationBuildType.QA||o?(0,a.getCommonAppSetting)("installationId"):null}));t.getCredentialSearchOrderSelector=e=>e.userSession.localSettings.credentialSearchOrder??n.CredentialSearchOrder.NAME;t.sessionEncryptorKeysSelector=e=>({masterPassword:(0,t.masterPasswordSelector)(e),serverKey:(0,t.serverKeySelector)(e),localKey:(0,t.localKeySelector)(e),remoteKey:(0,t.remoteKeySelector)(e)});t.sessionInfoSelector=e=>({password:(0,t.masterPasswordSelector)(e),serverKey:(0,t.serverKeySelector)(e),localKey:(0,t.localKeySelector)(e),cryptoUserPayload:(0,t.userDefaultCryptoSelector)(e),cryptoFixedSalt:(0,t.userCryptoFixedSalt)(e),devicesKeys:(0,i.deviceKeysSelector)(e)});t.userCryptoSettingsSelector=e=>({cryptoUserPayload:e.userSession.personalSettings.CryptoUserPayload,cryptoFixedSalt:e.userSession.personalSettings.CryptoFixedSalt})},27754:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.sessionStartTimeSelector=t.sessionIdSelector=void 0;t.sessionIdSelector=e=>e.userSession.session.sessionId;t.sessionStartTimeSelector=e=>e.userSession.account.sessionStartTime},38981:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.isSSOUserSelector=t.ssoProviderInfoSelector=t.ssoMigrationInfoSelector=t.serviceProviderUrlSelector=t.ssoSettingsSelector=void 0;const o=r(36272),n=r(32034),i=r(16593);t.ssoSettingsSelector=e=>e.userSession.ssoSettings;t.serviceProviderUrlSelector=e=>(0,t.ssoSettingsSelector)(e).serviceProviderUrl,t.ssoMigrationInfoSelector=(0,n.createSelector)(t.ssoSettingsSelector,(({migration:e,serviceProviderUrl:t,ssoToken:r})=>({migration:r?o.AuthenticationFlowContracts.SSOMigrationType.MP_TO_SSO_WITH_INFO:e,serviceProviderUrl:t}))),t.ssoProviderInfoSelector=(0,n.createSelector)(t.ssoSettingsSelector,(({serviceProviderUrl:e,isNitroProvider:t})=>({serviceProviderUrl:e,isNitroProvider:t})));t.isSSOUserSelector=e=>{const t=(0,i.activeSpacesSelector)(e);return t.length>0&&t[0].isSSOUser||!1}},87881:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.setupSubscriptions=void 0;const o=r(58639),n=r(35507),i=r(16593),a=r(56915),s=r(75004),c=r(54642),d=r(65210),u=r(32626),l=r(35924),p=r(18216);t.setupSubscriptions=function(e,t){const{storeService:r,wsService:S,sessionService:g}=t;e.coreServicesReady.on((async e=>{if(e.initMode===p.InitMode.Resume&&(t.sessionService.tryRestoreInstance(),g.isSessionStarted())){const{user:e}=t.sessionService.getInstance();await e.loadNonResumableSessionData()}})),e.sessionOpened.on((()=>{r.dispatch((0,l.resetLoginStepInfo)());const e=r.getState(),t=(0,i.premiumStatusSelector)(e);1!==(0,c.getUserMessagesByTypeSelector)(e,u.UserMessageTypes.TRIAL_EXPIRED).length||(0,s.isTrialExpired)({premiumStatus:t})||(r.dispatch((0,d.userMessagesDismissed)((0,s.createTrialExpiredUserMessage)())),g.getInstance().user.persistLocalSettings())})),e.sessionClosed.on((e=>{(0,o.triggerLoginStatusChanged)({loggedIn:!1,login:e.login})})),e.familyMemberLeft.on((async()=>{const e=(0,i.userLoginSelector)(r.getState()),t=(0,a.ukiSelector)(r.getState());await(0,n.refreshPremiumStatus)(r,S,e,t)}))}},25576:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.B2CStatusCode=t.CancelDashlaneAuthenticatorRegistration=t.PersistData=t.SessionResumingCode=t.extractExtraDeviceToken=t.makeExtraDeviceToken=t.extractOTP=t.makeSsoToken=t.makeOTP=t.extractEmailToken=t.makeEmailToken=t.remoteSupportedAuthenticationMethod=t.localSupportedAuthenticationMethod=void 0,t.localSupportedAuthenticationMethod=["totp","duo_push"],t.remoteSupportedAuthenticationMethod=["email_token","totp","duo_push","dashlane_authenticator","u2f"];t.makeEmailToken=e=>({type:"emailToken",value:e});t.extractEmailToken=e=>e.value;t.makeOTP=e=>({type:"otp",value:e});t.makeSsoToken=e=>({type:"sso",value:e});t.extractOTP=e=>e.value;t.makeExtraDeviceToken=e=>({type:"extraDeviceToken",value:e});t.extractExtraDeviceToken=e=>e.value,function(e){e.INVALID_LOGIN_IN_STORE="invalid_login_in_store"}(t.SessionResumingCode||(t.SessionResumingCode={})),function(e){e[e.PERSIST_DATA_YES=0]="PERSIST_DATA_YES",e[e.PERSIST_DATA_NO=1]="PERSIST_DATA_NO"}(t.PersistData||(t.PersistData={})),function(e){e.CANCELLED="cancelled",e.COMPLETED="completed"}(t.CancelDashlaneAuthenticatorRegistration||(t.CancelDashlaneAuthenticatorRegistration={})),function(e){e.Free="free",e.Subscribed="subscribed",e.Legacy="legacy"}(t.B2CStatusCode||(t.B2CStatusCode={}))},34376:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getCurrentUserInfo=void 0;const o=r(56915);t.getCurrentUserInfo=function(e){const t=e.getUserSession().keyPair;return{login:e.getUserLogin(),uki:(0,o.ukiSelector)(e.getState()),privateKey:t&&t.privateKey}}},80687:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.authorizationMiddleware=void 0;t.authorizationMiddleware=e=>async t=>{const r=await t,{config:{allowedPlatforms:o},services:{storeService:n}}=r,{platformName:i}=n.getPlatformInfo();if(o&&!o.includes(i))throw new Error("You are not allowed to connect to this slot");return await e(t)}},18324:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.debugMiddleware=void 0;r(4939),new Map;t.debugMiddleware=e=>async t=>e(t)},77686:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.debugMiddleware=t.authorizationMiddleware=void 0;var o=r(80687);Object.defineProperty(t,"authorizationMiddleware",{enumerable:!0,get:function(){return o.authorizationMiddleware}});var n=r(18324);Object.defineProperty(t,"debugMiddleware",{enumerable:!0,get:function(){return n.debugMiddleware}})},57307:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CommandQueryBus=void 0;const o=r(18948),n=r(3343),i=r(35088),a=r(17338),s=r(25566),c=r(77686);class d{constructor(e){this.services=(0,a.getCoreServices)(e)}register(e){const{commands:t,queries:r,liveQueries:o}=e;Object.keys(t).forEach((e=>{this._registerCommand(e,t[e])})),Object.keys(r).forEach((e=>{this._registerQuery(e,r[e])})),Object.keys(o).forEach((e=>{this._registerLiveQuery(e,o[e])}))}_registerCommand(e,t){const r=r=>Promise.resolve({messageType:"command",messageName:e,requestId:(0,i.v4)(),services:this.services,arg:r,config:t,logTags:[d.API_LOG_TAG,d.COMMAND_LOG_TAG]}),o=[c.authorizationMiddleware,c.debugMiddleware,()=>e=>e.then((async e=>{const{arg:t,config:r,services:o}=e,{handler:n}=r,i=await n(o,t);return{...e,result:i}}))];this.registerCommand(e,(e=>(0,s.buildMiddlewarePipeline)(...o)(r(e)).then((e=>e.result))))}_registerQuery(e,t){const r=r=>Promise.resolve({messageType:"query",messageName:e,requestId:(0,i.v4)(),services:this.services,arg:r,config:t,logTags:[d.API_LOG_TAG,d.QUERY_LOG_TAG]}),o=[c.authorizationMiddleware,c.debugMiddleware,()=>e=>e.then((async e=>{const{arg:r,services:o}=e,{selector:n,staticDataHandler:i,selectorFactory:a}=t;if(n){const{storeService:t}=o,i=await n(t.getState(),r);return{...e,result:i}}if(a){const{storeService:t}=o,n=await a(this.services),i=await Promise.resolve(n(t.getState(),r));return{...e,result:i}}{const t=i(r);return{...e,result:t}}}))];this.registerQuery(e,(e=>(0,s.buildMiddlewarePipeline)(...o)(r(e)).then((e=>e.result))))}_registerLiveQuery(e,t){this.registerLiveQuery(e,(e=>{const{operator:r,subject:i,operatorFactory:a}=t;if(r){const{storeService:t}=this.services;return t.getState$().pipe(r(e),(0,n.skip)(1))}if(a){const{storeService:t}=this.services,r=t.getState$();return(0,o.from)(a(t.getState(),this.services)).pipe((0,o.switchMap)((t=>r.pipe(t(e),(0,n.skip)(1)))))}return i(e)}))}}t.CommandQueryBus=d,d.API_LOG_TAG="API",d.COMMAND_LOG_TAG="Command",d.QUERY_LOG_TAG="Query"},88626:function(e,t,r){var o=this&&this.__createBinding||(Object.create?function(e,t,r,o){void 0===o&&(o=r);var n=Object.getOwnPropertyDescriptor(t,r);n&&!("get"in n?!t.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,o,n)}:function(e,t,r,o){void 0===o&&(o=r),e[o]=t[r]}),n=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||o(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),n(r(91069),t),n(r(57307),t)},91069:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},33968:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.EventStore=void 0;const o=r(18948),n=r(35088),i=r(3343),a=r(17825),s=r(47746);t.EventStore=class{constructor(){this._operation$=new o.Subject,this.subs=new Set,this.add=async(e,t)=>{const r=(0,n.v4)(),o=new Promise(((e,t)=>{const o=this._operationResults$.subscribe((n=>{n.id===r&&(!0===n.success?e(r):t(n.error),o.unsubscribe(),this.subs.delete(o))}));this.subs.add(o)}));return this.triggerAdd(e,r,t),o},this.remove=async(e,t)=>{const r=new Promise(((e,r)=>{const o=this._operationResults$.subscribe((n=>{n.id===t&&(!0===n.success?e():r(n.error),o.unsubscribe(),this.subs.delete(o))}));this.subs.add(o)}));return this.triggerRemove(e,t),r},this.removeAll=async e=>{const t=(0,n.v4)(),r=new Promise(((e,r)=>{const o=this._operationResults$.subscribe((n=>{n.id===t&&(!0===n.success?e():r(n.error),o.unsubscribe(),this.subs.delete(o))}));this.subs.add(o)}));return this.triggerRemoveAll(e,t),r},this.onAdd=async e=>{const{id:t,event:r,topic:o,type:n}=e,i={id:t,topic:o,type:n};try{const e=await this.retrieve(),n={id:t,event:r},a={...e,[o]:[...e[o]||[],n]};return await this.store(a),{...i,success:!0,event:r}}catch(e){return{...i,success:!1,error:e}}},this.onRemove=async e=>{const{id:t,topic:r,type:o}=e,n={id:t,topic:r,type:o};try{const e=await this.retrieve(),o={...e,[r]:(e[r]||[]).filter((e=>e.id!==t))};return await this.store(o),{...n,success:!0}}catch(e){return{...n,success:!1,error:e}}},this.onRemoveAll=async e=>{const{id:t,topic:r,type:o}=e,n={id:t,topic:r,type:o};try{const e={...await this.retrieve(),[r]:[]};return await this.store(e),{...n,success:!0}}catch(e){return{...n,success:!1,error:e}}},this.onOperation=async e=>{switch(e.type){case s.OperationType.Add:return this.onAdd(e);case s.OperationType.Remove:return this.onRemove(e);case s.OperationType.RemoveAll:return this.onRemoveAll(e);default:return(0,a.assertUnreachable)(e)}},this.setupOperationsHandling=()=>{const e=this._operation$.pipe((0,i.concatMap)(this.onOperation),(0,i.share)()),t=e.subscribe();this.subs.add(t),this._operationResults$=e},this.setupOperationsHandling()}newItems$(e){return this._operationResults$.pipe((0,i.filter)((e=>e.type===s.OperationType.Add&&e.success)),(0,i.filter)((t=>t.topic===e)))}async getItems(e){return(await this.retrieve())[e]}teardown(){this.subs.forEach((e=>e.unsubscribe()))}async triggerAdd(e,t,r){const o={event:r,id:t,topic:e,type:s.OperationType.Add};this._operation$.next(o)}async triggerRemove(e,t){const r={id:t,topic:e,type:s.OperationType.Remove};this._operation$.next(r)}async triggerRemoveAll(e,t){const r={id:t,topic:e,type:s.OperationType.RemoveAll};this._operation$.next(r)}}},47746:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.OperationType=void 0,function(e){e.Add="add",e.Remove="remove",e.RemoveAll="removeAll"}(t.OperationType||(t.OperationType={}))},30137:function(e,t,r){var o=this&&this.__createBinding||(Object.create?function(e,t,r,o){void 0===o&&(o=r);var n=Object.getOwnPropertyDescriptor(t,r);n&&!("get"in n?!t.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,o,n)}:function(e,t,r,o){void 0===o&&(o=r),e[o]=t[r]}),n=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||o(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),n(r(88626),t)},25566:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.buildMiddlewarePipeline=void 0;var o=r(3201);Object.defineProperty(t,"buildMiddlewarePipeline",{enumerable:!0,get:function(){return o.buildMiddlewarePipeline}})},3201:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.buildMiddlewarePipeline=void 0;t.buildMiddlewarePipeline=(...e)=>t=>e.reduceRight(((e,t)=>t(e)),(e=>e))(t)},36768:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.config=void 0;const o=r(84511),n=r(80993),i=r(90021),a=r(78987),s=r(23944),c=r(22652),d=r(95326),u=r(67312),l=r(43712);t.config={commands:{convertItemToDashlaneXml:{handler:u.convertItemToDashlaneXml},convertDashlaneXmlToItem:{handler:l.convertDashlaneXmlToItem},shareItem:{handler:d.shareItem}},queries:{getAllSharedItemIds:{selector:n.sortedSharedItemIdsSelector},getMyAcceptedUserGroups:{selector:o.myAcceptedUserGroupsSelector},getSharingCapacity:{selector:i.sharingCapacitySelector},...s.config.queries,...c.config.queries},liveQueries:{liveAllSharedItemIds:{operator:a.allSharedItemIds$},liveMyAcceptedUserGroups:{operator:a.myAcceptedUserGroups$},liveSharingCapacity:{operator:a.sharingCapacity$},...s.config.liveQueries,...c.config.liveQueries}}},36884:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.makeItemGroupService=t.UPDATE_ITEM_GROUP_MEMBERS=t.SHARING_VERSION=t.REVOKE_ITEM_GROUP_MEMBERS=t.REFUSE_ITEM_GROUP=t.INVITE_ITEM_GROUP_MEMBERS=t.DELETE_ITEM_GROUP=t.CREATE_SPECIAL_ITEM_GROUP=t.CREATE_ITEM_GROUP=t.ACCEPT_ITEM_GROUP=void 0;const o=r(78320),n=r(36467),i=r(82366),a=r(36513),s=r(58107),c=r(93513);function d(e,t,r){const o=r&&r.users&&r.users.find((e=>e.userId===t.login)),n=o&&o.groupKey;return e.asymmetricEncryption.decrypt(t.privateKey,n)}function u(e,t,r,o){return e.itemGroup.deleteGroup(t,r,o).then((({itemGroups:e})=>e)).catch((n=>{if("Conflict"===n.message)return function(e,t,r,o){const n={type:"getSharing",sharingVersion:4,userGroupIds:o};return e.sharing.get(t,r,n).then((({itemGroupErrors:e,itemGroups:t})=>{if(e&&e.length)throw new Error(e[0].message);return t}))}(e,t,r,[o.groupId]).then((n=>{const[{revision:i,teamId:a}]=n;return a?e.itemGroup.deleteGroup(t,r,{...o,revision:i}).then((({itemGroups:e})=>e)):n}));throw n}))}function l(e,r,o,n,i,a){const s=i||void 0;return{...a?{userGroupId:a}:{},...n&&n.length?{itemsForEmailing:n}:{},acceptSignature:e,groupId:r,revision:o,sharingVersion:t.SHARING_VERSION,type:t.ACCEPT_ITEM_GROUP,auditLogDetails:s}}function p(e,r,o,n,i){const a=i?{userGroupId:i}:{},s=n||void 0;return{...o&&o.length?{itemsForEmailing:o}:{},...a,groupId:e,revision:r,sharingVersion:t.SHARING_VERSION,type:t.REFUSE_ITEM_GROUP,auditLogDetails:s}}function S(e,r,o,n,i,a){const s=a||void 0;return{...o&&o.length?{groups:o}:{},...i&&i.length?{itemsForEmailing:i}:{},groupId:e,items:n,sharingVersion:t.SHARING_VERSION,type:t.CREATE_ITEM_GROUP,users:r,auditLogDetails:s}}function g(e,r,o,n,i,a){const s=a||void 0;return{...n&&n.length?{groups:n}:{},...o&&o.length?{users:o}:{},...i&&i.length?{itemsForEmailing:i}:{},revision:r,groupId:e,sharingVersion:t.SHARING_VERSION,type:t.INVITE_ITEM_GROUP_MEMBERS,auditLogDetails:s}}function m(e,r,o,n,i,a="manual"){const s=i||void 0;return{...n&&n.length?{groups:n}:{},...o&&o.length?{users:o}:{},groupId:e,revision:r,sharingVersion:t.SHARING_VERSION,type:t.REVOKE_ITEM_GROUP_MEMBERS,auditLogDetails:s,origin:a}}function A(e,r,o,n){return{...n&&n.length?{groups:n}:{},...o&&o.length?{users:o}:{},groupId:e,revision:r,sharingVersion:t.SHARING_VERSION,type:t.UPDATE_ITEM_GROUP_MEMBERS}}async function y(e,t,r){const o=r?await async function(e,t,r){const o=await(0,a.makeCryptoService)(),n=c.encode(e),s=await o.symmetricEncryption.signHmacSHA256(t,n);await(0,i.validateProposeSignature)("[ItemGroupService] - makeUserUpdatePublicKey",o,t,s,n);return{groupKey:await o.asymmetricEncryption.encrypt(r,t),proposeSignature:s}}(e,r.rawItemGroupKey,r.userPublicKey):{};return{...o,permission:t,userId:e}}function E(e,t){return{permission:t,groupId:e}}async function f(e,t,r,o,n){const s=await(0,a.makeCryptoService)(),d=t&&t.login&&t.publicKey,u=d?t.login:e,l=d?{}:{proposeSignatureUsingAlias:!0},p=d?{groupKey:await s.asymmetricEncryption.encrypt(t.publicKey,n)}:{},S=c.encode(u),g=await s.symmetricEncryption.signHmacSHA256(n,S);await(0,i.validateProposeSignature)("[ItemGroupService] - makeUserUpload",s,n,g,S);return{...t.privateKey?{acceptSignature:await v(r,n,t.privateKey)}:{},...l,...p,alias:e,permission:o,proposeSignature:g,userId:u}}async function T(e,t,r,o,n,d){const{groupId:u}=e,l=await(0,a.makeCryptoService)();if(!(e.users||[]).find((e=>e.userId===n)))throw new Error("[ItemGroupService] - makeUserGroupInvite: Trying to share an item to a userGroup that I'm not part of.");const p=await(0,s.getUserGroupPrivateKey)(e,o,n),S=await l.asymmetricEncryption.encrypt(e.publicKey,r),g=c.encode(u),m=await l.symmetricEncryption.signHmacSHA256(r,g);await(0,i.validateProposeSignature)("[ItemGroupService] - makeUserGroupInvite",l,r,m,g);return{groupId:u,permission:t,groupKey:S,proposeSignature:m,acceptSignature:await v(d,r,p)}}async function v(e,t,r){const o=await(0,a.makeCryptoService)(),n=c.encode(`${e}-accepted-${t}`);return await o.asymmetricEncryption.sign(r,n)}t.ACCEPT_ITEM_GROUP="acceptItemGroup",t.CREATE_ITEM_GROUP="createItemGroup",t.CREATE_SPECIAL_ITEM_GROUP="createUserGroupsItemGroup",t.DELETE_ITEM_GROUP="deleteItemGroup",t.INVITE_ITEM_GROUP_MEMBERS="inviteItemGroupMembers",t.REFUSE_ITEM_GROUP="refuseItemGroup",t.REVOKE_ITEM_GROUP_MEMBERS="revokeItemGroupMembers",t.SHARING_VERSION=4,t.UPDATE_ITEM_GROUP_MEMBERS="updateItemGroupMembers",t.makeItemGroupService=function(e,r){return{makeCreateSpecialItemGroupEvent:(e,a,s)=>async function(e,r,a,s){const c=(0,o.generateItemUuid)(),[u,l]=await Promise.all([e.symmetricEncryption.generateNewAESKey(),d(e,r,a)]),p=await e.symmetricEncryption.decryptAES256(l,a.privateKey),[S,g,m]=await Promise.all([e.asymmetricEncryption.encrypt(a.publicKey,u),(0,i.generateProposeSignature)(e,u,a.groupId),(0,i.generateAcceptSignature)(e,p,c,u)]),A={type:t.CREATE_SPECIAL_ITEM_GROUP,sharingVersion:t.SHARING_VERSION,groupId:c,teamId:a.teamId,alias:r.login,groups:[{groupId:a.groupId,permission:"admin",groupKey:S,proposeSignature:g,acceptSignature:m}]};return s.length&&(A.items=await(0,n.createItemsForUserGroups)(e,u,s)),A}(r,e,a,s),makeCreateItemGroupEvent:S,makeInviteItemGroupMembers:g,makeUpdateItemGroupMembers:A,makeUserUpdate:y,makeUserGroupUpdate:E,makeUserUpload:f,makeUserGroupInvite:T,createSpecialItemGroup:({login:t,uki:r},o)=>e.itemGroup.createSpecialItemGroup(t,r,o),makeDeleteItemGroupEvent:(e,r)=>async function(e,r){return{type:t.DELETE_ITEM_GROUP,sharingVersion:t.SHARING_VERSION,groupId:e,revision:r}}(e,r),deleteItemGroup:({login:t,uki:r},o)=>u(e,t,r,o),makeAcceptItemGroupEvent:l,makeRefuseItemGroupEvent:p,makeRevokeItemGroupMembers:m}}},10294:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.makeItemService=t.SHARING_VERSION=t.UPDATE_ITEM=t.ADD_ITEMS=t.REMOVE_ITEMS=void 0;const o=r(36513);async function n(e,t,r){return{itemId:e,itemKey:t,content:r}}function i(e){const t=function(e){switch(e.kwType){case"KWAuthentifiant":return"password";case"KWSecureNote":return"note";default:return"secret"}}(e);return{type:t,name:e.Title||`Untitled ${t}`}}async function a(e,r,o){return{type:t.ADD_ITEMS,sharingVersion:t.SHARING_VERSION,revision:r,groupId:e,items:o}}async function s(e,r,n){if(!n)throw new Error("Missing payload. See method documentation.");const{item:i,itemId:a,itemContent:s}=n;if(!(i||a&&s))throw new Error("insufficient arguments: item or (itemId and content) must be provided.");if(i&&(a||s))throw new Error("item and (itemId | content) cannot both be provided");const c=(0,o.makeSymmetricEncryption)(),d=s??await c.encryptSharingItem(r,i);return{type:t.UPDATE_ITEM,sharingVersion:t.SHARING_VERSION,itemId:a??i?.Id,content:d,timestamp:e}}t.REMOVE_ITEMS="removeItems",t.ADD_ITEMS="addItems",t.UPDATE_ITEM="updateItem",t.SHARING_VERSION=4;const c=(e,t,r,o)=>e.itemGroup.updateItem(t,r,o);function d(e,t,r,o){return e.itemGroup.addItems(t,r,o)}const u=(e,r,o)=>Promise.resolve({type:t.REMOVE_ITEMS,sharingVersion:t.SHARING_VERSION,groupId:e,revision:r,items:[...o]}),l=(e,t,r,o)=>e.itemGroup.removeItems(t,r,o);t.makeItemService=function(){return{makeItemUpload:n,makeAddItemsEvent:a,makeItemForEmailing:i,addItems:d,makeUpdateItemEvent:s,updateItem:c,makeRemoveItemsEvent:u,removeItems:l}}},58107:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getSharingUsersFromItemGroups=t.doesItemGroupExistInSpace=t.findUserGroupItemGroups=t.findUserGroup=t.findMyAcceptedUserGroups=t.getRecipientsCount=t.getUserRecipients=t.getGroupRecipients=t.doesUserReceiveItemGroupViaGroup=t.isUserLastAdmin=t.getDecipheredItemKey=t.isItemWithoutItemGroup=t.isItemGroupAccepted=t.getItemGroupPendingUserMember=t.decryptItemKey=t.getSharingUserPermission=t.getUserGroupPermission=t.getMyItemGroups=t.findItem=t.isCollectionUserGroupProposeSignatureValid=t.isUserGroupUserProposeSignatureValid=t.areCollectionUsersProposeSignaturesValid=t.areUserGroupUsersProposeSignaturesValid=t.getDecryptedUserGroupKey=t.isUserGroupPersonalSignatureValid=t.isGroupSignatureValid=t.decryptUserGroupPrivateKey=t.getCollectionPrivateKeyForUser=t.getCollectionPrivateKeyForUserGroup=t.getUserGroupPrivateKey=t.decryptGroupKey=t.getDecryptedItemGroupKeyFromCollectionMemberViaUserGroup=t.getDecryptedPrivateCollectionKeyFromUserGroup=t.getDecryptedItemGroupKeyFromCollectionMemberAsUser=t.getDecryptedItemGroupKeyFromUserGroupMember=t.getDecryptedItemGroupKeyFromUser=t.getItemGroupKey=t.findMyItemGroupCollectionMemberAsUser=t.findMyItemGroupCollectionMemberViaUserGroup=t.findMyItemGroupUserGroupMember=t.findMyItemGroupUser=t.getItemGroupActiveUserGroupMembers=t.isLastActiveUserInItemGroupAndAdmin=t.userMemberIsAdmin=void 0;const o=r(82366),n=r(36513),i=r(49551),a=r(19736),s=r(81438),c=r(71646),d=r(70252),u=r(16593),l=r(95458),p=r(64202),S=r(93513),g=e=>["accepted","pending"].includes(e.status);function m(e,t){const{users:r}=e;return(r||[]).find((e=>e.userId===t))}function A(e,t,r){const o=(t||[]).filter((e=>(e.users||[]).map((e=>e.userId)).includes(r))).map((e=>e.groupId));return(e.groups||[]).filter((e=>"accepted"===e.status)).find((e=>o.includes(e.groupId)))}function y(e,t,r,o){if(!o)return null;try{const n=e=>(e.userGroups||[]).flatMap((e=>t.find((t=>t.groupId===e.uuid))?.users)).filter((e=>void 0!==e)).find((e=>"accepted"===e.status&&e.userId===r)),i=o.filter(n);if(0===i.length)return null;const a=i.map((e=>e.uuid)),s=(e.collections||[]).filter((e=>"accepted"===e.status)).find((e=>a.includes(e.uuid)));if(!s)return null;const c=o.find((e=>e.uuid===s.uuid));if(!c)return null;const d=c.userGroups.map((e=>e.uuid)),u=t.find((e=>d.includes(e.groupId)));return u?{userGroup:u,member:s}:null}catch(e){const t=new Error(`[SharingSync] - find collection member failed: ${e}`);return(0,d.sendExceptionLog)({error:t}),null}}function E(e,t,r){if(!r)return null;try{const o=e=>(e.users||[]).map((e=>e.login)).includes(t),n=r.filter(o).map((e=>e.uuid));return(e.collections||[]).filter((e=>"accepted"===e.status)).find((e=>n.includes(e.uuid)))}catch(e){const t=new Error(`[SharingSync] - find collection member failed: ${e}`);return(0,d.sendExceptionLog)({error:t}),null}}async function f(e,t){try{return await I(e.groupKey,t)}catch{return null}}async function T(e,t,r,o){const n=(t||[]).find((t=>t.groupId===e.groupId));if(!n)return null;try{const t=await C(n,r,o);return await I(e.groupKey,t)}catch{return null}}async function v(e,t,r,o){if(!o)return null;try{const n=o.find((t=>t.uuid===e.uuid));if(!n)return null;const i=await O(n,t,r);return await I(e.itemGroupKey,i)}catch(e){const t=new Error(`[SharingSync] - decrypt collection member item group key failed: ${e}`);return(0,d.sendExceptionLog)({error:t}),null}}async function h(e,t,r,o){const n=await C(t,r,o);return await D(e,n,t.groupId)}async function _(e,t,r,o,n){if(!n)return null;try{const i=n.find((t=>t.uuid===e.uuid));if(!i)return null;const a=await h(i,t,r,o);return await I(e.itemGroupKey,a)}catch(e){const t=new Error(`[SharingSync] - decrypt collection member item group key failed: ${e}`);return(0,d.sendExceptionLog)({error:t}),null}}async function I(e,t){return(0,n.makeCryptoService)().asymmetricEncryption.decrypt(t,e)}async function C(e,t,r){const o=e.users.find((e=>e.userId===r)).groupKey,n=await I(o,t);return P(e.privateKey,n)}async function D(e,t,r){const o=e.userGroups.find((e=>e.uuid===r)).collectionKey,n=await I(o,t);return P(e.privateKey,n)}async function O(e,t,r){const o=e.users.find((e=>e.login===r)).collectionKey,n=await I(o,t);return P(e.privateKey,n)}async function P(e,t){return(0,n.makeCryptoService)().symmetricEncryption.decryptAES256(t,e)}async function R(e,t,r,i){const a=S.encode(`${e}-accepted-${r}`);return(0,o.isAcceptSignatureValid)((0,n.makeCryptoService)(),t,i,a)}async function N(e,t){let r="";"userId"in e?r=e.userId:"login"in e&&(r=e.login);try{return await(0,n.makeCryptoService)().symmetricEncryption.verifyHmacSHA256(t,e.proposeSignature,S.encode(r))}catch{return!1}}async function L(e,t){try{return await(0,n.makeCryptoService)().symmetricEncryption.verifyHmacSHA256(t,e.proposeSignature,S.encode(e.uuid))}catch{return!1}}async function b(e,t){return(0,n.makeCryptoService)().symmetricEncryption.decryptAES256(t,e)}function U(e,t){const{itemGroups:r}=e,o=r.find((e=>(e.items||[]).some((e=>e.itemId===t))));return o?(o.groups||[]).filter((e=>!["revoked","refused"].includes(e.status))):[]}function M(e,t){const{itemGroups:r}=e,o=r.find((e=>(e.items||[]).some((e=>e.itemId===t))));return o?(o.users||[]).filter((e=>!["revoked","refused"].includes(e.status))):[]}function w(e,t,r){const o=t.items?.some((o=>{const n=(0,a.credentialSelector)(e,o.itemId)??(0,s.noteSelector)(e,o.itemId)??(0,p.secretSelector)(e,o.itemId);return void 0===n?(function(e,t,r,o){try{const n=["[doesItemGroupExistInSpace] Undefined item found",`ItemGroup has ${e.items.length} items`];if(e.items.length>1){const i=e.items.filter((e=>e.itemId!==t.itemId)),c=i.reduce(((e,t)=>{const n=(0,a.credentialSelector)(r,t.itemId)??(0,s.noteSelector)(r,t.itemId);return n&&n.SpaceId===o?e+1:e}),0),d=i.length-c;n.push(`${c} other items in itemGroup are in the active space`),n.push(`${d} other items in itemGroup are not in the active space`)}(0,u.activeSpacesSelector)(r).some((e=>e&&e.teamId===o&&(0,l.isPremiumStatusSpaceQuarantined)(e)))&&n.push("Active space is quarantined"),null===t.itemKey&&n.push("Item Key is null"),void 0===t.itemKey&&n.push("Item Key is undefined"),""===t.itemKey&&n.push("Item Key is an empty string"),null===t.itemId&&n.push("Item ID is null"),void 0===t.itemId&&n.push("Item ID is undefined"),""===t.itemId&&n.push("Item ID is an empty string"),(0,d.sendExceptionLog)({error:new Error(n.join("\n"))})}catch(e){(0,d.sendExceptionLog)({error:e})}}(t,o,e,r),!0):n.SpaceId!==r}));return!o}t.userMemberIsAdmin=e=>"accepted"===e.status&&"admin"===e.permission,t.isLastActiveUserInItemGroupAndAdmin=function(e,r){const o=e.collections;if(o&&o.length>0)return!1;const{users:n,groups:i}=e,a=!i||0===i.filter(g).length,s=n&&1===n.filter(g).length&&n[0].userId===r&&(0,t.userMemberIsAdmin)(n[0]);return a&&s},t.getItemGroupActiveUserGroupMembers=function(e){return(e.groups||[]).filter(g)},t.findMyItemGroupUser=m,t.findMyItemGroupUserGroupMember=A,t.findMyItemGroupCollectionMemberViaUserGroup=y,t.findMyItemGroupCollectionMemberAsUser=E,t.getItemGroupKey=async function(e,t,r,o,n){const i=m(e,o),a=A(e,t,o),s=E(e,o,n),c=y(e,t,o,n);if(!(i||a||s||c))return null;if(i)return await f(i,r);if(a)return await T(a,t,r,o);if(s){return await v(s,r,o,n)}if(c){return await _(c.member,c.userGroup,r,o,n)}return null},t.getDecryptedItemGroupKeyFromUser=f,t.getDecryptedItemGroupKeyFromUserGroupMember=T,t.getDecryptedItemGroupKeyFromCollectionMemberAsUser=v,t.getDecryptedPrivateCollectionKeyFromUserGroup=h,t.getDecryptedItemGroupKeyFromCollectionMemberViaUserGroup=_,t.decryptGroupKey=I,t.getUserGroupPrivateKey=C,t.getCollectionPrivateKeyForUserGroup=D,t.getCollectionPrivateKeyForUser=O,t.decryptUserGroupPrivateKey=P,t.isGroupSignatureValid=R,t.isUserGroupPersonalSignatureValid=async function(e,t,r,o){try{return await R(e,t,r,o)}catch{return!1}},t.getDecryptedUserGroupKey=async function(e,t){try{return await I(e,t)}catch{return null}},t.areUserGroupUsersProposeSignaturesValid=async function(e,t){const r=(e||[]).filter((({status:e})=>["pending","accepted"].includes(e))).map((e=>N(e,t)));return(await Promise.all(r)).every(Boolean)},t.areCollectionUsersProposeSignaturesValid=async function(e,t){const{userGroups:r,users:o}=e,n=(o||[]).filter((({status:e})=>["pending","accepted"].includes(e))).map((e=>N(e,t))),i=(r||[]).filter((({status:e})=>["pending","accepted"].includes(e))).map((e=>L(e,t))),a=await Promise.all(n),s=await Promise.all(i);return a.every(Boolean)&&s.every(Boolean)},t.isUserGroupUserProposeSignatureValid=N,t.isCollectionUserGroupProposeSignatureValid=L,t.findItem=function(e,t){const{credentials:r,notes:o,secrets:n}=e.getPersonalData(),a=[...r,...o,...n];return(0,i.findDataModelObject)(t,a)},t.getMyItemGroups=function(e,t){const r=e.userGroups.filter((e=>e.users.some((e=>e.userId===t&&"accepted"===e.status)))),o=new Set(r.map((e=>e.groupId)));return e.itemGroups.filter((e=>{const r=e.users&&e.users.some((e=>e.userId===t)),n=e.groups&&e.groups.some((e=>o.has(e.groupId)));return r||n}))},t.getUserGroupPermission=function(e,t){return(e?.groups||[]).find((e=>e?.groupId===t))?.permission},t.getSharingUserPermission=function(e,t){return(e.users||[]).find((e=>e.userId===t))?.permission},t.decryptItemKey=b,t.getItemGroupPendingUserMember=function(e,t){return(e.users||[]).find((e=>e.userId===t&&"pending"===e.status))},t.isItemGroupAccepted=function(e,t,r,o){if(function(e,t,r,o){if(!o)return!1;try{const n=(e.collections||[]).filter((e=>"accepted"===e.status&&e.acceptSignature)).map((e=>e.uuid)),i=o.filter((e=>n.includes(e.uuid)));if(i.flatMap((e=>e.users)).some((e=>e.acceptSignature&&e.login===r)))return!0;return i.flatMap((e=>e.userGroups)).map((e=>t.find((t=>t.groupId===e.uuid)))).filter((e=>void 0!==e)).some((e=>(e.users||[]).some((e=>e.userId===r&&"accepted"===e.status&&Boolean(e.acceptSignature)))))}catch(e){const t=new Error(`[SharingSync] - item group accepted check failed: ${e}`);return(0,d.sendExceptionLog)({error:t}),!1}}(e,t,r,o))return!0;if(function(e,t){return(e.users||[]).some((e=>e.userId===t&&"accepted"===e.status&&Boolean(e.acceptSignature)))}(e,r))return!0;return function(e,t,r){const o=(e.groups||[]).filter((e=>"accepted"===e.status&&e.acceptSignature)),n=o.map((e=>e.groupId)),i=t.filter((e=>n.includes(e.groupId)));return i.some((e=>(e.users||[]).some((e=>e.userId===r&&"accepted"===e.status&&Boolean(e.acceptSignature)))))}(e,t,r)},t.isItemWithoutItemGroup=function(e,t){return!(0,c.findItemItemGroup)(e,t)},t.getDecipheredItemKey=async function(e,t,r){const o=await I(e,r);try{return await b(t,o)}catch(e){return}},t.isUserLastAdmin=function(e,t){const r=function(e){return(e.users||[]).filter((({permission:e,rsaStatus:t,status:r})=>"admin"===e&&"sharingKeys"===t&&"accepted"===r))}(e),o=function(e){return(e.groups||[]).filter((({permission:e,status:t})=>"admin"===e&&"accepted"===t))}(e),n=r.some((e=>e.userId===t)),i=r.filter((({userId:e})=>t!==e)),a=o.length+i.length>0;return n&&!a},t.doesUserReceiveItemGroupViaGroup=function(e,t,r){const o=t.filter((({users:e})=>(e||[]).some((e=>e.userId===r&&"accepted"===e.status)))).map((({groupId:e})=>e));return(e.groups||[]).some((({groupId:e,status:t})=>o.includes(e)&&"accepted"===t))},t.getGroupRecipients=U,t.getUserRecipients=M,t.getRecipientsCount=function(e,t){return M(e,t).length+U(e,t).length},t.findMyAcceptedUserGroups=function(e,t){return e.filter((e=>"users"===e.type&&(e.users||[]).some((e=>e.userId===t&&"accepted"===e.status))))},t.findUserGroup=function(e,t){return e.find((e=>e.groupId===t))},t.findUserGroupItemGroups=function(e,t){return t.filter((t=>(t.groups||[]).some((t=>t.groupId===e&&"accepted"===t.status))))},t.doesItemGroupExistInSpace=w;t.getSharingUsersFromItemGroups=(e,t,r,o)=>{const n=r.reduce(((r,n)=>{if(null!==o&&!w(e,n,o))return r;return(0,c.getItemGroupActiveUsers)(n).forEach((e=>{if(e.userId!==t)if(r.has(e.userId)){const t=r.get(e.userId);r.set(e.userId,{...e,itemCount:t.itemCount+n.items.length})}else r.set(e.userId,{...e,itemCount:n.items.length})})),r}),new Map);return Array.from(n.values())}},78096:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.revokeRemoteControlledSharedItems=void 0;const o=r(18948),n=r(45051),i=r(70252),a=r(11700),s=r(57989),c=r(68979),d=({deletedItemIds:e,updatedItemIds:t})=>e.length>0||t.length>0,u=async(e,t)=>{const r=await(0,o.firstValueFrom)(t.queries.getInvites());if((0,n.isFailure)(r))throw new Error(`Failiure in findMyPendingInvitesToRefuse: ${(0,n.getFailure)(r)}`);const i=(0,s.spacesWithForcedCategorizationEnabledSelector)(e.getState());return(0,n.getSuccess)(r).pendingItemGroups.filter((e=>e.items.some((e=>{if(!(0,a.isItemForceCategorizable)(e))return!1;const t=i.map((e=>e.details)),r=(0,a.pickBestTeamSpaceForForcedCategorization)(t,e,[]);return Boolean(r)&&r.domainsMatchResult===c.TeamDomainsMatchResult.SomeFieldsMatch})))).map((({itemGroupId:e})=>e))};t.revokeRemoteControlledSharedItems=async function(e,t,r,o){try{const{hiddenItemIds:n}=o,{commands:{remoteControlSharedItems:i}}=t,a=await u(e,r);await i({vaultItemIds:n,pendingInvitesIds:a,shouldRunSync:d(o)})}catch(e){const t=new Error(`[SharingRemoteControl] - revokeRemoteControlledSharedItems: ${e}`);(0,i.sendExceptionLog)({error:t})}}},84163:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.deleteSingleUserItemGroup=t.resendPublicKeyInvite=t.updateSharingData=t.getPendingItemGroup=t.createOrUpdateItemEffect=t.deleteItemEffect=void 0;const o=r(16516),n=r(18948),i=r(32626),a=r(45051),s=r(53598),c=r(36513),d=r(48313),u=r(95623),l=r(76496),p=r(45291),S=r(58639),g=r(34433),m=r(36884),A=r(63698),y=r(89016),E=r(70252),f=r(88542),T=r(96850),v=r(72079),h=r(57779),_=r(76496),I=r(50141),C=r(58107),D=r(49551),O=r(39373),P=r(56915),R=r(12362),N=r(86691),L=r(73566),b=r(56915),U=r(85225),M=r(82366);function w(e,t,r){const n=(0,o.pick)(e,r);return(0,o.mergeRight)(t,n)}t.deleteItemEffect=async function(e,t){try{const{itemToDelete:r}=(0,l.findPersonalDataItemToDelete)(e,t);if(!r)return!0;const o=(0,p.removePersonalItem)(r.kwType,r.Id,null);return e.dispatch(o),!0}catch(e){return u.default.log(`[SharingSync]: deleteItemEffect: ${e}`),!1}},t.createOrUpdateItemEffect=async function(e,t,r){let o=null;const n=(0,R.getInstance)(),a=(0,N.getInstance)();try{const s=await(0,c.makeCryptoService)().symmetricEncryption.decryptSharingItem(r,t.content),{Id:u}=s,l=e.getPersonalData(),p=(0,b.platformInfoSelector)(e.getState());if((0,i.isCredential)(s)){o=a.lockTopic("iconsUpdates");const t=u?(0,D.findDataModelObject)(u,l.credentials||[]):null,r=t?w(f.sharedFields,t,s):s,c={credentialIds:[r.Id],type:"credentialUpdates"};await n.add("iconsUpdates",c);const S=(0,L.getUpdatedItemChangeHistory)({deviceName:e.getLocalSettings().deviceName,personalData:l,change:(0,U.makeUpdateChange)(r),userLogin:e.getUserLogin(),platformInfo:p}),g=(0,d.savePersonalDataItem)(r,i.DataModelType.KWAuthentifiant,S);e.dispatch(g),a.releaseTopic("iconsUpdates",o)}else if((0,i.isNote)(s)){const t=u?(0,D.findDataModelObject)(u,l.notes||[]):null,r=t?w(v.sharedFields,t,s):s,o=(0,d.savePersonalDataItem)(r,i.DataModelType.KWSecureNote);e.dispatch(o)}else if((0,i.isSecret)(s)){const t=u?(0,D.findDataModelObject)(u,l.secrets||[]):null,r=t?w(T.sharedFields,t,s):s,o=(0,d.savePersonalDataItem)(r,i.DataModelType.KWSecret);e.dispatch(o)}return!0}catch(e){return u.default.log(`[SharingSync] - createOrUpdateItemEffect: ${e}`),o&&a.releaseTopic("iconsUpdates",o),!1}},t.getPendingItemGroup=async function(e,t,r,o,n,a){let s;if(e.content){const r=(0,c.makeCryptoService)().symmetricEncryption;s=await r.decryptSharingItem(t,e.content)}else s=a[e.itemId];const d=(0,i.isCredential)(s),u=(0,i.isNote)(s),l=(0,i.isSecret)(s);if(!d&&!u&&!l)throw new Error("item is neither credential, secret nor note");let p=s;return d&&(p=(0,O.fixCredentialWithMissingTitle)(s)),{itemGroupId:r,items:[p],permission:n,referrer:o}},t.updateSharingData=function(e,t){const r=(0,g.sharingDataUpdated)(t);e.dispatch(r),(0,S.reportDataUpdate)(e)},t.resendPublicKeyInvite=async function(e,t,r){const o="[SharingEffectsService] - resendPublicKeyInvite";try{const n=e.getUserLogin(),i=(0,P.ukiSelector)(e.getState()),{groupId:a,revision:s}=r,{privateKey:d}=e.getUserSession().keyPair,u=(0,c.makeCryptoService)(),l=(0,y.makeWSService)(),{findUsersByAliases:p}=(0,I.makeWSUserAlias)(),{makeUserUpdate:S,makeUpdateItemGroupMembers:g}=(0,m.makeItemGroupService)(l,u),{updateItemGroupMembers:f}=(0,A.makeItemGroupWS)(),T=JSON.stringify([t.userId]),v=(await p({login:n,uki:i,aliases:T}))[t.userId];if(!v){const e=`${o}: couldn't find the user by alias, aborting.`;return void(0,E.sendExceptionLog)({message:e})}const h=(r.users||[]).find((e=>e.userId===n));if(!h){const e=`${o}: couldn't find myself in "itemGroup.users", aborting.`;return void(0,E.sendExceptionLog)({message:e})}const _=await u.asymmetricEncryption.decrypt(d,h.groupKey),{publicKey:C}=v,{permission:D,userId:O}=t,R=await S(O,D,{rawItemGroupKey:_,userPublicKey:C}),N=g(a,s,[R],null),L=await f(n,i,N);if(L&&L.itemGroups&&1===L.itemGroups.length){const{userGroups:t}=e.getSharingData();await(0,M.validateItemGroupResponse)("[SharingSyncJobsService] - resendPublicKeyInvite",u,L,C,d,_,n,[R],t,!0)}}catch(e){const t=new Error(`${o}: ${e}`);(0,E.sendExceptionLog)({error:t})}},t.deleteSingleUserItemGroup=async function({storeService:e,wsService:t,eventLoggerService:r,applicationModulesAccess:o,sharingItemsApi:d},u){const{login:l}=e.getAccountInfo(),p=(0,P.ukiSelector)(e.getState()),{keyPair:{privateKey:S}}=e.getUserSession(),{groupId:g,revision:A}=u,y="[SharingEffectsService] - deleteSingleUserItemGroup",f=(0,c.makeCryptoService)(),{deleteItemGroup:T,makeDeleteItemGroupEvent:v}=(0,m.makeItemGroupService)(t,f);if(!(0,C.isLastActiveUserInItemGroupAndAdmin)(u,l)){throw new Error(`${y}: ${"I'm not alone in the group, aborting."}`)}if(!u.items||0===u.items.length)return!0;const I=(u.items||[]).map((({itemId:e})=>e)),D={};for(const t of I){const r=await(0,h.duplicateSharedElements)(e,t);D[t]=r}try{const t={login:l,uki:p,privateKey:S},o=await v(g,A);await T(t,o),Object.keys(D).filter((e=>D[e])).forEach((t=>{(0,_.deletePersonalDataItem)({storeService:e,eventLoggerService:r,sharingItemsApi:d},t,{ignoreSharing:!0})}))}catch(t){const o=new Error(`${y}: ${t}`);return(0,E.sendExceptionLog)({error:o}),Object.keys(D).map((e=>D[e])).filter(Boolean).forEach((t=>(0,_.deletePersonalDataItem)({storeService:e,eventLoggerService:r,sharingItemsApi:d},t))),!1}try{if(o){const{commands:e,queries:t}=o.createClients().vaultOrganization,r=await(0,n.firstValueFrom)(t.queryCollections({}));if((0,a.isSuccess)(r)&&r.data.collections?.length>0){const t=Object.keys(D).filter((e=>D[e])),o=Object.keys(D).map((e=>D[e])).filter(Boolean),n=r.data.collections.filter((e=>e.vaultItems.some((e=>t.includes(e.id))))),a={vaultItems:t.map((e=>({id:e,type:i.DataModelType.KWAuthentifiant})))},c={vaultItems:o.map((e=>({id:e,type:i.DataModelType.KWAuthentifiant})))};for(const t of n)await e.updateCollection({id:t.id,collection:a,operationType:s.OperationType.SUBSTRACT_VAULT_ITEMS}),await e.updateCollection({id:t.id,collection:c,operationType:s.OperationType.APPEND_VAULT_ITEMS})}}return!0}catch(t){const o=new Error(`${y}: failure cleaning up collections ${t}`);return(0,E.sendExceptionLog)({error:o}),Object.keys(D).map((e=>D[e])).filter(Boolean).forEach((t=>(0,_.deletePersonalDataItem)({storeService:e,eventLoggerService:r,sharingItemsApi:d},t))),!1}}},78118:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getEmptySharing2Summary=t.getEmptySharingData=t.getEmptyGetSharingParams=t.getEmptyOperations=t.initSharingSyncFromStorage=t.putSharingSyncBackInStorage=t.updateSharingDataFromSync=t.updateSharedCollectionsInModule=t.applyOperationsToSharingData=t.runOperationsEffects=t.setMissingItemKeys=t.revokeUsersFromInvalidItemGroups=t.shouldRunAutoRevoke=t.asyncFilterItemGroups=t.filterOutInvalidOperations=t.getSharing=t.setGetSharingParams=t.tagConfirmableOperations=t.setOperations=t.sanitizeData=t.OperationType=t.syncSharing=void 0;const o=r(16516),n=r(18948),i=r(32626),a=r(45051),s=r(21877),c=r(84827),d=r(47683),u=r(58107),l=r(71646),p=r(84163),S=r(95623),g=r(70252),m=r(17825),A=r(56915),y=r(32663),E=r(3735),f=r(88205),T=!1;function v(e,t){return T?(...r)=>(console.time(e),t(...r).then((t=>(S.default.warn(`Step "${e}" returned:`,t),console.timeEnd(e),t)))):t}var h;async function _(e){const{sharingData:{collections:t,items:r,itemGroups:o,userGroups:n},sharing2Summary:{collections:i,items:a,itemGroups:s,userGroups:c}}=e;return{...e,sharingData:{collections:I(t,"sharingData.collections"),items:I(r,"sharingData.items"),itemGroups:I(o,"sharingData.itemGroups"),userGroups:I(n,"sharingData.userGroups")},sharing2Summary:{collections:I(i,"sharing2Summary.collections"),items:I(a,"sharing2Summary.items"),itemGroups:I(s,"sharing2Summary.itemGroups"),userGroups:I(c,"sharing2Summary.userGroups")}}}function I(e,t,r){const o=function(e,t){return r=>{if(e(r))return!0;const o=`[SharingSync] - sanitizeList: found invalid element "${r}" in "${t}", filtering it out.`;return(0,g.sendExceptionLog)({message:o}),!1}}(r||Boolean,t);return(e||[]).filter(o)}async function C(e){const{sharingData:t,personalDataItemIds:r}=e,o=D(t.items,e.sharing2Summary.items,"itemId","timestamp").map((e=>e.type===h.Create&&r.includes(e.id)?{...e,skipPersonalDataItemCreation:!0}:e)),n=D(t.itemGroups,e.sharing2Summary.itemGroups,"groupId","revision"),i=D(t.userGroups,e.sharing2Summary.userGroups,"groupId","revision"),a=D(t.collections,e.sharing2Summary.collections,"uuid","revision");return{...e,operations:{items:o,itemGroups:n,userGroups:i,collections:a}}}function D(e,t,r,o){const{elementsToCreate:n}=function(e,t,r){const o=e.map((e=>e[r])),n=t.map((e=>e.id)),i=n.filter((e=>!o.includes(e)));return{elementsToCreate:i}}(e,t,r),{elementsToUpdate:i,elementsToDelete:a}=function(e,t,r,o){const n=t.map((e=>e.id)),i={elementsToUpdate:[],elementsToDelete:[]};return e.reduce(((e,i)=>{const a=n.indexOf(i[r]);if(a<0)return{...e,elementsToDelete:[...e.elementsToDelete,i[r]]};return t[a][o]>i[o]?{...e,elementsToUpdate:[...e.elementsToUpdate,i[r]]}:e}),i)}(e,t,r,o);return[].concat(n.map((e=>({id:e,type:h.Create})))).concat(i.map((e=>({id:e,type:h.Update})))).concat(a.map((e=>({id:e,type:h.Delete}))))}async function O(e,t){const{operations:{items:r},loadedElements:{collections:n,itemGroups:i,userGroups:a},sharingData:{collections:s,itemGroups:c,userGroups:d}}=e,l=(0,o.uniqBy)((e=>e.groupId),i.concat(c)),p=(0,o.uniqBy)((e=>e.groupId),a.concat(d)),S=(0,o.uniqBy)((e=>e.uuid),n.concat(s)),g=r.map((e=>function(e,t,r,o,n){if(e.type!==h.Create)return e;const i=(r||[]).find((t=>(t.items||[]).map((e=>e.itemId)).includes(e.id)));if(!i)return e;const a=(0,u.isItemGroupAccepted)(i,o,t,n),s=a?e:{...e,userConfirmationRequired:!0};return s}(e,t,l,p,S)));return{...e,operations:{...e.operations,items:g}}}async function P(e){const t=t=>e.operations[t].filter((e=>[h.Create,h.Update].includes(e.type))).map((e=>e.id));return{...e,getSharingParams:{collectionIds:t("collections"),itemIds:t("items"),itemGroupIds:t("itemGroups"),userGroupIds:t("userGroups")}}}async function R(e,t,r,o){const n=Object.assign({},e.getSharingParams,{type:"getSharing",sharingVersion:4});if(!(n.collectionIds.length||n.itemIds.length||n.itemGroupIds.length||n.userGroupIds.length))return e;const{collections:i,itemErrors:a,items:s,itemGroupErrors:c,itemGroups:d,userGroupErrors:u,userGroups:l}=await t.sharing.get(r,o,n);if(a&&a.length)throw new Error(`[SharingSync] - getSharing itemErrors: ${a[0].message}`);if(c&&c.length)throw new Error(`[SharingSync] - getSharing itemGroupErrors: ${c[0].message}`);if(u&&u.length)throw new Error(`[SharingSync] - getSharing userGroupErrors: ${u[0].message}`);return{...e,loadedElements:{collections:I(i,"getSharing loaded collections"),items:I(s,"getSharing loaded items"),itemGroups:I(d,"getSharing loaded itemGroups"),userGroups:I(l,"getSharing loaded userGroups")}}}async function N(e,t,r,o,n){const{sharingData:{collections:i,userGroups:a},loadedElements:{collections:s,itemGroups:c,userGroups:u},operations:{collections:l,itemGroups:p,userGroups:S}}=e,g=await(0,y.asyncFilter)(u,(e=>(0,d.isUserGroupValid)(e,t,r,o))),m=g.map((e=>e.groupId)),A=S.filter((e=>e.type===h.Delete||m.includes(e.id))),E=g.concat(a),f=await(0,y.asyncFilter)(s,(e=>(0,d.isCollectionValid)(e,t,r,o,E))),T=f.map((e=>e.uuid)),v=l.filter((e=>e.type===h.Delete||T.includes(e.id))),_=f.concat(i),{validItemGroups:I,itemKeys:C,invalidItemGroups:D}=await L(c,(e=>(0,d.validateItemGroup)(e,E,t,r,o,function(e,t){const r=(e.collections||[]).map((e=>e.uuid));return t.filter((e=>r.includes(e.uuid)))}(e,_)))),O=I.map((e=>e.groupId)),P=p.filter((e=>e.type===h.Delete||O.includes(e.id)));return D&&D.length>0&&D.forEach((e=>{n?.(e.itemGroupId,e.error)})),{...e,itemKeys:C,operations:{...e.operations,collections:v,userGroups:A,itemGroups:P},invalidItemGroups:D}}async function L(e,t){const r=await Promise.all(e.map(t));return{validItemGroups:e.filter(((e,t)=>r[t].isValid)),itemKeys:r.filter((e=>e.isValid)).reduce(((e,t)=>({...e,...t.itemKeys})),{}),invalidItemGroups:r.flatMap(((t,r)=>!1===t.isValid?[{itemGroupId:e[r].groupId,error:t.error}]:[]))}}async function b(e,t){const r=(await(0,f.makeFeatureFlipsSelectors)(e).featureFlipsSelector()).sharing_web_invalidSignatureAutoRevoke_prod,o=t===s.Trigger.InitialLogin||t===s.Trigger.Login;return r&&o}async function U(e,t,r,o,n,i,a,c){if(!await b(t,c))return o;const{sharingData:{userGroups:u},loadedElements:{itemGroups:l,userGroups:p},invalidItemGroups:S}=o,g=S.filter((e=>e.error===s.ErrorName.ItemGroupInvalidUserProposeSignature));if(0===g.length)return o;const m=(await(0,y.asyncFilter)(p,(e=>(0,d.isUserGroupValid)(e,n,i,a)))).concat(u),A=g.map((e=>l.find((({groupId:t})=>t===e.itemGroupId)))).filter((e=>void 0!==e&&(0,E.isUserItemGroupAdmin)(e,u,a)));if(0===A.length)return o;const f=A.flatMap((e=>e.users.filter((e=>"pending"===e.status&&e.userId!==a)).map((t=>({itemGroup:e,user:t}))))),T=(await Promise.all(f.map((async e=>{const t=await(0,d.getDecryptedItemGroupKey)(e.itemGroup,function(e,t){const r=(e.groups||[]).map((e=>e.groupId));return t.filter((e=>r.includes(e.groupId)))}(e.itemGroup,m),n,a);return await(0,d.isItemGroupUserProposeSignatureValid)(e.user,t)?void 0:e})))).filter((e=>void 0!==e)),v=await Promise.all(T.map((async({user:o,itemGroup:n})=>(await(0,E.revokeItemGroupMember)(t,e,r,n,{type:"user",alias:o.alias}),{user:o,itemGroup:n}))));return{...o,autoRevokedUsers:v}}async function M(e,t,r){const{loadedElements:o,sharingData:{collections:n,itemGroups:i,userGroups:a},itemKeys:s}=e,c=o.items.filter((e=>(0,u.isItemWithoutItemGroup)(e.itemId,o.itemGroups))).reduce(((e,t)=>{const r=(0,l.findItemItemGroup)(t.itemId,i);return r?{...e,[t.itemId]:{itemGroup:r}}:e}),{}),d=Object.keys(c),p=d.map((e=>{const{itemGroup:o}=c[e];return(0,u.getItemGroupKey)(o,a,t,r,n).catch((()=>null))})),S=await Promise.all(p),g=d.reduce(((e,t,r)=>({...e,[t]:{...c[t],itemGroupKey:S[r]}})),{}),m=d.map((e=>{const{itemGroupKey:t,itemGroup:r}=g[e];if(!r)return Promise.resolve(null);const o=(r.items||[]).find((t=>t.itemId===e));return o?(0,u.decryptItemKey)(o.itemKey,t).catch((()=>null)):Promise.resolve(null)})),A=await Promise.all(m),y=d.reduce(((e,t,r)=>A[r]?{...e,[t]:A[r]}:e),{});return{...e,itemKeys:{...s,...y}}}async function w(e,{storeService:t,wsService:r,eventLoggerService:n,applicationModulesAccess:a}){const s=await async function(e,t,r){const{itemKeys:o,loadedElements:n,operations:{items:a}}=t,s=a.map((t=>async function(e,t,r,o){switch(r.type){case h.Delete:return await(0,p.deleteItemEffect)(e,r.id)?r:null;case h.Create:case h.Update:{if(r.skipPersonalDataItemCreation)return r;if(r.userConfirmationRequired)return null;const n=t.items.find((e=>e.itemId===r.id));if(!n)return null;const i=o[n.itemId];if(!i)return null;return await(0,p.createOrUpdateItemEffect)(e,n,i)?r:null}}return(0,m.assertUnreachable)(r.type)}(e,n,t,o))),c=(await Promise.all(s)).filter((e=>!!e));try{if(r&&c.length>0){const{commands:e}=r.createClients().passwordHealth;e.recalculatePasswordHealth()}}catch(e){const t=new Error(`Password Health update - sharing: ${e}`);(0,g.sendExceptionLog)({error:t,code:i.ExceptionCriticality.WARNING})}return c}(t,e,a),c=await async function({storeService:e,wsService:t,eventLoggerService:r,applicationModulesAccess:n},a){const{operations:{itemGroups:s},loadedElements:{itemGroups:c,userGroups:d,collections:l},sharingData:{userGroups:S,collections:A}}=a,y=(0,o.uniqBy)((e=>e.groupId),d.concat(S)),E=(0,o.uniqBy)((e=>e.uuid),l.concat(A)),f=s.map((o=>async function({storeService:e,wsService:t,eventLoggerService:r,applicationModulesAccess:o},n,i,a,s){const{type:c,id:d}=a,{login:l}=e.getAccountInfo();switch(c){case h.Delete:return a;case h.Create:case h.Update:{const c=n.find((e=>e.groupId===d));if(!c)return null;if((c.users||[]).filter((e=>"publicKey"===e.rsaStatus)).forEach((t=>(0,p.resendPublicKeyInvite)(e,t,c))),(0,u.isLastActiveUserInItemGroupAndAdmin)(c,l)){return await(0,p.deleteSingleUserItemGroup)({storeService:e,wsService:t,eventLoggerService:r,applicationModulesAccess:o,sharingItemsApi:o.createClients().sharingItems},c)?{...a,type:h.Delete}:null}if(!(0,u.isItemGroupAccepted)(c,i,l,s)){const t=(c.items||[]).map((async({itemId:t})=>{try{return await(0,p.deleteItemEffect)(e,t)}catch(e){return null}}));return await Promise.all(t),{...a,deleteSharingDataItems:!0}}return a}}return(0,m.assertUnreachable)(c)}({storeService:e,wsService:t,eventLoggerService:r,applicationModulesAccess:n},c,y,o,E))),T=(await Promise.all(f)).filter((e=>!!e));try{if(n&&T.length>0){const{commands:e}=n.createClients().passwordHealth;e.recalculatePasswordHealth()}}catch(e){const t=new Error(`Password Health update - sharing: ${e}`);(0,g.sendExceptionLog)({error:t,code:i.ExceptionCriticality.WARNING})}return T}({storeService:t,wsService:r,eventLoggerService:n,applicationModulesAccess:a},e);return{...e,operations:{...e.operations,items:s,itemGroups:c}}}async function B(e){const{sharingData:{items:t,itemGroups:r,userGroups:o,collections:n},loadedElements:{items:i,itemGroups:a,userGroups:s,collections:c},operations:{items:d,itemGroups:u,userGroups:l,collections:p}}=e,S=k(i,t,d),g=k(a,r,u),m=k(s,o,l),A=k(c,n,p),y=u.filter((({deleteSharingDataItems:e})=>e)).reduce(((e,{id:t})=>{const r=a.find((e=>e.groupId===t));if(!r)return e;const o=(r.items||[]).map((({itemId:e})=>e));return[...e,...o]}),[]),E=S.filter((e=>!y.includes(e.itemId)));return{...e,sharingData:{items:E,itemGroups:g,userGroups:m,collections:A}}}function k(e,t,r){return r.reduce(((t,r)=>function(e,t,r){switch(r.type){case h.Delete:return function(e,{id:t}){return e.filter((e=>G(e)!==t))}(t,r);case h.Create:return function(e,t,{id:r}){const o=e.find((e=>G(e)===r));return o?t.concat(o):t}(e,t,r);case h.Update:return function(e,t,{id:r}){const o=e.find((e=>G(e)===r));if(!o)return t;return t.map((e=>G(e)===r?o:e))}(e,t,r)}return(0,m.assertUnreachable)(r.type)}(e,t,r)),t)}function G(e){if("itemId"in e)return e.itemId;if(function(e){return"groupId"in e}(e))return e.groupId;if(function(e){return"uuid"in e}(e))return e.uuid}async function F(e,t,r){try{if(r){const{sharingData:{collections:o,userGroups:n}}=e;if(o){const e=o.filter((e=>{const r=(e?.users??[]).some((e=>e.login===t&&"accepted"===e.status)),o=e.userGroups.map((e=>e.uuid)),i=n.filter((e=>o.includes(e.groupId))).find((e=>(e?.users??[]).find((e=>e.userId===t)))),a=(i?.users??[]).some((e=>e.userId===t&&"accepted"===e.status));return r||a})),{commands:i}=r.createClients().sharingCollections;i.updateSharedCollections({collections:e}),i.moveCollectionItemsToBusinessSpace()}}}catch(e){const t=new Error(`[SharingSync] - update shared collections failed: ${e}`);(0,g.sendExceptionLog)({error:t,code:i.ExceptionCriticality.WARNING})}return e}async function K(e,t){const{sharingData:r}=e;return(0,p.updateSharingData)(t,r),e}async function V(e,t,r){const{sharingSync:o}=t.getState().userSession;return r.getInstance().storeSharingSync(o),e}async function H(e,t,r){const o=r.getInstance(),n=await o.doesSharingSyncExist();let i=null;const a=()=>{i={pendingUserGroups:[],pendingItemGroups:[]},o.storeSharingSync(i)};n||a();try{i=await o.getSharingSync()}catch(e){a()}const{pendingItemGroups:s,pendingUserGroups:d}=i,u=(0,c.setAllPendingAction)(s,d);return t.dispatch(u),e}function z(){return{collections:[],items:[],itemGroups:[],userGroups:[]}}function j(){return{collections:[],items:[],itemGroups:[],userGroups:[]}}t.syncSharing=async function({storeService:e,wsService:t,localStorageService:r,eventLoggerService:s,applicationModulesAccess:d},l,m,y){try{const S=(0,A.ukiSelector)(e.getState()),E=e.getUserLogin(),{privateKey:f,publicKey:T}=e.getUserSession().keyPair,{credentials:h,notes:D,secrets:L}=e.getPersonalData(),b=e.getSharingData(),{queries:k}=d.createClients().sharingCollections,G=await(0,n.firstValueFrom)(k.getSharedCollections({}));b.collections=(0,a.isSuccess)(G)&&Array.isArray(G.data)?G.data:[];const z=I(h,"PersonalData.credentials",i.isCredential),j=I(D,"PersonalData.notes",i.isNote),W=I(L,"PersonalData.secrets",i.isSecret),x=[...z,...j,...W],Y=x.map((e=>e.Id)),q=x.reduce(((e,t)=>(e[t.Id]=t,e)),{}),$={itemKeys:{},loadedElements:{collections:[],items:[],itemGroups:[],userGroups:[]},sharing2Summary:l,sharingData:b,operations:{collections:[],items:[],itemGroups:[],userGroups:[]},personalDataItemIds:Y,pendingUserGroups:[],pendingItemGroups:[],invalidItemGroups:[],autoRevokedUsers:[]},Q=await Promise.resolve($).then(v("sanitizeData",_)).then(v("setOperations",C)).then(v("setGetSharingParams",P)).then(v("getSharing",(e=>R(e,t,E,S)))).then(v("filterOutInvalidOperations",(e=>N(e,f,T,E,m)))).then(v("revokeUsersFromInvalidItemGroups",(r=>U(e,d,t,r,f,T,E,y)))).then(v("setMissingItemKeys",(e=>M(e,f,E)))).then(v("tagConfirmableItemOperation",(e=>O(e,E)))).then(v("setPendingItemGroupsList",(e=>async function(e,t,r,n){const{loadedElements:{itemGroups:i,items:a},sharingData:{itemGroups:s,items:c},itemKeys:d}=e,l=(0,o.uniqBy)((e=>e.groupId),i.concat(s)),S=(0,o.uniqBy)((e=>e.itemId),a.concat(c)),g=l.reduce(((e,o)=>{const i=(0,u.getItemGroupPendingUserMember)(o,t);if(!i)return e;const a=async function(e,t,r,o,n,i){const{permission:a,referrer:s,groupKey:c}=t,d=(e.items||[]).map((async t=>{try{const{itemId:d}=t,l=n[d]||await(0,u.getDecipheredItemKey)(c,t.itemKey,r);if(!l)return null;const S=o.find((e=>e.itemId===d));if(!S)return null;return await(0,p.getPendingItemGroup)(S,l,e.groupId,s,a,i)}catch(e){return null}}));return(await Promise.all(d)).filter(Boolean)}(o,i,r,S,d,n);return[a,...e]}),[]),m=(0,o.flatten)(await Promise.all(g));return{...e,pendingItemGroups:m}}(e,E,f,q)))).then(v("runOperationsEffects",(r=>w(r,{storeService:e,wsService:t,eventLoggerService:s,applicationModulesAccess:d})))).then(v("applyOperationsToSharingData",B)).then(v("setPendingUserGroupsList",(t=>async function(e,t,r){const{sharingData:{userGroups:o}}=e,n=t.getSpaceData().spaces.find((e=>"accepted"===e.details.status));if(!n)return{...e,pendingUserGroups:[]};const i=String(n.teamId),a=o.reduce(((e,t)=>{if(!(String(t.teamId)===i))return e;const o=(t.users||[]).find((e=>e.userId===r&&"pending"===e.status));if(!o)return e;const{groupId:n,name:a}=t,{referrer:s,permission:c}=o;return[{groupId:n,name:a,referrer:s,permission:c},...e]}),[]);return{...e,pendingUserGroups:a}}(t,e,E)))).then(v("setPendingCollectionsList",(e=>async function(e,t){try{if(t){const{sharingData:{collections:r}}=e,{commands:o}=t.createClients().sharingInvites;o.updatePendingCollections(r)}}catch(e){const t=new Error(`Set pending collections - sharing sync: ${e}`);(0,g.sendExceptionLog)({error:t,code:i.ExceptionCriticality.WARNING})}return e}(e,d)))).then(v("initSharingSyncFromStorage",(t=>H(t,e,r)))).then(v("updateStoreSharingSync",(t=>async function(e,t){const{pendingItemGroups:r,pendingUserGroups:o}=e,n=(0,c.updateAllPendingAction)(r,o);return t.dispatch(n),e}(t,e)))).then(v("putSharingSyncBackInStorage",(t=>V(t,e,r)))).then(v("updateSharingDataFromSync",(t=>K(t,e)))).then(v("updateSharedCollectionsInModule",(e=>F(e,E,d))));return Q.sharingData}catch(t){const r=new Error(`[SharingSync] - syncSharing failed: ${t}`);return T&&S.default.error(r),(0,g.sendExceptionLog)({error:r}),e.getSharingData()}},function(e){e[e.Create=0]="Create",e[e.Update=1]="Update",e[e.Delete=2]="Delete"}(h=t.OperationType||(t.OperationType={})),t.sanitizeData=_,t.setOperations=C,t.tagConfirmableOperations=O,t.setGetSharingParams=P,t.getSharing=R,t.filterOutInvalidOperations=N,t.asyncFilterItemGroups=L,t.shouldRunAutoRevoke=b,t.revokeUsersFromInvalidItemGroups=U,t.setMissingItemKeys=M,t.runOperationsEffects=w,t.applyOperationsToSharingData=B,t.updateSharedCollectionsInModule=F,t.updateSharingDataFromSync=K,t.putSharingSyncBackInStorage=V,t.initSharingSyncFromStorage=H,t.getEmptyOperations=z,t.getEmptyGetSharingParams=function(){return{collectionIds:[],itemIds:[],itemGroupIds:[],userGroupIds:[]}},t.getEmptySharingData=j,t.getEmptySharing2Summary=function(){return{collections:[],items:[],itemGroups:[],userGroups:[]}}},3735:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.revokeItemGroupMember=t.isUserItemGroupAdmin=t.shareUnsharedItem=t.shareAlreadySharedItem=void 0;const o=r(32626),n=r(36884),i=r(10294),a=r(63698),s=r(50141),c=r(78320),d=r(36513),u=r(36513),l=r(58107),p=r(82366),S=r(56915),g=r(72678),m=/[<>]/g,A=e=>e.trim().toLowerCase().replace(m,"");t.shareAlreadySharedItem=async function(e,t,r,c,u,g){try{const m=t.getUserLogin(),y=t.getState(),E=(0,S.ukiSelector)(y),{privateKey:f}=t.getUserSession().keyPair,{collections:T,userGroups:v}=t.getSharingData(),h=v.filter(Boolean),{groupId:_,revision:I}=c,{credentials:C,notes:D,secrets:O}=t.getPersonalData(),P=[...C,...D,...O],R=await(0,d.makeCryptoService)(),{makeInviteItemGroupMembers:N,makeUserGroupInvite:L,makeUserUpload:b}=(0,n.makeItemGroupService)(r,R),{findUsersByAliases:U}=(0,s.makeWSUserAlias)(),{makeItemForEmailing:M}=(0,i.makeItemService)(),{inviteItemGroupMembers:w}=(0,a.makeItemGroupWS)(),B=await(0,l.getItemGroupKey)(c,h,f,m,T);if(!B){throw new Error("Couldn't get itemGroupKey, aborting.")}const k=g.filter(o.isUserRecipient).map((({alias:e})=>A(e))),G=JSON.stringify(k),F=await U({login:m,uki:E,aliases:G}),K=k.map((e=>b(e,F[e],_,u,B))),V=await Promise.all(K),H=(c.items||[]).map((({itemId:e})=>e)),z=P.filter((e=>H.includes(e.Id))),j=z.map(M),W=g.filter(o.isGroupRecipient).map((e=>e.groupId)),x=h.filter((({groupId:e})=>W.includes(e))).map((e=>L(e,u,B,f,m,_))),Y=await Promise.all(x),q=await(0,p.createAuditLogDetails)(e,y,z[0]),$=N(_,I,V,Y,j,q),Q=await w(m,E,$,q);if(Q&&Q.itemGroups&&1===Q.itemGroups.length){const{publicKey:e}=t.getUserSession().keyPair;await(0,p.validateItemGroupResponse)("[SharingUserActionsService] - shareAlreadySharedItem",R,Q,e,f,B,m,V,h)}}catch(e){throw e.message=`[SharingUserActionsService] - shareAlreadySharedItem: ${e.message}`,e}},t.shareUnsharedItem=async function(e,t,r,l,g,m){try{const y=t.getUserLogin(),E=t.getState(),f=(0,S.ukiSelector)(E),{privateKey:T,publicKey:v}=t.getUserSession().keyPair,{userGroups:h}=t.getSharingData(),_=await(0,d.makeCryptoService)(),{makeCreateItemGroupEvent:I,makeUserGroupInvite:C,makeUserUpload:D}=(0,n.makeItemGroupService)(r,_),{makeItemUpload:O,makeItemForEmailing:P}=(0,i.makeItemService)(),{createItemGroup:R}=(0,a.makeItemGroupWS)(),{findUsersByAliases:N}=(0,s.makeWSUserAlias)(),L=(0,c.generateItemUuid)(),b=await _.symmetricEncryption.generateNewAESKey(),U=m.filter(o.isUserRecipient).map((({alias:e})=>A(e))),M=JSON.stringify(U),w=await N({login:y,uki:f,aliases:M}),B=D(y,{login:y,publicKey:v,privateKey:T},L,"admin",b),k=U.map((e=>D(e,w[e],L,g,b))).concat(B),G=await Promise.all(k),F=m.filter(o.isGroupRecipient).map((e=>e.groupId)),K=h.filter((({groupId:e})=>F.includes(e))).map((e=>C(e,g,b,T,y,L))),V=await Promise.all(K),{Id:H}=l,z=(0,u.makeSymmetricEncryption)(),j=await _.symmetricEncryption.generateNewAESKey(),W=await _.symmetricEncryption.encryptAES256(b,j),x=await z.encryptSharingItem(j,l),Y=await O(H,W,x),q=P(l),$=await(0,p.createAuditLogDetails)(e,E,l),Q=I(L,G,V,[Y],[q],$),X=await R(y,f,Q);X&&X.itemGroups&&1===X.itemGroups.length&&await(0,p.validateItemGroupResponse)("[SharingUserActionsService] - shareUnsharedItem",_,X,v,T,b,y,G,h)}catch(e){throw e.message=`[SharingUserActionsService] - shareUnsharedItem: ${e.message}`,e}},t.isUserItemGroupAdmin=function(e,t,r,o){const n=(e.users||[]).some((({userId:e,permission:t})=>e===r&&"admin"===t)),i=(o||[]).some((e=>e.users.some((({login:e,permission:t})=>e===r&&"admin"===t)))),a=(t||[]).filter((e=>(e.users||[]).map((({userId:e})=>e)).includes(r))).map((({groupId:e})=>e)),s=(e.groups||[]).filter((({groupId:e})=>a.includes(e))).some((({permission:e})=>"admin"===e));return n||s||i},t.revokeItemGroupMember=async function(e,t,r,o,i,a="manual"){const s=await(0,d.makeCryptoService)(),{groupId:c,revision:u}=o,l=t.getState(),m=(0,S.ukiSelector)(l),A=t.getUserLogin(),{makeRevokeItemGroupMembers:y}=(0,n.makeItemGroupService)(r,s),E="user"===i.type?[i.alias]:[],f="userGroup"===i.type?[i.groupId]:[],{credentials:T,notes:v,secrets:h}=(0,g.personalDataSelector)(l),_=[...T,...v,...h],I=(o.items||[]).map((({itemId:e})=>e)),C=_.filter((e=>I.includes(e.Id))),D=y(c,u,E,f,await(0,p.createAuditLogDetails)(e,l,C[0]),a);await r.itemGroup.revokeItemGroupMembers(A,m,D)}},47683:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.isCollectionValid=t.isUserGroupValid=t.areItemGroupItemKeysValid=t.isItemGroupCollectionProposeSignatureValid=t.isItemGroupGroupMemberProposeSignatureValid=t.areItemGroupCollectionMembersProposeSignaturesValid=t.areItemGroupGroupMembersProposeSignaturesValid=t.isItemGroupUserProposeSignatureValid=t.areItemGroupUsersProposeSignaturesValid=t.isItemGroupCollectionMemberValid=t.isItemGroupUserGroupMemberValid=t.isItemGroupUserValid=t.getDecryptedItemGroupKey=t.validateItemGroup=void 0;const o=r(21877),n=r(36513),i=r(95623),a=r(58107),s=r(93513),c=!1;async function d(e,t,r,o){try{const{status:i,acceptSignature:s,groupKey:c}=t;if("accepted"!==i)return!0;const d=await(0,n.makeCryptoService)().asymmetricEncryption.decrypt(r,c);return await(0,a.isGroupSignatureValid)(e,s,d,o)}catch(e){return c&&i.default.log(`isGroupSignatureValid error: ${e}`),!1}}async function u(e,t,r,o,s){try{const{status:i,acceptSignature:c,groupKey:d,groupId:u}=t;if("accepted"!==i)return!0;const l=(r||[]).find((e=>e.groupId===u));if(!l)return!1;const{publicKey:p}=l,S=await(0,a.getUserGroupPrivateKey)(l,o,s);if(!S)return!1;const g=await(0,n.makeCryptoService)().asymmetricEncryption.decrypt(S,d);return await(0,a.isGroupSignatureValid)(e,c,g,p)}catch(e){return c&&i.default.log(`isItemGroupUserGroupMemberValid error: ${e}`),!1}}async function l(e,t,r,o,n){try{const i=(r||[]).find((e=>e.uuid===t.member.uuid));if(!i)return!1;let s=null;const{status:c,acceptSignature:d}=t.member,{publicKey:u}=i;if("accepted"!==c)return!0;if(t.userGroup){if(!i.userGroups.find((e=>e.uuid===t.userGroup.groupId)))return null;s=await(0,a.getDecryptedPrivateCollectionKeyFromUserGroup)(i,t.userGroup,o,n)}else s=await(0,a.getCollectionPrivateKeyForUser)(i,o,n);if(!s)return!1;const l=await(0,a.decryptGroupKey)(t.member.itemGroupKey,s);if(!l)return!1;return await(0,a.isGroupSignatureValid)(e,d,l,u)}catch(e){return c&&i.default.log(`isItemGroupCollectionMemberValid error: ${e}`),!1}}async function p(e,t){const r=(e||[]).filter((({status:e})=>["pending","accepted"].includes(e))).map((e=>S(e,t)));return(await Promise.all(r)).every(Boolean)}async function S(e,t){try{return await(0,n.makeCryptoService)().symmetricEncryption.verifyHmacSHA256(t,e.proposeSignature,s.encode(e.userId))}catch(e){return c&&i.default.warn(`[SharingValidationService] - isItemGroupUserProposeSignatureValid: ${e}`),!1}}async function g(e,t){const r=(e||[]).filter((({status:e})=>["pending","accepted"].includes(e))).map((e=>A(e,t)));return(await Promise.all(r)).every(Boolean)}async function m(e,t){const r=(e||[]).filter((({status:e})=>["pending","accepted"].includes(e))).map((e=>y(e,t)));return(await Promise.all(r)).every(Boolean)}async function A(e,t){try{return await(0,n.makeCryptoService)().symmetricEncryption.verifyHmacSHA256(t,e.proposeSignature,s.encode(e.groupId))}catch{return!1}}async function y(e,t){try{return await(0,n.makeCryptoService)().symmetricEncryption.verifyHmacSHA256(t,e.proposeSignature,s.encode(e.uuid))}catch{return!1}}async function E(e,t){const r=(e||[]).map((e=>async function(e,t){try{const{itemKey:r}=e;return await(0,a.decryptItemKey)(r,t)}catch{return!1}}(e,t))),o=await Promise.all(r);return!!o.every(Boolean)&&o.reduce(((t,r,o)=>({...t,[e[o].itemId]:r})),{})}t.validateItemGroup=async function(e,t,r,n,s,S){const A=e.groupId,y=e,f=(0,a.findMyItemGroupUser)(e,s),T=(0,a.findMyItemGroupUserGroupMember)(e,t,s),v=(0,a.findMyItemGroupCollectionMemberViaUserGroup)(y,t,s,S),h=(0,a.findMyItemGroupCollectionMemberAsUser)(y,s,S);if(!(f||T||h||v))return{isValid:!1,error:o.ErrorName.ItemGroupNoAccess};const _=await(0,a.getItemGroupKey)(e,t,r,s,S);if(c&&i.default.log("ITEM_GROUP_KEY",!!_),!_)return{isValid:!1,error:o.ErrorName.ItemGroupInvalidKey};const I=!f||await d(A,f,r,n);if(c&&i.default.log("ITEM_GROUP_USER_VALID",I),!I)return{isValid:!1,error:o.ErrorName.ItemGroupInvalidUserAcceptSignature};const C=!T||await u(A,T,t,r,s),D=!v||await l(A,v,S,r,s),O=!h||await l(A,{member:h},S,r,s);if(c&&(i.default.log("ITEM_GROUP_USER_GROUP_VALID",C),i.default.log("ITEM_GROUP_COLLECTION_VALID",D),i.default.log("ITEM_GROUP_COLLECTION_UER_VALID",O)),!C||!D||!O)return{isValid:!1,error:o.ErrorName.ItemGroupInvalidGroupAcceptSignature};const P=await p(e.users,_);if(c&&i.default.log("USERS_PROPOSE_SIGNATURES_VALID",P),!P)return{isValid:!1,error:o.ErrorName.ItemGroupInvalidUserProposeSignature};const R=await g(e.groups,_),N=await m(y.collections,_);if(c&&(i.default.log("GROUP_MEMBERS_PROPOSE_SIGNATURES_VALID",R),i.default.log("COLLECTION_MEMBERS_PROPOSE_SIGNATURES_VALID",N)),!R||!N)return{isValid:!1,error:o.ErrorName.ItemGroupInvalidGroupProposeSignature};const L=await E(e.items||[],_);return c&&i.default.log("ITEM_GROUP_ITEM_KEYS",!!L),L?{isValid:!0,itemKeys:L}:{isValid:!1,error:o.ErrorName.ItemGroupInvalidKey}},t.getDecryptedItemGroupKey=async function(e,t,r,o){const n=(0,a.findMyItemGroupUser)(e,o),i=(0,a.findMyItemGroupUserGroupMember)(e,t,o);if(!n&&!i)return null;const s=n?await(0,a.getDecryptedItemGroupKeyFromUser)(n,r):await(0,a.getDecryptedItemGroupKeyFromUserGroupMember)(i,t,r,o);return s||null},t.isItemGroupUserValid=d,t.isItemGroupUserGroupMemberValid=u,t.isItemGroupCollectionMemberValid=l,t.areItemGroupUsersProposeSignaturesValid=p,t.isItemGroupUserProposeSignatureValid=S,t.areItemGroupGroupMembersProposeSignaturesValid=g,t.areItemGroupCollectionMembersProposeSignaturesValid=m,t.isItemGroupGroupMemberProposeSignatureValid=A,t.isItemGroupCollectionProposeSignatureValid=y,t.areItemGroupItemKeysValid=E,t.isUserGroupValid=async function(e,t,r,o){const{groupId:n}=e,i=(e.users||[]).find((e=>e.userId===o));if(!i)return null;const s=await(0,a.getDecryptedUserGroupKey)(i.groupKey,t);return!!s&&(!(i.acceptSignature&&!await(0,a.isGroupSignatureValid)(n,i.acceptSignature,s,r))&&!!await(0,a.areUserGroupUsersProposeSignaturesValid)(e.users,s))},t.isCollectionValid=async function(e,t,r,o,n){const{uuid:i}=e,s=(e.users||[]).find((e=>e.login===o));let c=s?.collectionKey,d=s?.acceptSignature,u=t,l=r;if(!s){const r=e.userGroups.map((e=>e.uuid)),i=n.filter((e=>r.includes(e.groupId))).find((e=>e.users.find((e=>e.userId===o)))),s=e.userGroups.find((e=>e.uuid===i.groupId));if(!s)return!1;const p=await(0,a.getUserGroupPrivateKey)(i,t,o);c=s.collectionKey,d=s.acceptSignature,u=p,l=i.publicKey}const p=await(0,a.getDecryptedUserGroupKey)(c,u);return!!p&&(!(d&&!await(0,a.isGroupSignatureValid)(i,d,p,l))&&!!await(0,a.areCollectionUsersProposeSignaturesValid)(e,p))}},70206:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.makeUserGroupService=t.checkUsersPublicKey=t.ConvertUserGroupMemberToUserUpdate=t.ConvertUserGroupMemberToUserUpdateWithInvite=t.ConvertUserGroupMemberToUserUpload=t.createUserUploadEvent=t.makeUserGroupAdminItem=t.makeGroupKeyItem=t.decryptGroupKey=t.UPDATE_USER_GROUP_USERS=t.REVOKE_USER_GROUP_USERS=t.INVITE_USER_GROUP_USERS=t.REFUSE_USER_GROUP=t.ACCEPT_USER_GROUP=t.RENAME_USER_GROUP=t.DELETE_USER_GROUP=t.CREATE_TEAM_ADMINS_USER_GROUP=t.CREATE_USER_GROUP=t.SHARING_VERSION=void 0;const o=r(93513),n=r(78320),i=r(16038),a=r(44197),s=r(43927),c=r(82366),d=r(70252);function u(e,t,r,n){return e.asymmetricEncryption.sign(t,o.encode(r+"-accepted-"+n))}function l(e,t,r){if(!(0,i.isBase64Encoded)(r))throw new Error("INVALID_GROUP_KEY");return e.asymmetricEncryption.decrypt(t.privateKey,r)}async function p(e,t,r,n,i){const s=(0,a.getAdminDataFromTeamAdminData)(r,n),c=(0,a.getSpecialItemGroupFromAdminData)(s).revision,d=JSON.stringify(i),[u,l]=await Promise.all([e.symmetricEncryption.generateNewAESKey(),(0,a.getSpecialItemGroupKey)(e,t,s)]),[p,S]=await Promise.all([e.symmetricEncryption.encryptAES256(u,o.encode(d)),e.symmetricEncryption.encryptAES256(l,o.encode(u))]);return{itemId:i.itemId,itemKey:S,content:p,itemGroupRevision:c}}async function S(e,r,i,a){return async function(e,r,i,a,s){const[c,d]=await Promise.all([r.asymmetricEncryption.generateRsaKeyPair(),r.symmetricEncryption.generateNewAESKey()]),u=(0,n.generateItemUuid)(),l=await r.symmetricEncryption.encryptAES256(d,o.encode(c.privateKey)),p={groupId:u,name:a.name,publicKey:c.publicKey,privateKey:l,sharingVersion:t.SHARING_VERSION,teamId:a.teamId,type:e,users:await Promise.all(s.map((e=>m(r,e,i,d,u))))};return p}("createTeamAdminsUserGroup",e,r,i,a)}async function g(e){return{itemId:(0,n.generateItemUuid)(),groupId:(0,n.generateItemUuid)(),groupKey:await e.symmetricEncryption.generateNewAESKey()}}async function m(e,t,r,o,n){const i=await y(e,t,o);return t.Login===r.login&&(i.acceptSignature=await u(e,r.privateKey,n,o)),i}function A(e,r,o,n,i){return async function(e,r,o,n,i,a){const s=i.map((async t=>{try{return{success:!0,user:await m(e,t,r,a,o)}}catch(e){const t=new Error(`[UserGroupService] - makeBaseInviteMembersEvent: ${e}`);return(0,d.sendExceptionLog)({error:t}),{success:!1}}})),c=(await Promise.all(s)).filter((e=>e.success)).map((e=>e.user));return{groupId:o,revision:n,sharingVersion:t.SHARING_VERSION,type:t.INVITE_USER_GROUP_USERS,users:c}}(e,n,r.groupId,o,i,r.groupKey)}async function y(e,t,r){const n=await f(t);if(!t.Login){const i=await(0,c.generateProposeSignature)(e,r,t.Alias);return await(0,c.validateProposeSignature)("[ItemGroupService] - ConvertUserGroupMemberToUserUpload (no login)",e,r,i,o.encode(t.Alias)),{...n,userId:t.Alias,alias:t.Alias,proposeSignatureUsingAlias:!0,proposeSignature:i}}const[i,a]=await Promise.all([e.asymmetricEncryption.encrypt(t.PublicKey,r),(0,c.generateProposeSignature)(e,r,t.Login)]);return await(0,c.validateProposeSignature)("[ItemGroupService] - ConvertUserGroupMemberToUserUpload",e,r,a,o.encode(t.Login)),{...n,alias:t.Alias,groupKey:i,proposeSignatureUsingAlias:!1,proposeSignature:a}}async function E(e,t,r){const n=await f(t),[i,a]=await Promise.all([e.asymmetricEncryption.encrypt(t.PublicKey,r),(0,c.generateProposeSignature)(e,r,t.Login)]);return await(0,c.validateProposeSignature)("[ItemGroupService] - ConvertUserGroupMemberToUserUpdateWithInvite",e,r,a,o.encode(t.Login)),{...n,groupKey:i,proposeSignature:a}}async function f(e){return{permission:e.Permission,userId:e.Login}}t.SHARING_VERSION=4,t.CREATE_USER_GROUP="createUserGroup",t.CREATE_TEAM_ADMINS_USER_GROUP="createTeamAdminsUserGroup",t.DELETE_USER_GROUP="deleteUserGroup",t.RENAME_USER_GROUP="renameUserGroup",t.ACCEPT_USER_GROUP="acceptUserGroup",t.REFUSE_USER_GROUP="refuseUserGroup",t.INVITE_USER_GROUP_USERS="inviteUserGroupUsers",t.REVOKE_USER_GROUP_USERS="revokeUserGroupUsers",t.UPDATE_USER_GROUP_USERS="updateUserGroupUsers",t.decryptGroupKey=l,t.makeGroupKeyItem=p,t.makeUserGroupAdminItem=g,t.createUserUploadEvent=m,t.ConvertUserGroupMemberToUserUpload=y,t.ConvertUserGroupMemberToUserUpdateWithInvite=E,t.ConvertUserGroupMemberToUserUpdate=f;function T(e,t,r,o){return e(t,r,{type:"getSharing",sharingVersion:4,userGroupIds:o}).then((({userGroupErrors:e,userGroups:t})=>{if(e&&e.length)throw new Error(e[0].message);return t}))}function v({teamId:e}){if(!e)throw new Error("USER_GROUP_DELETED")}t.checkUsersPublicKey=e=>{const t=Object.keys(e).filter((t=>!e[t].publicKey));return t.length>0?Promise.reject(new Error(JSON.stringify({message:"Users missing public Key: "+t,code:"MISSING_PUBLIC_KEY"}))):Promise.resolve(e)};const h=e=>{const t="ITEM_GROUP_UPDATE_CONFLICT";return"getAdditionalInfo"in e&&e.getAdditionalInfo().webServiceSubMessage===t||e.message.includes(t)},_=e=>{const t="Conflict";return!(!("getAdditionalInfo"in e)||!e.getAdditionalInfo().message.startsWith(t))||e.message.startsWith(t)};function I(e,t,r,o,n){return e(r,o,n).catch((i=>{if(h(i))return T(t,r,o,[n.groupId]).then((([t])=>{v(t);const{revision:i}=t;return e(r,o,{...n,revision:i})}));throw i}))}t.makeUserGroupService=function(e,r){return{makeUserGroupAdminItem:()=>g(r),makeCreateUserGroupEvent:(e,n,i,a)=>async function(e,r,n,i,a){const s=await e.asymmetricEncryption.generateRsaKeyPair(),{teamId:c,externalId:d,name:u}=i;return{groupId:a.groupId,name:u,publicKey:s.publicKey,privateKey:await e.symmetricEncryption.encryptAES256(a.groupKey,o.encode(s.privateKey)),sharingVersion:t.SHARING_VERSION,teamId:c,type:"createUserGroup",users:[],groupKeyItem:await p(e,r,n,c.toString(),a),externalId:d}}(r,e,n,i,a),makeCreateSpecialUserGroupEvent:(e,t,o)=>S(r,e,t,o),createUserGroup:({login:t,uki:r},o,n)=>function(e,t,r,o,n){return e.userGroup.create(t,r,n).catch((i=>{if(h(i))return(0,s.loadSpecialItemGroup)(e,t,r,o).then((o=>e.userGroup.create(t,r,{...n,groupKeyItem:{...n.groupKeyItem,itemGroupRevision:o.revision}})));throw i}))}(e,t,r,o,n),makeDeleteUserGroupEvent:(e,r,o,n)=>async function(e,r,o,n){const i={type:t.DELETE_USER_GROUP,sharingVersion:t.SHARING_VERSION,groupId:e,revision:r};return o&&n&&(i.groupKeyItem={itemId:o,itemGroupRevision:n}),i}(e,r,o,n),deleteUserGroup:({login:t,uki:r},o,n)=>function(e,t,r,o,n){return e.userGroup.delete(t,r,n).catch((i=>{if(h(i))return(0,s.loadSpecialItemGroup)(e,t,r,o).then((o=>e.userGroup.delete(t,r,{...n,groupKeyItem:{...n.groupKeyItem,itemGroupRevision:o.revision}})));if(_(i))return T(e.sharing.get,t,r,[n.groupId]).then((o=>{const[{revision:i,teamId:a}]=o;return a?e.userGroup.delete(t,r,{...n,revision:i}):{userGroups:o}}));throw i}))}(e,t,r,o,n),makeRenameUserGroupEvent:(e,r,o)=>async function(e,r,o){return{type:t.RENAME_USER_GROUP,sharingVersion:t.SHARING_VERSION,groupId:e,revision:r,name:o}}(e,r,o),renameUserGroup:({login:t,uki:r},o)=>function(e,t,r,o){const n=e.userGroup.rename;return n(t,r,o).catch((i=>{if(_(i))return T(e.sharing.get,t,r,[o.groupId]).then((e=>{v(e[0]);const[{name:i,revision:a}]=e;return i===o.name?{userGroups:e}:n(t,r,{...o,revision:a})}));throw i}))}(e,t,r,o),makeAcceptUserGroupEvent:(e,o)=>async function(e,r,o){const n=o.users.find((e=>e.userId===r.login)).groupKey,i=await l(e,r,n),a=await u(e,r.privateKey,o.groupId,i);return{type:t.ACCEPT_USER_GROUP,sharingVersion:4,revision:o.revision,groupId:o.groupId,acceptSignature:a}}(r,e,o),acceptUserGroup:({login:t,uki:r},o)=>I(e.userGroup.accept,e.sharing.get,t,r,o),makeRefuseUserGroupEvent:(e,r)=>async function(e,r){return{type:t.REFUSE_USER_GROUP,sharingVersion:4,revision:r,groupId:e}}(e,r),refuseUserGroup:({login:t,uki:r},o)=>I(e.userGroup.refuse,e.sharing.get,t,r,o),makeInviteMembersEventAsAdmin:(e,t,o,n)=>A(r,e,t,o,n),inviteUserGroupMembers:({login:t,uki:r},o)=>function(e,t,r,o){return e.userGroup.invite(t,r,o).catch((n=>{if(_(n))return T(e.sharing.get,t,r,[o.groupId]).then((n=>{v(n[0]);const[{revision:i,users:a}]=n,s=o.users.filter((e=>!a.find((t=>t.userId===e.userId&&"accepted"===t.status))));return s.length?e.userGroup.invite(t,r,{...o,revision:i,users:s}):{userGroups:n}}));throw n}))}(e,t,r,o),makeRevokeMembersEvent:(e,r,o)=>async function(e,r,o){return{type:t.REVOKE_USER_GROUP_USERS,sharingVersion:t.SHARING_VERSION,revision:r,groupId:e,users:o}}(e,r,o),revokeUserGroupMembers:({login:t,uki:r},o)=>function(e,t,r,o){return e.userGroup.revoke(t,r,o).catch((n=>{if(_(n))return T(e.sharing.get,t,r,[o.groupId]).then((n=>{v(n[0]);const[{revision:i,users:a}]=n,s=o.users.filter((e=>a.find((t=>t.userId===e&&"accepted"===t.status))));return s.length?e.userGroup.revoke(t,r,{...o,revision:i,users:s}):{userGroups:n}}));throw n}))}(e,t,r,o),makeUpdateMembersEvent:(e,r,o)=>async function(e,r,o){return{type:t.UPDATE_USER_GROUP_USERS,sharingVersion:t.SHARING_VERSION,revision:r,groupId:e,users:await Promise.all(o.map((e=>f(e))))}}(e,r,o),makeUpdateMembersWithInviteEvent:(e,o,n,i)=>async function(e,r,o,n,i){return{type:t.UPDATE_USER_GROUP_USERS,sharingVersion:t.SHARING_VERSION,revision:n,groupId:r,users:await Promise.all(i.map((t=>E(e,t,o))))}}(r,e,o,n,i),updateUserGroupMembers:({login:t,uki:r},o)=>I(e.userGroup.update,e.sharing.get,t,r,o),findExistingUsersByAliases:r=>e.userAlias.findUsersByAliases(r).then(t.checkUsersPublicKey),findUsersByAliases:t=>e.userAlias.findUsersByAliases(t),isCurrentUserProposeSignatureValid:(e,t)=>async function(e,t,r){const o=r.users.find((e=>e.userId===t.login)),n=await l(e,t,o.groupKey);return(0,c.isProposeSignatureValid)(e,o.proposeSignature,o.userId,n)}(r,e,t)}}},37275:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getSharingDataWithCollections=t.getSharedItemGroupsById=t.toCollectionModel=t.toVaultItemModel=t.filterUndefinedVaultItems=void 0;t.filterUndefinedVaultItems=e=>void 0!==e.id;t.toVaultItemModel=e=>({id:e.items?.[0].itemId});t.toCollectionModel=e=>r=>({id:r.uuid,name:r.name,vaultItems:e.filter((e=>e.collections?.find((e=>e.uuid===r.uuid)))).map(t.toVaultItemModel).filter(t.filterUndefinedVaultItems)});t.getSharedItemGroupsById=e=>e&&e.length>0?e.reduce(((e,t)=>({...e,[t.groupId]:t})),{}):{};t.getSharingDataWithCollections=e=>({collections:e.collections??[],itemGroups:e.itemGroups})},97124:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.makeSharingService=void 0;const o=r(36513),n=r(70206),i=r(36884),a=r(10294);t.makeSharingService=function(e,t){const r=(0,o.makeCryptoService)();return{ws:t,store:e,crypto:r,userGroup:(0,n.makeUserGroupService)(t,r),itemGroup:(0,i.makeItemGroupService)(t,r),item:(0,a.makeItemService)()}}},81197:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.isShared=void 0;const o=r(16516),n=r(59890);t.isShared=(0,o.curry)(((e,t)=>(0,n.binaryContains)(e,t.Id)))},71646:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getItemGroupActiveUsers=t.findItemItemGroup=t.findMyAcceptedItemGroups=t.findMyAcceptedItemGroupCollectionMembers=t.findMyAcceptedItemGroupUserGroupMembers=void 0;const o=r(58107);function n(e,t,r){const o=(t||[]).filter((e=>(e.users||[]).map((e=>e.userId)).includes(r))).map((e=>e.groupId));return(e.groups||[]).filter((e=>o.includes(e.groupId)&&"accepted"===e.status))}function i(e,t,r,n){const i=(0,o.findMyItemGroupCollectionMemberAsUser)(e,n,t),a=(0,o.findMyItemGroupCollectionMemberViaUserGroup)(e,r,n,t)?.member;return(e.collections||[]).filter((e=>{const t=i?.uuid===e.uuid,r=a?.uuid===e.uuid;return"accepted"===e.status&&(t||r)}))}t.findMyAcceptedItemGroupUserGroupMembers=n,t.findMyAcceptedItemGroupCollectionMembers=i,t.findMyAcceptedItemGroups=function(e,t,r,o){return e.filter((e=>{const a=e,s="items"===e.type,c=(e.users||[]).some((e=>e.userId===o&&"accepted"===e.status)),d=n(a,t,o).length>0,u=i(a,r,t,o).length>0;return s&&(c||d||u)}))},t.findItemItemGroup=function(e,t){return t.find((t=>(t.items||[]).map((e=>e.itemId)).includes(e)))},t.getItemGroupActiveUsers=function(e){return(e.users||[]).filter(a)};const a=e=>["accepted","pending"].includes(e.status)},89489:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getLimitedSharedItemIds=void 0;const o=r(37275);t.getLimitedSharedItemIds=(e,t,r,n)=>{const i=e.userGroups.filter((e=>e.users.some((e=>e.userId===n&&"accepted"===e.status)))),a=new Set(i.map((e=>e.groupId))),s=t??[],c=(0,o.getSharedItemGroupsById)(r),d=s.filter((e=>(e.users??[]).some((e=>e.login===n&&"accepted"===e.status))||(e.userGroups??[]).some((e=>a.has(e.uuid)&&"accepted"===e.status)))),u=new Set(d.map((e=>e.uuid)));return e.itemGroups.filter((e=>{const t=e.users?.some((e=>e.userId===n&&"admin"===e.permission&&"accepted"===e.status)),r=e.groups?.some((e=>a.has(e.groupId)&&"admin"===e.permission&&"accepted"===e.status)),o=c[e.groupId]?.collections?.some((e=>u.has(e.uuid)&&"admin"===e.permission&&"accepted"===e.status));return!(t||r||o)})).map((e=>(e.items||[]).map((e=>e.itemId)))).reduce(((e,t)=>e.concat(t)),[]).reduce(((e,t)=>({...e,[t]:!0})),{})}},78987:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.sharingCapacity$=t.myAcceptedUserGroups$=t.allSharedItemIds$=void 0;const o=r(18948),n=r(3343),i=r(84511),a=r(80993),s=r(90021);t.allSharedItemIds$=()=>{const e=a.sortedSharedItemIdsSelector;return(0,o.pipe)((0,n.map)(e),(0,n.distinctUntilChanged)())};t.myAcceptedUserGroups$=()=>{const e=i.myAcceptedUserGroupsSelector;return(0,o.pipe)((0,n.map)(e),(0,n.distinctUntilChanged)())};t.sharingCapacity$=()=>{const e=s.sharingCapacitySelector;return(0,o.pipe)((0,n.map)(e),(0,n.distinctUntilChanged)())}},84511:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.myAcceptedUserGroupsSelector=t.itemItemGroupSelector=t.isSharedSelector=void 0;const o=r(32034),n=r(58107),i=r(6e3),a=r(52102),s=r(71646);t.isSharedSelector=(e,t)=>{const{items:r}=(0,a.sharingDataSelector)(e);return r.some((e=>e.itemId===t))};t.itemItemGroupSelector=(e,t)=>{const{itemGroups:r}=(0,a.sharingDataSelector)(e);return(0,s.findItemItemGroup)(t,r)},t.myAcceptedUserGroupsSelector=(0,o.createSelector)(i.loginStatusSelector,a.sharingDataSelector,(({login:e},{userGroups:t})=>(0,n.findMyAcceptedUserGroups)(t,e)))},89698:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.acceptedItemGroupsSelector=void 0;const o=r(32034),n=r(16593),i=r(71646),a=r(52102);t.acceptedItemGroupsSelector=(0,o.createSelector)(a.sharingDataSelector,n.userIdSelector,(({itemGroups:e,userGroups:t,collections:r},o)=>(0,i.findMyAcceptedItemGroups)(e,t,r,o)))},55721:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.isAllowedToShareSelector=void 0;const o=r(32034),n=r(90021);t.isAllowedToShareSelector=(0,o.createSelector)(n.sharingCapacitySelector,(e=>"unlimited"===e.type||e.remains>0))},91210:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.limitedSharingItemsSelector=void 0;const o=r(32034),n=r(89489),i=r(16593),a=r(52102),s=r(31607);t.limitedSharingItemsSelector=(0,o.createSelector)(a.sharingDataSelector,s.sharedCollectionsSelector,s.sharedCollectionItemsSelector,i.userIdSelector,n.getLimitedSharedItemIds)},31607:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.sharedCollectionItemsSelector=t.sharedCollectionsSelector=void 0;t.sharedCollectionsSelector=e=>e.userSession.sharingData.collections;t.sharedCollectionItemsSelector=e=>e.userSession.sharingData.itemGroups},67231:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.sharedCredentialsCountSelector=void 0;const o=r(32034),n=r(80993),i=r(51319),a=r(81197);t.sharedCredentialsCountSelector=(0,o.createSelector)(n.sortedSharedItemIdsSelector,i.credentialsSelector,((e,t)=>{const r=(0,a.isShared)(e);return t.filter(r).length}))},30150:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.sharedItemsCountSelector=void 0;const o=r(32034),n=r(67231),i=r(41384);t.sharedItemsCountSelector=(0,o.createSelector)(n.sharedCredentialsCountSelector,i.sharedNotesCountSelector,((e,t)=>e+t))},41384:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.sharedNotesCountSelector=void 0;const o=r(32034),n=r(80993),i=r(75705),a=r(81197);t.sharedNotesCountSelector=(0,o.createSelector)(n.sortedSharedItemIdsSelector,i.notesSelector,((e,t)=>{const r=(0,a.isShared)(e);return t.filter(r).length}))},90021:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.sharingCapacitySelector=void 0;const o=r(32034),n=r(16593),i=r(46617),a=r(30150);t.sharingCapacitySelector=(0,o.createSelector)(a.sharedItemsCountSelector,n.premiumStatusSelector,i.getSharingCapacity)},52102:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.sharingDataSelector=void 0;t.sharingDataSelector=e=>e.userSession.sharingData},80993:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.sortedSharedItemIdsSelector=void 0;const o=r(32034),n=r(52102);t.sortedSharedItemIdsSelector=(0,o.createSelector)(n.sharingDataSelector,(({items:e})=>e.map((e=>e.itemId)).sort()))},46617:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getSharingCapacity=void 0;t.getSharingCapacity=(e,t)=>{const r=t?.capabilities?.sharingLimit?.info?.limit??1/0;return r===1/0?{type:"unlimited"}:{type:"limited",remains:Math.max(0,r-e)}}},82366:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.createAuditLogDetails=t.validateItemGroupResponse=t.validateProposeSignature=t.isProposeSignatureValid=t.generateProposeSignature=t.isAcceptSignatureValid=t.generateAcceptSignature=void 0;const o=r(93513),n=r(32626),i=r(21178),a=r(70252),s=r(35587),c=r(32663),d=r(47683),u=r(58107),l=r(16593),p=r(88205);function S(e,t,r){return new Promise(((n,i)=>{e.symmetricEncryption.signHmacSHA256(t,o.encode(r)).then(n,i)}))}function g(e,t,r,o){return S(e,o,r).then((e=>t===e))}function m(e){return"validProposeSignature"in e}function A(e){const t=m(e)?e.validProposeSignature:"not-found",r=m(e)&&void 0!==e.matchProposeSignature?e.matchProposeSignature:"not-found";return`  Status:${e.status} Permission:${e.permission} ValidProposeSignature:${t} MatchesProposeSignature:${r}`}async function y(e,t,r,o){return await(0,s.asyncMap)(e,(async e=>{const n=t.find((t=>t.userId===e.userId));return{...e,validProposeSignature:await g(r,e.proposeSignature,e.userId,o),matchProposeSignature:n&&e?n.proposeSignature===e.proposeSignature:void 0}}))}t.generateAcceptSignature=function(e,t,r,n){return new Promise(((i,a)=>{e.asymmetricEncryption.sign(t,o.encode(r+"-accepted-"+n)).then(i,a)}))},t.isAcceptSignatureValid=function(e,t,r,o){return new Promise(((n,i)=>{e.asymmetricEncryption.verify(r,t,o).then(n,i)}))},t.generateProposeSignature=S,t.isProposeSignatureValid=g,t.validateProposeSignature=async function(e,t,r,o,n){if(!await t.symmetricEncryption.verifyHmacSHA256(r,o,n)){const t=new Error(`${e}: INVALID_PROPOSE_CREATION Failed to validate newly created propose signature`);throw(0,a.sendExceptionLog)({error:t}),t}},t.validateItemGroupResponse=async function(e,t,r,o,n,i,l,p,S,m=!1,E){try{const f=await(0,c.asyncFilter)(p,(async e=>!await g(t,e.proposeSignature,e.userId,i))),T=await(0,c.asyncFilter)(r.itemGroups,(async e=>!(await(0,d.validateItemGroup)(e,S,n,o,l,E)).isValid));if(m?f.length>0:T.length>0||f.length>0){const r=function(e,t,r){return[`${e}: INVALID_PROPOSE_IN_RESPONSE Invalid item group on share`,t.map((e=>`Invalid Uploaded User UsingAlias:${"alias"in e?!!e.proposeSignatureUsingAlias:"updating"} Permission:${e.permission}`)).join("\n"),r.map((e=>[`Invalid ItemGroup ID:${e.groupId} Revision:${e.revision} TeamID:${e.teamId} MatchItemGroupKey:${e.matchItemGroupKey}`,"Invalid ItemGroup Users:",e.users.map(A).join("\n")].join("\n"))).join("\n")].join("\n")}(e,f,await(0,s.asyncMap)(T,(async e=>({...e,users:await y(e.users,p,t,i),matchItemGroupKey:i===await(0,u.getItemGroupKey)(e,S,n,l,E)}))));await(0,a.sendExceptionLog)({error:new Error(r)})}}catch(e){e.message=`[validateItemGroupResponse]: ERROR_VALIDATING_PROPOSE_IN_RESPONSE Error validating item group response ${e.message}`,await(0,a.sendExceptionLog)({error:e})}},t.createAuditLogDetails=async function(e,t,r){const o=(0,l.activeSpacesSelector)(t)[0],a=(await(0,p.makeFeatureFlipsSelectors)(e).featureFlipsSelector()).audit_logs_sharing,s=(!!r?.SpaceId&&o?.info?.collectSensitiveDataAuditLogsEnabled)??!1;if(!a||!s)return;const c=(0,n.isCredential)(r)&&r?.Url?new i.ParsedURL(r?.Url).getHostname():"",d=c||"",u=(0,n.isCredential)(r)?d:void 0,S=function(e){switch(e.kwType){case"KWAuthentifiant":return"AUTHENTIFIANT";case"KWSecureNote":return"SECURENOTE";default:return"SECRET"}}(r);return{captureLog:s,domain:u,type:S}}},83687:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getSharingStatusDetail=t.getNotShared=void 0;const o=r(16516),n=r(58107),i=r(71646);t.getNotShared=()=>({isShared:!1});const a=(e,t)=>e[t]?"limited":"admin";t.getSharingStatusDetail=(0,o.curry)(((e,r,o,s)=>{const{itemGroups:c,userGroups:d}=r,u=(0,i.findItemItemGroup)(s,c);if(!u)return(0,t.getNotShared)();const l=(0,n.getRecipientsCount)(r,s);return{groupSharing:(0,n.doesUserReceiveItemGroupViaGroup)(u,d,o),isShared:!0,lastAdmin:(0,n.isUserLastAdmin)(u,o),permission:a(e,s),recipientsCount:l}}))},63623:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.handleShareItemRequest=t.emptySessionResponse=t.getFreshUserGroups=t.updateUserGroupMembers=t.getSharedData=t.computeUserGroupMember=t.extractAliasesFromMembers=t.revokeUserGroupMembers=t.inviteUserGroupMembers=t.renameUserGroup=t.deleteUserGroup=t.deleteItemGroup=t.createSpecialItemGroup=t.createSpecialUserGroup=t.createUserGroup=t.buildSharingData=t.mergeSharingData=t.getCleanSharingData=t.getOutdatedSharingParams=void 0;const o=r(16516),n=r(32626),i=r(21877),a=r(70252),s=r(95623),c=r(44197),d=r(3735),u=r(49551),l=r(55721),p=r(27885);function S(e,{groupId:t,revision:r}){if(!e.privateKey)throw new Error("PRIVATE_KEY_MISSING");if(!t)throw new Error("GROUP_ID_MISSING");if(!r)throw new Error("GROUP_REVISION_MISSING")}function g(e,t){return{itemIds:e.items.filter((({id:e,timestamp:r})=>!t.items.find((t=>t.itemId===e&&t.timestamp>=r)))).map((e=>e.id)),itemGroupIds:e.itemGroups.filter((({id:e,revision:r})=>!t.itemGroups.find((t=>t.groupId===e&&t.revision===r)))).map((e=>e.id)),userGroupIds:e.userGroups.filter((({id:e,revision:r})=>!t.userGroups.find((t=>t.groupId===e&&t.revision===r)))).map((e=>e.id))}}function m(e,t){const{items:r,itemGroups:o,userGroups:n}=e;return{items:t.items.filter((e=>r.find((t=>t.id===e.itemId)))),itemGroups:t.itemGroups.filter((e=>o.find((t=>t.id===e.groupId)))),userGroups:t.userGroups.filter((e=>n.find((t=>t.id===e.groupId))))}}function A(e,t){const r=(e,t,r)=>{const o=t.filter((t=>!e.find((e=>r(e)===r(t)))));return e.map((e=>t.find((t=>r(t)===r(e)))||e)).concat(o)};return{items:r(e.items,t.items,o.prop("itemId")),itemGroups:r(e.itemGroups,t.itemGroups,o.prop("groupId")),userGroups:r(e.userGroups,t.userGroups,o.prop("groupId"))}}t.getOutdatedSharingParams=g,t.getCleanSharingData=m,t.mergeSharingData=A,t.buildSharingData=async function(e,t,r,n,i){const a=m(n,i),s=g(n,a),c=o.unnest(o.values(s));return o.compose(o.equals(0),o.length)(c)?a:A(a,await v(e,t,r,s))};const y=(e,t,r)=>{const o=(0,p.getNodePremiumStatusSpaceData)(r),n=o.spaces.find((t=>Number(t.teamId)===e));if(!n)throw new Error("TEAM_NOT_FOUND");if(!(0,p.hasSpecialUserGroupAccessInSpace)(n.teamId,o))throw new Error("USER_DOES_NOT_HAVE_SPECIAL_USER_GROUP_ACCESS_FOR_TEAM");if(!t.privateKey)throw new Error("PRIVATE_KEY_MISSING")};function E(e,t,r){return(0,a.sendExceptionLog)({error:t}),s.Debugger.log(e,t),Promise.resolve({userGroups:[],error:{message:t.message,action:r}})}function f(e){return JSON.stringify(e.map((e=>e.Alias)))}function T(e,t){return e.map((e=>{if(!t[e.Alias])throw new Error(`User details not found for alias: ${e.Alias}`);return{Alias:e.Alias,Login:t[e.Alias].login,PublicKey:t[e.Alias].publicKey,Permission:e.Permission}}))}async function v(e,t,r,o){if(!(o.itemIds||o.itemGroupIds||o.userGroupIds))throw new Error("MISSING_PARAMETERS");const n={...o,type:"getSharing",sharingVersion:4},{itemErrors:i,items:a,itemGroupErrors:s,itemGroups:c,userGroupErrors:d,userGroups:u}=await e.sharing.get(t,r,n);if(i&&i.length)throw new Error(i[0].message);if(s&&s.length)throw new Error(s[0].message);if(d&&d.length)throw new Error(d[0].message);return{items:a,itemGroups:c,userGroups:u}}t.createUserGroup=function(e,t,r,o){return Promise.resolve().then((()=>(y(o.teamId,t,e.store),e.userGroup.makeUserGroupAdminItem().then((n=>Promise.all([e.userGroup.makeCreateUserGroupEvent(t,r,o,n),Promise.resolve(n)])))))).then((([n,i])=>e.userGroup.createUserGroup(t,r.teams[o.teamId],n).then((({userGroups:e,itemGroups:t})=>({userGroups:e,userGroupAdminItem:i,itemGroups:t}))))).catch((e=>E("Error while creating userGroup ",e,o)))},t.createSpecialUserGroup=function(e,t,r,o){const i={teamId:o,name:"_team_admin_user_group"};return Promise.resolve().then((()=>{y(o,t,e.store);const i=r.spaces.find((e=>Number(e.teamId)===o)).details.teamAdmins.map((e=>({Alias:e.login,Login:e.login,Permission:"admin",Status:e.login===t.login?n.SpaceStatus.Accepted:n.SpaceStatus.Pending}))),a=f(i);return e.userGroup.findExistingUsersByAliases({login:t.login,uki:t.uki,aliases:a}).then((e=>({findUserServiceResponse:e,members:i})))})).then((({findUserServiceResponse:r,members:o})=>{const n=T(o,r);return e.userGroup.makeCreateSpecialUserGroupEvent(t,i,n)})).then((r=>e.userGroup.createUserGroup(t,{teamId:String(o)},r))).then((({userGroups:e})=>e&&e.length&&e[0]))},t.createSpecialItemGroup=function(e,t,r,o){return Promise.resolve().then((()=>(y(r.teamId,t,e.store),e.itemGroup.makeCreateSpecialItemGroupEvent(t,r,o)))).then((r=>e.itemGroup.createSpecialItemGroup(t,r)))},t.deleteItemGroup=function(e,t,{groupId:r,revision:o}){return Promise.resolve().then((()=>(S(t,{groupId:r,revision:o}),e.itemGroup.makeDeleteItemGroupEvent(r,o).then((r=>e.itemGroup.deleteItemGroup(t,r)))))).catch((e=>(E("Error while deleting itemGroup ",e,{groupId:r,revision:o}),[])))},t.deleteUserGroup=function(e,t,r,o){const n=(0,c.findTeamForGroup)(r,o.groupId);return Promise.resolve().then((()=>{S(t,o);const{groupId:r,revision:i}=o,a=(n&&n.userGroupAdminItems||[]).find((e=>e.groupId===o.groupId)),s=n.specialItemGroup&&n.specialItemGroup.revision;return e.userGroup.makeDeleteUserGroupEvent(r,i,a.itemId,s)})).then((r=>e.userGroup.deleteUserGroup(t,n,r))).catch((e=>E("Error while deleting userGroup ",e,o)))},t.renameUserGroup=function(e,t,r){return Promise.resolve().then((()=>{S(t,r);const{groupId:o,revision:n,name:i}=r;return e.userGroup.makeRenameUserGroupEvent(o,n,i).then((r=>e.userGroup.renameUserGroup(t,r)))})).catch((e=>E("Error while renaming userGroup ",e,r)))},t.inviteUserGroupMembers=function(e,t,r,o,n){return Promise.resolve().then((()=>{if(S(t,o),0===o.users.length)throw new Error("USERS_NOT_SUPPLIED");const{login:i,uki:a}=t,s=JSON.stringify(o.users.map((e=>e.alias)));return e.userGroup.findUsersByAliases({login:i,uki:a,aliases:s}).then((i=>{const a=o.users.map((e=>{const t={Alias:e.alias,Permission:e.permission},r=i[e.alias];if(!r)return t;const{login:o,publicKey:n}=r;return o&&n?{...t,Login:o,PublicKey:n}:t})),{revision:s}=o,d=(0,c.getUserGroupAdminItem)(r,n.teamId.toString(),n.groupId);if(!d)throw new Error("USER_GROUP_ADMIN_ITEM_NOT_AVAILABLE");return e.userGroup.makeInviteMembersEventAsAdmin(d,s,t,a)})).then((r=>e.userGroup.inviteUserGroupMembers(t,r)))})).catch((e=>E("Error while inviteUserGroupMembers",new Error(`[SharingController] - inviteUserGroupMembers: ${e}`),o))).then((e=>Object.assign({refusedMembers:{}},e)))},t.revokeUserGroupMembers=async function(e,t,r){try{if(S(t,r),0===r.users.length)throw new Error("USERS_NOT_SUPPLIED");const{groupId:o,revision:n,users:i}=r,a=await e.userGroup.makeRevokeMembersEvent(o,n,i),{userGroups:s}=await e.userGroup.revokeUserGroupMembers(t,a);return{userGroups:s}}catch(e){return E("Error while revokeUserGroupMembers",e,r)}},t.extractAliasesFromMembers=f,t.computeUserGroupMember=T,t.getSharedData=v,t.updateUserGroupMembers=async function(e,t,r){if(S(t,r),0===r.users.length)throw new Error("USERS_NOT_SUPPLIED");const{login:o,uki:n}=t,{groupId:i,revision:a,users:s}=r,c=JSON.stringify(s.map((e=>e.alias))),d=await e.userGroup.findExistingUsersByAliases({login:o,uki:n,aliases:c}),u=s.map((e=>({Alias:e.alias,Login:d[e.alias].login,PublicKey:d[e.alias].publicKey,Permission:e.permission}))),l=await e.userGroup.makeUpdateMembersEvent(i,a,u),{userGroups:p}=await e.userGroup.updateUserGroupMembers(t,l);return{userGroups:p}},t.getFreshUserGroups=function(e,t,r){const{login:o,uki:n}=t;return v(e,o,n,{itemIds:[],itemGroupIds:[],userGroupIds:r.map((e=>e.groupId))}).then((e=>e.userGroups))},t.emptySessionResponse=function(e){return Promise.reject({error:{message:"SESSION_EMPTY",action:e}})},t.handleShareItemRequest=async function e(t,r,o,c,p=!0){const{storeService:S,applicationModulesAccess:g,sessionService:m,wsService:A}=t,{ITEM_DOESNT_EXIST:y,LIMIT_EXCEEDED:E,ITEM_HAS_ATTACHMENTS:f,SHARING_FAILED:T}=n.ShareItemFailureReason;await m.getInstance().user.requestNewSync(i.Trigger.Sharing);const v=S.getPersonalData(),_=(0,u.findDataModelObject)(r,v.credentials),I=v.notes.find((e=>e.Id===r)),C=v.secrets.find((e=>e.Id===r)),D=_||I||C;if(!D)return{success:!1,reason:y};const O=S.getSharingData().itemGroups.find((e=>e&&e.items&&!!e.items.find((e=>e.itemId===r)))),P=S.getState();if(!(0,l.isAllowedToShareSelector)(P))return{success:!1,reason:E};if(D.Attachments&&D.Attachments.length>0)return{success:!1,reason:f};try{O?await(0,d.shareAlreadySharedItem)(g,S,A,O,o,c):await(0,d.shareUnsharedItem)(g,S,A,D,o,c)}catch(n){if(!p||!h(n)){const e=new Error(`[SharingController] - handleShareItemRequest: ${n}`);return s.Debugger.log("ERROR",e),(0,a.sendExceptionLog)({error:e}),{success:!1,reason:T,message:`${e}`}}try{return await m.getInstance().user.requestNewSync(i.Trigger.Sharing),e(t,r,o,c,!1)}catch(e){const t=new Error(`[SharingController] - handleShareItemRequest (syncAndRetryOnConflict): ${e}`);return s.Debugger.log("ERROR",t),(0,a.sendExceptionLog)({error:t}),{success:!1,reason:T,message:`${t}`}}}return m.getInstance().user.requestNewSync(i.Trigger.Sharing),{success:!0}};const h=e=>{const t="INVALID_ITEM_GROUP_REVISION";return"getAdditionalInfo"in e&&e.getAdditionalInfo().webServiceSubMessage===t||e.message.includes(t)}},22652:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.config=void 0;const o=r(48584),n=r(28183);t.config={commands:{},queries:{getSharingUsers:{selector:o.viewedSharingUsersSelector},getSharingUserPermissionLevel:{selector:o.sharingUserPermissionLevelSelector}},liveQueries:{liveSharingUsers:{operator:n.sharingUsers$},liveSharingUserPermissionLevel:{operator:n.sharingUserPermissionLevel$}}}},28183:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.sharingUserPermissionLevel$=t.sharingUsers$=void 0;const o=r(18948),n=r(3343),i=r(48584),a=r(35893),s=r(33627);t.sharingUsers$=e=>{const t=(0,a.parseToken)(e),r=(0,i.createLiveSharingUsersSelector)(t.spaceId)(t.dataQuery);return(0,o.pipe)((0,n.map)(r),(0,n.distinctUntilChanged)(((e,t)=>(0,s.sameBatch)(e.items,t.items)&&e.matchingCount===t.matchingCount)))};t.sharingUserPermissionLevel$=e=>{const t=(0,i.getSharingUserPermissionLevelSelector)((0,a.parseToken)(e));return(0,o.pipe)((0,n.map)(t),(0,n.distinctUntilChanged)())}},7261:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getSharingUserMappers=void 0;t.getSharingUserMappers=()=>({id:e=>e.userId,itemCount:e=>e.itemCount})},70963:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.sharingUserMatch=t.searchGetters=void 0;const o=r(82234),n=r(64455);t.searchGetters=[(0,o.stringProp)("userId")],t.sharingUserMatch=(0,n.match)(t.searchGetters)},48584:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getSharingUserPermissionLevelSelector=t.sharingUserPermissionLevelSelector=t.createLiveSharingUsersSelector=t.viewedSharingUsersSelector=t.sharingUserMappersSelector=void 0;const o=r(16516),n=r(32034),i=r(63566),a=r(24589),s=r(97006),c=r(16593),d=r(7261),u=r(63925),l=r(70963),p=r(58107),S=r(89698),g=r(84511),m=e=>(0,n.createSelector)(S.acceptedItemGroupsSelector,c.userIdSelector,(e=>e),((t,r,o)=>(0,p.getSharingUsersFromItemGroups)(o,r,t,e)));t.sharingUserMappersSelector=()=>(0,d.getSharingUserMappers)();const A=()=>l.sharingUserMatch;t.viewedSharingUsersSelector=(e,r)=>{const n=(e=>{const r=m(e);return(0,a.getQuerySelector)(r,A,t.sharingUserMappersSelector)})(r.spaceId);return(0,o.compose)((0,i.viewListResults)(u.listView),n)(e,r.dataQuery)};t.createLiveSharingUsersSelector=e=>{const r=m(e);return(0,s.makeLiveSelectorGetter)(r,(()=>u.listView),A,t.sharingUserMappersSelector)};t.sharingUserPermissionLevelSelector=(e,{itemId:t,userId:r})=>{const o=(0,g.itemItemGroupSelector)(e,t);if(o)return(0,p.getSharingUserPermission)(o,r)};t.getSharingUserPermissionLevelSelector=({itemId:e,userId:r})=>o=>(0,t.sharingUserPermissionLevelSelector)(o,{itemId:e,userId:r})},63925:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.listView=t.detailView=void 0;const o=(0,r(16516).defaultTo)("");t.detailView=e=>({id:o(e.userId),itemCount:e.itemCount});t.listView=e=>e.map(t.detailView)},23944:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.config=void 0;const o=r(96247),n=r(79570),i=r(1190);t.config={commands:{},queries:{getUserGroups:{selector:o.viewedUserGroupsSelector},getUserGroup:{selector:o.viewedUserGroupSelector},getUserGroupMembers:{selector:i.viewedUserGroupMembersSelector}},liveQueries:{liveUserGroups:{operator:n.userGroups$}}}},779:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getUserDownloadMappers=void 0;t.getUserDownloadMappers=()=>({id:e=>e.userId})},79850:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.userDownloadMatch=t.searchGetters=void 0;const o=r(82234),n=r(64455);t.searchGetters=[(0,o.stringProp)("userId")],t.userDownloadMatch=(0,n.match)(t.searchGetters)},1190:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.viewedUserGroupMembersSelector=t.userDownloadMappersSelector=t.getUserGroupSelector=t.activeUserGroupsSelector=void 0;const o=r(32034),n=r(16516),i=r(24589),a=r(779),s=r(79850),c=r(63566),d=r(99729),u=r(52102),l=r(16593),p=r(58107);t.activeUserGroupsSelector=(0,o.createSelector)(u.sharingDataSelector,l.userIdSelector,((e,t)=>{const{userGroups:r}=e;return(0,p.findMyAcceptedUserGroups)(r,t)}));t.getUserGroupSelector=e=>(0,o.createSelector)(t.activeUserGroupsSelector,(t=>(0,p.findUserGroup)(t,e)));t.userDownloadMappersSelector=()=>(0,a.getUserDownloadMappers)();const S=()=>s.userDownloadMatch,g=e=>{const r=(e=>{const r=(0,t.getUserGroupSelector)(e);return(0,o.createSelector)(r,(e=>e?.users||[]))})(e);return(0,i.getQuerySelector)(r,S,t.userDownloadMappersSelector)};t.viewedUserGroupMembersSelector=(e,t)=>{const r=g(t.groupId);return(0,n.compose)((0,c.viewListResults)(d.listView),r)(e,t.dataQuery)}},99729:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.listView=t.detailView=void 0;const o=(0,r(16516).defaultTo)("");t.detailView=e=>({id:o(e.userId),permission:e.permission});t.listView=e=>e.map(t.detailView)},79570:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.userGroups$=void 0;const o=r(18948),n=r(3343),i=r(35893),a=r(96247),s=r(33627);t.userGroups$=e=>{const t=(0,i.parseToken)(e),r=(0,a.createLiveUserGroupsSelector)(t.spaceId)(t.dataQuery);return(0,o.pipe)((0,n.map)(r),(0,n.distinctUntilChanged)(((e,t)=>(0,s.sameBatch)(e.items,t.items)&&e.matchingCount===t.matchingCount)))}},95414:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getUserGroupMappers=void 0;t.getUserGroupMappers=()=>({name:e=>e.name,id:e=>e.groupId,itemCount:e=>e.itemCount})},10547:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.userGroupMatch=t.searchGetters=void 0;const o=r(82234),n=r(64455);t.searchGetters=[(0,o.stringProp)("name")],t.userGroupMatch=(0,n.match)(t.searchGetters)},96247:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getUserGroupPermissionLevelSelector=t.userGroupPermissionLevelSelector=t.viewedUserGroupSelector=t.createLiveUserGroupsSelector=t.viewedUserGroupsSelector=t.userGroupMappersSelector=t.createActiveUserGroupsSelector=void 0;const o=r(16516),n=r(32034),i=r(63566),a=r(24589),s=r(97006),c=r(16593),d=r(10547),u=r(95414),l=r(54719),p=r(52102),S=r(58107),g=r(84511);t.createActiveUserGroupsSelector=e=>(0,n.createSelector)(p.sharingDataSelector,c.userIdSelector,(e=>e),((t,r,o)=>{const{userGroups:n,itemGroups:i}=t;return(0,S.findMyAcceptedUserGroups)(n,r).map((t=>{const r=(0,S.findUserGroupItemGroups)(t.groupId,i).reduce(((t,r)=>null===e||(0,S.doesItemGroupExistInSpace)(o,r,e)?t+r.items.length:t),0);return{...t,itemCount:r}}))}));t.userGroupMappersSelector=()=>(0,u.getUserGroupMappers)();const m=()=>d.userGroupMatch;t.viewedUserGroupsSelector=(e,r)=>{const n=(e=>{const r=(0,t.createActiveUserGroupsSelector)(e);return(0,a.getQuerySelector)(r,m,t.userGroupMappersSelector)})(r.spaceId);return(0,o.compose)((0,i.viewListResults)(l.listView),n)(e,r.dataQuery)};t.createLiveUserGroupsSelector=e=>{const r=(0,t.createActiveUserGroupsSelector)(e);return(0,s.makeLiveSelectorGetter)(r,(()=>l.listView),m,t.userGroupMappersSelector)};t.viewedUserGroupSelector=(e,r)=>{const{itemGroups:o}=(0,p.sharingDataSelector)(e),n=(0,t.createActiveUserGroupsSelector)(null)(e),i=(0,S.findUserGroup)(n,r),a=(0,S.findUserGroupItemGroups)(i.groupId,o).length;if(i)return(0,l.detailView)({...i,itemCount:a})};t.userGroupPermissionLevelSelector=(e,{itemId:t,groupId:r})=>{const o=(0,g.itemItemGroupSelector)(e,t);return(0,S.getUserGroupPermission)(o,r)};t.getUserGroupPermissionLevelSelector=({itemId:e,groupId:r})=>o=>(0,t.userGroupPermissionLevelSelector)(o,{itemId:e,groupId:r})},54719:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.listView=t.detailView=void 0;const o=r(16516),n=r(99729),i=(0,o.defaultTo)("");t.detailView=e=>({name:i(e.name),id:i(e.groupId),users:(0,n.listView)(e.users||[]),itemCount:e.itemCount});t.listView=e=>e.map(t.detailView)},86833:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.bootstrap=void 0;const o=r(36768);t.bootstrap=e=>{e.register(o.config)}},43712:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.convertDashlaneXmlToItem=t.ConvertDashlaneXmlToErrorCode=void 0;const o=r(32626),n=r(61797),i=r(63985);var a;!function(e){e.INVALID_XML="INVALID_XML",e.NOT_AUTHENTICATED="NOT_AUTHENTICATED"}(a=t.ConvertDashlaneXmlToErrorCode||(t.ConvertDashlaneXmlToErrorCode={})),t.convertDashlaneXmlToItem=async function(e,t){const{storeService:r}=e;if(!r.isAuthenticated())return{success:!1,error:{code:a.NOT_AUTHENTICATED}};const{xml:s}=t;if(!s||""===s)return{success:!1,error:{code:a.INVALID_XML}};const{__type__:c,...d}=await(0,n.parseDashlaneXml)(s);let u={...d,kwType:d.kwType||c};return(0,o.isCredential)(u)?u=(0,i.fixCredentialTypesFromTransaction)(u):(0,o.isNote)(u)&&(u=(0,i.fixNoteTypesFromTransaction)(u)),{success:!0,item:u}}},67312:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.convertItemToDashlaneXml=t.ConvertItemToDashlaneXmlErrorCode=void 0;const o=r(61797);var n;!function(e){e.INVALID_XML="INVALID_XML",e.NOT_AUTHENTICATED="NOT_AUTHENTICATED"}(n=t.ConvertItemToDashlaneXmlErrorCode||(t.ConvertItemToDashlaneXmlErrorCode={})),t.convertItemToDashlaneXml=async function(e,t){const{storeService:r}=e;if(!r.isAuthenticated())return{success:!1,error:{code:n.NOT_AUTHENTICATED}};const{item:i}=t,a=(0,o.getDashlaneXml)(i);return a&&""!==a?{success:!0,xml:a}:{success:!1,error:{code:n.INVALID_XML}}}},95326:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.shareItem=t.ShareItemErrorCode=void 0;const o=r(70252),n=r(63623);var i;!function(e){e.NOT_AUTHENTICATED="NOT_AUTHENTICATED"}(i=t.ShareItemErrorCode||(t.ShareItemErrorCode={})),t.shareItem=async function(e,t){const{storeService:r}=e;if(!r.isAuthenticated())return{success:!1,error:{code:i.NOT_AUTHENTICATED}};try{const{itemId:r,permission:o,recipients:i}=t;return await(0,n.handleShareItemRequest)(e,r,o,i)}catch(e){const t=`[SessionController] - shareItem: ${e}`,r=new Error(t);return(0,o.sendExceptionLog)({error:r}),{success:!1,error:{code:t}}}}},33719:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.bootstrap=t.setupSubscriptions=void 0;const o=r(53858);Object.defineProperty(t,"setupSubscriptions",{enumerable:!0,get:function(){return o.setupSubscriptions}});var n=r(86833);Object.defineProperty(t,"bootstrap",{enumerable:!0,get:function(){return n.bootstrap}})},53858:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.setupSubscriptions=void 0;const o=r(78096);t.setupSubscriptions=async function(e,t){const{storeService:r,applicationModulesAccess:n}=t,{sharingInvites:i,sharingItems:a}=n.createClients();e.teamSpaceContentControlDone.on((e=>{(0,o.revokeRemoteControlledSharedItems)(r,a,i,e)}))}},83400:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.config=void 0;const o=r(85406),n=r(39003),i=r(98337);t.config={commands:{},queries:{getBanks:{staticDataHandler:o.getBanks},getAllBanks:{staticDataHandler:o.getAllBanks},getAllCallingCodes:{staticDataHandler:n.getAllCallingCodes},getSecureDocumentsExtensionsList:{staticDataHandler:i.getSecureDocumentsAllowedExtensions}},liveQueries:{}}},82912:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.banks=void 0;const o=r(32626);t.banks={[o.Country.AR]:[{localizedString:"Banco Credicoop",code:"BANCOCREDICOOP"},{localizedString:"Banco de la Nacin Argentina",code:"BANCODELANACIONARGEN"},{localizedString:"Banco Hipotecario",code:"BANCOHIPOTECARIO"},{localizedString:"Banco Ita Argentina",code:"BANCOITAUARGENTINA"},{localizedString:"Banco Macro",code:"BANCOMACRO"},{localizedString:"Banco Patagonia",code:"BANCOPATAGONIA"},{localizedString:"Banco Santander Ro",code:"BANCOSANTANDERRIO"},{localizedString:"Bank of the City of Buenos Aires",code:"BANKOFTHECITYOFBUENO"},{localizedString:"Bank of the Province of Buenos Aires",code:"BANKOFTHEPROVINCEOFB"},{localizedString:"BBVA Banco Francs",code:"BBVABANCOFRANCES"},{localizedString:"Central Bank of Argentina",code:"CENTRALBANKOFARGENTI"},{localizedString:"Citibank Argentina",code:"CITIBANKARGENTINA"},{localizedString:"Grupo Financiero Galicia",code:"GRUPOFINANCIEROGALIC"},{localizedString:"HSBC Bank Argentina",code:"HSBCBANKARGENTINA"},{localizedString:"Municipal Bank of Rosario",code:"MUNICIPALBANKOFROSAR"},{localizedString:"New Bank of Santa Fe",code:"NEWBANKOFSANTAFE"},{localizedString:"Other",code:"NO_TYPE"}],[o.Country.AT]:[{localizedString:"Adria Bank",code:"ADRIABANK"},{localizedString:"Allianz Investmentbank",code:"ALLIANZINVESTMENTBAN"},{localizedString:"Alpenbank",code:"ALPENBANK"},{localizedString:"American Express Bank Ltd",code:"AMERICANEXPRESSBANKL"},{localizedString:"Anglo Irish Bank",code:"ANGLOIRISHBANK"},{localizedString:"Austria Wirtschaftsservice Gesellschaft",code:"AUSTRIAWIRTSCHAFTSSE"},{localizedString:"Banco do Brasil",code:"BANCODOBRASIL"},{localizedString:"Bank Austria Creditanstalt",code:"BANKAUSTRIACREDITANS"},{localizedString:"Bank fr rzte und Freie Berufe",code:"BANKFURARZTEUNDFREIE"},{localizedString:"Bank fr Tirol und Vorarlberg",code:"BANKFURTIROLUNDVORAR"},{localizedString:"Bank Gutmann",code:"BANKGUTMANN"},{localizedString:"Bankhaus Carl Spngler & Co",code:"BANKHAUSCARLSPANGLER"},{localizedString:"Bankhaus Krentschker & Co",code:"BANKHAUSKRENTSCHKERC"},{localizedString:"Bankhaus Schelhammer & Schattera",code:"BANKHAUSSCHELHAMMERS"},{localizedString:"Bank Sal.Oppenheim jr. & Cie",code:"BANKSALOPPENHEIMJRCI"},{localizedString:"Bank Vontobel sterreich",code:"BANKVONTOBELOSTERREI"},{localizedString:"Bank Winter & Co",code:"BANKWINTERCO"},{localizedString:"Other",code:"NO_TYPE"},{localizedString:"Raiffeisen Bank",code:"RAIFFEISENBANK"}],[o.Country.AU]:[{localizedString:"AMP Bank Limited",code:"AMPBANKLIMITED"},{localizedString:"Australia and New Zealand Banking Group",code:"AUSTRALIAANDNEWZEALA"},{localizedString:"Auswide Bank",code:"AUSWIDEBANK"},{localizedString:"Bank Australia",code:"BANKAUSTRALIA"},{localizedString:"Bank of Melbourne",code:"BANKOFMELBOURNE"},{localizedString:"Bank of Queensland Limited",code:"BANKOFQUEENSLANDLIMI"},{localizedString:"Bank of Sydney",code:"BANKOFSYDNEY"},{localizedString:"Bank of Western Australia",code:"BANKOFWESTERNAUSTRAL"},{localizedString:"Bank SA",code:"BANKSA"},{localizedString:"BankVic",code:"BANKVIC"},{localizedString:"Bendigo and Adelaide Bank Limited",code:"BENDIGOANDADELAIDEBA"},{localizedString:"Beyond Bank Australia",code:"BEYONDBANKAUSTRALIA"},{localizedString:"Commonwealth Bank of Australia",code:"COMMONWEALTHBANKOFAU"},{localizedString:"Corporation (Australia) Limited",code:"CORPORATIONAUSTRALIA"},{localizedString:"Defence Bank",code:"DEFENCEBANK"},{localizedString:"Delphi Bank",code:"DELPHIBANK"},{localizedString:"G&C Mutual Bank",code:"GCMUTUALBANK"},{localizedString:"Heritage Bank",code:"HERITAGEBANK"},{localizedString:"Hume Bank",code:"HUMEBANK"},{localizedString:"IMB Bank",code:"IMBBANK"},{localizedString:"Macquarie Bank Limited",code:"MACQUARIEBANKLIMITED"},{localizedString:"Members Equity Bank Pty Limited",code:"MEMBERSEQUITYBANKPTY"},{localizedString:"MyState Bank",code:"MYSTATEBANK"},{localizedString:"National Australia Bank Limited",code:"NATIONALAUSTRALIABAN"},{localizedString:"Other",code:"NO_TYPE"},{localizedString:"P&N Bank",code:"PNBANK"},{localizedString:"Police Bank",code:"POLICEBANK"},{localizedString:"Queensland Teachers Mutual Bank (QTMB)",code:"QUEENSLANDTEACHERSMU"},{localizedString:"Rural Bank Limited",code:"RURALBANKLIMITED"},{localizedString:"St. George Bank Limited,",code:"STGEORGEBANKLIMITED"},{localizedString:"Suncorp-Metway Limited",code:"SUNCORPMETWAYLIMITED"},{localizedString:"Teachers Mutual Bank Limited",code:"TEACHERSMUTUALBANKLI"},{localizedString:"UBank, a division of National Australia Bank",code:"UBANKADIVISIONOFNATI"},{localizedString:"Victoria Teachers Mutual Bank",code:"VICTORIATEACHERSMUTU"},{localizedString:"Westpac Banking Corporation",code:"WESTPACBANKINGCORPOR"}],[o.Country.BE]:[{localizedString:"Argenta",code:"ARGENTA"},{localizedString:"Attijariwafa Bank Europe Belgium",code:"ATTIJARIWAFABANKEURO"},{localizedString:"AXA Bank",code:"AXABANK"},{localizedString:"Banca Monte Paschi Belgio",code:"BANCAMONTEPASCHIBELG"},{localizedString:"BBVA Blgica",code:"BBVABELGICA"},{localizedString:"Belfius Banque",code:"BELFIUSBANQUE"},{localizedString:"Beobank",code:"BEOBANK"},{localizedString:"BKCP Banque",code:"BKCPBANQUE"},{localizedString:"BNP Paribas Fortis",code:"BNPPARIBASFORTIS"},{localizedString:"bpost bank",code:"BPOSTBANK"},{localizedString:"Crelan",code:"CRELAN"},{localizedString:"Europabank",code:"EUROPABANK"},{localizedString:"Hello Bank!",code:"HELLOBANK"},{localizedString:"ING Belgium",code:"INGBELGIUM"},{localizedString:"KBC Bank",code:"KBCBANK"},{localizedString:"Keytrade Bank",code:"KEYTRADEBANK"},{localizedString:"Other",code:"NO_TYPE"},{localizedString:"Rabobank.be",code:"RABOBANKBE"},{localizedString:"Record Bank",code:"RECORDBANK"},{localizedString:"Santander Consumer Finance",code:"SANTANDERCONSUMERFIN"},{localizedString:"Triodos Bank Banque Triodos",code:"TRIODOSBANKBANQUETRI"},{localizedString:"VDK Spaarbank NV",code:"VDKSPAARBANKNV"}],[o.Country.BR]:[{localizedString:"Banco Bradesco Financiamentos",code:"BANCOBRADESCOFINANCI"},{localizedString:"Banco do Brasil",code:"BANCODOBRASIL"},{localizedString:"Banco do Estado do Rio Grande do Sul S/A",code:"BANCODOESTADODORIOGR"},{localizedString:"Banco Ita",code:"BANCOITAU"},{localizedString:"Banco J Safra S/A",code:"BANCOJSAFRASA"},{localizedString:"Banco PanAmericano S/A",code:"BANCOPANAMERICANOSA"},{localizedString:"Banco Santander",code:"BANCOSANTANDER"},{localizedString:"Caixa Econmica Federal",code:"CAIXAECONOMICAFEDERA"},{localizedString:"Citibank",code:"CITIBANK"},{localizedString:"HSBC",code:"HSBC"},{localizedString:"Other",code:"NO_TYPE"}],[o.Country.CA]:[{localizedString:"B2B Bank",code:"B2BBANK"},{localizedString:"Bank of Montreal",code:"BANKOFMONTREAL"},{localizedString:"Bank of Nova Scotia",code:"BANKOFNOVASCOTIA"},{localizedString:"Bridgewater Bank",code:"BRIDGEWATERBANK"},{localizedString:"Canadian Imperial Bank of Commerce",code:"CANADIANIMPERIALBANK"},{localizedString:"Canadian Tire Bank",code:"CANADIANTIREBANK"},{localizedString:"Canadian Western Bank",code:"CANADIANWESTERNBANK"},{localizedString:"CFF Bank",code:"CFFBANK"},{localizedString:"Citizens Bank of Canada",code:"CITIZENSBANKOFCANADA"},{localizedString:"Continental Bank of Canada",code:"CONTINENTALBANKOFCAN"},{localizedString:"CS Alterna Bank",code:"CSALTERNABANK"},{localizedString:"DirectCash Bank",code:"DIRECTCASHBANK"},{localizedString:"Equitable Bank",code:"EQUITABLEBANK"},{localizedString:"First Nations Bank of Canada",code:"FIRSTNATIONSBANKOFCA"},{localizedString:"General Bank of Canada",code:"GENERALBANKOFCANADA"},{localizedString:"Hollis Canadian Bank",code:"HOLLISCANADIANBANK"},{localizedString:"HomEquity Bank",code:"HOMEQUITYBANK"},{localizedString:"Laurentian Bank of Canada",code:"LAURENTIANBANKOFCANA"},{localizedString:"Manulife Bank of Canada",code:"MANULIFEBANKOFCANADA"},{localizedString:"National Bank of Canada",code:"NATIONALBANKOFCANADA"},{localizedString:"Other",code:"NO_TYPE"},{localizedString:"Pacific & Western Bank of Canada",code:"PACIFICWESTERNBANKOF"},{localizedString:"President's Choice Bank",code:"PRESIDENTSCHOICEBANK"},{localizedString:"RedBrick Bank",code:"REDBRICKBANK"},{localizedString:"Rogers Bank",code:"ROGERSBANK"},{localizedString:"Royal Bank of Canada",code:"ROYALBANKOFCANADA"},{localizedString:"Tangerine Bank",code:"TANGERINEBANK"},{localizedString:"Toronto-Dominion Bank",code:"TORONTODOMINIONBANK"},{localizedString:"Wealth One Bank of Canada",code:"WEALTHONEBANKOFCANAD"},{localizedString:"Zag Bank",code:"ZAGBANK"}],[o.Country.CH]:[{localizedString:"AIG Private Bank",code:"AIGPRIVATEBANK"},{localizedString:"Amtsersparniskasse Thun",code:"AMTSERSPARNISKASSETH"},{localizedString:"Anker Bank",code:"ANKERBANK"},{localizedString:"Arab Bank Switzerland",code:"ARABBANKSWITZERLAND"},{localizedString:"Banca dello Stato del Cantone Ticino",code:"BANCADELLOSTATODELCA"},{localizedString:"Bank Ehinger",code:"BANKEHINGER"},{localizedString:"Bank for International Settlements (BIS)",code:"BANKFORINTERNATIONAL"},{localizedString:"Bank Leu",code:"BANKLEU"},{localizedString:"Bankredit - Banca di Credito e Commercio",code:"BANKREDITBANCADICRED"},{localizedString:"Bank von Ernst",code:"BANKVONERNST"},{localizedString:"Banque Cantonale Vaudoise (BCV)",code:"BANQUECANTONALEVAUDO"},{localizedString:"Banque Diamantaire Anversoise",code:"BANQUEDIAMANTAIREANV"},{localizedString:"Banque Edouard Constant",code:"BANQUEEDOUARDCONSTAN"},{localizedString:"Banque Nationale Suisse - Banca Nazionale Svizzera",code:"BANQUENATIONALESUISS"},{localizedString:"Banque Piguet & Cie S.A.",code:"BANQUEPIGUETCIESA"},{localizedString:"Banque SCS Alliance",code:"BANQUESCSALLIANCE"},{localizedString:"BEKBnet/BCBE",code:"BEKBNETBCBE"},{localizedString:"BHE - Bank fr Handel & Effekten",code:"BHEBANKFURHANDELEFFE"},{localizedString:"BNP - Banque Nationale de Paris",code:"BNPBANQUENATIONALEDE"},{localizedString:"BSI - Banca della Svizzera Italiana",code:"BSIBANCADELLASVIZZER"},{localizedString:"Clariden Bank",code:"CLARIDENBANK"},{localizedString:"Crdit Lyonnais Suisse",code:"CREDITLYONNAISSUISSE"},{localizedString:"Credit Suisse",code:"CREDITSUISSE"},{localizedString:"Discount Bank Group (DBTC/DBSA)",code:"DISCOUNTBANKGROUPDBT"},{localizedString:"Habib Bank AG Zrich",code:"HABIBBANKAGZURICH"},{localizedString:"Hottinger & Cie",code:"HOTTINGERCIE"},{localizedString:"Maerki, Baumann & Co. AG, Privatbank",code:"MAERKIBAUMANNCOAGPRI"},{localizedString:"Migrosbank",code:"MIGROSBANK"},{localizedString:"Other",code:"NO_TYPE"},{localizedString:"Pictet & Cie",code:"PICTETCIE"},{localizedString:"Raiffeisen Internet",code:"RAIFFEISENINTERNET"},{localizedString:"Royal Bank of Canada",code:"ROYALBANKOFCANADA"},{localizedString:"SBC Warburg Dillon Read (WDR)",code:"SBCWARBURGDILLONREAD"},{localizedString:"Schwyzer Kantonalbank",code:"SCHWYZERKANTONALBANK"},{localizedString:"Skandia Bank",code:"SKANDIABANK"},{localizedString:"Solothurner Bank SoBa",code:"SOLOTHURNERBANKSOBA"},{localizedString:"Sparkassa Berneck",code:"SPARKASSABERNECK"},{localizedString:"St. Gallische Kantonalbank",code:"STGALLISCHEKANTONALB"},{localizedString:"Swiss Bank Corporation",code:"SWISSBANKCORPORATION"},{localizedString:"Thurgauer Kantonalbank",code:"THURGAUERKANTONALBAN"},{localizedString:"Union Bank of Switzerland",code:"UNIONBANKOFSWITZERLA"},{localizedString:"Wegelin & Co. Privatbankiers",code:"WEGELINCOPRIVATBANKI"},{localizedString:"Zuger Kantonalbank",code:"ZUGERKANTONALBANK"},{localizedString:"Zrcher Kantonalbank",code:"ZURCHERKANTONALBANK"}],[o.Country.CL]:[{localizedString:"Banco BICE",code:"BANCOBICE"},{localizedString:"Banco Bilbao Vizcaya Argentaria (BBVA)",code:"BANCOBILBAOVIZCAYAAR"},{localizedString:"Banco Consorcio",code:"BANCOCONSORCIO"},{localizedString:"Banco de Chile",code:"BANCODECHILE"},{localizedString:"Banco de Crdito e Inversiones",code:"BANCODECREDITOEINVER"},{localizedString:"Banco del Desarrollo",code:"BANCODELDESARROLLO"},{localizedString:"Banco del Estado de Chile",code:"BANCODELESTADODECHIL"},{localizedString:"Banco Edwards-Citi",code:"BANCOEDWARDSCITI"},{localizedString:"Banco Falabella",code:"BANCOFALABELLA"},{localizedString:"Banco Internacional",code:"BANCOINTERNACIONAL"},{localizedString:"Banco Ita-Chile",code:"BANCOITAUCHILE"},{localizedString:"Banco Paris",code:"BANCOPARIS"},{localizedString:"Banco Penta",code:"BANCOPENTA"},{localizedString:"Banco Ripley",code:"BANCORIPLEY"},{localizedString:"Banco Santander Chile",code:"BANCOSANTANDERCHILE"},{localizedString:"Banco Security",code:"BANCOSECURITY"},{localizedString:"Central Bank of Chile",code:"CENTRALBANKOFCHILE"},{localizedString:"Corpbanca",code:"CORPBANCA"},{localizedString:"Deutsche Bank Chile",code:"DEUTSCHEBANKCHILE"},{localizedString:"HSBC Bank Chile",code:"HSBCBANKCHILE"},{localizedString:"Other",code:"NO_TYPE"},{localizedString:"Rabobank",code:"RABOBANK"},{localizedString:"Scotiabank Sud Americano",code:"SCOTIABANKSUDAMERICA"}],[o.Country.CO]:[{localizedString:"AVVillas",code:"AVVILLAS"},{localizedString:"Banagrario",code:"BANAGRARIO"},{localizedString:"Bancama",code:"BANCAMIA"},{localizedString:"Banco de Bogot",code:"BANCODEBOGOTA"},{localizedString:"Banco de la Repblica",code:"BANCODELAREPUBLICA"},{localizedString:"Banco de Occidente",code:"BANCODEOCCIDENTE"},{localizedString:"Bancolombia",code:"BANCOLOMBIA"},{localizedString:"Banco Popular",code:"BANCOPOPULAR"},{localizedString:"Banco Santander",code:"BANCOSANTANDER"},{localizedString:"BBVA Colombia",code:"BBVACOLOMBIA"},{localizedString:"Caja Social",code:"CAJASOCIAL"},{localizedString:"Citibank Colombia",code:"CITIBANKCOLOMBIA"},{localizedString:"Colmena",code:"COLMENA"},{localizedString:"Colpatria",code:"COLPATRIA"},{localizedString:"Davivienda",code:"DAVIVIENDA"},{localizedString:"GBN Sudameris",code:"GBNSUDAMERIS"},{localizedString:"Helm",code:"HELM"},{localizedString:"HSBC Colombia",code:"HSBCCOLOMBIA"},{localizedString:"Other",code:"NO_TYPE"},{localizedString:"Procredit",code:"PROCREDIT"},{localizedString:"RBS Colombia",code:"RBSCOLOMBIA"}],[o.Country.DE]:[{localizedString:"BayernLB",code:"BAYERNLB"},{localizedString:"Commerzbank",code:"COMMERZBANK"},{localizedString:"Deutsche Bank",code:"DEUTSCHEBANK"},{localizedString:"DZ Bank",code:"DZBANK"},{localizedString:"Eurohypo AG",code:"EUROHYPOAG"},{localizedString:"HSH Nordbank",code:"HSHNORDBANK"},{localizedString:"HVB Group (HypoVereinsbank)",code:"HVBGROUPHYPOVEREINSB"},{localizedString:"Hypo Real Estate Group (HRE Group)",code:"HYPOREALESTATEGROUPH"},{localizedString:"Kfw Bankgruppe",code:"KFWBANKGRUPPE"},{localizedString:"Landesbank Baden-Wrttemberg",code:"LANDESBANKBADENWURTT"},{localizedString:"Landesbank Berlin (LBB)",code:"LANDESBANKBERLINLBB"},{localizedString:"Landesbank Hessen-Thringen (Helaba)",code:"LANDESBANKHESSENTHUR"},{localizedString:"Nord/LB (Norddeutsche Landesbank)",code:"NORDLBNORDDEUTSCHELA"},{localizedString:"Other",code:"NO_TYPE"},{localizedString:"N26",code:"NUMBERTWENTYSIX"},{localizedString:"Postbank AG",code:"POSTBANKAG"},{localizedString:"Sparkasse",code:"SPARKASSE"},{localizedString:"WGZ Bank (Westdeutsche Genossenschafts-Zentralbank)",code:"WGZBANKWESTDEUTSCHEG"}],[o.Country.DK]:[{localizedString:"Alm Brand Bank",code:"ALMBRANDBANK"},{localizedString:"Arbejdernes Landsbank",code:"ARBEJERNESLANDSBANK"},{localizedString:"Danske Bank",code:"DANSKEBANK"},{localizedString:"FIH Erhversbank",code:"FIHERHVERSBANK"},{localizedString:"Jyske Bank",code:"JYSKEBANK"},{localizedString:"Nordea",code:"NORDEA"},{localizedString:"Other",code:"NO_TYPE"},{localizedString:"Nykredit Bank",code:"NYKREDITBANK"},{localizedString:"Spar Nord Bank",code:"SPARNORDBANK"},{localizedString:"Syd Bank",code:"SYDBANK"},{localizedString:"Vestjysk Bank",code:"VESTJYSKBANK"}],[o.Country.EC]:[{localizedString:"Banco Amazonas",code:"BANCOAMAZONAS"},{localizedString:"Banco Bolivariano",code:"BANCOBOLIVARIANO"},{localizedString:"Banco Capital",code:"BANCOCAPITAL"},{localizedString:"Banco Cofiec",code:"BANCOCOFIEC"},{localizedString:"Banco Comercial de Manab",code:"BANCOCOMERCIALDEMANA"},{localizedString:"Banco Coopnacional",code:"BANCOCOOPNACIONAL"},{localizedString:"Banco de Guayaquil",code:"BANCODEGUAYAQUIL"},{localizedString:"Banco del Austro",code:"BANCODELAUSTRO"},{localizedString:"Banco Delbank",code:"BANCODELBANK"},{localizedString:"Banco del Litoral",code:"BANCODELLITORAL"},{localizedString:"Banco de Loja",code:"BANCODELOJA"},{localizedString:"Banco del Pacfico",code:"BANCODELPACIFICO"},{localizedString:"Banco de Machala",code:"BANCODEMACHALA"},{localizedString:"Banco D-Miro",code:"BANCODMIRO"},{localizedString:"Banco Finca",code:"BANCOFINCA"},{localizedString:"Banco General Rumiahui",code:"BANCOGENERALRUMINAHU"},{localizedString:"Banco Internacional",code:"BANCOINTERNACIONAL"},{localizedString:"Banco Pichincha",code:"BANCOPICHINCHA"},{localizedString:"Banco Promrica",code:"BANCOPROMERICA"},{localizedString:"Banco Solidario",code:"BANCOSOLIDARIO"},{localizedString:"Banco Sudamericano",code:"BANCOSUDAMERICANO"},{localizedString:"Citibank Ecuador",code:"CITIBANKECUADOR"},{localizedString:"Other",code:"NO_TYPE"},{localizedString:"ProCredit Bank",code:"PROCREDITBANK"},{localizedString:"Produbanco",code:"PRODUBANCO"}],[o.Country.ES]:[{localizedString:"Banca March",code:"BANCAMARCH"},{localizedString:"Banco Esfinge",code:"BANCOESFINGE"},{localizedString:"Banco Espritu Santo",code:"BANCOESPIRITUSANTO"},{localizedString:"Banco Fimestic",code:"BANCOFIMESTIC"},{localizedString:"Banco Inversin",code:"BANCOINVERSION"},{localizedString:"Banco Popular Espaol",code:"BANCOPOPULARESPANOL"},{localizedString:"Banco Sabadell",code:"BANCOSABADELL"},{localizedString:"Banco Santander",code:"BANCOSANTANDER"},{localizedString:"Bankia",code:"BANKIA"},{localizedString:"Bankinter",code:"BANKINTER"},{localizedString:"Bankpyme",code:"BANKPYME"},{localizedString:"Barclays Bank",code:"BARCLAYSBANK"},{localizedString:"BBVA",code:"BBVA"},{localizedString:"BCH Broker",code:"BCHBROKER"},{localizedString:"CaixaBank",code:"CAIXABANK"},{localizedString:"Citibank",code:"CITIBANK"},{localizedString:"Deutsche Bank",code:"DEUTSCHEBANK"},{localizedString:"E-Cortal",code:"ECORTAL"},{localizedString:"Fiare Banca tica pgina web de Fiare",code:"FIAREBANCAETICAPAGIN"},{localizedString:"Fibanc",code:"FIBANC"},{localizedString:"Fibane",code:"FIBANE"},{localizedString:"Ibercaja",code:"IBERCAJA"},{localizedString:"ING Direct",code:"INGDIRECT"},{localizedString:"InterCaja Social .ES",code:"INTERCAJASOCIALES"},{localizedString:"Merrill Lynch",code:"MERRILLLYNCH"},{localizedString:"Other",code:"NO_TYPE"},{localizedString:"Openbank",code:"OPENBANK"},{localizedString:"Salomon Smith Barney",code:"SALOMONSMITHBARNEY"},{localizedString:"Schroders",code:"SCHRODERS"},{localizedString:"Triodos Bank",code:"TRIODOSBANK"},{localizedString:"UNO-e",code:"UNOE"}],[o.Country.FI]:[{localizedString:"Aktia Savings Bank",code:"AKTIASAVINGSBANK"},{localizedString:"Bank of land",code:"BANKOFALAND"},{localizedString:"eQ Bank",code:"EQBANK"},{localizedString:"Evli Bank",code:"EVLIBANK"},{localizedString:"Helsinki OP Bank",code:"HELSINKIOPBANK"},{localizedString:"Kaupthing Bank",code:"KAUPTHINGBANK"},{localizedString:"Nordea Bank Finland",code:"NORDEABANKFINLAND"},{localizedString:"Other",code:"NO_TYPE"},{localizedString:"OP-Kotipankki",code:"OPKOTIPANKKI"},{localizedString:"Pohjola Bank",code:"POHJOLABANK"},{localizedString:"Sampo Bank",code:"SAMPOBANK"},{localizedString:"S-Bank",code:"SBANK"},{localizedString:"SEB Gyllenberg Private Bank",code:"SEBGYLLENBERGPRIVATE"},{localizedString:"Suomen AsuntoHypoPankki",code:"SUOMENASUNTOHYPOPANK"},{localizedString:"Tapiola Bank",code:"TAPIOLABANK"}],[o.Country.FR]:[{localizedString:"Axa Banque",code:"AXA"},{localizedString:"Banque Populaire",code:"BANQPOPUL"},{localizedString:"La Banque Postale",code:"BANQPOSTA"},{localizedString:"Banque Casino",code:"BANQUECASINO"},{localizedString:"Banque de France",code:"BANQUEDEFRANCE"},{localizedString:"Barclays",code:"BARCLAYS"},{localizedString:"BforBank",code:"BFORBANK"},{localizedString:"BNP Paribas",code:"BNP"},{localizedString:"Boursorama Banque",code:"BOURSORAMA"},{localizedString:"BRED",code:"BRED"},{localizedString:"Caisse d'pargne",code:"CAISSEEPAR"},{localizedString:"Carrefour-Banque",code:"CARREFOURBANQUE"},{localizedString:"CIC",code:"CIC"},{localizedString:"Crdit Mutuel de Bretagne",code:"CMB"},{localizedString:"Crdit Mutuel Nord Europe",code:"CMNE"},{localizedString:"Crdit Agricole",code:"CREDAGRIC"},{localizedString:"Crdit Coopratif",code:"CREDCOOPE"},{localizedString:"Crdit Foncier",code:"CREDFONCI"},{localizedString:"Crdit Mutuel",code:"CREDMUTUEL"},{localizedString:"Crdit du Nord",code:"CREDNORD"},{localizedString:"Fortuneo Banque",code:"FORTUNEOBANQUE"},{localizedString:"Groupama Banque",code:"GROUPAMA"},{localizedString:"HSBC",code:"HSBC"},{localizedString:"ING Direct",code:"INGDIRECT"},{localizedString:"LCL",code:"LCL"},{localizedString:"Autre",code:"NO_TYPE"},{localizedString:"Socit Gnrale",code:"SOGE"}],[o.Country.GB]:[{localizedString:"Barclays Bank",code:"BARCLAYS"},{localizedString:"Coutts",code:"COUTTS"},{localizedString:"HBOS",code:"HBOS"},{localizedString:"HSBC",code:"HSBC"},{localizedString:"Lloyds Banking Group",code:"LLOYDS"},{localizedString:"NatWest",code:"NATWEST"},{localizedString:"Other",code:"NO_TYPE"},{localizedString:"Royal Bank of Scotland (RBS)",code:"RBS"},{localizedString:"Santander",code:"SANTANDER"},{localizedString:"Standard Chartered",code:"STANDCHAR"},{localizedString:"Virgin Money",code:"VIRGINMONEY"},{localizedString:"Yorkshire Bank",code:"YORKSHIRE"},{localizedString:"Yorkshire Building Society",code:"YORKSHIREBS"}],[o.Country.GT]:[{localizedString:"Agromercantil",code:"AGROMERCANTIL"},{localizedString:"Azteca Bank",code:"AZTECABANK"},{localizedString:"BAC Bank",code:"BACBANK"},{localizedString:"Bank of Antigua",code:"BANKOFANTIGUA"},{localizedString:"Bantrab Bank",code:"BANTRABBANK"},{localizedString:"Citi Bank",code:"CITIBANK"},{localizedString:"Credito Hipotecario Bank",code:"CREDITOHIPOTECARIOBA"},{localizedString:"De Credito Bank",code:"DECREDITOBANK"},{localizedString:"Ficohsa Bank",code:"FICOHSABANK"},{localizedString:"G&T Continental Bank",code:"GTCONTINENTALBANK"},{localizedString:"Industrial bank",code:"INDUSTRIALBANK"},{localizedString:"Inmobiliario Bank",code:"INMOBILIARIOBANK"},{localizedString:"Internacional Bank",code:"INTERNACIONALBANK"},{localizedString:"Other",code:"NO_TYPE"},{localizedString:"Reformador Bank",code:"REFORMADORBANK"},{localizedString:"Vivibanco Bank",code:"VIVIBANCOBANK"}],[o.Country.HK]:[{localizedString:"Bank of China",code:"BANKOFCHINA"},{localizedString:"Bank of East Asia, The",code:"BANKOFEASTASIATHE"},{localizedString:"China CITIC Bank International",code:"CHINACITICBANKINTERN"},{localizedString:"China Construction Bank",code:"CHINACONSTRUCTIONBAN"},{localizedString:"Chiyu Banking Corporation",code:"CHIYUBANKINGCORPORAT"},{localizedString:"Chong Hing Bank",code:"CHONGHINGBANK"},{localizedString:"Citibank",code:"CITIBANK"},{localizedString:"Dah Sing Bank",code:"DAHSINGBANK"},{localizedString:"DBS Bank",code:"DBSBANK"},{localizedString:"Fubon Bank",code:"FUBONBANK"},{localizedString:"Hang Seng Bank",code:"HANGSENGBANK"},{localizedString:"Hongkong and Shanghai Banking Corporation, The",code:"HONGKONGANDSHANGHAIB"},{localizedString:"Industrial and Commercial Bank of China",code:"INDUSTRIALANDCOMMERC"},{localizedString:"Nanyang Commercial Bank",code:"NANYANGCOMMERCIALBAN"},{localizedString:"Other",code:"NO_TYPE"},{localizedString:"OCBC Wing Hang Bank",code:"OCBCWINGHANGBANK"},{localizedString:"Public Bank",code:"PUBLICBANK"},{localizedString:"Shanghai Commercial Bank",code:"SHANGHAICOMMERCIALBA"},{localizedString:"Standard Chartered Bank",code:"STANDARDCHARTEREDBAN"},{localizedString:"Tai Sang Bank",code:"TAISANGBANK"},{localizedString:"Tai Yau Bank",code:"TAIYAUBANK"},{localizedString:"Wing Lung Bank",code:"WINGLUNGBANK"}],[o.Country.IE]:[{localizedString:"ACC Bank",code:"ACCBANK"},{localizedString:"Allied Irish Banks",code:"ALLIEDIRISHBANKS"},{localizedString:"Anglo Irish Bank",code:"ANGLOIRISHBANK"},{localizedString:"Bank of Ireland",code:"BANKOFIRELAND"},{localizedString:"Barclays Bank Ireland",code:"BARCLAYSBANKIRELAND"},{localizedString:"Bear Stearns Bank",code:"BEARSTEARNSBANK"},{localizedString:"Capmark Bank Europe",code:"CAPMARKBANKEUROPE"},{localizedString:"Citibank Europe",code:"CITIBANKEUROPE"},{localizedString:"Fortis Prime Fund Solutions Bank",code:"FORTISPRIMEFUNDSOLUT"},{localizedString:"Goldman Sachs Bank",code:"GOLDMANSACHSBANK"},{localizedString:"Goldman Sachs Private Bank",code:"GOLDMANSACHSPRIVATEB"},{localizedString:"Helaba Dublin Landesbank Hessen-Thringen International",code:"HELABADUBLINLANDESBA"},{localizedString:"Hewlett-Packard International Bank",code:"HEWLETTPACKARDINTERN"},{localizedString:"Hypo Public Finance Bank",code:"HYPOPUBLICFINANCEBAN"},{localizedString:"Intesa Sanpaolo Bank Ireland",code:"INTESASANPAOLOBANKIR"},{localizedString:"Irish Life & Permanent",code:"IRISHLIFEPERMANENT"},{localizedString:"JP Morgan Bank",code:"JPMORGANBANK"},{localizedString:"KBC Bank Ireland",code:"KBCBANKIRELAND"},{localizedString:"LGT Bank",code:"LGTBANK"},{localizedString:"Merrill Lynch International Bank",code:"MERRILLLYNCHINTERNAT"},{localizedString:"Naspa Dublin",code:"NASPADUBLIN"},{localizedString:"Other",code:"NO_TYPE"},{localizedString:"Pfizer International Bank Europe",code:"PFIZERINTERNATIONALB"},{localizedString:"PFPC Bank",code:"PFPCBANK"}],[o.Country.IN]:[{localizedString:"ABN AMRO India",code:"ABNAMROINDIA"},{localizedString:"Abu Dhabi Commercial Bank India",code:"ABUDHABICOMMERCIALBA"},{localizedString:"Allahabad Bank",code:"ALLAHABADBANK"},{localizedString:"Andhra Bank",code:"ANDHRABANK"},{localizedString:"Axis Bank Limited",code:"AXISBANKLIMITED"},{localizedString:"Canara Bank",code:"CANARABANK"},{localizedString:"Central Bank of India",code:"CENTRALBANKOFINDIA"},{localizedString:"Centurion Bank of Punjab",code:"CENTURIONBANKOFPUNJA"},{localizedString:"Citibank India",code:"CITIBANKINDIA"},{localizedString:"Corporation Bank",code:"CORPORATIONBANK"},{localizedString:"DCB (Development Credit Bank Ltd)",code:"DCBDEVELOPMENTCREDIT"},{localizedString:"Dena Bank",code:"DENABANK"},{localizedString:"Deutsche Bank",code:"DEUTSCHEBANK"},{localizedString:"Guardian Souharda Sahakari Bank Niyamita",code:"GUARDIANSOUHARDASAHA"},{localizedString:"HDFC Bank",code:"HDFCBANK"},{localizedString:"IDBI Bank",code:"IDBIBANK"},{localizedString:"Indian Bank",code:"INDIANBANK"},{localizedString:"Indian Overseas Bank",code:"INDIANOVERSEASBANK"},{localizedString:"IndusInd Bank Ltd",code:"INDUSINDBANKLTD"},{localizedString:"ING Vysya Bank",code:"INGVYSYABANK"},{localizedString:"Maharshtra Bank",code:"MAHARSHTRABANK"},{localizedString:"Mandvi Bank",code:"MANDVIBANK"},{localizedString:"Other",code:"NO_TYPE"},{localizedString:"Oriental Bank of Commerce",code:"ORIENTALBANKOFCOMMER"},{localizedString:"Saraswat Bank",code:"SARASWATBANK"},{localizedString:"South Indian Bank",code:"SOUTHINDIANBANK"},{localizedString:"Standard Chartered Bank",code:"STANDARDCHARTEREDBAN"},{localizedString:"State Bank of Hyderabad",code:"STATEBANKOFHYDERABAD"},{localizedString:"State Bank of Saurashtra",code:"STATEBANKOFSAURASHTR"},{localizedString:"Syndicate Bank",code:"SYNDICATEBANK"},{localizedString:"The Federal Bank Ltd",code:"THEFEDERALBANKLTD"},{localizedString:"UCO Bank",code:"UCOBANK"},{localizedString:"Union Bank of India",code:"UNIONBANKOFINDIA"}],[o.Country.IT]:[{localizedString:"Banca Carige",code:"BANCACARIGE"},{localizedString:"Banca Pop. Milano",code:"BANCAPOPMILANO"},{localizedString:"Banco Popolare",code:"BANCOPOPOLARE"},{localizedString:"B Monte Paschi Siena",code:"BMONTEPASCHISIENA"},{localizedString:"Credito Emiliano",code:"CREDITOEMILIANO"},{localizedString:"Intesa Sanpaolo",code:"INTESASANPAOLO"},{localizedString:"Mediobanca",code:"MEDIOBANCA"},{localizedString:"Other",code:"NO_TYPE"},{localizedString:"Ubi Banca",code:"UBIBANCA"},{localizedString:"Unicredit - Capitalia",code:"UNICREDITCAPITALIA"}],[o.Country.JP]:[{localizedString:"Chiba Kgy Bank",code:"CHIBAKOGYOBANK"},{localizedString:"Mitsubishi UFJ Financial Group",code:"MITSUBISHIUFJFINANCI"},{localizedString:"Mitsubishi UFJ Trust and Banking Corporation",code:"MITSUBISHIUFJTRUSTAN"},{localizedString:"Mizuho Bank",code:"MIZUHOBANK"},{localizedString:"Mizuho Corporate Bank",code:"MIZUHOCORPORATEBANK"},{localizedString:"Mizuho Financial Group",code:"MIZUHOFINANCIALGROUP"},{localizedString:"Mizuho Trust & Banking Co.",code:"MIZUHOTRUSTBANKINGCO"},{localizedString:"Other",code:"NO_TYPE"},{localizedString:"Sumitomo Mitsui Banking Corporation",code:"SUMITOMOMITSUIBANKIN"},{localizedString:"Sumitomo Mitsui Financial Group",code:"SUMITOMOMITSUIFINANC"},{localizedString:"The Bank of Tokyo-Mitsubishi UFJ",code:"THEBANKOFTOKYOMITSUB"},{localizedString:"The Master Trust Bank of Japan",code:"THEMASTERTRUSTBANKOF"},{localizedString:"The Sensh Bank",code:"THESENSHUBANK"},{localizedString:"Trust & Custody Services Bank",code:"TRUSTCUSTODYSERVICES"}],[o.Country.LU]:[{localizedString:"Banque et Caisse d'Epargne de l'Etat, Luxembourg (BCEE)",code:"BANQUEETCAISSEDEPARG"},{localizedString:"Banque Gnrale du Luxembourg",code:"BANQUEGENERALEDULUXE"},{localizedString:"Banque IPPA et Associes Luxembourg",code:"BANQUEIPPAETASSOCIES"},{localizedString:"Banque UCL",code:"BANQUEUCL"},{localizedString:"Die Sparkasse Bremen",code:"DIESPARKASSEBREMEN"},{localizedString:"KBL",code:"KBL"},{localizedString:"Other",code:"NO_TYPE"},{localizedString:"Robeco Bank",code:"ROBECOBANK"},{localizedString:"SGZ-Bank International",code:"SGZBANKINTERNATIONAL"},{localizedString:"WestLB International",code:"WESTLBINTERNATIONAL"}],[o.Country.MX]:[{localizedString:"Banamex",code:"BANAMEX"},{localizedString:"Banca Afirme",code:"BANCAAFIRME"},{localizedString:"Banco Azteca",code:"BANCOAZTECA"},{localizedString:"Banco del Bajio",code:"BANCODELBAJIO"},{localizedString:"Banco J.P. Morgan",code:"BANCOJPMORGAN"},{localizedString:"Bank of America Mexico",code:"BANKOFAMERICAMEXICO"},{localizedString:"Banorte",code:"BANORTE"},{localizedString:"BanRegio",code:"BANREGIO"},{localizedString:"BBVA Bancomer",code:"BBVABANCOMER"},{localizedString:"Deutsche Bank Mexico",code:"DEUTSCHEBANKMEXICO"},{localizedString:"HSBC Mexico",code:"HSBCMEXICO"},{localizedString:"Inbursa",code:"INBURSA"},{localizedString:"ING Bank Mexico",code:"INGBANKMEXICO"},{localizedString:"Interacciones",code:"INTERACCIONES"},{localizedString:"Invex Controladora",code:"INVEXCONTROLADORA"},{localizedString:"Ixe Banco",code:"IXEBANCO"},{localizedString:"Mifel",code:"MIFEL"},{localizedString:"Monex",code:"MONEX"},{localizedString:"Other",code:"NO_TYPE"},{localizedString:"Santander Mexico",code:"SANTANDERMEXICO"},{localizedString:"Scotiabank Inverlat",code:"SCOTIABANKINVERLAT"}],[o.Country.NL]:[{localizedString:"ABN Amro",code:"ABNAMRO"},{localizedString:"Amsterdam Trade Bank",code:"AMSTERDAMTRADEBANK"},{localizedString:"ASN Bank",code:"ASNBANK"},{localizedString:"Bank Mendes Gans",code:"BANKMENDESGANS"},{localizedString:"Bank Nederlandse Gemeenten",code:"BANKNEDERLANDSEGEMEE"},{localizedString:"BinckBank",code:"BINCKBANK"},{localizedString:"Bunq",code:"BUNQ"},{localizedString:"Credit Europe Bank",code:"CREDITEUROPEBANK"},{localizedString:"Demir Halk Bank",code:"DEMIRHALKBANK"},{localizedString:"Friesland Bank",code:"FRIESLANDBANK"},{localizedString:"GE Artesia Bank",code:"GEARTESIABANK"},{localizedString:"ING Group",code:"INGGROUP"},{localizedString:"Kempen & Co",code:"KEMPENCO"},{localizedString:"Nederlandse Waterschapsbank",code:"NEDERLANDSEWATERSCHA"},{localizedString:"Netherlands Development Finance Company",code:"NETHERLANDSDEVELOPME"},{localizedString:"NIBC Bank",code:"NIBCBANK"},{localizedString:"Other",code:"NO_TYPE"},{localizedString:"Rabobank",code:"RABOBANK"},{localizedString:"SNS Bank",code:"SNSBANK"},{localizedString:"Triodos Bank",code:"TRIODOSBANK"},{localizedString:"Van Lanschot",code:"VANLANSCHOT"}],[o.Country.NO]:[{localizedString:"Bolig- og Nringsbanken",code:"BOLIGOGNAERINGSBANKE"},{localizedString:"Cresco",code:"CRESCO"},{localizedString:"DnB NOR Bank",code:"DNBNORBANK"},{localizedString:"Fokus Bank",code:"FOKUSBANK"},{localizedString:"Landkreditt Bank",code:"LANDKREDITTBANK"},{localizedString:"Netfonds Bank",code:"NETFONDSBANK"},{localizedString:"Nordea Bank Norge",code:"NORDEABANKNORGE"},{localizedString:"Nordlandsbanken",code:"NORDLANDSBANKEN"},{localizedString:"Other",code:"NO_TYPE"},{localizedString:"Pareto Bank",code:"PARETOBANK"},{localizedString:"Santander Consumer Bank",code:"SANTANDERCONSUMERBAN"},{localizedString:"SEB Privatbanken",code:"SEBPRIVATBANKEN"},{localizedString:"Storebrand Bank",code:"STOREBRANDBANK"},{localizedString:"Verdibanken",code:"VERDIBANKEN"},{localizedString:"Voss Veksel- og Landmandsbank",code:"VOSSVEKSELOGLANDMAND"},{localizedString:"yA Bank",code:"YABANK"}],[o.Country.NZ]:[{localizedString:"ANZ Bank of New Zealand Limited",code:"ANZBANKOFNEWZEALANDL"},{localizedString:"ASB Bank Limited",code:"ASBBANKLIMITED"},{localizedString:"Australia and New Zealand Banking Group",code:"AUSTRALIAANDNEWZEALA"},{localizedString:"Bank of Baroda (New Zealand) Limited",code:"BANKOFBARODANEWZEALA"},{localizedString:"Bank of China (New Zealand) Limited",code:"BANKOFCHINANEWZEALAN"},{localizedString:"Bank of India (New Zealand) Limited",code:"BANKOFINDIANEWZEALAN"},{localizedString:"Bank of New Zealand",code:"BANKOFNEWZEALAND"},{localizedString:"China Construction Bank",code:"CHINACONSTRUCTIONBAN"},{localizedString:"Citibank N.A.",code:"CITIBANKNA"},{localizedString:"Commonwealth Bank of Australia",code:"COMMONWEALTHBANKOFAU"},{localizedString:"Deutsche Bank AG",code:"DEUTSCHEBANKAG"},{localizedString:"Heartland Bank Limited",code:"HEARTLANDBANKLIMITED"},{localizedString:"ICBC",code:"ICBC"},{localizedString:"JPMorgan Chase Bank N.A.",code:"JPMORGANCHASEBANKNA"},{localizedString:"Kiwibank Limited",code:"KIWIBANKLIMITED"},{localizedString:"Kookmin Bank",code:"KOOKMINBANK"},{localizedString:"Other",code:"NO_TYPE"},{localizedString:"Rabobank Nederland",code:"RABOBANKNEDERLAND"},{localizedString:"Rabobank New Zealand Limited",code:"RABOBANKNEWZEALANDLI"},{localizedString:"Southland Building Society",code:"SOUTHLANDBUILDINGSOC"},{localizedString:"The Bank of Tokyo-Mitsubishi UFJ",code:"THEBANKOFTOKYOMITSUB"},{localizedString:"The Co-operative Bank Limited",code:"THECOOPERATIVEBANKLI"},{localizedString:"The Hongkong and Shanghai Banking Corp",code:"THEHONGKONGANDSHANGH"},{localizedString:"TSB Bank Limited",code:"TSBBANKLIMITED"},{localizedString:"Westpac Banking Corporation",code:"WESTPACBANKINGCORPOR"},{localizedString:"Westpac New Zealand Limited",code:"WESTPACNEWZEALANDLIM"}],[o.Country.PE]:[{localizedString:"Agrobanco",code:"AGROBANCO"},{localizedString:"Banco Azteca",code:"BANCOAZTECA"},{localizedString:"Banco Central de Reserva del Per",code:"BANCOCENTRALDERESERV"},{localizedString:"Banco de Comercio",code:"BANCODECOMERCIO"},{localizedString:"Banco del Trabajo",code:"BANCODELTRABAJO"},{localizedString:"Banco de Materiales",code:"BANCODEMATERIALES"},{localizedString:"Banco Falabella",code:"BANCOFALABELLA"},{localizedString:"Banco Financiero",code:"BANCOFINANCIERO"},{localizedString:"Banco Interamericano de Finanzas",code:"BANCOINTERAMERICANOD"},{localizedString:"Banco Ripley",code:"BANCORIPLEY"},{localizedString:"BBVA",code:"BBVA"},{localizedString:"BCP",code:"BCP"},{localizedString:"Citibank",code:"CITIBANK"},{localizedString:"Deutsche Bank",code:"DEUTSCHEBANK"},{localizedString:"HSBC",code:"HSBC"},{localizedString:"Interbank",code:"INTERBANK"},{localizedString:"Mibanco",code:"MIBANCO"},{localizedString:"Other",code:"NO_TYPE"},{localizedString:"Santander",code:"SANTANDER"},{localizedString:"Scotiabank",code:"SCOTIABANK"},{localizedString:"Standard Chartered",code:"STANDARDCHARTERED"}],[o.Country.PH]:[{localizedString:"Al-Amanah Islamic Investment Bank of the Philippines",code:"ALAMANAHISLAMICINVES"},{localizedString:"Asia United Bank",code:"ASIAUNITEDBANK"},{localizedString:"Australia and New Zealand Banking Group",code:"AUSTRALIAANDNEWZEALA"},{localizedString:"Bangkok Bank",code:"BANGKOKBANK"},{localizedString:"Bank of America, N.A.",code:"BANKOFAMERICANA"},{localizedString:"Bank of China",code:"BANKOFCHINA"},{localizedString:"Bank of Commerce",code:"BANKOFCOMMERCE"},{localizedString:"Bank of the Philippine Islands",code:"BANKOFTHEPHILIPPINEI"},{localizedString:"BDO Private Bank",code:"BDOPRIVATEBANK"},{localizedString:"BDO Unibank",code:"BDOUNIBANK"},{localizedString:"Chinabank",code:"CHINABANK"},{localizedString:"Citibank",code:"CITIBANK"},{localizedString:"CTBC Bank",code:"CTBCBANK"},{localizedString:"Deutsche Bank",code:"DEUTSCHEBANK"},{localizedString:"Development Bank of the Philippines",code:"DEVELOPMENTBANKOFTHE"},{localizedString:"EastWest Bank",code:"EASTWESTBANK"},{localizedString:"ING Group",code:"INGGROUP"},{localizedString:"JPMorgan Chase",code:"JPMORGANCHASE"},{localizedString:"Land Bank of the Philippines",code:"LANDBANKOFTHEPHILIPP"},{localizedString:"Maybank Philippines, Inc.",code:"MAYBANKPHILIPPINESIN"},{localizedString:"Mega International Commercial Bank",code:"MEGAINTERNATIONALCOM"},{localizedString:"Metropolitan Bank and Trust Company",code:"METROPOLITANBANKANDT"},{localizedString:"Mizuho Bank, Ltd.",code:"MIZUHOBANKLTD"},{localizedString:"Other",code:"NO_TYPE"},{localizedString:"Philippine Bank of Communications",code:"PHILIPPINEBANKOFCOMM"},{localizedString:"Philippine National Bank",code:"PHILIPPINENATIONALBA"},{localizedString:"Philippine Veterans Bank",code:"PHILIPPINEVETERANSBA"},{localizedString:"Philtrust Bank",code:"PHILTRUSTBANK"},{localizedString:"Rizal Commercial Banking Corporation",code:"RIZALCOMMERCIALBANKI"},{localizedString:"Robinsons Bank",code:"ROBINSONSBANK"},{localizedString:"Security Bank",code:"SECURITYBANK"},{localizedString:"Standard Chartered Bank",code:"STANDARDCHARTEREDBAN"},{localizedString:"The Bank of Tokyo-Mitsubishi UFJ, Ltd.",code:"THEBANKOFTOKYOMITSUB"},{localizedString:"The Hongkong and Shanghai Banking Corporation",code:"THEHONGKONGANDSHANGH"},{localizedString:"Union Bank of the Philippines",code:"UNIONBANKOFTHEPHILIP"},{localizedString:"United Coconut Planters Bank",code:"UNITEDCOCONUTPLANTER"}],[o.Country.PT]:[{localizedString:"Atlantico - Banco Portugus do Atlntico",code:"ATLANTICOBANCOPORTUG"},{localizedString:"Banco 7",code:"BANCO7"},{localizedString:"Banco BPI",code:"BANCOBPI"},{localizedString:"Banco Comercial Portugus",code:"BANCOCOMERCIALPORTUG"},{localizedString:"Banco de Portugal",code:"BANCODEPORTUGAL"},{localizedString:"Banco Espirito Santo",code:"BANCOESPIRITOSANTO"},{localizedString:"Banco Internacional de Crdito, S.A.",code:"BANCOINTERNACIONALDE"},{localizedString:"Banco Mello",code:"BANCOMELLO"},{localizedString:"Banif - Banco Internacional do Funchal",code:"BANIFBANCOINTERNACIO"},{localizedString:"Barclays Netbanking Portugal",code:"BARCLAYSNETBANKINGPO"},{localizedString:"Caixa Geral de Depsitos",code:"CAIXAGERALDEDEPOSITO"},{localizedString:"Cisf - Banco de Investimento, S.A.",code:"CISFBANCODEINVESTIME"},{localizedString:"Other",code:"NO_TYPE"}],[o.Country.SE]:[{localizedString:"ABN AMRO Bank Sweden",code:"ABNAMROBANKSWEDEN"},{localizedString:"First Baltic Savings",code:"FIRSTBALTICSAVINGS"},{localizedString:"FreningsSparbanken (Swedbank)",code:"FORENINGSSPARBANKENS"},{localizedString:"JP Bank",code:"JPBANK"},{localizedString:"Nordbanken",code:"NORDBANKEN"},{localizedString:"Other",code:"NO_TYPE"},{localizedString:"stgta Enskilda Bank",code:"OSTGOTAENSKILDABANK"},{localizedString:"Skandia Banken",code:"SKANDIABANKEN"},{localizedString:"Skandinaviska Enskilda Banken",code:"SKANDINAVISKAENSKILD"},{localizedString:"Sparbanken Sverige - Swedbank",code:"SPARBANKENSVERIGESWE"},{localizedString:"Stadshypotek",code:"STADSHYPOTEK"},{localizedString:"Svenska Handelsbanken-SHB",code:"SVENSKAHANDELSBANKEN"},{localizedString:"Sveriges Riksbank",code:"SVERIGESRIKSBANK"},{localizedString:"Trygg Hansa",code:"TRYGGHANSA"},{localizedString:"Westra Wermlands Sparbank",code:"WESTRAWERMLANDSSPARB"}],[o.Country.SG]:[{localizedString:"Bank of America",code:"BANKOFAMERICA"},{localizedString:"Barclays bank",code:"BARCLAYSBANK"},{localizedString:"Citibank",code:"CITIBANK"},{localizedString:"Developmental Bank of Singapore",code:"DEVELOPMENTALBANKOFS"},{localizedString:"HSBC",code:"HSBC"},{localizedString:"Other",code:"NO_TYPE"},{localizedString:"OCBC Bank",code:"OCBCBANK"},{localizedString:"Post Office Savings Bank",code:"POSTOFFICESAVINGSBAN"},{localizedString:"Standard Chartered Bank",code:"STANDARDCHARTEREDBAN"},{localizedString:"State Bank of India",code:"STATEBANKOFINDIA"},{localizedString:"United Overseas Bank",code:"UNITEDOVERSEASBANK"}],[o.Country.US]:[{localizedString:"Ally Bank",code:"ALLY"},{localizedString:"American Express",code:"AMERICANEXPRESS"},{localizedString:"Associated Bank",code:"ASSOCIATED"},{localizedString:"Bank of the West",code:"BANKWEST"},{localizedString:"Barclays Bank",code:"BARCLAYS"},{localizedString:"BMO Harris Bank",code:"BMO"},{localizedString:"Bank of America",code:"BOA"},{localizedString:"Branch Banking and Trust Company",code:"BRANCH"},{localizedString:"Capital One",code:"CAPITALONE"},{localizedString:"Charles Schwab Bank",code:"CHARSCHWA"},{localizedString:"Chase Bank USA",code:"CHASE"},{localizedString:"Citibank",code:"CITIBANK"},{localizedString:"Citizens Bank of Pennsylvania",code:"CITIZENS"},{localizedString:"City National Bank",code:"CITYNATIONAL"},{localizedString:"Compass Bank",code:"COMPASS"},{localizedString:"CU Hawaii",code:"CUHAWAII"},{localizedString:"Discover Bank",code:"DISCOVER"},{localizedString:"E-Trade Bank",code:"ETRADE"},{localizedString:"Fifth Third Bank",code:"FIFTHTHIRD"},{localizedString:"First-Citizens Bank and Trust Company",code:"FIRSTCITIZENS"},{localizedString:"Fortune Bank",code:"FORTUNEBANK"},{localizedString:"Harris National Association",code:"HARRIS"},{localizedString:"HSBC Bank USA",code:"HSBC"},{localizedString:"Hudson City Savings Bank",code:"HUDSONCITY"},{localizedString:"The Huntington National Bank",code:"HUNTINGTON"},{localizedString:"ING Bank, fsb",code:"INGBANK"},{localizedString:"JPMorgan Chase Bank",code:"JPMORGAN"},{localizedString:"Keybank",code:"KEYBANK"},{localizedString:"Manufacturers and Traders Trust Company",code:"MANUFACTUR"},{localizedString:"Other",code:"NO_TYPE"},{localizedString:"New York Community Bank",code:"NYCOMMUNITY"},{localizedString:"The Bank of New York Mellon",code:"NYMELLON"},{localizedString:"PNC Bank",code:"PNC"},{localizedString:"Banco Popular de Puerto Rico",code:"PUERTORICO"},{localizedString:"RBC Bank",code:"RBC"},{localizedString:"RBS Citizens",code:"RBS"},{localizedString:"Regions Bank",code:"REGIONS"},{localizedString:"Sovereign Bank",code:"SOVEREIGN"},{localizedString:"State Street Bank and Trust Co.",code:"STATESTREET"},{localizedString:"SunTrust Bank",code:"SUNTRUST"},{localizedString:"Silicon Valley Bank",code:"SVB"},{localizedString:"Synovus Bank",code:"SYNOVUS"},{localizedString:"TD Bank",code:"TDBANK"},{localizedString:"UBS Bank",code:"UBS"},{localizedString:"Union Bank",code:"UNION"},{localizedString:"USAA Federal Savings Bank",code:"USAAFEDERAL"},{localizedString:"U.S. Bank",code:"USBANK"},{localizedString:"Wells Fargo",code:"WELLSFARGO"}],[o.Country.VE]:[{localizedString:"100% Banco",code:"100BANCO"},{localizedString:"Bancaribe",code:"BANCARIBE"},{localizedString:"Banco Bicentenario",code:"BANCOBICENTENARIO"},{localizedString:"Banco de Venezuela",code:"BANCODEVENEZUELA"},{localizedString:"Banco Industrial de Venezuela",code:"BANCOINDUSTRIALDEVEN"},{localizedString:"Banco Mercantil",code:"BANCOMERCANTIL"},{localizedString:"Banco Nacional de Crdito",code:"BANCONACIONALDECREDI"},{localizedString:"Banco Occidental de Descuento",code:"BANCOOCCIDENTALDEDES"},{localizedString:"Banco Venezolano de Crdito",code:"BANCOVENEZOLANODECRE"},{localizedString:"Bandes",code:"BANDES"},{localizedString:"Banesco",code:"BANESCO"},{localizedString:"BBVA Provincial",code:"BBVAPROVINCIAL"},{localizedString:"Central Bank of Venezuela",code:"CENTRALBANKOFVENEZUE"},{localizedString:"Fondo Comn",code:"FONDOCOMUN"},{localizedString:"Other",code:"NO_TYPE"},{localizedString:"Sofitasa",code:"SOFITASA"},{localizedString:"Women's Development Bank",code:"WOMENSDEVELOPMENTBAN"}],[o.Country.ZA]:[{localizedString:"Absa",code:"ABSA"},{localizedString:"Capitec Banking Group",code:"CAPITECBANKINGGROUP"},{localizedString:"FNB",code:"FNB"},{localizedString:"Investec Bank",code:"INVESTECBANK"},{localizedString:"Nedbank",code:"NEDBANK"},{localizedString:"Other",code:"NO_TYPE"},{localizedString:"Standard Bank",code:"STANDARDBANK"}]}},85406:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getAllBanks=t.getBanks=void 0;const o=r(82912);t.getBanks=function(e){return{banks:o.banks[e.country]}},t.getAllBanks=function(){return o.banks}},43651:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0});const o=r(32626);t.default={[o.Country.AD]:376,[o.Country.AE]:971,[o.Country.AF]:93,[o.Country.AG]:1268,[o.Country.AI]:1264,[o.Country.AL]:355,[o.Country.AM]:374,[o.Country.AO]:244,[o.Country.AQ]:672,[o.Country.AR]:54,[o.Country.AS]:1684,[o.Country.AT]:43,[o.Country.AU]:61,[o.Country.AW]:297,[o.Country.AX]:358,[o.Country.AZ]:994,[o.Country.BA]:387,[o.Country.BB]:1246,[o.Country.BD]:880,[o.Country.BE]:32,[o.Country.BF]:226,[o.Country.BG]:359,[o.Country.BH]:973,[o.Country.BI]:257,[o.Country.BJ]:229,[o.Country.BL]:590,[o.Country.BM]:1441,[o.Country.BN]:673,[o.Country.BO]:591,[o.Country.BR]:55,[o.Country.BS]:1242,[o.Country.BT]:975,[o.Country.BW]:267,[o.Country.BY]:375,[o.Country.BZ]:501,[o.Country.CA]:1,[o.Country.CC]:61,[o.Country.CD]:243,[o.Country.CF]:236,[o.Country.CG]:242,[o.Country.CH]:41,[o.Country.CI]:225,[o.Country.CK]:682,[o.Country.CL]:56,[o.Country.CM]:237,[o.Country.CN]:86,[o.Country.CO]:57,[o.Country.CR]:506,[o.Country.CU]:53,[o.Country.CV]:238,[o.Country.CX]:61,[o.Country.CY]:357,[o.Country.CZ]:420,[o.Country.DE]:49,[o.Country.DJ]:253,[o.Country.DK]:45,[o.Country.DM]:1767,[o.Country.DO]:1849,[o.Country.DZ]:213,[o.Country.EC]:593,[o.Country.EE]:372,[o.Country.EG]:20,[o.Country.ER]:291,[o.Country.ES]:34,[o.Country.ET]:251,[o.Country.FI]:358,[o.Country.FJ]:679,[o.Country.FK]:500,[o.Country.FM]:691,[o.Country.FO]:298,[o.Country.FR]:33,[o.Country.GA]:241,[o.Country.GB]:44,[o.Country.GD]:1473,[o.Country.GE]:995,[o.Country.GF]:594,[o.Country.GG]:44,[o.Country.GH]:233,[o.Country.GI]:350,[o.Country.GL]:299,[o.Country.GM]:220,[o.Country.GN]:224,[o.Country.GP]:590,[o.Country.GQ]:240,[o.Country.GR]:30,[o.Country.GS]:500,[o.Country.GT]:502,[o.Country.GU]:1671,[o.Country.GW]:245,[o.Country.GY]:595,[o.Country.HK]:852,[o.Country.HN]:504,[o.Country.HR]:385,[o.Country.HT]:509,[o.Country.HU]:36,[o.Country.ID]:62,[o.Country.IE]:353,[o.Country.IL]:972,[o.Country.IM]:44,[o.Country.IN]:91,[o.Country.IO]:246,[o.Country.IQ]:964,[o.Country.IR]:98,[o.Country.IS]:354,[o.Country.IT]:39,[o.Country.JE]:44,[o.Country.JM]:1876,[o.Country.JO]:962,[o.Country.JP]:81,[o.Country.KE]:254,[o.Country.KG]:996,[o.Country.KH]:855,[o.Country.KI]:686,[o.Country.KM]:269,[o.Country.KN]:1869,[o.Country.KP]:850,[o.Country.KR]:82,[o.Country.KW]:965,[o.Country.KY]:345,[o.Country.KZ]:77,[o.Country.LA]:856,[o.Country.LB]:961,[o.Country.LC]:1758,[o.Country.LI]:423,[o.Country.LK]:94,[o.Country.LR]:231,[o.Country.LS]:266,[o.Country.LT]:370,[o.Country.LU]:352,[o.Country.LV]:371,[o.Country.LY]:218,[o.Country.MA]:212,[o.Country.MC]:377,[o.Country.MD]:373,[o.Country.ME]:382,[o.Country.MF]:590,[o.Country.MG]:261,[o.Country.MH]:692,[o.Country.MK]:389,[o.Country.ML]:223,[o.Country.MM]:95,[o.Country.MN]:976,[o.Country.MO]:853,[o.Country.MP]:1670,[o.Country.MQ]:596,[o.Country.MR]:222,[o.Country.MS]:1664,[o.Country.MT]:356,[o.Country.MU]:230,[o.Country.MV]:960,[o.Country.MW]:265,[o.Country.MX]:52,[o.Country.MY]:60,[o.Country.MZ]:258,[o.Country.NA]:264,[o.Country.NC]:687,[o.Country.NE]:227,[o.Country.NF]:672,[o.Country.NG]:234,[o.Country.NI]:505,[o.Country.NL]:31,[o.Country.NO]:47,[o.Country.NP]:977,[o.Country.NR]:674,[o.Country.NU]:683,[o.Country.NZ]:64,[o.Country.OM]:968,[o.Country.PA]:507,[o.Country.PE]:51,[o.Country.PF]:689,[o.Country.PG]:675,[o.Country.PH]:63,[o.Country.PK]:92,[o.Country.PL]:48,[o.Country.PM]:508,[o.Country.PN]:872,[o.Country.PR]:1,[o.Country.PS]:970,[o.Country.PT]:351,[o.Country.PW]:680,[o.Country.PY]:595,[o.Country.QA]:974,[o.Country.RE]:262,[o.Country.RO]:40,[o.Country.RS]:381,[o.Country.RU]:7,[o.Country.RW]:250,[o.Country.SA]:966,[o.Country.SB]:677,[o.Country.SC]:248,[o.Country.SD]:249,[o.Country.SE]:46,[o.Country.SG]:65,[o.Country.SH]:290,[o.Country.SI]:386,[o.Country.SJ]:47,[o.Country.SK]:421,[o.Country.SL]:232,[o.Country.SM]:378,[o.Country.SN]:221,[o.Country.SO]:252,[o.Country.SR]:597,[o.Country.ST]:239,[o.Country.SV]:503,[o.Country.SY]:963,[o.Country.SZ]:268,[o.Country.TC]:1649,[o.Country.TD]:235,[o.Country.TG]:228,[o.Country.TH]:66,[o.Country.TJ]:992,[o.Country.TK]:690,[o.Country.TL]:670,[o.Country.TM]:993,[o.Country.TN]:216,[o.Country.TO]:676,[o.Country.TR]:90,[o.Country.TT]:1868,[o.Country.TV]:688,[o.Country.TW]:886,[o.Country.TZ]:255,[o.Country.UA]:380,[o.Country.UG]:256,[o.Country.US]:1,[o.Country.UY]:598,[o.Country.UZ]:998,[o.Country.VA]:379,[o.Country.VC]:1784,[o.Country.VE]:58,[o.Country.VG]:1284,[o.Country.VI]:1340,[o.Country.VN]:84,[o.Country.VU]:678,[o.Country.WF]:681,[o.Country.WS]:685,[o.Country.XK]:383,[o.Country.YE]:967,[o.Country.YT]:262,[o.Country.ZA]:27,[o.Country.ZM]:260,[o.Country.ZW]:263}},39003:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getAllCallingCodes=t.processQuery=void 0;const o=r(32626),n=r(43651);t.processQuery=function(){return{type:o.StaticDataQueryType.CALLING_CODES,collection:n.default}},t.getAllCallingCodes=function(){return n.default}},80814:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.GeographicStatesLevel1=t.GeographicStatesLevel0=void 0;const o=r(32626);t.GeographicStatesLevel0={[o.Country.FR]:{"FR-0-42":{code:"42",name:"Alsace"},"FR-0-72":{code:"72",name:"Aquitaine"},"FR-0-83":{code:"83",name:"Auvergne"},"FR-0-25":{code:"25",name:"Basse-Normandie"},"FR-0-26":{code:"26",name:"Bourgogne"},"FR-0-53":{code:"53",name:"Bretagne"},"FR-0-24":{code:"24",name:"Centre"},"FR-0-21":{code:"21",name:"Champagne-Ardenne"},"FR-0-94":{code:"94",name:"Corse"},"FR-0-43":{code:"43",name:"Franche-Comte"},"FR-0-01":{code:"01",name:"Guadeloupe"},"FR-0-03":{code:"03",name:"Guyane"},"FR-0-23":{code:"23",name:"Haute-Normandie"},"FR-0-11":{code:"11",name:"Ile-de-France"},"FR-0-04":{code:"04",name:"La Reunion"},"FR-0-91":{code:"91",name:"Languedoc-Roussillon"},"FR-0-74":{code:"74",name:"Limousin"},"FR-0-41":{code:"41",name:"Lorraine"},"FR-0-02":{code:"02",name:"Martinique"},"FR-0-73":{code:"73",name:"Midi-Pyrenees"},"FR-0-31":{code:"31",name:"Nord-Pas-de-Calais"},"FR-0-52":{code:"52",name:"Pays de la Loire"},"FR-0-22":{code:"22",name:"Picardie"},"FR-0-54":{code:"54",name:"Poitou-Charentes"},"FR-0-93":{code:"93",name:"Provence-Alpes-Cote d'Azur"},"FR-0-82":{code:"82",name:"Rhone-Alpes"}},[o.Country.GB]:{"GB-0-67":{code:"67",name:"Aberdeenshire"},"GB-0-68":{code:"68",name:"Angus"},"GB-0-69":{code:"69",name:"Antrim"},"GB-0-70":{code:"70",name:"Ards"},"GB-0-71":{code:"71",name:"Argyll"},"GB-0-72":{code:"72",name:"Armagh"},"GB-0-01":{code:"01",name:"Avon"},"GB-0-73":{code:"73",name:"Ayrshire"},"GB-0-74":{code:"74",name:"Ballymena"},"GB-0-75":{code:"75",name:"Ballymoney"},"GB-0-76":{code:"76",name:"Banbridge"},"GB-0-77":{code:"77",name:"Banffshire"},"GB-0-78":{code:"78",name:"Bath & NthEstSomerset"},"GB-0-02":{code:"02",name:"Bedfordshire"},"GB-0-79":{code:"79",name:"Belfast"},"GB-0-03":{code:"03",name:"Berkshire"},"GB-0-80":{code:"80",name:"Berwickshire"},"GB-0-81":{code:"81",name:"Blackburn"},"GB-0-82":{code:"82",name:"Blackpool"},"GB-0-04":{code:"04",name:"Borders"},"GB-0-83":{code:"83",name:"Bournemouth"},"GB-0-84":{code:"84",name:"Bracknell Forest"},"GB-0-85":{code:"85",name:"Brighton & Hove"},"GB-0-86":{code:"86",name:"Bristol"},"GB-0-05":{code:"05",name:"Buckinghamshire"},"GB-0-87":{code:"87",name:"Caithness"},"GB-0-06":{code:"06",name:"Cambridgeshire"},"GB-0-88":{code:"88",name:"Carrickfergus"},"GB-0-89":{code:"89",name:"Castlereagh"},"GB-0-07":{code:"07",name:"Central"},"GB-0-08":{code:"08",name:"Cheshire"},"GB-0-91":{code:"91",name:"Clackmannanshire"},"GB-0-12":{code:"12",name:"Cleveland"},"GB-0-09":{code:"09",name:"Clwyd"},"GB-0-92":{code:"92",name:"Coleraine"},"GB-0-93":{code:"93",name:"Cookstown"},"GB-0-10":{code:"10",name:"Cornwall"},"GB-0-94":{code:"94",name:"Craigavon"},"GB-0-11":{code:"11",name:"Cumbria"},"GB-0-95":{code:"95",name:"Darlington"},"GB-0-13":{code:"13",name:"Derbyshire"},"GB-0-16":{code:"16",name:"Devon"},"GB-0-14":{code:"14",name:"Dorset"},"GB-0-96":{code:"96",name:"Down"},"GB-0-97":{code:"97",name:"Dumfries a. Galloway"},"GB-0-98":{code:"98",name:"Dumfriesshire"},"GB-0-99":{code:"99",name:"Dunbartonshire"},"GB-0-100":{code:"100",name:"Dungannon"},"GB-0-15":{code:"15",name:"Durham"},"GB-0-17":{code:"17",name:"Dyfed"},"GB-0-101":{code:"101",name:"East Lothian"},"GB-0-102":{code:"102",name:"East Riding"},"GB-0-103":{code:"103",name:"East Sussex"},"GB-0-18":{code:"18",name:"Essex"},"GB-0-104":{code:"104",name:"Fermanagh"},"GB-0-19":{code:"19",name:"Fife"},"GB-0-20":{code:"20",name:"Gloucestershire"},"GB-0-22":{code:"22",name:"Grampian"},"GB-0-36":{code:"36",name:"Greater London"},"GB-0-21":{code:"21",name:"Greater Manchester"},"GB-0-23":{code:"23",name:"Gwent"},"GB-0-24":{code:"24",name:"Gwynedd"},"GB-0-105":{code:"105",name:"Halton"},"GB-0-25":{code:"25",name:"Hampshire"},"GB-0-106":{code:"106",name:"Hartlepool"},"GB-0-29":{code:"29",name:"Hereford and Worcs."},"GB-0-107":{code:"107",name:"Herefordshire"},"GB-0-27":{code:"27",name:"Hertfordshire"},"GB-0-108":{code:"108",name:"Highland"},"GB-0-28":{code:"28",name:"Humberside"},"GB-0-109":{code:"109",name:"Inverness-Shire"},"GB-0-110":{code:"110",name:"Isle Of Arran"},"GB-0-111":{code:"111",name:"Isle Of Barra"},"GB-0-112":{code:"112",name:"Isle Of Benbecula"},"GB-0-113":{code:"113",name:"Isle Of Bute"},"GB-0-114":{code:"114",name:"Isle Of Canna"},"GB-0-115":{code:"115",name:"Isle Of Coll"},"GB-0-116":{code:"116",name:"Isle Of Colonsay"},"GB-0-117":{code:"117",name:"Isle Of Cumbrae"},"GB-0-118":{code:"118",name:"Isle Of Eigg"},"GB-0-119":{code:"119",name:"Isle Of Gigha"},"GB-0-120":{code:"120",name:"Isle Of Harris"},"GB-0-121":{code:"121",name:"Isle Of Iona"},"GB-0-122":{code:"122",name:"Isle Of Islay"},"GB-0-123":{code:"123",name:"Isle Of Jura"},"GB-0-124":{code:"124",name:"Isle Of Lewis"},"GB-0-126":{code:"126",name:"Isle Of Mull"},"GB-0-127":{code:"127",name:"Isle Of North Uist"},"GB-0-128":{code:"128",name:"Isle Of Rum"},"GB-0-129":{code:"129",name:"Isle Of Scalpay"},"GB-0-131":{code:"131",name:"Isle Of Skye"},"GB-0-132":{code:"132",name:"Isle Of South Uist"},"GB-0-133":{code:"133",name:"Isle Of Tiree"},"GB-0-31":{code:"31",name:"Isle of Wight"},"GB-0-130":{code:"130",name:"Isles Of Scilly"},"GB-0-32":{code:"32",name:"Kent"},"GB-0-134":{code:"134",name:"Kincardineshire"},"GB-0-135":{code:"135",name:"Kingston-Upon-Hull"},"GB-0-136":{code:"136",name:"Kirkcudbrightshire"},"GB-0-137":{code:"137",name:"Lanarkshire"},"GB-0-33":{code:"33",name:"Lancashire"},"GB-0-138":{code:"138",name:"Larne"},"GB-0-139":{code:"139",name:"Leicester City"},"GB-0-34":{code:"34",name:"Leicestershire"},"GB-0-140":{code:"140",name:"Limavady"},"GB-0-35":{code:"35",name:"Lincolnshire"},"GB-0-141":{code:"141",name:"Lisburn"},"GB-0-142":{code:"142",name:"London"},"GB-0-143":{code:"143",name:"Londonderry"},"GB-0-37":{code:"37",name:"Lothian"},"GB-0-144":{code:"144",name:"Luton"},"GB-0-145":{code:"145",name:"Magherafelt"},"GB-0-39":{code:"39",name:"Merseyside"},"GB-0-38":{code:"38",name:"Mid Glamorgan"},"GB-0-146":{code:"146",name:"Middlesbrough"},"GB-0-65":{code:"65",name:"Middlesex"},"GB-0-147":{code:"147",name:"Midlothian"},"GB-0-148":{code:"148",name:"Milton Keynes"},"GB-0-149":{code:"149",name:"Morayshire"},"GB-0-150":{code:"150",name:"Moyle"},"GB-0-151":{code:"151",name:"Nairn"},"GB-0-152":{code:"152",name:"Newbury"},"GB-0-153":{code:"153",name:"Newry and Mourne"},"GB-0-154":{code:"154",name:"Newtownabbey"},"GB-0-41":{code:"41",name:"Norfolk"},"GB-0-155":{code:"155",name:"North Down"},"GB-0-156":{code:"156",name:"North Humberside"},"GB-0-157":{code:"157",name:"North Lincolnshire"},"GB-0-158":{code:"158",name:"North Somerset"},"GB-0-62":{code:"62",name:"North Yorkshire"},"GB-0-40":{code:"40",name:"Northamptonshire"},"GB-0-43":{code:"43",name:"Northumberland"},"GB-0-159":{code:"159",name:"Nottingham City"},"GB-0-42":{code:"42",name:"Nottinghamshire"},"GB-0-160":{code:"160",name:"NthEast Lincolnshire"},"GB-0-161":{code:"161",name:"Omagh"},"GB-0-162":{code:"162",name:"Orkney"},"GB-0-44":{code:"44",name:"Oxfordshire"},"GB-0-163":{code:"163",name:"Peeblesshire"},"GB-0-164":{code:"164",name:"Perthshire"},"GB-0-165":{code:"165",name:"Peterborough"},"GB-0-166":{code:"166",name:"Plymouth"},"GB-0-167":{code:"167",name:"Poole"},"GB-0-168":{code:"168",name:"Portsmouth"},"GB-0-45":{code:"45",name:"Powys"},"GB-0-169":{code:"169",name:"Reading"},"GB-0-170":{code:"170",name:"Redcar and Cleveland"},"GB-0-171":{code:"171",name:"Renfrewshire"},"GB-0-172":{code:"172",name:"Rochester Up. Medway"},"GB-0-173":{code:"173",name:"Ross-Shire"},"GB-0-175":{code:"175",name:"Roxburghshire"},"GB-0-176":{code:"176",name:"Rutland"},"GB-0-26":{code:"26",name:"Scotland"},"GB-0-177":{code:"177",name:"Shetland"},"GB-0-48":{code:"48",name:"Shropshire"},"GB-0-178":{code:"178",name:"Slough"},"GB-0-50":{code:"50",name:"Somerset"},"GB-0-47":{code:"47",name:"South Glamorgan"},"GB-0-179":{code:"179",name:"South Humberside"},"GB-0-63":{code:"63",name:"South Yorkshire"},"GB-0-180":{code:"180",name:"Southampton"},"GB-0-181":{code:"181",name:"Southend"},"GB-0-51":{code:"51",name:"Staffordshire"},"GB-0-182":{code:"182",name:"Sth. Gloucestershire"},"GB-0-183":{code:"183",name:"Stirlingshire"},"GB-0-184":{code:"184",name:"Stockton-on-Tees"},"GB-0-185":{code:"185",name:"Strabane"},"GB-0-46":{code:"46",name:"Strathclyde"},"GB-0-49":{code:"49",name:"Suffolk"},"GB-0-53":{code:"53",name:"Surrey"},"GB-0-52":{code:"52",name:"Sussex"},"GB-0-186":{code:"186",name:"Sutherland"},"GB-0-54":{code:"54",name:"Tayside"},"GB-0-187":{code:"187",name:"Thamesdown"},"GB-0-188":{code:"188",name:"Thurrock"},"GB-0-189":{code:"189",name:"Torbay"},"GB-0-55":{code:"55",name:"Tyne and Wear"},"GB-0-190":{code:"190",name:"Tyrone"},"GB-0-191":{code:"191",name:"Warrington"},"GB-0-56":{code:"56",name:"Warwickshire"},"GB-0-57":{code:"57",name:"West Glamorgan"},"GB-0-192":{code:"192",name:"West Lothian"},"GB-0-59":{code:"59",name:"West Midlands"},"GB-0-193":{code:"193",name:"West Sussex"},"GB-0-64":{code:"64",name:"West Yorkshire"},"GB-0-194":{code:"194",name:"Western Isles"},"GB-0-195":{code:"195",name:"Wigtownshire"},"GB-0-58":{code:"58",name:"Wiltshire"},"GB-0-196":{code:"196",name:"Windsor & Maidenhead"},"GB-0-197":{code:"197",name:"Wokingham"},"GB-0-60":{code:"60",name:"Worcestershire"},"GB-0-198":{code:"198",name:"Wrekin"},"GB-0-199":{code:"199",name:"York"},"GB-0-61":{code:"61",name:"Yorkshire"},"GB-0-1001":{code:"1001",name:"Blaenau Gwent"},"GB-0-1002":{code:"1002",name:"Bridgend"},"GB-0-1003":{code:"1003",name:"Caerphilly"},"GB-0-1004":{code:"1004",name:"Cardiff"},"GB-0-1005":{code:"1005",name:"Carmarthenshire"},"GB-0-1006":{code:"1006",name:"Ceredigion"},"GB-0-1007":{code:"1007",name:"Channel Islands"},"GB-0-1008":{code:"1008",name:"Conwy"},"GB-0-1009":{code:"1009",name:"Denbighshire"},"GB-0-1010":{code:"1010",name:"East Ayrshire"},"GB-0-1011":{code:"1011",name:"East Dunbartonshire"},"GB-0-1012":{code:"1012",name:"East Renfrewshire"},"GB-0-1013":{code:"1013",name:"Edinburgh City"},"GB-0-1014":{code:"1014",name:"Falkirk"},"GB-0-1015":{code:"1015",name:"Flintshire"},"GB-0-1016":{code:"1016",name:"Glasgow"},"GB-0-1017":{code:"1017",name:"Inverclyde"},"GB-0-1018":{code:"1018",name:"Isle of Anglesey"},"GB-0-1019":{code:"1019",name:"Isle of Man"},"GB-0-1020":{code:"1020",name:"Merthyr Tydfil"},"GB-0-1021":{code:"1021",name:"Monmouthshire"},"GB-0-1022":{code:"1022",name:"Moray"},"GB-0-1023":{code:"1023",name:"Neath Port Talbot"},"GB-0-1024":{code:"1024",name:"Newport"},"GB-0-1025":{code:"1025",name:"North Ayrshire"},"GB-0-1026":{code:"1026",name:"North Lanarkshire"},"GB-0-1027":{code:"1027",name:"Pembrokeshire"},"GB-0-1028":{code:"1028",name:"Rhondda Cynon Taff"},"GB-0-1029":{code:"1029",name:"South Ayrshire"},"GB-0-1030":{code:"1030",name:"South Lanarkshire"},"GB-0-1031":{code:"1031",name:"Stirling"},"GB-0-1032":{code:"1032",name:"Swansea"},"GB-0-1033":{code:"1033",name:"The Vale of Glamorgan"},"GB-0-1034":{code:"1034",name:"Torfaen"},"GB-0-1035":{code:"1035",name:"West Dunbartonshire"},"GB-0-1036":{code:"1036",name:"Wrexham"}},[o.Country.US]:{"US-0-AL":{code:"AL",name:"Alabama"},"US-0-AK":{code:"AK",name:"Alaska"},"US-0-AS":{code:"AS",name:"American Samoa"},"US-0-AZ":{code:"AZ",name:"Arizona"},"US-0-AR":{code:"AR",name:"Arkansas"},"US-0-AA":{code:"AA",name:"Armed Forces America"},"US-0-AE":{code:"AE",name:"Armed Forces Europe"},"US-0-AP":{code:"AP",name:"Armed Forces Pacific"},"US-0-CA":{code:"CA",name:"California"},"US-0-CEI":{code:"CEI",name:"Canton & Enderbury Islands"},"US-0-CO":{code:"CO",name:"Colorado"},"US-0-CT":{code:"CT",name:"Connecticut"},"US-0-DC":{code:"DC",name:"District of Columbia"},"US-0-DE":{code:"DE",name:"Delaware"},"US-0-FL":{code:"FL",name:"Florida"},"US-0-GA":{code:"GA",name:"Georgia"},"US-0-GU":{code:"GU",name:"Guam"},"US-0-HI":{code:"HI",name:"Hawaii"},"US-0-IA":{code:"IA",name:"Iowa"},"US-0-ID":{code:"ID",name:"Idaho"},"US-0-IL":{code:"IL",name:"Illinois"},"US-0-IN":{code:"IN",name:"Indiana"},"US-0-KS":{code:"KS",name:"Kansas"},"US-0-KY":{code:"KY",name:"Kentucky"},"US-0-LA":{code:"LA",name:"Louisiana"},"US-0-MA":{code:"MA",name:"Massachusetts"},"US-0-MD":{code:"MD",name:"Maryland"},"US-0-ME":{code:"ME",name:"Maine"},"US-0-MP":{code:"MP",name:"Mariana Islands"},"US-0-MI":{code:"MI",name:"Michigan"},"US-0-MN":{code:"MN",name:"Minnesota"},"US-0-MS":{code:"MS",name:"Mississippi"},"US-0-MO":{code:"MO",name:"Missouri"},"US-0-MT":{code:"MT",name:"Montana"},"US-0-NE":{code:"NE",name:"Nebraska"},"US-0-NV":{code:"NV",name:"Nevada"},"US-0-NH":{code:"NH",name:"New Hampshire"},"US-0-NJ":{code:"NJ",name:"New Jersey"},"US-0-NM":{code:"NM",name:"New Mexico"},"US-0-NY":{code:"NY",name:"New York"},"US-0-NC":{code:"NC",name:"North Carolina"},"US-0-ND":{code:"ND",name:"North Dakota"},"US-0-NMI":{code:"NMI",name:"North Mariana Islands"},"US-0-OH":{code:"OH",name:"Ohio"},"US-0-OK":{code:"OK",name:"Oklahoma"},"US-0-OR":{code:"OR",name:"Oregon"},"US-0-PW":{code:"PW",name:"Palau"},"US-0-PA":{code:"PA",name:"Pennsylvania"},"US-0-PR":{code:"PR",name:"Puerto Rico"},"US-0-RI":{code:"RI",name:"Rhode Island"},"US-0-SC":{code:"SC",name:"South Carolina"},"US-0-SD":{code:"SD",name:"South Dakota"},"US-0-TN":{code:"TN",name:"Tennessee"},"US-0-TX":{code:"TX",name:"Texas"},"US-0-UT":{code:"UT",name:"Utah"},"US-0-VT":{code:"VT",name:"Vermont"},"US-0-VI":{code:"VI",name:"Virgin Islands, US"},"US-0-VA":{code:"VA",name:"Virginia"},"US-0-WA":{code:"WA",name:"Washington"},"US-0-WV":{code:"WV",name:"West Virginia"},"US-0-WI":{code:"WI",name:"Wisconsin"},"US-0-WY":{code:"WY",name:"Wyoming"}},[o.Country.CA]:{"CA-0-AB":{code:"AB",name:"Alberta"},"CA-0-BC":{code:"BC",name:"British Columbia"},"CA-0-MB":{code:"MB",name:"Manitoba"},"CA-0-NB":{code:"NB",name:"New Brunswick"},"CA-0-NL":{code:"NL",name:"Newfoundland and Labrador"},"CA-0-NS":{code:"NS",name:"Nova Scotia"},"CA-0-NT":{code:"NT",name:"Northwest Territories"},"CA-0-NU":{code:"NU",name:"Nunavut"},"CA-0-ON":{code:"ON",name:"Ontario"},"CA-0-PE":{code:"PE",name:"Prince Edward Island"},"CA-0-QC":{code:"QC",name:"Qubec"},"CA-0-SK":{code:"SK",name:"Saskatchewan"},"CA-0-YT":{code:"YT",name:"Yukon"}},[o.Country.AU]:{"AU-0-SA":{code:"SA",name:"South Australia"},"AU-0-WA":{code:"WA",name:"Western Australia"},"AU-0-NSW":{code:"NSW",name:"New South Wales"},"AU-0-QLD":{code:"QLD",name:"Queensland"},"AU-0-TAS":{code:"TAS",name:"Tasmania"},"AU-0-VIC":{code:"VIC",name:"Victoria"},"AU-0-ACT":{code:"ACT",name:"Australian Capital Territory"},"AU-0-JBT":{code:"JBT",name:"Jervis Bay Territory"},"AU-0-NT":{code:"NT",name:"Northern Territory"}},[o.Country.IE]:{"IE-0-05":{code:"05",name:"Carlow"},"IE-0-04":{code:"04",name:"Clare"},"IE-0-03":{code:"03",name:"Cork"},"IE-0-07":{code:"07",name:"Donegal"},"IE-0-06":{code:"06",name:"Dublin"},"IE-0-10":{code:"10",name:"Galway"},"IE-0-13":{code:"13",name:"Cavan"},"IE-0-14":{code:"14",name:"Kerry"},"IE-0-11":{code:"11",name:"Kildare"},"IE-0-12":{code:"12",name:"Kilkenny"},"IE-0-19":{code:"19",name:"Laois"},"IE-0-18":{code:"18",name:"Leitrim"},"IE-0-17":{code:"17",name:"Limerick"},"IE-0-16":{code:"16",name:"Longford"},"IE-0-20":{code:"20",name:"Louth"},"IE-0-23":{code:"23",name:"Mayo"},"IE-0-22":{code:"22",name:"Meath"},"IE-0-21":{code:"21",name:"Monaghan"},"IE-0-24":{code:"24",name:"Offaly"},"IE-0-25":{code:"25",name:"Roscommon"},"IE-0-26":{code:"26",name:"Sligo"},"IE-0-27":{code:"27",name:"Tipperary"},"IE-0-29":{code:"29",name:"Waterford"},"IE-0-31":{code:"31",name:"Westmeath"},"IE-0-32":{code:"32",name:"Wexford"},"IE-0-30":{code:"30",name:"Wicklow"}},[o.Country.ES]:{"ES-0-AN":{code:"AN",name:"Andalucia"},"ES-0-AR":{code:"AR",name:"Aragn"},"ES-0-AS":{code:"AS",name:"Asturias, Principado de"},"ES-0-CN":{code:"CN",name:"Canarias"},"ES-0-CB":{code:"CB",name:"Cantabria"},"ES-0-CM":{code:"CM",name:"Castilla-La Mancha"},"ES-0-CL":{code:"CL",name:"Castilla y Len"},"ES-0-CT":{code:"CT",name:"Catalua"},"ES-0-EX":{code:"EX",name:"Extremadura"},"ES-0-GA":{code:"GA",name:"Galicia"},"ES-0-IB":{code:"IB",name:"Illes Balears"},"ES-0-RI":{code:"RI",name:"La Rioja"},"ES-0-MD":{code:"MD",name:"Madrid, Comunidad de"},"ES-0-MC":{code:"MC",name:"Murcia, Regin de"},"ES-0-NC":{code:"NC",name:"Navarra, Comunidad Foral de"},"ES-0-PV":{code:"PV",name:"Pas Vasco"},"ES-0-VC":{code:"VC",name:"Valenciana, Comunitat"},"ES-0-CE":{code:"CE",name:"Ceuta"},"ES-0-ML":{code:"ML",name:"Melilla"}},[o.Country.MX]:{"MX-0-DIF":{code:"DIF",name:"Distrito Federal"},"MX-0-AGU":{code:"AGU",name:"Aguascalientes"},"MX-0-BCN":{code:"BCN",name:"Baja California"},"MX-0-BCS":{code:"BCS",name:"Baja California Sur"},"MX-0-CAM":{code:"CAM",name:"Campeche"},"MX-0-COA":{code:"COA",name:"Coahuila"},"MX-0-COL":{code:"COL",name:"Colima"},"MX-0-CHP":{code:"CHP",name:"Chiapas"},"MX-0-CHH":{code:"CHH",name:"Chihuahua"},"MX-0-DUR":{code:"DUR",name:"Durango"},"MX-0-GUA":{code:"GUA",name:"Guanajuato"},"MX-0-GRO":{code:"GRO",name:"Guerrero"},"MX-0-HID":{code:"HID",name:"Hidalgo"},"MX-0-JAL":{code:"JAL",name:"Jalisco"},"MX-0-MEX":{code:"MEX",name:"Mxico"},"MX-0-MIC":{code:"MIC",name:"Michoacn"},"MX-0-MOR":{code:"MOR",name:"Morelos"},"MX-0-NAY":{code:"NAY",name:"Nayarit"},"MX-0-NLE":{code:"NLE",name:"Nuevo Len"},"MX-0-OAX":{code:"OAX",name:"Oaxaca"},"MX-0-PUE":{code:"PUE",name:"Puebla"},"MX-0-QUE":{code:"QUE",name:"Quertaro"},"MX-0-ROO":{code:"ROO",name:"Quintana Roo"},"MX-0-SLP":{code:"SLP",name:"San Luis Potos"},"MX-0-SIN":{code:"SIN",name:"Sinaloa"},"MX-0-SON":{code:"SON",name:"Sonora"},"MX-0-TAB":{code:"TAB",name:"Tabasco"},"MX-0-TAM":{code:"TAM",name:"Tamaulipas"},"MX-0-TLA":{code:"TLA",name:"Tlaxcala"},"MX-0-VER":{code:"VER",name:"Veracruz"},"MX-0-YUC":{code:"YUC",name:"Yucatn"},"MX-0-ZAC":{code:"ZAC",name:"Zacatecas"}},[o.Country.CO]:{"CO-0-DC":{code:"DC",name:"Distrito Capital de Bogot"},"CO-0-AMA":{code:"AMA",name:"Amazonas"},"CO-0-ANT":{code:"ANT",name:"Antioquia"},"CO-0-ARA":{code:"ARA",name:"Arauca"},"CO-0-ATL":{code:"ATL",name:"Atlntico"},"CO-0-BOL":{code:"BOL",name:"Bolvar"},"CO-0-BOY":{code:"BOY",name:"Boyac"},"CO-0-CAL":{code:"CAL",name:"Caldas"},"CO-0-CAQ":{code:"CAQ",name:"Caquet"},"CO-0-CAS":{code:"CAS",name:"Casanare"},"CO-0-CAU":{code:"CAU",name:"Cauca"},"CO-0-CES":{code:"CES",name:"Cesar"},"CO-0-COR":{code:"COR",name:"Crdoba"},"CO-0-CUN":{code:"CUN",name:"Cundinamarca"},"CO-0-CHO":{code:"CHO",name:"Choc"},"CO-0-GUA":{code:"GUA",name:"Guaina"},"CO-0-GUV":{code:"GUV",name:"Guaviare"},"CO-0-HUI":{code:"HUI",name:"Huila"},"CO-0-LAG":{code:"LAG",name:"La Guajira"},"CO-0-MAG":{code:"MAG",name:"Magdalena"},"CO-0-MET":{code:"MET",name:"Meta"},"CO-0-NAR":{code:"NAR",name:"Nario"},"CO-0-NSA":{code:"NSA",name:"Norte de Santander"},"CO-0-PUT":{code:"PUT",name:"Putumayo"},"CO-0-QUI":{code:"QUI",name:"Quindo"},"CO-0-RIS":{code:"RIS",name:"Risaralda"},"CO-0-SAP":{code:"SAP",name:"San Andrs, Providencia y Santa Catalina"},"CO-0-SAN":{code:"SAN",name:"Santander"},"CO-0-SUC":{code:"SUC",name:"Sucre"},"CO-0-TOL":{code:"TOL",name:"Tolima"},"CO-0-VAC":{code:"VAC",name:"Valle del Cauca"},"CO-0-VAU":{code:"VAU",name:"Vaups"},"CO-0-VID":{code:"VID",name:"Vichada"}},[o.Country.PE]:{"PE-0-CAL":{code:"CAL",name:"El Callao"},"PE-0-LMA":{code:"LMA",name:"Municipalidad Metropolitana de Lima"},"PE-0-AMA":{code:"AMA",name:"Amazonas"},"PE-0-ANC":{code:"ANC",name:"Ancash"},"PE-0-APU":{code:"APU",name:"Apurmac"},"PE-0-ARE":{code:"ARE",name:"Arequipa"},"PE-0-AYA":{code:"AYA",name:"Ayacucho"},"PE-0-CAJ":{code:"CAJ",name:"Cajamarca"},"PE-0-CUS":{code:"CUS",name:"Cusco"},"PE-0-HUV":{code:"HUV",name:"Huancavelica"},"PE-0-HUC":{code:"HUC",name:"Hunuco"},"PE-0-ICA":{code:"ICA",name:"Ica"},"PE-0-JUN":{code:"JUN",name:"Junn"},"PE-0-LAL":{code:"LAL",name:"La Libertad"},"PE-0-LAM":{code:"LAM",name:"Lambayeque"},"PE-0-LIM":{code:"LIM",name:"Lima"},"PE-0-LOR":{code:"LOR",name:"Loreto"},"PE-0-MDD":{code:"MDD",name:"Madre de Dios"},"PE-0-MOQ":{code:"MOQ",name:"Moquegua"},"PE-0-PAS":{code:"PAS",name:"Pasco"},"PE-0-PIU":{code:"PIU",name:"Piura"},"PE-0-PUN":{code:"PUN",name:"Puno"},"PE-0-SAM":{code:"SAM",name:"San Martn"},"PE-0-TAC":{code:"TAC",name:"Tacna"},"PE-0-TUM":{code:"TUM",name:"Tumbes"},"PE-0-UCA":{code:"UCA",name:"Ucayali"}},[o.Country.CL]:{"CL-0-AI":{code:"AI",name:"Aisn del General Carlos Ibaez del Campo"},"CL-0-AN":{code:"AN",name:"Antofagasta"},"CL-0-AR":{code:"AR",name:"Araucana"},"CL-0-AP":{code:"AP",name:"Arica y Parinacota"},"CL-0-AT":{code:"AT",name:"Atacama"},"CL-0-BI":{code:"BI",name:"Biobo"},"CL-0-CO":{code:"CO",name:"Coquimbo"},"CL-0-LI":{code:"LI",name:"Libertador General Bernardo O'Higgins"},"CL-0-LL":{code:"LL",name:"Los Lagos"},"CL-0-LR":{code:"LR",name:"Los Ros"},"CL-0-MA":{code:"MA",name:"Magallanes y la Antrtica Chilena"},"CL-0-ML":{code:"ML",name:"Maule"},"CL-0-RM":{code:"RM",name:"Metropolitana de Santiago"},"CL-0-TA":{code:"TA",name:"Tarapac"},"CL-0-VS":{code:"VS",name:"Valparaso"}},[o.Country.DE]:{"DE-0-BW":{code:"BW",name:"Baden-Wrttemberg"},"DE-0-BY":{code:"BY",name:"Bayern"},"DE-0-BE":{code:"BE",name:"Berlin"},"DE-0-BB":{code:"BB",name:"Brandenburg"},"DE-0-HB":{code:"HB",name:"Bremen"},"DE-0-HH":{code:"HH",name:"Hamburg"},"DE-0-HE":{code:"HE",name:"Hessen"},"DE-0-MV":{code:"MV",name:"Mecklenburg-Vorpommern"},"DE-0-NI":{code:"NI",name:"Niedersachsen"},"DE-0-NW":{code:"NW",name:"Nordrhein-Westfalen"},"DE-0-RP":{code:"RP",name:"Rheinland-Pfalz"},"DE-0-SL":{code:"SL",name:"Saarland"},"DE-0-SN":{code:"SN",name:"Sachsen"},"DE-0-ST":{code:"ST",name:"Sachsen-Anhalt"},"DE-0-SH":{code:"SH",name:"Schleswig-Holstein"},"DE-0-TH":{code:"TH",name:"Thringen"}},[o.Country.IT]:{"IT-0-65":{code:"65",name:"Abruzzo"},"IT-0-77":{code:"77",name:"Basilicata"},"IT-0-78":{code:"78",name:"Calabria"},"IT-0-72":{code:"72",name:"Campania"},"IT-0-45":{code:"45",name:"Emilia-Romagna"},"IT-0-36":{code:"36",name:"Friuli-Venezia Giulia"},"IT-0-62":{code:"62",name:"Lazio"},"IT-0-42":{code:"42",name:"Liguria"},"IT-0-25":{code:"25",name:"Lombardia"},"IT-0-57":{code:"57",name:"Marche"},"IT-0-67":{code:"67",name:"Molise"},"IT-0-21":{code:"21",name:"Piemonte"},"IT-0-75":{code:"75",name:"Puglia"},"IT-0-88":{code:"88",name:"Sardegna"},"IT-0-82":{code:"82",name:"Sicilia"},"IT-0-52":{code:"52",name:"Toscana"},"IT-0-32":{code:"32",name:"Trentino Alto Adige"},"IT-0-55":{code:"55",name:"Umbria"},"IT-0-23":{code:"23",name:"Valle d'Aosta"},"IT-0-34":{code:"34",name:"Veneto"}},[o.Country.CH]:{"CH-0-AG":{code:"AG",name:"Aargau"},"CH-0-AR":{code:"AR",name:"Appenzell Ausserrhoden"},"CH-0-AI":{code:"AI",name:"Appenzell Innerrhoden"},"CH-0-BL":{code:"BL",name:"Basel-Landschaft"},"CH-0-BS":{code:"BS",name:"Basel-Stadt"},"CH-0-BE":{code:"BE",name:"Berne"},"CH-0-FR":{code:"FR",name:"Fribourg"},"CH-0-GE":{code:"GE",name:"Genve"},"CH-0-GL":{code:"GL",name:"Glarus"},"CH-0-GR":{code:"GR",name:"Graubnden"},"CH-0-JU":{code:"JU",name:"Jura"},"CH-0-LU":{code:"LU",name:"Luzern"},"CH-0-NE":{code:"NE",name:"Neuchtel"},"CH-0-NW":{code:"NW",name:"Nidwalden"},"CH-0-OW":{code:"OW",name:"Obwalden"},"CH-0-SG":{code:"SG",name:"Sankt Gallen"},"CH-0-SH":{code:"SH",name:"Schaffhausen"},"CH-0-SZ":{code:"SZ",name:"Schwyz"},"CH-0-SO":{code:"SO",name:"Solothurn"},"CH-0-TG":{code:"TG",name:"Thurgau"},"CH-0-TI":{code:"TI",name:"Ticino"},"CH-0-UR":{code:"UR",name:"Uri"},"CH-0-VS":{code:"VS",name:"Valais"},"CH-0-VD":{code:"VD",name:"Vaud"},"CH-0-ZG":{code:"ZG",name:"Zug"},"CH-0-ZH":{code:"ZH",name:"Zrich"}},[o.Country.BE]:{"BE-0-BRU":{code:"BRU",name:"Bruxelles-Capitale, Rgion de"},"BE-0-VLG":{code:"VLG",name:"Vlaamse Gewest"},"BE-0-WAL":{code:"WAL",name:"Rgion wallonne"}},[o.Country.SE]:{"SE-0-K":{code:"K",name:"Blekinge ln"},"SE-0-W":{code:"W",name:"Dalarnas ln"},"SE-0-I":{code:"I",name:"Gotlands ln"},"SE-0-X":{code:"X",name:"Gvleborgs ln"},"SE-0-N":{code:"N",name:"Hallands ln"},"SE-0-Z":{code:"Z",name:"Jmtlands ln"},"SE-0-F":{code:"F",name:"Jnkpings ln"},"SE-0-H":{code:"H",name:"Kalmar ln"},"SE-0-G":{code:"G",name:"Kronobergs ln"},"SE-0-BD":{code:"BD",name:"Norrbottens ln"},"SE-0-M":{code:"M",name:"Skne ln"},"SE-0-AB":{code:"AB",name:"Stockholms ln"},"SE-0-D":{code:"D",name:"Sdermanlands ln"},"SE-0-C":{code:"C",name:"Uppsala ln"},"SE-0-S":{code:"S",name:"Vrmlands ln"},"SE-0-AC":{code:"AC",name:"Vsterbottens ln"},"SE-0-Y":{code:"Y",name:"Vsternorrlands ln"},"SE-0-U":{code:"U",name:"Vstmanlands ln"},"SE-0-O":{code:"O",name:"Vstra Gtalands ln"},"SE-0-T":{code:"T",name:"rebro ln"},"SE-0-E":{code:"E",name:"stergtlands ln"}},[o.Country.NO]:{"NO-0-2":{code:"2",name:"Akershus"},"NO-0-9":{code:"9",name:"Aust-Agder"},"NO-0-6":{code:"6",name:"Buskerud"},"NO-0-20":{code:"20",name:"Finnmark"},"NO-0-4":{code:"4",name:"Hedmark"},"NO-0-12":{code:"12",name:"Hordaland"},"NO-0-15":{code:"15",name:"Mre og Romsdal"},"NO-0-18":{code:"18",name:"Nordland"},"NO-0-17":{code:"17",name:"Nord-Trndelag"},"NO-0-5":{code:"5",name:"Oppland"},"NO-0-3":{code:"3",name:"Oslo"},"NO-0-11":{code:"11",name:"Rogaland"},"NO-0-14":{code:"14",name:"Sogn og Fjordane"},"NO-0-16":{code:"16",name:"Sr-Trndelag"},"NO-0-8":{code:"8",name:"Telemark"},"NO-0-19":{code:"19",name:"Troms"},"NO-0-10":{code:"10",name:"Vest-Agder"},"NO-0-7":{code:"7",name:"Vestfold"},"NO-0-1":{code:"1",name:"stfold"},"NO-0-22":{code:"22",name:"Jan Mayen"},"NO-0-21":{code:"21",name:"Svalbard"}},[o.Country.NL]:{"NL-0-DR":{code:"DR",name:"Drenthe"},"NL-0-FL":{code:"FL",name:"Flevoland"},"NL-0-FR":{code:"FR",name:"Frysln"},"NL-0-GE":{code:"GE",name:"Gelderland"},"NL-0-GR":{code:"GR",name:"Groningen"},"NL-0-LI":{code:"LI",name:"Limburg"},"NL-0-NB":{code:"NB",name:"Noord-Brabant"},"NL-0-NH":{code:"NH",name:"Noord-Holland"},"NL-0-OV":{code:"OV",name:"Overijssel"},"NL-0-UT":{code:"UT",name:"Utrecht"},"NL-0-ZE":{code:"ZE",name:"Zeeland"},"NL-0-ZH":{code:"ZH",name:"Zuid-Holland"}},[o.Country.PT]:{"PT-0-1":{code:"1",name:"Aveiro"},"PT-0-2":{code:"2",name:"Beja"},"PT-0-3":{code:"3",name:"Braga"},"PT-0-4":{code:"4",name:"Bragana"},"PT-0-5":{code:"5",name:"Castelo Branco"},"PT-0-6":{code:"6",name:"Coimbra"},"PT-0-7":{code:"7",name:"vora"},"PT-0-8":{code:"8",name:"Faro"},"PT-0-9":{code:"9",name:"Guarda"},"PT-0-10":{code:"10",name:"Leiria"},"PT-0-11":{code:"11",name:"Lisboa"},"PT-0-12":{code:"12",name:"Portalegre"},"PT-0-13":{code:"13",name:"Porto"},"PT-0-14":{code:"14",name:"Santarm"},"PT-0-15":{code:"15",name:"Setbal"},"PT-0-16":{code:"16",name:"Viana do Castelo"},"PT-0-17":{code:"17",name:"Vila Real"},"PT-0-18":{code:"18",name:"Viseu"},"PT-0-20":{code:"20",name:"Regio Autnoma dos Aores"},"PT-0-30":{code:"30",name:"Regio Autnoma da Madeira"}}},t.GeographicStatesLevel1={[o.Country.AR]:{"AR-1-C":{code:"C",name:"Ciudad Autnoma de Buenos Aires"},"AR-1-B":{code:"B",name:"Buenos Aires"},"AR-1-K":{code:"K",name:"Catamarca"},"AR-1-H":{code:"H",name:"Chaco"},"AR-1-U":{code:"U",name:"Chubut"},"AR-1-X":{code:"X",name:"Crdoba"},"AR-1-W":{code:"W",name:"Corrientes"},"AR-1-E":{code:"E",name:"Entre Ros"},"AR-1-P":{code:"P",name:"Formosa"},"AR-1-Y":{code:"Y",name:"Jujuy"},"AR-1-L":{code:"L",name:"La Pampa"},"AR-1-F":{code:"F",name:"La Rioja"},"AR-1-M":{code:"M",name:"Mendoza"},"AR-1-N":{code:"N",name:"Misiones"},"AR-1-Q":{code:"Q",name:"Neuqun"},"AR-1-R":{code:"R",name:"Ro Negro"},"AR-1-A":{code:"A",name:"Salta"},"AR-1-J":{code:"J",name:"San Juan"},"AR-1-D":{code:"D",name:"San Luis"},"AR-1-Z":{code:"Z",name:"Santa Cruz"},"AR-1-S":{code:"S",name:"Santa Fe"},"AR-1-G":{code:"G",name:"Santiago del Estero"},"AR-1-V":{code:"V",name:"Tierra del Fuego"},"AR-1-T":{code:"T",name:"Tucumn"}},[o.Country.FR]:{"FR-1-01":{code:"01",name:"Ain"},"FR-1-02":{code:"02",name:"Aisne"},"FR-1-03":{code:"03",name:"Allier"},"FR-1-04":{code:"04",name:"Alpes (Hte-Provence)"},"FR-1-05":{code:"05",name:"Hautes Alpes"},"FR-1-06":{code:"06",name:"Alpes-Maritimes"},"FR-1-07":{code:"07",name:"Ardeche"},"FR-1-08":{code:"08",name:"Ardennes"},"FR-1-09":{code:"09",name:"Ariege"},"FR-1-10":{code:"10",name:"Aube"},"FR-1-11":{code:"11",name:"Aude"},"FR-1-12":{code:"12",name:"Aveyron"},"FR-1-67":{code:"67",name:"Bas-Rhin"},"FR-1-13":{code:"13",name:"Bouches-du-Rhone"},"FR-1-14":{code:"14",name:"Calvados"},"FR-1-15":{code:"15",name:"Cantal"},"FR-1-16":{code:"16",name:"Charente"},"FR-1-17":{code:"17",name:"Charente-Maritime"},"FR-1-18":{code:"18",name:"Cher"},"FR-1-19":{code:"19",name:"Correze"},"FR-1-97":{code:"97",name:"Corse-du-Nord"},"FR-1-20":{code:"20",name:"Corse-du-Sud"},"FR-1-21":{code:"21",name:"Cote-d'Or"},"FR-1-22":{code:"22",name:"Cotes-d'Armor"},"FR-1-23":{code:"23",name:"Creuse"},"FR-1-96":{code:"96",name:"D.O.M. T.O.M"},"FR-1-24":{code:"24",name:"Dordogne"},"FR-1-25":{code:"25",name:"Doubs"},"FR-1-26":{code:"26",name:"Drome"},"FR-1-91":{code:"91",name:"Essonne"},"FR-1-27":{code:"27",name:"Eure"},"FR-1-28":{code:"28",name:"Eure-et-Loir"},"FR-1-29":{code:"29",name:"Finistre"},"FR-1-30":{code:"30",name:"Gard"},"FR-1-31":{code:"31",name:"Haute Garonne"},"FR-1-32":{code:"32",name:"Gers"},"FR-1-33":{code:"33",name:"Gironde"},"FR-1-99":{code:"99",name:"Guyane"},"FR-1-100":{code:"100",name:"Haute-Corse"},"FR-1-68":{code:"68",name:"Haut-Rhin"},"FR-1-92":{code:"92",name:"Hauts-de-Seine"},"FR-1-34":{code:"34",name:"Herault"},"FR-1-35":{code:"35",name:"Ille-et-Vilaine"},"FR-1-36":{code:"36",name:"Indre"},"FR-1-37":{code:"37",name:"Indre-et-Loire"},"FR-1-38":{code:"38",name:"Isere"},"FR-1-39":{code:"39",name:"Jura"},"FR-1-40":{code:"40",name:"Landes"},"FR-1-41":{code:"41",name:"Loir-et-Cher"},"FR-1-42":{code:"42",name:"Loire"},"FR-1-43":{code:"43",name:"Haute Loire"},"FR-1-44":{code:"44",name:"Loire-Atlantique"},"FR-1-45":{code:"45",name:"Loiret"},"FR-1-46":{code:"46",name:"Lot"},"FR-1-47":{code:"47",name:"Lot-et-Garonne"},"FR-1-48":{code:"48",name:"Lozere"},"FR-1-49":{code:"49",name:"Maine-et-Loire"},"FR-1-50":{code:"50",name:"Manche"},"FR-1-51":{code:"51",name:"Marne"},"FR-1-52":{code:"52",name:"Haute Marne"},"FR-1-53":{code:"53",name:"Mayenne"},"FR-1-54":{code:"54",name:"Meurthe-et-Moselle"},"FR-1-55":{code:"55",name:"Meuse"},"FR-1-56":{code:"56",name:"Morbihan"},"FR-1-57":{code:"57",name:"Moselle"},"FR-1-58":{code:"58",name:"Nievre"},"FR-1-59":{code:"59",name:"Nord"},"FR-1-60":{code:"60",name:"Oise"},"FR-1-61":{code:"61",name:"Orne"},"FR-1-75":{code:"75",name:"Paris"},"FR-1-62":{code:"62",name:"Pas-de-Calais"},"FR-1-63":{code:"63",name:"Puy-de-Dme"},"FR-1-65":{code:"65",name:"Hautes Pyrenees"},"FR-1-64":{code:"64",name:"Pyrenees-Atlantiques"},"FR-1-66":{code:"66",name:"Pyrenees-Orientales"},"FR-1-69":{code:"69",name:"Rhone"},"FR-1-103":{code:"103",name:"Runion"},"FR-1-70":{code:"70",name:"Haute Saone"},"FR-1-71":{code:"71",name:"Saone-et-Loire"},"FR-1-72":{code:"72",name:"Sarthe"},"FR-1-73":{code:"73",name:"Savoie"},"FR-1-74":{code:"74",name:"Haute Savoie"},"FR-1-76":{code:"76",name:"Seine-Maritime"},"FR-1-93":{code:"93",name:"Seine-Saint-Denis"},"FR-1-77":{code:"77",name:"Seine-et-Marne"},"FR-1-79":{code:"79",name:"Deux Sevres"},"FR-1-80":{code:"80",name:"Somme"},"FR-1-81":{code:"81",name:"Tarn"},"FR-1-82":{code:"82",name:"Tarn-et-Garonne"},"FR-1-90":{code:"90",name:"Territoire-de-Belfort"},"FR-1-95":{code:"95",name:"Val-d'Oise"},"FR-1-94":{code:"94",name:"Val-de-Marne"},"FR-1-83":{code:"83",name:"Var"},"FR-1-84":{code:"84",name:"Vaucluse"},"FR-1-85":{code:"85",name:"Vendee"},"FR-1-86":{code:"86",name:"Vienne"},"FR-1-87":{code:"87",name:"Haute Vienne"},"FR-1-88":{code:"88",name:"Vosges"},"FR-1-89":{code:"89",name:"Yonne"},"FR-1-78":{code:"78",name:"Yvelines"}},[o.Country.ES]:{"ES-1-C":{code:"C",name:"A Corua"},"ES-1-VI":{code:"VI",name:"lava"},"ES-1-AB":{code:"AB",name:"Albacete"},"ES-1-A":{code:"A",name:"Alicante"},"ES-1-AL":{code:"AL",name:"Almera"},"ES-1-O":{code:"O",name:"Asturias"},"ES-1-AV":{code:"AV",name:"vila"},"ES-1-BA":{code:"BA",name:"Badajoz"},"ES-1-PM":{code:"PM",name:"Illes Balears"},"ES-1-B":{code:"B",name:"Barcelona"},"ES-1-BU":{code:"BU",name:"Burgos"},"ES-1-CC":{code:"CC",name:"Cceres"},"ES-1-CA":{code:"CA",name:"Cdiz"},"ES-1-S":{code:"S",name:"Cantabria"},"ES-1-CS":{code:"CS",name:"Castelln"},"ES-1-CR":{code:"CR",name:"Ciudad Real"},"ES-1-CO":{code:"CO",name:"Crdoba"},"ES-1-CU":{code:"CU",name:"Cuenca"},"ES-1-GI":{code:"GI",name:"Girona"},"ES-1-GR":{code:"GR",name:"Granada"},"ES-1-GU":{code:"GU",name:"Guadalajara"},"ES-1-SS":{code:"SS",name:"Gipuzkoa"},"ES-1-H":{code:"H",name:"Huelva"},"ES-1-HU":{code:"HU",name:"Huesca"},"ES-1-J":{code:"J",name:"Jan"},"ES-1-LO":{code:"LO",name:"La Rioja"},"ES-1-GC":{code:"GC",name:"Las Palmas"},"ES-1-LE":{code:"LE",name:"Len"},"ES-1-L":{code:"L",name:"Lleida"},"ES-1-LU":{code:"LU",name:"Lugo"},"ES-1-M":{code:"M",name:"Madrid"},"ES-1-MA":{code:"MA",name:"Mlaga"},"ES-1-MU":{code:"MU",name:"Murcia"},"ES-1-NA":{code:"NA",name:"Navarra"},"ES-1-OR":{code:"OR",name:"Ourense"},"ES-1-P":{code:"P",name:"Palencia"},"ES-1-PO":{code:"PO",name:"Pontevedra"},"ES-1-SA":{code:"SA",name:"Salamanca"},"ES-1-TF":{code:"TF",name:"Santa Cruz de Tenerife"},"ES-1-SG":{code:"SG",name:"Segovia"},"ES-1-SE":{code:"SE",name:"Sevilla"},"ES-1-SO":{code:"SO",name:"Soria"},"ES-1-T":{code:"T",name:"Tarragona"},"ES-1-TE":{code:"TE",name:"Teruel"},"ES-1-TO":{code:"TO",name:"Toledo"},"ES-1-V":{code:"V",name:"Valencia"},"ES-1-VA":{code:"VA",name:"Valladolid"},"ES-1-BI":{code:"BI",name:"Bizkaia"},"ES-1-ZA":{code:"ZA",name:"Zamora"},"ES-1-Z":{code:"Z",name:"Zaragoza"}},[o.Country.IT]:{"IT-1-AG":{code:"AG",name:"Agrigento"},"IT-1-AL":{code:"AL",name:"Alessandria"},"IT-1-AN":{code:"AN",name:"Ancona"},"IT-1-AO":{code:"AO",name:"Aosta"},"IT-1-AR":{code:"AR",name:"Arezzo"},"IT-1-AP":{code:"AP",name:"Ascoli Piceno"},"IT-1-AT":{code:"AT",name:"Asti"},"IT-1-AV":{code:"AV",name:"Avellino"},"IT-1-BA":{code:"BA",name:"Bari"},"IT-1-BT":{code:"BT",name:"Barletta-Andria-Trani"},"IT-1-BL":{code:"BL",name:"Belluno"},"IT-1-BN":{code:"BN",name:"Benevento"},"IT-1-BG":{code:"BG",name:"Bergamo"},"IT-1-BI":{code:"BI",name:"Biella"},"IT-1-BO":{code:"BO",name:"Bologna"},"IT-1-BZ":{code:"BZ",name:"Bolzano"},"IT-1-BS":{code:"BS",name:"Brescia"},"IT-1-BR":{code:"BR",name:"Brindisi"},"IT-1-CA":{code:"CA",name:"Cagliari"},"IT-1-CL":{code:"CL",name:"Caltanissetta"},"IT-1-CB":{code:"CB",name:"Campobasso"},"IT-1-CI":{code:"CI",name:"Carbonia-Iglesias"},"IT-1-CE":{code:"CE",name:"Caserta"},"IT-1-CT":{code:"CT",name:"Catania"},"IT-1-CZ":{code:"CZ",name:"Catanzaro"},"IT-1-CH":{code:"CH",name:"Chieti"},"IT-1-CO":{code:"CO",name:"Como"},"IT-1-CS":{code:"CS",name:"Cosenza"},"IT-1-CR":{code:"CR",name:"Cremona"},"IT-1-KR":{code:"KR",name:"Crotone"},"IT-1-CN":{code:"CN",name:"Cuneo"},"IT-1-EN":{code:"EN",name:"Enna"},"IT-1-FM":{code:"FM",name:"Fermo"},"IT-1-FE":{code:"FE",name:"Ferrara"},"IT-1-FI":{code:"FI",name:"Firenze"},"IT-1-FG":{code:"FG",name:"Foggia"},"IT-1-FC":{code:"FC",name:"Forl-Cesena"},"IT-1-FR":{code:"FR",name:"Frosinone"},"IT-1-GE":{code:"GE",name:"Genova"},"IT-1-GO":{code:"GO",name:"Gorizia"},"IT-1-GR":{code:"GR",name:"Grosseto"},"IT-1-IM":{code:"IM",name:"Imperia"},"IT-1-IS":{code:"IS",name:"Isernia"},"IT-1-SP":{code:"SP",name:"La Spezia"},"IT-1-AQ":{code:"AQ",name:"L'Aquila"},"IT-1-LT":{code:"LT",name:"Latina"},"IT-1-LE":{code:"LE",name:"Lecce"},"IT-1-LC":{code:"LC",name:"Lecco"},"IT-1-LI":{code:"LI",name:"Livorno"},"IT-1-LO":{code:"LO",name:"Lodi"},"IT-1-LU":{code:"LU",name:"Lucca"},"IT-1-MC":{code:"MC",name:"Macerata"},"IT-1-MN":{code:"MN",name:"Mantova"},"IT-1-MS":{code:"MS",name:"Massa-Carrara"},"IT-1-MT":{code:"MT",name:"Matera"},"IT-1-VS":{code:"VS",name:"Medio Campidano"},"IT-1-ME":{code:"ME",name:"Messina"},"IT-1-MI":{code:"MI",name:"Milano"},"IT-1-MO":{code:"MO",name:"Modena"},"IT-1-MB":{code:"MB",name:"Monza e Brianza"},"IT-1-NA":{code:"NA",name:"Napoli"},"IT-1-NO":{code:"NO",name:"Novara"},"IT-1-NU":{code:"NU",name:"Nuoro"},"IT-1-OG":{code:"OG",name:"Ogliastra"},"IT-1-OT":{code:"OT",name:"Olbia-Tempio"},"IT-1-OR":{code:"OR",name:"Oristano"},"IT-1-PD":{code:"PD",name:"Padova"},"IT-1-PA":{code:"PA",name:"Palermo"},"IT-1-PR":{code:"PR",name:"Parma"},"IT-1-PV":{code:"PV",name:"Pavia"},"IT-1-PG":{code:"PG",name:"Perugia"},"IT-1-PU":{code:"PU",name:"Pesaro e Urbino"},"IT-1-PE":{code:"PE",name:"Pescara"},"IT-1-PC":{code:"PC",name:"Piacenza"},"IT-1-PI":{code:"PI",name:"Pisa"},"IT-1-PT":{code:"PT",name:"Pistoia"},"IT-1-PN":{code:"PN",name:"Pordenone"},"IT-1-PZ":{code:"PZ",name:"Potenza"},"IT-1-PO":{code:"PO",name:"Prato"},"IT-1-RG":{code:"RG",name:"Ragusa"},"IT-1-RA":{code:"RA",name:"Ravenna"},"IT-1-RC":{code:"RC",name:"Reggio Calabria"},"IT-1-RE":{code:"RE",name:"Reggio Emilia"},"IT-1-RI":{code:"RI",name:"Rieti"},"IT-1-RN":{code:"RN",name:"Rimini"},"IT-1-RM":{code:"RM",name:"Roma"},"IT-1-RO":{code:"RO",name:"Rovigo"},"IT-1-SA":{code:"SA",name:"Salerno"},"IT-1-SS":{code:"SS",name:"Sassari"},"IT-1-SV":{code:"SV",name:"Savona"},"IT-1-SI":{code:"SI",name:"Siena"},"IT-1-SR":{code:"SR",name:"Siracusa"},"IT-1-SO":{code:"SO",name:"Sondrio"},"IT-1-TA":{code:"TA",name:"Taranto"},"IT-1-TE":{code:"TE",name:"Teramo"},"IT-1-TR":{code:"TR",name:"Terni"},"IT-1-TO":{code:"TO",name:"Torino"},"IT-1-TP":{code:"TP",name:"Trapani"},"IT-1-TN":{code:"TN",name:"Trento"},"IT-1-TV":{code:"TV",name:"Treviso"},"IT-1-TS":{code:"TS",name:"Trieste"},"IT-1-UD":{code:"UD",name:"Udine"},"IT-1-VA":{code:"VA",name:"Varese"},"IT-1-VE":{code:"VE",name:"Venezia"},"IT-1-VB":{code:"VB",name:"Verbano-Cusio-Ossola"},"IT-1-VC":{code:"VC",name:"Vercelli"},"IT-1-VR":{code:"VR",name:"Verona"},"IT-1-VV":{code:"VV",name:"Vibo Valentia"},"IT-1-VI":{code:"VI",name:"Vicenza"},"IT-1-VT":{code:"VT",name:"Viterbo"}},[o.Country.BE]:{"BE-1-VAN":{code:"VAN",name:"Antwerpen"},"BE-1-WBR":{code:"WBR",name:"Brabant wallon"},"BE-1-WHT":{code:"WHT",name:"Hainaut"},"BE-1-WLG":{code:"WLG",name:"Lige"},"BE-1-VLI":{code:"VLI",name:"Limburg"},"BE-1-WLX":{code:"WLX",name:"Luxembourg"},"BE-1-WNA":{code:"WNA",name:"Namur"},"BE-1-VOV":{code:"VOV",name:"Oost-Vlaanderen"},"BE-1-VBR":{code:"VBR",name:"Vlaams-Brabant"},"BE-1-VWV":{code:"VWV",name:"West-Vlaanderen"}}}},89690:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.processQuery=void 0;const o=r(32626),n=r(38495);t.processQuery=function(e){return{type:o.StaticDataQueryType.GEOGRAPHIC_STATES,collection:(0,n.getStatesForLocaleFormats)(e.level,e.localeFormats)}}},38495:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.findStateCode=t.findStateLevel2Name=t.findStateName=t.getStatesForLocaleFormats=t.isStateValid=void 0;const o=r(32626),n=r(80814);t.isStateValid=function(e,t){return t in function(e){return{...n.GeographicStatesLevel0[e]||{},...n.GeographicStatesLevel1[e]||{}}}(e)},t.getStatesForLocaleFormats=function(e,t){const r=e===o.GeographicStateLevel.LEVEL_0?n.GeographicStatesLevel0:n.GeographicStatesLevel1;return t?t.filter((e=>!!r[e])).reduce(((e,t)=>Object.assign({},e,{[t]:r[t]})),{}):r};const i=(e,t)=>{let r="";if(!e)return r;const o=Object.keys(t);for(let n=0;n<o.length&&!r;n++)r=t[o[n]]?.[e]?.name??"";return r||e};t.findStateName=e=>i(e,n.GeographicStatesLevel0);t.findStateLevel2Name=e=>i(e,n.GeographicStatesLevel1);t.findStateCode=(e,t)=>n.GeographicStatesLevel0[e]?.[t]?.code??""},74504:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.allowedExtensions=void 0,t.allowedExtensions=[".docx",".doc",".xlsx",".xls",".ppt",".pptx",".pdf",".txt",".zip",".key",".png",".jpg",".jpeg",".gif",".tiff",".bmp",".heif",".heic",".odt",".avi",".ogg",".m4a",".mov",".mp3",".mp4",".mpg",".wav",".ods",".rar",".7z",".mkv",".raw",".db",".aac",".3gp",".webm",".flac",".csv",".wmv",".tar",".odp",".odg",".gzip"]},98337:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getSecureDocumentsAllowedMimeTypes=t.getSecureDocumentsAllowedExtensions=void 0;const o=r(74504),n=r(56196);t.getSecureDocumentsAllowedExtensions=function(){return o.allowedExtensions},t.getSecureDocumentsAllowedMimeTypes=function(){return n.allowedMimeTypes}},56196:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.allowedMimeTypes=void 0,t.allowedMimeTypes=["application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document","application/vnd.ms-excel","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","application/vnd.ms-powerpoint","application/vnd.openxmlformats-officedocument.presentationml.presentation","application/pdf","text/plain","application/zip","application/x-zip-compressed","multipart/x-zip","application/pkcs8","application/x-iwork-keynote-sffkey","image/png","image/jpeg","image/gif","image/tiff","image/bmp","image/heic","image/heif","image/heic-sequence","image/heif-sequence","application/vnd.oasis.opendocument.text","video/avi","video/msvideo","video/x-msvideo","audio/ogg","video/ogg","video/quicktime","audio/mpeg","audio/mp4","video/mp4","video/mpeg","audio/wav","audio/x-wav","video/x-ms-wmv","application/vnd.oasis.opendocument.spreadsheet","application/x-rar-compressed","application/x-rar","application/vnd.rar","application/x-7z-compressed","video/x-matroska","video/raw","application/x-sqlite3","application/x-ole-storage","audio/aac","audio/x-aac","video/3gpp","audio/webm","video/webm","audio/flac","application/gzip","application/tar","application/x-tar","application/tar+gzip","application/x-compressed-tar","application/x-gzip","application/octet-stream","application/vnd.oasis.opendocument.presentation","application/vnd.oasis.opendocument.graphics"]},33332:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.makeStaticDataController=void 0;const o=r(32626),n=r(39003),i=r(89690);t.makeStaticDataController=()=>({query:s});class a extends Error{constructor(e){super(`Unexpected StaticDataQuery type (${e})`)}}function s(e){try{return{results:(t=e.queries,t.map((e=>{switch(e.type){case o.StaticDataQueryType.CALLING_CODES:return(0,n.processQuery)();case o.StaticDataQueryType.GEOGRAPHIC_STATES:return(0,i.processQuery)(e);default:throw new a(e)}}))),error:null}}catch(e){return{results:[],error:e}}var t}},64765:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.bootstrap=void 0;const o=r(83400);t.bootstrap=e=>{e.register(o.config)}},49183:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.bootstrap=void 0;var o=r(64765);Object.defineProperty(t,"bootstrap",{enumerable:!0,get:function(){return o.bootstrap}})},92215:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.convertDeviceKeysToUki=t.convertUkiToDeviceKeys=void 0;t.convertUkiToDeviceKeys=e=>{if(e){const t=e.split("-");if(t.length>0){const[r]=t;return{accessKey:r,secretKey:e}}}return null};t.convertDeviceKeysToUki=e=>`${e.accessKey}-${e.secretKey}`},27885:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.hasSpecialUserGroupAccessInSpace=t.hasTACAccessInCurrentSpace=t.getNodePremiumStatusSpaceData=t.makeSpaceData=t.isGroupManagerInCurrentSpace=t.isTeamAdminInCurrentSpace=t.isBillingAdminInCurrentSpace=t.getCurrentTeamId=t.getCurrentSpaceId=t.getCurrentSpace=void 0;const o=r(66833);t.getCurrentSpace=e=>e.spaces.find((e=>"accepted"===e.details.status));t.getCurrentSpaceId=e=>{const r=(0,t.getCurrentSpace)(e);return r?Number(r.teamId):void 0},t.getCurrentTeamId=t.getCurrentSpaceId;t.isBillingAdminInCurrentSpace=e=>{const r=(0,t.getCurrentSpace)(e);return!!r&&r.details.isBillingAdmin};t.isTeamAdminInCurrentSpace=e=>{const r=(0,t.getCurrentSpace)(e);return!!r&&r.details.isTeamAdmin};function n(e){return{spaces:e}}t.isGroupManagerInCurrentSpace=e=>{const r=(0,t.getCurrentSpace)(e);return!!r&&r.details.isGroupManager},t.makeSpaceData=n;t.getNodePremiumStatusSpaceData=e=>{const t=e.getLocalSettings().nodePremiumStatus?.spaces;return n((0,o.getFreshSpaceData)(t??[]))};t.hasTACAccessInCurrentSpace=e=>{const r=(0,t.getNodePremiumStatusSpaceData)(e),o=(0,t.getCurrentSpace)(r);return!!o&&(o.details.isTeamAdmin||o.details.isBillingAdmin||o.details.isGroupManager)};t.hasSpecialUserGroupAccessInSpace=(e,t)=>{const r=t.spaces.find((t=>t.teamId===e&&"accepted"===t.details.status));return r?.details.isTeamAdmin||r?.details.isGroupManager}},80722:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.makeStoreService=void 0;const o=r(90599),n=r(18948),i=r(84762);t.makeStoreService=e=>{const t=e?.sessionStorage,r=e?.store||(0,i.createStore)(t),a=((e,t)=>{if(t){let t=()=>{};const r=new Promise((e=>{t=e})),n=(0,o.persistStore)(e,null,t);return{completeRehydration:()=>r,flush:()=>n.flush()}}return{completeRehydration:()=>Promise.resolve(),flush:()=>Promise.resolve()}})(r,t),s=()=>r.getState(),c=new n.BehaviorSubject(s());return r.subscribe((()=>c.next(s()))),{...a,dispatch:e=>r.dispatch(e),getABTesting:()=>s().device.abtesting,getAccountInfo:()=>s().userSession.account,getAccountCreation:()=>s().userSession.accountCreation,getLocation:()=>s().device.platform.location,getSdkAuthentication:()=>s().userSession.sdkAuthentication,getLocalSettings:()=>s().userSession.localSettings,getPersonalData:()=>s().userSession.personalData,getPersonalSettings:()=>s().userSession.personalSettings,getNotificationStatus:()=>s().userSession.notificationsStatus,getPlatform:()=>s().device.platform,getPlatformInfo:()=>s().device.platform.info,getIconsCache:()=>s().userSession.iconsCache,getSharingData:()=>s().userSession.sharingData,getSpaceData:()=>s().userSession.spaceData,getState$:()=>c,getState:()=>s(),getStore:()=>r,getSubscriptionCode:()=>s().userSession.account.subscriptionCode,getSyncStatus:()=>s().userSession.sync,getTeamAdminData:()=>s().userSession.teamAdminData,getUserLogin:()=>s().userSession.account.login,getUserSession:()=>s().userSession.session,isAuthenticated:()=>Boolean(s().userSession.session.sessionId&&s().userSession.account.isAuthenticated),hasSessionId:()=>Boolean(s().userSession.session.sessionId)}}},68525:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getGlobalPersistenceReducer=void 0;const o=r(90599),n=r(33642),i=e=>(t,r)=>({...t,...Object.keys(e).reduce(((o,n)=>(o[n]=t[n],e[n].forEach((e=>{o[n][e]=r[n][e]})),o)),{})}),a=e=>Object.keys(e).map((t=>(0,n.createBlacklistFilter)(t,e[t])));t.getGlobalPersistenceReducer=(e,t,r)=>{if(r){const n={key:"root",stateReconciler:i(t),storage:r,version:1,serialize:!1,deserialize:!1,transforms:a(t)};return(0,o.persistReducer)(n,e)}return e}},84762:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.createStore=t.globalReducer=void 0;const o=r(82422),n=r(96186),i=r(9149),a=r(34007),s=r(10319),c=r(52653),d=r(4572),u=r(28417),l=r(53439),p=r(75417),S=r(45316),g=r(69018),m=r(68525),A=r(19764),y=r(73651),E=(0,o.combineReducers)({platform:i.default,abtesting:a.default,application:s.applicationReducer,remoteFile:p.remoteFileReducer,globalExtensionSettings:S.globalExtensionSettingsReducer,antiPhishing:g.AntiPhishingReducer,eventLogger:A.eventLoggerReducer,killswitch:y.default});t.globalReducer=(e,t)=>{const r=e?e.device:void 0,o=e?e.authentication:void 0,i=e?e.userSession:void 0,a=e?e.inMemoryInterSessionUnsynced:void 0;return{device:E(r,t),authentication:(0,c.authenticationReducer)(o,t),userSession:(0,d.userSessionReducer)(i,t),inMemoryInterSessionUnsynced:(0,n.inMemoryInterSessionUnsyncedSliceReducer)(a,t)}},t.createStore=function(e,r){const n=(0,m.getGlobalPersistenceReducer)(t.globalReducer,{device:l.blacklistedDeviceKeys,userSession:u.blacklistedUserSessionKeys},e);return(0,o.createStore)(n,r)}}}]);